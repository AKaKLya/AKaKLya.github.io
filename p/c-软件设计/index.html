<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="C++ STL Â∫ì‰∏≠‰ΩøÁî®ÁöÑËÆæËÆ°Ê®°Âºè C++ Ê†áÂáÜÊ®°ÊùøÂ∫ìÔºàSTLÔºâÁöÑËÆæËÆ°‰ª•Ê≥õÂûãÁºñÁ®ã‰∏∫Ê†∏ÂøÉÔºå‰ΩÜÂÖ∂‰∏≠‰πüÂ∑ßÂ¶ôËûçÂÖ•‰∫ÜÂ§öÁßçÁªèÂÖ∏ËÆæËÆ°Ê®°ÂºèÁöÑÊÄùÊÉ≥„ÄÇ‰ª•‰∏ãÊòØ STL ‰∏≠‰∏Ä‰∫õÂÖ∏ÂûãËÆæËÆ°Ê®°ÂºèÁöÑÂ∫îÁî®ÂèäÁ§∫‰æãÔºö 1. Ëø≠‰ª£Âô®Ê®°Âºè (Iterator Pattern) ÁõÆÁöÑÔºöÊèê‰æõ‰∏ÄÁßçÁªü‰∏ÄÁöÑÊñπÂºèÈÅçÂéÜÂÆπÂô®ÂÖÉÁ¥†ÔºåÊó†ÈúÄÊö¥Èú≤ÂÆπÂô®ÂÜÖÈÉ®ÁªìÊûÑ„ÄÇ STL ÂÆûÁé∞Ôºö ÊâÄÊúâÂÆπÂô®ÔºàÂ¶Ç vector, list, mapÔºâÂùáÊèê‰æõ begin() Âíå end() ÊñπÊ≥ïËøîÂõûËø≠‰ª£Âô®„ÄÇ ÁÆóÊ≥ïÔºàÂ¶Ç for_each, copyÔºâÈÄöËøáËø≠‰ª£Âô®Êìç‰ΩúÂÆπÂô®Ôºå‰∏éÂÖ∑‰ΩìÂÆπÂô®Á±ªÂûãËß£ËÄ¶„ÄÇ 1 2 3 4 5 std::vector&lt;int&gt; vec = {1, 2, 3}; // ‰ΩøÁî®Ëø≠‰ª£Âô®ÈÅçÂéÜ for (auto it = vec.begin(); it != vec.end(); ++it) { std::cout &lt;&lt; *it &lt;&lt; &#34; &#34;; } 2. ÈÄÇÈÖçÂô®Ê®°Âºè (Adapter Pattern) ÁõÆÁöÑÔºöËΩ¨Êç¢Êé•Âè£‰ª•ÂÖºÂÆπ‰∏çÂêåÁªÑ‰ª∂„ÄÇ STL ÂÆûÁé∞Ôºö ÂÆπÂô®ÈÄÇÈÖçÂô®Ôºöstack, queue, priority_queue Âü∫‰∫éÂ∫ïÂ±ÇÂÆπÂô®ÔºàÂ¶Ç dequeÔºâÈÄÇÈÖçÊé•Âè£„ÄÇ Ëø≠‰ª£Âô®ÈÄÇÈÖçÂô®Ôºöreverse_iterator ÂèçÂêëÈÅçÂéÜÂÆπÂô®Ôºåback_insert_iterator Áî®‰∫éÂ∞æÈÉ®ÊèíÂÖ•„ÄÇ 1 2 3 4 // Âü∫‰∫é deque ÂÆûÁé∞Ê†à std::stack&lt;int, std::deque&lt;int&gt;&gt; stk; stk.">
<title>C&#43;&#43; ËΩØ‰ª∂ËÆæËÆ°</title>

<link rel='canonical' href='http://localhost:1313/p/c-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="C++ ËΩØ‰ª∂ËÆæËÆ°">
<meta property='og:description' content="C++ STL Â∫ì‰∏≠‰ΩøÁî®ÁöÑËÆæËÆ°Ê®°Âºè C++ Ê†áÂáÜÊ®°ÊùøÂ∫ìÔºàSTLÔºâÁöÑËÆæËÆ°‰ª•Ê≥õÂûãÁºñÁ®ã‰∏∫Ê†∏ÂøÉÔºå‰ΩÜÂÖ∂‰∏≠‰πüÂ∑ßÂ¶ôËûçÂÖ•‰∫ÜÂ§öÁßçÁªèÂÖ∏ËÆæËÆ°Ê®°ÂºèÁöÑÊÄùÊÉ≥„ÄÇ‰ª•‰∏ãÊòØ STL ‰∏≠‰∏Ä‰∫õÂÖ∏ÂûãËÆæËÆ°Ê®°ÂºèÁöÑÂ∫îÁî®ÂèäÁ§∫‰æãÔºö 1. Ëø≠‰ª£Âô®Ê®°Âºè (Iterator Pattern) ÁõÆÁöÑÔºöÊèê‰æõ‰∏ÄÁßçÁªü‰∏ÄÁöÑÊñπÂºèÈÅçÂéÜÂÆπÂô®ÂÖÉÁ¥†ÔºåÊó†ÈúÄÊö¥Èú≤ÂÆπÂô®ÂÜÖÈÉ®ÁªìÊûÑ„ÄÇ STL ÂÆûÁé∞Ôºö ÊâÄÊúâÂÆπÂô®ÔºàÂ¶Ç vector, list, mapÔºâÂùáÊèê‰æõ begin() Âíå end() ÊñπÊ≥ïËøîÂõûËø≠‰ª£Âô®„ÄÇ ÁÆóÊ≥ïÔºàÂ¶Ç for_each, copyÔºâÈÄöËøáËø≠‰ª£Âô®Êìç‰ΩúÂÆπÂô®Ôºå‰∏éÂÖ∑‰ΩìÂÆπÂô®Á±ªÂûãËß£ËÄ¶„ÄÇ 1 2 3 4 5 std::vector&lt;int&gt; vec = {1, 2, 3}; // ‰ΩøÁî®Ëø≠‰ª£Âô®ÈÅçÂéÜ for (auto it = vec.begin(); it != vec.end(); ++it) { std::cout &lt;&lt; *it &lt;&lt; &#34; &#34;; } 2. ÈÄÇÈÖçÂô®Ê®°Âºè (Adapter Pattern) ÁõÆÁöÑÔºöËΩ¨Êç¢Êé•Âè£‰ª•ÂÖºÂÆπ‰∏çÂêåÁªÑ‰ª∂„ÄÇ STL ÂÆûÁé∞Ôºö ÂÆπÂô®ÈÄÇÈÖçÂô®Ôºöstack, queue, priority_queue Âü∫‰∫éÂ∫ïÂ±ÇÂÆπÂô®ÔºàÂ¶Ç dequeÔºâÈÄÇÈÖçÊé•Âè£„ÄÇ Ëø≠‰ª£Âô®ÈÄÇÈÖçÂô®Ôºöreverse_iterator ÂèçÂêëÈÅçÂéÜÂÆπÂô®Ôºåback_insert_iterator Áî®‰∫éÂ∞æÈÉ®ÊèíÂÖ•„ÄÇ 1 2 3 4 // Âü∫‰∫é deque ÂÆûÁé∞Ê†à std::stack&lt;int, std::deque&lt;int&gt;&gt; stk; stk.">
<meta property='og:url' content='http://localhost:1313/p/c-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/'>
<meta property='og:site_name' content='AKaKLya'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='1074-01-04T12:57:17&#43;08:00'/><meta property='article:modified_time' content='1074-01-04T12:57:17&#43;08:00'/>
<meta name="twitter:title" content="C++ ËΩØ‰ª∂ËÆæËÆ°">
<meta name="twitter:description" content="C++ STL Â∫ì‰∏≠‰ΩøÁî®ÁöÑËÆæËÆ°Ê®°Âºè C++ Ê†áÂáÜÊ®°ÊùøÂ∫ìÔºàSTLÔºâÁöÑËÆæËÆ°‰ª•Ê≥õÂûãÁºñÁ®ã‰∏∫Ê†∏ÂøÉÔºå‰ΩÜÂÖ∂‰∏≠‰πüÂ∑ßÂ¶ôËûçÂÖ•‰∫ÜÂ§öÁßçÁªèÂÖ∏ËÆæËÆ°Ê®°ÂºèÁöÑÊÄùÊÉ≥„ÄÇ‰ª•‰∏ãÊòØ STL ‰∏≠‰∏Ä‰∫õÂÖ∏ÂûãËÆæËÆ°Ê®°ÂºèÁöÑÂ∫îÁî®ÂèäÁ§∫‰æãÔºö 1. Ëø≠‰ª£Âô®Ê®°Âºè (Iterator Pattern) ÁõÆÁöÑÔºöÊèê‰æõ‰∏ÄÁßçÁªü‰∏ÄÁöÑÊñπÂºèÈÅçÂéÜÂÆπÂô®ÂÖÉÁ¥†ÔºåÊó†ÈúÄÊö¥Èú≤ÂÆπÂô®ÂÜÖÈÉ®ÁªìÊûÑ„ÄÇ STL ÂÆûÁé∞Ôºö ÊâÄÊúâÂÆπÂô®ÔºàÂ¶Ç vector, list, mapÔºâÂùáÊèê‰æõ begin() Âíå end() ÊñπÊ≥ïËøîÂõûËø≠‰ª£Âô®„ÄÇ ÁÆóÊ≥ïÔºàÂ¶Ç for_each, copyÔºâÈÄöËøáËø≠‰ª£Âô®Êìç‰ΩúÂÆπÂô®Ôºå‰∏éÂÖ∑‰ΩìÂÆπÂô®Á±ªÂûãËß£ËÄ¶„ÄÇ 1 2 3 4 5 std::vector&lt;int&gt; vec = {1, 2, 3}; // ‰ΩøÁî®Ëø≠‰ª£Âô®ÈÅçÂéÜ for (auto it = vec.begin(); it != vec.end(); ++it) { std::cout &lt;&lt; *it &lt;&lt; &#34; &#34;; } 2. ÈÄÇÈÖçÂô®Ê®°Âºè (Adapter Pattern) ÁõÆÁöÑÔºöËΩ¨Êç¢Êé•Âè£‰ª•ÂÖºÂÆπ‰∏çÂêåÁªÑ‰ª∂„ÄÇ STL ÂÆûÁé∞Ôºö ÂÆπÂô®ÈÄÇÈÖçÂô®Ôºöstack, queue, priority_queue Âü∫‰∫éÂ∫ïÂ±ÇÂÆπÂô®ÔºàÂ¶Ç dequeÔºâÈÄÇÈÖçÊé•Âè£„ÄÇ Ëø≠‰ª£Âô®ÈÄÇÈÖçÂô®Ôºöreverse_iterator ÂèçÂêëÈÅçÂéÜÂÆπÂô®Ôºåback_insert_iterator Áî®‰∫éÂ∞æÈÉ®ÊèíÂÖ•„ÄÇ 1 2 3 4 // Âü∫‰∫é deque ÂÆûÁé∞Ê†à std::stack&lt;int, std::deque&lt;int&gt;&gt; stk; stk.">
  


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/d_hu15622052934649275245.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">AKaKLya</a></h1>
            <h2 class="site-description">ÁÇπÂáª</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#c-stl-Â∫ì‰∏≠‰ΩøÁî®ÁöÑËÆæËÆ°Ê®°Âºè">C++ STL Â∫ì‰∏≠‰ΩøÁî®ÁöÑËÆæËÆ°Ê®°Âºè</a></li>
    <li><a href="#Áé∞‰ª£cËÆæËÆ°Ê®°Âºè">Áé∞‰ª£C++ËÆæËÆ°Ê®°Âºè</a>
      <ol>
        <li><a href="#‰∏ÄÂàõÂª∫ÂûãÊ®°Âºè5Áßç">‰∏Ä„ÄÅÂàõÂª∫ÂûãÊ®°ÂºèÔºà5ÁßçÔºâ</a></li>
        <li><a href="#‰∫åÁªìÊûÑÂûãÊ®°Âºè7Áßç">‰∫å„ÄÅÁªìÊûÑÂûãÊ®°ÂºèÔºà7ÁßçÔºâ</a></li>
        <li><a href="#‰∏âË°å‰∏∫ÂûãÊ®°Âºè11Áßç">‰∏â„ÄÅË°å‰∏∫ÂûãÊ®°ÂºèÔºà11ÁßçÔºâ</a></li>
        <li><a href="#ÂõõÁé∞‰ª£cÂÖ≥ÈîÆ‰ºòÂåñÊäÄÊúØ">Âõõ„ÄÅÁé∞‰ª£C++ÂÖ≥ÈîÆ‰ºòÂåñÊäÄÊúØ</a></li>
        <li><a href="#‰∫îÊ®°ÂºèÈÄâÊã©Âª∫ËÆÆË°®">‰∫î„ÄÅÊ®°ÂºèÈÄâÊã©Âª∫ËÆÆË°®</a></li>
      </ol>
    </li>
    <li><a href="#ÂÖ≥‰∫éÊú¨‰π¶">ÂÖ≥‰∫éÊú¨‰π¶</a></li>
    <li><a href="#Á¨¨‰∏ÄÁ´†-ËΩØ‰ª∂ËÆæËÆ°ÁöÑËâ∫ÊúØ">Á¨¨‰∏ÄÁ´† ËΩØ‰ª∂ËÆæËÆ°ÁöÑËâ∫ÊúØ</a>
      <ol>
        <li><a href="#ÂáÜÂàô1ÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄß">ÂáÜÂàô1ÔºöÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄß</a></li>
        <li><a href="#ÂáÜÂàô2‰∏∫ÂèòÂåñËÄåËÆæËÆ°">ÂáÜÂàô2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°</a></li>
        <li><a href="#ÂáÜÂàô3ÂàÜÁ¶ªÊé•Âè£‰ª•ÈÅøÂÖç‰∫∫‰∏∫ËÄ¶Âêà">ÂáÜÂàô3ÔºöÂàÜÁ¶ªÊé•Âè£‰ª•ÈÅøÂÖç‰∫∫‰∏∫ËÄ¶Âêà</a></li>
        <li><a href="#ÂáÜÂàô4‰∏∫ÂèØÊµãËØïÊÄßËÄåËÆæËÆ°">ÂáÜÂàô4Ôºö‰∏∫ÂèØÊµãËØïÊÄßËÄåËÆæËÆ°</a></li>
        <li><a href="#ÂáÜÂàô5‰∏∫Êâ©Â±ïËÄåËÆæËÆ°">ÂáÜÂàô5Ôºö‰∏∫Êâ©Â±ïËÄåËÆæËÆ°</a></li>
      </ol>
    </li>
    <li><a href="#Á¨¨‰∫åÁ´†-Âª∫Á´ãÊäΩË±°ÁöÑËâ∫ÊúØ">Á¨¨‰∫åÁ´† Âª∫Á´ãÊäΩË±°ÁöÑËâ∫ÊúØ</a>
      <ol>
        <li><a href="#ÂáÜÂàô6ÈÅµÂæ™ÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫">ÂáÜÂàô6ÔºöÈÅµÂæ™ÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫</a></li>
        <li><a href="#ÂáÜÂàô7ÁêÜËß£Âü∫Á±ª‰∏éÊ¶ÇÂøµÁöÑÊ∑±Â±ÇÂÖ±ÊÄß">ÂáÜÂàô7ÔºöÁêÜËß£Âü∫Á±ª‰∏éÊ¶ÇÂøµÁöÑÊ∑±Â±ÇÂÖ±ÊÄß</a></li>
        <li><a href="#ÂáÜÂàô8ÁêÜËß£ÈáçËΩΩÈõÜÂêàÁöÑËØ≠‰πâË¶ÅÊ±Ç">ÂáÜÂàô8ÔºöÁêÜËß£ÈáçËΩΩÈõÜÂêàÁöÑËØ≠‰πâË¶ÅÊ±Ç</a></li>
        <li><a href="#ÂáÜÂàô9ÂÖ≥Ê≥®ÊäΩË±°ÁöÑÊâÄÊúâÊùÉÂΩíÂ±û">ÂáÜÂàô9ÔºöÂÖ≥Ê≥®ÊäΩË±°ÁöÑÊâÄÊúâÊùÉÂΩíÂ±û</a></li>
        <li><a href="#ÂáÜÂàô10Âª∫ËÆÆÂàõÂª∫Êû∂ÊûÑËÆæËÆ°ÊñáÊ°£">ÂáÜÂàô10ÔºöÂª∫ËÆÆÂàõÂª∫Êû∂ÊûÑËÆæËÆ°ÊñáÊ°£</a></li>
      </ol>
    </li>
    <li><a href="#Á¨¨‰∏âÁ´†-ËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉ‰ª∑ÂÄº">Á¨¨‰∏âÁ´† ËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉ‰ª∑ÂÄº</a>
      <ol>
        <li><a href="#ÂáÜÂàô-11ÁêÜËß£ËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉ‰ª∑ÂÄº">ÂáÜÂàô 11ÔºöÁêÜËß£ËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉ‰ª∑ÂÄº</a></li>
        <li><a href="#ÂáÜÂàô12Ë≠¶ÊÉïËÆæËÆ°Ê®°ÂºèÁöÑËØØËß£">ÂáÜÂàô12ÔºöË≠¶ÊÉïËÆæËÆ°Ê®°ÂºèÁöÑËØØËß£</a></li>
        <li><a href="#ÂáÜÂàô13ËÆæËÆ°Ê®°ÂºèÊó†Â§Ñ‰∏çÂú®">ÂáÜÂàô13ÔºöËÆæËÆ°Ê®°ÂºèÊó†Â§Ñ‰∏çÂú®</a></li>
        <li><a href="#ÂáÜÂàô14‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞Êù•‰º†ËææÊÑèÂõæ">ÂáÜÂàô14Ôºö‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞Êù•‰º†ËææÊÑèÂõæ</a></li>
      </ol>
    </li>
    <li><a href="#Á¨¨ÂõõÁ´†-ËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè">Á¨¨ÂõõÁ´† ËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè</a>
      <ol>
        <li><a href="#ÂáÜÂàô15‰∏∫Ê∑ªÂä†Á±ªÂûãÊàñÊìç‰ΩúËøõË°åËÆæËÆ°">ÂáÜÂàô15Ôºö‰∏∫Ê∑ªÂä†Á±ªÂûãÊàñÊìç‰ΩúËøõË°åËÆæËÆ°</a></li>
        <li><a href="#ÂáÜÂàô16‰ΩøÁî®ËÆøÈóÆËÄÖÊ®°ÂºèÊâ©Â±ïÊìç‰Ωú">ÂáÜÂàô16Ôºö‰ΩøÁî®ËÆøÈóÆËÄÖÊ®°ÂºèÊâ©Â±ïÊìç‰Ωú</a></li>
        <li><a href="#ÂáÜÂàô17ËÄÉËôë‰ΩøÁî®-stdvariant-ÂÆûÁé∞ËÆøÈóÆËÄÖ">ÂáÜÂàô17ÔºöËÄÉËôë‰ΩøÁî® std::variant ÂÆûÁé∞ËÆøÈóÆËÄÖ</a></li>
        <li><a href="#ÂáÜÂàô18Ë≠¶ÊÉïÊó†ÁéØËÆøÈóÆËÄÖÁöÑÊÄßËÉΩ">ÂáÜÂàô18ÔºöË≠¶ÊÉïÊó†ÁéØËÆøÈóÆËÄÖÁöÑÊÄßËÉΩ</a></li>
      </ol>
    </li>
    <li><a href="#Á¨¨‰∫îÁ´†-Á≠ñÁï•ÂíåÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè">Á¨¨‰∫îÁ´† Á≠ñÁï•ÂíåÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</a>
      <ol>
        <li><a href="#ÂáÜÂàô19‰ΩøÁî®Á≠ñÁï•ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÂÆûÁé∞ÊñπÂºè">ÂáÜÂàô19Ôºö‰ΩøÁî®Á≠ñÁï•ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÂÆûÁé∞ÊñπÂºè</a></li>
        <li><a href="#ÂáÜÂàô20‰ºòÂÖà‰ΩøÁî®ÁªÑÂêàËÄåÈùûÁªßÊâø">ÂáÜÂàô20Ôºö‰ºòÂÖà‰ΩøÁî®ÁªÑÂêàËÄåÈùûÁªßÊâø</a></li>
        <li><a href="#ÂáÜÂàô21‰ΩøÁî®ÂëΩ‰ª§Ê®°ÂºèÈöîÁ¶ªÊìç‰ΩúÂÜÖÂÆπ">ÂáÜÂàô21Ôºö‰ΩøÁî®ÂëΩ‰ª§Ê®°ÂºèÈöîÁ¶ªÊìç‰ΩúÂÜÖÂÆπ</a></li>
        <li><a href="#ÂáÜÂàô22‰ºòÂÖà‰ΩøÁî®ÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ">ÂáÜÂàô22Ôºö‰ºòÂÖà‰ΩøÁî®ÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ</a></li>
        <li><a href="#ÂáÜÂàô23‰ºòÂÖà‰ΩøÁî®Âü∫‰∫éÂÄºÁöÑÁ≠ñÁï•ÂíåÂëΩ‰ª§ÂÆûÁé∞">ÂáÜÂàô23Ôºö‰ºòÂÖà‰ΩøÁî®Âü∫‰∫éÂÄºÁöÑÁ≠ñÁï•ÂíåÂëΩ‰ª§ÂÆûÁé∞</a></li>
      </ol>
    </li>
    <li><a href="#Á¨¨ÂÖ≠Á´†-ÈÄÇÈÖçÂô®ËßÇÂØüËÄÖÂíåcrtpËÆæËÆ°Ê®°Âºè">Á¨¨ÂÖ≠Á´† ÈÄÇÈÖçÂô®„ÄÅËßÇÂØüËÄÖÂíåCRTPËÆæËÆ°Ê®°Âºè</a>
      <ol>
        <li><a href="#ÂáÜÂàô24‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£">ÂáÜÂàô24Ôºö‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£</a></li>
        <li><a href="#ÂáÜÂàô25Â∫îÁî®ËßÇÂØüËÄÖ‰Ωú‰∏∫ÊäΩË±°ÈÄöÁü•Êú∫Âà∂">ÂáÜÂàô25ÔºöÂ∫îÁî®ËßÇÂØüËÄÖ‰Ωú‰∏∫ÊäΩË±°ÈÄöÁü•Êú∫Âà∂</a></li>
        <li><a href="#ÂáÜÂàô26‰ΩøÁî®crtpÂºïÂÖ•ÈùôÊÄÅÁ±ªÂûãÁ±ªÂà´"><strong>ÂáÜÂàô26Ôºö‰ΩøÁî®CRTPÂºïÂÖ•ÈùôÊÄÅÁ±ªÂûãÁ±ªÂà´</strong></a></li>
        <li><a href="#ÂáÜÂàô27‰ΩøÁî®-crtp-ÂÆûÁé∞ÈùôÊÄÅÊ∑∑ÂÖ•Á±ª">ÂáÜÂàô27Ôºö‰ΩøÁî® CRTP ÂÆûÁé∞ÈùôÊÄÅÊ∑∑ÂÖ•Á±ª</a></li>
      </ol>
    </li>
    <li><a href="#Á¨¨‰∏ÉÁ´†-Ê°•Êé•ÂéüÂûãÂíåÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè">Á¨¨‰∏ÉÁ´† Ê°•Êé•„ÄÅÂéüÂûãÂíåÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè</a>
      <ol>
        <li><a href="#ÂáÜÂàô-28ÊûÑÂª∫Ê°•Ê¢Å‰ª•Ê∂àÈô§Áâ©ÁêÜ‰æùËµñ">ÂáÜÂàô 28ÔºöÊûÑÂª∫Ê°•Ê¢Å‰ª•Ê∂àÈô§Áâ©ÁêÜ‰æùËµñ</a></li>
        <li><a href="#ÂáÜÂàô-29Ê≥®ÊÑèÊ°•Êé•ÁöÑÊÄßËÉΩÂ¢ûÁõä‰∏éÊçüÂ§±">ÂáÜÂàô 29ÔºöÊ≥®ÊÑèÊ°•Êé•ÁöÑÊÄßËÉΩÂ¢ûÁõä‰∏éÊçüÂ§±</a></li>
        <li><a href="#ÂáÜÂàô-30Â∫îÁî®ÂéüÂûãÊ®°ÂºèËøõË°åÊäΩË±°Â§çÂà∂Êìç‰Ωú">ÂáÜÂàô 30ÔºöÂ∫îÁî®ÂéüÂûãÊ®°ÂºèËøõË°åÊäΩË±°Â§çÂà∂Êìç‰Ωú</a></li>
        <li><a href="#ÂáÜÂàô-31‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÂÆûÁé∞Èùû‰æµÂÖ•ÂºèËøêË°åÊó∂Â§öÊÄÅ">ÂáÜÂàô 31Ôºö‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÂÆûÁé∞Èùû‰æµÂÖ•ÂºèËøêË°åÊó∂Â§öÊÄÅ</a></li>
      </ol>
    </li>
    <li><a href="#Á¨¨ÂÖ´Á´†-Á±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°Âºè">Á¨¨ÂÖ´Á´† Á±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°Âºè</a>
      <ol>
        <li><a href="#ÂáÜÂàô32ËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§Êõø‰ª£ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ">ÂáÜÂàô32ÔºöËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§Êõø‰ª£ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ</a></li>
        <li><a href="#ÂáÜÂàô33‰∫ÜËß£Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ">ÂáÜÂàô33Ôºö‰∫ÜËß£Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ</a></li>
        <li><a href="#ÂáÜÂàô34Ê≥®ÊÑèÊã•ÊúâÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®ÁöÑËÆæÁΩÆÊàêÊú¨">ÂáÜÂàô34ÔºöÊ≥®ÊÑèÊã•ÊúâÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®ÁöÑËÆæÁΩÆÊàêÊú¨</a></li>
      </ol>
    </li>
    <li><a href="#Á¨¨‰πùÁ´†-Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè">Á¨¨‰πùÁ´† Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè</a>
      <ol>
        <li><a href="#ÂáÜÂàô35‰ΩøÁî®Ë£ÖÈ•∞Âô®Â±ÇÊ¨°ÂåñÂú∞Ê∑ªÂä†ÂÆöÂà∂">ÂáÜÂàô35Ôºö‰ΩøÁî®Ë£ÖÈ•∞Âô®Â±ÇÊ¨°ÂåñÂú∞Ê∑ªÂä†ÂÆöÂà∂</a></li>
        <li><a href="#ÂáÜÂàô36ÁêÜËß£ËøêË°åÊó∂‰∏éÁºñËØëÊó∂ÊäΩË±°‰πãÈó¥ÁöÑÊùÉË°°">ÂáÜÂàô36ÔºöÁêÜËß£ËøêË°åÊó∂‰∏éÁºñËØëÊó∂ÊäΩË±°‰πãÈó¥ÁöÑÊùÉË°°</a></li>
      </ol>
    </li>
    <li><a href="#Á¨¨ÂçÅÁ´†-Âçï‰æãÊ®°Âºè">Á¨¨ÂçÅÁ´† Âçï‰æãÊ®°Âºè</a>
      <ol>
        <li><a href="#ÂáÜÂàô37Â∞ÜÂçï‰æãËßÜ‰∏∫ÂÆûÁé∞Ê®°ÂºèËÄåÈùûËÆæËÆ°Ê®°Âºè">ÂáÜÂàô37ÔºöÂ∞ÜÂçï‰æãËßÜ‰∏∫ÂÆûÁé∞Ê®°ÂºèËÄåÈùûËÆæËÆ°Ê®°Âºè</a></li>
        <li><a href="#ÂáÜÂàô38‰∏∫ÂèòÂåñÂíåÂèØÊµãËØïÊÄßËÆæËÆ°Âçï‰æã">ÂáÜÂàô38Ôºö‰∏∫ÂèòÂåñÂíåÂèØÊµãËØïÊÄßËÆæËÆ°Âçï‰æã</a></li>
      </ol>
    </li>
    <li><a href="#Á¨¨ÂçÅ‰∏ÄÁ´†-ÊúÄÂêéÁöÑÂáÜÂàô">Á¨¨ÂçÅ‰∏ÄÁ´† ÊúÄÂêéÁöÑÂáÜÂàô</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/c-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/">C&#43;&#43; ËΩØ‰ª∂ËÆæËÆ°</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 04, 1074</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 121 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="c-stl-Â∫ì‰∏≠‰ΩøÁî®ÁöÑËÆæËÆ°Ê®°Âºè">C++ STL Â∫ì‰∏≠‰ΩøÁî®ÁöÑËÆæËÆ°Ê®°Âºè
</h2><p>C++ Ê†áÂáÜÊ®°ÊùøÂ∫ìÔºàSTLÔºâÁöÑËÆæËÆ°‰ª•<strong>Ê≥õÂûãÁºñÁ®ã</strong>‰∏∫Ê†∏ÂøÉÔºå‰ΩÜÂÖ∂‰∏≠‰πüÂ∑ßÂ¶ôËûçÂÖ•‰∫ÜÂ§öÁßçÁªèÂÖ∏ËÆæËÆ°Ê®°ÂºèÁöÑÊÄùÊÉ≥„ÄÇ‰ª•‰∏ãÊòØ STL ‰∏≠‰∏Ä‰∫õÂÖ∏ÂûãËÆæËÆ°Ê®°ÂºèÁöÑÂ∫îÁî®ÂèäÁ§∫‰æãÔºö</p>
<hr>
<p><strong>1. Ëø≠‰ª£Âô®Ê®°Âºè (Iterator Pattern)</strong></p>
<ul>
<li><strong>ÁõÆÁöÑ</strong>ÔºöÊèê‰æõ‰∏ÄÁßçÁªü‰∏ÄÁöÑÊñπÂºèÈÅçÂéÜÂÆπÂô®ÂÖÉÁ¥†ÔºåÊó†ÈúÄÊö¥Èú≤ÂÆπÂô®ÂÜÖÈÉ®ÁªìÊûÑ„ÄÇ</li>
<li><strong>STL ÂÆûÁé∞</strong>Ôºö
<ul>
<li>ÊâÄÊúâÂÆπÂô®ÔºàÂ¶Ç <code>vector</code>, <code>list</code>, <code>map</code>ÔºâÂùáÊèê‰æõ <code>begin()</code> Âíå <code>end()</code> ÊñπÊ≥ïËøîÂõûËø≠‰ª£Âô®„ÄÇ</li>
<li>ÁÆóÊ≥ïÔºàÂ¶Ç <code>for_each</code>, <code>copy</code>ÔºâÈÄöËøáËø≠‰ª£Âô®Êìç‰ΩúÂÆπÂô®Ôºå‰∏éÂÖ∑‰ΩìÂÆπÂô®Á±ªÂûãËß£ËÄ¶„ÄÇ</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">vec</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ΩøÁî®Ëø≠‰ª£Âô®ÈÅçÂéÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">vec</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">it</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>2. ÈÄÇÈÖçÂô®Ê®°Âºè (Adapter Pattern)</strong></p>
<ul>
<li><strong>ÁõÆÁöÑ</strong>ÔºöËΩ¨Êç¢Êé•Âè£‰ª•ÂÖºÂÆπ‰∏çÂêåÁªÑ‰ª∂„ÄÇ</li>
<li><strong>STL ÂÆûÁé∞</strong>Ôºö
<ul>
<li><strong>ÂÆπÂô®ÈÄÇÈÖçÂô®</strong>Ôºö<code>stack</code>, <code>queue</code>, <code>priority_queue</code> Âü∫‰∫éÂ∫ïÂ±ÇÂÆπÂô®ÔºàÂ¶Ç <code>deque</code>ÔºâÈÄÇÈÖçÊé•Âè£„ÄÇ</li>
<li><strong>Ëø≠‰ª£Âô®ÈÄÇÈÖçÂô®</strong>Ôºö<code>reverse_iterator</code> ÂèçÂêëÈÅçÂéÜÂÆπÂô®Ôºå<code>back_insert_iterator</code> Áî®‰∫éÂ∞æÈÉ®ÊèíÂÖ•„ÄÇ</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// Âü∫‰∫é deque ÂÆûÁé∞Ê†à
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">deque</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">stk</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">stk</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">stk</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>3. Á≠ñÁï•Ê®°Âºè (Strategy Pattern)</strong></p>
<ul>
<li><strong>ÁõÆÁöÑ</strong>ÔºöÂä®ÊÄÅÂàáÊç¢ÁÆóÊ≥ïÊàñÁ≠ñÁï•„ÄÇ</li>
<li><strong>STL ÂÆûÁé∞</strong>Ôºö
<ul>
<li>ÁÆóÊ≥ïÔºàÂ¶Ç <code>sort</code>, <code>transform</code>ÔºâÈÄöËøáÂáΩÊï∞ÂØπË±°ÔºàFunctorÔºâÊàñ Lambda Êé•ÂèóËá™ÂÆö‰πâÁ≠ñÁï•„ÄÇ</li>
<li>ÂàÜÈÖçÂô®ÔºàAllocatorÔºâÂÖÅËÆ∏Ëá™ÂÆö‰πâÂÜÖÂ≠òÁÆ°ÁêÜÁ≠ñÁï•„ÄÇ</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// Ëá™ÂÆö‰πâÊéíÂ∫èÁ≠ñÁï•ÔºöÈôçÂ∫èÊéíÂàó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">vec</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">vec</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">vec</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="p">[](</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">;</span> <span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<ol start="4">
<li><strong>Â∑•ÂéÇÊñπÊ≥ïÊ®°Âºè (Factory Method Pattern)</strong></li>
</ol>
<ul>
<li><strong>ÁõÆÁöÑ</strong>ÔºöÂ∞ÜÂØπË±°ÂàõÂª∫ÈÄªËæëÂ∞ÅË£ÖÂà∞Â≠êÁ±ª„ÄÇ</li>
<li><strong>STL ÂÆûÁé∞</strong>Ôºö
<ul>
<li>ÂÆπÂô®ÈÄöËøá <code>emplace()</code> Êàñ <code>insert()</code> ÊñπÊ≥ïÂÜÖÈÉ®ÊûÑÈÄ†ÂØπË±°„ÄÇ</li>
<li>ÂàÜÈÖçÂô®ÔºàAllocatorÔºâÁöÑ <code>allocate()</code> Âíå <code>construct()</code> ÊñπÊ≥ïÂ∞ÅË£ÖÂÜÖÂ≠òÂàÜÈÖç‰∏éÂØπË±°ÊûÑÈÄ†„ÄÇ</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">alloc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">alloc</span><span class="p">.</span><span class="n">allocate</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>  <span class="c1">// ÂàÜÈÖçÂÜÖÂ≠ò
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">alloc</span><span class="p">.</span><span class="n">construct</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>       <span class="c1">// ÊûÑÈÄ†ÂØπË±°
</span></span></span></code></pre></td></tr></table>
</div>
</div><hr>
<ol start="5">
<li><strong>Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè (Template Method Pattern)</strong></li>
</ol>
<ul>
<li><strong>ÁõÆÁöÑ</strong>ÔºöÂÆö‰πâÁÆóÊ≥ïÈ™®Êû∂ÔºåÂ≠êÁ±ªÂÆûÁé∞ÂÖ∑‰ΩìÊ≠•È™§„ÄÇ</li>
<li><strong>STL ÂÆûÁé∞</strong>Ôºö
<ul>
<li>ÊµÅÂ∫ìÔºà<code>&lt;iomanip&gt;</code>ÔºâÈÄöËøáËôöÂáΩÊï∞ÔºàÂ¶Ç <code>std::streambuf::overflow()</code>ÔºâÂÆö‰πâÊµÅÁ®ãÔºåÂ≠êÁ±ªÈáçÂÜôÂÖ∑‰ΩìË°å‰∏∫„ÄÇ</li>
<li>ÂàÜÈÖçÂô®Êèê‰æõÁªü‰∏ÄÊé•Âè£ÔºåÁî®Êà∑ÂèØËá™ÂÆö‰πâÂÜÖÂ≠òÁÆ°ÁêÜÁªÜËäÇ„ÄÇ</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CustomAllocator</span> <span class="o">:</span> <span class="k">public</span> <span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ëá™ÂÆö‰πâÂÜÖÂ≠òÂàÜÈÖçÈÄªËæë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span><span class="o">*</span> <span class="n">allocate</span><span class="p">(</span><span class="n">size_t</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<ol start="6">
<li><strong>‰∫´ÂÖÉÊ®°Âºè (Flyweight Pattern)</strong></li>
</ol>
<ul>
<li><strong>ÁõÆÁöÑ</strong>ÔºöÂÖ±‰∫´ÁªÜÁ≤íÂ∫¶ÂØπË±°‰ª•ÂáèÂ∞ëÂÜÖÂ≠òÂºÄÈîÄ„ÄÇ</li>
<li><strong>STL ÂÆûÁé∞</strong>Ôºö
<ul>
<li><code>std::string</code> ÁöÑÁü≠Â≠óÁ¨¶‰∏≤‰ºòÂåñÔºàSSOÔºâÔºöÂ∞èÂ≠óÁ¨¶‰∏≤Áõ¥Êé•Â≠òÂÇ®Âú®ÂØπË±°ÂÜÖÈÉ®ÔºåÂ§ßÂ≠óÁ¨¶‰∏≤‰ΩøÁî®Â†ÜÂÜÖÂ≠ò„ÄÇ</li>
<li><code>std::function</code> ÈÄöËøáÁ±ªÂûãÊì¶Èô§ÔºàType ErasureÔºâÂÖ±‰∫´Ë∞ÉÁî®ÈÄªËæë„ÄÇ</li>
</ul>
</li>
</ul>
<hr>
<ol start="7">
<li><strong>‰ª£ÁêÜÊ®°Âºè (Proxy Pattern)</strong></li>
</ol>
<ul>
<li><strong>ÁõÆÁöÑ</strong>ÔºöÈÄöËøá‰ª£ÁêÜÂØπË±°ÊéßÂà∂ÂØπÂéüÂØπË±°ÁöÑËÆøÈóÆ„ÄÇ</li>
<li><strong>STL ÂÆûÁé∞</strong>Ôºö
<ul>
<li><code>std::vector&lt;bool&gt;</code> ÁöÑÁâπÂåñÁâàÊú¨‰ΩøÁî®‰ª£ÁêÜÁ±ªÂéãÁº©Â≠òÂÇ®ÔºàÊØè‰∏™ <code>bool</code> Âç† 1 bitÔºâ„ÄÇ</li>
<li><code>std::reference_wrapper</code> Êèê‰æõÂºïÁî®ÁöÑ‰ª£ÁêÜÔºåÁî®‰∫éÂú®ÂÆπÂô®‰∏≠Â≠òÂÇ®ÂºïÁî®„ÄÇ</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">reference_wrapper</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">refs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">refs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">refs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>  <span class="c1">// ‰ª£ÁêÜÂºïÁî®ÔºåÈÅøÂÖçÊã∑Ë¥ù
</span></span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>ÊÄªÁªì</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left"><strong>ËÆæËÆ°Ê®°Âºè</strong></th>
<th style="text-align:left"><strong>STL Â∫îÁî®Âú∫ÊôØ</strong></th>
<th style="text-align:left"><strong>ÂÖ≥ÈîÆÊäÄÊúØ</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Ëø≠‰ª£Âô®Ê®°Âºè</td>
<td style="text-align:left">ÂÆπÂô®ÈÅçÂéÜ (<code>vector</code>, <code>map</code>)</td>
<td style="text-align:left">Ëø≠‰ª£Âô®Êé•Âè£ (<code>begin()</code>, <code>end()</code>)</td>
</tr>
<tr>
<td style="text-align:left">ÈÄÇÈÖçÂô®Ê®°Âºè</td>
<td style="text-align:left"><code>stack</code>, <code>queue</code>, ÂèçÂêëËø≠‰ª£Âô®</td>
<td style="text-align:left">ÁªÑÂêà + Êé•Âè£ËΩ¨Êç¢</td>
</tr>
<tr>
<td style="text-align:left">Á≠ñÁï•Ê®°Âºè</td>
<td style="text-align:left">ÁÆóÊ≥ïËá™ÂÆö‰πâË°å‰∏∫ (<code>sort</code>, <code>transform</code>)</td>
<td style="text-align:left">ÂáΩÊï∞ÂØπË±° + Lambda</td>
</tr>
<tr>
<td style="text-align:left">Â∑•ÂéÇÊñπÊ≥ïÊ®°Âºè</td>
<td style="text-align:left">ÂØπË±°ÊûÑÈÄ† (<code>allocator</code>, <code>emplace()</code>)</td>
<td style="text-align:left">Ê®°Êùø + ÂàÜÈÖçÂô®</td>
</tr>
<tr>
<td style="text-align:left">Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè</td>
<td style="text-align:left">ÊµÅÁºìÂÜ≤Âå∫ (<code>streambuf</code>)</td>
<td style="text-align:left">ËôöÂáΩÊï∞ + ÁªßÊâø</td>
</tr>
<tr>
<td style="text-align:left">‰∫´ÂÖÉÊ®°Âºè</td>
<td style="text-align:left"><code>std::string</code> ‰ºòÂåñ</td>
<td style="text-align:left">Áü≠Â≠óÁ¨¶‰∏≤‰ºòÂåñ (SSO)</td>
</tr>
<tr>
<td style="text-align:left">‰ª£ÁêÜÊ®°Âºè</td>
<td style="text-align:left"><code>vector&lt;bool&gt;</code>, <code>reference_wrapper</code></td>
<td style="text-align:left">ÁâπÂåñÊ®°Êùø + Á±ªÂûã‰ª£ÁêÜ</td>
</tr>
</tbody>
</table></div>
<hr>
<p><strong>ÂÖ≥ÈîÆÁÇπ</strong></p>
<ul>
<li><strong>Ê≥õÂûãÁºñÁ®ã‰ºòÂÖà</strong>ÔºöSTL ÈÄöËøáÊ®°ÊùøÂíåÁºñËØëÊó∂Â§öÊÄÅÂÆûÁé∞ÁÅµÊ¥ªÊÄßÔºåËÄåÈùû‰º†ÁªüÈù¢ÂêëÂØπË±°ÁöÑÂ§öÊÄÅ„ÄÇ</li>
<li><strong>Ê®°ÂºèÈöêÂºèÂ∫îÁî®</strong>ÔºöËÆ∏Â§öÊ®°Âºè‰ª•Ê≥õÂûãÊñπÂºèÂÆûÁé∞ÔºàÂ¶ÇÁ≠ñÁï•Ê®°ÂºèÈÄöËøáÊ®°ÊùøÂèÇÊï∞‰º†ÈÄíÂáΩÊï∞ÂØπË±°Ôºâ„ÄÇ</li>
<li><strong>ÊÄßËÉΩËá≥‰∏ä</strong>ÔºöSTL ËÆæËÆ°ÈÅøÂÖçËôöÂáΩÊï∞ÂºÄÈîÄÔºåÂº∫Ë∞ÉÈõ∂ÊàêÊú¨ÊäΩË±°ÔºàZero-overhead AbstractionÔºâ„ÄÇ</li>
</ul>
<p>ÁêÜËß£Ëøô‰∫õÊ®°ÂºèÂú® STL ‰∏≠ÁöÑÂ∫îÁî®ÔºåËÉΩÂ∏ÆÂä©‰Ω†Êõ¥È´òÊïàÂú∞‰ΩøÁî®Ê†áÂáÜÂ∫ìÔºåÂπ∂Âú®Ëá™ÂÆö‰πâÁªÑ‰ª∂Êó∂ÂÄüÈâ¥ÂÖ∂ËÆæËÆ°ÊÄùÊÉ≥„ÄÇ</p>
<h2 id="Áé∞‰ª£cËÆæËÆ°Ê®°Âºè">Áé∞‰ª£C++ËÆæËÆ°Ê®°Âºè
</h2><h3 id="‰∏ÄÂàõÂª∫ÂûãÊ®°Âºè5Áßç">‰∏Ä„ÄÅÂàõÂª∫ÂûãÊ®°ÂºèÔºà5ÁßçÔºâ
</h3><p><strong>1. Â∑•ÂéÇÊñπÊ≥ïÊ®°Âºè (Factory Method)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂª∂ËøüÂØπË±°ÂàõÂª∫Âà∞Â≠êÁ±ª<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÈÅøÂÖç‰ª£Á†Å‰∏éÂÖ∑‰ΩìÁ±ªËÄ¶Âêà</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Creator</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">create</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">WidgetFactory</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Creator</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="n">create</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ConcreteWidget</span><span class="o">&gt;</span><span class="p">();</span> <span class="c1">// ‰ΩøÁî®Êô∫ËÉΩÊåáÈíàÁÆ°ÁêÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>2. ÊäΩË±°Â∑•ÂéÇÊ®°Âºè (Abstract Factory)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂàõÂª∫Áõ∏ÂÖ≥ÂØπË±°ÂÆ∂Êóè<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöË∑®Âπ≥Âè∞UIÁªÑ‰ª∂ÁîüÊàê</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">GUIFactory</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span> <span class="n">createButton</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Menu</span><span class="o">&gt;</span> <span class="n">createMenu</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">WinFactory</span> <span class="o">:</span> <span class="k">public</span> <span class="n">GUIFactory</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span> <span class="n">createButton</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">WinButton</span><span class="o">&gt;</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...ÂÖ∂‰ªñÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>3. Âçï‰æãÊ®°Âºè (Singleton)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂÖ®Â±ÄÂîØ‰∏ÄÂÆû‰æã<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÈÖçÁΩÆÁÆ°ÁêÜ„ÄÅÊó•ÂøóÁ≥ªÁªü</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Logger</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">Logger</span><span class="o">&amp;</span> <span class="n">instance</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="n">Logger</span> <span class="n">logger</span><span class="p">;</span> <span class="c1">// Meyer&#39;sÂçï‰æã (Á∫øÁ®ãÂÆâÂÖ®)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="n">logger</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Âà†Èô§Êã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÂíåËµãÂÄºÊìç‰ΩúÁ¨¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Logger</span><span class="p">(</span><span class="k">const</span> <span class="n">Logger</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Logger</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Logger</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Logger</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>4. Âª∫ÈÄ†ËÄÖÊ®°Âºè (Builder)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂàÜÊ≠•ÊûÑÂª∫Â§çÊùÇÂØπË±°<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÁÆÄÂåñÂ§öÂèÇÊï∞ÂØπË±°ÊûÑÈÄ†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Pizza</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Builder</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">Builder</span><span class="o">&amp;</span> <span class="n">setSize</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">Builder</span><span class="o">&amp;</span> <span class="n">addTopping</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">topping</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">Pizza</span> <span class="nf">build</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Pizza</span><span class="p">{</span><span class="o">*</span><span class="k">this</span><span class="p">};</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Pizza</span><span class="p">(</span><span class="k">const</span> <span class="n">Builder</span><span class="o">&amp;</span> <span class="n">builder</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ÂàùÂßãÂåñÈÄªËæë */</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ΩøÁî®Á§∫‰æã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Pizza</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Pizza</span><span class="o">::</span><span class="n">Builder</span><span class="p">().</span><span class="n">setSize</span><span class="p">(</span><span class="mi">12</span><span class="p">).</span><span class="n">addTopping</span><span class="p">(</span><span class="s">&#34;Cheese&#34;</span><span class="p">).</span><span class="n">build</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>5. ÂéüÂûãÊ®°Âºè (Prototype)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÈÄöËøáÂÖãÈöÜÂàõÂª∫ÂØπË±°<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÈÅøÂÖçÈáçÂ§çÂàùÂßãÂåñÂºÄÈîÄ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span> <span class="c1">// Âà©Áî®Êã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="‰∫åÁªìÊûÑÂûãÊ®°Âºè7Áßç">‰∫å„ÄÅÁªìÊûÑÂûãÊ®°ÂºèÔºà7ÁßçÔºâ
</h3><p><strong>6. ÈÄÇÈÖçÂô®Ê®°Âºè (Adapter)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöËΩ¨Êç¢Êé•Âè£ÂÖºÂÆπÊÄß<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÊï¥ÂêàÊóßÁâàAPI</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">LegacyPrinter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">printDocument</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">text</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PrinterAdapter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">print</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">text</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">legacy_</span><span class="p">.</span><span class="n">printDocument</span><span class="p">(</span><span class="n">text</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">LegacyPrinter</span> <span class="n">legacy_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>7. Ê°•Êé•Ê®°Âºè (Bridge)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂàÜÁ¶ªÊäΩË±°‰∏éÂÆûÁé∞<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÂ§öÁª¥Â∫¶Êâ©Â±ïÈóÆÈ¢ò</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Renderer</span> <span class="p">{</span> <span class="c1">// ÂÆûÁé∞ÈÉ®ÂàÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">drawCircle</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">,</span> <span class="kt">float</span> <span class="n">radius</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span> <span class="c1">// ÊäΩË±°ÈÉ®ÂàÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="p">(</span><span class="n">Renderer</span><span class="o">&amp;</span> <span class="n">renderer</span><span class="p">)</span> <span class="o">:</span> <span class="n">renderer_</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Renderer</span><span class="o">&amp;</span> <span class="n">renderer_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>8. ÁªÑÂêàÊ®°Âºè (Composite)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÁªü‰∏ÄÂ§ÑÁêÜÊ†ëÂΩ¢ÁªìÊûÑ<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÊñá‰ª∂Á≥ªÁªüÁÆ°ÁêÜ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">FileSystemComponent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">list</span><span class="p">(</span><span class="kt">int</span> <span class="n">indent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Directory</span> <span class="o">:</span> <span class="k">public</span> <span class="n">FileSystemComponent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">add</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">FileSystemComponent</span><span class="o">&gt;</span> <span class="n">comp</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">children_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">comp</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">list</span><span class="p">(</span><span class="kt">int</span> <span class="n">indent</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">child</span> <span class="p">:</span> <span class="n">children_</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">child</span><span class="o">-&gt;</span><span class="n">list</span><span class="p">(</span><span class="n">indent</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">FileSystemComponent</span><span class="o">&gt;&gt;</span> <span class="n">children_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>9. Ë£ÖÈ•∞Âô®Ê®°Âºè (Decorator)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂä®ÊÄÅÊ∑ªÂä†ËÅåË¥£<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÊµÅÂ§ÑÁêÜÂ¢ûÂº∫</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DataStream</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">write</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CompressedStream</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DataStream</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">CompressedStream</span><span class="p">(</span><span class="n">DataStream</span><span class="o">&amp;</span> <span class="n">stream</span><span class="p">)</span> <span class="o">:</span> <span class="n">stream_</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">write</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">data</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">compressed</span> <span class="o">=</span> <span class="n">compress</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">stream_</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">compressed</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">DataStream</span><span class="o">&amp;</span> <span class="n">stream_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>10. Â§ñËßÇÊ®°Âºè (Facade)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÁÆÄÂåñÂ§çÊùÇÂ≠êÁ≥ªÁªüÊé•Âè£<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÁÆÄÂåñÊï∞ÊçÆÂ∫ìÊìç‰Ωú</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DatabaseFacade</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">executeQuery</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">sql</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">connection_</span><span class="p">.</span><span class="n">connect</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">parser_</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="n">sql</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">executor_</span><span class="p">.</span><span class="n">execute</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">connection_</span><span class="p">.</span><span class="n">disconnect</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">ConnectionManager</span> <span class="n">connection_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">QueryParser</span> <span class="n">parser_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">QueryExecutor</span> <span class="n">executor_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>11. ‰∫´ÂÖÉÊ®°Âºè (Flyweight)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂÖ±‰∫´ÁªÜÁ≤íÂ∫¶ÂØπË±°<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÂ§ßÈáèÈáçÂ§çÂØπË±°ÁöÑÂÜÖÂ≠ò‰ºòÂåñ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Font</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Font</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">)</span> <span class="o">:</span> <span class="n">name_</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...Â≠ó‰ΩìÂ±ûÊÄß
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">FontFactory</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Font</span><span class="o">&amp;</span> <span class="n">getFont</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">fonts_</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">it</span> <span class="o">==</span> <span class="n">fonts_</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">it</span> <span class="o">=</span> <span class="n">fonts_</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Font</span><span class="o">&gt;</span><span class="p">(</span><span class="n">name</span><span class="p">)).</span><span class="n">first</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">*</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Font</span><span class="o">&gt;&gt;</span> <span class="n">fonts_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>12. ‰ª£ÁêÜÊ®°Âºè (Proxy)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÊéßÂà∂ÂØπË±°ËÆøÈóÆ<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÂª∂ËøüÂä†ËΩΩ„ÄÅÊùÉÈôêÊéßÂà∂</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Image</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">display</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">RealImage</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Image</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">RealImage</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">)</span> <span class="p">{</span> <span class="n">loadFromDisk</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">display</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="cm">/* ÊòæÁ§∫ÂõæÁâá */</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ProxyImage</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Image</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">ProxyImage</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">)</span> <span class="o">:</span> <span class="n">filename_</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">display</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">realImage_</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">realImage_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">RealImage</span><span class="o">&gt;</span><span class="p">(</span><span class="n">filename_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">realImage_</span><span class="o">-&gt;</span><span class="n">display</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">RealImage</span><span class="o">&gt;</span> <span class="n">realImage_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">filename_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="‰∏âË°å‰∏∫ÂûãÊ®°Âºè11Áßç">‰∏â„ÄÅË°å‰∏∫ÂûãÊ®°ÂºèÔºà11ÁßçÔºâ
</h3><p>Ôºà‰ª•‰∏ã‰∏∫ÈÉ®ÂàÜÂÆûÁé∞Á§∫‰æãÔºâ</p>
<p><strong>13. Á≠ñÁï•Ê®°Âºè (Strategy)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂ∞ÅË£ÖÂèØ‰∫íÊç¢ÁÆóÊ≥ï<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÊîØ‰ªòÊñπÂºèÂàáÊç¢</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">using</span> <span class="n">PaymentStrategy</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PaymentProcessor</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">setStrategy</span><span class="p">(</span><span class="n">PaymentStrategy</span> <span class="n">strategy</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">strategy_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">strategy</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">processPayment</span><span class="p">(</span><span class="kt">double</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">strategy_</span><span class="p">(</span><span class="n">amount</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">PaymentStrategy</span> <span class="n">strategy_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ΩøÁî®Á§∫‰æã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">PaymentProcessor</span> <span class="n">processor</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">processor</span><span class="p">.</span><span class="n">setStrategy</span><span class="p">([](</span><span class="kt">double</span> <span class="n">amt</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ‰ø°Áî®Âç°ÈÄªËæë */</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="n">processor</span><span class="p">.</span><span class="n">processPayment</span><span class="p">(</span><span class="mf">100.0</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>14. ËßÇÂØüËÄÖÊ®°Âºè (Observer)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÁä∂ÊÄÅÂèòÊõ¥ÈÄöÁü•<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>Ôºö‰∫ã‰ª∂Â§ÑÁêÜÁ≥ªÁªü</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Observable</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">subscribe</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">observer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">observers_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">observer</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">notify</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">obs</span> <span class="p">:</span> <span class="n">observers_</span><span class="p">)</span> <span class="n">obs</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;&gt;</span> <span class="n">observers_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ΩøÁî®Á§∫‰æã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Observable</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">counter</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">counter</span><span class="p">.</span><span class="n">subscribe</span><span class="p">([](</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Value changed: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">value</span><span class="p">;</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="n">counter</span><span class="p">.</span><span class="n">notify</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>15. ÂëΩ‰ª§Ê®°Âºè (Command)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂ∞ÜËØ∑Ê±ÇÂ∞ÅË£Ö‰∏∫ÂØπË±°<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÊí§ÈîÄ/ÈáçÂÅöÂäüËÉΩ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">EditorCommand</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">execute</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">undo</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">InsertCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">EditorCommand</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">InsertCommand</span><span class="p">(</span><span class="n">Document</span><span class="o">&amp;</span> <span class="n">doc</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">pos</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">doc_</span><span class="p">(</span><span class="n">doc</span><span class="p">),</span> <span class="n">pos_</span><span class="p">(</span><span class="n">pos</span><span class="p">),</span> <span class="n">c_</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">execute</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">doc_</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">pos_</span><span class="p">,</span> <span class="n">c_</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">undo</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">doc_</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">pos_</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Document</span><span class="o">&amp;</span> <span class="n">doc_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">size_t</span> <span class="n">pos_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">c_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>16. Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè (Template Method)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂÆö‰πâÁÆóÊ≥ïÈ™®Êû∂<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöÊµÅÁ®ãÊ†áÂáÜÂåñ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DataExporter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">exportData</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">openConnection</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">fetchData</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">formatData</span><span class="p">();</span> <span class="c1">// ËôöÂáΩÊï∞Èí©Â≠ê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">closeConnection</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">formatData</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...ÂÖ∂‰ªñÊ≠•È™§ÂÆûÁé∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CSVExporter</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DataExporter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">formatData</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="cm">/* CSVÊ†ºÂºèÂ§ÑÁêÜ */</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>17. Áä∂ÊÄÅÊ®°Âºè (State)</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂ∞ÅË£ÖÁä∂ÊÄÅË°å‰∏∫<br/>
<strong>Ëß£ÂÜ≥ÈóÆÈ¢ò</strong>ÔºöËÆ¢ÂçïÁä∂ÊÄÅÊµÅËΩ¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OrderState</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">handle</span><span class="p">(</span><span class="n">OrderContext</span><span class="o">&amp;</span> <span class="n">context</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OrderContext</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">transitionTo</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">OrderState</span><span class="o">&gt;</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">state_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">state</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">process</span><span class="p">()</span> <span class="p">{</span> <span class="n">state_</span><span class="o">-&gt;</span><span class="n">handle</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">OrderState</span><span class="o">&gt;</span> <span class="n">state_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="ÂõõÁé∞‰ª£cÂÖ≥ÈîÆ‰ºòÂåñÊäÄÊúØ">Âõõ„ÄÅÁé∞‰ª£C++ÂÖ≥ÈîÆ‰ºòÂåñÊäÄÊúØ
</h3><ol>
<li><strong>Êô∫ËÉΩÊåáÈíàÁÆ°ÁêÜËµÑÊ∫ê</strong>
<code>std::unique_ptr</code>/<code>std::shared_ptr</code>Êõø‰ª£ÂéüÂßãÊåáÈíà</li>
<li><strong>LambdaË°®ËææÂºè</strong>
Êõø‰ª£Â∞èÂûãÁ≠ñÁï•Á±ªÂíåÂëΩ‰ª§ÂØπË±°</li>
<li><strong>ÁßªÂä®ËØ≠‰πâ</strong>
‰ºòÂåñÂØπË±°‰º†ÈÄíÊïàÁéá</li>
<li><strong>Á±ªÂûãÊé®ÂØº (auto)</strong>
ÁÆÄÂåñÊ®°Êùø‰ª£Á†Å</li>
<li><strong>ÂèØÂèòÂèÇÊï∞Ê®°Êùø</strong>
ÊîØÊåÅ‰ªªÊÑèÂèÇÊï∞ÁöÑÂ∑•ÂéÇÊñπÊ≥ï</li>
<li><strong>std::function</strong>
Áªü‰∏ÄÂõûË∞ÉÊé•Âè£</li>
</ol>
<hr>
<h3 id="‰∫îÊ®°ÂºèÈÄâÊã©Âª∫ËÆÆË°®">‰∫î„ÄÅÊ®°ÂºèÈÄâÊã©Âª∫ËÆÆË°®
</h3><div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">ÈóÆÈ¢òÂú∫ÊôØ</th>
<th style="text-align:left">Êé®ËçêÊ®°Âºè</th>
<th style="text-align:left">Áé∞‰ª£C++ÁâπÊÄßÂ∫îÁî®</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ÈúÄË¶ÅËøêË°åÊó∂ÁÆóÊ≥ïÂàáÊç¢</td>
<td style="text-align:left">Á≠ñÁï•Ê®°Âºè</td>
<td style="text-align:left"><code>std::function</code> + lambda</td>
</tr>
<tr>
<td style="text-align:left">ÈúÄË¶ÅÊí§ÈîÄ/ÈáçÂÅöÂäüËÉΩ</td>
<td style="text-align:left">ÂëΩ‰ª§Ê®°Âºè</td>
<td style="text-align:left">Êô∫ËÉΩÊåáÈíàÁÆ°ÁêÜÂëΩ‰ª§ÂéÜÂè≤</td>
</tr>
<tr>
<td style="text-align:left">Â§ÑÁêÜÂ§çÊùÇÂØπË±°ÂàõÂª∫ÊµÅÁ®ã</td>
<td style="text-align:left">Âª∫ÈÄ†ËÄÖÊ®°Âºè</td>
<td style="text-align:left">FluentÊé•Âè£ÈìæÂºèË∞ÉÁî®</td>
</tr>
<tr>
<td style="text-align:left">ÈúÄË¶Å‰ºòÂåñÂ§ßÈáèÁõ∏‰ººÂØπË±°</td>
<td style="text-align:left">‰∫´ÂÖÉÊ®°Âºè</td>
<td style="text-align:left"><code>unordered_map</code>ÁºìÂ≠òÁÆ°ÁêÜ</td>
</tr>
<tr>
<td style="text-align:left">Ë∑®Âπ≥Âè∞UIÁªÑ‰ª∂ÁîüÊàê</td>
<td style="text-align:left">ÊäΩË±°Â∑•ÂéÇÊ®°Âºè</td>
<td style="text-align:left">Ê®°ÊùøÁâπÂåñ‰∏çÂêåÂπ≥Âè∞ÂÆûÁé∞</td>
</tr>
</tbody>
</table></div>
<hr>
<p>ÈÄöËøáÁªìÂêàÁé∞‰ª£C++ÁâπÊÄßÔºå‰º†ÁªüËÆæËÆ°Ê®°ÂºèÂèØ‰ª•ÂÆûÁé∞Êõ¥ÁÆÄÊ¥Å„ÄÅÊõ¥È´òÊïà„ÄÅÊõ¥ÂÆâÂÖ®ÁöÑ‰ª£Á†ÅÁªìÊûÑ„ÄÇÊØè‰∏™Ê®°ÂºèÁöÑÊ†∏ÂøÉ‰ª∑ÂÄºÂú®‰∫é<strong>Ëß£ËÄ¶ÂèòÂåñÊñπÂêë</strong>ÔºåËÄåÁé∞‰ª£ËØ≠Ë®ÄÁâπÊÄßÂàôÊèê‰æõ‰∫ÜÊõ¥‰ºòÈõÖÁöÑÂÆûÁé∞ÊâãÊÆµ„ÄÇ</p>
<h2 id="ÂÖ≥‰∫éÊú¨‰π¶">ÂÖ≥‰∫éÊú¨‰π¶
</h2><p><strong>ÂÖ≥‰∫é‰ΩúËÄÖ</strong></p>
<p>ÂÖãÂä≥ÊñØ¬∑‰ºäÊ†º‰ºØÂ∞îÔºàKlaus IglbergerÔºâÊòØ‰∏ÄÂêçËá™Áî±C++ÂüπËÆ≠Â∏àÂíåÈ°æÈóÆ„ÄÇ‰ªñÂú®2010Âπ¥ÂÆåÊàê‰∫ÜËÆ°ÁÆóÊú∫ÁßëÂ≠¶ÂçöÂ£´Â≠¶‰ΩçÔºåÈöèÂêé‰∏ìÊ≥®‰∫éÂ§ßËßÑÊ®°C++ËΩØ‰ª∂ËÆæËÆ°„ÄÇ‰ªñÈÄöËøáÂú®ÂÖ®ÁêÉËåÉÂõ¥ÂÜÖÊïôÊéàÂèóÊ¨¢ËøéÁöÑC++ËØæÁ®ãÂàÜ‰∫´‰ªñÁöÑ‰∏ì‰∏öÁü•ËØÜ„ÄÇ‰ªñËøòÊòØBlaze C++Êï∞Â≠¶Â∫ìÁöÑÂàõÂª∫ËÄÖÂíåÈ¶ñÂ∏≠ËÆæËÆ°Â∏àÔºåÊÖïÂ∞ºÈªëC++Áî®Êà∑ÁªÑÔºàMUC++ÔºâÁöÑÁªÑÁªáËÄÖ‰πã‰∏ÄÔºå‰ª•ÂèäCppCon‰ºöËÆÆ‰∏≠‚ÄúÂõûÂΩíÂü∫Á°Ä‚ÄùÂíå‚ÄúËΩØ‰ª∂ËÆæËÆ°‚Äù‰∏ªÈ¢òÁöÑÔºàËÅîÂêàÔºâÁªÑÁªáËÄÖ„ÄÇ</p>
<p><strong>Â∞ÅÈù¢ÊïÖ‰∫ã</strong></p>
<p>„ÄäC++ËΩØ‰ª∂ÂºÄÂèë„ÄãÂ∞ÅÈù¢‰∏äÁöÑÂä®Áâ©ÊòØÊôÆÈÄöÈπ§ÔºàGrus grusÔºåÊàñÁß∞‰∏∫‚ÄúÈπ§Èπ§‚ÄùÔºâ„ÄÇËøôÁßçÈπ§‰πüË¢´Áß∞‰∏∫Ê¨ß‰∫öÈπ§Ôºå‰∏ªË¶ÅÂàÜÂ∏ÉÂú®Âè§ÂåóÂå∫ÔºåÂåÖÊã¨ÂåóÊ¨ß„ÄÅÂåó‰∫öÂíåÂåóÈùûÔºåÂ∞ΩÁÆ°ÊúâÂ≠§Á´ãÁæ§‰ΩìËøúËá≥Áà±Â∞îÂÖ∞‰∏úÈÉ®ÂíåÊó•Êú¨Ë•øÈÉ®„ÄÇÊØèÂπ¥ÊúÄÂ§ßÁöÑÊôÆÈÄöÈπ§ÁπÅÊÆñÁßçÁæ§ÂèØ‰ª•Âú®‰øÑÁΩóÊñØÂíåÊñØÂ†™ÁöÑÁ∫≥Áª¥‰∫öÂçäÂ≤õÊâæÂà∞„ÄÇ</p>
<p>ÊôÆÈÄöÈπ§ÊòØ‰∏ÄÁßçÂ§ßÂûã‰ºòÈõÖÁöÑÈ∏üÁ±ªÔºåÂú®Èπ§Á±ª‰∏≠Â±û‰∫é‰∏≠Á≠â‰ΩìÂûãÔºå‰ΩìÈïø39-51Ëã±ÂØ∏ÔºåÁøºÂ±ï71-94Ëã±ÂØ∏ÔºåÂπ≥Âùá‰ΩìÈáç10-12Á£Ö„ÄÇÂÆÉÁöÑË∫´‰ΩìÂëàÊùøÂ≤©ÁÅ∞Ëâ≤ÔºåËÑ∏ÈÉ®ÈªëËâ≤ÔºåÈ¢àÈÉ®ÈªëÁôΩÁõ∏Èó¥ÔºåÂ§¥È°∂Á∫¢Ëâ≤„ÄÇÂ§ßÁ∫¶ÊØè‰∏§Âπ¥‰∏ÄÊ¨°ÔºåËøôÁßçÂÄôÈ∏ü‰ºöÂÆåÂÖ®Êç¢ÁæΩÔºåÂú®Êñ∞ÁæΩÊØõÁîüÈïøÊúüÈó¥Êó†Ê≥ïÈ£ûË°åÁ∫¶ÂÖ≠Âë®„ÄÇÂú®ËøÅÂæôËøáÁ®ã‰∏≠ÔºåÊúâÊó∂‰ºöÊúâÂõõÁôæÂè™‰ª•‰∏äÁöÑÁæ§‰Ωì‰∏ÄËµ∑È£ûË°å„ÄÇËøô‰∫õÁæ§‰ΩìË¢´ËßÇÂØüÂà∞ÂèØ‰ª•È£ûÂà∞È´òËææ33,000Ëã±Â∞∫ÁöÑÈ´òÂ∫¶ÔºåËøôÊòØÊâÄÊúâÈ∏üÁ±ª‰∏≠ÁöÑÁ¨¨‰∫åÈ´òËÆ∞ÂΩï„ÄÇ</p>
<p>ÂÉèÊâÄÊúâÈπ§Á±ª‰∏ÄÊ†∑ÔºåÊôÆÈÄöÈπ§ÊòØÊùÇÈ£üÊÄßÂä®Áâ©ÔºåÈ£üÁî®Ê§çÁâ©Áâ©Ë¥®‰ª•ÂèäÊòÜËô´„ÄÅ‰∏§Ê†ñÂä®Áâ©„ÄÅÂïÆÈΩøÂä®Áâ©ÂíåÂÖ∂‰ªñÂ∞èÂûãÂä®Áâ©„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏ÊàêÂ∞èÁæ§Âú®ÈôÜÂú∞‰∏äÊàñÊµÖÊ∞¥‰∏≠ËßÖÈ£üÔºåÁî®ÂñôÊé¢Êü•È£üÁâ©„ÄÇ</p>
<p>Ëá™Âè§‰ª£‰ª•Êù•ÔºåÈπ§Á±ªÂ∞±Âú®‰∫∫Á±ªÁöÑËâ∫ÊúØÂíåË±°ÂæÅ‰∏≠Âç†ÊúâÈáçË¶ÅÂú∞‰ΩçÔºåÂá∫Áé∞Âú®‰ºäÁ¥¢ÂØìË®Ä‰∏≠ÔºåÂêØÂèë‰∫ÜÂ¶ÇÈü©ÂõΩËá™646Âπ¥ÂºÄÂßãË°®ÊºîÁöÑ‰º†ÁªüËàûËπàÔºåÂπ∂‰∏éÂè§‰ª£ÂçóÈòøÊãâ‰ºØÂíåÂ∏åËÖäÁöÑÁ•ûÁ•áÁõ∏ÂÖ≥ËÅî„ÄÇÂá†ÁßçÊ≠¶ÊúØÈ£éÊ†ºÔºåÂ∞§ÂÖ∂ÊòØÂäüÂ§´Ôºå‰ªéÈπ§Á±ª‰ºòÈõÖÁöÑÂä®‰Ωú‰∏≠Ëé∑ÂæóÁÅµÊÑüÔºåËøôÂú®1984Âπ¥ÁöÑÁÉ≠Èó®ÁîµÂΩ±„ÄäÁ©∫ÊâãÈÅìÂ∞èÂ≠ê„Äã‰∏≠ÂæóÂà∞‰∫ÜÊôÆÂèä„ÄÇ</p>
<p>Êà™Ëá≥2014Âπ¥ÔºåÂÖ®ÁêÉÊôÆÈÄöÈπ§ÁöÑÊï∞ÈáèÁ∫¶‰∏∫ÂÖ≠ÂçÅ‰∏áÂè™ÔºåÂõΩÈôÖËá™ÁÑ∂‰øùÊä§ËÅîÁõüÔºàIUCNÔºâÂ∞ÜÂÖ∂Âàó‰∏∫Êó†Âç±Áâ©ÁßçÔºå‰ΩøÂÖ∂Êàê‰∏∫‰ªÖÊúâÁöÑÂõõÁßç‰∏çË¢´ËÆ§‰∏∫ÂèóÂà∞Â®ÅËÉÅÊàñ‰æùËµñ‰øùÊä§ÁöÑÈπ§Á±ª‰πã‰∏Ä„ÄÇËÆ∏Â§öÂ••Ëé±Âà©Â∞ÅÈù¢Âä®Áâ©ÈÉΩÊòØÊøíÂç±Áâ©ÁßçÔºõÊâÄÊúâÁöÑÂä®Áâ©ÂØπ‰∏ñÁïåÈÉΩÂæàÈáçË¶Å„ÄÇ</p>
<p>Â∞ÅÈù¢ÊèíÂõæÁî±ÂáØ‰º¶¬∑ËíôÂì•È©¨Âà©ÔºàKaren MontgomeryÔºâÊ†πÊçÆËã±ÂõΩÈ∏üÁ±ªÁöÑ‰∏ÄÂπÖÂè§Á∫øÈõïÁâàÁîªÁªòÂà∂„ÄÇÂ∞ÅÈù¢Â≠ó‰Ωì‰∏∫Gilroy SemiboldÂíåGuardian Sans„ÄÇÊ≠£ÊñáÂ≠ó‰Ωì‰∏∫Adobe Minion ProÔºõÊ†áÈ¢òÂ≠ó‰Ωì‰∏∫Adobe Myriad CondensedÔºõ‰ª£Á†ÅÂ≠ó‰Ωì‰∏∫Dalton MaagÁöÑUbuntu Mono„ÄÇ</p>
<h2 id="Á¨¨‰∏ÄÁ´†-ËΩØ‰ª∂ËÆæËÆ°ÁöÑËâ∫ÊúØ">Á¨¨‰∏ÄÁ´† ËΩØ‰ª∂ËÆæËÆ°ÁöÑËâ∫ÊúØ
</h2><p><strong>‰ªÄ‰πàÊòØËΩØ‰ª∂ËÆæËÆ°Ôºü‰∏∫‰ªÄ‰πà‰Ω†Â∫îËØ•ÂÖ≥ÂøÉÂÆÉÔºü</strong></p>
<p>Âú®Ëøô‰∏ÄÁ´†‰∏≠ÔºåÊàëÂ∞Ü‰∏∫Êú¨‰π¶ÂÖ≥‰∫éËΩØ‰ª∂ËÆæËÆ°ÁöÑÂÜÖÂÆπÂ•†ÂÆöÂü∫Á°Ä„ÄÇÊàë‰ºöËß£Èáä‰ªÄ‰πàÊòØËΩØ‰ª∂ËÆæËÆ°ÔºåÂ∏ÆÂä©‰Ω†ÁêÜËß£‰∏∫‰ªÄ‰πàÂÆÉÊòØÈ°πÁõÆÊàêÂäüÁöÑÂÖ≥ÈîÆÂõ†Á¥†ÔºåÂπ∂‰∏î‰∏∫‰ªÄ‰πàÂÆÉÊòØ‰Ω†ÂøÖÈ°ªÂÅöÂØπÁöÑ‰∏Ä‰ª∂‰∫ã„ÄÇ<br/>ÂêåÊó∂Ôºå‰Ω†‰ºöÁúãÂà∞ËΩØ‰ª∂ËÆæËÆ°ÊòØÈùûÂ∏∏Â§çÊùÇÁöÑÔºå‰∫ãÂÆû‰∏äÔºåÂÆÉÊòØËΩØ‰ª∂ÂºÄÂèë‰∏≠ÊúÄÂ§çÊùÇÁöÑÈÉ®ÂàÜ„ÄÇ<br/>Âõ†Ê≠§ÔºåÊàëËøò‰ºö‰ªãÁªçÂá†ÁßçËΩØ‰ª∂ËÆæËÆ°ÂéüÂàôÔºåÂ∏ÆÂä©‰Ω†Âú®Ê≠£Á°ÆÁöÑÈÅìË∑Ø‰∏äÂâçË°å„ÄÇ</p>
<p><strong>ÂáÜÂàô1ÔºöÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄß</strong></p>
<p>Âú®‚ÄúÂáÜÂàô1ÔºöÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄß‚Äù‰∏≠ÔºåÊàë‰ºöËÅöÁÑ¶‰∫éÂ§ßÂ±ÄËßÇÂπ∂Ëß£ÈáäËΩØ‰ª∂È¢ÑÊúü‰ºöÁªèÂéÜÂèòÂåñ„ÄÇÂõ†Ê≠§ÔºåËΩØ‰ª∂Â∫îËØ•ËÉΩÂ§üÂ∫îÂØπËøô‰∫õÂèòÂåñ„ÄÇ<br/>ÁÑ∂ËÄåÔºåËØ¥Ëµ∑Êù•ÂÆπÊòìÂÅöËµ∑Êù•ÈöæÔºåÂõ†‰∏∫Âú®Áé∞ÂÆû‰∏≠ÔºåËÄ¶ÂêàÂíå‰æùËµñÂÖ≥Á≥ª‰ΩøÂæóÂºÄÂèëËÄÖÁöÑÂ∑•‰ΩúÂèòÂæóÂ§çÊùÇÂæóÂ§ö„ÄÇËøô‰∫õÈóÆÈ¢òÂèØ‰ª•ÈÄöËøáËΩØ‰ª∂ËÆæËÆ°Êù•Ëß£ÂÜ≥„ÄÇ<br/>ÊàëÂ∞Ü‰ªãÁªçËΩØ‰ª∂ËÆæËÆ°‰Ωú‰∏∫ÁÆ°ÁêÜ‰æùËµñÂÖ≥Á≥ªÂíåÊäΩË±°ÁöÑËâ∫ÊúØ‚Äî‚ÄîËøôÊòØËΩØ‰ª∂Â∑•Á®ãÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÁªÑÊàêÈÉ®ÂàÜ„ÄÇ</p>
<p><strong>ÂáÜÂàô2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°</strong></p>
<p>Âú®‚ÄúÂáÜÂàô2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°‚Äù‰∏≠ÔºåÊàëÂ∞ÜÊòéÁ°ÆËÆ®ËÆ∫ËÄ¶ÂêàÂíå‰æùËµñÂÖ≥Á≥ªÔºåÂπ∂Â∏ÆÂä©‰Ω†ÁêÜËß£Â¶Ç‰ΩïËÆæËÆ°‰ª•ÈÄÇÂ∫îÂèòÂåñÔºå‰ΩøËΩØ‰ª∂Êõ¥ÂÖ∑ÈÄÇÂ∫îÊÄß„ÄÇ‰∏∫Ê≠§ÔºåÊàëÂ∞Ü‰ªãÁªçÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÂíå‰∏çË¶ÅÈáçÂ§çËá™Â∑±ÔºàDRYÔºâÂéüÂàôÔºåËøô‰∏§‰∏™ÂéüÂàôÂèØ‰ª•Â∏ÆÂä©‰Ω†ÂÆûÁé∞Ëøô‰∏ÄÁõÆÊ†á„ÄÇ</p>
<ul>
<li><strong>Âçï‰∏ÄËÅåË¥£ÂéüÂàô (SRP)</strong>ÔºöÊØè‰∏™Ê®°ÂùóÊàñÁ±ªÂ∫îÂè™Êúâ‰∏Ä‰∏™ÊîπÂèòÁöÑÁêÜÁî±ÔºåÂç≥Âè™Ë¥üË¥£‰∏Ä‰∏™ÂäüËÉΩ„ÄÇ</li>
<li><strong>‰∏çË¶ÅÈáçÂ§çËá™Â∑± (DRY)</strong>ÔºöÈÅøÂÖç‰ª£Á†ÅÈáçÂ§çÔºåÁ°Æ‰øùÈÄªËæëÂè™Âú®‰∏Ä‰∏™Âú∞ÊñπÂÆûÁé∞„ÄÇ</li>
</ul>
<p><strong>ÂáÜÂàô3ÔºöÂàÜÁ¶ªÊé•Âè£‰ª•ÈÅøÂÖç‰∫∫‰∏∫ËÄ¶Âêà</strong></p>
<p>Âú®‚ÄúÂáÜÂàô3ÔºöÂàÜÁ¶ªÊé•Âè£‰ª•ÈÅøÂÖç‰∫∫‰∏∫ËÄ¶Âêà‚Äù‰∏≠ÔºåÊàë‰ºöËøõ‰∏ÄÊ≠•ËÆ®ËÆ∫ËÄ¶ÂêàÈóÆÈ¢òÔºåÁâπÂà´ÊòØÈÄöËøáÊé•Âè£‰∫ßÁîüÁöÑËÄ¶Âêà„ÄÇ<br/>ÊàëËøò‰ºö‰ªãÁªçÊé•Âè£ÈöîÁ¶ªÂéüÂàôÔºàISPÔºâÔºåËøôÊòØ‰∏ÄÁßçÂáèÂ∞ëÁî±Êé•Âè£ÂºïËµ∑ÁöÑ‰∫∫‰∏∫ËÄ¶ÂêàÁöÑÊñπÊ≥ï„ÄÇ</p>
<ul>
<li><strong>Êé•Âè£ÈöîÁ¶ªÂéüÂàô (ISP)</strong>ÔºöÂÆ¢Êà∑Á´Ø‰∏çÂ∫îË¢´Ëø´‰æùËµñ‰∫éÂÆÉ‰ª¨‰∏ç‰ΩøÁî®ÁöÑÊé•Âè£„ÄÇ<br/>ËøôÊÑèÂë≥ÁùÄÊé•Âè£Â∫îËØ•Â∞ΩÈáèÂ∞èËÄåÂÖ∑‰ΩìÔºåËÄå‰∏çÊòØÂ§ßËÄåÊ≥õ„ÄÇ</li>
</ul>
<p><strong>ÂáÜÂàô4Ôºö‰∏∫ÂèØÊµãËØïÊÄßËÆæËÆ°</strong></p>
<p>Âú®‚ÄúÂáÜÂàô4Ôºö‰∏∫ÂèØÊµãËØïÊÄßËÆæËÆ°‚Äù‰∏≠ÔºåÊàë‰ºöÂÖ≥Ê≥®Áî±‰∫é‰∫∫‰∏∫ËÄ¶ÂêàÂØºËá¥ÁöÑÂèØÊµãËØïÊÄßÈóÆÈ¢ò„ÄÇ<br/>ÁâπÂà´ÊòØÔºåÊàë‰ºöÊèêÂá∫Â¶Ç‰ΩïÊµãËØïÁßÅÊúâÊàêÂëòÂáΩÊï∞ÁöÑÈóÆÈ¢òÔºåÂπ∂ÊºîÁ§∫ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÁöÑÂ∫îÁî®ÊòØÂîØ‰∏ÄÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<ul>
<li><strong>ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ</strong>ÔºöÂ∞Ü‰∏çÂêåÂäüËÉΩÂàÜÁ¶ªÂà∞‰∏çÂêåÁöÑÊ®°ÂùóÊàñÁ±ª‰∏≠Ôºå‰ª•‰æøÊõ¥ÂÆπÊòìËøõË°åÂçïÂÖÉÊµãËØïÂíåÈõÜÊàêÊµãËØï„ÄÇ</li>
</ul>
<p><strong>ÂáÜÂàô5Ôºö‰∏∫Êâ©Â±ïÊÄßËÆæËÆ°</strong></p>
<p>Âú®‚ÄúÂáÜÂàô5Ôºö‰∏∫Êâ©Â±ïÊÄßËÆæËÆ°‚Äù‰∏≠ÔºåÊàë‰ºöËÆ®ËÆ∫‰∏ÄÁßçÈáçË¶ÅÁöÑÂèòÂåñÁ±ªÂûãÔºöÊâ©Â±ï„ÄÇÂ∞±ÂÉè‰ª£Á†ÅÂ∫îËØ•Êòì‰∫éÊõ¥Êîπ‰∏ÄÊ†∑ÔºåÂÆÉ‰πüÂ∫îËØ•Êòì‰∫éÊâ©Â±ï„ÄÇÊàë‰ºöÁªô‰Ω†‰∏Ä‰∫õÂÆûÁé∞Ëøô‰∏ÄÁõÆÊ†áÁöÑÊÉ≥Ê≥ïÔºåÂπ∂Â±ïÁ§∫ÂºÄÈó≠ÂéüÂàôÔºàOCPÔºâÁöÑ‰ª∑ÂÄº„ÄÇ</p>
<ul>
<li><strong>ÂºÄÈó≠ÂéüÂàô (OCP)</strong>ÔºöËΩØ‰ª∂ÂÆû‰ΩìÔºàÁ±ª„ÄÅÊ®°Âùó„ÄÅÂáΩÊï∞Á≠âÔºâÂ∫îËØ•ÂØπÊâ©Â±ïÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠„ÄÇËøôÊÑèÂë≥ÁùÄ‰Ω†ÂèØ‰ª•ÈÄöËøáÊ∑ªÂä†Êñ∞ÂäüËÉΩÊù•Êâ©Â±ïÁ≥ªÁªüÔºåËÄå‰∏çÈúÄË¶Å‰øÆÊîπÁé∞ÊúâÁöÑ‰ª£Á†Å„ÄÇ</li>
</ul>
<hr>
<h3 id="ÂáÜÂàô1ÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄß">ÂáÜÂàô1ÔºöÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄß
</h3><p>Â¶ÇÊûúÊàëÈóÆ‰Ω†Âì™‰∫õ‰ª£Á†ÅÂ±ûÊÄßÂØπ‰Ω†Êù•ËØ¥ÊúÄÈáçË¶ÅÔºåÁªèËøá‰∏Ä‰∫õÊÄùËÄÉÂêéÔºå‰Ω†ÂèØËÉΩ‰ºöËØ¥ËØ∏Â¶ÇÂèØËØªÊÄß„ÄÅÂèØÊµãËØïÊÄß„ÄÅÂèØÁª¥Êä§ÊÄß„ÄÅÂèØÊâ©Â±ïÊÄß„ÄÅÂèØÂ§çÁî®ÊÄßÂíåÂèØÊâ©Â±ïÊÄß‰πãÁ±ªÁöÑ‰∏úË•ø„ÄÇÊàëÂÆåÂÖ®ÂêåÊÑè„ÄÇ<br/>‰ΩÜÊòØÔºåÂ¶ÇÊûúÊàëÁé∞Âú®ÈóÆ‰Ω†Â¶Ç‰ΩïÂÆûÁé∞Ëøô‰∫õÁõÆÊ†áÔºåÂæàÊúâÂèØËÉΩ‰Ω†‰ºöÂºÄÂßãÂàó‰∏æ‰∏Ä‰∫õC++ÁâπÊÄßÔºöRAII„ÄÅÁÆóÊ≥ï„ÄÅlambdaË°®ËææÂºè„ÄÅÊ®°ÂùóÁ≠âÁ≠â„ÄÇ</p>
<p><strong>ÁâπÊÄß‰∏çÊòØËΩØ‰ª∂ËÆæËÆ°</strong></p>
<p>ÊòØÁöÑÔºåC++ Êèê‰æõ‰∫ÜÂæàÂ§öÁâπÊÄß„ÄÇÈùûÂ∏∏Â§öÔºÅÂ§ßÁ∫¶‰∏ÄÂçäÁöÑËøë2000È°µÂç∞Âà∑ÁâàC++Ê†áÂáÜÈÉΩÁî®‰∫éËß£ÈáäËØ≠Ë®ÄÊú∫Âà∂ÂíåÁâπÊÄß„ÄÇ<br/>Ëá™C++11ÂèëÂ∏É‰ª•Êù•ÔºåÊúâ‰∏Ä‰∏™ÊòéÁ°ÆÁöÑÊâøËØ∫ÔºöÊØè‰∏âÂπ¥ÔºåC++Ê†áÂáÜÂåñÂßîÂëò‰ºöÈÉΩ‰ºöÁªôÊàë‰ª¨Â∏¶Êù•‰∏Ä‰∏™Êñ∞ÁöÑC++Ê†áÂáÜÔºåÂÖ∂‰∏≠ÂåÖÂê´È¢ùÂ§ñÁöÑÂÖ®Êñ∞ÁâπÊÄß„ÄÇ<br/>Èâ¥‰∫éÊ≠§ÔºåC++Á§æÂå∫ÈùûÂ∏∏Âº∫Ë∞ÉÁâπÊÄßÂíåËØ≠Ë®ÄÊú∫Âà∂Âπ∂‰∏ç‰ª§‰∫∫ÊÑèÂ§ñ„ÄÇÂ§ßÂ§öÊï∞‰π¶Á±ç„ÄÅËÆ≤Â∫ßÂíåÂçöÂÆ¢ÈÉΩÈõÜ‰∏≠Âú®ÁâπÊÄß„ÄÅÊñ∞Â∫ìÂíåËØ≠Ë®ÄÁªÜËäÇ‰∏ä„ÄÇ</p>
<p>Âá†‰πéÊÑüËßâÂÉèÊòØÁâπÊÄßÊòØÁî®C++ÁºñÁ®ã‰∏≠ÊúÄÈáçË¶ÅÁöÑ‰∏úË•øÔºåÂπ∂‰∏îÂØπC++È°πÁõÆÁöÑÊàêÂäüËá≥ÂÖ≥ÈáçË¶Å„ÄÇ‰ΩÜËØ¥ÂÆûËØùÔºåÂÆÉ‰ª¨Âπ∂‰∏çÊòØ„ÄÇ<br/>Êó†ËÆ∫ÊòØÂØπÊâÄÊúâÁâπÊÄßÁöÑ‰∫ÜËß£ËøòÊòØC++Ê†áÂáÜÁöÑÈÄâÊã©ÔºåÈÉΩ‰∏çÊòØÈ°πÁõÆÊàêÂäüÁöÑÂÖ≥ÈîÆÂõ†Á¥†,‰Ω†‰∏çÂ∫îËØ•ÊåáÊúõÁâπÊÄßÊù•ÊãØÊïë‰Ω†ÁöÑÈ°πÁõÆ„ÄÇ<br/>Áõ∏ÂèçÔºå‰∏Ä‰∏™È°πÁõÆÂç≥‰Ωø‰ΩøÁî®ËæÉÊóßÁöÑC++Ê†áÂáÜÔºåÁîöËá≥Âè™‰ΩøÁî®ÂèØÁî®ÁâπÊÄßÁöÑ‰∏ÄÂ∞èÈÉ®ÂàÜÔºå‰πüÂèØ‰ª•ÈùûÂ∏∏ÊàêÂäü„ÄÇ<br/>ÊíáÂºÄËΩØ‰ª∂ÂºÄÂèë‰∏≠ÁöÑ‰∫∫‰∏∫Âõ†Á¥†‰∏çË∞àÔºåÂØπ‰∫éÈ°πÁõÆÊàêË¥•Êõ¥ÈáçË¶ÅÁöÑÈóÆÈ¢òÊòØËΩØ‰ª∂ÁöÑÊï¥‰ΩìÁªìÊûÑ„ÄÇ</p>
<p>ÊúÄÁªàÔºåÊ≠£ÊòØËøôÁßçÁªìÊûÑÂÜ≥ÂÆö‰∫ÜÂèØÁª¥Êä§ÊÄßÔºö‰øÆÊîπ‰ª£Á†Å„ÄÅÊâ©Â±ï‰ª£Á†ÅÂíåÊµãËØï‰ª£Á†ÅÊúâÂ§öÂÆπÊòìÔºüÂ¶ÇÊûúÊ≤°ÊúâËΩªÊùæ‰øÆÊîπ‰ª£Á†Å„ÄÅÊ∑ªÂä†Êñ∞ÂäüËÉΩÂπ∂ÂØπÂÖ∂Ê≠£Á°ÆÊÄßÊúâ‰ø°ÂøÉÁöÑËÉΩÂäõÔºåÈ°πÁõÆÂ∞ÜËµ∞Âà∞ÁîüÂëΩÂë®ÊúüÁöÑÂ∞ΩÂ§¥„ÄÇ<br/>ÁªìÊûÑËøòÂÜ≥ÂÆö‰∫ÜÈ°πÁõÆÁöÑÂèØÊâ©Â±ïÊÄßÔºöÈ°πÁõÆÂú®Â¥©Ê∫É‰πãÂâçËÉΩÂ¢ûÈïøÂà∞Â§öÂ§ßÔºüÂú®Â§ßÂÆ∂ÂºÄÂßã‰∫íÁõ∏Âπ≤Êâ∞‰πãÂâçÔºåÊúâÂ§öÂ∞ë‰∫∫ÂèØ‰ª•ÂèÇ‰∏éÂÆûÁé∞È°πÁõÆÁöÑÊÑøÊôØÔºü</p>
<p>Êï¥‰ΩìÁªìÊûÑÂ∞±ÊòØÈ°πÁõÆÁöÑ<strong>ËÆæËÆ°</strong>,ËÆæËÆ°Âú®È°πÁõÆÊàêÂäü‰∏≠ÁöÑ‰ΩúÁî®ËøúÊØî‰ªª‰ΩïÁâπÊÄßÈÉΩË¶ÅÈáçË¶ÅÂæóÂ§ö„ÄÇ<br/>Â•ΩÁöÑËΩØ‰ª∂‰∏ç‰ªÖ‰ªÖÂú®‰∫éÊ≠£Á°Æ‰ΩøÁî®Êüê‰∏™ÁâπÊÄß,ËÄåÊòØÂÖ≥‰∫éÂùöÂÆûÁöÑÊû∂ÊûÑÂíåËÆæËÆ°„ÄÇ<br/>ËâØÂ•ΩÁöÑËΩØ‰ª∂ËÆæËÆ°ÂèØ‰ª•ÂÆπÂøç‰∏Ä‰∫õÁ≥üÁ≥ïÁöÑÂÆûÁé∞ÂÜ≥Á≠ñÔºå‰ΩÜÁ≥üÁ≥ïÁöÑËΩØ‰ª∂ËÆæËÆ°‰∏çËÉΩ‰ªÖÈù†Ëã±ÈõÑÂºèÁöÑ‰ΩøÁî®ÔºàÊóßÊàñÊñ∞ÁöÑÔºâÁâπÊÄßÊù•ÊåΩÊïë„ÄÇ</p>
<p><strong>ËΩØ‰ª∂ËÆæËÆ°ÔºöÁÆ°ÁêÜ‰æùËµñÂÖ≥Á≥ªÂíåÊäΩË±°ÁöÑËâ∫ÊúØ</strong></p>
<p><strong>‰∏∫‰ªÄ‰πàËΩØ‰ª∂ËÆæËÆ°ÂØπÈ°πÁõÆÁöÑË¥®ÈáèÂ¶ÇÊ≠§ÈáçË¶ÅÔºü</strong></p>
<p>ÂÅáËÆæÁõÆÂâç‰∏ÄÂàáËøêË°åËâØÂ•ΩÔºåÂè™Ë¶ÅËΩØ‰ª∂Ê≤°ÊúâÂèòÂåñ‰∏î‰∏çÈúÄË¶ÅÊ∑ªÂä†Êñ∞ÂäüËÉΩÔºå‰Ω†Â∞±ÂèØ‰ª•È´òÊûïÊó†Âøß„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËøôÁßçÁä∂ÊÄÅÈÄöÂ∏∏‰∏ç‰ºöÊåÅÁª≠Âæà‰πÖÔºåÂèØ‰ª•ÂêàÁêÜÈ¢ÑÊúüÔºåÊüê‰∫õ‰∫ãÊÉÖÂ∞Ü‰ºöÂèëÁîüÂèòÂåñÔºåÊØïÁ´üÔºåÂú®ËΩØ‰ª∂ÂºÄÂèë‰∏≠ÂîØ‰∏Ä‰∏çÂèòÁöÑÂ∞±ÊòØÂèòÂåñÔºåÂÆÉÊòØÊâÄÊúâÈóÆÈ¢òÂèäËß£ÂÜ≥ÊñπÊ°àËÉåÂêéÁöÑÈ©±Âä®Âäõ„ÄÇ</p>
<p>ËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàËΩØ‰ª∂Ë¢´Áß∞‰∏∫‚ÄúËΩØ‚Äù‰ª∂ÔºöÂõ†‰∏∫ÂÆÉÁõ∏ÂØπÁ°¨‰ª∂Êù•ËØ¥ÊòØÊüîËΩØ‰∏îÂèØÂ°ëÁöÑ„ÄÇÂ∞ΩÁÆ°Êàë‰ª¨ÊúüÊúõËΩØ‰ª∂ËÉΩËΩªÊùæÈÄÇÂ∫îÂèòÂåñÔºå‰ΩÜÁé∞ÂÆûÂæÄÂæÄÂπ∂ÈùûÂ¶ÇÊ≠§„ÄÇ</p>
<p>‰∏∫‰∫ÜËØ¥ÊòéËøô‰∏ÄÁÇπÔºåÂÅáËÆæ‰Ω†‰ªéÈóÆÈ¢òË∑üË∏™Á≥ªÁªü‰∏≠ÈÄâÊã©‰∫Ü‰∏Ä‰∏™ËØÑ‰º∞‰∏∫2ÁöÑ‰ªªÂä°ÔºåÊó†ËÆ∫2‰ª£Ë°®‰ªÄ‰πàÔºåÂÆÉÂê¨Ëµ∑Êù•ÈÉΩ‰∏çÊòØÂ§ß‰ªªÂä°ÔºåÊâÄ‰ª•‰Ω†Êúâ‰ø°ÂøÉÂèØ‰ª•ÂæàÂø´ÂÆåÊàê„ÄÇ</p>
<p>ÊÄÄÁùÄËâØÂ•ΩÁöÑÊÑøÊúõÔºå‰Ω†ÂÖàÁêÜËß£È¢ÑÊúüË¶ÅÊ±ÇÔºåÁÑ∂ÂêéÂºÄÂßãÂú®‰∏Ä‰∏™ÂÆû‰ΩìA‰∏äËøõË°å‰øÆÊîπ„ÄÇ<br/>Áî±‰∫éÊµãËØïÂèçÈ¶àÔºà‰Ω†ÂæàÂπ∏ËøêÊúâÊµãËØïÔºÅÔºâÔºå‰Ω†ÂæàÂø´ÊÑèËØÜÂà∞ËøòÈúÄËß£ÂÜ≥ÂÆû‰ΩìBÁöÑÈóÆÈ¢òÔºåËøô‰ª§‰∫∫ÊÉäËÆ∂ÔºåÂõ†‰∏∫‰Ω†Ê≤°È¢ÑÊñôÂà∞B‰ºöÊ∂âÂèäÂÖ∂‰∏≠„ÄÇ</p>
<p>Â∞ΩÁÆ°Â¶ÇÊ≠§Ôºå‰Ω†ËøòÊòØÁªßÁª≠Ë∞ÉÊï¥BÔºåÁÑ∂ËÄåÔºåÂ§úÈó¥ÊûÑÂª∫ÊòæÁ§∫ËøôÂØºËá¥‰∫ÜCÂíåDÂÅúÊ≠¢Â∑•‰Ωú„ÄÇ<br/>Ê∑±ÂÖ•Ë∞ÉÊü•ÂêéÔºå‰Ω†ÂèëÁé∞ÈóÆÈ¢òÁöÑÊ†πÊ∫êÈÅçÂ∏É‰ª£Á†ÅÂ∫ìÁöÑÂæàÂ§ß‰∏ÄÈÉ®ÂàÜ„ÄÇ<br/>Ëøô‰∏™Áúã‰ººÁÆÄÂçïÁöÑ‰ªªÂä°Â∑≤ÊºîÂèòÊàêÂ§ßËßÑÊ®°‰∏îÈ´òÈ£éÈô©ÁöÑ‰ª£Á†Å‰øÆÊîπ„ÄÇ‰Ω†Ëß£ÂÜ≥ÈóÆÈ¢òÁöÑ‰ø°ÂøÉÊ∂àÂ§±ÔºåÊú¨Âë®ÁöÑÂ∑•‰ΩúËÆ°Âàí‰πüË¢´Êâì‰π±„ÄÇ</p>
<p><strong>‰πüËÆ∏Ëøô‰∏™ÊïÖ‰∫ãÂê¨Ëµ∑Êù•ÂæàÁÜüÊÇâ</strong></p>
<p>‰πüËÆ∏Ëøô‰∏™ÊïÖ‰∫ãÂØπ‰Ω†Êù•ËØ¥ÂæàÁÜüÊÇâÔºå‰πüËÆ∏‰Ω†ÁîöËá≥ÂèØ‰ª•Ë¥°ÁåÆ‰∏Ä‰∫õ‰Ω†Ëá™Â∑±ÁªèÂéÜÁöÑ‚ÄúÊàò‰∫âÊïÖ‰∫ã‚Äù„ÄÇ<br/>‰∫ãÂÆû‰∏äÔºåÂ§ßÂ§öÊï∞ÂºÄÂèëËÄÖÈÉΩÊúâÁ±ª‰ººÁöÑÁªèÂéÜ„ÄÇ<br/>ËÄåËøô‰∫õÁªèÂéÜÁöÑÈóÆÈ¢òÈÄöÂ∏∏ÈÉΩÊ∫êËá™Âêå‰∏Ä‰∏™Ê†πÊ∫êÔºö‰æùËµñÂÖ≥Á≥ª„ÄÇÊ≠£Â¶ÇKent BeckÂú®‰ªñÁöÑÊµãËØïÈ©±Âä®ÂºÄÂèë‰∏Ä‰π¶‰∏≠ÊâÄË°®ËææÁöÑÔºö</p>
<p><strong>‰æùËµñÂÖ≥Á≥ªÊòØÊâÄÊúâËßÑÊ®°ËΩØ‰ª∂ÂºÄÂèë‰∏≠ÁöÑÂÖ≥ÈîÆÈóÆÈ¢ò„ÄÇ</strong></p>
<p>‰æùËµñÂÖ≥Á≥ªÊòØÊØè‰∏™ËΩØ‰ª∂ÂºÄÂèëËÄÖÂ≠òÂú®ÁöÑÁ•∏Ê†π ‚Äú‰ΩÜÊòØÂΩìÁÑ∂‰ºöÊúâ‰æùËµñÂÖ≥Á≥ªÔºå‚Äù ‰Ω†ÂèØËÉΩ‰ºö‰∫âËæ©ÈÅìÔºå‚ÄúÊÄªÊòØ‰ºöÊúâ‰æùËµñÂÖ≥Á≥ªÔºåÂê¶Âàô‰∏çÂêåÁöÑ‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰ΩïÂçèÂêåÂ∑•‰ΩúÂë¢Ôºü‚Äù ÂΩìÁÑ∂Ôºå‰Ω†ÊòØÂØπÁöÑ„ÄÇ<br/>‰∏çÂêåÁöÑ‰ª£Á†ÅÁâáÊÆµÈúÄË¶ÅÂçèÂêåÂ∑•‰ΩúÔºåËøôÁßç‰∫§‰∫íÊÄª‰ºö‰∫ßÁîüÊüêÁßçÂΩ¢ÂºèÁöÑËÄ¶Âêà„ÄÇ<br/>ÁÑ∂ËÄåÔºåËôΩÁÑ∂Â≠òÂú®ÂøÖË¶Å‰∏î‰∏çÂèØÈÅøÂÖçÁöÑ‰æùËµñÂÖ≥Á≥ªÔºå‰ΩÜ‰πüÂ≠òÂú®Êàë‰ª¨Âõ†Áº∫‰πèÂØπÈóÆÈ¢òÁöÑÁêÜËß£„ÄÅÊ≤°ÊúâÊ∏ÖÊô∞ÁöÑÊï¥‰ΩìËßÜËßíÊàñÂè™ÊòØ‰∏çÂ§üÊ≥®ÊÑèËÄåÊó†ÊÑèÂºïÂÖ•ÁöÑ‰∫∫‰∏∫‰æùËµñÂÖ≥Á≥ª„ÄÇ<br/>‰∏çÁî®ËØ¥ÔºåËøô‰∫õ‰∫∫ÈÄ†‰æùËµñÂÖ≥Á≥ª‰ºöÂ∏¶Êù•È∫ªÁÉ¶ÔºåÂÆÉ‰ª¨‰ΩøÂæóÁêÜËß£Êàë‰ª¨ÁöÑËΩØ‰ª∂„ÄÅ‰øÆÊîπËΩØ‰ª∂„ÄÅÊ∑ªÂä†Êñ∞ÂäüËÉΩÂíåÁºñÂÜôÊµãËØïÂèòÂæóÊõ¥Âä†Âõ∞Èöæ„ÄÇ<br/>Âõ†Ê≠§Ôºå‰Ωú‰∏∫ËΩØ‰ª∂ÂºÄÂèëËÄÖÁöÑ‰∏ªË¶Å‰ªªÂä°‰πã‰∏ÄÔºàÂ¶ÇÊûú‰∏çÊòØÊúÄÈáçË¶ÅÁöÑ‰ªªÂä°ÔºâÔºåÂ∞±ÊòØÂ∞ΩÈáèÂáèÂ∞ë‰∫∫‰∏∫‰æùËµñÂÖ≥Á≥ª„ÄÇ</p>
<p>ËøôÁßç‰æùËµñÂÖ≥Á≥ªÁöÑÊúÄÂ∞èÂåñÊòØËΩØ‰ª∂Êû∂ÊûÑÂíåËÆæËÆ°ÁöÑÁõÆÊ†á„ÄÇÁî®Robert C. MartinÁöÑËØùÊù•ËØ¥Ôºö</p>
<p><strong>ËΩØ‰ª∂Êû∂ÊûÑÁöÑÁõÆÊ†áÊòØÂ∞ÜÊûÑÂª∫ÂíåÁª¥Êä§ÊâÄÈúÄÁ≥ªÁªüÊâÄÈúÄÁöÑ‰∫∫ÂäõËµÑÊ∫êÊúÄÂ∞èÂåñ„ÄÇ</strong></p>
<p>Êû∂ÊûÑÂíåËÆæËÆ°ÊòØÂáèÂ∞ë‰ªª‰ΩïÈ°πÁõÆÂ∑•‰ΩúÈáèÊâÄÈúÄÁöÑÂ∑•ÂÖ∑„ÄÇÂÆÉ‰ª¨Â§ÑÁêÜ‰æùËµñÂÖ≥Á≥ªÂπ∂ÈÄöËøáÊäΩË±°Êù•Èôç‰ΩéÂ§çÊùÇÊÄß„ÄÇÁî®ÊàëËá™Â∑±ÁöÑËØùÊù•ËØ¥Ôºö</p>
<p><strong>ËΩØ‰ª∂ËÆæËÆ°ÊòØÁÆ°ÁêÜËΩØ‰ª∂ÁªÑ‰ª∂‰πãÈó¥Áõ∏‰∫í‰æùËµñÁöÑËâ∫ÊúØ„ÄÇÂÆÉÊó®Âú®ÊúÄÂ∞èÂåñ‰∫∫‰∏∫ÔºàÊäÄÊúØÔºâ‰æùËµñÔºåÂπ∂ÂºïÂÖ•ÂøÖË¶ÅÁöÑÊäΩË±°ÂíåÂ¶•Âçè„ÄÇ</strong></p>
<p>ÊòØÁöÑÔºåËΩØ‰ª∂ËÆæËÆ°ÊòØ‰∏ÄÈó®Ëâ∫ÊúØÔºåÂÆÉ‰∏çÊòØ‰∏ÄÈó®ÁßëÂ≠¶Ôºå‰πüÊ≤°Êúâ‰∏ÄÂ•óÁÆÄÂçïËÄåÊòéÁ°ÆÁöÑÁ≠îÊ°à„ÄÇ<br/>ÂæàÂ§öÊó∂ÂÄôÔºåËÆæËÆ°ÁöÑÊï¥‰ΩìÂõæÊôØ‰ºöËÆ©Êàë‰ª¨Èöæ‰ª•ÊçâÊë∏ÔºåÊàë‰ª¨‰ºöË¢´ËΩØ‰ª∂ÂÆû‰Ωì‰πãÈó¥Â§çÊùÇÁöÑÁõ∏‰∫í‰æùËµñÊâÄÂéãÂÄíÔºå‰ΩÜÊàë‰ª¨ËØïÂõæÂ∫îÂØπËøôÁßçÂ§çÊùÇÊÄßÔºåÂπ∂ÈÄöËøáÂºïÂÖ•ÈÄÇÂΩìÁöÑÊäΩË±°Êù•ÂáèÂ∞ëÂÆÉ„ÄÇ<br/>ËøôÊ†∑ÔºåÊàë‰ª¨Â∞ÜÁªÜËäÇÁöÑÂ±ÇÊ¨°‰øùÊåÅÂú®‰∏Ä‰∏™ÂêàÁêÜÁöÑÊ∞¥Âπ≥„ÄÇÁÑ∂ËÄåÔºåÂæàÂ§öÊó∂ÂÄôÂõ¢Èòü‰∏≠ÁöÑ‰∏™Âà´ÂºÄÂèëËÄÖÂèØËÉΩÂØπÊû∂ÊûÑÂíåËÆæËÆ°Êúâ‰∏çÂêåÁöÑÊÉ≥Ê≥ï„ÄÇÊàë‰ª¨ÂèØËÉΩÊó†Ê≥ïÂÆûÁé∞Ëá™Â∑±ÂØπËÆæËÆ°ÁöÑÊÑøÊôØÔºåÂπ∂Ë¢´Ëø´ÂÅöÂá∫Â¶•Âçè‰ª•ÁªßÁª≠ÂâçËøõ„ÄÇ</p>
<p>Âú®ÂâçÈù¢ÁöÑÂºïÁî®‰∏≠ÔºåÊû∂ÊûÑÂíåËÆæËÆ°Ëøô‰∏§‰∏™ËØçÂèØ‰ª•‰∫íÊç¢‰ΩøÁî®ÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÈùûÂ∏∏Áõ∏‰ºº‰∏îÁõÆÊ†áÁõ∏Âêå„ÄÇ<br/>ÁÑ∂ËÄåÔºåÂÆÉ‰ª¨Âπ∂‰∏çÊòØÂÆåÂÖ®‰∏ÄÊ†∑ÁöÑÔºåÂ¶ÇÊûú‰Ω†Áúã‰∏Ä‰∏ãËΩØ‰ª∂ÂºÄÂèëÁöÑ‰∏â‰∏™Â±ÇÊ¨°ÔºåÁõ∏‰ººÊÄßÂíåÂ∑ÆÂºÇÊÄßÂ∞±‰ºöÂèòÂæóÊ∏ÖÊô∞Ëµ∑Êù•„ÄÇ</p>
<p><strong>ËΩØ‰ª∂ÂºÄÂèëÁöÑ‰∏â‰∏™Â±ÇÊ¨°</strong></p>
<p>ËΩØ‰ª∂Êû∂ÊûÑÂíåËΩØ‰ª∂ËÆæËÆ°ÊòØËΩØ‰ª∂ÂºÄÂèë‰∏â‰∏™Â±ÇÊ¨°‰∏≠ÁöÑ‰∏§‰∏™ÔºåÁ¨¨‰∏â‰∏™Â±ÇÊ¨°ÊòØÂÆûÁé∞ÁªÜËäÇ„ÄÇ<br/>‰∏∫‰∫ÜËÆ©‰Ω†Êõ¥Áõ¥ËßÇÂú∞ÁêÜËß£Ëøô‰∏â‰∏™Â±ÇÊ¨°ÔºåÊàë‰ª¨‰ª•Âª∫Á≠ëÈ¢ÜÂüü‰∏∫‰æãÔºåÁ±ªÊØîÊû∂ÊûÑ„ÄÅËÆæËÆ°ÂíåÂÆûÁé∞ÁªÜËäÇÁöÑÂÖ≥Á≥ª„ÄÇÂÅáËÆæ‰Ω†ÊòØ‰∏ÄÂêçÂª∫Á≠ëËÆæËÆ°Â∏àÔºàÊòØÁöÑÔºå‰∏çÊòØÂùêÂú®ÁîµËÑëÂâçÂñùÁùÄÂíñÂï°ÁöÑËΩØ‰ª∂Êû∂ÊûÑÂ∏àÔºåËÄåÊòØÂú®Â∑•Âú∞Áé∞Âú∫ÁöÑÊàøÂ±ãÂª∫Á≠ëÂ∏àÔºâ„ÄÇ‰Ω†ÁöÑËÅåË¥£ÂåÖÊã¨Ôºö</p>
<ul>
<li>Á°Æ‰øùÊàøÂ±ã‰∏éÂë®Âõ¥ÁéØÂ¢ÉÂçèË∞ÉÔºõ</li>
<li>‰øùËØÅÁªìÊûÑÁ®≥Âõ∫ÊÄßÔºõ</li>
<li>ËßÑÂàíÊàøÈó¥Â∏ÉÂ±Ä„ÄÅÁÆ°ÈÅìÁ≥ªÁªüÁ≠âÔºõ</li>
<li>ÂÖºÈ°æÁæéËßÇ‰∏éÂäüËÉΩÊÄßÔºà‰æãÂ¶ÇÂÆΩÊïûÁöÑÂÆ¢ÂéÖ„ÄÅÂé®Êàø‰∏éÈ§êÂéÖÁöÑ‰æøÊç∑Âä®Á∫øÔºâ„ÄÇ</li>
</ul>
<p>Ëøô‰∫õÂ∑•‰ΩúÂ±û‰∫é<strong>Êû∂ÊûÑ</strong>Âíå<strong>ËÆæËÆ°</strong>Â±ÇÈù¢„ÄÇ‰∏§ËÄÖÁöÑÁïåÈôêÂæÄÂæÄÊòØÊ®°Á≥äÁöÑ‚Äî‚ÄîÊû∂ÊûÑÂÖ≥Ê≥®ÂÖ®Â±Ä‰∏îÈöæ‰ª•ÂêéÊúüÊõ¥ÊîπÁöÑÂÜ≥Á≠ñÔºåËÄåËÆæËÆ°Â§ÑÁêÜÊõ¥ÁªÜÁ≤íÂ∫¶ÁöÑÈÉ®ÂàÜÔºàÂ¶ÇÈó®Á™ó‰ΩçÁΩÆÔºâ„ÄÇ‰ΩÜÊó†ËÆ∫ÊòØÊû∂ÊûÑËøòÊòØËÆæËÆ°Ôºå‰Ω†ÈÉΩ‰∏ç‰ºöÊìçÂøÉÂÜ∞ÁÆ±„ÄÅÁîµËßÜÁöÑÊëÜÊîæÊàñË£ÖÈ•∞ÁªÜËäÇ‚Äî‚ÄîËøô‰∫õÂ±û‰∫é<strong>ÂÆûÁé∞ÁªÜËäÇ</strong>ÔºåÂØπÂ∫îËΩØ‰ª∂ÂºÄÂèë‰∏≠ÁöÑÂÖ∑‰ΩìÁºñÁ†ÅÂÆûÁé∞„ÄÇ</p>
<p><strong>ÂÆûÁé∞ÁªÜËäÇÔºöÊúÄÂÖ∑‰ΩìÁöÑÂ±ÇÊ¨°</strong></p>
<p>Âú®ËΩØ‰ª∂‰∏≠ÔºåÂÆûÁé∞ÁªÜËäÇÊòØ<strong>Â¶Ç‰ΩïËß£ÂÜ≥ÈóÆÈ¢ò</strong>ÁöÑÂ±ÇÈù¢ÔºåÊ∂âÂèäÔºö</p>
<ul>
<li>ÈÄâÊã©C++Ê†áÂáÜÊàñËØ≠Ë®ÄÁâπÊÄßÔºàÂ¶Ç<code>std::make_unique</code>Â∑•ÂéÇÂáΩÊï∞„ÄÅ<code>std::enable_if</code>ÂÆûÁé∞SFINAEÔºâÔºõ</li>
<li>Â§ÑÁêÜÂÜÖÂ≠òÁÆ°ÁêÜ„ÄÅÂºÇÂ∏∏ÂÆâÂÖ®ÂíåÊÄßËÉΩ‰ºòÂåñÔºõ</li>
<li>Â∫îÁî®ÊÉØÁî®Ê≥ïÔºàÂ¶Ç‚ÄúÂ§çÂà∂-‰∫§Êç¢‚ÄùÊÉØÁî®Ê≥ï„ÄÅRAIIÔºâ„ÄÇ</li>
</ul>
<p><strong>ÂÖ≥ÈîÆÁÇπ</strong>ÔºöÂÆûÁé∞ÁªÜËäÇÈÄöÂ∏∏‰∏çÂºïÂÖ•ÊäΩË±°ÊàñËß£ËÄ¶ÔºåËÄåÊòØÈÄöËøá<strong>Â∞ÅË£Ö</strong>ÔºàÂ¶ÇRAIIÂ∞ÜËµÑÊ∫êÁÆ°ÁêÜ‰∏é‰∏öÂä°ÈÄªËæëÈöîÁ¶ªÔºâÊèêÂçá‰ª£Á†ÅÂÅ•Â£ÆÊÄß„ÄÇ</p>
<p><strong>ËΩØ‰ª∂ËÆæËÆ°ÔºöÂÖ≥Ê≥®‰∫§‰∫í‰∏éÂèØÁª¥Êä§ÊÄß</strong></p>
<p>ËΩØ‰ª∂ËÆæËÆ°ËÅöÁÑ¶‰∫éÔºö</p>
<ul>
<li><strong>ÂèØÁª¥Êä§ÊÄß„ÄÅÂèØÊâ©Â±ïÊÄß„ÄÅÂèØÊµãËØïÊÄß</strong>Ôºõ</li>
<li>ËΩØ‰ª∂ÂÆû‰ΩìÔºàÁ±ª„ÄÅÂáΩÊï∞ÔºâÁöÑ<strong>Áâ©ÁêÜ‰∏éÈÄªËæë‰æùËµñÂÖ≥Á≥ª</strong>Ôºõ</li>
<li>Â∫îÁî®ËÆæËÆ°Ê®°ÂºèÔºàÂ¶ÇËÆøÈóÆËÄÖÊ®°Âºè„ÄÅÁ≠ñÁï•Ê®°Âºè„ÄÅË£ÖÈ•∞Ê®°ÂºèÔºâËß£ËÄ¶Â§çÊùÇÁ≥ªÁªü„ÄÇ</li>
</ul>
<p><strong>ÂÖ≥ÈîÆÁÇπ</strong>ÔºöËÆæËÆ°Ê®°ÂºèÈÄöÂ∏∏ÊòØËØ≠Ë®ÄÊó†ÂÖ≥ÁöÑÔºåÂ∏ÆÂä©Â∞ÜÂ§çÊùÇÈÄªËæëÂàÜËß£‰∏∫ÂèØÁÆ°ÁêÜÁöÑÊ®°Âùó„ÄÇ</p>
<p><strong>ËΩØ‰ª∂Êû∂ÊûÑÔºöÊ®°Á≥ä‰ΩÜÂÖ≥ÈîÆÁöÑ‚ÄúÂ§ßÂÜ≥Á≠ñ‚Äù</strong></p>
<p>ËΩØ‰ª∂Êû∂ÊûÑÊòØ‰∏â‰∏™Â±ÇÊ¨°‰∏≠ÊúÄÈöæÂÆö‰πâÁöÑÔºå‰ΩÜÊ†∏ÂøÉÂú®‰∫éÔºö</p>
<ul>
<li>Âà∂ÂÆö<strong>Èöæ‰ª•ÂêéÊúüÊõ¥ÊîπÁöÑÈáçÂ§ßÂÜ≥Á≠ñ</strong>ÔºàÂ¶ÇÈÄâÊã©ÂæÆÊúçÂä°Êû∂ÊûÑÊàñÂÆ¢Êà∑Á´Ø-ÊúçÂä°Âô®Êû∂ÊûÑÔºâÔºõ</li>
<li>Á°Æ‰øùÁ≥ªÁªüÂêÑÈÉ®ÂàÜÂèòÊõ¥Êó∂‰∫í‰∏çÂΩ±ÂìçÔºõ</li>
<li>‰ΩøÁî®Êû∂ÊûÑÊ®°ÂºèÔºàÂ¶ÇÂæÆÊúçÂä°„ÄÅ‰∫ã‰ª∂È©±Âä®ÔºâÂÆö‰πâÊ®°ÂùóÊàñÁªÑ‰ª∂Èó¥ÁöÑÁªìÊûÑ‰∏é‰æùËµñ„ÄÇ</li>
</ul>
<p><strong>ÂÖ≥ÈîÆÊ¥ûËßÅ</strong>Ôºö</p>
<blockquote>
<p>‚ÄúÊû∂ÊûÑÊòØ‰Ω†Â∏åÊúõËÉΩÂú®È°πÁõÆÂàùÊúüÂ∞±Ê≠£Á°ÆÂÜ≥Á≠ñÔºå‰ΩÜÂÆûÈôÖÊú™ÂøÖÊØîÂÖ∂‰ªñÂÜ≥Á≠ñÊõ¥ÂÆπÊòìÊ≠£Á°Æ„ÄÇ‚Äù
‚Äî‚ÄîRalph Johnson</p>
</blockquote>
<p><strong>ÊåëÊàò</strong>ÔºöÈöèÁùÄÂæÆÊúçÂä°Á≠âÊäÄÊúØÁöÑÊôÆÂèäÔºå‚ÄúÂ§ß‚Äù‰∏é‚ÄúÂ∞è‚ÄùÁöÑÁïåÈôêÂèòÂæóÊ®°Á≥äÔºåÊû∂ÊûÑÂ∏∏Áî±È°πÁõÆ‰∏≠ÁöÑÊ†∏ÂøÉÂºÄÂèëËÄÖÂá≠ÁªèÈ™åÁïåÂÆö„ÄÇ</p>
<p><strong>ÊÉØÁî®Ê≥ïÔºöË∑®Ë∂äÂ±ÇÊ¨°ÁöÑÊ®°Âºè</strong></p>
<p>ÊÉØÁî®Ê≥ïÔºàIdiomÔºâÊòØËØ≠Ë®ÄÁâπÂÆöÁöÑÂ∏∏ËßÅËß£ÂÜ≥ÊñπÊ°àÔºåÂèØËÉΩÂ±û‰∫éËÆæËÆ°ÊàñÂÆûÁé∞ÁªÜËäÇ„ÄÇ‰æãÂ¶ÇÔºö</p>
<ul>
<li><strong>ÂÆûÁé∞ÁªÜËäÇÊÉØÁî®Ê≥ï</strong>ÔºöRAII„ÄÅÂ§çÂà∂-‰∫§Êç¢Ôºõ</li>
<li><strong>ËÆæËÆ°ÊÉØÁî®Ê≥ï</strong>ÔºöÈùûËôöÊé•Âè£ÔºàNVIÔºåÂü∫‰∫éÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÔºâ„ÄÅPimplÔºàÂü∫‰∫éÊ°•Êé•Ê®°ÂºèÔºâ„ÄÇ</li>
</ul>
<p><strong>Ê†∏ÂøÉÂå∫Âà´</strong>Ôºö</p>
<ul>
<li><strong>ÊäΩË±°</strong>ÔºàËÆæËÆ°Â±ÇÔºâÈÄöËøáÈöêËóèÁªÜËäÇÁÆÄÂåñ‰∫§‰∫íÔºõ</li>
<li><strong>Â∞ÅË£Ö</strong>ÔºàÂÆûÁé∞Â±ÇÔºâÈÄöËøáÈõÜ‰∏≠ÁÆ°ÁêÜÈÄªËæëÊèêÂçáÂÆâÂÖ®ÊÄß</li>
</ul>
<hr>
<p><strong>ÂØπËØ≠Ë®ÄÁâπÊÄßÁöÑËøáÂ∫¶ÂÖ≥Ê≥®</strong></p>
<p>Â¶ÇÊûúËΩØ‰ª∂Êû∂ÊûÑÂíåËΩØ‰ª∂ËÆæËÆ°Â¶ÇÊ≠§ÈáçË¶ÅÔºå‰∏∫‰ΩïC++Á§æÂå∫Âç¥Â¶ÇÊ≠§Áó¥Ëø∑‰∫éËØ≠Ë®ÄÁâπÊÄßÔºü‰∏∫‰ΩïÊàë‰ª¨ÊÄªËê•ÈÄ†‰∏ÄÁßçÈîôËßâÔºåËÆ§‰∏∫C++Ê†áÂáÜ„ÄÅËØ≠Ë®ÄÊú∫Âà∂ÂíåÁâπÊÄßËÉΩÂÜ≥ÂÆöÈ°πÁõÆÁöÑÊàêË¥•ÔºüÊàëËÆ§‰∏∫Êúâ‰∏â‰∏™‰∏ªË¶ÅÂéüÂõ†Ôºö</p>
<p><strong>Á¨¨‰∏ÄÔºåÁâπÊÄßÁöÑÂ§çÊùÇÊÄß‰∏éÊÉØÊÄßÂ°ëÈÄ†</strong>
C++ËØ≠Ë®ÄÁâπÊÄßÊï∞ÈáèÂ∫ûÂ§ß‰∏îÁªÜËäÇÂ§çÊùÇÔºåÁ§æÂå∫ÈúÄË¶ÅÂ§ßÈáèÊó∂Èó¥ËÆ®ËÆ∫Â¶Ç‰ΩïÊ≠£Á°Æ‰ΩøÁî®ÂÆÉ‰ª¨ÔºåÂª∫Á´ãÂØπ‚ÄúËâØÂ•ΩÂÆûË∑µ‚ÄùÂíå‚Äú‰∏çËâØÂÆûË∑µ‚ÄùÁöÑÂÖ±ËØÜ„ÄÇÊàë‰ª¨ÈúÄË¶ÅÂÖ±ÂêåÂ°ëÈÄ†<strong>Á¨¶ÂêàC++ÊÉØÁî®Ê≥ï</strong>ÁöÑÁºñÁ®ãÊñáÂåñ„ÄÇ</p>
<p><strong>Á¨¨‰∫åÔºåÂØπÁâπÊÄßÁöÑÈîôËØØÊúüÊúõ</strong>
‰ª•C++20Ê®°ÂùóÔºàModulesÔºâ‰∏∫‰æã‚Äî‚ÄîÂÆÉÊó†ÁñëÊòØËá™C++ËØûÁîü‰ª•Êù•ÊúÄÈáçÂ§ßÁöÑÊäÄÊúØÈù©Êñ∞‰πã‰∏ÄÔºåÂèØËÉΩÁªàÁªìÂ§¥Êñá‰ª∂ÂåÖÂê´ÁöÑÁπÅÁêêÊ®°Âºè„ÄÇ‰ΩÜËÆ∏Â§ö‰∫∫ËØØ‰ª•‰∏∫Ê®°ÂùóËÉΩ‰øÆÂ§ç‰ª£Á†ÅÁöÑÁªìÊûÑÊÄßÈóÆÈ¢òÔºåÁîöËá≥ÊãØÊïëÈ°πÁõÆ„ÄÇÁÑ∂ËÄåÔºåÊ®°ÂùóÁöÑ‰ΩúÁî®ÊòØ<strong>ÂèçÊò†Áé∞ÊúâÁªìÊûÑ</strong>ÔºåËÄåÈùûÊîπËøõËÆæËÆ°„ÄÇÂÆÉÊó†Ê≥ïÊé©ÁõñËÆæËÆ°Áº∫Èô∑ÔºåÂèçËÄåÂèØËÉΩÊö¥Èú≤ÈóÆÈ¢ò„ÄÇ</p>
<p><strong>Á¨¨‰∏âÔºåËΩØ‰ª∂ËÆæËÆ°ÁöÑÂ§çÊùÇÊÄßËøúË∂ÖËØ≠Ë®ÄÁâπÊÄß</strong>
Áõ∏ÊØîËΩØ‰ª∂ËÆæËÆ°‰∏≠Ëß£ËÄ¶ÂÆû‰Ωì„ÄÅÁÆ°ÁêÜ‰æùËµñÁöÑÂ§çÊùÇÊÄßÔºåËØ≠Ë®ÄÁâπÊÄßÁöÑËßÑÂàôÔºàÊó†ËÆ∫ÊúâÂ§öÂ∞ë‰æãÂ§ñÊÉÖÂÜµÔºâÊõ¥ÂÆπÊòìËß£Èáä„ÄÇÂÖ≥‰∫éÁâπÊÄßÁöÑÈóÆÈ¢òÈÄöÂ∏∏ÊúâÊòéÁ°ÆÁ≠îÊ°àÔºåËÄåËΩØ‰ª∂ËÆæËÆ°ÁöÑÁ≠îÊ°àÂæÄÂæÄÊòØ <strong>‚ÄúËßÜÊÉÖÂÜµËÄåÂÆö‚Äù</strong>„ÄÇÂ¶Ç‰ΩïËÆ©‰ª£Á†ÅÊõ¥ÂèØÁª¥Êä§„ÄÅÂèØÊâ©Â±ï„ÄÅÂèØÊµãËØïÔºåÈ´òÂ∫¶‰æùËµñÈ°πÁõÆÂÖ∑‰ΩìÊÉÖÂ¢É„ÄÇÊ≠£Â¶ÇÈÇ£Âè•ÂêçË®ÄÔºö</p>
<blockquote>
<p>‚ÄúËÆæËÆ°‰∏éÁºñÁ®ãÊòØ‰∫∫Á±ªÊ¥ªÂä®ÔºõÂøòËÆ∞Ëøô‰∏ÄÁÇπÔºå‰∏ÄÂàáÂ∞ÜÂ§±ÂéªÊÑè‰πâ„ÄÇ‚Äù</p>
</blockquote>
<hr>
<p><strong>‰∏∫‰ΩïÊàë‰ª¨‰ªçÈúÄÂÖ≥Ê≥®ÁâπÊÄßÔºü</strong></p>
<p>Ëøô‰∏â‰∏™ÂéüÂõ†ÂÖ±ÂêåÂØºËá¥‰∫ÜÁ§æÂå∫ÂØπÁâπÊÄßÁöÑËøáÂ∫¶ÂÖ≥Ê≥®„ÄÇ‰ΩÜËØ∑Ê≥®ÊÑèÔºå<strong>ÁâπÊÄßÊú¨Ë∫´Âπ∂Èùû‰∏çÈáçË¶Å</strong>„ÄÇÊ≠£Á°ÆÁêÜËß£Âíå‰ΩøÁî®ÂÆÉ‰ª¨Ëá≥ÂÖ≥ÈáçË¶ÅÔºå‰ΩÜ‰ªÖÂá≠ÁâπÊÄßÊó†Ê≥ïÊãØÊïëÈ°πÁõÆ„ÄÇ</p>
<hr>
<p><strong>ÂõûÂΩíËΩØ‰ª∂ËÆæËÆ°‰∏éÂéüÂàôÁöÑÊ†∏ÂøÉ</strong></p>
<p>ÁâπÊÄßÂõ∫ÁÑ∂ÈáçË¶ÅÔºå‰ΩÜËΩØ‰ª∂ËÆæËÆ°ÊâçÊòØÈ°πÁõÆÊàêÂäüÁöÑÂü∫Áü≥„ÄÇÊú¨‰π¶Â∞ÜËÅöÁÑ¶‰∫éÔºö</p>
<ul>
<li><strong>ËΩØ‰ª∂ËÆæËÆ°ÂÜ≥Á≠ñËÉåÂêéÁöÑÈÄªËæë</strong>Ôºõ</li>
<li><strong>ËÆæËÆ°ÂéüÂàô</strong>ÔºàÂ¶ÇSOLID„ÄÅDRYÔºâÔºõ</li>
<li><strong>‰æùËµñÁÆ°ÁêÜ</strong>‰∏é<strong>ÊäΩË±°ËÆæËÆ°</strong>Ôºõ</li>
<li><strong>Áé∞‰ª£C++‰ª£Á†ÅÁöÑÂêàÁêÜÂ∫îÁî®</strong>ÔºàÂ¶ÇC++20Ê¶ÇÂøµÔºâÔºåËÄåÈùûÁõ≤ÁõÆËøΩÊ±Ç<code>noexcept</code>ÊàñÊª•Áî®<code>constexpr</code>„ÄÇ</li>
</ul>
<p><strong>ÂÖ≥ÈîÆÁªìËÆ∫</strong></p>
<p>‰ºòÁßÄÁöÑËΩØ‰ª∂ÂºÄÂèëËÄÖÂøÖÈ°ªÊ∑±ÂÖ•ÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°„ÄÇÂõ†‰∏∫Ôºö</p>
<ul>
<li><strong>‰ºòÁßÄËΩØ‰ª∂ÊàêÊú¨‰ΩéÂªâ</strong>ÔºåÁ≥üÁ≥ïËΩØ‰ª∂‰ª£‰ª∑È´òÊòÇÔºõ</li>
<li>ËØ≠Ë®ÄÁâπÊÄßÊòØÂ∑•ÂÖ∑ÔºåËÆæËÆ°ËÉΩÂäõÊâçÊòØÊ†∏ÂøÉÁ´û‰∫âÂäõÔºõ</li>
<li>ÁúüÊ≠£ÁöÑÊåëÊàòÂú®‰∫é<strong>Âπ≥Ë°°ÁâπÊÄß‰ΩøÁî®‰∏éËÆæËÆ°ÂÜ≥Á≠ñ</strong>ÔºåÊûÑÂª∫ÂèØÊåÅÁª≠ÊºîËøõÁöÑÁ≥ªÁªü„ÄÇ</li>
</ul>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Â∞ÜËΩØ‰ª∂ËÆæËÆ°ËßÜ‰∏∫ÁºñÂÜôËΩØ‰ª∂ÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÈÉ®ÂàÜ„ÄÇ</li>
<li>ÂáèÂ∞ëÂØπC++ËØ≠Ë®ÄÁªÜËäÇÁöÑÂÖ≥Ê≥®ÔºåÊõ¥Â§öÂú∞ÂÖ≥Ê≥®ËΩØ‰ª∂ËÆæËÆ°„ÄÇ</li>
<li>ÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑËÄ¶ÂêàÂíå‰æùËµñÔºå‰ΩøËΩØ‰ª∂Êõ¥ËÉΩÈÄÇÂ∫îÈ¢ëÁπÅÁöÑÂèòÂåñ„ÄÇ</li>
<li>ÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÊòØÁÆ°ÁêÜ‰æùËµñÂÖ≥Á≥ªÂíåÊäΩË±°ÁöÑËâ∫ÊúØ„ÄÇËÆ§ËØÜÂà∞ËΩØ‰ª∂ËÆæËÆ°‰∏éËΩØ‰ª∂Êû∂ÊûÑ‰πãÈó¥ÁöÑÁïåÈôêÊòØÊµÅÂä®ÁöÑ„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô2‰∏∫ÂèòÂåñËÄåËÆæËÆ°">ÂáÜÂàô2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°
</h3><p>‰ºòÁßÄËΩØ‰ª∂ÁöÑÊ†∏ÂøÉÁâπÂæÅ‰πã‰∏ÄÊòØ<strong>ÊòìÂèòÊõ¥ÊÄß</strong>„ÄÇËøô‰∏ÄÁâπÊÄßÁîöËá≥ÈöêÂê´Âú®&quot;ËΩØ‰ª∂&quot;Ôºà<em>software</em>Ôºâ‰∏ÄËØç‰∏≠‚Äî‚Äî‰∏éÁ°¨‰ª∂Ôºà<em>hardware</em>Ôºâ‰∏çÂêåÔºåËΩØ‰ª∂Â∫îËÉΩËΩªÊùæÈÄÇÂ∫îÈúÄÊ±ÇÂèòÂåñÔºàÂèÇËßÅÂáÜÂàô 1ÔºöÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄßÔºâ„ÄÇÁÑ∂ËÄåÔºåÂÆûÈôÖÂºÄÂèë‰∏≠Êàë‰ª¨Â∏∏ÂèëÁé∞ÔºöÁúã‰ººÁÆÄÂçïÁöÑ‰ª£Á†ÅÂèòÊõ¥ÔºåÂæÄÂæÄÈúÄË¶ÅËÄóË¥πÊï∞Â§©ÁîöËá≥Êï∞Âë®„ÄÇ</p>
<hr>
<p><strong>ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ</strong></p>
<p>Èôç‰Ωé‰∫∫‰∏∫ËÄ¶Âêà„ÄÅÁÆÄÂåñÂèòÊõ¥ÁöÑÊúÄ‰Ω≥ÂÆûË∑µÊòØ<strong>ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ</strong>„ÄÇÂÖ∂Ê†∏ÂøÉÊÄùÊÉ≥ÊòØÔºö</p>
<blockquote>
<p>Â∞ÜÂäüËÉΩÊãÜÂàÜ‰∏∫<strong>È´òÂÜÖËÅö„ÄÅ‰ΩéËÄ¶Âêà</strong>ÁöÑÁã¨Á´ãÊ®°ÂùóÔºåÊØè‰∏™Ê®°Âùó‰∏ìÊ≥®Âçï‰∏ÄËÅåË¥£„ÄÇ
‚Äî‚Äî„ÄäÁ®ãÂ∫èÂëò‰øÆÁÇº‰πãÈÅì„Äã</p>
</blockquote>
<p>ËøôÁßçÊÄùÊÉ≥ÈÄöËøá‰∏çÂêåÊúØËØ≠Ë¢´ÂèçÂ§çÂº∫Ë∞ÉÔºö</p>
<ul>
<li><strong>Ê≠£‰∫§ÊÄß</strong>ÔºàOrthogonalityÔºâÔºöÂàÜÁ¶ªËΩØ‰ª∂‰∏≠Ê≠£‰∫§ÁöÑÁª¥Â∫¶</li>
<li><strong>ÂÜÖËÅöÊÄß</strong>ÔºàCohesionÔºâÔºöÊ®°ÂùóÂÜÖÈÉ®ÂÖÉÁ¥†ÁöÑÂÖ≥ËÅîÂº∫Â∫¶ÔºàÈ´òÂÜÖËÅöÊ®°ÂùóÂ∫î‰Ωú‰∏∫Êï¥‰ΩìÂ§ÑÁêÜÔºâ</li>
<li><strong>Âçï‰∏ÄËÅåË¥£ÂéüÂàô</strong>ÔºàSRPÔºâÔºö‰∏Ä‰∏™Á±ªÂè™Êúâ‰∏Ä‰∏™ÂèòÊõ¥ÁêÜÁî±</li>
</ul>
<p><strong>ÂÖ≥ÈîÆÊ¥ûÂØü</strong>Ôºö</p>
<ul>
<li>Â∞Ü<strong>Âõ†‰∏çÂêåÂéüÂõ†ËÄåÂèòÂåñ</strong>ÁöÑÈÉ®ÂàÜÂàÜÁ¶ª</li>
<li>‰ªÖÂ∞ÜÁúüÊ≠£Áõ∏ÂÖ≥ÁöÑÂÜÖÂÆπËÅöÂêà</li>
<li>ÂáèÂ∞ë‰∫∫‰∏∫ËÄ¶ÂêàÔºå‰ΩøÂèòÊõ¥Âè™ÈúÄ‰øÆÊîπ‰∏ÄÂ§Ñ</li>
</ul>
<p><strong>‰∫∫‰∏∫ËÄ¶ÂêàÁöÑ‰ª£Á†ÅÁ§∫‰æã</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"> <span class="c1">//#include &lt;some_json_library.h&gt;  // Potential physical dependency 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Document</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">virtual</span> <span class="o">~</span><span class="n">Document</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">exportToJSON</span><span class="p">(</span> <span class="cm">/*...*/</span> <span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span> <span class="n">ByteStream</span><span class="o">&amp;</span><span class="p">,</span> <span class="cm">/*...*/</span> <span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Áúã‰ººÂêàÁêÜÁöÑËÆæËÆ°</strong>Ôºö</p>
<ul>
<li>Âü∫Á±ªÊèê‰æõ<code>exportToJSON()</code>Âíå<code>serialize()</code>Á≠âÈÄöÁî®ÂäüËÉΩ</li>
<li>Ê¥æÁîüÁ±ªÔºàÂ¶ÇPDF„ÄÅWordÊñáÊ°£ÔºâÂÆûÁé∞ÂÖ∑‰ΩìÈÄªËæë</li>
<li>Áî®Êà∑Êó†ÈúÄ‰∫ÜËß£ÂÖ∑‰ΩìÊñáÊ°£Á±ªÂûãÂç≥ÂèØÊìç‰Ωú</li>
</ul>
<p><strong>ÂÆûÈôÖÈöêËóèÁöÑ‰∏âÂ§ßËÄ¶ÂêàÈóÆÈ¢ò</strong>Ôºö</p>
<hr>
<p><strong>1. Á¨¨‰∏âÊñπÂ∫ìÁöÑÂº∫Âà∂ÁªëÂÆö</strong></p>
<ul>
<li>
<p><strong>JSONÂØºÂá∫ÁöÑÈô∑Èò±</strong>Ôºö
ÊØè‰∏™Ê¥æÁîüÁ±ªÂøÖÈ°ªÂÆûÁé∞<code>exportToJSON()</code>ÔºåÂØºËá¥Âº∫Âà∂‰æùËµñÊüê‰∏™JSONÂ∫ìÔºàÂ¶Ç<code>rapidjson</code>Êàñ<code>simdjson</code>Ôºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PDFDocument</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Document</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">exportToJSON</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">rapidjson</span><span class="o">::</span><span class="n">Document</span> <span class="n">json</span><span class="p">;</span>  <span class="c1">// Áõ¥Êé•‰æùËµñÁâπÂÆöJSONÂ∫ì
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// ÂÆûÁé∞ÁªÜËäÇ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>ÂêéÊûú</strong>Ôºö
<ul>
<li>ÊâÄÊúâÊñáÊ°£Á±ªÂûãË¢´Âêå‰∏ÄJSONÂ∫ìÁªëÂÆö</li>
<li>Êõ¥Êç¢Â∫ìÈúÄ‰øÆÊîπÊâÄÊúâÊ¥æÁîüÁ±ª</li>
<li>Á≥ªÁªüÂèòÂæóËáÉËÇøÔºåÂ§çÁî®ÊÄßÈôç‰Ωé</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>2. Êé•Âè£Á≠æÂêçÊ≥ÑÊºèÂÆûÁé∞ÁªÜËäÇ</strong></p>
<ul>
<li>
<p><strong>ÈöêÂºèËÄ¶ÂêàÁ§∫‰æã</strong>Ôºö
ÂÅáËÆæ<code>exportToJSON()</code>ÂèÇÊï∞ËÆæËÆ°ÂèóÈôê‰∫éÂΩìÂâçJSONÂ∫ìÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">exportToJSON</span><span class="p">(</span><span class="n">rapidjson</span><span class="o">::</span><span class="n">PrettyWriter</span><span class="o">&amp;</span> <span class="n">writer</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>ÂêéÊûú</strong>Ôºö
<ul>
<li>Êõ¥Êç¢JSONÂ∫ìÊó∂ÔºåÊé•Âè£Á≠æÂêçË¢´Ëø´‰øÆÊîπ</li>
<li>ÊâÄÊúâË∞ÉÁî®Êñπ‰ª£Á†ÅÈúÄÂêåÊ≠•Ë∞ÉÊï¥</li>
<li>ÂèòÊõ¥ÂΩ±ÂìçËåÉÂõ¥Ë∂ÖÂá∫È¢ÑÊúü</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>3. Â∫èÂàóÂåñ‰∏éÊñáÊ°£Á±ªÂûãÁöÑÂÖ®Â±ÄËÄ¶Âêà</strong></p>
<ul>
<li>
<p><strong>Êûö‰∏æÂØºËá¥ÁöÑËøûÈîÅÂèçÂ∫î</strong>Ôºö
Â∫èÂàóÂåñÈúÄË¶ÅÊ†áËØÜÊñáÊ°£Á±ªÂûãÔºåÂºïÂÖ•ÂÖ®Â±ÄÊûö‰∏æÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">enum</span> <span class="k">class</span> <span class="nc">DocumentType</span> <span class="p">{</span> <span class="n">pdf</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="cm">/*...*/</span> <span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Ê¥æÁîüÁ±ªÂÆûÁé∞Â∫èÂàóÂåñÊó∂‰æùËµñÊ≠§Êûö‰∏æÔºö</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">PDFDocument</span><span class="o">::</span><span class="n">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">stream</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">stream</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">DocumentType</span><span class="o">::</span><span class="n">pdf</span><span class="p">));</span>  <span class="c1">// ÊâÄÊúâÊñáÊ°£Á±ªÁü•ÊôìÂÖ∂‰ªñÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ÂÖ∂‰ªñÂ∫èÂàóÂåñÈÄªËæë...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>ÂêéÊûú</strong>Ôºö
<ul>
<li>Ê∑ªÂä†Êñ∞ÊñáÊ°£Á±ªÂûãÈúÄ‰øÆÊîπÂÖ®Â±ÄÊûö‰∏æ</li>
<li>ÊâÄÊúâÁé∞ÊúâÊñáÊ°£Á±ªÁöÑÂ∫èÂàóÂåñÈÄªËæëË¢´ÂΩ±Âìç</li>
<li>ËøùÂèçÂºÄÈó≠ÂéüÂàôÔºàÂØπÊâ©Â±ïÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠Ôºâ</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>ËÆæËÆ°Áº∫Èô∑ÊÄªÁªì</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">ÈóÆÈ¢òÁ±ªÂûã</th>
<th style="text-align:left">ÂºïÂèëÂéüÂõ†</th>
<th style="text-align:left">Áª¥Êä§‰ª£‰ª∑</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Á¨¨‰∏âÊñπÂ∫ìÁªëÂÆö</strong></td>
<td style="text-align:left">Ê¥æÁîüÁ±ªÁõ¥Êé•ÂÆûÁé∞ÂÖ∑‰ΩìÂ∫ìÈÄªËæë</td>
<td style="text-align:left">Êõ¥Êç¢ÊäÄÊúØÊ†àÈúÄÂÖ®ÈáèÈáçÂÜô</td>
</tr>
<tr>
<td style="text-align:left"><strong>Êé•Âè£Ê≥ÑÊºèÂÆûÁé∞ÁªÜËäÇ</strong></td>
<td style="text-align:left">Êé•Âè£ÂèÇÊï∞‰∏éÁâπÂÆöÂ∫ìÂº∫ÂÖ≥ËÅî</td>
<td style="text-align:left">Ë∞ÉÁî®Êñπ‰ª£Á†ÅÈöèÂÆûÁé∞Â∫ìÂèòÊõ¥ËÄå‰øÆÊîπ</td>
</tr>
<tr>
<td style="text-align:left"><strong>ÂÖ®Â±ÄÁ±ªÂûãËÄ¶Âêà</strong></td>
<td style="text-align:left">Â∫èÂàóÂåñ‰æùËµñÂÖ±‰∫´Êûö‰∏æ</td>
<td style="text-align:left">Êñ∞Â¢ûÁ±ªÂûãÂØºËá¥ËøûÈîÅ‰ª£Á†Å‰øÆÊîπ</td>
</tr>
</tbody>
</table></div>
<p><strong>‰ºòÂåñÊñπÂêëÔºöËß£ËÄ¶ËÆæËÆ°</strong></p>
<ol>
<li>
<p><strong>ÂàÜÁ¶ªÊï∞ÊçÆ‰∏éÊìç‰Ωú</strong></p>
<ul>
<li>Â∞ÜJSONÂØºÂá∫„ÄÅÂ∫èÂàóÂåñÁ≠âËÉΩÂäõÊãÜÂàÜ‰∏∫Áã¨Á´ãÁªÑ‰ª∂</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">JSONExporter</span> <span class="p">{</span>  <span class="c1">// Áã¨Á´ãJSONÂ§ÑÁêÜÁ±ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="k">export</span><span class="p">(</span><span class="k">const</span> <span class="n">Document</span><span class="o">&amp;</span> <span class="n">doc</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PDFDocument</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Document</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span>  <span class="c1">// ‰∏çÂÜçÂÆûÁé∞JSONÈÄªËæë
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>‰æùËµñÊ≥®ÂÖ•Âèñ‰ª£ÁªßÊâø</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DocumentProcessor</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">DocumentProcessor</span><span class="p">(</span><span class="n">JSONExporter</span><span class="o">&amp;</span> <span class="n">exporter</span><span class="p">,</span> <span class="n">Serializer</span><span class="o">&amp;</span> <span class="n">serializer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">exporter_</span><span class="p">(</span><span class="n">exporter</span><span class="p">),</span> <span class="n">serializer_</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">process</span><span class="p">(</span><span class="k">const</span> <span class="n">Document</span><span class="o">&amp;</span> <span class="n">doc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">exporter_</span><span class="p">.</span><span class="k">export</span><span class="p">(</span><span class="n">doc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">serializer_</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">doc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">JSONExporter</span><span class="o">&amp;</span> <span class="n">exporter_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Serializer</span><span class="o">&amp;</span> <span class="n">serializer_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>‰ΩøÁî®ÈÄÇÈÖçÂô®Ê®°ÂºèÈöîÁ¶ªÁ¨¨‰∏âÊñπÂ∫ì</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">RapidJSONAdapter</span> <span class="o">:</span> <span class="k">public</span> <span class="n">JSONExporter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="k">export</span><span class="p">(</span><span class="k">const</span> <span class="n">Document</span><span class="o">&amp;</span> <span class="n">doc</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">rapidjson</span><span class="o">::</span><span class="n">Document</span> <span class="n">json</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ËΩ¨Êç¢ÈÄªËæëÂ∞ÅË£ÖÂú®Ê≠§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<hr>
<p><strong>ÂÖ≥ÈîÆÂêØÁ§∫</strong></p>
<ul>
<li><strong>Ë≠¶ÊÉï&quot;ÂÖ®ËÉΩÂü∫Á±ª&quot;</strong>ÔºöÁªßÊâø‰∏çÊòØ‰ª£Á†ÅÂ§çÁî®ÁöÑÂîØ‰∏ÄÊâãÊÆµ</li>
<li><strong>Âª∂ËøüÊäÄÊúØÂÜ≥Á≠ñ</strong>ÔºöÈÄöËøáÊäΩË±°Â±ÇÈöîÁ¶ªÂÖ∑‰ΩìÂÆûÁé∞ÁªÜËäÇ</li>
<li><strong>Ê≠£‰∫§ÊÄßËÆæËÆ°</strong>ÔºöÁ°Æ‰øù‰∏çÂêåÂäüËÉΩÁª¥Â∫¶Áõ∏‰∫íÁã¨Á´ãÔºåÂèòÊõ¥‰∫í‰∏çÂΩ±Âìç</li>
</ul>
<blockquote>
<p>&ldquo;Â•ΩÁöÑÁ≥ªÁªüËÆæËÆ°‰∏çÊòØÈÅøÂÖçÂèòÊõ¥ÔºåËÄåÊòØËÆ©ÂèòÊõ¥ÂèëÁîüÂú®Ê≠£Á°ÆÁöÑÂú∞Êñπ„ÄÇ&rdquo;
‚Äî‚Äî„ÄäÈ¢ÜÂüüÈ©±Âä®ËÆæËÆ°„Äã</p>
</blockquote>
<p>ÊàëÂ∫îËØ•ÊòéÁ°ÆÊåáÂá∫Ôºå<code>Document</code> Á±ªÂØπÈÄâÂÆö JSON Â∫ìÂ≠òÂú®ÊΩúÂú®ÁöÑÁâ©ÁêÜ‰æùËµñ„ÄÇ</p>
<p>Â¶ÇÊûú <code>&lt;Document.h&gt;</code> Â§¥Êñá‰ª∂ÂåÖÂê´‰∫ÜÊâÄÈÄâ JSON Â∫ì‰∏≠ÁöÑ‰ªª‰ΩïÂ§¥Êñá‰ª∂ÔºàÂ¶Ç‚Äú‰∫∫Â∑•ËÄ¶ÂêàÁöÑ‰æãÂ≠ê‚Äù‰ª£Á†ÅÁâáÊÆµÊâÄÁ§∫ÔºâÔºå</p>
<p>‰æãÂ¶ÇÂõ†‰∏∫ <code>exportToJSON()</code> ÂáΩÊï∞ÊúüÊúõÂü∫‰∫éËØ•Â∫ìÁöÑ‰∏Ä‰∫õÂèÇÊï∞ÔºåÈÇ£‰πàÂ∞±Â≠òÂú®ÂØπËØ•Â∫ìÁöÑÊòéÁ°Æ‰æùËµñ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ¶ÇÊûúÊé•Âè£ËÉΩÂ§üÊ≠£Á°ÆÊäΩË±°Ëøô‰∫õÁªÜËäÇÔºåÂπ∂‰∏î <code>&lt;Document.h&gt;</code> Â§¥Êñá‰ª∂‰∏çÂåÖÂê´Êù•Ëá™ JSON Â∫ìÁöÑ‰ªª‰ΩïÂÜÖÂÆπÔºåÈÇ£‰πàËøôÁßçÁâ©ÁêÜ‰æùËµñÂèØËÉΩ‰ºöË¢´ÈÅøÂÖç„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËøôÂèñÂÜ≥‰∫é‰æùËµñÂÖ≥Á≥ªËÉΩÂê¶Ë¢´Ôºà‰ª•ÂèäÂ¶Ç‰ΩïË¢´ÔºâËâØÂ•ΩÂú∞ÊäΩË±°„ÄÇ</p>
<p>‚ÄúÈ´òÂ±ÇÊ¨°„ÄÅ‰ΩéÂ±ÇÊ¨°‚Äî‚ÄîÊàëÁé∞Âú®ÊúâÁÇπÁ≥äÊ∂Ç‰∫ÜÔºå‚Äù‰Ω†Êä±ÊÄ®ÈÅì„ÄÇÊòØÁöÑÔºåÊàëÁü•ÈÅìËøô‰∏§‰∏™ÊúØËØ≠ÈÄöÂ∏∏‰ºöËÆ©‰∫∫ÊÑüÂà∞Âõ∞ÊÉë„ÄÇÂú®Êàë‰ª¨ÁªßÁª≠‰πãÂâçÔºåÂÖàËÆ©Êàë‰ª¨ÊòéÁ°ÆËøô‰∏§‰∏™ÊúØËØ≠ÁöÑÂÆö‰πâ„ÄÇ</p>
<p>Ëøô‰∏§‰∏™ÊúØËØ≠ÁöÑËµ∑Ê∫ê‰∏éÊàë‰ª¨Áî®Áªü‰∏ÄÂª∫Ê®°ËØ≠Ë®ÄÔºàUMLÔºâÁªòÂà∂ÂõæË°®ÁöÑÊñπÂºèÊúâÂÖ≥ÔºöÊàë‰ª¨ËÆ§‰∏∫Á®≥ÂÆöÁöÑÂäüËÉΩÂá∫Áé∞Âú®È°∂ÈÉ®ÔºàÈ´òÂ±ÇÊ¨°ÔºâÔºåËÄåÊõ¥Â∏∏ÂèòÂåñ„ÄÅÂÖ∑ÊúâÂèØÂèòÊÄßÊàñÂèØÂ°ëÊÄßÁöÑÂäüËÉΩÂá∫Áé∞Âú®Â∫ïÈÉ®Ôºà‰ΩéÂ±ÇÊ¨°Ôºâ„ÄÇ</p>
<p>ÈÅóÊÜæÁöÑÊòØÔºåÂΩìÊàë‰ª¨ÁªòÂà∂Êû∂ÊûÑÂõæÊó∂ÔºåÈÄöÂ∏∏‰ºöËØïÂõæÂ±ïÁ§∫ÂêÑÈÉ®ÂàÜÂ¶Ç‰ΩïÁõ∏‰∫íÊûÑÂª∫ÔºåÂõ†Ê≠§ÊúÄÁ®≥ÂÆöÁöÑÈÉ®ÂàÜ‰ºöÂá∫Áé∞Âú®Êû∂ÊûÑÁöÑÂ∫ïÈÉ®„ÄÇËøôËá™ÁÑ∂‰ºöÂºïËµ∑‰∏Ä‰∫õÊ∑∑Ê∑Ü„ÄÇ</p>
<p>‰∏çËÆ∫Â¶Ç‰ΩïÁªòÂà∂ÔºåËØ∑ËÆ∞‰ΩèËøô‰∏§‰∏™ÊúØËØ≠ÔºöÈ´òÂ±ÇÊ¨°ÊåáÁöÑÊòØÊû∂ÊûÑ‰∏≠Á®≥ÂÆöÁöÑÈÉ®ÂàÜÔºå‰ΩéÂ±ÇÊ¨°ÊåáÁöÑÊòØÊõ¥Â∏∏ÂèòÂåñÊàñÊõ¥ÂèØËÉΩÂèòÂåñÁöÑÊñπÈù¢„ÄÇ</p>
<p>ÂõûÂà∞ÈóÆÈ¢òÊú¨Ë∫´ÔºöÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÂª∫ËÆÆÊàë‰ª¨ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÂíåÈÇ£‰∫õ‰∏çÂ±û‰∫éÂêå‰∏ÄËÅåË¥£ÁöÑÈÉ®ÂàÜÔºåÂç≥Áº∫‰πèÂÜÖËÅöÊÄßÁöÑÈÉ®ÂàÜ„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂÆÉÂª∫ËÆÆÊàë‰ª¨Â∞ÜÂõ†‰∏çÂêåÂéüÂõ†ËÄåÂèòÂåñÁöÑÈÉ®ÂàÜÂàÜÁ¶ª‰∏∫ÂèòÂåñÁÇπ„ÄÇ</p>
<p>Ê†πÊçÆËøô‰∏ÄÂª∫ËÆÆÔºåDocumentÁ±ªË¢´ÈáçÊûÑÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Document</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">virtual</span> <span class="o">~</span><span class="n">Document</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰∏çÂÜçÊúâ&#39;exportToJSON()&#39;Âíå&#39;serialize()&#39;ÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ‰ªÖ‰øùÁïô‰∏ç‰ºöÂØºËá¥Âº∫ËÄ¶ÂêàÁöÑÊúÄÂü∫Êú¨ÊñáÊ°£Êìç‰Ωú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>JSONÂíåÂ∫èÂàóÂåñÊñπÈù¢‰∏çÂÜçÂ±û‰∫éDocumentÁ±ªÁöÑÊ†∏ÂøÉÂäüËÉΩ„ÄÇ</p>
<p>DocumentÁ±ªÂ∫î‰ªÖ‰ª£Ë°®‰∏çÂêåÁ±ªÂûãÊñáÊ°£ÁöÑÊúÄÂü∫Êú¨Êìç‰ΩúÔºåÊâÄÊúâÊ≠£‰∫§ÂÖ≥Ê≥®ÁÇπÈÉΩÂ∫îË¢´ÂàÜÁ¶ªÔºåËøôÂ∞Ü‰Ωø‰øÆÊîπÊõ¥Âä†ÂÆπÊòì„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÈÄöËøáÂ∞ÜJSONÊñπÈù¢ÈöîÁ¶ª‰∏∫‰∏Ä‰∏™Áã¨Á´ãÁöÑÂèòÂåñÁÇπÂíåÊñ∞JSONÁªÑ‰ª∂ÔºåÊõ¥Êç¢JSONÂ∫ìÂè™‰ºöÂΩ±ÂìçËØ•ÁªÑ‰ª∂„ÄÇ</p>
<p>‰øÆÊîπÂèØ‰ª•ÈõÜ‰∏≠Âú®‰∏Ä‰∏™Âú∞ÊñπËøõË°åÔºå‰∏éÂÖ∂‰ªñÊ≠£‰∫§ÂÖ≥Ê≥®ÁÇπÂÆåÂÖ®ÈöîÁ¶ª„ÄÇ</p>
<p>ÂêåÊó∂Ôºå‰ΩøÁî®Â§ö‰∏™JSONÂ∫ìÊîØÊåÅJSONÊ†ºÂºè‰πü‰ºöÊõ¥ÁÆÄÂçï„ÄÇ</p>
<p>Ê≠§Â§ñÔºå‰ªª‰ΩïÂÖ≥‰∫éÊñáÊ°£Â∫èÂàóÂåñÁöÑ‰øÆÊîπÂè™‰ºöÂΩ±Âìç‰ª£Á†Å‰∏≠ÁöÑ‰∏Ä‰∏™ÁªÑ‰ª∂ÔºöÊñ∞ÁöÑÂ∫èÂàóÂåñÁªÑ‰ª∂„ÄÇÂ∫èÂàóÂåñÁªÑ‰ª∂Â∞Ü‰Ωú‰∏∫ÂèòÂåñÁÇπÔºåÂÆûÁé∞ÈöîÁ¶ª‰∏îÁÆÄÂçïÁöÑ‰øÆÊîπ„ÄÇËøôÊòØÊúÄÁêÜÊÉ≥ÁöÑÊÉÖÂÜµ„ÄÇ</p>
<p>ËôΩÁÑ∂‰Ω†ÂØπDocumentÁ§∫‰æãÊúÄÂàùÊÑüÂà∞Â§±ÊúõÔºå‰ΩÜÁé∞Âú®‰ºº‰πéÂèàÊúâ‰∫Ü‰ø°ÂøÉÔºå‰πüËÆ∏‰Ω†ËÑ∏‰∏äËøòÂ∏¶ÁùÄ&quot;ÊàëÊó©ËØ•ÊÉ≥Âà∞ÔºÅ&ldquo;ÁöÑÂæÆÁ¨ë„ÄÇ</p>
<p>‰ΩÜ‰Ω†‰ªçÊú™ÂÆåÂÖ®Êª°ÊÑèÔºö&ldquo;ÊòØÁöÑÔºåÊàëËÆ§ÂêåÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÁöÑÊÄª‰ΩìÊÄùË∑ØÔºå‰ΩÜÂ¶Ç‰ΩïÂú®ËΩØ‰ª∂ÁªìÊûÑ‰∏≠ÂÆûÁé∞ËøôÁßçÂàÜÁ¶ªÔºüÂÖ∑‰ΩìËØ•ÊÄé‰πàÂÅöÔºü&ldquo;ËøôÊòØ‰∏Ä‰∏™ÊûÅÂ•ΩÁöÑÈóÆÈ¢òÔºå‰ΩÜÁ≠îÊ°à‰ºóÂ§öÔºåÊàëÂ∞ÜÂú®ÂêéÁª≠Á´†ËäÇ‰∏≠ÈÄê‰∏ÄËß£Á≠îÔºåÊúÄÂÖ≥ÈîÆÁöÑÁ¨¨‰∏ÄÊ≠•ÊòØËØÜÂà´ÂèòÂåñÁÇπÔºåÂç≥‰ª£Á†Å‰∏≠È¢ÑÊúü‰ºöÂèëÁîüÂèòÂåñÁöÑÈÉ®ÂàÜ„ÄÇËøô‰∫õÂèòÂåñÁÇπÂ∫îË¢´ÊèêÂèñ„ÄÅÈöîÁ¶ªÂíåÂ∞ÅË£ÖÔºåÊ∂àÈô§ÂØπËøô‰∫õÂèòÂåñÁöÑ‰æùËµñ„ÄÇËøôÂ∞ÜÊúÄÁªà‰Ωø‰øÆÊîπÊõ¥ÂÆπÊòì„ÄÇ</p>
<p>&ldquo;‰ΩÜËøô‰ªçÂè™ÊòØË°®Èù¢Âª∫ËÆÆÔºÅ&ldquo;‰Ω†ËØ¥ÂæóÂØπÔºåÈÅóÊÜæÁöÑÊòØÔºåÊ≤°ÊúâÂîØ‰∏ÄÊàñÁÆÄÂçïÁöÑÁ≠îÊ°àÔºåÂÖ∑‰ΩìÊÉÖÂÜµÂÖ∑‰ΩìÂàÜÊûêÔºå‰ΩÜÊàëÊâøËØ∫Âú®ÂêéÁª≠Á´†ËäÇ‰∏≠ÁªôÂá∫ËÆ∏Â§öÂÖ∑‰ΩìÊñπÊ°àÔºàÊØïÁ´üËøôÊòØ‰∏ÄÊú¨ÂÖ≥‰∫éËΩØ‰ª∂ËÆæËÆ°‚Äî‚ÄîÁÆ°ÁêÜ‰æùËµñÂÖ≥Á≥ªÁöÑ‰π¶Ôºâ„ÄÇ</p>
<p>‰Ωú‰∏∫È¢ÑÂëäÔºåÁ¨¨3Á´†Â∞Ü‰ªãÁªçËß£ÂÜ≥Ëøô‰∏ÄÈóÆÈ¢òÁöÑÈÄöÁî®ÂÆûÁî®ÊñπÊ≥ïÔºöËÆæËÆ°Ê®°Âºè„ÄÇÈÄöËøáËÆøÈóÆËÄÖÊ®°Âºè„ÄÅÁ≠ñÁï•Ê®°Âºè„ÄÅÂ§ñÈÉ®Â§öÊÄÅÁ≠âÊ®°ÂºèÔºåÊàëÂ∞ÜÂ±ïÁ§∫Â¶Ç‰ΩïÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ„ÄÇËøô‰∫õÊ®°ÂºèÂêÑÊúâ‰ºòÁº∫ÁÇπÔºå‰ΩÜÂÖ±ÂêåÁÇπÊòØÈÄöËøáÂºïÂÖ•ÊäΩË±°Êù•ÂáèÂ∞ë‰æùËµñ„ÄÇÊ≠§Â§ñÔºåÊàëÂ∞ÜËØ¶ÁªÜÊé¢ËÆ®Â¶Ç‰ΩïÂú®Áé∞‰ª£C++‰∏≠ÂÆûÁé∞Ëøô‰∫õÊ®°Âºè„ÄÇ</p>
<hr>
<p><strong>‰∏çË¶ÅÈáçÂ§çËá™Â∑±ÔºàDRYÂéüÂàôÔºâ</strong></p>
<p>ÂèØ‰øÆÊîπÊÄßËøòÊúâÁ¨¨‰∫å‰∏™ÈáçË¶ÅÊñπÈù¢„ÄÇ‰∏∫ËØ¥ÊòéËøô‰∏ÄÁÇπÔºåÊàëÂ∞ÜÂºïÂÖ•Âè¶‰∏Ä‰∏™Á§∫‰æãÔºöÁâ©ÂìÅÁ±ªÂ±ÇÊ¨°ÁªìÊûÑ„ÄÇ</p>
<p>Â±ÇÊ¨°ÁªìÊûÑÁöÑÈ°∂Á´ØÊòØItemÂü∫Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Money.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Money</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl"><span class="n">Money</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span> <span class="n">Money</span> <span class="n">money</span><span class="p">,</span> <span class="kt">double</span> <span class="n">factor</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="n">Money</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span> <span class="n">Money</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Money</span> <span class="n">rhs</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Item.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Item</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Item</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ItemÂü∫Á±ª‰ª£Ë°®ÂÖ∑Êúâ‰ª∑Ê†ºÊ†áÁ≠æÔºàÁî±MoneyÁ±ªË°®Á§∫ÔºâÁöÑÂêÑÁ±ªÁâ©ÂìÅÁöÑÊäΩË±°„ÄÇ</p>
<p>ÈÄöËøáprice()ÂáΩÊï∞ÂèØ‰ª•Êü•ËØ¢‰ª∑Ê†º„ÄÇËôΩÁÑ∂ÂÆûÈôÖÂèØËÉΩÊúâÂ§öÁßçÁâ©ÂìÅÔºå‰ΩÜ‰∏∫ÁÆÄÂåñËØ¥ÊòéÔºåÊàë‰ª¨‰ªÖ‰ª•CppBookÂíåConferenceTicket‰∏∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;CppBook.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Item.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CppBook</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Item</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">CppBook</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">title</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">author</span><span class="p">,</span> <span class="n">Money</span> <span class="n">price</span> <span class="p">)</span>   
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">title_</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">title</span><span class="p">)</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">author_</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">author</span><span class="p">)</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">priceWithTax_</span><span class="p">(</span> <span class="n">price</span> <span class="o">*</span> <span class="mf">1.15</span> <span class="p">)</span>  <span class="c1">// 15%Á®éÁéá
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">title</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">title_</span><span class="p">;</span> <span class="p">}</span>      
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">author</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">author_</span><span class="p">;</span> <span class="p">}</span>    
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">priceWithTax_</span><span class="p">;</span> <span class="p">}</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">title_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">author_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="n">priceWithTax_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>CppBookÁ±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞Êé•Êî∂‰π¶Âêç„ÄÅ‰ΩúËÄÖÔºàÂ≠óÁ¨¶‰∏≤ÂΩ¢ÂºèÔºâÂíå‰ª∑Ê†ºÔºàMoneyÂΩ¢ÂºèÔºâ„ÄÇÂÆÉÈÄöËøátitle()„ÄÅauthor()Âíåprice()ÂáΩÊï∞Êèê‰æõËÆøÈóÆÊé•Âè£„ÄÇÁâπÂà´ÁöÑÊòØprice()ÂáΩÊï∞ÔºöÁî±‰∫é‰π¶Á±çÈúÄÁº¥Á®éÔºåÂéüÂßã‰ª∑Ê†ºÈúÄÊåâ15%Á®éÁéáË∞ÉÊï¥„ÄÇ</p>
<p>ConferenceTicketÁ±ªÊòØÁ¨¨‰∫å‰∏™ItemÁ§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;ConferenceTicket.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Item.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ConferenceTicket</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Item</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">ConferenceTicket</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">,</span> <span class="n">Money</span> <span class="n">price</span> <span class="p">)</span>  
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">name_</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">priceWithTax_</span><span class="p">(</span> <span class="n">price</span> <span class="o">*</span> <span class="mf">1.15</span> <span class="p">)</span>  <span class="c1">// 15%Á®éÁéá
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">name_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">priceWithTax_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="n">priceWithTax_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ConferenceTicket‰∏éCppBookÁ±ª‰ººÔºå‰ΩÜÊûÑÈÄ†ÂáΩÊï∞Âè™ÈúÄ‰ºöËÆÆÂêçÁß∞Âíå‰ª∑Ê†º„ÄÇÂêåÊ†∑Ôºå‰ºöËÆÆÈó®Á•®‰ª∑Ê†º‰πüÊåâ15%Á®éÁéáË∞ÉÊï¥„ÄÇ</p>
<p>ÈÄöËøáËøô‰∏™ËÆæËÆ°ÔºåÊàë‰ª¨ÂèØ‰ª•Âú®main()ÂáΩÊï∞‰∏≠ÂàõÂª∫Â§ö‰∏™Áâ©ÂìÅÂπ∂ËÆ°ÁÆóÊÄª‰ª∑Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;CppBook.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ConferenceTicket.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;&gt;</span> <span class="n">items</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">items</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">CppBook</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;Effective C++&#34;</span><span class="p">,</span> <span class="mf">19.99</span><span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">items</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">CppBook</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;C++ Templates&#34;</span><span class="p">,</span> <span class="mf">49.99</span><span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">items</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ConferenceTicket</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;CppCon&#34;</span><span class="p">,</span> <span class="mf">999.0</span><span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">items</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ConferenceTicket</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;Meeting C++&#34;</span><span class="p">,</span> <span class="mf">699.0</span><span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">items</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ConferenceTicket</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;C++ on Sea&#34;</span><span class="p">,</span> <span class="mf">499.0</span><span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="k">const</span> <span class="n">total_price</span> <span class="o">=</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span> <span class="n">begin</span><span class="p">(</span><span class="n">items</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">items</span><span class="p">),</span> <span class="n">Money</span><span class="p">{},</span> 
</span></span><span class="line"><span class="cl">            <span class="p">[](</span> <span class="n">Money</span> <span class="n">accu</span><span class="p">,</span> <span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">item</span> <span class="p">){</span> 
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">accu</span> <span class="o">+</span> <span class="n">item</span><span class="o">-&gt;</span><span class="n">price</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®main()‰∏≠ÂàõÂª∫‰∫Ü‰∏§‰∏™‰π¶Á±çÂíå‰∏â‰∏™‰ºöËÆÆÈó®Á•®ÔºåÂπ∂ËÆ°ÁÆóÂê´Á®éÊÄª‰ª∑„ÄÇËøôÁúã‰ººËâØÂ•ΩÁöÑËÆæËÆ°ÂÆûÁé∞‰∫ÜÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªÔºåÊØè‰∏™Áâ©ÂìÅÁ±ªÁã¨Á´ãÂ§ÑÁêÜ‰ª∑Ê†ºËÆ°ÁÆóÔºåÁ¨¶ÂêàSRPÂéüÂàôÂπ∂ÈöîÁ¶ª‰∫ÜÂèòÂåñÁÇπ„ÄÇÁÑ∂ËÄåÔºåËØ•ËÆæËÆ°Â≠òÂú®ÈáçÂ§ßÁº∫Èô∑ÔºöÁ®éÁéáÂèòÊõ¥Â∞ÜÂΩ±ÂìçÊâÄÊúâÊ¥æÁîüÁ±ª„ÄÇ‰æãÂ¶ÇÔºåËã•Á®éÁéá‰ªé15%Ë∞ÉÊï¥‰∏∫12%Êàñ16%ÔºåÈúÄË¶Å‰øÆÊîπÊØè‰∏™Á±ªÁöÑËÆ°ÁÆóÈÄªËæëÔºåÂØºËá¥ÊîπÂä®ÈÅçÂ∏É‰ª£Á†ÅÂ∫ì„ÄÇ</p>
<p>Ê≠£Â¶ÇSRPÂª∫ËÆÆÂàÜÁ¶ªÂèòÂåñÁÇπÔºåÊàë‰ª¨ËøòÂ∫îÈÅøÂÖçÂú®‰ª£Á†ÅÂ∫ì‰∏≠ÈáçÂ§ç‰ø°ÊÅØ„ÄÇÊØè‰∏™ËÅåË¥£Â∫îÂú®Á≥ªÁªü‰∏≠‰ªÖÂ≠òÂú®‰∏ÄÊ¨°ÔºåËøôÂ∞±ÊòØ&quot;‰∏çË¶ÅÈáçÂ§çËá™Â∑±&rdquo;ÔºàDRYÔºâÂéüÂàô„ÄÇÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ãÔºåÁ®éÁéáÂ∫î‰ªÖÂú®‰∏ÄÂ§ÑË°®Á§∫Ôºå‰æø‰∫éÁªü‰∏Ä‰øÆÊîπ„ÄÇSRP‰∏éDRYÈÄöÂ∏∏Áõ∏ËæÖÁõ∏ÊàêÔºå‰ΩÜÊúâÊó∂ÈúÄË¶ÅÈ¢ùÂ§ñÊ≠•È™§Êù•ÂÆûÁé∞‰∏§ËÄÖ„ÄÇÊàëÂ∞ÜÂú®ÂêéÁª≠Á´†ËäÇÔºàÂèÇËßÅ&quot;ÂáÜÂàô35Ôºö‰ΩøÁî®Ë£ÖÈ•∞Âô®ÂÆûÁé∞Â±ÇÊ¨°ÂåñÂÆöÂà∂&rdquo;ÔºâËØ¶ÁªÜÊé¢ËÆ®ËØ•ÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<hr>
<p><strong>ÈÅøÂÖçËøáÊó©ÁöÑÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ</strong></p>
<p>Âú®Ëøô‰∏ÄÁÇπ‰∏äÔºåÊàëÂ∏åÊúõÂ∑≤ÁªèËØ¥Êúç‰Ω†ÈÅµÂÆà SRPÔºàÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºâÂíå DRYÔºà‰∏çË¶ÅÈáçÂ§çËá™Â∑±ÔºâÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÂêàÁêÜÁöÑÊÉ≥Ê≥ï„ÄÇ</p>
<p>‰Ω†ÁîöËá≥ÂèØËÉΩ‰ºöÂ¶ÇÊ≠§ÂùöÂÆöÂú∞ËÆ°ÂàíÂ∞ÜÊâÄÊúâÁ±ªÂíåÂáΩÊï∞ÂàÜÁ¶ªÊàêÊúÄÂ∞èÁöÑÂäüËÉΩÂçïÂÖÉÔºåÊØïÁ´üÔºåËøôÂ∞±ÊòØÁõÆÊ†áÔºåÂØπÂêßÔºüÂ¶ÇÊûú‰Ω†Áé∞Âú®Ê≠£Âú®Ëøô‰πàÊÉ≥ÔºåËØ∑ÂÅú‰∏ãÊù•ÔºÅÊ∑±ÂëºÂê∏‰∏Ä‰∏ã„ÄÇÂÜçÊù•‰∏ÄÊ¨°„ÄÇÁÑ∂ÂêéËØ∑‰ªîÁªÜËÅÜÂê¨ Katerina Trajchevska ÁöÑÊô∫ÊÖßÔºö</p>
<p><strong>‚Äú‰∏çË¶ÅËØïÂõæÂÆûÁé∞ SOLIDÔºåËÄåÊòØÁî® SOLID Êù•ÂÆûÁé∞ÂèØÁª¥Êä§ÊÄß„ÄÇ‚Äù</strong></p>
<p>SRP Âíå DRY ÈÉΩÊòØ‰Ω†ÂÆûÁé∞Êõ¥Â•ΩÂèØÁª¥Êä§ÊÄßÂíåÁÆÄÂåñÂèòÊõ¥ÁöÑÂ∑•ÂÖ∑ÔºåËÄå‰∏çÊòØ‰Ω†ÁöÑÁõÆÊ†áÔºåËôΩÁÑ∂‰ªéÈïøËøúÊù•ÁúãËøô‰∏§ËÄÖÈÉΩÈùûÂ∏∏ÈáçË¶ÅÔºå‰ΩÜÂú®Ê≤°ÊúâÊòéÁ°Æ‰∫ÜËß£Âì™‰∫õÂèòÂåñ‰ºöÂΩ±Âìç‰Ω†ÁöÑÊÉÖÂÜµ‰∏ãÂàÜÁ¶ªÂÆû‰ΩìÂèØËÉΩ‰ºöÈÄÇÂæóÂÖ∂Âèç„ÄÇ</p>
<p>‰∏∫ÂèòÂåñËÄåËÆæËÆ°ÈÄöÂ∏∏ÊúâÂà©‰∫éÊüê‰∏ÄÁßçÁâπÂÆöÁöÑÂèòÂåñÔºå‰ΩÜ‰∏çÂπ∏ÁöÑÊòØÔºåËøôÂèØËÉΩ‰ºö‰ΩøÂÖ∂‰ªñÁßçÁ±ªÁöÑÂèòÂåñÂèòÂæóÊõ¥Âä†Âõ∞Èöæ„ÄÇ<br/>ËøôÁßçÁêÜÂøµÊòØ‰ºóÊâÄÂë®Áü•ÁöÑ YAGNI ÂéüÂàôÔºàYou Aren‚Äôt Gonna Need ItÔºå‰Ω†‰∏ç‰ºöÈúÄË¶ÅÂÆÉÔºâÁöÑ‰∏ÄÈÉ®ÂàÜÔºåËØ•ÂéüÂàôË≠¶Âëä‰Ω†ÈÅøÂÖçËøáÂ∫¶ËÆæËÆ°ÔºàÂèÇËßÅ‚ÄúÊåáÂØºÂéüÂàô 5Ôºö‰∏∫Êâ©Â±ïËÄåËÆæËÆ°‚ÄùÔºâ„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†Êúâ‰∏Ä‰∏™ÊòéÁ°ÆÁöÑËÆ°ÂàíÔºåÂπ∂‰∏îÁü•ÈÅìÈ¢ÑÊúüÁöÑÂèòÂåñÁ±ªÂûãÔºåÈÇ£‰πàÂ∫îÁî® SRP Âíå DRY Êù•ÁÆÄÂåñÈÇ£ÁßçÂèòÂåñ„ÄÇ<br/>ÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰Ω†‰∏çÁü•ÈÅì‰ºöÊúâ‰ªÄ‰πàÊ†∑ÁöÑÂèòÂåñÔºåËØ∑‰∏çË¶ÅÁåúÊµã‚Äî‚ÄîÂè™ÈúÄÁ≠âÂæÖÔºåÁ≠âÂà∞‰Ω†Ê∏ÖÊ•öÂú∞Áü•ÈÅìÈ¢ÑÊúüÁöÑÂèòÂåñÁ±ªÂûãÔºåÁÑ∂ÂêéÂÜçËøõË°åÈáçÊûÑ‰ª•‰ΩøÂèòÂåñÂ∞ΩÂèØËÉΩÁÆÄÂçï„ÄÇ</p>
<p>ÊÄª‰πãÔºåËΩØ‰ª∂‰∏≠ÁöÑÂèòÂåñÊòØÈ¢ÑÊúüÁöÑÔºåÂõ†Ê≠§‰∏∫ÂèòÂåñËÄåËÆæËÆ°ÊòØËá≥ÂÖ≥ÈáçË¶ÅÁöÑ„ÄÇÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÂπ∂ÊúÄÂ∞èÂåñÈáçÂ§çÔºå‰ª•‰æø‰Ω†ÂèØ‰ª•ËΩªÊùæÂú∞ËøõË°åÊõ¥ÊîπÔºåËÄå‰∏çÂøÖÊãÖÂøÉ‰ºöÁ†¥ÂùèÂÖ∂‰ªñÊ≠£‰∫§ÁöÑÊñπÈù¢„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>È¢ÑÊúüËΩØ‰ª∂‰∏≠ÁöÑÂèòÂåñ„ÄÇ</li>
<li>‰∏∫Êòì‰∫éÊõ¥ÊîπËÄåËÆæËÆ°Ôºå‰ΩøËΩØ‰ª∂Êõ¥ÂÖ∑ÈÄÇÂ∫îÊÄß„ÄÇ</li>
<li>ÈÅøÂÖçÂ∞Ü‰∏çÁõ∏ÂÖ≥ÁöÑÊ≠£‰∫§ÊñπÈù¢ÁªÑÂêàÂú®‰∏ÄËµ∑Ôºå‰ª•Èò≤Ê≠¢ËÄ¶Âêà„ÄÇ</li>
<li>ÁêÜËß£ËÄ¶ÂêàÂ¢ûÂä†‰∫ÜÂèòÊõ¥ÁöÑÂèØËÉΩÊÄßÔºåÂπ∂‰ΩøÂèòÊõ¥Êõ¥Âä†Âõ∞Èöæ„ÄÇ</li>
<li>ÈÅµÂæ™Âçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÊù•ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ„ÄÇ</li>
<li>ÈÅµÂÆà‰∏çË¶ÅÈáçÂ§çËá™Â∑±ÔºàDRYÔºâÂéüÂàô‰ª•ÊúÄÂ∞èÂåñÈáçÂ§ç„ÄÇ</li>
<li>Â¶ÇÊûú‰Ω†‰∏çÁ°ÆÂÆö‰∏ã‰∏ÄÊ¨°ÂèòÊõ¥ÔºåÈÅøÂÖçËøáÊó©ÊäΩË±°„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô3ÂàÜÁ¶ªÊé•Âè£‰ª•ÈÅøÂÖç‰∫∫‰∏∫ËÄ¶Âêà">ÂáÜÂàô3ÔºöÂàÜÁ¶ªÊé•Âè£‰ª•ÈÅøÂÖç‰∫∫‰∏∫ËÄ¶Âêà
</h3><p><strong>Êé•Âè£ÈöîÁ¶ªÔºöËß£ËÄ¶Ê≠£‰∫§ÂäüËÉΩ</strong></p>
<p>ËÆ©Êàë‰ª¨ÈáçÊñ∞ÂÆ°ËßÜÂáÜÂàô2Ôºö‰∏∫ÂèòÊõ¥ËÄåËÆæËÆ°‰∏≠ÁöÑ<code>Document</code>Á±ªÊ°à‰æã„ÄÇÂ∞ΩÁÆ°Â∑≤ÊãÜÂàÜJSONÂØºÂá∫ÂíåÂ∫èÂàóÂåñÂäüËÉΩÔºå‰ΩÜÊé•Âè£ËÆæËÆ°‰ªçÂ≠òÂú®Êõ¥Ê∑±Â±ÇÁöÑËÄ¶ÂêàÈóÆÈ¢ò„ÄÇ</p>
<hr>
<p><strong>ÈóÆÈ¢òÔºöÂÖ®ËÉΩÊé•Âè£ÂºïÂèëÁöÑËøûÈîÅÂèçÂ∫î</strong></p>
<p>Âéü<code>Document</code>Êé•Âè£Âº∫Âà∂Ê¥æÁîüÁ±ªÂÆûÁé∞ÊâÄÊúâÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Document</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Document</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// JSONÂØºÂá∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// Â∫èÂàóÂåñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ... ÂÖ∂‰ªñÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Áº∫Èô∑Á§∫‰æã</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">exportDocument</span><span class="p">(</span><span class="k">const</span> <span class="n">Document</span><span class="o">&amp;</span> <span class="n">doc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">doc</span><span class="p">.</span><span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span>  <span class="c1">// ‰ªÖÈúÄJSONÂØºÂá∫ÂäüËÉΩ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>ÈöêÊÄß‰æùËµñ</strong>Ôºö
<ul>
<li><code>exportDocument()</code>ÂáΩÊï∞Ë¢´Ëø´‰æùËµñ<code>Document</code>ÁöÑÊâÄÊúâÊé•Âè£ÔºàÂåÖÊã¨Êó†ÂÖ≥ÁöÑ<code>serialize()</code>Ôºâ</li>
<li>‰øÆÊîπ<code>ByteStream</code>Á±ªÊàñ<code>serialize()</code>Á≠æÂêç‰ºöÂØºËá¥ÊâÄÊúâ<code>Document</code>Áî®Êà∑ÈáçÊñ∞ÁºñËØë</li>
<li>Êñ∞Â¢ûÊé•Âè£ÔºàÂ¶ÇXMLÂØºÂá∫Ôºâ‰ºöÊ≥¢ÂèäÊâÄÊúâÂÆ¢Êà∑Á´Ø‰ª£Á†Å</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°àÔºöÊé•Âè£ÈöîÁ¶ªÂéüÂàôÔºàISPÔºâ</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>Ôºö</p>
<blockquote>
<p>ÂÆ¢Êà∑Á´Ø‰∏çÂ∫îË¢´Ëø´‰æùËµñÂÖ∂‰∏ç‰ΩøÁî®ÁöÑÊñπÊ≥ï„ÄÇ</p>
</blockquote>
<p><strong>ÈáçÊûÑÊ≠•È™§</strong>Ôºö</p>
<ol>
<li><strong>ÊãÜÂàÜÊ≠£‰∫§Êé•Âè£</strong></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// JSONÂØºÂá∫ËÉΩÂäõ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">JSONExportable</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">JSONExportable</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Â∫èÂàóÂåñËÉΩÂäõ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Serializable</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Serializable</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÁªÑÂêàÂºèDocumentÊé•Âè£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Document</span> <span class="o">:</span> <span class="k">public</span> <span class="n">JSONExportable</span><span class="p">,</span> <span class="k">public</span> <span class="n">Serializable</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂÖ∂‰ªñÂü∫Á°ÄÂäüËÉΩ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li><strong>ÂÆ¢Êà∑Á´ØÊåâÈúÄ‰æùËµñ</strong></li>
</ol>
<p>cpp</p>
<p>Â§çÂà∂</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">exportDocument</span><span class="p">(</span><span class="k">const</span> <span class="n">JSONExportable</span><span class="o">&amp;</span> <span class="n">exportable</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">exportable</span><span class="p">.</span><span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span>  <span class="c1">// ‰ªÖ‰æùËµñÊâÄÈúÄÊé•Âè£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>‰ºòÂäø</strong>Ôºö</p>
<ul>
<li><strong>Ëß£ËÄ¶ÁºñËØë‰æùËµñ</strong>Ôºö‰øÆÊîπ<code>Serializable</code>‰∏çÂΩ±Âìç‰ªÖ‰ΩøÁî®<code>JSONExportable</code>ÁöÑÂÆ¢Êà∑Á´Ø</li>
<li><strong>Êé•Âè£Êâ©Â±ïÂÆâÂÖ®</strong>ÔºöÊñ∞Â¢ûÊé•Âè£ÔºàÂ¶Ç<code>XMLExportable</code>Ôºâ‰∏ç‰ºöÂØºËá¥Áé∞ÊúâÂÆ¢Êà∑Á´ØË¢´Ëø´ÈÄÇÈÖç</li>
<li><strong>Á¨¶ÂêàSRP</strong>ÔºöÊØè‰∏™Êé•Âè£‰∏ìÊ≥®Âçï‰∏ÄËÉΩÂäõÁª¥Â∫¶</li>
</ul>
<hr>
<p><strong>ISP‰∏éSRPÁöÑÂÖ≥Á≥ª</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">ÂéüÂàô</th>
<th style="text-align:left">ÂÖ≥Ê≥®ÁÇπ</th>
<th style="text-align:left">Â∫îÁî®Âú∫ÊôØ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>SRP</strong></td>
<td style="text-align:left">Á±ª/Ê®°ÂùóÁöÑËÅåË¥£Âçï‰∏ÄÊÄß</td>
<td style="text-align:left">Êï¥‰ΩìÊû∂ÊûÑËÆæËÆ°</td>
</tr>
<tr>
<td style="text-align:left"><strong>ISP</strong></td>
<td style="text-align:left">Êé•Âè£ÊñπÊ≥ïÁöÑÊ≠£‰∫§ÊÄß</td>
<td style="text-align:left">Êé•Âè£ÊäΩË±°Â±ÇËÆæËÆ°</td>
</tr>
</tbody>
</table></div>
<p><strong>ÂÖ≥ÈîÆÊ¥ûÂØü</strong>Ôºö</p>
<ul>
<li>ISPÊòØSRPÂú®Êé•Âè£ËÆæËÆ°‰∏≠ÁöÑÁâπ‰æã</li>
<li>ËøùÂèçISPÂøÖÁÑ∂ËøùÂèçSRPÔºå‰ΩÜÂèç‰πã‰∏çÊàêÁ´ã</li>
<li>Êé•Âè£ËÅöÂêàÁöÑËØ±ÊÉëÊôÆÈÅçÂ≠òÂú®ÔºàÂ¶Ç&quot;ÂÖ®ËÉΩÂü∫Á±ª&rdquo;ÔºâÔºåÈúÄÈÄöËøáËÆæËÆ°ËØÑÂÆ°ÊèêÂâçËßÑÈÅø</li>
</ul>
<hr>
<p><strong>Ê®°ÊùøËÆæËÆ°‰∏≠ÁöÑISPÊÄùÊÉ≥</strong></p>
<p>ISP‰∏ç‰ªÖÈÄÇÁî®‰∫éÈù¢ÂêëÂØπË±°ËÆæËÆ°Ôºå‰πüÂΩ±ÂìçÊ®°ÊùøÁºñÁ®ã„ÄÇ‰ª•<code>std::copy</code>‰∏∫‰æãÔºö</p>
<p><strong>‰∏çËâØËÆæËÆ°ÔºöËøáÂ∫¶Á∫¶ÊùüËø≠‰ª£Âô®Á±ªÂûã</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ForwardIt</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">copy</span><span class="p">(</span><span class="n">ForwardIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">ForwardIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">ForwardIt</span> <span class="n">d_first</span><span class="p">);</span>  <span class="c1">// Ë¶ÅÊ±ÇÂâçÂêëËø≠‰ª£Âô®
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>ÈóÆÈ¢ò</strong>ÔºöÊó†Ê≥ïÈÄÇÈÖçËæìÂÖ•ÊµÅËø≠‰ª£Âô®Ôºà‰ªÖÊîØÊåÅÂçïÂêëÈÅçÂéÜÔºâ</li>
</ul>
<p><strong>‰ºòÂåñËÆæËÆ°ÔºöÊúÄÂ∞èÂåñÊ®°ÊùøÁ∫¶Êùü</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InputIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">OutputIt</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">copy</span><span class="p">(</span><span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">OutputIt</span> <span class="n">d_first</span><span class="p">);</span>  <span class="c1">// ‰ªÖË¶ÅÊ±ÇËæìÂÖ•/ËæìÂá∫Ëø≠‰ª£Âô®
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>C++20Ê¶ÇÂøµÂ¢ûÂº∫</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">input_iterator</span> <span class="n">InputIt</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">output_iterator</span> <span class="n">OutputIt</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">OutputIt</span> <span class="n">copy</span><span class="p">(</span><span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">OutputIt</span> <span class="n">d_first</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ËÆæËÆ°ÂêØÁ§∫</strong>Ôºö</p>
<ul>
<li><strong>Á≤æÂáÜË°®ËææÈúÄÊ±Ç</strong>ÔºöÊ®°ÊùøÂèÇÊï∞‰ªÖÂ£∞ÊòéÂøÖË¶ÅÊìç‰ΩúÔºàÂ¶Ç<code>input_iterator</code>Âè™ÈúÄ<code>++</code>Âíå<code>*</code>Ôºâ</li>
<li><strong>ÊèêÂçáÊ≥õÁî®ÊÄß</strong>ÔºöÊîØÊåÅÊõ¥ÂπøÊ≥õÁöÑÈÄÇÈÖçÂô®ÔºàÂ¶ÇÊñá‰ª∂ÊµÅ„ÄÅÁΩëÁªúÊµÅËø≠‰ª£Âô®Ôºâ</li>
<li><strong>ÂáèÂ∞ëÈöêÂºè‰æùËµñ</strong>ÔºöÈÅøÂÖçÂº∫Âà∂Áî®Êà∑ÂÆûÁé∞Êó†ÂÖ≥Êé•Âè£</li>
</ul>
<hr>
<p><strong>ÊúÄ‰Ω≥ÂÆûË∑µÊ∏ÖÂçï</strong></p>
<ol>
<li><strong>Êé•Âè£ËÆæËÆ°Êó∂</strong>Ôºö
<ul>
<li>‰∏∫ÊØè‰∏™Ê≠£‰∫§ÂäüËÉΩÁª¥Â∫¶ÂÆö‰πâÁã¨Á´ãÊé•Âè£</li>
<li>ÈÄöËøáÂ§öÈáçÁªßÊâøÁªÑÂêàÂ§çÊùÇËÉΩÂäõÔºàËÄåÈùûÂçï‰∏ÄÂ∫ûÂ§ßÊé•Âè£Ôºâ</li>
</ul>
</li>
<li><strong>ÂÆ¢Êà∑Á´ØÁºñÁ†ÅÊó∂</strong>Ôºö
<ul>
<li>‰æùËµñÊúÄÂÖ∑‰ΩìÁöÑÊé•Âè£Á±ªÂûãÔºàÂ¶Ç<code>JSONExportable</code>ËÄåÈùû<code>Document</code>Ôºâ</li>
</ul>
</li>
<li><strong>Ê®°ÊùøËÆæËÆ°Êó∂</strong>Ôºö
<ul>
<li>‰ΩøÁî®C++Ê¶ÇÂøµÁ≤æÂáÜÁ∫¶ÊùüÊ®°ÊùøÂèÇÊï∞</li>
<li>‰ºòÂÖàÈÄâÊã©ÊúÄÂÆΩÊùæÁöÑËø≠‰ª£Âô®Á±ªÂà´ÔºàËæìÂÖ•/ËæìÂá∫Ëø≠‰ª£Âô® &gt; ÂâçÂêëËø≠‰ª£Âô®Ôºâ</li>
</ul>
</li>
<li><strong>ÈáçÊûÑÁ≠ñÁï•</strong>Ôºö
<ul>
<li>ËØÜÂà´Ë¢´Âº∫Âà∂ÂÆûÁé∞ÁöÑ&quot;Á©∫ÊñπÊ≥ï&rdquo;ÔºàÂ¶ÇÊäõÂá∫ÂºÇÂ∏∏ÔºâÔºåÊèêÁ§∫Êé•Âè£ÈúÄÊãÜÂàÜ</li>
<li>‰ΩøÁî®ÈÄÇÈÖçÂô®Ê®°ÂºèÂåÖË£ÖÈÅóÁïôÊé•Âè£ÔºåÈÄêÊ≠•ËøÅÁßª</li>
</ul>
</li>
</ol>
<blockquote>
<p>&ldquo;ËâØÂ•ΩÁöÑÊé•Âè£ËÆæËÆ°Â¶ÇÂêåÁ≤æÁ°ÆÁöÑÊâãÊúØÂàÄ‚Äî‚ÄîÂè™ÂàáÂºÄÂøÖË¶ÅÁöÑÈÉ®ÂàÜÔºå‰øùÊåÅÂÖ∂‰ªñÁªÑÁªáÁöÑÂÆåÊï¥„ÄÇ&rdquo;
‚Äî‚Äî„ÄäC++ËΩØ‰ª∂ËÆæËÆ°„Äã</p>
</blockquote>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Ê≥®ÊÑèËÄ¶Âêà‰πü‰ºöÂΩ±ÂìçÊé•Âè£„ÄÇ</li>
<li>ÈÅµÂÆàÊé•Âè£ÈöîÁ¶ªÂéüÂàôÔºàISPÔºâ‰ª•ÂàÜÁ¶ªÊé•Âè£‰∏≠ÁöÑÂÖ≥Ê≥®ÁÇπ„ÄÇ</li>
<li>Â∞Ü ISP ËßÜ‰∏∫Âçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÁöÑ‰∏Ä‰∏™Áâπ‰æã„ÄÇ</li>
<li>ÁêÜËß£ ISP Êó¢ÈÄÇÁî®‰∫éÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÔºå‰πüÈÄÇÁî®‰∫éÊ®°Êùø„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô4‰∏∫ÂèØÊµãËØïÊÄßËÄåËÆæËÆ°">ÂáÜÂàô4Ôºö‰∏∫ÂèØÊµãËØïÊÄßËÄåËÆæËÆ°
</h3><p>Ê≠£Â¶ÇÂáÜÂàô1ÔºöÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄßÊâÄËø∞ÔºåËΩØ‰ª∂ÂøÖÁÑ∂Èù¢‰∏¥ÂèòÊõ¥„ÄÇ‰ΩÜÊØèÊ¨°‰øÆÊîπÈÉΩÂèØËÉΩÊÑèÂ§ñÁ†¥ÂùèÁé∞ÊúâÂäüËÉΩ‚Äî‚ÄîÂ∞ΩÁÆ°Êàë‰ª¨Â∞ΩÂäõÈÅøÂÖçÔºåÈ£éÈô©ÂßãÁªàÂ≠òÂú®„ÄÇ‰Ωú‰∏∫ÂºÄÂèëËÄÖÔºåÊàë‰ª¨‰æùËµñ<strong>ÊµãËØï</strong>‰Ωú‰∏∫ÂÆâÂÖ®ÁΩëÔºö</p>
<blockquote>
<p>ÊµãËØïÊòØËΩØ‰ª∂ÂèòÊõ¥ÁöÑ‰øùÊä§Â±ÇÔºåÊòØÁ°Æ‰øùÂäüËÉΩÂÆåÊï¥ÊÄßÁöÑÊïëÁîüË°£„ÄÇ</p>
</blockquote>
<p>ÁÑ∂ËÄåÔºåÁºñÂÜôÊµãËØïÁöÑÂâçÊèêÊòØ<strong>ËΩØ‰ª∂ÂøÖÈ°ªÂèØÊµãËØï</strong>„ÄÇÊú¨ÂáÜÂàôÂ∞ÜÊè≠Á§∫Â¶Ç‰ΩïÈÄöËøáËÆæËÆ°ÊèêÂçáÂèØÊµãËØïÊÄß„ÄÇ</p>
<hr>
<p><strong>ÊåëÊàòÔºöÂ¶Ç‰ΩïÊµãËØïÁßÅÊúâÊàêÂëòÂáΩÊï∞Ôºü</strong></p>
<p>ËÄÉËôë‰ª•‰∏ã<code>Widget</code>Á±ªÔºåÂÖ∂ÁßÅÊúâÊñπÊ≥ï<code>updateCollection()</code>ÈúÄË¶ÅÊµãËØïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Widget</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">updateCollection</span><span class="p">(</span><span class="cm">/*ÂèÇÊï∞*/</span><span class="p">);</span>  <span class="c1">// ÈúÄÊµãËØïÁöÑÁßÅÊúâÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Blob</span><span class="o">&gt;</span> <span class="n">blobs_</span><span class="p">;</span>         <span class="c1">// Êï∞ÊçÆÊàêÂëò
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ... ÂÖ∂‰ªñÂèØËÉΩÁöÑÊï∞ÊçÆÊàêÂëò
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Â∏∏ËßÅÈîôËØØÊñπÊ°à</strong>Ôºö</p>
<ol>
<li>
<p><strong>ÁôΩÁõíÊµãËØï</strong>ÔºöÈÄöËøáÂÖ¨ÊúâÊñπÊ≥ïÈó¥Êé•ÊµãËØï</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">addBlob</span><span class="p">(</span><span class="k">const</span> <span class="n">Blob</span><span class="o">&amp;</span> <span class="n">blob</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">updateCollection</span><span class="p">();</span>  <span class="c1">// ÂÜÖÈÉ®Ë∞ÉÁî®ÁßÅÊúâÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÈóÆÈ¢ò</strong>ÔºöÊµãËØï‰æùËµñÂÆûÁé∞ÁªÜËäÇÔºåÂÆûÁé∞ÂèòÊõ¥‰ºöÂØºËá¥ÊµãËØïÂ§±Êïà„ÄÇ</p>
</li>
<li>
<p><strong>ÂèãÂÖÉÁ±ª</strong>ÔºöÊéà‰∫àÊµãËØïÁ±ªÁâπÊÆäÊùÉÈôê</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Widget</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="k">class</span> <span class="nc">TestWidget</span><span class="p">;</span>  <span class="c1">// Â£∞ÊòéÊµãËØïÁ±ª‰∏∫ÂèãÂÖÉ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">updateCollection</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÈóÆÈ¢ò</strong>ÔºöÁîü‰∫ß‰ª£Á†ÅÂèçÂêë‰æùËµñÊµãËØï‰ª£Á†ÅÔºåÂΩ¢ÊàêÂæ™ÁéØ‰æùËµñ„ÄÇ</p>
</li>
<li>
<p><strong>ÁªßÊâøÊö¥Èú≤</strong>ÔºöÂ∞ÜÊñπÊ≥ïÊîπ‰∏∫<code>protected</code>Âπ∂Ê¥æÁîüÊµãËØïÁ±ª</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TestWidget</span> <span class="o">:</span> <span class="k">private</span> <span class="n">Widget</span> <span class="p">{</span>  <span class="c1">// ÈÄöËøáÁªßÊâøËÆøÈóÆprotectedÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="nf">testUpdate</span><span class="p">()</span> <span class="p">{</span> <span class="n">updateCollection</span><span class="p">();</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÈóÆÈ¢ò</strong>ÔºöÊª•Áî®ÁªßÊâøÊú∫Âà∂ÔºåÁ†¥ÂùèÂ∞ÅË£ÖÊÄß„ÄÇ</p>
</li>
</ol>
<hr>
<p><strong>ÁªàÊûÅÊñπÊ°àÔºöÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ª</strong></p>
<p><strong>Ê†∏ÂøÉÊÄùÊÉ≥</strong>ÔºöÂ∞ÜÈúÄÊµãËØïÁöÑÂäüËÉΩ‰ªéÁ±ª‰∏≠Ëß£ËÄ¶Ôºå‰ΩøÂÖ∂Áã¨Á´ãÂèØÊµã„ÄÇ</p>
<p><strong>ÊñπÊ°à1ÔºöÊèêÂèñ‰∏∫Ëá™Áî±ÂáΩÊï∞</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// Â∞ÜÊõ¥Êñ∞ÈÄªËæëÊèêÂèñ‰∏∫Áã¨Á´ãÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">updateCollection</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Blob</span><span class="o">&gt;&amp;</span> <span class="n">blobs</span><span class="p">,</span> <span class="cm">/*ÂèÇÊï∞*/</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂÆûÁé∞ÂéüÁßÅÊúâÊñπÊ≥ïÈÄªËæë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Widget</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Blob</span><span class="o">&gt;</span> <span class="n">blobs_</span><span class="p">;</span>  <span class="c1">// Êï∞ÊçÆÊàêÂëò‰ªçÂ∞ÅË£ÖÂú®Á±ªÂÜÖ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Ë∞ÉÁî®ÊñπÂºèÔºöupdateCollection(blobs_, ...);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>‰ºòÂäø</strong>Ôºö</p>
<ul>
<li><strong>Áõ¥Êé•ÊµãËØï</strong>ÔºöÊó†ÈúÄ‰æùËµñ<code>Widget</code>Á±ªÂç≥ÂèØÊµãËØï<code>updateCollection</code></li>
<li><strong>Â¢ûÂº∫Â∞ÅË£Ö</strong>ÔºöËá™Áî±ÂáΩÊï∞‰ªÖËÉΩÈÄöËøáÂÖ¨ÊúâÊé•Âè£ËÆøÈóÆÊï∞ÊçÆÔºåÂáèÂ∞ëÂØπÁßÅÊúâÊàêÂëòÁöÑÊö¥Èú≤</li>
</ul>
<p><strong>ÊñπÊ°à2ÔºöÂ∞ÅË£Ö‰∏∫Áã¨Á´ãÁ±ª</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">widget_details</span> <span class="p">{</span>  <span class="c1">// ÁªÜËäÇÂëΩÂêçÁ©∫Èó¥ÈöîÁ¶ªÂÆûÁé∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">BlobCollection</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">updateCollection</span><span class="p">(</span><span class="cm">/*ÂèÇÊï∞*/</span><span class="p">);</span>  <span class="c1">// ÂÖ¨ÂºÄÂèØÊµãËØïÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Blob</span><span class="o">&gt;</span> <span class="n">blobs_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace widget_details
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Widget</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">widget_details</span><span class="o">::</span><span class="n">BlobCollection</span> <span class="n">blobs_</span><span class="p">;</span>  <span class="c1">// ÁªÑÂêà‰ª£ÊõøÁªßÊâø
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>‰ºòÂäø</strong>Ôºö</p>
<ul>
<li><strong>ËÅåË¥£Ê∏ÖÊô∞</strong>Ôºö<code>BlobCollection</code>‰∏ìÊ≥®ÈõÜÂêàÁÆ°ÁêÜÔºåÁ¨¶ÂêàSRP</li>
<li><strong>ÊµãËØïÂèãÂ•Ω</strong>ÔºöÂèØÁõ¥Êé•ÂÆû‰æãÂåñ<code>BlobCollection</code>ËøõË°åÂçïÂÖÉÊµãËØï</li>
</ul>
<hr>
<p><strong>ËÆæËÆ°ÂéüÂàôÁöÑÂçèÂêåÊïàÂ∫î</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">ÂéüÂàô</th>
<th style="text-align:left">Â∫îÁî®Âú∫ÊôØ</th>
<th style="text-align:left">Êî∂Áõä</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>SRP</strong></td>
<td style="text-align:left">ÂàÜÁ¶ªÈõÜÂêàÁÆ°ÁêÜ‰∏éWidgetÊ†∏ÂøÉÈÄªËæë</td>
<td style="text-align:left">ÂäüËÉΩÂèòÊõ¥‰∫í‰∏çÂΩ±Âìç</td>
</tr>
<tr>
<td style="text-align:left"><strong>Â∞ÅË£ÖÊÄß</strong></td>
<td style="text-align:left">ÈôêÂà∂Ëá™Áî±ÂáΩÊï∞/Á±ªÂØπÁßÅÊúâÊï∞ÊçÆÁöÑËÆøÈóÆ</td>
<td style="text-align:left">Èôç‰ΩéÊÑèÂ§ñ‰øÆÊîπÈ£éÈô©</td>
</tr>
<tr>
<td style="text-align:left"><strong>ÁªÑÂêà‰ºò‰∫éÁªßÊâø</strong></td>
<td style="text-align:left">‰ΩøÁî®BlobCollectionÁªÑÂêà</td>
<td style="text-align:left">ÈÅøÂÖçÁªßÊâøÈìæÁöÑËÑÜÂº±ÊÄß</td>
</tr>
</tbody>
</table></div>
<hr>
<p><strong>ÂÖ≥ÈîÆÂÆûË∑µÂª∫ËÆÆ</strong></p>
<ol>
<li><strong>Ë≠¶ÊÉï&quot;ÊµãËØïÂêéÈó®&rdquo;</strong>Ôºö
<ul>
<li>ÈÅøÂÖç‰ΩøÁî®ÂèãÂÖÉ„ÄÅÁªßÊâøÊàñÈ¢ÑÂ§ÑÁêÜÂÆèÁ†¥ÂùèÂ∞ÅË£Ö</li>
<li>‰ºòÂÖàÈÄöËøáËÆæËÆ°ËÄåÈùûÊùÉÈôêÁ™ÅÁ†¥ÂÆûÁé∞ÂèØÊµãËØïÊÄß</li>
</ul>
</li>
<li><strong>ÂáΩÊï∞ÊèêÂèñÊ†áÂáÜ</strong>Ôºö
<ul>
<li>ÂΩìÁßÅÊúâÊñπÊ≥ïÈÄªËæëÂ§çÊùÇÂà∞ÈúÄË¶ÅÁã¨Á´ãÊµãËØïÊó∂ÔºåÂç≥Â∫îËß£ËÄ¶</li>
<li>ËôöÂáΩÊï∞ÈúÄÁâπÊÆäÂ§ÑÁêÜÔºàÂêéÁª≠Á´†ËäÇËÆ®ËÆ∫Ôºâ</li>
</ul>
</li>
<li><strong>ÊµãËØïÈ©±Âä®ËÆæËÆ°(TDD)</strong>Ôºö
<ul>
<li>ÁºñÂÜôÊµãËØïÂâçÊÄùËÄÉÔºöÂ¶Ç‰ΩïÊúÄÂ∞èÂåñË¢´ÊµãÂçïÂÖÉÁöÑÂ§ñÈÉ®‰æùËµñÔºü</li>
<li>ÈÄöËøáÊµãËØïÁî®‰æãÂèçÊé®Ê®°ÂùóËæπÁïåÊòØÂê¶ÂêàÁêÜ</li>
</ul>
</li>
</ol>
<blockquote>
<p>&ldquo;ÂèØÊµãËØïÊÄß‰∏çÊòØ‰∫ãÂêéË°•ÊïëÔºåËÄåÊòØ‰ºòÁßÄËÆæËÆ°ÁöÑËá™ÁÑ∂ÁªìÊûú„ÄÇ&rdquo;
‚Äî‚Äî„Ää‰øÆÊîπ‰ª£Á†ÅÁöÑËâ∫ÊúØ„Äã</p>
</blockquote>
<hr>
<p><strong>‰ªéÂ∞ÅË£ÖÊÄßÁúãÂáΩÊï∞ÊèêÂèñ</strong></p>
<p>Scott MeyersÂú®„ÄäEffective C++„Äã‰∏≠ÊåáÂá∫Ôºö</p>
<blockquote>
<p><strong>‰ºòÂÖàÈÄâÊã©ÈùûÊàêÂëòÈùûÂèãÂÖÉÂáΩÊï∞</strong></p>
<ul>
<li>ÊàêÂëòÂáΩÊï∞ÂèØËÆøÈóÆÊâÄÊúâÁßÅÊúâÊàêÂëòÔºåÂâäÂº±Â∞ÅË£Ö</li>
<li>Ëá™Áî±ÂáΩÊï∞‰ªÖÈÄöËøáÂÖ¨ÊúâÊé•Âè£‰∫§‰∫íÔºåÂ¢ûÂº∫Â∞ÅË£Ö</li>
</ul>
</blockquote>
<p><strong>Á§∫‰æãÂØπÊØî</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// ÊñπÊ°àAÔºöÊàêÂëòÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">WidgetA</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">update</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* Áõ¥Êé•ËÆøÈóÆblobs_ */</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Blob</span><span class="o">&gt;</span> <span class="n">blobs_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÊñπÊ°àBÔºöËá™Áî±ÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">WidgetB</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Blob</span><span class="o">&gt;&amp;</span> <span class="n">getBlobs</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">blobs_</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Blob</span><span class="o">&gt;</span> <span class="n">blobs_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">update</span><span class="p">(</span><span class="n">WidgetB</span><span class="o">&amp;</span> <span class="n">widget</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ÈÄöËøágetBlobs()ËÆøÈóÆ */</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>ÊñπÊ°àB</strong>‰∏≠Ôºå<code>update</code>ÂáΩÊï∞Êó†Ê≥ïÁõ¥Êé•ËÆøÈóÆ<code>blobs_</code>ÔºåÂøÖÈ°ªÈÄöËøáÂÖ¨ÊúâÊé•Âè£ÔºåÂ∞ÅË£ÖÊÄßÊõ¥‰ºò„ÄÇ</li>
</ul>
<hr>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li><strong>ÊµãËØïÂç≥ËÆæËÆ°ÊåáÊ†á</strong>ÔºöÈöæ‰ª•ÊµãËØïÁöÑ‰ª£Á†ÅÂæÄÂæÄÊöóÁ§∫ËÆæËÆ°Áº∫Èô∑</li>
<li><strong>Ëß£ËÄ¶‰∏∫Áéã</strong>ÔºöÈÄöËøáÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ‰ΩøÁªÑ‰ª∂Áã¨Á´ãÂèØÊµã</li>
<li><strong>Âπ≥Ë°°‰πãÈÅì</strong>ÔºöÂú®Â∞ÅË£ÖÊÄß‰∏éÂèØÊµãËØïÊÄßÈó¥ÂØªÊâæÊúÄ‰ºòËß£</li>
<li><strong>Â∑•ÂÖ∑ËæÖÂä©</strong>ÔºöÂà©Áî®‰æùËµñÊ≥®ÂÖ•„ÄÅÁ≠ñÁï•Ê®°ÂºèÁ≠âÊèêÂçáÂèØÊµãËØïÊÄßÔºàÂêéÁª≠Á´†ËäÇËØ¶Ëß£Ôºâ</li>
</ul>
<p>ÈÄöËøáÊú¨ÂáÜÂàôÔºåÊàë‰ª¨Â≠¶‰ºöÂ∞ÜÂèØÊµãËØïÊÄßËûçÂÖ•ËÆæËÆ°DNAÔºåËÆ©ÂèòÊõ¥Êõ¥ÂÆâÂÖ®„ÄÅÁ≥ªÁªüÊõ¥ÂÅ•Â£Æ„ÄÇ</p>
<h3 id="ÂáÜÂàô5‰∏∫Êâ©Â±ïËÄåËÆæËÆ°">ÂáÜÂàô5Ôºö‰∏∫Êâ©Â±ïËÄåËÆæËÆ°
</h3><p>ÂÖ≥‰∫éËΩØ‰ª∂ÂèòÊõ¥ÔºåËøòÊúâ‰∏Ä‰∏™ÈáçË¶ÅÊñπÈù¢Â∞öÊú™Âº∫Ë∞ÉÔºöÂèØÊâ©Â±ïÊÄß„ÄÇÂèØÊâ©Â±ïÊÄßÂ∫îÊàê‰∏∫ËÆæËÆ°ÁöÑÈ¶ñË¶ÅÁõÆÊ†á„ÄÇÂõ†‰∏∫Âù¶ÁéáÂú∞ËØ¥ÔºåËã•‰ª£Á†ÅÊó†Ê≥ïÊ∑ªÂä†Êñ∞ÂäüËÉΩÔºåÂ∞±ÊÑèÂë≥ÁùÄÂÖ∂ÁîüÂëΩÂë®ÊúüÁöÑÁªàÁªì„ÄÇÂõ†Ê≠§ÔºåÊ∑ªÂä†Êñ∞ÂäüËÉΩ‚Äî‚ÄîÊâ©Â±ï‰ª£Á†ÅÂ∫ì‚Äî‚ÄîÂÖ∑ÊúâÊ†πÊú¨ÈáçË¶ÅÊÄß„ÄÇÊ≠£Âõ†Â¶ÇÊ≠§ÔºåÂèØÊâ©Â±ïÊÄßÁêÜÂ∫îÊàê‰∏∫‰ºòÁßÄËΩØ‰ª∂ËÆæËÆ°ÁöÑÊ†∏ÂøÉÁõÆÊ†á‰∏éÈ©±Âä®Âäõ„ÄÇ</p>
<hr>
<p><strong>ÂºÄÊîæ-Â∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâ</strong></p>
<p>ÂèØÊâ©Â±ïÊÄß‰∏ç‰ºöÂá≠Á©∫ÂÆûÁé∞ÔºåËÄåÊòØÈúÄË¶ÅÂú®ËÆæËÆ°Êó∂ÊòæÂºèËÄÉËôë„ÄÇÂõûÈ°æ&quot;ÂáÜÂàô2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°&quot;‰∏≠ÁöÑÊñáÊ°£Â∫èÂàóÂåñÁ§∫‰æãÔºåÊàë‰ª¨Êõæ‰ΩøÁî®Â∏¶ÊúâÁ∫ØËôöÂáΩÊï∞<code>serialize()</code>ÁöÑ<code>Document</code>Âü∫Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Document</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">virtual</span> <span class="o">~</span><span class="n">Document</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span> <span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span> <span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê¥æÁîüÁ±ªÔºàÂ¶Ç<code>PDF</code>ÔºâÈúÄÂÆûÁé∞<code>serialize()</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PDF</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Document</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="n">serialize</span><span class="p">(</span> <span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span> <span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ≥ÈîÆÈóÆÈ¢òÂú®‰∫éÂ¶Ç‰ΩïÂÆûÁé∞Â∫èÂàóÂåñ„ÄÇ‰∏∫ÂÆûÁé∞ÂèçÂ∫èÂàóÂåñÔºåÈúÄÂú®Â≠óËäÇÊµÅÂºÄÂ§¥Â≠òÂÇ®ÊñáÊ°£Á±ªÂûãÊ†áËØÜ„ÄÇÊàë‰ª¨Êõæ‰ΩøÁî®Êûö‰∏æÁ±ªÂûãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">enum</span> <span class="k">class</span> <span class="nc">DocumentType</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">pdf</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">word</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§öÊñáÊ°£Á±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩÜÊ≠§ËÆæËÆ°ÂØºËá¥ÊâÄÊúâÊñáÊ°£Á±ªÔºàPDF„ÄÅWordÁ≠âÔºâËÄ¶Âêà‰∫éÂêå‰∏ÄÊûö‰∏æ„ÄÇÂΩìÊñ∞Â¢ûXMLÊñáÊ°£Á±ªÂûãÊó∂ÔºåÂøÖÈ°ª‰øÆÊîπÊûö‰∏æÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">enum</span> <span class="k">class</span> <span class="nc">DocumentType</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">pdf</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">word</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">xml</span><span class="p">,</span>  <span class="c1">// Êñ∞Â¢ûÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰ºöÂØºËá¥ÊâÄÊúâÁé∞ÊúâÊñáÊ°£Á±ªÈáçÊñ∞ÁºñËØëÔºå‰∏îÈôêÂà∂‰∫ÜÂ§ñÈÉ®Êâ©Â±ïËÉΩÂäõÔºàÊó†Ê≥ï‰øÆÊîπÊûö‰∏æÂàôÊó†Ê≥ïÊ∑ªÂä†Êñ∞Á±ªÂûãÔºâ„ÄÇ<br/>ËøôÊòæÁÑ∂ËøùÂèç‰∫Ü<strong>ÂºÄÊîæ-Â∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâ</strong>‚Äî‚ÄîËΩØ‰ª∂ÂÆû‰ΩìÂ∫îÂØπÊâ©Â±ïÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠„ÄÇ</p>
<hr>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°àÔºöÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ</strong></p>
<p>ÈÄöËøáÂ∞ÜÂ∫èÂàóÂåñÈÄªËæëÊèêÂèñ‰∏∫Áã¨Á´ãÁªÑ‰ª∂ÔºàÂ¶ÇÂõæ1-6ÊâÄÁ§∫ÔºâÔºåÊàë‰ª¨Ëß£Èô§‰∫ÜÊñáÊ°£Á±ªÂûãÈó¥ÁöÑËÄ¶ÂêàÔºö</p>
<p>Â∫èÂàóÂåñÁªÑ‰ª∂‰æùËµñÊâÄÊúâÊñáÊ°£Á±ªÂûãÔºå‰ΩÜÊñáÊ°£Á±ªÂûãÂΩºÊ≠§Áã¨Á´ã„ÄÇÊñ∞Â¢û<code>XML</code>Á±ªÊó∂Ôºå‰ªÖÈúÄÂú®Â∫èÂàóÂåñÁªÑ‰ª∂‰∏≠Â§ÑÁêÜÊñ∞Á±ªÂûãÔºåÊó†ÈúÄ‰øÆÊîπÁé∞ÊúâÊñáÊ°£Á±ª„ÄÇËøôÁßçËá™‰∏ãËÄå‰∏äÁöÑ‰æùËµñÁ¨¶ÂêàÊû∂ÊûÑÂ±ÇÁ∫ßÂéüÂàô‚Äî‚Äî‰ΩéÂ±ÇÁªÑ‰ª∂ÂèØ‰æùËµñÈ´òÂ±ÇÁªÑ‰ª∂ÔºåÂèç‰πãÂàô‰∏çÁÑ∂„ÄÇ</p>
<hr>
<p><strong>ÁºñËØëÊúüÊâ©Â±ïÊÄß</strong></p>
<p>Êâ©Â±ïÊÄßËÆæËÆ°ÂêåÊ†∑ÈÄÇÁî®‰∫éÁºñËØëÊúüÂ§öÊÄÅ„ÄÇC++Ê†áÂáÜÂ∫ìÈÄöËøá‰ª•‰∏ãÊñπÂºèÂÆûÁé∞Êâ©Â±ïÊÄßÔºö</p>
<p><strong>ÂáΩÊï∞ÈáçËΩΩ</strong>
<code>std::swap</code>ÂÖÅËÆ∏‰∏∫Ëá™ÂÆö‰πâÁ±ªÂûãÁâπÂåñ‰∫§Êç¢ÈÄªËæëÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">custom</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CustomType</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="n">CustomType</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="n">CustomType</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ÂÆöÂà∂ÂÆûÁé∞ */</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ΩøÁî®ÊñπÂºèÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">;</span> <span class="c1">// ÂêØÁî®ADLÊü•Êâæ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>      <span class="c1">// ‰ºòÂÖàË∞ÉÁî®ÂÆöÂà∂ÁâàÊú¨
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Ê®°Êùø‰∏éÊ¶ÇÂøµ</strong>
Ê†áÂáÜÁÆóÊ≥ïÔºàÂ¶Ç<code>std::find</code>ÔºâÈÄöËøáÊ®°ÊùøÂèÇÊï∞Êé•ÂèóËá™ÂÆö‰πâËø≠‰ª£Âô®ÂíåË∞ìËØçÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InputIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">InputIt</span> <span class="n">find</span><span class="p">(</span><span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InputIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">UnaryPredicate</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">InputIt</span> <span class="n">find_if</span><span class="p">(</span><span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">UnaryPredicate</span> <span class="n">p</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Ê®°ÊùøÁâπÂåñ</strong>
<code>std::hash</code>ÂÖÅËÆ∏‰∏∫Ëá™ÂÆö‰πâÁ±ªÂûãÁâπÂåñÂìàÂ∏åËÆ°ÁÆóÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">std</span><span class="o">::</span><span class="n">hash</span><span class="o">&lt;</span><span class="n">CustomType</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">size_t</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">CustomType</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="cm">/* ÂÆöÂà∂ÂìàÂ∏åËÆ°ÁÆó */</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>ÈÅøÂÖçËøáÂ∫¶ËÆæËÆ°</strong></p>
<p>Â∞ΩÁÆ°ÂèØÊâ©Â±ïÊÄßËá≥ÂÖ≥ÈáçË¶ÅÔºå‰ΩÜÈúÄË≠¶ÊÉï<strong>ËøáÊó©ÊäΩË±°</strong>„ÄÇÈÅµÂæ™YAGNIÔºàYou Ain&rsquo;t Gonna Need ItÔºâÂéüÂàôÔºöËã•‰∏çÁ°ÆÂÆöÊú™Êù•ÈúÄÊ±ÇÔºå‰ºòÂÖà‰øùÊåÅÁÆÄÂçï„ÄÇËøáÂ∫¶ËÆæËÆ°ÂèØËÉΩÂØºËá¥Ôºö</p>
<ul>
<li>‰∏çÂøÖË¶ÅÁöÑÂ§çÊùÇÊÄß</li>
<li>ÈôêÂà∂Êú™Êù•Êâ©Â±ïÊñπÂêëÔºàÂ¶ÇÂÅèÈáçÁ±ªÂûãÊâ©Â±ïÂç¥ÈòªÁ¢çÊìç‰ΩúÊâ©Â±ïÔºâ</li>
</ul>
<p><strong>Âπ≥Ë°°Á≠ñÁï•Ôºö</strong></p>
<ul>
<li>ÊòéÁ°ÆÈ¢ÑÊúüÊâ©Â±ïÁÇπÊó∂ÔºåÈ¢ÑÂÖàËÆæËÆ°Êâ©Â±ïÊé•Âè£</li>
<li>‰∏çÁ°ÆÂÆöÊó∂ÔºåÈÄöËøáÈáçÊûÑÈÄêÊ≠•ÂºïÂÖ•Êâ©Â±ïÊú∫Âà∂</li>
</ul>
<hr>
<p><strong>ÂáÜÂàô5Ë¶ÅÁÇπ</strong></p>
<p>‚úÖ <strong>ÊèêÂÄ°</strong></p>
<ul>
<li>ÈááÁî®ÂºÄÊîæ-Â∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâÔºåÈÄöËøáÂü∫Á±ª„ÄÅÊ®°Êùø„ÄÅÈáçËΩΩÊàñÁâπÂåñÊîØÊåÅÊâ©Â±ï</li>
<li>ËØÜÂà´È¢ÑÊúüÊâ©Â±ïÁÇπÂπ∂ËÆæËÆ°ÊòìÊâ©Â±ïÁªìÊûÑ</li>
</ul>
<p>‚ùå <strong>ÈÅøÂÖç</strong></p>
<ul>
<li>‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÂÆûÁé∞Êâ©Â±ïÔºàËøùÂèçOCPÔºâ</li>
<li>‰∏çÁ°ÆÂÆöÈúÄÊ±ÇÊó∂ÁöÑËøáÂ∫¶ÊäΩË±°</li>
</ul>
<p><strong>Ê†∏ÂøÉÊèêÁ§∫</strong>Ôºö
ÂèØÊâ©Â±ïÊÄßÊòØÂèØÊåÅÁª≠ËΩØ‰ª∂ÁöÑÂÖ≥ÈîÆ„ÄÇÈÄöËøáÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ„ÄÅÂêàÁêÜ‰ΩøÁî®Â§öÊÄÅ‰∏éÊ®°ÊùøÊú∫Âà∂ÔºåÊûÑÂª∫ÈÄÇÂ∫îÊºîËøõÁöÑÁ≥ªÁªüÊû∂ÊûÑ„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>‰ºòÂÖàËÆæËÆ°‰æø‰∫éÊâ©Â±ï‰ª£Á†Å„ÄÇ</li>
<li>ÈÅµÂÆàÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâÔºå‰Ωø‰ª£Á†ÅÂØπÊâ©Â±ïÂºÄÊîæÔºå‰ΩÜÂØπ‰øÆÊîπÂÖ≥Èó≠„ÄÇ</li>
<li>ÈÄöËøáÂü∫Á±ª„ÄÅÊ®°Êùø„ÄÅÂáΩÊï∞ÈáçËΩΩÊàñÊ®°ÊùøÁâπÂåñÊù•ËÆæËÆ°‰ª•ÊîØÊåÅ‰ª£Á†ÅÊ∑ªÂä†„ÄÇ</li>
<li>Â¶ÇÊûú‰Ω†‰∏çÁ°ÆÂÆö‰∏ã‰∏Ä‰∏™Ê∑ªÂä†ÊòØ‰ªÄ‰πàÔºåËØ∑ÈÅøÂÖçËøáÊó©ÊäΩË±°„ÄÇ</li>
</ul>
<h2 id="Á¨¨‰∫åÁ´†-Âª∫Á´ãÊäΩË±°ÁöÑËâ∫ÊúØ">Á¨¨‰∫åÁ´† Âª∫Á´ãÊäΩË±°ÁöÑËâ∫ÊúØ
</h2><p><strong>ÊäΩË±°Âú®ËΩØ‰ª∂ËÆæËÆ°‰∏éÊû∂ÊûÑ‰∏≠ÁöÑÊ†∏ÂøÉÂú∞‰Ωç</strong></p>
<p>ÊäΩË±°ÊòØËΩØ‰ª∂ËÆæËÆ°‰∏éÊû∂ÊûÑÁöÑÂü∫Áü≥„ÄÇ‰ºòÁßÄÁöÑÊäΩË±°ÊòØÁÆ°ÁêÜÂ§çÊùÇÊÄßÁöÑÂÖ≥ÈîÆÔºåÊ≤°ÊúâÂÆÉ‰ª¨ÔºåËâØÂ•ΩÁöÑËÆæËÆ°‰∏éÂêàÁêÜÁöÑÊû∂ÊûÑÂ∞ÜÊó†‰ªéË∞àËµ∑„ÄÇÁÑ∂ËÄåÔºåÊûÑÂª∫Âπ∂Ê≠£Á°ÆËøêÁî®ÊäΩË±°ÁªùÈùûÊòì‰∫ã‚Äî‚ÄîËøôÊõ¥ÂÉèÊòØ‰∏ÄÈó®Ëâ∫ÊúØËÄåÈùûÁ≤æÁ°ÆÁßëÂ≠¶ÔºåÂÖÖÊª°‰∫ÜÁ≤æÂ¶ôÊùÉË°°„ÄÇÊú¨Á´†Â∞ÜÊ∑±ÂÖ•Êé¢ËÆ®ÊäΩË±°ÁöÑÊú¨Ë¥®ÂèäÂÖ∂ÊûÑÂª∫‰πãÈÅì„ÄÇ</p>
<hr>
<p><strong>ÂáÜÂàô6ÔºöÈÅµÂæ™ÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫</strong></p>
<p>ÊäΩË±°ÁöÑÊú¨Ë¥®Âú®‰∫éË°®Ëææ‰∏ÄÁªÑ<strong>ÈúÄÊ±Ç‰∏éÂ•ëÁ∫¶</strong>„ÄÇÊØè‰∏™ÊäΩË±°ËÉåÂêéÈÉΩÈöêÂê´‰∫ÜÁâπÂÆöÁöÑË°å‰∏∫ÊâøËØ∫ÔºåÈÅµÂæ™Ëøô‰∫õÈ¢ÑÊúüÊòØÁª¥Êä§Á≥ªÁªü‰∏ÄËá¥ÊÄßÁöÑÂÖ≥ÈîÆ„ÄÇÊú¨ÂáÜÂàôÂ∞ÜÂºïÂÖ• <strong>ÈáåÊ∞èÊõøÊç¢ÂéüÂàô(LSP)</strong>ÔºåÈòêÈáä‰∏∫‰ΩïÂ≠êÁ±ªÂøÖÈ°ªÂÆåÂÖ®ÈÅµÂæ™Âü∫Á±ªÁöÑË°å‰∏∫Â•ëÁ∫¶„ÄÇ</p>
<p><strong>ÂáÜÂàô7ÔºöÁêÜËß£Âü∫Á±ª‰∏éÊ¶ÇÂøµÁöÑÂÖ±ÊÄß</strong></p>
<p>‰Ωú‰∏∫ÊúÄÂ∏∏Áî®ÁöÑ‰∏§ÁßçÊäΩË±°Êú∫Âà∂Ôºå<strong>Âü∫Á±ªÔºàÁªßÊâø)</strong> ‰∏é  <strong>Ê¶ÇÂøµ(Ê®°ÊùøÁ∫¶Êùü)</strong> Âú®ËØ≠‰πâÂ±ÇÈù¢ÂÖ∑ÊúâÊ∑±Â±ÇÁõ∏‰ººÊÄß„ÄÇ‰∫åËÄÖÈÉΩËÉΩÂÆö‰πâË°å‰∏∫ËßÑËåÉÔºå‰ΩÜÂÆûÁé∞ÊñπÂºèËø•ÂºÇ„ÄÇÊú¨ÂáÜÂàôÂ∞ÜÂØπÊØî‰∫åËÄÖÁöÑÂÖ±ÊÄß‰∏éÂ∑ÆÂºÇÔºåÊè≠Á§∫ÊäΩË±°Ë°®ËææÁöÑÊôÆÈÄÇËßÑÂæã„ÄÇ</p>
<p><strong>ÂáÜÂàô8ÔºöÊääÊè°ÈáçËΩΩÈõÜÂêàÁöÑËØ≠‰πâÂ•ëÁ∫¶</strong></p>
<p>ÂáΩÊï∞ÈáçËΩΩÊûÑÊàêÁ¨¨‰∏âÁßçÊäΩË±°ÂΩ¢Âºè„ÄÇÊØè‰∏™ÈáçËΩΩÂáΩÊï∞ÈÉΩÈúÄÈÅµÂæ™<strong>ÈáçËΩΩÈõÜÂêàÁöÑËØ≠‰πâÂ•ëÁ∫¶</strong>ÔºåÂÖ∂Ë°å‰∏∫ÂøÖÈ°ªÊª°Ë∂≥Ë∞ÉÁî®ÊñπÁöÑÁªü‰∏ÄÈ¢ÑÊúü„ÄÇÊú¨ÂáÜÂàôÂ∞ÜÊâ©Â±ïLSPÂéüÂàôÔºåÊé¢ËÆ®ÈáçËΩΩÊú∫Âà∂‰∏≠ÁöÑË°å‰∏∫‰∏ÄËá¥ÊÄßË¶ÅÊ±Ç„ÄÇ</p>
<p><strong>ÂáÜÂàô9ÔºöÂÖ≥Ê≥®ÊäΩË±°ÁöÑÊâÄÊúâÊùÉÂΩíÂ±û</strong></p>
<p>‰ªéÊû∂ÊûÑËßÜËßíÁúãÔºåÊäΩË±°ÁöÑ<strong>ÊâÄÊúâÊùÉÂΩíÂ±û</strong>Áõ¥Êé•ÂΩ±ÂìçÁ≥ªÁªüÁªìÊûÑ„ÄÇÊú¨ÂáÜÂàôÂºïÂÖ•<strong>‰æùËµñÂÄíÁΩÆÂéüÂàôÔºàDIPÔºâ</strong>ÔºåÈòêÊòéÂ¶Ç‰ΩïÈÄöËøáÊäΩË±°ÂÆûÁé∞Â±ÇÁ∫ßËß£ËÄ¶„ÄÇ‰ªÖÂºïÂÖ•ÊäΩË±°Âπ∂‰∏çË∂≥Â§ü‚Äî‚ÄîÂøÖÈ°ªÁ°Æ‰øùÈ´òÂ±ÇÊ®°ÂùóÊã•ÊúâÊäΩË±°ÂÆö‰πâÔºå‰ΩéÂ±ÇÂÆûÁé∞‰æùËµñÈ´òÂ±ÇÊé•Âè£„ÄÇ</p>
<p><strong>ÂáÜÂàô10ÔºöÊûÑÂª∫Êû∂ÊûÑËÆæËÆ°ÊñáÊ°£</strong></p>
<p>Êû∂ÊûÑËÆæËÆ°ÊñáÊ°£ÊòØÊäΩË±°‰ΩìÁ≥ªÁöÑËìùÂõæ„ÄÇÊú¨ÂáÜÂàôÂ∞ÜÊé¢ËÆ®ÊñáÊ°£ÂåñÁöÑ‰ª∑ÂÄºÔºöÊòéÁ°ÆÊäΩË±°ËæπÁïå„ÄÅËÆ∞ÂΩïËÆæËÆ°ÂÜ≥Á≠ñ„ÄÅ‰øÉËøõÂõ¢ÈòüÂÖ±ËØÜ„ÄÇÂç≥‰ΩøÈááÁî®ËΩªÈáèÁ∫ßÂΩ¢ÂºèÔºåÊû∂ÊûÑÊñáÊ°£‰πüËÉΩÊòæËëóÊèêÂçáÁ≥ªÁªüÁöÑÂèØÁª¥Êä§ÊÄß‰∏éÊºîËøõËÉΩÂäõ„ÄÇ</p>
<hr>
<p>ÊäΩË±°ÊûÑÂª∫ÁöÑËâ∫ÊúØÂú®‰∫éÂπ≥Ë°°Ë°®ËææÂäõ‰∏éÁ∫¶ÊùüÂäõ„ÄÇÈÄöËøáËøô‰∫îÂ§ßÂáÜÂàôÔºåÊàë‰ª¨Â∞ÜÈÄêÊ≠•ÊéåÊè°ÂÆö‰πâÁ≤æÁ°ÆÂ•ëÁ∫¶„ÄÅÁÆ°ÁêÜ‰æùËµñÊñπÂêë„ÄÅÂÆûÁé∞ÂèØÊåÅÁª≠ÊºîËøõÁöÑÂÆûË∑µÊñπÊ≥ï„ÄÇÊØè‰∏ÄÂ±ÇÁ≤æÂøÉËÆæËÆ°ÁöÑÊäΩË±°ÔºåÈÉΩÊòØÂØπÊäóËΩØ‰ª∂ÁÜµÂ¢ûÁöÑÂùöÂÆûÂ±èÈöú„ÄÇ</p>
<hr>
<h3 id="ÂáÜÂàô6ÈÅµÂæ™ÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫">ÂáÜÂàô6ÔºöÈÅµÂæ™ÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫
</h3><p>Ëß£ËÄ¶ËΩØ‰ª∂ÁöÑÊ†∏ÂøÉÂú®‰∫éÂºïÂÖ•ÊäΩË±°ÔºåËÄåÊûÑÂª∫ËâØÂ•ΩÁöÑÊäΩË±°Âç¥ÂÖÖÊª°ÊåëÊàò„ÄÇÊú¨ËäÇÈÄöËøáÁªèÂÖ∏Á§∫‰æãÊè≠Á§∫ÊäΩË±°Ë°å‰∏∫È¢ÑÊúüÁöÑÈáçË¶ÅÊÄßÔºåÂπ∂ÈòêÈáä <strong>ÈáåÊ∞èÊõøÊç¢ÂéüÂàô(LSP)</strong> ÁöÑÊ†∏ÂøÉË¶Å‰πâ„ÄÇ</p>
<hr>
<p><strong>ËøùÂèçË°å‰∏∫È¢ÑÊúüÁöÑÂÖ∏ÂûãÊ°à‰æã</strong></p>
<p>ËÄÉËôë‰∏Ä‰∏™<code>Rectangle</code>Âü∫Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Rectangle</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Rectangle</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">getWidth</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>    
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">getHeight</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">setWidth</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">setHeight</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">getArea</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">width</span><span class="p">;</span>    
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">height</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>‰Ωú‰∏∫Âü∫Á±ªÔºåÊèê‰æõËôöÊûêÊûÑÂáΩÊï∞Á°Æ‰øùÂ§öÊÄÅÊ≠£Á°ÆÊÄß</li>
<li>ÂåÖÂê´ÂÆΩÈ´òÂ±ûÊÄßÂíåÂØπÂ∫îÁöÑËÆøÈóÆ/‰øÆÊîπÊñπÊ≥ï</li>
<li><code>setWidth</code>‰∏é<code>setHeight</code>ÂèØÁã¨Á´ã‰øÆÊîπÁª¥Â∫¶</li>
<li><code>getArea</code>ËøîÂõûÂÆΩÈ´ò‰πòÁßØ</li>
</ul>
<p>Ê¥æÁîüÁ±ª<code>Square</code>ÁªßÊâø<code>Rectangle</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Rectangle</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">setWidth</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">setHeight</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">getArea</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Êï∞Â≠¶‰∏äÊ≠£ÊñπÂΩ¢ÊòØÁü©ÂΩ¢Áâπ‰æãÔºå‰ΩÜ‰ª£Á†ÅÂÆûÁé∞ÈúÄ‰øùÊåÅÂÆΩÈ´òÁõ∏Á≠â</li>
<li>ÈáçÂÜô<code>setWidth</code>Âíå<code>setHeight</code>ÂêåÊ≠•‰øÆÊîπÂè¶‰∏ÄÁª¥Â∫¶</li>
</ul>
<p><strong>ÈóÆÈ¢òÁàÜÂèëÁÇπ</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">transform</span><span class="p">(</span><span class="n">Rectangle</span><span class="o">&amp;</span> <span class="n">rect</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">rect</span><span class="p">.</span><span class="n">setWidth</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>    
</span></span><span class="line"><span class="cl">    <span class="n">rect</span><span class="p">.</span><span class="n">setHeight</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">assert</span><span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">getArea</span><span class="p">()</span> <span class="o">==</span> <span class="mi">28</span><span class="p">);</span> <span class="c1">// Êñ≠Ë®ÄÂ§±Ë¥•ÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Square</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="p">.</span><span class="n">setWidth</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">transform</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>  <span class="c1">// ‰º†ÂÖ•Ê≠£ÊñπÂΩ¢ÂÆû‰æã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>transform</code>ÂáΩÊï∞È¢ÑÊúüÁã¨Á´ã‰øÆÊîπÂÆΩÈ´òÂêéÈù¢ÁßØ‰∏∫28</li>
<li>‰º†ÂÖ•<code>Square</code>Êó∂Ôºå‰∏§Ê¨°setË∞ÉÁî®Âº∫Âà∂ÂêåÊ≠•ÂÆΩÈ´òÔºåÂØºËá¥Èù¢ÁßØËÆ°ÁÆóÈîôËØØ</li>
</ul>
<hr>
<p><strong>ÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºàLSPÔºâËØ¶Ëß£</strong></p>
<p>LSPË¶ÅÊ±ÇÂ≠êÁ±ªÂøÖÈ°ªÂÆåÂÖ®ÈÅµÂÆàÂü∫Á±ªÁöÑ<strong>Ë°å‰∏∫Â•ëÁ∫¶</strong>ÔºåÂÖ∑‰Ωì‰ΩìÁé∞‰∏∫Ôºö</p>
<ol>
<li>
<p><strong>ÂâçÁΩÆÊù°‰ª∂‰∏çÂèØÂº∫Âåñ</strong>
Â≠êÁ±ªÊñπÊ≥ï‰∏çËÉΩÊñΩÂä†ÊØîÂü∫Á±ªÊõ¥‰∏•Ê†ºÁöÑËæìÂÖ•Á∫¶Êùü</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// Âü∫Á±ªÊé•Âèói&gt;0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">virtual</span> <span class="kt">void</span> <span class="n">Base</span><span class="o">::</span><span class="n">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span> <span class="n">assert</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÈîôËØØÔºöÂ≠êÁ±ªË¶ÅÊ±Çi&gt;10ÔºåËøùÂèçLSP
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">Derived</span><span class="o">::</span><span class="n">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span> <span class="n">assert</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">);</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>ÂêéÁΩÆÊù°‰ª∂‰∏çÂèØÂº±Âåñ</strong>
Â≠êÁ±ªÊñπÊ≥ïÈúÄÊª°Ë∂≥Âü∫Á±ªÊâøËØ∫ÁöÑËæìÂá∫‰øùËØÅ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// Âü∫Á±ª‰øùËØÅËøîÂõûÊ≠£ÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">virtual</span> <span class="kt">int</span> <span class="n">Base</span><span class="o">::</span><span class="n">f</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="n">assert</span><span class="p">(</span><span class="n">result</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÈîôËØØÔºöÂ≠êÁ±ªÂèØËÉΩËøîÂõû‰ªªÊÑèÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">Derived</span><span class="o">::</span><span class="n">f</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="p">...</span> <span class="cm">/* Êó†Á∫¶Êùü */</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>ËøîÂõûÁ±ªÂûãÂçèÂèò(Covariant)</strong>
Â≠êÁ±ªÊñπÊ≥ïÂèØËøîÂõû Âü∫Á±ªËøîÂõûÁ±ªÂûã ÁöÑÊ¥æÁîüÁ±ª</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Base</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Derived</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Base</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">virtual</span> <span class="n">Base</span><span class="o">*</span> <span class="n">Base</span><span class="o">::</span><span class="n">create</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">Derived</span><span class="o">*</span> <span class="n">Derived</span><span class="o">::</span><span class="n">create</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span> <span class="c1">// ÂêàÊ≥ïÂçèÂèò
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>ÂèÇÊï∞Á±ªÂûãÈÄÜÂèò(Contravariant)</strong>
Â≠êÁ±ªÊñπÊ≥ïÂ∫îÊé•ÂèóÂü∫Á±ªÂèÇÊï∞ÁöÑË∂ÖÁ±ªÂûãÔºàC++ËØ≠Ê≥ï‰∏çÊîØÊåÅÔºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">virtual</span> <span class="kt">void</span> <span class="n">Base</span><span class="o">::</span><span class="n">process</span><span class="p">(</span><span class="n">Derived</span><span class="o">*</span> <span class="n">d</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÁêÜÊÉ≥ÊÉÖÂÜµÔºöÂèÇÊï∞ÂèØ‰∏∫Base*Ôºå‰ΩÜC++‰∏çÂÖÅËÆ∏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">Derived</span><span class="o">::</span><span class="n">process</span><span class="p">(</span><span class="n">Base</span><span class="o">*</span> <span class="n">b</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>‰øùÊåÅ‰∏çÂèòÈáè(Invariants)</strong>
Â≠êÁ±ªÂøÖÈ°ªÁª¥Êä§Âü∫Á±ªÂÆö‰πâÁöÑÁä∂ÊÄÅÁ∫¶Êùü</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Base</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">value_</span><span class="p">;</span> <span class="c1">// ‰∏çÂèòÈáèÔºö1 &lt;= value_ &lt;= 10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Derived</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Base</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Derived</span><span class="p">()</span> <span class="p">{</span> <span class="n">value_</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// Á†¥Âùè‰∏çÂèòÈáèÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<hr>
<p><strong>ÂØπLSPÁöÑÂ∏∏ËßÅËØØËß£‰∏éËØØÁî®</strong></p>
<ul>
<li>
<p><strong>Êï∞Â≠¶IS-A ‚â† ÁºñÁ®ãIS-A</strong>
Â∞ΩÁÆ°Âá†‰ΩïÂ≠¶‰∏≠Ê≠£ÊñπÂΩ¢Â±û‰∫éÁü©ÂΩ¢Ôºå‰ΩÜ‰ª£Á†Å‰∏≠ÁöÑË°å‰∏∫Â•ëÁ∫¶Á†¥Âùè‰ΩøÁªßÊâøÂÖ≥Á≥ªÂ§±Êïà</p>
</li>
<li>
<p><strong>Âä®ÊÄÅÁ±ªÂûãÊ£ÄÊü•ÊòØËÆæËÆ°ÂºÇÂë≥</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">process</span><span class="p">(</span><span class="n">Base</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="k">auto</span> <span class="n">d</span> <span class="o">=</span> <span class="k">dynamic_cast</span><span class="o">&lt;</span><span class="n">Derived</span><span class="o">*&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÁâπÊÆäÂ§ÑÁêÜDerivedÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Â∏∏ËßÑÂ§ÑÁêÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÈíàÂØπÂÖ∑‰ΩìÂ≠êÁ±ªÁöÑÁâπÊÆäÂ§ÑÁêÜÔºåÊö¥Èú≤ÊäΩË±°Ê≥ÑÈú≤ÔºåÂ∫îËßÜ‰∏∫‰∏•ÈáçËÆæËÆ°Áº∫Èô∑</p>
</li>
</ul>
<hr>
<p><strong>ÊûÑÂª∫ÂèØÈù†ÊäΩË±°ÁöÑÂÖ≥ÈîÆ</strong></p>
<ol>
<li><strong>ÊòéÁ°ÆÂ•ëÁ∫¶</strong>
ÈÄöËøá‰ª£Á†ÅÊ≥®Èáä„ÄÅÊñ≠Ë®ÄÊàñÂ•ëÁ∫¶ÁºñÁ®ãÊ°ÜÊû∂ÔºàÂ¶ÇC++20 ContractsÔºâÊòæÂºèÂÆö‰πâÂâçÁΩÆ/ÂêéÁΩÆÊù°‰ª∂</li>
<li><strong>Â∞ÅË£Ö‰∏çÂèòÊÄß</strong>
ÈÅøÂÖçprotectedÊï∞ÊçÆÊàêÂëòÔºåÈÄöËøáÊé•Âè£Âº∫Âà∂Á∫¶ÊùüÁä∂ÊÄÅÊúâÊïàÊÄßÔºàÈÅµÂæ™Ê†∏ÂøÉÂáÜÂàôC.133Ôºâ</li>
<li><strong>Ë∞®ÊÖé‰ΩøÁî®ÁªßÊâø</strong>
‰ºòÂÖàÁªÑÂêà‰ºò‰∫éÁªßÊâøÔºå‰ªÖÂú®‰∏•Ê†ºÊª°Ë∂≥LSPÊó∂Âª∫Á´ãÁªßÊâøÂ±ÇÊ¨°</li>
<li><strong>ÊñáÊ°£ÂåñÈ¢ÑÊúü</strong>
ÂèÇËÄÉC++Ê†áÂáÜÂ∫ìÂØπËø≠‰ª£Âô®Ê¶ÇÂøµÁöÑËßÑËåÉÔºåÊ∏ÖÊô∞ÊèèËø∞ÊäΩË±°ÁöÑË°å‰∏∫Ë¶ÅÊ±Ç</li>
</ol>
<p><strong>ÂáÜÂàô6Ë¶ÅÁÇπ</strong>
‚úÖ <strong>ÈÅµÂæ™</strong></p>
<ul>
<li>Â∞ÜÊäΩË±°ËßÜ‰∏∫Ë°å‰∏∫Â•ëÁ∫¶ÈõÜÂêà</li>
<li>ÈÄöËøáLSPÁ°Æ‰øùÂ≠êÁ±ªÊó†ÁºùÊõøÊç¢Âü∫Á±ª</li>
<li>ÊòæÂºèÂÆö‰πâÂπ∂È™åËØÅÂâçÁΩÆ/ÂêéÁΩÆÊù°‰ª∂</li>
</ul>
<p>‚ùå <strong>ÈÅøÂÖç</strong></p>
<ul>
<li>Âü∫‰∫éÊï∞Â≠¶Áõ¥ËßâÁõ≤ÁõÆÂª∫Á´ãÁªßÊâø</li>
<li>Âú®Â≠êÁ±ª‰∏≠Âº±ÂåñÂêéÁΩÆÊù°‰ª∂ÊàñÂº∫ÂåñÂâçÁΩÆÊù°‰ª∂</li>
<li>ÈÄöËøáËøêË°åÊó∂Á±ªÂûãÊ£ÄÊü•ËßÑÈÅøLSP</li>
</ul>
<p><strong>ËÆæËÆ°ÂêØÁ§∫</strong>Ôºö
ÊäΩË±°ÊòØËΩØ‰ª∂Â∑•Á®ãÁöÑÂü∫Áü≥ÔºåËÄåLSPÊòØÁ°Æ‰øùÊäΩË±°ÂèØÈù†ÊÄßÁöÑÊ†∏ÂøÉÊú∫Âà∂„ÄÇÊØè‰∏ÄÊ¨°ÁªßÊâøÂÜ≥Á≠ñÈÉΩÂ∫î‰º¥ÈöèÂØπË°å‰∏∫Â•ëÁ∫¶ÁöÑ‰∏•Ê†ºÈ™åËØÅÔºåÂîØÊúâÂ¶ÇÊ≠§ÔºåÊâçËÉΩÊûÑÂª∫Âá∫ÁªèÂæóËµ∑ÊºîËøõÁöÑËΩØ‰ª∂Á≥ªÁªü„ÄÇ</p>
<h3 id="ÂáÜÂàô7ÁêÜËß£Âü∫Á±ª‰∏éÊ¶ÇÂøµÁöÑÊ∑±Â±ÇÂÖ±ÊÄß">ÂáÜÂàô7ÔºöÁêÜËß£Âü∫Á±ª‰∏éÊ¶ÇÂøµÁöÑÊ∑±Â±ÇÂÖ±ÊÄß
</h3><p>Âú®ÂáÜÂàô6‰∏≠ÔºåÊàë‰ª¨ËÅöÁÑ¶‰∫éÁªßÊâø‰ΩìÁ≥ªÁöÑË°å‰∏∫Â•ëÁ∫¶Ôºå‰ΩÜÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºàLSPÔºâÁöÑÈÄÇÁî®ËåÉÂõ¥Ëøú‰∏çÊ≠¢‰∫éÊ≠§„ÄÇ</p>
<p>Êú¨ËäÇÂ∞ÜÊè≠Á§∫ <strong>Âä®ÊÄÅÂ§öÊÄÅ(Âü∫Á±ª)</strong>  ‰∏é  <strong>ÈùôÊÄÅÂ§öÊÄÅ(Ê¶ÇÂøµ)</strong> Âú®ÊäΩË±°ËØ≠‰πâ‰∏äÁöÑÊú¨Ë¥®Áªü‰∏Ä„ÄÇ</p>
<hr>
<p><strong>Âä®ÊÄÅ‰∏éÈùôÊÄÅÊäΩË±°ÁöÑËØ≠‰πâÂØπÁ≠âÊÄß</strong></p>
<p>ÂØπÊØî‰∏§‰∏™‰ª£Á†ÅÁâáÊÆµÔºö</p>
<p><strong>ÁâáÊÆµ1ÔºöÂü∫‰∫éÁªßÊâøÁöÑÂä®ÊÄÅÂ§öÊÄÅ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Document</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Document</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">exportToJSON</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">useDocument</span><span class="p">(</span><span class="k">const</span> <span class="n">Document</span><span class="o">&amp;</span> <span class="n">doc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">doc</span><span class="p">.</span><span class="n">exportToJSON</span><span class="p">();</span>  <span class="c1">// ‰æùËµñÂü∫Á±ªÊé•Âè£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁâáÊÆµ2ÔºöÂü∫‰∫éÊ¶ÇÂøµÁöÑÈùôÊÄÅÂ§öÊÄÅ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">concept</span> <span class="n">Document</span> <span class="o">=</span> <span class="k">requires</span><span class="p">(</span><span class="n">T</span> <span class="n">t</span><span class="p">,</span> <span class="n">ByteStream</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">t</span><span class="p">.</span><span class="n">exportToJSON</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">t</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="n">Document</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">useDocument</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">doc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">doc</span><span class="p">.</span><span class="n">exportToJSON</span><span class="p">();</span>  <span class="c1">// ‰æùËµñÊ¶ÇÂøµÁ∫¶Êùü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÂÖ≥ÈîÆÊ¥ûÂØü</strong>Ôºö
‰∏§ÊÆµ‰ª£Á†ÅÂùáË¶ÅÊ±Ç<code>doc</code>ÂØπË±°Êª°Ë∂≥<code>exportToJSON</code>Âíå<code>serialize</code>ÁöÑË°å‰∏∫Â•ëÁ∫¶„ÄÇÊó†ËÆ∫ÈÄöËøáËôöÂáΩÊï∞ËøòÊòØÊ®°ÊùøÊ¶ÇÂøµÔºåÊäΩË±°ÁöÑÊ†∏ÂøÉÂú®‰∫é<strong>ÂÆö‰πâÈ¢ÑÊúüË°å‰∏∫ÈõÜÂêà</strong>„ÄÇÂü∫Á±ª‰∏éÊ¶ÇÂøµÂú®Ê≠§Â±ÇÈù¢ÂÆûÁé∞ËØ≠‰πâÁ≠â‰ª∑„ÄÇ</p>
<hr>
<p><strong>C++Ê¶ÇÂøµÁöÑLSPÂÆûË∑µ</strong></p>
<p>‰ª•Ê†áÂáÜÂ∫ì<code>std::copy</code>ÁÆóÊ≥ï‰∏∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InputIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">OutputIt</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">OutputIt</span> <span class="n">copy</span><span class="p">(</span><span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">OutputIt</span> <span class="n">d_first</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="n">first</span> <span class="o">!=</span> <span class="n">last</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="o">*</span><span class="n">d_first</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">first</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">d_first</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>InputIt</code>‰∏é<code>OutputIt</code>ËôΩÈùûC++20Ê¶ÇÂøµÔºå‰ΩÜÈÄöËøáÂëΩÂêçÊ®°ÊùøÂèÇÊï∞ÈöêÂê´Ë°å‰∏∫Â•ëÁ∫¶Ôºö
<ul>
<li><code>InputIt</code>ÈúÄÊîØÊåÅÈÄíÂ¢û„ÄÅËß£ÂºïÁî®ÂèäÁªàÊ≠¢Êù°‰ª∂Âà§Êñ≠</li>
<li><code>OutputIt</code>ÈúÄÊîØÊåÅËß£ÂºïÁî®ËµãÂÄº‰∏éÈÄíÂ¢û</li>
</ul>
</li>
<li>‰ªª‰Ωï‰∏çÊª°Ë∂≥Ëøô‰∫õÈöêÂºèÂ•ëÁ∫¶ÁöÑËø≠‰ª£Âô®Á±ªÂûãÂ∞ÜÂØºËá¥ÁÆóÊ≥ïÂ§±ÊïàÔºåÊûÑÊàêÂØπLSPÁöÑËøùÂèç</li>
</ul>
<p><strong>C++20Ê¶ÇÂøµÁöÑÊºîËøõ</strong>Ôºö
Ê†áÂáÜÂ∫ìÈÄöËøáÂàÜÂ±ÇÊ¶ÇÂøµÁ≤æÁ°ÆÂÆö‰πâËø≠‰ª£Âô®Ë¶ÅÊ±ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">I</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">concept</span> <span class="n">input_or_output_iterator</span> <span class="o">=</span> <span class="cm">/*...*/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">I</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">concept</span> <span class="n">input_iterator</span> <span class="o">=</span> 
</span></span><span class="line"><span class="cl">    <span class="n">input_or_output_iterator</span><span class="o">&lt;</span><span class="n">I</span><span class="o">&gt;</span> <span class="o">&amp;&amp;</span> <span class="cm">/* ÁªÜÂåñË¶ÅÊ±Ç */</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">I</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">concept</span> <span class="n">forward_iterator</span> <span class="o">=</span> 
</span></span><span class="line"><span class="cl">    <span class="n">input_iterator</span><span class="o">&lt;</span><span class="n">I</span><span class="o">&gt;</span> <span class="o">&amp;&amp;</span> <span class="cm">/* Êñ∞Â¢ûÂâçÂêëËø≠‰ª£ÁâπÊÄß */</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÂàÜÂ±ÇËÆæËÆ°Ë∑µË°åÊé•Âè£ÈöîÁ¶ªÂéüÂàôÔºàISPÔºâÔºåÂÖÅËÆ∏ÊåâÈúÄÁªÑÂêàÊäΩË±°Á∫¶Êùü„ÄÇ</p>
<hr>
<p><strong>Ê¶ÇÂøµ‰Ωú‰∏∫ÈùôÊÄÅÊäΩË±°ÁöÑËØ≠‰πâËΩΩ‰Ωì</strong></p>
<p>Â∞ΩÁÆ°C++20Ê¶ÇÂøµÊó†Ê≥ïÂú®ËØ≠Ê≥ïÂ±ÇÈù¢Âº∫Âà∂ËØ≠‰πâÔºå‰ΩÜ‰ªçÈÄöËøá‰ª•‰∏ãÊñπÂºèË°®ËææÈ¢ÑÊúüË°å‰∏∫Ôºö</p>
<ol>
<li><strong>Êìç‰ΩúÂèØË°åÊÄß</strong>ÔºöÈÄöËøá<code>requires</code>Â≠êÂè•ËßÑÂÆöÂøÖÈ°ªÂ≠òÂú®ÁöÑÊàêÂëòÂáΩÊï∞/Êìç‰ΩúÁ¨¶</li>
<li><strong>Ë°å‰∏∫Á∫¶ÂÆö</strong>Ôºö‰æùËµñÂëΩÂêçÁ∫¶ÂÆöÔºàÂ¶Ç<code>InputIt</code>ÊöóÁ§∫ËæìÂÖ•Ëø≠‰ª£Âô®ËØ≠‰πâÔºâ</li>
<li><strong>ÊñáÊ°£ÂåñÂ•ëÁ∫¶</strong>ÔºöÊ†áÂáÜËßÑËåÉÊòéÁ°ÆÊ¶ÇÂøµÁöÑË°å‰∏∫È¢ÑÊúüÔºàÂ¶ÇËø≠‰ª£Âô®ÊúâÊïàÊÄß‰øùËØÅÔºâ</li>
</ol>
<p><strong>Á§∫‰æãÔºöËá™ÂÆö‰πâÊ¶ÇÂøµ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">concept</span> <span class="n">Renderable</span> <span class="o">=</span> <span class="k">requires</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">obj</span><span class="p">,</span> <span class="n">RenderTarget</span><span class="o">&amp;</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">obj</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">target</span><span class="p">)</span> <span class="p">}</span> <span class="o">-&gt;</span> <span class="n">std</span><span class="o">::</span><span class="n">same_as</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">;</span>  <span class="c1">// ËØ≠Ê≥ïÁ∫¶Êùü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ÈöêÂê´ËØ≠‰πâÔºörender()Â∫îÂ∞ÜÂØπË±°ÁªòÂà∂Âà∞target‰∏îÊó†ÂâØ‰ΩúÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩøÁî®Êñπ‰ª£Á†ÅÂèØÂÆâÂÖ®ÂÅáÂÆöÊâÄÊúâ<code>Renderable</code>Á±ªÂûãÈÅµÂæ™Ê≠§Â•ëÁ∫¶„ÄÇ</p>
<hr>
<p><strong>ËÆæËÆ°ÂêØÁ§∫</strong></p>
<ol>
<li><strong>Áªü‰∏ÄËÆæËÆ°ÂéüÂàô</strong>
LSPÈÄÇÁî®‰∫éÊâÄÊúâÊäΩË±°ÂΩ¢ÂºèÔºåÊó†ËÆ∫Âä®ÊÄÅÔºàËôöÂáΩÊï∞ÔºâËøòÊòØÈùôÊÄÅÔºàÊ®°Êùø/Ê¶ÇÂøµÔºâ„ÄÇÂ≠êÁ±ªÊàñÊ®°ÊùøÂèÇÊï∞ÂøÖÈ°ªÂÆåÂÖ®ÈÅµÂÆàÊäΩË±°Â±ÇÁöÑË°å‰∏∫Á∫¶ÂÆö„ÄÇ</li>
<li><strong>Ê¶ÇÂøµÂç≥Â•ëÁ∫¶</strong>
Â∞ÜC++20Ê¶ÇÂøµÂèä‰º†ÁªüÂëΩÂêçÊ®°ÊùøÂèÇÊï∞ËßÜ‰∏∫ÁºñËØëÊúüÊé•Âè£ËßÑËåÉ„ÄÇËÆæËÆ°Êó∂Â∫îÔºö
<ul>
<li>ÊòéÁ°ÆÊ¶ÇÂøµÁöÑÊúÄÂ∞èÂåñÁ∫¶ÊùüÈõÜÂêà</li>
<li>ÈÄöËøáÂàÜÂ±ÇÁªÑÂêàÊûÑÂª∫Â§çÊùÇÊäΩË±°ÔºàÂ¶ÇËø≠‰ª£Âô®‰ΩìÁ≥ªÔºâ</li>
<li>Âú®ÊñáÊ°£‰∏≠ËØ¶Ëø∞ËØ≠‰πâÈ¢ÑÊúü</li>
</ul>
</li>
<li><strong>ÈùôÊÄÅÂ§öÊÄÅÁöÑ‰ºòÂäø</strong>
Áõ∏ÊØîÁªßÊâø‰ΩìÁ≥ªÔºåÊ¶ÇÂøµÊèê‰æõÔºö
<ul>
<li>Èõ∂ËøêË°åÊó∂ÂºÄÈîÄ</li>
<li>Êõ¥Âº∫ÁöÑÁ±ªÂûãÂÆâÂÖ®ÊÄß</li>
<li>ÂØπÂÄºËØ≠‰πâÁöÑÂéüÁîüÊîØÊåÅ</li>
</ul>
</li>
</ol>
<p><strong>ÂáÜÂàô7Ë¶ÅÁÇπ</strong>
‚úÖ <strong>ÂÆûË∑µÂª∫ËÆÆ</strong></p>
<ul>
<li>Â∞ÜLSPÂéüÂàôÂêåÊ≠•Â∫îÁî®‰∫éÂä®ÊÄÅ‰∏éÈùôÊÄÅÂ§öÊÄÅËÆæËÆ°</li>
<li>‰ΩøÁî®C++20Ê¶ÇÂøµÊàñÂëΩÂêçÊ®°ÊùøÂèÇÊï∞ÂÆö‰πâÁºñËØëÊúüÊäΩË±°</li>
<li>‰∏∫ÊØè‰∏™Ê¶ÇÂøµÁºñÂÜôÊ∏ÖÊô∞ÁöÑË°å‰∏∫Â•ëÁ∫¶ÊñáÊ°£</li>
</ul>
<p>‚ùå <strong>ËßÑÈÅøÈô∑Èò±</strong></p>
<ul>
<li>Âú®Ê®°Êùø‰ª£Á†Å‰∏≠ÂøΩÁï•ËØ≠‰πâÁ∫¶ÊùüÔºàÂ¶ÇÂÅáÂÆö<code>operator++</code>ÂøÖÁÑ∂ÂâçËøõÔºâ</li>
<li>ÂàõÂª∫&quot;Â∑®Êó†Èú∏&quot;Ê¶ÇÂøµÔºàËøùÂèçÊé•Âè£ÈöîÁ¶ªÂéüÂàôÔºâ</li>
</ul>
<p><strong>Ê†∏ÂøÉÊÄùÁª¥</strong>Ôºö
ÊäΩË±°ÁöÑÊú¨Ë¥®ÊòØË°å‰∏∫Â•ëÁ∫¶ÁöÑÂÖ∑Ë±°Âåñ„ÄÇÊó†ËÆ∫ÊòØËøêË°åÊó∂ÈÄöËøáËôöÂáΩÊï∞ÂàÜÂèëÔºåËøòÊòØÁºñËØëÊúüÈÄöËøáÊ¶ÇÂøµÁ∫¶ÊùüÔºåÂØπÂ•ëÁ∫¶ÁöÑÂø†ËØöÂ∫¶ÂÜ≥ÂÆöÁ≥ªÁªüÁöÑÂÅ•Â£ÆÊÄß„ÄÇÈ¢ÜÊÇüËøô‰∏ÄÂÖ±ÊÄßÔºåÊñπËÉΩÊ∏∏ÂàÉ‰∫éÂ§öËåÉÂºèËÆæËÆ°‰πãÈó¥„ÄÇ</p>
<h3 id="ÂáÜÂàô8ÁêÜËß£ÈáçËΩΩÈõÜÂêàÁöÑËØ≠‰πâË¶ÅÊ±Ç">ÂáÜÂàô8ÔºöÁêÜËß£ÈáçËΩΩÈõÜÂêàÁöÑËØ≠‰πâË¶ÅÊ±Ç
</h3><p>Âú®ÂáÜÂàô6‰∏≠ÔºåÊàë‰ª¨Âº∫Ë∞ÉÊäΩË±°Â±ÇÁöÑË°å‰∏∫Â•ëÁ∫¶ÈáçË¶ÅÊÄß„ÄÇ</p>
<p>Êú¨ËäÇÂ∞ÜÊè≠Á§∫<strong>ÂáΩÊï∞ÈáçËΩΩ</strong>Ëøô‰∏ÄÁºñËØëÊó∂ÊäΩË±°Êú∫Âà∂Â¶Ç‰ΩïÊâøËΩΩËØ≠‰πâË¶ÅÊ±ÇÔºå‰ª•ÂèäËøùÂèçËøô‰∫õË¶ÅÊ±ÇÂèØËÉΩÂºïÂèëÁöÑËÆæËÆ°È£éÈô©„ÄÇ</p>
<hr>
<p><strong>Ëá™Áî±ÂáΩÊï∞ÁöÑÊäΩË±°ÂäõÈáè</strong></p>
<p>‰ª•Ê†áÂáÜÂ∫ìÁöÑ<code>begin()</code>/<code>end()</code>‰∏∫‰æãÔºå<strong>ÈùûÊàêÂëòÂáΩÊï∞ÈáçËΩΩ</strong>Â±ïÁé∞Âá∫Áã¨ÁâπÁöÑ‰ºòÂäøÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Range</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">traverseRange</span><span class="p">(</span><span class="k">const</span> <span class="n">Range</span><span class="o">&amp;</span> <span class="n">range</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">begin</span><span class="p">;</span>  <span class="c1">// ÂêØÁî®ADLÁöÑÂèÇÊï∞‰æùËµñÊü•Êâæ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">begin</span><span class="p">(</span><span class="n">range</span><span class="p">);</span> <span class="n">pos</span> <span class="o">!=</span> <span class="n">end</span><span class="p">(</span><span class="n">range</span><span class="p">);</span> <span class="o">++</span><span class="n">pos</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÈÅçÂéÜÈÄªËæë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>Èùû‰æµÂÖ•ÂºèÊâ©Â±ï</strong>ÔºöÊó†ÈúÄ‰øÆÊîπÂÆπÂô®Á±ªÂç≥ÂèØ‰∏∫ÂÜÖÁΩÆÊï∞ÁªÑÊ∑ªÂä†Ëø≠‰ª£ÊîØÊåÅ</li>
<li><strong>ÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàô</strong>ÔºöÈÄöËøáÊñ∞Â¢ûËá™Áî±ÂáΩÊï∞Êâ©Â±ïÂäüËÉΩÔºåÊó†ÈúÄÊîπÂä®Áé∞Êúâ‰ª£Á†Å</li>
<li><strong>ÈÄöÁî®ÊÄßÊèêÂçá</strong>ÔºöÊîØÊåÅÊâÄÊúâÊèê‰æõ<code>begin</code>/<code>end</code>ÈáçËΩΩÁöÑÁ±ªÂûãÔºàÂåÖÊã¨Á¨¨‰∏âÊñπÂ∫ìÔºâ</li>
</ul>
<p><strong>ÂØπÊØîÊàêÂëòÂáΩÊï∞Â±ÄÈôê</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// ‰º†ÁªüÊàêÂëòÂáΩÊï∞ÂÆûÁé∞Ôºà‰ªÖÊîØÊåÅÁâπÂÆöÂÆπÂô®Ôºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">traverseMember</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">vec</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">vec</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÈÅçÂéÜÈÄªËæë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Êó†Ê≥ïÂ§ÑÁêÜÂÜÖÁΩÆÊï∞ÁªÑÊàñËá™ÂÆö‰πâÂÆπÂô®Á±ªÂûã</li>
<li>ËøùÂèçÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºåÊñ∞Â¢ûÂÆπÂô®ÈúÄ‰øÆÊîπÈÅçÂéÜÈÄªËæë</li>
</ul>
<hr>
<p><strong>ÈáçËΩΩÈõÜÂêàÁöÑÈöêÂºèÂ•ëÁ∫¶</strong></p>
<p>‰ª•<code>swap</code>ÂáΩÊï∞‰∏∫‰æãÔºå‰∏çÂΩìÂÆûÁé∞Â∞ÜÂºïÂèëÁÅæÈöæÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Widget</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÈîôËØØÔºö‰ªÖ‰∫§Êç¢ÈÉ®ÂàÜÊàêÂëòÂèòÈáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="n">Widget</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="n">Widget</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">i</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">i</span><span class="p">);</span>  <span class="c1">// ÂøΩÁï•jÁöÑ‰∫§Êç¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ΩøÁî®Êñπ‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Widget</span> <span class="n">x</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="n">y</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">22</span><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="n">swap</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// È¢ÑÊúüÔºöx=(2,22), y=(1,11)
</span></span></span><span class="line"><span class="cl"><span class="c1">// ÂÆûÈôÖÔºöx=(2,11), y=(1,22) ‚Üí ËøùÂèçË°å‰∏∫Â•ëÁ∫¶ÔºÅ
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>ËØ≠‰πâÈ¢ÑÊúü</strong>Ôºö<code>swap</code>Â∫î‰∫§Êç¢ÂØπË±°<strong>ÂÖ®ÈÉ®ÂèØËßÇÂØüÁä∂ÊÄÅ</strong></li>
<li><strong>ËøùÂèçÂêéÊûú</strong>ÔºöË∞ÉÁî®ÊñπÊó†Ê≥ïÊ≠£Á°ÆÊé®ÁêÜÁ®ãÂ∫èË°å‰∏∫ÔºåÂØºËá¥ÈöêËîΩÁº∫Èô∑</li>
</ul>
<hr>
<p><strong>ÈáçËΩΩÂëΩÂêçÁöÑÊ†∏ÂøÉÂáÜÂàô</strong></p>
<ol>
<li>
<p><strong>ËØ≠‰πâ‰∏ÄËá¥ÊÄßÂéüÂàô</strong></p>
<ul>
<li>
<p><strong>C.162</strong>ÔºöÂØπËØ≠‰πâÁ≠â‰ª∑ÁöÑÊìç‰ΩúËøõË°åÈáçËΩΩ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// Ê≠£Á°ÆÔºöÊèê‰æõÂ§öÁßçÊûÑÈÄ†ÊñπÂºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">File</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">File</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">path</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">File</span><span class="p">(</span><span class="n">FILE</span><span class="o">*</span> <span class="n">handle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>C.163</strong>ÔºöÈÅøÂÖçÂØπËØ≠‰πâ‰∏çÂêåÁöÑÊìç‰Ωú‰ΩøÁî®Áõ∏ÂêåÂêçÁß∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// ÈîôËØØÔºöfindÂèØËÉΩÊöóÁ§∫Á∫øÊÄßÊêúÁ¥¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Range</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">binary_find</span><span class="p">(</span><span class="n">Range</span><span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">,</span> <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">);</span>  <span class="c1">// Â∫îÂëΩÂêç‰∏∫binary_search
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p><strong>Ê†áÂáÜÂ∫ìÂëΩÂêçÁ∫¶ÂÆö</strong></p>
<ul>
<li><code>begin()</code>/<code>end()</code>ÂøÖÈ°ªËøîÂõûÂèØÈÅçÂéÜÁöÑËø≠‰ª£Âô®ÂØπ</li>
<li><code>size()</code>Â∫îËøîÂõûÂÖÉÁ¥†Êï∞ÈáèÔºåËÄåÈùûÂ≠óËäÇÂ§ßÂ∞è</li>
<li><code>find()</code>ÈªòËÆ§Ë°®Á§∫Á∫øÊÄßÊü•ÊâæÔºåÊúâÂ∫èÊü•ÊâæÈúÄ‰ΩøÁî®<code>lower_bound</code>Á≠â</li>
</ul>
</li>
</ol>
<hr>
<p><strong>ÈáçËΩΩËÆæËÆ°ÁöÑÂÆûË∑µË¶ÅÁÇπ</strong></p>
<p>‚úÖ <strong>Ê≠£Á°ÆÂÆûË∑µ</strong></p>
<ul>
<li>ÈÅµÂÆàÁé∞ÊúâÈáçËΩΩÈõÜÂêàÁöÑËØ≠‰πâÁ∫¶ÂÆöÔºàÂ¶Ç<code>std::swap</code>ÁöÑÂÖ®Áä∂ÊÄÅ‰∫§Êç¢Ôºâ</li>
<li>ÈÄöËøáADLÂÆûÁé∞Èùû‰æµÂÖ•ÂºèÊâ©Â±ï</li>
<li>‰∏∫Ëá™ÂÆö‰πâÁ±ªÂûãÊèê‰æõÊ†áÂáÜÊé•Âè£ÈáçËΩΩÔºàÂ¶Ç<code>begin</code>/<code>end</code>ÊîØÊåÅËåÉÂõ¥forÂæ™ÁéØÔºâ</li>
</ul>
<p>‚ùå <strong>ËßÑÈÅøÈô∑Èò±</strong></p>
<ul>
<li>Âú®ÈáçËΩΩÂáΩÊï∞‰∏≠ÂÆûÁé∞‰∏éÂëΩÂêç‰∏çÁ¨¶ÁöÑË°å‰∏∫ÔºàÂ¶Ç<code>sort</code>‰∏ç‰øùËØÅÁ®≥ÂÆöÊÄßÔºâ</li>
<li>ÂøΩÁï•ÂèÇÊï∞‰æùËµñÊü•ÊâæÔºàADLÔºâÂØºËá¥Ëá™ÂÆö‰πâÁ±ªÂûãÊó†Ê≥ïË¢´ÈÄöÁî®ÁÆóÊ≥ïËØÜÂà´</li>
<li>Êª•Áî®ÈáçËΩΩÂØºËá¥Êé•Âè£ËØ≠‰πâÊ®°Á≥äÔºàÂ¶Ç<code>process()</code>Êó¢Â§ÑÁêÜÊï∞ÊçÆÂèàÁÆ°ÁêÜËµÑÊ∫êÔºâ</li>
</ul>
<hr>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>ÂáΩÊï∞ÈáçËΩΩÊòØÁºñËØëÊó∂Â§öÊÄÅÁöÑÈáçË¶ÅÂΩ¢ÂºèÔºåÊâøËΩΩÈöêÂºèË°å‰∏∫Â•ëÁ∫¶</li>
<li>ÈáçËΩΩÂëΩÂêçÂøÖÈ°ª‰º†ÈÄíÂáÜÁ°ÆËØ≠‰πâÔºåÈÅµÂæ™Êó¢ÊúâÁ∫¶ÂÆö</li>
<li>‰ªª‰ΩïÂØπÈáçËΩΩÈõÜÂêàÁöÑÊâ©Â±ïÈÉΩÈúÄ‰∏•Ê†ºÈÅµÂæ™LSPÂéüÂàô</li>
<li>Ëá™Áî±ÂáΩÊï∞ÈáçËΩΩÊòØÂÆûÁé∞ÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÁöÑÂà©Âô®Ôºå‰ΩÜÈúÄË∞®ÊÖéÁª¥Êä§ËØ≠‰πâ‰∏ÄËá¥ÊÄß</li>
</ul>
<h3 id="ÂáÜÂàô9ÂÖ≥Ê≥®ÊäΩË±°ÁöÑÊâÄÊúâÊùÉÂΩíÂ±û">ÂáÜÂàô9ÔºöÂÖ≥Ê≥®ÊäΩË±°ÁöÑÊâÄÊúâÊùÉÂΩíÂ±û
</h3><p>Âú®ËΩØ‰ª∂Êû∂ÊûÑ‰∏≠ÔºåÊäΩË±°ÁöÑ<strong>ÊâÄÊúâÊùÉÂΩíÂ±û</strong>Áõ¥Êé•ÂΩ±ÂìçÁ≥ªÁªü‰æùËµñÊñπÂêë„ÄÇÊú¨ËäÇÈÄöËøáÁªèÂÖ∏Ê°à‰æãÊè≠Á§∫ <strong>‰æùËµñÂÄíÁΩÆÂéüÂàô(DIP)</strong> ÁöÑÊ†∏ÂøÉÂÆûË∑µÔºöÈÄöËøáÈ´òÂ±ÇÊéåÊéßÊäΩË±°ÂÆö‰πâÔºåÂÆûÁé∞Êû∂ÊûÑÁ∫ßËß£ËÄ¶„ÄÇ</p>
<hr>
<p><strong>‰æùËµñÂÄíÁΩÆÂéüÂàôÔºàDIPÔºâÁ≤æË¶Å</strong></p>
<p><strong>Ê†∏ÂøÉ‰∏ªÂº†</strong>Ôºö</p>
<ol>
<li><strong>È´òÂ±ÇÊ®°Âùó‰∏çÂ∫î‰æùËµñ‰ΩéÂ±ÇÊ®°Âùó</strong>Ôºå‰∏§ËÄÖÈÉΩÂ∫î‰æùËµñÊäΩË±°</li>
<li><strong>ÊäΩË±°‰∏çÂ∫î‰æùËµñÁªÜËäÇ</strong>ÔºåÁªÜËäÇÂ∫î‰æùËµñÊäΩË±°</li>
</ol>
<p><strong>ATMÁ≥ªÁªüÂèç‰æãÂâñÊûê</strong>Ôºö</p>
<ul>
<li><strong>ÈóÆÈ¢ò</strong>ÔºöÂ≠òÊ¨æ„ÄÅÂèñÊ¨æ„ÄÅËΩ¨Ë¥¶Á≠â‰∫§ÊòìÁ±ªÁõ¥Êé•Ë∞ÉÁî®<code>UI</code>Á±ªÁöÑÂÖ∑‰ΩìÊñπÊ≥ïÔºàÂ¶Ç<code>requestDepositAmount()</code>Ôºâ</li>
<li><strong>ÂêéÊûú</strong>ÔºöÊñ∞Â¢ûVIPÂø´ÈÄüËΩ¨Ë¥¶ÂäüËÉΩÈúÄ‰øÆÊîπ<code>UI</code>Á±ªÔºåÂØºËá¥ÊâÄÊúâ‰∫§ÊòìÁ±ªÈáçÊñ∞ÁºñËØëÔºåËøùÂèçÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàô</li>
</ul>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong>Ôºö</p>
<ol>
<li>‰∏∫ÊØè‰∏™‰∫§ÊòìÂÆö‰πâ‰∏ìÂ±ûÊé•Âè£ÔºàÂ¶Ç<code>DepositUI</code>Ôºâ</li>
<li>Â∞ÜÊé•Âè£Â£∞ÊòéÁΩÆ‰∫é<strong>È´òÂ±ÇÊ®°Âùó</strong>Ôºà‰∫§ÊòìÈÄªËæëÂ±ÇÔºâ</li>
<li>ÂÖ∑‰Ωì<code>UI</code>ÂÆûÁé∞ÁªßÊâøÈ´òÂ±ÇÊé•Âè£ÔºåÂΩ¢ÊàêËá™‰∏ãËÄå‰∏äÁöÑ‰æùËµñ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;È´òÂ±Ç/DepositUI.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">DepositUI</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="n">requestAmount</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">confirm</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;‰ΩéÂ±Ç/ConsoleUI.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;È´òÂ±Ç/DepositUI.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">ConsoleDepositUI</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DepositUI</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">requestAmount</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="cm">/* ÊéßÂà∂Âè∞ËæìÂÖ•ÈÄªËæë */</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">confirm</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="cm">/* Á°ÆËÆ§ÊèêÁ§∫ */</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>Êèí‰ª∂Êû∂ÊûÑÁöÑÊ≠£ÂêëËÆæËÆ°</strong></p>
<p><strong>ÈîôËØØÊ®°Âºè</strong>Ôºö</p>
<ul>
<li>ÁºñËæëÂô®<code>Editor</code>Áõ¥Êé•ÂºïÁî®<code>VimModePlugin</code>Á±ª</li>
<li><strong>Áº∫Èô∑</strong>ÔºöÊØèÊñ∞Â¢ûÊèí‰ª∂ÈúÄ‰øÆÊîπÁºñËæëÂô®‰ª£Á†ÅÔºåÊó†Ê≥ïÊâ©Â±ï</li>
</ul>
<p><strong>Ê≠£Á°ÆÂÆûË∑µ</strong>Ôºö</p>
<p><strong>È´òÂ±ÇÂÆö‰πâÊèí‰ª∂Êé•Âè£</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;ÁºñËæëÂô®/Plugin.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Plugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">activate</span><span class="p">(</span><span class="n">Editor</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">deactivate</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>‰ΩéÂ±ÇÂÆûÁé∞ÂÖ∑‰ΩìÊèí‰ª∂</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Á¨¨‰∏âÊñπ/VimModePlugin.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;ÁºñËæëÂô®/Plugin.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">VimModePlugin</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Plugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">activate</span><span class="p">(</span><span class="n">Editor</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span> <span class="cm">/* VimÊ®°ÂºèÊøÄÊ¥ªÈÄªËæë */</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">deactivate</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="cm">/* Ê∏ÖÁêÜËµÑÊ∫ê */</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁºñËæëÂô®‰ªÖ‰æùËµñÊäΩË±°Êé•Âè£</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;ÁºñËæëÂô®/Editor.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Plugin.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Editor</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Plugin</span><span class="o">*&gt;</span> <span class="n">plugins</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">addPlugin</span><span class="p">(</span><span class="n">Plugin</span><span class="o">*</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span> <span class="n">plugins</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>Ê®°Êùø‰∏éÈáçËΩΩÁöÑ‰æùËµñÂÄíÁΩÆ</strong></p>
<p><strong>STLÁÆóÊ≥ïËåÉ‰æã</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InputIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">OutputIt</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">copy</span><span class="p">(</span><span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">OutputIt</span> <span class="n">d_first</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="n">first</span> <span class="o">!=</span> <span class="n">last</span><span class="p">)</span> <span class="o">*</span><span class="n">d_first</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">first</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>ÂÄíÁΩÆÈÄªËæë</strong>ÔºöÁÆóÊ≥ïÂÆö‰πâ<code>InputIt</code>/<code>OutputIt</code>Ê¶ÇÂøµÔºàÈ´òÂ±ÇÁ∫¶ÊùüÔºâÔºåÂÆπÂô®Ëø≠‰ª£Âô®Ôºà‰ΩéÂ±ÇÔºâÈúÄÊª°Ë∂≥Ëøô‰∫õÊ¶ÇÂøµ</li>
<li><strong>‰æùËµñÊñπÂêë</strong>ÔºöÂÆπÂô®ÂÆûÁé∞‰æùËµñSTLÁÆóÊ≥ïÂÆö‰πâÁöÑÊ†áÂáÜÔºåËÄåÈùûÂèç‰πã</li>
</ul>
<p><strong>swapÈáçËΩΩÂÆûÁé∞</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Widget</span> <span class="p">{</span> <span class="n">T</span> <span class="n">value</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">swap</span><span class="p">(</span><span class="n">Widget</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="n">Widget</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">value</span><span class="p">);</span> <span class="c1">// ‰æùËµñÁ±ªÂûãTÁöÑswapÂÆûÁé∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>Â•ëÁ∫¶‰º†ÈÄí</strong>Ôºö<code>Widget</code>ÁöÑswapË°å‰∏∫‰æùËµñ<code>T</code>Á±ªÂûãÁöÑswapÂÆûÁé∞ÔºåÊâÄÊúâÁõ∏ÂÖ≥ÊñπÈÅµÂæ™Âêå‰∏ÄÂ•ó‰∫§Êç¢ËØ≠‰πâ</li>
</ul>
<hr>
<p><strong>ËÆæËÆ°ÂêØÁ§∫</strong></p>
<p>‚úÖ <strong>Ê≠£Á°ÆÂÆûË∑µ</strong></p>
<ul>
<li>Â∞ÜÂÖ≥ÈîÆÊäΩË±°Êé•Âè£ÁΩÆ‰∫éÊû∂ÊûÑÈ´òÂ±ÇÔºàÂ¶ÇÊ†∏ÂøÉ‰∏öÂä°Ê®°ÂùóÔºâ</li>
<li>‰ΩéÂ±ÇÊ®°ÂùóÈÄöËøáÂÆûÁé∞È´òÂ±ÇÊé•Âè£Âª∫Á´ã‰æùËµñ</li>
<li>‰ΩøÁî®Ê®°ÊùøÁ∫¶ÊùüÊó∂ÔºåÂú®È´òÂ±ÇÂÆö‰πâÊ¶ÇÂøµË¶ÅÊ±Ç</li>
</ul>
<p>‚ùå <strong>ËßÑÈÅøÈô∑Èò±</strong></p>
<ul>
<li>ËÆ©ÂÖ∑‰ΩìÂÆûÁé∞Ê®°ÂùóÂÆö‰πâÊäΩË±°Êé•Âè£ÔºàÂØºËá¥ÂèçÂêë‰æùËµñÔºâ</li>
<li>Âú®‰ΩéÂ±ÇÊ®°ÂùóÈó¥ÂÖ±‰∫´ÊäΩË±°Êé•Âè£ÔºàÂºïÂèëÊ®™ÂêëËÄ¶ÂêàÔºâ</li>
</ul>
<p><strong>Ê†∏ÂøÉÂÖ¨Âºè</strong>Ôºö
<strong>ÊäΩË±°ÊâÄÊúâÊùÉ == Êû∂ÊûÑÊéßÂà∂ÊùÉ</strong>
ÊéåÊè°ÊäΩË±°ÂÆö‰πâÊùÉÔºåÊñπËÉΩÊéåÊéß‰æùËµñÊñπÂêëÔºåÊûÑÂª∫ÂèØÊåÅÁª≠ÊºîËøõÁöÑÁ≥ªÁªüÊû∂ÊûÑ„ÄÇ</p>
<h3 id="ÂáÜÂàô10Âª∫ËÆÆÂàõÂª∫Êû∂ÊûÑËÆæËÆ°ÊñáÊ°£">ÂáÜÂàô10ÔºöÂª∫ËÆÆÂàõÂª∫Êû∂ÊûÑËÆæËÆ°ÊñáÊ°£
</h3><p>ËÆ©Êàë‰ª¨ËÅäËÅä‰Ω†ÁöÑËΩØ‰ª∂Êû∂ÊûÑ„ÄÇ</p>
<p>ÂÖàÈóÆ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÈóÆÈ¢òÔºö<strong>‰Ω†ÊòØÂê¶ÊúâÊû∂ÊûÑËÆæËÆ°ÊñáÊ°£</strong>ÔºüËøô‰ªΩÊñáÊ°£ÊòØÂê¶Ê∏ÖÊô∞ÊèèËø∞‰∫ÜÁ≥ªÁªüÊ†∏ÂøÉÊ®°Âùó„ÄÅÊû∂ÊûÑÂ±ÇÁ∫ßÂèä‰æùËµñÂÖ≥Á≥ªÔºü</p>
<p>Â¶ÇÊûú‰Ω†ÁöÑÂõûÁ≠îÊòØËÇØÂÆöÁöÑÔºåËØ∑Ë∑≥ËøáÊú¨ÂáÜÂàô„ÄÇ</p>
<p>Ëã•Á≠îÊ°àÊòØÂê¶ÂÆöÁöÑÔºåËØ∑ÁªßÁª≠ÊÄùËÄÉ‰ª•‰∏ãÈóÆÈ¢òÔºö‰Ω†ÊòØÂê¶Âª∫Á´ã‰∫ÜÊåÅÁª≠ÈõÜÊàêÔºàCIÔºâÁéØÂ¢ÉÔºüÊòØÂê¶‰ΩøÁî®Ëá™Âä®ÂåñÊµãËØïÔºüÊòØÂê¶Â∫îÁî®ÈùôÊÄÅ‰ª£Á†ÅÂàÜÊûêÂ∑•ÂÖ∑ÔºüÂ¶ÇÊûúËøô‰∫õÈÉΩÂ∑≤ÂÆûÁé∞ÔºåËØ¥Êòé‰Ω†ÁöÑÂ∑•Á®ãÂü∫Á°ÄËâØÂ•ΩÔºå‰ΩÜ‰∏∫‰ΩïÁã¨Áº∫Êû∂ÊûÑÊñáÊ°£Ôºü</p>
<p>&ldquo;‰ΩïÂøÖÂ∞èÈ¢òÂ§ßÂÅöÔºüÊ≤°ÊúâÊû∂ÊûÑÊñáÊ°£Â§©Âèà‰∏ç‰ºöÂ°åÔºÅÊàë‰ª¨ÈááÁî®ÊïèÊç∑ÂºÄÂèëÔºåÈöèÊó∂ÂèØ‰ª•Ë∞ÉÊï¥ÔºÅ&quot;‚Äî‚ÄîËã•ËøôÊòØ‰Ω†ÁöÑÂøÉÂ£∞ÔºåËØ∑ÂÆπÊàëÊåáÂá∫‰∏Ä‰∏™Â∏∏ËßÅÁöÑËÆ§Áü•ËØØÂå∫ÔºåÊïèÊç∑ÊñπÊ≥ïÁöÑÊú¨Ë¥®ÊòØÂø´ÈÄüËé∑ÂèñÂèçÈ¶à <strong>ÔºåËÄåÈùûÁ∫µÂÆπÊó†Â∫è‰øÆÊîπ„ÄÇÊåÅÁª≠ÈõÜÊàê„ÄÅÊµãËØïÈ©±Âä®ÂºÄÂèëÁ≠âÊäÄÊúØÂÆûË∑µÁ°ÆÂÆûËÉΩÂø´ÈÄüÊö¥Èú≤ÈóÆÈ¢òÔºå‰ΩÜÊû∂ÊûÑË¥®ÈáèÂÜ≥ÂÆö‰∫Ü‰øÆÊîπÁöÑÈöæÊòìÁ®ãÂ∫¶</strong> „ÄÇ</p>
<p>‰ºòÁßÄÁöÑÊû∂ÊûÑËÆæËÆ°Â¶ÇÂêåÁ≤æÂØÜÁöÑÂüéÂ∏ÇÁÆ°ÁΩëÁ≥ªÁªüÔºåËÉΩËÆ©ÂèòÊõ¥Â¶ÇÂêåÊõ¥Êç¢Ë∑ØÁÅØËà¨‰ªéÂÆπÔºåËÄåÈùûÂä®ËæÑ&quot;ÂºÄËÜõÁ†¥ËÇö&rdquo;„ÄÇ</p>
<p><strong>Êû∂ÊûÑÊñáÊ°£ÁöÑÊ†∏ÂøÉ‰ª∑ÂÄº</strong></p>
<p>ËΩØ‰ª∂Â§ßÂ∏àRalph JohnsonÁöÑÊ¥ûËßÅÊè≠Á§∫‰∫ÜÊû∂ÊûÑÁöÑÊú¨Ë¥®Ôºö</p>
<blockquote>
<p>ÊàêÂäüÁöÑËΩØ‰ª∂È°πÁõÆ‰∏≠ÔºåÊ†∏ÂøÉÂºÄÂèëËÄÖÂØπÁ≥ªÁªüËÆæËÆ°ÊúâÁùÄÂÖ±ÂêåËÆ§Áü•ÔºåËøôÁßçÂÖ±ËØÜÂç≥Êû∂ÊûÑ„ÄÇ</p>
</blockquote>
<p>ËØïÊÉ≥ËøôÊ†∑ÁöÑÂú∫ÊôØÔºö</p>
<ul>
<li>Âõ¢ÈòüÊñ∞ÊàêÂëòÊòØÂê¶ÂáÜÁ°ÆÁêÜËß£Áé∞ÊúâÊû∂ÊûÑÔºü</li>
<li>ËµÑÊ∑±Â∑•Á®ãÂ∏àÁ¶ªËÅåÊòØÂê¶ÂØºËá¥Êû∂ÊûÑÊô∫ÊÖßÊµÅÂ§±Ôºü</li>
<li>ÂêÑÊ®°ÂùóË¥üË¥£‰∫∫ÊòØÂê¶ÂØπÁ≥ªÁªüÊºîËøõÊñπÂêëËææÊàêÂÖ±ËØÜÔºü</li>
</ul>
<p>Ê≤°Êúâ‰π¶Èù¢ÂåñÁöÑÊû∂ÊûÑÊñáÊ°£ÔºåËøô‰∫õÈóÆÈ¢òÁöÑÁ≠îÊ°àÂæÄÂæÄ‰ª§‰∫∫‰∏çÂÆâÔºåÂ∞±ÂÉèÂª∫Á≠ëÂ∑•Âú∞Ê≤°ÊúâËÆæËÆ°ËìùÂõæÔºå‰∏çÂêåÂ∑•ÁßçÁöÑÂ∑•‰∫∫ÂØπ&quot;Â∑¶‰æßËΩ¶Â∫ì&quot;ÁöÑÁêÜËß£ÂèØËÉΩÂçóËæïÂåóËæô„ÄÇ</p>
<p>Êû∂ÊûÑÊñáÊ°£Ê≠£ÊòØÂõ¢ÈòüÁöÑ&quot;ËÆ§Áü•ÈîöÁÇπ&quot;ÔºåÁ°Æ‰øùÊâÄÊúâ‰∫∫ÊúùÁùÄÂêå‰∏ÄÁõÆÊ†áÂâçËøõ„ÄÇ</p>
<p><strong>Êû∂ÊûÑÊñáÊ°£ÁöÑÂÆûË∑µÊô∫ÊÖß</strong></p>
<p><strong>Á†¥Èô§‰∏§Â§ßËø∑ÊÄù</strong>Ôºö</p>
<ol>
<li><strong>ÊñáÊ°£ÂøÖÁÑ∂ËøáÊó∂</strong>
ËÅöÁÑ¶ÂÆèËßÇËÆæËÆ°ËÄåÈùûÂÆûÁé∞ÁªÜËäÇÔºöËÆ∞ÂΩïÊ®°ÂùóÂàíÂàÜ„ÄÅÈÄö‰ø°Êú∫Âà∂„ÄÅÂÖ≥ÈîÆÊäÄÊúØÈÄâÂûãÁ≠âÁ®≥ÂÆöË¶ÅÁ¥†ÔºåÈÅøÂÖçÈô∑ÂÖ•APIÂèÇÊï∞‰πãÁ±ªÁöÑÊòìÂèòÁªÜËäÇ„ÄÇÂ∞±ÂÉèÂüéÂ∏ÇÂú∞ÂõæÊó†ÈúÄÊ†áÊ≥®ÊØèÈó¥ÂïÜÈì∫Ôºå‰ΩÜÂøÖÈ°ªÊ∏ÖÊô∞Â±ïÁé∞‰∏ªÂπ≤ÈÅìÂíåÂäüËÉΩÂå∫„ÄÇ</li>
<li><strong>ÁºñÂÜôÊàêÊú¨È´òÊòÇ</strong>
ÈááÁî®Ê∏êËøõÂºèÊûÑÂª∫Ôºö
<ul>
<li><strong>ÂàùÂßãÈò∂ÊÆµ</strong>ÔºöÁî®1È°µÂõæÊñáÊèèËø∞Ê†∏ÂøÉÊ®°Âùó‰∏éÊï∞ÊçÆÊµÅÂêë</li>
<li><strong>Ëø≠‰ª£ËøáÁ®ã</strong>ÔºöÈÄöËøáÊû∂ÊûÑËØÑÂÆ°‰ºöËÆÆÈÄêÊ≠•Ë°•ÂÖÖËÆæËÆ°ÂÜ≥Á≠ñ</li>
<li><strong>Áª¥Êä§Á≠ñÁï•</strong>ÔºöÊØèÂèåÂë®Áî±ÊäÄÊúØË¥üË¥£‰∫∫ÂêåÊ≠•Êõ¥Êñ∞ÂÖ≥ÈîÆÂèòÊõ¥</li>
</ul>
</li>
</ol>
<p><strong>Á§∫‰æãÔºöÂæÆÊúçÂä°Êû∂ÊûÑÊñáÊ°£Ê°ÜÊû∂</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl"># Á≥ªÁªüÊû∂ÊûÑÊ¶ÇËßà
</span></span><span class="line"><span class="cl">## Ê†∏ÂøÉÊúçÂä°
</span></span><span class="line"><span class="cl">- ËÆ¢ÂçïÊúçÂä°ÔºöÂ§ÑÁêÜ‰∫§ÊòìÁîüÂëΩÂë®ÊúüÔºàÈ¢ÜÂüüÈ©±Âä®ËÆæËÆ°Ôºâ
</span></span><span class="line"><span class="cl">- Â∫ìÂ≠òÊúçÂä°ÔºöÈááÁî®‰∫ã‰ª∂Ê∫ØÊ∫êÊ®°ÂºèÁÆ°ÁêÜÂ∫ìÂ≠ò
</span></span><span class="line"><span class="cl">- ÊîØ‰ªòÊúçÂä°ÔºöÈÄöËøáÈÄÇÈÖçÂô®Ê®°ÂºèÈõÜÊàêÁ¨¨‰∏âÊñπÊîØ‰ªòÁΩëÂÖ≥
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">## ÈÄö‰ø°Êú∫Âà∂
</span></span><span class="line"><span class="cl">![Êû∂ÊûÑÊãìÊâëÂõæ]
</span></span><span class="line"><span class="cl">- ÊúçÂä°Èó¥ÈÄö‰ø°ÔºögRPCÔºàproto3ÂçèËÆÆÔºâ
</span></span><span class="line"><span class="cl">- ‰∫ã‰ª∂ÊÄªÁ∫øÔºöKafkaÈõÜÁæ§ÔºàÂàÜÂå∫Á≠ñÁï•ÔºöËÆ¢ÂçïIDÂìàÂ∏åÔºâ
</span></span><span class="line"><span class="cl">- ÁºìÂ≠òÂ±ÇÔºöRedisÂì®ÂÖµÊ®°ÂºèÔºàÁºìÂ≠òÁ©øÈÄèÈò≤Êä§Á≠ñÁï•Ôºâ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">## ÂÖ≥ÈîÆÊäÄÊúØÂÜ≥Á≠ñ
</span></span><span class="line"><span class="cl">- Êï∞ÊçÆÂ∫ìÈÄâÂûãÔºö
</span></span><span class="line"><span class="cl">  - ËÆ¢ÂçïÊúçÂä°ÔºöPostgreSQLÔºàACID‰∫ãÂä°ÈúÄÊ±ÇÔºâ
</span></span><span class="line"><span class="cl">  - ÂïÜÂìÅÊúçÂä°ÔºöMongoDBÔºàÁÅµÊ¥ªSchemaÊîØÊåÅÔºâ
</span></span><span class="line"><span class="cl">- ÈÉ®ÁΩ≤Êû∂ÊûÑÔºö
</span></span><span class="line"><span class="cl">  - K8sÂ§öÂèØÁî®Âå∫ÈÉ®ÁΩ≤
</span></span><span class="line"><span class="cl">  - ÊúçÂä°ÁΩëÊ†º‰ΩøÁî®IstioÂÆûÁé∞Èáë‰∏ùÈõÄÂèëÂ∏É
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÊñáÊ°£Âç≥ËµÑ‰∫ß</strong></p>
<p>‰ºòÁßÄÊû∂ÊûÑÊñáÊ°£Â¶ÇÂêå‰øùÈô©ÁÆ±‰∏≠ÁöÑÂú∞Â•ëÔºö</p>
<ul>
<li><strong>Áü•ËØÜ‰º†Êâø</strong>ÔºöÊñ∞ÊàêÂëòÈÄöËøáÊñáÊ°£Âø´ÈÄüÂª∫Á´ãÁ≥ªÁªüÂÖ®ÊôØËÆ§Áü•</li>
<li><strong>ÂÜ≥Á≠ñÊ∫ØÊ∫ê</strong>ÔºöËÆ∞ÂΩïÊäÄÊúØÈÄâÂûãÁöÑÊùÉË°°ËøáÁ®ãÔºàÂ¶ÇÈÄâÊã©RESTËÄåÈùûGraphQLÁöÑÂéüÂõ†Ôºâ</li>
<li><strong>Ë¥®ÈáèÊä§Ê†è</strong>ÔºöÁªìÂêàArchUnitÁ≠âÂ∑•ÂÖ∑Ëá™Âä®ÂåñÈ™åËØÅÊû∂ÊûÑÁ∫¶Êùü</li>
</ul>
<p><strong>ÂÆûÊñΩÂª∫ËÆÆ</strong>Ôºö</p>
<ol>
<li><strong>ÂèØËßÜÂåñÂ∑•ÂÖ∑</strong>Ôºö‰ΩøÁî®C4Ê®°ÂûãÊàñUMLÁªòÂà∂Êû∂ÊûÑÂõæ</li>
<li><strong>ÁâàÊú¨ÂåñÁÆ°ÁêÜ</strong>ÔºöÂ∞ÜÊñáÊ°£Á∫≥ÂÖ•‰ª£Á†Å‰ªìÂ∫ìÔºå‰∏éÂÆûÁé∞ÂêåÊ≠•ÊºîËøõ</li>
<li><strong>Ê¥ªÊñáÊ°£Êú∫Âà∂</strong>ÔºöÂú®ÂÖ≥ÈîÆÊ®°ÂùóÊ∑ªÂä†Êû∂ÊûÑÂÆàÊä§ÊµãËØï</li>
</ol>
<hr>
<p><strong>ÂáÜÂàô10Ë¶ÅÁÇπ</strong>
‚úÖ <strong>‰ª∑ÂÄºËÆ§Áü•</strong></p>
<ul>
<li>Êû∂ÊûÑÊñáÊ°£ÊòØÂõ¢ÈòüÁöÑÊäÄÊúØÂÆ™Ê≥ïÔºåÁª¥Êä§ËÆ§Áü•‰∏ÄËá¥ÊÄß</li>
<li>ÈÅøÂÖç&quot;Âè£Âè£Áõ∏‰º†&quot;ÂØºËá¥ÁöÑÁü•ËØÜË°∞Âáè</li>
<li>‰∏∫Á≥ªÁªüÊºîËøõÊèê‰æõÂèØÈù†Âü∫Á∫ø</li>
</ul>
<p>‚ùå <strong>ËßÑÈÅøËØØÂå∫</strong></p>
<ul>
<li>Â∞ÜÊû∂ÊûÑÊñáÊ°£Á≠âÂêå‰∫éAPIÊñáÊ°£</li>
<li>Âõ†ËøΩÊ±ÇÂÆåÁæéËÄåÂª∂ËøüÊñáÊ°£Âåñ</li>
<li>ÂÖÅËÆ∏ÊñáÊ°£‰∏éÂÆûÁé∞ÈïøÊúüÂÅèÁ¶ª</li>
</ul>
<p><strong>ÁªàÊûÅÂêØÁ§∫</strong>Ôºö
Êû∂ÊûÑÊñáÊ°£‰∏çÊòØÊïèÊç∑ÁöÑÂØπÁ´ãÈù¢ÔºåËÄåÊòØÂ∑•Á®ã‰∏ì‰∏öÊÄßÁöÑ‰ΩìÁé∞„ÄÇÂÆÉÂ¶ÇÂêåËà™Êµ∑ÂõæÔºåËÆ©Âõ¢ÈòüÂú®Âø´ÈÄüËø≠‰ª£ÁöÑÊÉäÊ∂õÈ™áÊµ™‰∏≠‰øùÊåÅËà™ÂêëÔºåËÆ©ÊØèÊ¨°Êû∂ÊûÑÊºîËøõÈÉΩÊàê‰∏∫Á≤æÂøÉÁ≠ñÂàíÁöÑÂçáÁ∫ßÔºåËÄåÈùûÊÖå‰∏çÊã©Ë∑ØÁöÑÈÄÉ‰∫°„ÄÇ</p>
<h2 id="Á¨¨‰∏âÁ´†-ËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉ‰ª∑ÂÄº">Á¨¨‰∏âÁ´† ËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉ‰ª∑ÂÄº
</h2><p>ËÆøÈóÆËÄÖÔºàVisitorÔºâ„ÄÅÁ≠ñÁï•ÔºàStrategyÔºâ„ÄÅË£ÖÈ•∞Âô®ÔºàDecoratorÔºâ‚Äî‚ÄîËøô‰∫õËÆæËÆ°Ê®°ÂºèÂ∞ÜÂú®ÂêéÁª≠Á´†ËäÇÊ∑±ÂÖ•Êé¢ËÆ®„ÄÇ‰ΩÜÂú®ÈÄê‰∏ÄËß£Êûê‰πãÂâçÔºåÊàë‰ª¨ÈúÄÂÖàÁêÜËß£ËÆæËÆ°Ê®°ÂºèÁöÑÊú¨Ë¥®ÊÑè‰πâ„ÄÇÊú¨Á´†Â∞ÜÊè≠Á§∫ËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉÁâπÂæÅ„ÄÅÂ∫îÁî®‰ª∑ÂÄºÂèäÂÖ∂ÊôÆÈÅçÂ≠òÂú®ÊÄß„ÄÇ</p>
<hr>
<p><strong>ÂáÜÂàô11ÔºöÁêÜËß£ËÆæËÆ°Ê®°ÂºèÁöÑÊ†πÊú¨ÁõÆÁöÑ</strong></p>
<p>Âú®&quot;ÂáÜÂàô1ÔºöËÆ§ËØÜËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄß&quot;‰∏≠ÔºåÊàë‰ª¨Â∑≤ÊèêÂèäËÆæËÆ°Ê®°ÂºèÁöÑ‰ΩúÁî®Â±ÇÁ∫ß„ÄÇËÆæËÆ°Ê®°ÂºèÁöÑÊú¨Ë¥®Âú®‰∫éÔºö</p>
<ol>
<li><strong>Ê®°ÂºèÂëΩÂêçË°®ËææÊÑèÂõæ</strong>ÔºöÂ¶Ç&quot;Â∑•ÂéÇÊ®°Âºè&quot;Áõ¥ÊåáÂØπË±°ÂàõÂª∫ÈÄªËæëÁöÑÂ∞ÅË£Ö</li>
<li><strong>ÂºïÂÖ•Ëß£ËÄ¶ÊäΩË±°Â±Ç</strong>ÔºöÈÄöËøá‰∏≠Èó¥Â±ÇÈöîÁ¶ªÂèòÂåñÔºåÈôç‰ΩéÊ®°ÂùóÈó¥ËÄ¶Âêà</li>
<li><strong>‰πÖÁªèËÄÉÈ™åÁöÑËß£ÂÜ≥ÊñπÊ°à</strong>ÔºöÁªèÂ§öÂπ¥ÂÆûË∑µÈ™åËØÅÁöÑÈÄöÁî®ÈóÆÈ¢òÂ∫îÂØπÁ≠ñÁï•</li>
</ol>
<p>‰æãÂ¶ÇÔºåËßÇÂØüËÄÖÊ®°ÂºèÔºàObserverÔºâÈÄöËøáËß£ËÄ¶ÂèëÂ∏ÉËÄÖ‰∏éËÆ¢ÈòÖËÄÖÔºåÂÆûÁé∞‰∫ã‰ª∂È©±Âä®ÁöÑÊùæËÄ¶ÂêàÊû∂ÊûÑ„ÄÇ</p>
<hr>
<p><strong>ÂáÜÂàô12ÔºöË≠¶ÊÉïËÆæËÆ°Ê®°ÂºèËÆ§Áü•ËØØÂå∫</strong></p>
<p>Á†¥Èô§Â∏∏ËßÅËØØËß£Ôºö</p>
<ul>
<li>
<p>‚ùå <strong>ÈùûÂÆûÁé∞ÁªÜËäÇ</strong>ÔºöËÆæËÆ°Ê®°ÂºèÊòØÊû∂ÊûÑÂ±ÇÈù¢ÁöÑËìùÂõæÔºåËÄåÈùûÂÖ∑‰Ωì‰ª£Á†ÅÊ®°Êùø</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// ÈîôËØØËÆ§Áü•ÔºöÁ≠ñÁï•Ê®°ÂºèÂøÖÈ°ªÁî®ËôöÂáΩÊï∞ÂÆûÁé∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Strategy</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">execute</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Ê≠£Á°ÆÂÆûË∑µÔºöÁ≠ñÁï•ÂèØ‰ª•ÊòØÂáΩÊï∞ÊåáÈíà„ÄÅÊ®°ÊùøÂèÇÊï∞Á≠â
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Strategy</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Context</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Strategy</span> <span class="n">strategy_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">run</span><span class="p">()</span> <span class="p">{</span> <span class="n">strategy_</span><span class="p">();</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>‚ùå <strong>‰∏çÈôê‰∫éOOP</strong>ÔºöÂáΩÊï∞ÂºèÁºñÁ®ã‰∏≠ÂêåÊ†∑Â≠òÂú®Ê®°ÂºèÔºàÂ¶ÇÈó≠ÂåÖÂÆûÁé∞Áä∂ÊÄÅÊ®°ÂºèÔºâ</p>
</li>
<li>
<p>‚ùå <strong>ÈùûËØ≠Ë®ÄÁâπÊÄß</strong>ÔºöÊ®°ÂºèËß£ÂÜ≥ÁöÑÊòØÈÄöÁî®ËÆæËÆ°ÈóÆÈ¢òÔºå‰∏éËØ≠Ë®ÄËØ≠Ê≥ïÊó†ÂÖ≥</p>
</li>
</ul>
<hr>
<p><strong>ÂáÜÂàô13ÔºöËÆæËÆ°Ê®°ÂºèÊó†Â§Ñ‰∏çÂú®</strong></p>
<p>C++Ê†áÂáÜÂ∫ì‰∏≠ÁöÑÊ®°ÂºèÂ∫îÁî®ÂÆû‰æãÔºö</p>
<ol>
<li>
<p><strong>Ëø≠‰ª£Âô®Ê®°ÂºèÔºàIteratorÔºâ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">vec</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span><span class="o">=</span><span class="n">vec</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span><span class="o">!=</span><span class="n">vec</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>ÈÄÇÈÖçÂô®Ê®°ÂºèÔºàAdapterÔºâ</strong>
<code>std::stack</code>Âü∫‰∫é<code>deque/list</code>ÂÆûÁé∞Ê†àÊé•Âè£</p>
</li>
<li>
<p><strong>ÁªÑÂêàÊ®°ÂºèÔºàCompositeÔºâ</strong>
<code>std::filesystem::path</code>Áªü‰∏ÄÂ§ÑÁêÜÊñá‰ª∂‰∏éÁõÆÂΩïË∑ØÂæÑ</p>
</li>
</ol>
<hr>
<p><strong>ÂáÜÂàô14Ôºö‰ª•Ê®°ÂºèÂêçÁß∞‰º†ÈÄíËÆæËÆ°ÊÑèÂõæ</strong></p>
<p>Âú®‰ª£Á†Å‰∏≠ÊòæÂºè‰ΩøÁî®Ê®°ÂºèÂëΩÂêçÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// ÊòéÁ°ÆÂ£∞Êòé‰ΩøÁî®Â∑•ÂéÇÊ®°Âºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">WidgetFactory</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="n">create</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÈÄöËøáÁ±ªÂûãÂêç‰º†ËææËÆøÈóÆËÄÖÊ®°ÂºèÂ∫îÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">ElementVisitor</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">visit</span><span class="p">(</span><span class="n">ConcreteElement</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ºòÂäøÔºö</p>
<ul>
<li>ÊèêÂçá‰ª£Á†ÅËá™Ëß£ÈáäÊÄß</li>
<li>‰øÉËøõÂõ¢ÈòüËÆæËÆ°ÂÖ±ËØÜ</li>
<li>Êñπ‰æøÊû∂ÊûÑËØÑÂÆ°‰∏éÈáçÊûÑ</li>
</ul>
<hr>
<p><strong>ËÆæËÆ°Ê®°ÂºèÁöÑÁªàÊûÅ‰ª∑ÂÄº</strong></p>
<p>ËÆæËÆ°Ê®°ÂºèÊòØËΩØ‰ª∂Â∑•Á®ãÁöÑÁªèÈ™åÁªìÊô∂ÔºåÂÖ∂Ê†∏ÂøÉ‰ª∑ÂÄºÂú®‰∫éÔºö</p>
<ul>
<li><strong>Êèê‰æõËÆæËÆ°ËØçÊ±áË°®</strong>ÔºöÂ¶Ç&quot;ÈááÁî®ËßÇÂØüËÄÖÊ®°ÂºèÂ§ÑÁêÜ‰∫ã‰ª∂ÈÄöÁü•&quot;</li>
<li><strong>Â∞ÅË£ÖÂèòÂåñÁª¥Â∫¶</strong>ÔºöÂ∞ÜÊòìÂèòÈÉ®ÂàÜÈöîÁ¶ªÂú®Ê®°ÂºèÊäΩË±°Â±ÇÂêé</li>
<li><strong>‰øÉËøõÊû∂ÊûÑÊºîËøõ</strong>ÔºöÈÄöËøáÊ®°ÂºèÁªÑÂêàÂ∫îÂØπÈúÄÊ±ÇÂèòÂåñ</li>
</ul>
<p>ÁêÜËß£Ê®°ÂºèÊú¨Ë¥®ÔºåÊñπËÉΩË∂ÖË∂äÂΩ¢ÂºèÊ®°‰ªøÔºåÂÆûÁé∞ÁÅµÊ¥ª‰ºòÈõÖÁöÑÊû∂ÊûÑËÆæËÆ°„ÄÇÊé•‰∏ãÊù•ÁöÑÁ´†ËäÇÂ∞ÜÊ∑±ÂÖ•Ëß£ÊûêÂêÑÊ®°ÂºèÂú®Áé∞‰ª£C++‰∏≠ÁöÑÂÆûË∑µÂ∫îÁî®„ÄÇ</p>
<h3 id="ÂáÜÂàô-11ÁêÜËß£ËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉ‰ª∑ÂÄº">ÂáÜÂàô 11ÔºöÁêÜËß£ËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉ‰ª∑ÂÄº
</h3><p>ÊúâÂæàÂ§ßÂèØËÉΩÊÇ®‰πãÂâçÂê¨ËØ¥ËøáËÆæËÆ°Ê®°ÂºèÔºåÂπ∂‰∏îÂú®ÊÇ®ÁöÑÁºñÁ®ãËÅå‰∏öÁîüÊ∂Ø‰∏≠ÂæàÊúâÂèØËÉΩ‰ΩøÁî®ËøáÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∫õ„ÄÇ</p>
<p>ËÆæËÆ°Ê®°ÂºèÂπ∂‰∏çÊòØÊñ∞‰∫ãÁâ©ÔºöÂÆÉ‰ª¨Ëá≥Â∞ëËá™‚ÄúÂõõ‰∫∫ÁªÑ‚ÄùÔºàGang of FourÔºåÁÆÄÁß∞GoFÔºâÂú®1994Âπ¥ÂèëÂ∏É‰ªñ‰ª¨ÁöÑËÆæËÆ°Ê®°Âºè‰π¶Á±ç‰ª•Êù•Â∞±Â≠òÂú®‰∫Ü„ÄÇ</p>
<p>Â∞ΩÁÆ°‰∏ÄÁõ¥ÊúâÊâπËØÑËÄÖÔºå‰ΩÜËÆæËÆ°Ê®°ÂºèÁöÑÁâπÊÆä‰ª∑ÂÄºÂú®Êï¥‰∏™ËΩØ‰ª∂Ë°å‰∏ö‰∏≠ÂæóÂà∞‰∫ÜÂπøÊ≥õËÆ§ÂèØ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ∞ΩÁÆ°ËÆæËÆ°Ê®°ÂºèÂ∑≤ÁªèÂ≠òÂú®ÂæàÈïøÊó∂Èó¥Âπ∂‰∏îÈùûÂ∏∏ÈáçË¶ÅÔºåÂ∞ΩÁÆ°ÁßØÁ¥Ø‰∫ÜÂ§ßÈáèÁöÑÁü•ËØÜÂíåÊô∫ÊÖßÔºåÂú®C++Á§æÂå∫‰∏≠‰ªçÁÑ∂Â≠òÂú®ËÆ∏Â§öÂÖ≥‰∫éËÆæËÆ°Ê®°ÂºèÁöÑËØØËß£„ÄÇ</p>
<p>Ë¶ÅÊúâÊïàÂú∞‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÔºåÁ¨¨‰∏ÄÊ≠•ÈúÄË¶ÅÁêÜËß£‰ªÄ‰πàÊòØËÆæËÆ°Ê®°Âºè„ÄÇËÆæËÆ°Ê®°ÂºèÂÖ∑Êúâ‰ª•‰∏ãÁâπÂæÅÔºö</p>
<ul>
<li><strong>Êúâ‰∏Ä‰∏™ÂêçÁß∞</strong>ÔºöÊØè‰∏™ËÆæËÆ°Ê®°ÂºèÈÉΩÊúâ‰∏Ä‰∏™ÊòéÁ°ÆÁöÑÂêçÁß∞ÔºåËøôÊúâÂä©‰∫éÂºÄÂèë‰∫∫ÂëòÂø´ÈÄüËØÜÂà´ÂíåËÆ®ËÆ∫ËØ•Ê®°Âºè„ÄÇ</li>
<li><strong>Â∏¶ÊúâÊÑèÂõæ</strong>ÔºöËÆæËÆ°Ê®°Âºè‰∏ç‰ªÖ‰ªÖÊòØËß£ÂÜ≥Êüê‰∏™ÈóÆÈ¢òÁöÑÊäÄÊúØÊâãÊÆµÔºåÂÆÉËøò‰º†Ëææ‰∫Ü‰∏Ä‰∏™ÁâπÂÆöÁöÑËÆæËÆ°ÊÑèÂõæÊàñÁõÆÊ†á„ÄÇ<br/>‰æãÂ¶ÇÔºåÂçï‰æãÊ®°ÂºèÁöÑÊÑèÂõæÊòØÁ°Æ‰øù‰∏Ä‰∏™Á±ªÂè™Êúâ‰∏Ä‰∏™ÂÆû‰æãÔºåÂπ∂Êèê‰æõ‰∏Ä‰∏™ÂÖ®Â±ÄËÆøÈóÆÁÇπ„ÄÇ</li>
<li><strong>ÂºïÂÖ•‰∏Ä‰∏™ÊäΩË±°</strong>ÔºöËÆæËÆ°Ê®°ÂºèÈÄöËøáÂÆö‰πâÊé•Âè£„ÄÅÂü∫Á±ªÊàñÂÖ∂‰ªñÂΩ¢ÂºèÁöÑÊäΩË±°Êù•Ëß£ÂÜ≥ÈóÆÈ¢ò„ÄÇ<br/>ËøôÁßçÊäΩË±°‰ΩøÂæó‰ª£Á†ÅÊõ¥Âä†ÁÅµÊ¥ªÂíåÂèØÊâ©Â±ïÔºåËÉΩÂ§üÈÄÇÂ∫îÊú™Êù•ÁöÑÂèòÂåñ„ÄÇ</li>
<li><strong>ÁªèËøáÈ™åËØÅ</strong>ÔºöËÆæËÆ°Ê®°Âºè‰∏çÊòØÂá≠Á©∫ÊÉ≥Ë±°Âá∫Êù•ÁöÑÔºåËÄåÊòØÂü∫‰∫éÂÆûÈôÖÈ°πÁõÆ‰∏≠ÁöÑÁªèÈ™åÂíåÊúÄ‰Ω≥ÂÆûË∑µÂèëÂ±ïËÄåÊù•ÁöÑ„ÄÇ<br/>ÂÆÉ‰ª¨Â∑≤ÁªèË¢´ËØÅÊòéÂú®Â§öÁßçÂú∫ÊôØ‰∏ãÊúâÊïàÔºåÂπ∂‰∏îÂèØ‰ª•Âú®‰∏çÂêåÁöÑÈ°πÁõÆ‰∏≠Â§çÁî®„ÄÇ</li>
</ul>
<p><strong>ËÆæËÆ°Ê®°ÂºèÊúâ‰∏Ä‰∏™ÂêçÁß∞</strong></p>
<p>È¶ñÂÖàÔºåËÆæËÆ°Ê®°ÂºèÊúâ‰∏Ä‰∏™ÂêçÁß∞„ÄÇËôΩÁÑ∂ËøôÂê¨Ëµ∑Êù•ÈùûÂ∏∏ÊòæËÄåÊòìËßÅ‰∏îÂøÖË¶ÅÔºå‰ΩÜÁ°ÆÂÆûÊòØËÆæËÆ°Ê®°ÂºèÁöÑ‰∏Ä‰∏™Âü∫Êú¨Â±ûÊÄß„ÄÇ</p>
<p>ÂÅáËÆæÊàë‰ª¨‰∏§‰∏™‰∫∫Âú®‰∏Ä‰∏™È°πÁõÆ‰∏äÂêà‰ΩúÔºåÂπ∂Ë¢´ÂàÜÈÖçËß£ÂÜ≥‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p>ÊÉ≥Ë±°‰∏Ä‰∏ãÔºåÂ¶ÇÊûúÊàëÂØπÊÇ®ËØ¥Ôºö‚ÄúÊàë‰ºöÁî®‰∏Ä‰∏™VisitorÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ‚Äù Ëøô‰∏ç‰ªÖÂëäËØâ‰∫ÜÊÇ®ÊàëÁêÜËß£ÁöÑÂÆûÈôÖÈóÆÈ¢òÊòØ‰ªÄ‰πàÔºåËøòÁªôÊÇ®Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÖ≥‰∫éÊàëÊèêÂá∫ÁöÑËß£ÂÜ≥ÊñπÊ°àÁöÑÁ≤æÁ°ÆÊ¶ÇÂøµ„ÄÇ</p>
<p>ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞‰ΩøÊàë‰ª¨ËÉΩÂ§üÂú®ÈùûÂ∏∏È´òÁöÑÂ±ÇÊ¨°‰∏äËøõË°åÊ≤üÈÄöÔºåÂπ∂Áî®ÊûÅÂ∞ëÁöÑËØçÊ±á‰º†ËææÂ§ßÈáè‰ø°ÊÅØÔºö</p>
<p><strong>Êàë</strong>ÔºöÊàë‰ºöÁî®‰∏Ä‰∏™VisitorÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ<br/>
<strong>‰Ω†</strong>ÔºöÊàë‰∏çÁ°ÆÂÆö„ÄÇÊàëËÄÉËôë‰ΩøÁî®‰∏Ä‰∏™Strategy„ÄÇ<br/>
<strong>Êàë</strong>ÔºöÊòØÁöÑÔºåÊÇ®ÂèØËÉΩÊúâÈÅìÁêÜ„ÄÇ‰ΩÜÊòØÁî±‰∫éÊàë‰ª¨ÈúÄË¶ÅÈ¢ëÁπÅÊâ©Â±ïÊìç‰ΩúÔºåÊàë‰ª¨ÂèØËÉΩËøòÈúÄË¶ÅËÄÉËôë‰ΩøÁî®‰∏Ä‰∏™Decorator„ÄÇ</p>
<p>ÈÄöËøá‰ªÖ‰ªÖ‰ΩøÁî®Visitor„ÄÅStrategyÂíåDecoratorËøô‰∫õÂêçÁß∞ÔºåÊàë‰ª¨Â∞±ËÆ®ËÆ∫‰∫Ü‰ª£Á†ÅÂ∫ìÁöÑÊºîÂèòÔºåÂπ∂ÊèèËø∞‰∫ÜÊàë‰ª¨ÊúüÊúõÂú®Êú™Êù•Âá†Âπ¥ÂÜÖÂ¶Ç‰ΩïÊâ©Â±ïÂíåÂèòÂåñ„ÄÇ</p>
<p>Â¶ÇÊûúÊ≤°ÊúâËøô‰∫õÂêçÁß∞ÔºåÊàë‰ª¨Â∞ÜÂæàÈöæË°®ËææÊàë‰ª¨ÁöÑÊÉ≥Ê≥ïÔºö</p>
<p><strong>Êàë</strong>ÔºöÊàëËÆ§‰∏∫Êàë‰ª¨Â∫îËØ•ÂàõÂª∫‰∏Ä‰∏™Á≥ªÁªüÔºåÂÖÅËÆ∏Êàë‰ª¨Âú®‰∏çÂèçÂ§ç‰øÆÊîπÁé∞ÊúâÁ±ªÂûãÁöÑÊÉÖÂÜµ‰∏ãÊâ©Â±ïÊìç‰Ωú„ÄÇ<br/>
<strong>‰Ω†</strong>ÔºöÊàë‰∏çÁ°ÆÂÆö„ÄÇ‰∏éÂÖ∂Â¢ûÂä†Êñ∞ÁöÑÊìç‰ΩúÔºåÊàëÈ¢ÑËÆ°‰ºöÈ¢ëÁπÅÊ∑ªÂä†Êñ∞ÁöÑÁ±ªÂûã„ÄÇ<br/>Âõ†Ê≠§ÔºåÊàëÊõ¥ÂÄæÂêë‰∫é‰∏ÄÁßçÂÖÅËÆ∏ÊàëËΩªÊùæÊ∑ªÂä†Á±ªÂûãÁöÑËß£ÂÜ≥ÊñπÊ°àÔºå‰∏∫‰∫ÜÂáèÂ∞ë‰∏éÂÆûÁé∞ÁªÜËäÇÁöÑËÄ¶ÂêàÔºàËøôÊòØÂèØ‰ª•È¢ÑÊúüÁöÑÔºâÔºåÊàëÂª∫ËÆÆÂºïÂÖ•‰∏Ä‰∏™Âèò‰ΩìÁÇπÊù•ÊèêÂèñÁé∞ÊúâÁ±ªÂûãÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇ<br/>
<strong>Êàë</strong>ÔºöÊòØÁöÑÔºåÊÇ®ÂèØËÉΩÊúâÈÅìÁêÜ„ÄÇ‰ΩÜÊòØÁî±‰∫éÊàë‰ª¨ÈúÄË¶ÅÈ¢ëÁπÅÊâ©Â±ïÊìç‰ΩúÔºåÊàë‰ª¨ÂèØËÉΩÈúÄË¶ÅËÆæËÆ°Á≥ªÁªüÔºå‰ª•‰æøËÉΩÂ§üËΩªÊùæÊûÑÂª∫ÂíåÈáçÁî®ÁªôÂÆöÁöÑÂÆûÁé∞„ÄÇ<br/></p>
<p>ÁúãÂà∞Âå∫Âà´‰∫ÜÂêóÔºüÊÑüËßâÂà∞Âå∫Âà´‰∫ÜÂêóÔºüÊ≤°ÊúâÂêçÁß∞ÔºåÊàë‰ª¨ÂøÖÈ°ªÊòéÁ°ÆÂú∞ËÆ®ËÆ∫Êõ¥Â§öÁöÑÁªÜËäÇ„ÄÇ</p>
<p>ÊòæÁÑ∂ÔºåËøôÁßçÁ≤æÁ°ÆÁöÑÊ≤üÈÄöÂè™ÊúâÂú®Êàë‰ª¨ÂØπËÆæËÆ°Ê®°ÂºèÊúâÁõ∏ÂêåÁöÑÁêÜËß£Êó∂ÊâçÂèØËÉΩÂÆûÁé∞„ÄÇ<br/>ËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πà‰∫ÜËß£ËÆæËÆ°Ê®°ÂºèÂπ∂ËÆ®ËÆ∫ÂÆÉ‰ª¨Â¶ÇÊ≠§ÈáçË¶ÅÁöÑÂéüÂõ†„ÄÇ</p>
<p><strong>ËÆæËÆ°Ê®°ÂºèÂ∏¶ÊúâÊÑèÂõæ</strong></p>
<p>ÈÄöËøá‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞ÔºåÊÇ®ÂèØ‰ª•ÁÆÄÊ¥ÅÂú∞Ë°®ËææÊÇ®ÁöÑÊÑèÂõæÔºåÂπ∂ÈôêÂà∂ÂèØËÉΩÁöÑËØØËß£„ÄÇ</p>
<p>ËøôÂºïÂá∫‰∫ÜËÆæËÆ°Ê®°ÂºèÁöÑÁ¨¨‰∫å‰∏™Â±ûÊÄßÔºöÊÑèÂõæ„ÄÇËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞‰º†Ëææ‰∫ÜÂÆÉÁöÑÊÑèÂõæ„ÄÇ</p>
<p>Â¶ÇÊûúÊÇ®‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞ÔºåÊÇ®ÈöêÂê´Âú∞Ë°®Ëææ‰∫ÜÊÇ®ËÆ§‰∏∫ÁöÑÈóÆÈ¢ò‰ª•ÂèäÊÇ®ÊâÄÁúãÂà∞ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºå</p>
<p>Â∏åÊúõÊÇ®Â∑≤ÁªèÊÑèËØÜÂà∞ÔºåÂú®Êàë‰ª¨ÁÆÄÁü≠ÁöÑÂØπËØù‰∏≠ÔºåÊàë‰ª¨Âπ∂Ê≤°ÊúâËÆ®ËÆ∫‰ªª‰ΩïÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÔºåÊàë‰ª¨Ê≤°ÊúâË∞àËÆ∫ÂÆûÁé∞ÁªÜËäÇ„ÄÅ‰ªª‰ΩïÁâπÊÄßÊàñ‰ªª‰ΩïÁâπÂÆöÁöÑC++Ê†áÂáÜÔºåÊàë‰ª¨ÁîöËá≥Ê≤°ÊúâËÆ®ËÆ∫‰ªª‰ΩïÁâπÂÆöÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºåËØ∑‰∏çË¶ÅÂÅáËÆæÈÄöËøáÁªôÊÇ®‰∏Ä‰∏™ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞ÔºåÊàëÂ∞±ÈöêÂê´Âú∞ÂëäËØâ‰∫ÜÊÇ®Â¶Ç‰ΩïÂÆûÁé∞Ëß£ÂÜ≥ÊñπÊ°àÔºåËøô‰∏çÊòØËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑ„ÄÇ</p>
<p>Áõ∏ÂèçÔºåÂêçÁß∞Â∫îËØ•ÂëäËØâÊÇ®ÊàëÊèêËÆÆÁöÑÁªìÊûÑ„ÄÅÊàëËÆ°ÂàíÂ¶Ç‰ΩïÁÆ°ÁêÜ‰æùËµñÂÖ≥Á≥ª‰ª•ÂèäÊàëÂØπÁ≥ªÁªüÊºîÂåñÁöÑÊúüÊúõÔºåËøôÂ∞±ÊòØÊÑèÂõæ„ÄÇ</p>
<p>ÂÆûÈôÖ‰∏äÔºåËÆ∏Â§öËÆæËÆ°Ê®°ÂºèÂÖ∑ÊúâÁ±ª‰ººÁöÑÁªìÊûÑÔºåÂú®GoFÔºàÂõõ‰∫∫ÁªÑÔºâÁöÑ‰π¶‰∏≠ÔºåËÆ∏Â§öËÆæËÆ°Ê®°ÂºèÁúãËµ∑Êù•ÈùûÂ∏∏Áõ∏‰ººÔºåËøôÂΩìÁÑ∂‰ºöÂºïËµ∑ÂæàÂ§öÂõ∞ÊÉëÂíåÈóÆÈ¢ò„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå‰ªéÁªìÊûÑ‰∏äÁúãÔºåStrategyÔºàÁ≠ñÁï•Ôºâ„ÄÅCommandÔºàÂëΩ‰ª§ÔºâÂíåBridgeÔºàÊ°•Êé•ÔºâËÆæËÆ°Ê®°ÂºèÂá†‰πéÊ≤°Êúâ‰ªÄ‰πàÂå∫Âà´„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂÆÉ‰ª¨ÁöÑÊÑèÂõæÈùûÂ∏∏‰∏çÂêåÔºåÂõ†Ê≠§ÊÇ®‰ºöÁî®ÂÆÉ‰ª¨Êù•Ëß£ÂÜ≥‰∏çÂêåÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p>Ê≠£Â¶ÇÊÇ®Â∞ÜÂú®Êé•‰∏ãÊù•ÁöÑÁ´†ËäÇ‰∏≠ÁöÑÂêÑÁßçÁ§∫‰æã‰∏≠ÁúãÂà∞ÁöÑÈÇ£Ê†∑ÔºåÂá†‰πéÊÄªÊòØÊúâÂ§öÁßç‰∏çÂêåÁöÑÂÆûÁé∞ÂèØ‰ª•ÈÄâÊã©„ÄÇ</p>
<p><strong>ËÆæËÆ°Ê®°ÂºèÂºïÂÖ•ÊäΩË±°</strong></p>
<p>ËÆæËÆ°Ê®°ÂºèÊÄªÊòØÈÄöËøáÂºïÂÖ•ÊüêÁßçÂΩ¢ÂºèÁöÑÊäΩË±°Êù•ÂáèÂ∞ë‰æùËµñÔºåËøôÊÑèÂë≥ÁùÄËÆæËÆ°Ê®°ÂºèÂßãÁªàÂÖ≥Ê≥®‰∫éÁÆ°ÁêÜËΩØ‰ª∂ÂÆû‰Ωì‰πãÈó¥ÁöÑ‰∫§‰∫íÂíåËß£ËÄ¶ËΩØ‰ª∂ÁöÑ‰∏çÂêåÈÉ®ÂàÜ„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåËÄÉËôëGoFÔºàÂõõ‰∫∫ÁªÑÔºâÊúÄÂàùÁöÑËÆæËÆ°Ê®°Âºè‰πã‰∏Ä <strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè ÔºàStrategyÔºâ</strong></p>
<p>‰∏çÊ∑±ÂÖ•ÁªÜËäÇÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÈÄöËøáÂºïÂÖ•‰∏Ä‰∏™Âêç‰∏∫‚ÄúStrategy‚ÄùÁöÑÂü∫Á±ªÊù•Êèê‰æõÊäΩË±°„ÄÇ<br/>Ëøô‰∏™Âü∫Á±ªÂ∞ÜÁ≠ñÁï•Áî®Êà∑ÔºàÊû∂ÊûÑÈ´òÂ±Ç‰∏≠ÁöÑContextÁ±ªÔºâ‰∏éÂÖ∑‰ΩìÁ≠ñÁï•ÁöÑÂÆûÁé∞ÁªÜËäÇÔºàÊû∂ÊûÑ‰ΩéÂ±Ç‰∏≠ÁöÑConcreteStrategyAÂíåConcreteStrategyBÔºâËß£ËÄ¶„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÁ≠ñÁï•Ê®°ÂºèÁ¨¶ÂêàËÆæËÆ°Ê®°ÂºèÁöÑÁâπÊÄß„ÄÇ</p>
<p>Âè¶‰∏Ä‰∏™Á±ª‰ººÁöÑ‰æãÂ≠êÊòØ <strong>Â∑•ÂéÇÊñπÊ≥ïËÆæËÆ°Ê®°Âºè</strong>ÔºåÂ∑•ÂéÇÊñπÊ≥ïÁöÑÊÑèÂõæÊòØËß£ËÄ¶ÂØπË±°ÂàõÂª∫ÁöÑÂÖ∑‰Ωì‰∫ßÂìÅ„ÄÇ</p>
<p>‰∏∫Ê≠§ÔºåÂÆÉÂºïÂÖ•‰∫Ü‰∏§‰∏™ÊäΩË±°ÔºöProductÂíåCreatorÂü∫Á±ªÔºåËøô‰∫õÂü∫Á±ªÂú®Êû∂ÊûÑÁöÑÈ´òÂ±Ç‰∏≠Â≠òÂú®ÔºåÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÁªÜËäÇÁî±<strong>ConcreteProduct</strong> Âíå <strong>ConcreteCreator</strong>Á±ªÊèê‰æõÔºåÂÆÉ‰ª¨‰Ωç‰∫éÊû∂ÊûÑÁöÑ‰ΩéÂ±Ç„ÄÇ</p>
<p>ÈÄöËøáËøôÁßçÊû∂ÊûÑÁªìÊûÑÔºåÂ∑•ÂéÇÊñπÊ≥ï‰πüÁ¨¶ÂêàËÆæËÆ°Ê®°ÂºèÁöÑÊ†áÂáÜÔºöÂÆÉÊúâ‰∏Ä‰∏™ÂêçÁß∞„ÄÅËß£ËÄ¶ÁöÑÊÑèÂõæÔºåÂπ∂‰∏îÂºïÂÖ•‰∫ÜÊäΩË±°„ÄÇ</p>
<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåËÆæËÆ°Ê®°ÂºèÂºïÂÖ•ÁöÑÊäΩË±°Âπ∂‰∏ç‰∏ÄÂÆöÊòØÈÄöËøáÂü∫Á±ªÂÆûÁé∞ÁöÑÔºåÊ≠£Â¶ÇÊàëÂú®Êé•‰∏ãÊù•ÁöÑÈÉ®ÂàÜÂíåÁ´†ËäÇ‰∏≠‰ºöÂ±ïÁ§∫ÁöÑÈÇ£Ê†∑ÔºåÊäΩË±°ÂèØ‰ª•ÈÄöËøáÂ§öÁßçÊñπÂºèÂºïÂÖ•Ôºå‰æãÂ¶ÇÈÄöËøáÊ®°ÊùøÊàñÁÆÄÂçïÁöÑÂáΩÊï∞ÈáçËΩΩ„ÄÇ</p>
<p>ÂÜçÊ¨°Âº∫Ë∞ÉÔºåËÆæËÆ°Ê®°ÂºèÂπ∂‰∏çÊöóÁ§∫‰ªª‰ΩïÁâπÂÆöÁöÑÂÆûÁé∞„ÄÇ</p>
<p>‰Ωú‰∏∫Âèç‰æãÔºåËÆ©Êàë‰ª¨ËÄÉËôë‰∏Ä‰∏ã<code>std::make_unique()</code>ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">std</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span><span class="p">...</span> <span class="n">Args</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl">	<span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">make_unique</span><span class="p">(</span> <span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">args</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace std
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®C++Á§æÂå∫‰∏≠ÔºåÊàë‰ª¨ÁªèÂ∏∏Ë∞àËÆ∫<code>std::make_unique()</code>ÂáΩÊï∞‰Ωú‰∏∫‰∏Ä‰∏™Â∑•ÂéÇÂáΩÊï∞ÔºåÈáçË¶ÅÁöÑÊòØË¶ÅÊ≥®ÊÑèÔºåÂ∞ΩÁÆ°ÊúØËØ≠‚ÄúÂ∑•ÂéÇÂáΩÊï∞‚ÄùÁªô‰∫∫‰∏ÄÁßç<code>std::make_unique()</code>ÊòØÂ∑•ÂéÇÊñπÊ≥ïËÆæËÆ°Ê®°ÂºèÁöÑ‰∏Ä‰∏™‰æãÂ≠êÁöÑÂç∞Ë±°Ôºå‰ΩÜËøôÁßçÂç∞Ë±°ÊòØÈîôËØØÁöÑ„ÄÇ</p>
<p>ËÆæËÆ°Ê®°ÂºèÈÄöËøáÂºïÂÖ•ÊäΩË±°Êù•Â∏ÆÂä©ÊÇ®Ëß£ËÄ¶ÔºåËøôÂÖÅËÆ∏ÊÇ®Ëá™ÂÆö‰πâÂπ∂Êé®ËøüÂÆûÁé∞ÁªÜËäÇ„ÄÇ</p>
<p>ÁâπÂà´ÊòØÔºåÂ∑•ÂéÇÊñπÊ≥ïËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæÊòØ‰∏∫ÂØπË±°ÂÆû‰æãÂåñÂºïÂÖ•‰∏Ä‰∏™Ëá™ÂÆö‰πâÁÇπÔºå<br/><code>std::make_unique()</code>Âπ∂Ê≤°ÊúâÊèê‰æõËøôÊ†∑ÁöÑËá™ÂÆö‰πâÁÇπÔºåÂ¶ÇÊûúÊÇ®‰ΩøÁî®<code>std::make_unique()</code>Ôºå‰Ω†Áü•ÈÅì‰Ω†‰ºöÂæóÂà∞‰∏Ä‰∏™ÊåáÂêë‰Ω†ËØ∑Ê±ÇÁ±ªÂûãÁöÑ<code>std::unique_ptr</code>ÔºåÂπ∂‰∏îÂÆû‰æãÂ∞ÜÈÄöËøá<code>new</code>ÁîüÊàêÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// ËøôÂ∞ÜÈÄöËøáË∞ÉÁî® &#39;new&#39; ÂàõÂª∫‰∏Ä‰∏™ &#39;Widget&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">auto</span> <span class="n">ptr</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span><span class="p">(</span> <span class="cm">/* ‰∏Ä‰∫õ Widget ÂèÇÊï∞ */</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫é<code>std::make_unique()</code>Ê≤°Êúâ‰∏∫ÊÇ®Êèê‰æõ‰ªª‰ΩïËá™ÂÆö‰πâË°å‰∏∫ÁöÑÊñπÂºèÔºåÂÆÉÊó†Ê≥ïÂ∏ÆÂä©ÂáèÂ∞ëÂÆû‰Ωì‰πãÈó¥ÁöÑËÄ¶ÂêàÔºåÂõ†Ê≠§‰∏çËÉΩÊª°Ë∂≥ËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºå<code>std::make_unique()</code>ÊòØÈíàÂØπÁâπÂÆöÈóÆÈ¢òÁöÑ‰∏ÄÁßçÂ∏∏ËßÅËß£ÂÜ≥ÊñπÊ°àÔºåÊç¢Âè•ËØùËØ¥ÔºåÂÆÉÊòØ‰∏ÄÁßçÊ®°ÂºèÔºå‰ΩÜÂÆÉ‰∏çÊòØËÆæËÆ°Ê®°ÂºèÔºåËÄåÊòØÂÆûÁé∞Ê®°Âºè„ÄÇ</p>
<p>ÂÆÉÊòØÂ∞ÅË£ÖÂÆûÁé∞ÁªÜËäÇÔºàÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÁîüÊàê‰∏Ä‰∏™WidgetÂÆû‰æãÔºâÁöÑÊµÅË°åËß£ÂÜ≥ÊñπÊ°àÔºå‰ΩÜÂÆÉÂπ∂Êú™‰ªéÊÇ®Ëé∑ÂæóÁöÑÂÜÖÂÆπÊàñÂ¶Ç‰ΩïÂàõÂª∫ÂÆÉËøõË°åÊäΩË±°„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂÆÉÂ±û‰∫éÂÆûÁé∞ÁªÜËäÇÁ∫ßÂà´ÔºåËÄå‰∏çÊòØËΩØ‰ª∂ËÆæËÆ°Á∫ßÂà´„ÄÇ</p>
<p>ÊäΩË±°ÁöÑÂºïÂÖ•ÊòØËß£ËÄ¶ËΩØ‰ª∂ÂÆû‰Ωì„ÄÅËÆæËÆ°ÂèòÊõ¥ÂíåÊâ©Â±ïÁöÑÂÖ≥ÈîÆÔºå<br/><code>std::make_unique()</code>ÂáΩÊï∞Ê®°Êùø‰∏≠Ê≤°Êúâ‰ªª‰ΩïÊäΩË±°ÔºåÂõ†Ê≠§ÊÇ®Êó†Ê≥ïÊâ©Â±ïÂÖ∂ÂäüËÉΩÔºàÁîöËá≥Êó†Ê≥ïÊ≠£Á°ÆÂú∞ÈáçËΩΩÊàñÁâπÂåñÔºâ„ÄÇ</p>
<p>Áõ∏ÊØî‰πã‰∏ãÔºåÂ∑•ÂéÇÊñπÊ≥ïËÆæËÆ°Ê®°ÂºèÁ°ÆÂÆûÊèê‰æõ‰∫ÜÂÖ≥‰∫éÂàõÂª∫‰ªÄ‰πà‰ª•ÂèäÂ¶Ç‰ΩïÂàõÂª∫ÔºàÂåÖÊã¨ÂÆû‰æãÂåñÂâçÂêéÁöÑË°å‰∏∫ÔºâÁöÑÊäΩË±°„ÄÇ<br/>Áî±‰∫éËøôÁßçÊäΩË±°Ôºå‰Ω†ÂèØ‰ª•Âú®‰ª•ÂêéÁºñÂÜôÊñ∞ÁöÑÂ∑•ÂéÇÔºåËÄåÊó†ÈúÄÊõ¥ÊîπÁé∞Êúâ‰ª£Á†Å„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËÆæËÆ°Ê®°ÂºèÂ∏ÆÂä©‰Ω†Ëß£ËÄ¶ÂíåÊâ©Â±ï‰Ω†ÁöÑËΩØ‰ª∂ÔºåËÄå<code>std::make_unique()</code>Âè™ÊòØ‰∏Ä‰∏™ÂÆûÁé∞Ê®°Âºè„ÄÇ</p>
<p><strong>ËÆæËÆ°Ê®°ÂºèÂ∑≤Ë¢´ËØÅÊòéÊúâÊïà</strong></p>
<p>ÊúÄÂêé‰ΩÜÂêåÊ†∑ÈáçË¶ÅÁöÑÊòØÔºåËÆæËÆ°Ê®°ÂºèÁªèËøáÂ§öÂπ¥È™åËØÅÔºåÂõõ‰∫∫ÁªÑÔºàGang of FourÔºâÂπ∂Ê≤°ÊúâÊî∂ÈõÜÊâÄÊúâÂèØËÉΩÁöÑËß£ÂÜ≥ÊñπÊ°àÔºå</p>
<p>Âè™ÊúâÈÇ£‰∫õÂú®‰∏çÂêå‰ª£Á†ÅÂ∫ì‰∏≠Â∏∏Áî®‰ª•Ëß£ÂÜ≥Áõ∏ÂêåÈóÆÈ¢òÁöÑÊñπÊ°àÔºàÂ∞ΩÁÆ°ÂÆûÁé∞ÂèØËÉΩÊúâÊâÄ‰∏çÂêåÔºâÔºå</p>
<p>Âõ†Ê≠§Ôºå‰∏Ä‰∏™Ëß£ÂÜ≥ÊñπÊ°àÂøÖÈ°ªÂ§öÊ¨°ËØÅÊòéÂÖ∂‰ª∑ÂÄºÔºåÊâçËÉΩË¢´ËßÜ‰∏∫‰∏ÄÁßçÊ®°Âºè„ÄÇ</p>
<p><strong>ÊÄªÁªì‰∏Ä‰∏ã</strong>ÔºöËÆæËÆ°Ê®°ÂºèÊòØ‰∏ÄÁßçÁªèËøáÈ™åËØÅ„ÄÅÊúâÂêçÁß∞ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÂÆÉË°®Ëææ‰∫Ü‰∏Ä‰∏™ÈùûÂ∏∏ÂÖ∑‰ΩìÁöÑÊÑèÂõæ„ÄÇ</p>
<p>ÂÆÉÂºïÂÖ•ÊüêÁßçÂΩ¢ÂºèÁöÑÊäΩË±°ÔºåÊúâÂä©‰∫éËß£ËÄ¶ËΩØ‰ª∂ÂÆû‰ΩìÔºå‰ªéËÄåÂ∏ÆÂä©ÁÆ°ÁêÜËøô‰∫õÂÆû‰Ωì‰πãÈó¥ÁöÑ‰∫§‰∫íÔºåÊ≠£Â¶ÇÊàë‰ª¨Â∫îËØ•‰ΩøÁî®‚ÄúËÆæËÆ°‚Äù‰∏ÄËØçÊù•Ë°®Á§∫ÁÆ°ÁêÜÂíåËß£ËÄ¶‰æùËµñÂÖ≥Á≥ªÁöÑËâ∫ÊúØÔºàÂèÇËßÅ‚ÄúÂáÜÂàô1ÔºöÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄß‚ÄùÔºâÔºåÊàë‰ª¨‰πüÂ∫îËØ•ÂáÜÁ°Æ‰∏îÊúâÁõÆÁöÑÂú∞‰ΩøÁî®‚ÄúËÆæËÆ°Ê®°Âºè‚ÄùËøô‰∏ÄÊúØËØ≠„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>ÁêÜËß£ËÆæËÆ°Ê®°ÂºèÊòØÁªèËøáÈ™åËØÅÁöÑ„ÄÅÊúâÂêçÁß∞ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÂÖ∂ÊÑèÂõæÊòØËß£ËÄ¶„ÄÇ</li>
<li>ËÆ§ËØÜÂà∞ËÆæËÆ°Ê®°ÂºèÂºïÂÖ•ÊüêÁßçÂΩ¢ÂºèÁöÑÊäΩË±°„ÄÇ</li>
<li>ËÆ∞‰ΩèËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÊ†áÊòØËΩØ‰ª∂ËÆæËÆ°ÔºåÂç≥Â∏ÆÂä©ÁÆ°ÁêÜ‰æùËµñÂÖ≥Á≥ª„ÄÇ</li>
<li>Ê≥®ÊÑèÂå∫ÂàÜËÆæËÆ°Ê®°ÂºèÂíåÂÆûÁé∞Ê®°Âºè„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô12Ë≠¶ÊÉïËÆæËÆ°Ê®°ÂºèÁöÑËØØËß£">ÂáÜÂàô12ÔºöË≠¶ÊÉïËÆæËÆ°Ê®°ÂºèÁöÑËØØËß£
</h3><p>‰∏ä‰∏ÄËäÇÈáçÁÇπËß£Èáä‰∫ÜËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑÔºöÂêçÁß∞„ÄÅÊÑèÂõæÂíåÊüêÁßçÂΩ¢ÂºèÁöÑÊäΩË±°Áõ∏ÁªìÂêàÔºå‰ª•Ëß£ËÄ¶ËΩØ‰ª∂ÂÆû‰Ωì„ÄÇÁÑ∂ËÄåÔºåÊ≠£Â¶ÇÁêÜËß£‰ªÄ‰πàÊòØËÆæËÆ°Ê®°ÂºèÂæàÈáçË¶Å‰∏ÄÊ†∑ÔºåÁêÜËß£‰ªÄ‰πà‰∏çÊòØËÆæËÆ°Ê®°Âºè‰πüÂêåÊ†∑ÈáçË¶Å„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÂÖ≥‰∫éËÆæËÆ°Ê®°ÂºèÂ≠òÂú®‰∏Ä‰∫õÂ∏∏ËßÅÁöÑËØØËß£Ôºö</p>
<ul>
<li>Êúâ‰∫õ‰∫∫ËÆ§‰∏∫ËÆæËÆ°Ê®°ÂºèÊòØ‰∏ÄÁßçÁõÆÊ†áÔºåÂπ∂‰∏îÊòØÂÆûÁé∞ËâØÂ•ΩËΩØ‰ª∂Ë¥®ÈáèÁöÑ‰øùËØÅ„ÄÇ</li>
<li>Êúâ‰∫õ‰∫∫ËÆ§‰∏∫ËÆæËÆ°Ê®°ÂºèÂü∫‰∫éÁâπÂÆöÁöÑÂÆûÁé∞ÔºåÂõ†Ê≠§ÊòØÁâπÂÆöËØ≠Ë®ÄÁöÑ‰π†ÊÉØÁî®Ê≥ï„ÄÇ</li>
<li>Êúâ‰∫õ‰∫∫ËØ¥ËÆæËÆ°Ê®°Âºè‰ªÖÈôê‰∫éÈù¢ÂêëÂØπË±°ÁºñÁ®ãÂíåÂä®ÊÄÅÂ§öÊÄÅÊÄß„ÄÇ</li>
<li>Êúâ‰∫õ‰∫∫ËÆ§‰∏∫ËÆæËÆ°Ê®°ÂºèÂ∑≤ÁªèËøáÊó∂ÁîöËá≥Ë¢´Ê∑òÊ±∞„ÄÇ</li>
</ul>
<p>Ëøô‰∫õËØØËß£Âπ∂‰∏ç‰ª§‰∫∫ÊÉäËÆ∂ÔºåÂõ†‰∏∫Êàë‰ª¨ÂæàÂ∞ëË∞àËÆ∫ËÆæËÆ°ÔºåËÄåÊòØÊõ¥Â§öÂú∞ÂÖ≥Ê≥®ÂäüËÉΩÂíåËØ≠Ë®ÄÊú∫Âà∂ÔºàÂèÇËßÅ‚ÄúÂáÜÂàô1ÔºöÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄß‚ÄùÔºâ„ÄÇÂõ†Ê≠§ÔºåÂú®Êú¨ÂáÜÂàô‰∏≠ÔºåÊàëÂ∞ÜÊæÑÊ∏ÖÂâç‰∏âÁßçËØØËß£ÔºåÂπ∂Âú®‰∏ã‰∏ÄËäÇ‰∏≠Â§ÑÁêÜÁ¨¨ÂõõÁßçËØØËß£„ÄÇ</p>
<p><strong>ËÆæËÆ°Ê®°Âºè‰∏çÊòØÁõÆÊ†á</strong></p>
<p>‰∏Ä‰∫õÂºÄÂèëËÄÖÈùûÂ∏∏ÂñúÊ¨¢ËÆæËÆ°Ê®°ÂºèÔºå‰ªñ‰ª¨ÂØπËÆæËÆ°Ê®°ÂºèÂ¶ÇÊ≠§ÁùÄËø∑Ôºå‰ª•Ëá≥‰∫éËØïÂõæÈÄöËøáËÆæËÆ°Ê®°ÂºèËß£ÂÜ≥ÊâÄÊúâÈóÆÈ¢òÔºåÊó†ËÆ∫ÊòØÂê¶ÂêàÁêÜ„ÄÇ</p>
<p>ÂΩìÁÑ∂ÔºåËøôÁßçÊÄùÁª¥ÊñπÂºèÂèØËÉΩ‰ºöÂ¢ûÂä†‰ª£Á†ÅÁöÑÂ§çÊùÇÊÄßÂπ∂Èôç‰ΩéÂÖ∂ÂèØÁêÜËß£ÊÄßÔºåËøôÊúÄÁªàÂèØËÉΩÈÄÇÂæóÂÖ∂Âèç„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËøáÂ∫¶‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÂèØËÉΩÂØºËá¥ÂÖ∂‰ªñÂºÄÂèëËÄÖÁöÑÊå´Ë¥•ÊÑüÔºåÊçüÂÆ≥ËÆæËÆ°Ê®°ÂºèÁöÑÊï¥‰ΩìÂ£∞Ë™âÔºåÁîöËá≥ÂØºËá¥ÂØπÊ®°ÂºèÊ¶ÇÂøµÁöÑÊãíÁªù„ÄÇ</p>
<p>ÊòéÁ°ÆÂú∞ËØ¥ÔºöËÆæËÆ°Ê®°Âºè‰∏çÊòØÁõÆÊ†áÔºåÂÆÉ‰ª¨ÊòØÂÆûÁé∞ÁõÆÊ†áÁöÑÊâãÊÆµÔºåÂÆÉ‰ª¨ÂèØËÉΩÊòØËß£ÂÜ≥ÊñπÊ°àÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ΩÜÂÆÉ‰ª¨‰∏çÊòØÁõÆÊ†á„ÄÇ</p>
<p>Ê≠£Â¶ÇVenkat SubramaniamÊâÄËØ¥ÔºöÂ¶ÇÊûú‰Ω†Êó©‰∏äËµ∑Â∫äÊó∂ÊÉ≥ÁùÄ ‚Äú‰ªäÂ§©Êàë‰ºöÁî®Âì™ÁßçËÆæËÆ°Ê®°ÂºèÔºü‚ÄùÔºåÈÇ£‰πàËøôÊòØ‰∏Ä‰∏™ÊòéÊòæÁöÑ‰ø°Âè∑ÔºåË°®Êòé‰Ω†ËØØËß£‰∫ÜËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑÔºåÊ≤°ÊúâÂ•ñÂä±ÊàñÂ•ñÁ´†ÊòØÂõ†‰∏∫‰ΩøÁî®Â∞ΩÂèØËÉΩÂ§öÁöÑËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>ËÆæËÆ°Ê®°ÂºèÁöÑ‰ΩøÁî®‰∏çÂ∫îËØ•Â¢ûÂä†Â§çÊùÇÊÄßÔºåËÄåÂ∫îËØ•Áõ∏ÂèçÔºåÂáèÂ∞ëÂ§çÊùÇÊÄßÔºå‰ª£Á†ÅÂ∫îËØ•ÂèòÂæóÊõ¥ÁÆÄÂçï„ÄÅÊõ¥ÊòìÁêÜËß£ÔºåÂπ∂‰∏îÊõ¥ÂÆπÊòìÊõ¥ÊîπÂíåÁª¥Êä§ÔºåÂõ†‰∏∫ËÆæËÆ°Ê®°ÂºèÂ∫îËØ•Â∏ÆÂä©Ëß£ÂÜ≥‰æùËµñÂÖ≥Á≥ªÂπ∂ÂàõÂª∫Êõ¥Â•ΩÁöÑÁªìÊûÑ„ÄÇ</p>
<p>Â¶ÇÊûú‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÂØºËá¥Êõ¥È´òÁöÑÂ§çÊùÇÊÄßÂπ∂ÁªôÂÖ∂‰ªñÂºÄÂèëËÄÖÂ∏¶Êù•ÈóÆÈ¢òÔºåÈÇ£ÊòæÁÑ∂‰∏çÊòØÊ≠£Á°ÆÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>‰∏∫‰∫ÜÊæÑÊ∏ÖÔºöÊàë‰∏çÊòØÂëäËØâ‰Ω†‰∏çË¶Å‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÔºåÊàëÂè™ÊòØÂëäËØâ‰Ω†‰∏çË¶ÅËøáÂ∫¶‰ΩøÁî®ÂÆÉ‰ª¨ÔºåÂ∞±ÂÉèÊàë‰πü‰ºöÂëäËØâ‰Ω†‰∏çË¶ÅËøáÂ∫¶‰ΩøÁî®‰ªª‰ΩïÂÖ∂‰ªñÂ∑•ÂÖ∑‰∏ÄÊ†∑„ÄÇ</p>
<p>ËøôÊÄªÊòØÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÁöÑÈóÆÈ¢òÔºå‰æãÂ¶ÇÔºåÈî§Â≠êÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÂ∑•ÂÖ∑ÔºåÂè™Ë¶Å‰Ω†ÁöÑÈóÆÈ¢òÊòØÈíâÂ≠êÔºå‰∏ÄÊó¶‰Ω†ÁöÑÈóÆÈ¢òÂèòÊàê‰∫ÜËû∫‰∏ùÔºåÈî§Â≠êÂ∞±ÂèòÊàê‰∫Ü‰∏ÄÁßç‰∏çÂ§™‰ºòÈõÖÁöÑÂ∑•ÂÖ∑ÔºåË¶ÅÊ≠£Á°Æ‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÔºå‰∫ÜËß£‰ΩïÊó∂‰ΩøÁî®ÂÆÉ‰ª¨‰ª•Âèä‰ΩïÊó∂‰∏ç‰ΩøÁî®ÂÆÉ‰ª¨ÔºåÊéåÊè°ÂÆÉ‰ª¨ÁöÑÊÑèÂõæÂíåÁªìÊûÑÁâπÊÄßÔºåÂπ∂ÊòéÊô∫Âú∞Â∫îÁî®ÂÆÉ‰ª¨ÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑ„ÄÇ</p>
<p><strong>ËÆæËÆ°Ê®°Âºè‰∏çÂÖ≥‰πéÂÆûÁé∞ÁªÜËäÇ</strong></p>
<p>ÂÖ≥‰∫éËÆæËÆ°Ê®°ÂºèÊúÄÂ∏∏ËßÅÁöÑËØØËß£‰πã‰∏ÄÊòØÂÆÉ‰ª¨Âü∫‰∫éÁâπÂÆöÁöÑÂÆûÁé∞ÔºåËøôÂåÖÊã¨ËÆ§‰∏∫ËÆæËÆ°Ê®°ÂºèÊàñÂ§öÊàñÂ∞ëÊòØÁâπÂÆöËØ≠Ë®ÄÁöÑ‰π†ÊÉØÁî®Ê≥ï„ÄÇ</p>
<p>ËøôÁßçËØØËß£ÊòØÂèØ‰ª•ÁêÜËß£ÁöÑÔºåÂõ†‰∏∫ËÆ∏Â§öËÆæËÆ°Ê®°ÂºèÔºåÁâπÂà´ÊòØÂõõ‰∫∫ÁªÑÔºàGoFÔºâÊ®°ÂºèÔºåÈÄöÂ∏∏Âú®Èù¢ÂêëÂØπË±°ÁöÑÁéØÂ¢É‰∏≠ÂëàÁé∞ÔºåÂπ∂ÈÄöËøáÈù¢ÂêëÂØπË±°ÁöÑ‰æãÂ≠êËøõË°åËß£Èáä„ÄÇ</p>
<p>Âú®ËøôÁßçËÉåÊôØ‰∏ãÔºåÂæàÂÆπÊòìÂ∞ÜÂÆûÁé∞ÁªÜËäÇËØØËÆ§‰∏∫ÊòØÁâπÂÆöÊ®°ÂºèÔºåÂπ∂ÂÅáËÆæ‰∏§ËÄÖÊòØÁõ∏ÂêåÁöÑ„ÄÇ</p>
<p>Âπ∏ËøêÁöÑÊòØÔºå‰πüÂæàÂÆπÊòìËØÅÊòéËÆæËÆ°Ê®°ÂºèÂπ∂‰∏çÂÖ≥‰πéÂÆûÁé∞ÁªÜËäÇ„ÄÅ‰ªª‰ΩïÁâπÂÆöÁöÑËØ≠Ë®ÄÁâπÊÄßÊàñ‰ªª‰ΩïC++Ê†áÂáÜ„ÄÇ</p>
<p>ËÆ©Êàë‰ª¨ÁúãÁúãÂêå‰∏Ä‰∏™ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çÂêåÂÆûÁé∞ÔºåÊòØÁöÑÔºåÊàë‰ª¨Â∞Ü‰ªéÁªèÂÖ∏„ÄÅÈù¢ÂêëÂØπË±°ÁöÑÁâàÊú¨ÂºÄÂßã„ÄÇ</p>
<p>ËÄÉËôë‰ª•‰∏ãÂú∫ÊôØÔºöÊàë‰ª¨ÊÉ≥Ë¶ÅÁªòÂà∂‰∏Ä‰∏™ÁªôÂÆöÁöÑÂΩ¢Áä∂„ÄÇ‰ª£Á†ÅÁâáÊÆµÈÄöËøá‰∏Ä‰∏™ÂúÜÊù•ÊºîÁ§∫Ëøô‰∏ÄÁÇπÔºåÂΩìÁÑ∂ÂÆÉ‰πüÂèØ‰ª•ÊòØ‰ªª‰ΩïÂÖ∂‰ªñÂΩ¢Áä∂ÔºåÂ¶ÇÊ≠£ÊñπÂΩ¢Êàñ‰∏âËßíÂΩ¢„ÄÇ‰∏∫‰∫ÜÁªòÂà∂ÔºåCircleÁ±ªÊèê‰æõ‰∫Üdraw()ÊàêÂëòÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">draw</span><span class="p">(</span> <span class="cm">/*...*/</span> <span class="p">);</span>  <span class="c1">// ‰ΩøÁî®ÊüêÁßçÂõæÂΩ¢Â∫ìÂÆûÁé∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áé∞Âú®‰ºº‰πéÂæàÊòéÊòæ‰Ω†ÈúÄË¶ÅÂÆûÁé∞<code>draw()</code>ÂáΩÊï∞„ÄÇÊú™ÁªèËøõ‰∏ÄÊ≠•ÊÄùËÄÉÔºå‰Ω†ÂèØËÉΩ‰ºöÈÄöËøáÂ∏∏ËßÅÁöÑÂõæÂΩ¢Â∫ìÔºàÂ¶ÇOpenGL„ÄÅMetal„ÄÅVulkanÊàñÂÖ∂‰ªñÂõæÂΩ¢Â∫ìÔºâÊù•ÂÆûÁé∞„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ¶ÇÊûú<code>Circle</code>Á±ªËá™Â∑±ÂÆûÁé∞‰∫Ü<code>draw()</code>ÂäüËÉΩÔºåÈÇ£Â∞ÜÊòØ‰∏Ä‰∏™Â§ßÁöÑËÆæËÆ°Áº∫Èô∑ÔºöÁõ¥Êé•ÂÆûÁé∞<code>draw()</code>ÂáΩÊï∞‰ºöÂºïÂÖ•ÂØπÊâÄÈÄâÂõæÂΩ¢Â∫ìÁöÑÂº∫ËÄ¶Âêà„ÄÇËøô‰ºöÂ∏¶Êù•‰∏Ä‰∫õÁº∫ÁÇπÔºö</p>
<ul>
<li>ÂØπ‰∫é<code>Circle</code>ÁöÑÊØè‰∏Ä‰∏™ÂèØËÉΩÂ∫îÁî®Ôºå‰Ω†ÊÄªÊòØÈúÄË¶ÅÂõæÂΩ¢Â∫ìÂèØÁî®ÔºåÂç≥‰Ωø‰Ω†ÂèØËÉΩÂè™ÂØπÂá†‰ΩïÂõæÂÖÉÊÑüÂÖ¥Ë∂£ËÄå‰∏çÊòØÂõæÂΩ¢„ÄÇ</li>
<li>ÂõæÂΩ¢Â∫ìÁöÑÊØè‰∏ÄÊ¨°Êõ¥ÊîπÈÉΩÂèØËÉΩÂΩ±ÂìçÂà∞<code>Circle</code>Á±ªÔºåÂØºËá¥ÂøÖË¶ÅÁöÑ‰øÆÊîπ„ÄÅÈáçÊñ∞ÊµãËØïÂíåÈáçÊñ∞ÈÉ®ÁΩ≤Á≠â„ÄÇ</li>
<li>Êú™Êù•ÂàáÊç¢Âà∞Âè¶‰∏Ä‰∏™Â∫ìÂ∞ÜÊÑèÂë≥ÁùÄ‰∏ÄÂàáÈÉΩ‰∏çÂÜçÈ°∫Âà©„ÄÇ</li>
</ul>
<p>Ëøô‰∫õÈóÆÈ¢òÈÉΩÊúâ‰∏Ä‰∏™ÂÖ±ÂêåÁöÑÊ†πÊ∫êÔºöÂú®<code>Circle</code>Á±ª‰∏≠Áõ¥Êé•ÂÆûÁé∞<code>draw()</code>ÂáΩÊï∞ËøùÂèç‰∫ÜÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºõÂèÇËßÅ‚ÄúÂáÜÂàô2Ôºö‰∏∫ÂèòÊõ¥ËÄåËÆæËÆ°‚ÄùÔºâÔºåËØ•Á±ª‰∏çÂÜçÂõ†Âçï‰∏ÄÂéüÂõ†ËÄåÊîπÂèòÔºåÂπ∂‰∏îÂº∫ÁÉà‰æùËµñ‰∫éÈÇ£‰∏™ËÆæËÆ°ÂÜ≥Á≠ñ„ÄÇ</p>
<p>Ëøô‰∏™ÈóÆÈ¢òÁöÑÁªèÂÖ∏Èù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°àÊòØÊèêÂèñÂ¶Ç‰ΩïÁªòÂà∂ÂúÜÁöÑÂÜ≥Á≠ñÔºåÂπ∂ÈÄöËøáÂü∫Á±ªÂºïÂÖ•ÊäΩË±°ÔºåÂºïÂÖ•ËøôÊ†∑ÁöÑÂèòÂåñÁÇπÊòØÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÊïàÊûú„ÄÇ</p>
<p><strong>Â∫îÁî®‰∫éÁªòÂà∂ÂúÜÁöÑÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong></p>
<p>Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæÊòØÂÆö‰πâ‰∏ÄÁªÑÁÆóÊ≥ïÂπ∂Â∞ÜÊØè‰∏™ÁÆóÊ≥ïÂ∞ÅË£ÖËµ∑Êù•Ôºå‰ªéËÄå‰ΩøÂÆÉ‰ª¨ÂèØ‰ª•‰∫íÊç¢„ÄÇ</p>
<p>Á≠ñÁï•‰ΩøÁÆóÊ≥ïÁã¨Á´ã‰∫é‰ΩøÁî®ÂÆÉÁöÑÂÆ¢Êà∑Á´ØËÄåÂèòÂåñÔºåÈÄöËøáÂºïÂÖ•<code>DrawStrategy</code>Âü∫Á±ªÔºå‰ΩøÂæóËΩªÊùæÊîπÂèòÁªôÂÆö<code>Circle</code>ÁöÑ<code>draw()</code>ÂÆûÁé∞Êàê‰∏∫ÂèØËÉΩ„ÄÇ</p>
<p>Ëøô‰πü‰ΩøÂæóÊØè‰∏™‰∫∫ÔºåËÄå‰∏ç‰ªÖ‰ªÖÊòØ‰Ω†Ëá™Â∑±ÔºåÊó†ÈúÄ‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÂ∞±ËÉΩÂÆûÁé∞Êñ∞ÁöÑÁªòÂà∂Ë°å‰∏∫ÔºåÂπ∂‰ªéÂ§ñÈÉ®Ê≥®ÂÖ•Âà∞<code>Circle</code>‰∏≠„ÄÇ</p>
<p>ËøôÂ∞±ÊòØÊàë‰ª¨Â∏∏ËØ¥ÁöÑ‰æùËµñÊ≥®ÂÖ•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;OpenGLStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫ÊâÄÈúÄÁöÑÂúÜÁöÑÁªòÂà∂Á≠ñÁï•„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">auto</span> <span class="n">strategy</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">OpenGLStrategy</span><span class="o">&gt;</span><span class="p">(</span> <span class="cm">/* OpenGL ÁâπÂÆöÂèÇÊï∞ */</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∞ÜÁ≠ñÁï•Ê≥®ÂÖ•Âà∞ÂúÜ‰∏≠ÔºõÂúÜ‰∏çÈúÄË¶ÅÁü•ÈÅìÂÖ∑‰ΩìÁöÑÁ≠ñÁï•Á±ªÂûãÔºå‰ΩÜÂèØ‰ª•ÈÄöËøá &#39;DrawStrategy&#39; ÊäΩË±°ÊÑâÂø´Âú∞‰ΩøÁî®ÂÆÉ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Circle</span> <span class="n">circle</span><span class="p">(</span><span class="mf">4.2</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">strategy</span><span class="p">));</span> 
</span></span><span class="line"><span class="cl">    <span class="n">circle</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÊñπÊ≥ïÂ§ßÂ§ßÊèêÈ´ò‰∫Ü‰∏çÂêåÁªòÂà∂Ë°å‰∏∫ÁöÑÁÅµÊ¥ªÊÄßÔºöÂÆÉÂàÜÁ¶ª‰∫ÜÂØπÁâπÂÆöÂ∫ìÂíåÂÖ∂‰ªñÂÆûÁé∞ÁªÜËäÇÁöÑÊâÄÊúâ‰æùËµñÔºå‰ªéËÄå‰Ωø‰ª£Á†ÅÊõ¥Êòì‰∫éÊõ¥ÊîπÂíåÊâ©Â±ï„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÁé∞Âú®ÂæàÂÆπÊòìÊèê‰æõ‰∏Ä‰∏™‰∏ìÈó®Áî®‰∫éÊµãËØïÁõÆÁöÑÁöÑÂÆûÁé∞ÔºàÂç≥<code>TestStrategy</code>Ôºâ„ÄÇ</p>
<p>ËøôË°®ÊòéÊîπËøõÁöÑÁÅµÊ¥ªÊÄßÂØπËÆæËÆ°ÁöÑÂèØÊµãËØïÊÄßÊúâÈùûÂ∏∏ÁßØÊûÅÁöÑÂΩ±Âìç„ÄÇ</p>
<p>Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÊòØÁªèÂÖ∏ÁöÑGoFËÆæËÆ°Ê®°Âºè‰πã‰∏Ä„ÄÇÂõ†Ê≠§ÔºåÂÆÉÂ∏∏Ë¢´Áß∞‰∏∫Èù¢ÂêëÂØπË±°ËÆæËÆ°Ê®°ÂºèÔºåÂπ∂‰∏îÈÄöÂ∏∏Ë¢´ËÆ§‰∏∫ÈúÄË¶Å‰∏Ä‰∏™Âü∫Á±ª„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÁ≠ñÁï•ÁöÑÊÑèÂõæ‰∏çÈôê‰∫éÈù¢ÂêëÂØπË±°ÁºñÁ®ã„ÄÇÂ∞±ÂÉèÂèØ‰ª•‰ΩøÁî®Âü∫Á±ªËøõË°åÊäΩË±°‰∏ÄÊ†∑ÔºåÂêåÊ†∑ÂèØ‰ª•‰æùËµñÊ®°ÊùøÂèÇÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">DrawStrategy</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">draw</span><span class="p">(</span> <span class="cm">/*...*/</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ËøôÁßçÂΩ¢Âºè‰∏ãÔºåÂÜ≥ÂÆöÂ¶Ç‰ΩïÁªòÂà∂ÂúÜÊòØÂú®ÁºñËØëÊó∂ÂèëÁîüÁöÑÔºö‰∏çÊòØÁºñÂÜô‰∏Ä‰∏™Âü∫Á±ª<code>DrawStrategy</code>Âπ∂Âú®ËøêË°åÊó∂‰º†ÈÄí‰∏Ä‰∏™ÊåáÂêë<code>DrawStrategy</code>ÁöÑÊåáÈíàÔºåËÄåÊòØÈÄöËøá<code>DrawStrategy</code>Ê®°ÊùøÂèÇÊï∞Êèê‰æõÁªòÂà∂ÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇ</p>
<p>ËØ∑Ê≥®ÊÑèÔºåËôΩÁÑ∂Ê®°ÊùøÂèÇÊï∞ÂÖÅËÆ∏‰Ω†‰ªéÂ§ñÈÉ®Ê≥®ÂÖ•ÂÆûÁé∞ÁªÜËäÇÔºå‰ΩÜ<code>Circle</code>‰ªçÁÑ∂‰∏ç‰æùËµñ‰∫é‰ªª‰ΩïÂÆûÁé∞ÁªÜËäÇ„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå‰Ω†‰ªçÁÑ∂Â∞Ü<code>Circle</code>Á±ª‰∏é‰ΩøÁî®ÁöÑÂõæÂΩ¢Â∫ìËß£ËÄ¶ÔºåÁÑ∂ËÄåÔºå‰∏éËøêË°åÊó∂ÊñπÊ≥ïÁõ∏ÊØîÔºåÊØèÊ¨°<code>DrawStrategy</code>Êõ¥ÊîπÊó∂ÈÉΩÈúÄË¶ÅÈáçÊñ∞ÁºñËØë„ÄÇ</p>
<p>ËôΩÁÑ∂Âü∫‰∫éÊ®°ÊùøÁöÑËß£ÂÜ≥ÊñπÊ°à‰ªéÊ†πÊú¨‰∏äÊîπÂèò‰∫ÜÁ§∫‰æãÁöÑÂ±ûÊÄß<br/>ÔºàÂç≥Ê≤°ÊúâÂü∫Á±ªÂíåËôöÂáΩÊï∞ÔºåÊ≤°ÊúâËøêË°åÊó∂ÂÜ≥Á≠ñÔºåÊ≤°ÊúâÂçï‰∏ÄÁöÑ<code>Circle</code>Á±ªÔºåËÄåÊòØÊØè‰∏™ÂÖ∑‰ΩìÁöÑ<code>DrawStrategy</code>ÈÉΩÊúâ‰∏Ä‰∏™<code>Circle</code>Á±ªÂûãÔºâÔºå‰ΩÜÂÆÉ‰ªçÁÑ∂ÂÆåÁæéÂú∞ÂÆûÁé∞‰∫ÜÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËøôË°®ÊòéËÆæËÆ°Ê®°ÂºèÂπ∂‰∏çÂ±ÄÈôê‰∫éÁâπÂÆöÁöÑÂÆûÁé∞ÊàñÊäΩË±°ÁöÑÂÖ∑‰ΩìÂΩ¢Âºè„ÄÇ</p>
<p><strong>ËÆæËÆ°Ê®°Âºè‰∏ç‰ªÖÈôê‰∫éÈù¢ÂêëÂØπË±°ÁºñÁ®ãÊàñÂä®ÊÄÅÂ§öÊÄÅ</strong></p>
<p>ËÆ©Êàë‰ª¨ËÄÉËôëÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÂè¶‰∏Ä‰∏™Áî®‰æãÔºöÊù•Ëá™ <code>&lt;numeric&gt;</code> Â§¥Êñá‰ª∂ÁöÑÊ†áÂáÜÂ∫ì <code>accumulate()</code> ÂáΩÊï∞Ê®°ÊùøÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="k">const</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå<code>std::accumulate()</code> Â∞ÜÁªôÂÆöËåÉÂõ¥ÂÜÖÁöÑÊâÄÊúâÂÖÉÁ¥†Áõ∏Âä†ÔºåÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÊåáÂÆöÊÄªÂíåÁöÑÂàùÂßãÂÄºÔºåÁî±‰∫é <code>std::accumulate()</code> ‰ΩøÁî®ËØ•ÂèÇÊï∞ÁöÑÁ±ªÂûã‰Ωú‰∏∫ËøîÂõûÁ±ªÂûãÔºåÂõ†Ê≠§ÊòæÂºèÂú∞Â∞ÜÁ±ªÂûãÊåáÂÆö‰∏∫ <code>int{0}</code> ËÄå‰∏çÊòØÁÆÄÂçïÁöÑ <code>0</code>Ôºå‰ª•Èò≤Ê≠¢ÂæÆÂ¶ôÁöÑËØØËß£„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÁ¥ØÂä†ÂÖÉÁ¥†Âè™ÊòØÂÜ∞Â±±‰∏ÄËßíÔºöÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÔºåÂèØ‰ª•ÈÄöËøáÊèê‰æõÁ¨¨Âõõ‰∏™ÂèÇÊï∞Êù•ÊåáÂÆöÂ¶Ç‰ΩïÁ¥ØÂä†ÂÖÉÁ¥†„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî® <code>&lt;functional&gt;</code> Â§¥Êñá‰ª∂‰∏≠ÁöÑ <code>std::plus</code> Êàñ <code>std::multiplies</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="k">const</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">},</span> <span class="n">std</span><span class="o">::</span><span class="n">plus</span><span class="o">&lt;&gt;</span><span class="p">{});</span> 
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="k">const</span> <span class="n">product</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">},</span> <span class="n">std</span><span class="o">::</span><span class="n">multiplies</span><span class="o">&lt;&gt;</span><span class="p">{});</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáÁ¨¨Âõõ‰∏™ÂèÇÊï∞Ôºå<code>std::accumulate()</code> ÂèØÁî®‰∫é‰ªª‰ΩïÁ±ªÂûãÁöÑÂΩíÁ∫¶Êìç‰ΩúÔºåÂõ†Ê≠§Á¨¨Âõõ‰∏™ÂèÇÊï∞‰ª£Ë°®‰∫ÜÂΩíÁ∫¶Êìç‰ΩúÁöÑÂÆûÁé∞„ÄÇ</p>
<p>ËøôÊ†∑ÔºåÂÆÉÂÖÅËÆ∏Êàë‰ª¨ÈÄöËøá‰ªéÂ§ñÈÉ®Ê≥®ÂÖ•ÂΩíÁ∫¶Êìç‰ΩúÁöÑÁªÜËäÇÊù•ÊîπÂèòÂÆûÁé∞„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå<code>std::accumulate()</code> ‰∏ç‰æùËµñ‰∫éÂçï‰∏ÄÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÔºåËÄåÊòØÂèØ‰ª•Ê†πÊçÆÁâπÂÆöÈúÄÊ±ÇËøõË°åÂÆöÂà∂Ôºå<br/>ËøôÊ≠£ÊòØÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæ„ÄÇ</p>
<p><code>std::accumulate()</code> ÁöÑÂº∫Â§ß‰πãÂ§ÑÂú®‰∫éÂÖ∂ÈÄöÁî®ÂΩ¢ÂºèÁöÑÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÔºåÂ¶ÇÊûúÊ≤°ÊúâËÉΩÂäõÊîπÂèòËøôÁßçË°å‰∏∫ÔºåÂÆÉÁöÑÁî®Â§ÑÂ∞ÜÈùûÂ∏∏ÊúâÈôê„ÄÇÁî±‰∫éÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÔºåÂèØËÉΩÁöÑÁî®ÈÄîÊòØÊó†ÈôêÁöÑ„ÄÇ</p>
<p><code>std::accumulate()</code> ÁöÑ‰æãÂ≠êË°®ÊòéÔºåËÆæËÆ°Ê®°ÂºèÔºåÂç≥‰ΩøÊòØÁªèÂÖ∏ÁöÑGoFÊ®°ÂºèÔºå‰πü‰∏çÂ±ÄÈôê‰∫é‰∏ÄÁßçÁâπÂÆöÁöÑÂÆûÁé∞ÔºåÂπ∂‰∏î‰∏çÈôê‰∫éÈù¢ÂêëÂØπË±°ÁºñÁ®ã„ÄÇ</p>
<p>ÊòæÁÑ∂ÔºåËÆ∏Â§öËøô‰∫õÊ®°ÂºèÁöÑÊÑèÂõæÂØπ‰∫éÂÖ∂‰ªñËåÉÂºèÔºàÂ¶ÇÂáΩÊï∞ÂºèÁºñÁ®ãÊàñÊ≥õÂûãÁºñÁ®ãÔºâ‰πüÊòØÊúâÁî®ÁöÑ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËÆæËÆ°Ê®°Âºè‰∏ç‰ªÖÈôê‰∫éÂä®ÊÄÅÂ§öÊÄÅÊÄßÔºåÁõ∏ÂèçÔºåÂÆÉ‰ª¨ÂêåÊ†∑ÈÄÇÁî®‰∫éÈùôÊÄÅÂ§öÊÄÅÊÄßÔºåÂπ∂‰∏îÂèØ‰ª•‰∏éC++Ê®°ÊùøÁªìÂêà‰ΩøÁî®„ÄÇ</p>
<p>‰∏∫‰∫ÜËøõ‰∏ÄÊ≠•Âº∫Ë∞ÉËøô‰∏ÄÁÇπÂπ∂Â±ïÁ§∫Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÂè¶‰∏Ä‰∏™‰æãÂ≠êÔºåËÄÉËôë <code>std::vector</code> Âíå <code>std::set</code> Á±ªÊ®°ÊùøÁöÑÂ£∞ÊòéÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">std</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">T</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Allocator</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">vector</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">Key</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Compare</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;</span><span class="n">Key</span><span class="o">&gt;</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Allocator</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="n">Key</span><span class="o">&gt;</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">set</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace std
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ê†áÂáÜÂ∫ì‰∏≠ÁöÑÊâÄÊúâÂÆπÂô®ÔºàÈô§‰∫Ü <code>std::array</code>ÔºâÈÉΩÊèê‰æõ‰∫ÜÊåáÂÆöËá™ÂÆö‰πâÂàÜÈÖçÂô®ÁöÑÊú∫‰ºö„ÄÇ</p>
<p>ÂØπ‰∫é <code>std::vector</code> Êù•ËØ¥ÔºåÂÆÉÊòØÁ¨¨‰∫å‰∏™Ê®°ÊùøÂèÇÊï∞Ôºõ<br/>ÂØπ‰∫é <code>std::set</code> Êù•ËØ¥ÔºåÂÆÉÊòØÁ¨¨‰∏â‰∏™ÂèÇÊï∞„ÄÇ</p>
<p>ÂÆπÂô®ÁöÑÊâÄÊúâÂÜÖÂ≠òËØ∑Ê±ÇÈÉΩÈÄöËøáÁªôÂÆöÁöÑÂàÜÈÖçÂô®Â§ÑÁêÜ„ÄÇ</p>
<p>ÈÄöËøáÊö¥Èú≤‰∏Ä‰∏™Ê®°ÊùøÂèÇÊï∞Áî®‰∫éÂàÜÈÖçÂô®ÔºåÊ†áÂáÜÂ∫ìÂÆπÂô®‰∏∫‰Ω†Êèê‰æõ‰∫Ü‰ªéÂ§ñÈÉ®Ëá™ÂÆö‰πâÂÜÖÂ≠òÂàÜÈÖçÁöÑÊú∫‰ºöÔºåÂÆÉ‰ª¨‰Ωø‰Ω†ËÉΩÂ§üÂÆö‰πâ‰∏ÄÁªÑÁÆóÊ≥ïÔºàÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊòØ‰∏Ä‰∏™ÂÜÖÂ≠òËé∑ÂèñÁÆóÊ≥ïÔºâÔºåÂπ∂Â∞ÜÊØè‰∏™ÁÆóÊ≥ïÂ∞ÅË£ÖËµ∑Êù•Ôºå‰ªéËÄå‰ΩøÂÆÉ‰ª¨ÂèØ‰∫íÊç¢„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå‰Ω†ÂèØ‰ª•Áã¨Á´ã‰∫é‰ΩøÁî®Ëøô‰∫õÁÆóÊ≥ïÁöÑÂÆ¢Êà∑Á´ØÔºàÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÊòØÂÆπÂô®ÔºâÊù•Êõ¥ÊîπËøô‰∏™ÁÆóÊ≥ï„ÄÇ</p>
<p>ÈòÖËØª‰∫Ü‰∏äËø∞ÊèèËø∞ÂêéÔºå‰Ω†Â∫îËØ•ËÉΩËØÜÂà´Âá∫Á≠ñÁï•ËÆæËÆ°Ê®°Âºè„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÁ≠ñÁï•ÂÜçÊ¨°Âü∫‰∫éÈùôÊÄÅÂ§öÊÄÅÊÄßÂπ∂ÈÄöËøáÊ®°ÊùøÂèÇÊï∞ÂÆûÁé∞„ÄÇÊòæÁÑ∂ÔºåÁ≠ñÁï•‰∏çÈôê‰∫éÂä®ÊÄÅÂ§öÊÄÅÊÄß„ÄÇ</p>
<p>ËôΩÁÑ∂ÂæàÊòéÊòæËÆæËÆ°Ê®°ÂºèÊÄª‰Ωì‰∏äÂπ∂‰∏çÂ±ÄÈôê‰∫éÈù¢ÂêëÂØπË±°ÁºñÁ®ãÊàñÂä®ÊÄÅÂ§öÊÄÅÊÄßÔºå‰ΩÜ‰ªçÁÑ∂Â∫îËØ•ÊòéÁ°ÆÊåáÂá∫ÔºåÊúâ‰∫õËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæÊòØ‰∏∫‰∫ÜÁºìËß£Èù¢ÂêëÂØπË±°ÁºñÁ®ã‰∏≠ÁöÑÂ∏∏ËßÅÈóÆÈ¢òÔºà‰æãÂ¶ÇÔºåËÆøÈóÆËÄÖÊ®°ÂºèÂíåÂéüÂûãÊ®°ÂºèÔºâ„ÄÇ</p>
<p>ÂΩìÁÑ∂Ôºå‰πüÊúâ‰∏Ä‰∫õ‰∏ìÊ≥®‰∫éÂáΩÊï∞ÂºèÁºñÁ®ãÊàñÊ≥õÂûãÁºñÁ®ãÁöÑËÆæËÆ°Ê®°ÂºèÔºà‰æãÂ¶ÇÔºåÈÄíÂΩíÊ®°ÊùøÊ®°Âºè [CRTP] ÂíåË°®ËææÂºèÊ®°ÊùøÔºâ„ÄÇ</p>
<p>ËôΩÁÑ∂Â§ßÂ§öÊï∞ËÆæËÆ°Ê®°ÂºèÂπ∂‰∏çÊòØÁâπÂÆö‰∫éÊüê‰∏™ËåÉÂºèÁöÑÔºåÂÖ∂ÊÑèÂõæÂèØ‰ª•Âú®Â§öÁßçÂÆûÁé∞‰∏≠‰ΩøÁî®Ôºå‰ΩÜÊúâ‰∫õÊ®°ÂºèÂàôÊõ¥Âä†ÂÖ∑‰Ωì„ÄÇ</p>
<p>Âú®Êé•‰∏ãÊù•ÁöÑÁ´†ËäÇ‰∏≠Ôºå‰Ω†‰ºöÁúãÂà∞Ëøô‰∏§Á±ªÁöÑ‰æãÂ≠êÔºå‰Ω†‰ºöÁúãÂà∞‰∏Ä‰∫õÂÖ∑ÊúâÈùûÂ∏∏ÊôÆÈÅçÊÑèÂõæÁöÑËÆæËÆ°Ê®°ÂºèÔºåÂõ†Ê≠§ÂÖ∑ÊúâÂπøÊ≥õÁöÑÂÆûÁî®ÊÄß„ÄÇ</p>
<p>Ê≠§Â§ñÔºå‰Ω†Ëøò‰ºöÁúãÂà∞‰∏Ä‰∫õÊõ¥ÁâπÂÆö‰∫éÊüêÁßçËåÉÂºèÁöÑÊ®°ÂºèÔºåÁî±‰∫éÂÖ∂ÁâπÊÄßÔºåÂÆÉ‰ª¨Âú®ÁõÆÊ†áÈ¢ÜÂüü‰πãÂ§ñÂèØËÉΩÊ≤°ÊúâÁî®Â§Ñ„ÄÇ</p>
<p>Â∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÂÆÉ‰ª¨ÈÉΩÂÖ∑ÊúâËÆæËÆ°Ê®°ÂºèÁöÑ‰∏ªË¶ÅÁâπÂæÅÔºöÂêçÁß∞„ÄÅÊÑèÂõæÂíåÊüêÁßçÂΩ¢ÂºèÁöÑÊäΩË±°„ÄÇ</p>
<p>ÊÄªÁªìÊù•ËØ¥ÔºöËÆæËÆ°Ê®°Âºè‰∏ç‰ªÖÈôê‰∫éÈù¢ÂêëÂØπË±°ÁºñÁ®ãÔºå‰πü‰∏çÈôê‰∫éÂä®ÊÄÅÂ§öÊÄÅÊÄßÔºåÊõ¥ÂÖ∑‰ΩìÂú∞ËØ¥ÔºåËÆæËÆ°Ê®°Âºè‰∏çÂÖ≥‰πéÁâπÂÆöÁöÑÂÆûÁé∞Ôºå‰πü‰∏çÊòØÁâπÂÆöËØ≠Ë®ÄÁöÑ‰π†ÊÉØÁî®Ê≥ï„ÄÇÁõ∏ÂèçÔºåÂÆÉ‰ª¨ÂÆåÂÖ®ÂÖ≥Ê≥®‰ª•ÁâπÂÆöÊñπÂºèËß£ËÄ¶ËΩØ‰ª∂ÂÆû‰ΩìÁöÑÊÑèÂõæ„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Â∞ÜËÆæËÆ°Ê®°ÂºèËßÜ‰∏∫Ëß£ÂÜ≥ËÆæËÆ°ÈóÆÈ¢òÁöÑÂ∑•ÂÖ∑ÔºåËÄå‰∏çÊòØÁõÆÊ†á„ÄÇ</li>
<li>ËØ∑Ê≥®ÊÑèÔºåËÆæËÆ°Ê®°Âºè‰∏ç‰ªÖÈôê‰∫éÈù¢ÂêëÂØπË±°ÁºñÁ®ã„ÄÇ</li>
<li>ËÆ∞‰ΩèÔºåËÆæËÆ°Ê®°Âºè‰∏ç‰ªÖÈôê‰∫éÂä®ÊÄÅÂ§öÊÄÅÊÄß„ÄÇ</li>
<li>ÁêÜËß£ËÆæËÆ°Ê®°Âºè‰∏çÊòØÁâπÂÆö‰∫éÊüêÁßçËØ≠Ë®ÄÁöÑ‰π†ÊÉØÁî®Ê≥ï„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô13ËÆæËÆ°Ê®°ÂºèÊó†Â§Ñ‰∏çÂú®">ÂáÜÂàô13ÔºöËÆæËÆ°Ê®°ÂºèÊó†Â§Ñ‰∏çÂú®
</h3><p>‰∏ä‰∏ÄËäÇÂ∑≤ÁªèË°®ÊòéÔºåËÆæËÆ°Ê®°Âºè‰∏ç‰ªÖÈôê‰∫éÈù¢ÂêëÂØπË±°ÁºñÁ®ãÊàñÂä®ÊÄÅÂ§öÊÄÅÊÄßÔºåÂÆÉ‰ª¨‰πü‰∏çÊòØÁâπÂÆöËØ≠Ë®ÄÁöÑ‰π†ÊÉØÁî®Ê≥ïÔºåÂπ∂‰∏î‰∏çÂ±ÄÈôê‰∫éÊüêÁßçÁâπÂÆöÁöÑÂÆûÁé∞„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÁî±‰∫éËøô‰∫õÂ∏∏ËßÅÁöÑËØØËß£‰ª•ÂèäÊàë‰ª¨‰∏çÂÜçÂ∞ÜC++ËßÜ‰∏∫Á∫ØÁ≤πÁöÑÈù¢ÂêëÂØπË±°ÁºñÁ®ãËØ≠Ë®ÄÔºåÊúâ‰∫õ‰∫∫ÁîöËá≥Â£∞Áß∞ËÆæËÆ°Ê®°ÂºèÂ∑≤ÁªèËøáÊó∂ÊàñË¢´Ê∑òÊ±∞„ÄÇ</p>
<p>ÊàëÊÉ≥Ë±°‰Ω†Áé∞Âú®ÂèØËÉΩÊúâ‰∫õÊÄÄÁñë„ÄÇ‚ÄúËøáÊó∂ÔºüËøôÈöæÈÅì‰∏çÊòØÊúâÁÇπÂ§∏Âº†ÂêóÔºü‚Äù‰Ω†ÂèØËÉΩ‰ºöÈóÆ„ÄÇÂ•ΩÂêßÔºå‰∏çÂπ∏ÁöÑÊòØÂπ∂ÈùûÂ¶ÇÊ≠§„ÄÇ</p>
<p>ËÆ©ÊàëËÆ≤‰∏Ä‰∏™Â∞èÊïÖ‰∫ãÔºåÂú®2021Âπ¥ÂàùÔºåÊàëÊúâÂπ∏Âú®‰∏Ä‰∏™Âæ∑ÂõΩC++Áî®Êà∑ÁªÑ‰∏≠ÂÅö‰∫Ü‰∏ÄÊ¨°ÂÖ≥‰∫éËÆæËÆ°Ê®°ÂºèÁöÑËôöÊãüÊºîËÆ≤ÔºåÊàëÁöÑ‰∏ªË¶ÅÁõÆÊ†áÊòØËß£Èáä‰ªÄ‰πàÊòØËÆæËÆ°Ê®°ÂºèÔºåÂπ∂ËØ¥ÊòéÂÆÉ‰ª¨Âú®‰ªäÂ§©‰ªçÁÑ∂ÈùûÂ∏∏ÊúâÁî®„ÄÇ</p>
<p>Âú®ÊºîËÆ≤ËøáÁ®ã‰∏≠ÔºåÊàëÊÑüÂà∞ÂæàÂ•ΩÔºåÂÖÖÊª°Âä®ÂäõÔºåÂ∏åÊúõËÉΩÂ∏ÆÂä©‰∫∫‰ª¨ÁúãÂà∞ËÆæËÆ°Ê®°ÂºèÂ∏¶Êù•ÁöÑÊâÄÊúâÂ•ΩÂ§Ñ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂá†Â§©ÂêéÔºåÂΩìÊºîËÆ≤Âú®YouTube‰∏äÂèëÂ∏ÉÂêéÔºåÊúâ‰∏Ä‰ΩçÁî®Êà∑ËØÑËÆ∫ËØ¥Ôºö‚ÄúÁúüÁöÑÂêóÔºü2021Âπ¥ÁöÑËÆæËÆ°Ê®°ÂºèÔºü‚Äù</p>
<p>ÊàëÈùûÂ∏∏Â∏åÊúõ‰Ω†Áé∞Âú®Ê≠£Âú®ÊëáÂ§¥Ë°®Á§∫‰∏çÁõ∏‰ø°ÔºåÊòØÁöÑÔºåÊàë‰πüÊó†Ê≥ïÁõ∏‰ø°Ëøô‰∏ÄÁÇπÔºåÂ∞§ÂÖ∂ÊòØÂú®Â±ïÁ§∫‰∫ÜC++Ê†áÂáÜÂ∫ì‰∏≠ÊúâÊï∞Áôæ‰∏™ËÆæËÆ°Ê®°ÂºèÁöÑ‰æãÂ≠ê‰πãÂêé„ÄÇ‰∏çÔºåËÆæËÆ°Ê®°ÂºèÊó¢‰∏çËøáÊó∂‰πü‰∏çÊ∑òÊ±∞Ôºå‰∫ãÂÆûËøúÈùûÂ¶ÇÊ≠§„ÄÇ</p>
<p>‰∏∫‰∫ÜËØÅÊòéËÆæËÆ°Ê®°Âºè‰ªçÁÑ∂ÈùûÂ∏∏Ê¥ªË∑ÉÂíåÁõ∏ÂÖ≥ÔºåËÆ©Êàë‰ª¨ËÄÉËôëC++Ê†áÂáÜÂ∫ì‰∏≠Êõ¥Êñ∞ÁöÑÂàÜÈÖçÂô®ËÆæÊñΩ„ÄÇ</p>
<p>ËØ∑Áúã‰∏ãÈù¢‰ΩøÁî®Êù•Ëá™ <code>std::pmr</code>ÔºàÂ§öÊÄÅÂÜÖÂ≠òËµÑÊ∫êÔºâÂëΩÂêçÁ©∫Èó¥ÁöÑÂàÜÈÖçÂô®ÁöÑ‰ª£Á†ÅÁ§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstddef&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory_resource&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="p">,</span> <span class="mi">1000</span><span class="o">&gt;</span> <span class="n">raw</span><span class="p">;</span>  <span class="c1">// Ê≥®ÊÑèÔºöÊú™ÂàùÂßãÂåñÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">monotonic_buffer_resource</span> <span class="n">buffer</span><span class="p">{</span><span class="n">raw</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="n">raw</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">null_memory_resource</span><span class="p">()};</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">strings</span><span class="p">{</span><span class="o">&amp;</span><span class="n">buffer</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">strings</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&#34;String longer than what SSO can handle&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">strings</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&#34;Another long string that goes beyond SSO&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">strings</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&#34;A third long string that cannot be handled by SSO&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™‰æãÂ≠êÂ±ïÁ§∫‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî® <code>std::pmr::monotonic_buffer_resource</code> ‰Ωú‰∏∫ÂàÜÈÖçÂô®ÔºåÂ∞ÜÊâÄÊúâÁöÑÂÜÖÂ≠òÂàÜÈÖçÈáçÂÆöÂêëÂà∞‰∏Ä‰∏™È¢ÑÂÆö‰πâÁöÑÂ≠óËäÇÁºìÂÜ≤Âå∫„ÄÇ</p>
<p>È¶ñÂÖàÔºåÊàë‰ª¨ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Â§ßÂ∞è‰∏∫1000Â≠óËäÇÁöÑÁºìÂÜ≤Âå∫ÔºåÂΩ¢ÂºèÊòØ‰∏Ä‰∏™ <code>std::array</code>ÔºàÊ≥®ÊÑèÔºöÊú™ÂàùÂßãÂåñÔºâ„ÄÇ<br/>ËØ•ÁºìÂÜ≤Âå∫ÈÄöËøá‰º†ÈÄíÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊåáÈíàÔºàÈÄöËøá <code>raw.data()</code>ÔºâÂíåÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞èÔºàÈÄöËøá <code>raw.size()</code>ÔºâÊèê‰æõÁªô <code>std::pmr::monotonic_buffer_resource</code> ‰Ωú‰∏∫ÂÜÖÂ≠òÊ∫ê„ÄÇ<br/><code>monotonic_buffer_resource</code> ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞‰ª£Ë°®‰∏Ä‰∏™Â§á‰ªΩÂàÜÈÖçÂô®ÔºåÂΩì <code>monotonic_buffer_resource</code> ËÄóÂ∞ΩÂÜÖÂ≠òÊó∂‰ΩøÁî®„ÄÇ<br/>Âõ†‰∏∫Êàë‰ª¨Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂÜÖÂ≠òÔºåÊâÄ‰ª•Êàë‰ª¨‰ΩøÁî® <code>std::pmr::null_memory_resource()</code> ÂáΩÊï∞ÔºåÂÆÉËøîÂõû‰∏Ä‰∏™ÊÄªÊòØÂàÜÈÖçÂ§±Ë¥•ÁöÑÊ†áÂáÜÂàÜÈÖçÂô®ÁöÑÊåáÈíà„ÄÇ<br/>ËøôÊÑèÂë≥ÁùÄÊó†ËÆ∫‰Ω†ÊÄé‰πàËØ∑Ê±ÇÂÜÖÂ≠òÔºåÁî± <code>std::pmr::null_memory_resource()</code> ËøîÂõûÁöÑÂàÜÈÖçÂô®ÈÉΩ‰ºöÂú®ËØ∑Ê±ÇÂÜÖÂ≠òÊó∂ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ<br/>ÂàõÂª∫ÁöÑÁºìÂÜ≤Âå∫‰Ωú‰∏∫ÂàÜÈÖçÂô®‰º†ÈÄíÁªôÂ≠óÁ¨¶‰∏≤ÂêëÈáèÔºåËØ•ÂêëÈáèÁé∞Âú®Â∞Ü‰ªéÂàùÂßãÂ≠óËäÇÁºìÂÜ≤Âå∫Ëé∑ÂèñÊâÄÊúâÂÜÖÂ≠ò„ÄÇ</p>
<p>Ê≠§Â§ñÔºåÁî±‰∫éÂêëÈáèÂ∞ÜÂÖ∂ÂàÜÈÖçÂô®ËΩ¨ÂèëÁªôÂÖ∂ÂÖÉÁ¥†ÔºåÂç≥‰ΩøÊàë‰ª¨ÈÄöËøá <code>emplace_back()</code> ÂáΩÊï∞Ê∑ªÂä†ÁöÑ‰∏â‰∏™Â≠óÁ¨¶‰∏≤ÈÉΩÂ§™ÈïøËÄå‰∏çËÉΩ‰æùËµñÂ∞èÂ≠óÁ¨¶‰∏≤‰ºòÂåñÔºàSSOÔºâÔºåÂÆÉ‰ª¨‰πüÂ∞Ü‰ªéÂ≠óËäÇÊï∞ÁªÑ‰∏≠Ëé∑ÂèñÊâÄÊúâÂÜÖÂ≠ò„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂú®Êï¥‰∏™Á§∫‰æã‰∏≠Ê≤°Êúâ‰ΩøÁî®Âä®ÊÄÅÂÜÖÂ≠òÔºõÊâÄÊúâÂÜÖÂ≠òÈÉΩÂ∞Ü‰ªéÂ≠óËäÇÊï∞ÁªÑ‰∏≠Ëé∑Âèñ„ÄÇ</p>
<p>‰πç‰∏ÄÁúãÔºåËøô‰∏™‰æãÂ≠ê‰ºº‰πé‰∏çÈúÄË¶Å‰ªª‰ΩïËÆæËÆ°Ê®°ÂºèÂ∞±ËÉΩÂ∑•‰Ωú„ÄÇÁÑ∂ËÄåÔºåËøô‰∏™‰æãÂ≠ê‰∏≠‰ΩøÁî®ÁöÑÂàÜÈÖçÂô®ÂäüËÉΩËá≥Â∞ë‰ΩøÁî®‰∫ÜÂõõÁßç‰∏çÂêåÁöÑËÆæËÆ°Ê®°ÂºèÔºöÊ®°ÊùøÊñπÊ≥ïËÆæËÆ°Ê®°Âºè„ÄÅË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè„ÄÅÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÂíåÔºàÂÜçÊ¨°ÔºâÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ËÆ°ÁÆóÂçï‰æãÊ®°ÂºèÔºåÁîöËá≥Êúâ‰∫îÁßçËÆæËÆ°Ê®°ÂºèÔºö<code>null_memory_resource()</code> ÂáΩÊï∞ÊòØÂü∫‰∫éÂçï‰æãÊ®°ÂºèÂÆûÁé∞ÁöÑÔºöÂÆÉËøîÂõû‰∏Ä‰∏™ÈùôÊÄÅÂ≠òÂÇ®ÊåÅÁª≠Êó∂Èó¥ÂØπË±°ÁöÑÊåáÈíàÔºåÁî®‰∫é‰øùËØÅÊúÄÂ§öÂè™Êúâ‰∏Ä‰∏™Ê≠§Á±ªÂàÜÈÖçÂô®ÂÆû‰æã„ÄÇ</p>
<p>ÊâÄÊúâÊù•Ëá™ <code>pmr</code> ÂëΩÂêçÁ©∫Èó¥ÁöÑC++ÂàÜÈÖçÂô®ÔºåÂåÖÊã¨Áî± <code>null_memory_resource()</code> Âíå <code>monotonic_buffer_resource</code> ËøîÂõûÁöÑÂàÜÈÖçÂô®ÔºåÈÉΩÊòØ‰ªé <code>std::pmr::memory_resource</code> Âü∫Á±ªÊ¥æÁîüÁöÑ„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†Êü•Áúã <code>memory_resource</code> Á±ªÁöÑÂÆö‰πâÔºåÁ¨¨‰∏Ä‰∏™ËÆæËÆ°Ê®°ÂºèÂ∞±ÂèòÂæóÂèØËßÅ‰∫ÜÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">memory_resource</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ËôöÊûêÊûÑÂáΩÊï∞„ÄÅ‰∏Ä‰∫õÊûÑÈÄ†ÂáΩÊï∞ÂíåËµãÂÄºËøêÁÆóÁ¨¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="na">[[nodiscard]]</span> <span class="kt">void</span><span class="o">*</span> <span class="n">allocate</span><span class="p">(</span><span class="n">size_t</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">alignment</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">deallocate</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">p</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">alignment</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">is_equal</span><span class="p">(</span><span class="n">memory_resource</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span><span class="o">*</span> <span class="n">do_allocate</span><span class="p">(</span><span class="n">size_t</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">alignment</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">do_deallocate</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">p</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">alignment</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">bool</span> <span class="nf">do_is_equal</span><span class="p">(</span><span class="n">memory_resource</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace std::pmr
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰Ω†ÂèØËÉΩ‰ºöÊ≥®ÊÑèÂà∞ÔºåÁ±ªÁöÑÂÖ¨ÂÖ±ÈÉ®ÂàÜ‰∏≠ÁöÑ‰∏â‰∏™ÂáΩÊï∞Âú®Á±ªÁöÑÁßÅÊúâÈÉ®ÂàÜ‰∏≠Êúâ‰∏Ä‰∏™ÂØπÂ∫îÁöÑËôöÂáΩÊï∞„ÄÇ</p>
<p>ËôΩÁÑ∂ÂÖ¨ÂÖ±ÁöÑ <code>allocate()</code>„ÄÅ<code>deallocate()</code> Âíå <code>is_equal()</code> ÂáΩÊï∞‰ª£Ë°®‰∫ÜÁ±ªÁöÑÁî®Êà∑Êé•Âè£Ôºå‰ΩÜ <code>do_allocate()</code>„ÄÅ<code>do_deallocate()</code> Âíå <code>do_is_equal()</code> ÂáΩÊï∞‰ª£Ë°®‰∫ÜÊ¥æÁîüÁ±ªÁöÑÊé•Âè£„ÄÇ</p>
<p>ËøôÁßçÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªÊòØ <strong>ÈùûËôöÊãüÊé•Âè£ÔºàNVIÔºâ</strong> Ê®°ÂºèÁöÑ‰æãÂ≠êÔºåÂÆÉÊú¨Ë∫´‰πüÊòØ <strong>Ê®°ÊùøÊñπÊ≥ïËÆæËÆ°Ê®°Âºè</strong> ÁöÑ‰∏Ä‰∏™‰æãÂ≠ê„ÄÇ</p>
<p><strong>Á¨¨‰∫å‰∏™ËÆæËÆ°Ê®°ÂºèÔºöË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè</strong></p>
<p>Êàë‰ª¨ÈöêÂºè‰ΩøÁî®ÁöÑÁ¨¨‰∫å‰∏™ËÆæËÆ°Ê®°ÂºèÊòØ <strong>Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè</strong>„ÄÇË£ÖÈ•∞Âô®Â∏ÆÂä©‰Ω†ÊûÑÂª∫ÂàÜÈÖçÂô®ÁöÑÂ±ÇÊ¨°ÁªìÊûÑÔºåÂπ∂Â∞Ü‰∏Ä‰∏™ÂàÜÈÖçÂô®ÁöÑÂäüËÉΩÊâ©Â±ïÂà∞Âè¶‰∏Ä‰∏™ÂàÜÈÖçÂô®„ÄÇËøô‰∏™ÊÉ≥Ê≥ïÂú®ËøôË°å‰ª£Á†Å‰∏≠ÂèòÂæóÊõ¥Âä†Ê∏ÖÊô∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">monotonic_buffer_resource</span> <span class="n">buffer</span><span class="p">{</span> <span class="n">raw</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="n">raw</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">null_memory_resource</span><span class="p">()</span> <span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáÂ∞Ü <code>null_memory_resource()</code> ÂáΩÊï∞ËøîÂõûÁöÑÂàÜÈÖçÂô®‰º†ÈÄíÁªô <code>monotonic_buffer_resource</code>ÔºåÊàë‰ª¨Â¢ûÂº∫‰∫ÜÂÆÉÁöÑÂäüËÉΩ„ÄÇ</p>
<p>ÊØèÂΩìÊàë‰ª¨ÈÄöËøá <code>allocate()</code> ÂáΩÊï∞ËØ∑Ê±Ç <code>monotonic_buffer_resource</code> ÂàÜÈÖçÂÜÖÂ≠òÊó∂ÔºåÂÆÉÂèØËÉΩ‰ºöÂ∞ÜË∞ÉÁî®ËΩ¨ÂèëÁªôÂÖ∂Â§á‰ªΩÂàÜÈÖçÂô®„ÄÇ</p>
<p>ËøôÊ†∑ÔºåÊàë‰ª¨ÂèØ‰ª•ÂÆûÁé∞ËÆ∏Â§ö‰∏çÂêåÁ±ªÂûãÁöÑÂàÜÈÖçÂô®ÔºåËøô‰∫õÂàÜÈÖçÂô®ÂèØ‰ª•ËΩªÊùæÁªÑÂêàÂΩ¢Êàê‰∏Ä‰∏™ÂÖ∑Êúâ‰∏çÂêåÂàÜÈÖçÁ≠ñÁï•Â±ÇÁöÑÂÆåÊï¥ÂÜÖÂ≠òÂ≠êÁ≥ªÁªü„ÄÇËøôÁßçÁªìÂêàÂíåÈáçÁî®ÂäüËÉΩÁöÑÊñπÂºèÊ≠£ÊòØ <strong>Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè</strong> ÁöÑ‰ºòÂäøÊâÄÂú®„ÄÇ</p>
<p><strong>Á¨¨‰∏â‰∏™ËÆæËÆ°Ê®°ÂºèÔºöÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°Âºè</strong></p>
<p>‰Ω†ÂèØËÉΩÂ∑≤ÁªèÊ≥®ÊÑèÂà∞ÔºåÂú®Á§∫‰æã‰ª£Á†Å‰∏≠Êàë‰ª¨‰ΩøÁî®‰∫Ü <code>std::pmr::vector</code> Âíå <code>std::pmr::string</code>„ÄÇ</p>
<p>ÊàëÂÅáËÆæ‰Ω†ËøòËÆ∞Âæó <code>std::string</code> Âè™ÊòØ <code>std::basic_string&lt;char&gt;</code> ÁöÑÁ±ªÂûãÂà´Âêç„ÄÇÁü•ÈÅìËøô‰∏ÄÁÇπÂêéÔºå‰∏ãÈù¢ÁöÑÂÜÖÂÆπÂ∫îËØ•‰∏ç‰ºöËÆ©‰Ω†ÊÑüÂà∞ÊÑèÂ§ñÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">CharT</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Traits</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="n">CharT</span><span class="o">&gt;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">basic_string</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="n">CharT</span><span class="p">,</span> <span class="n">Traits</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">polymorphic_allocator</span><span class="o">&lt;</span><span class="n">CharT</span><span class="o">&gt;&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">vector</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">polymorphic_allocator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace std::pmr
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∫õÁ±ªÂûãÂà´Âêç‰ªçÁÑ∂ÊåáÂêëÂ∏∏ËßÑÁöÑ <code>std::vector</code> Âíå <code>std::basic_string</code> Á±ªÔºå‰ΩÜ‰∏çÂÜçÊö¥Èú≤ÂàÜÈÖçÂô®ÁöÑÊ®°ÊùøÂèÇÊï∞„ÄÇ</p>
<p>Áõ∏ÂèçÔºåÂÆÉ‰ª¨‰ΩøÁî® <code>std::pmr::polymorphic_allocator</code> ‰Ωú‰∏∫ÂàÜÈÖçÂô®„ÄÇ</p>
<p>ËøôÊòØ‰∏Ä‰∏™ <strong>ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°Âºè</strong> ÁöÑ‰æãÂ≠êÔºåÈÄÇÈÖçÂô®ÁöÑÁõÆÁöÑÊòØÂ∏ÆÂä©‰Ω†Â∞Ü‰∏§‰∏™‰∏çÂåπÈÖçÁöÑÊé•Âè£Á≤òÂêàÂú®‰∏ÄËµ∑„ÄÇ</p>
<p>Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå<code>polymorphic_allocator</code> Â∏ÆÂä©Âú®ÁªèÂÖ∏ÈùôÊÄÅÊé•Âè£Ôºà‰º†ÁªüC++ÂàÜÈÖçÂô®ÊâÄÈúÄÔºâÂíåÊñ∞ÁöÑÂä®ÊÄÅÂàÜÈÖçÂô®Êé•Âè£Ôºà<code>std::pmr::memory_resource</code> ÊâÄÈúÄÔºâ‰πãÈó¥ËøõË°åËΩ¨Êç¢„ÄÇ</p>
<p><strong>Á¨¨Âõõ‰∏™ËÆæËÆ°Ê®°ÂºèÔºöÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong></p>
<p>Êàë‰ª¨Á§∫‰æã‰∏≠‰ΩøÁî®ÁöÑÁ¨¨Âõõ‰∏™‰πüÊòØÊúÄÂêé‰∏Ä‰∏™ËÆæËÆ°Ê®°ÂºèÔºåÂÜçÊ¨°ÊòØ <strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong>„ÄÇ</p>
<p>ÈÄöËøáÂÖ¨ÂºÄÂàÜÈÖçÂô®ÁöÑÊ®°ÊùøÂèÇÊï∞ÔºåÊ†áÂáÜÂ∫ìÂÆπÂô®Â¶Ç <code>std::vector</code> Âíå <code>std::string</code> ËÆ©‰Ω†ÂèØ‰ª•‰ªéÂ§ñÈÉ®Ëá™ÂÆö‰πâÂÜÖÂ≠òÂàÜÈÖç„ÄÇ</p>
<p>ËøôÊòØ <strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong> ÁöÑÈùôÊÄÅÂΩ¢ÂºèÔºå‰∏éËá™ÂÆö‰πâÁÆóÊ≥ïÁöÑÁõÆÁöÑÁõ∏ÂêåÔºàÂèÇËßÅ‚ÄúÂáÜÂàô12ÔºöÊ≥®ÊÑèËÆæËÆ°Ê®°ÂºèÁöÑËØØËß£‚ÄùÔºâ„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>ÁêÜËß£‰ªª‰ΩïÁ±ªÂûãÁöÑÊäΩË±°Âíå‰ªª‰ΩïËß£ËÄ¶Â∞ùËØïÂæàÂèØËÉΩ‰ª£Ë°®‰∫Ü‰∏ÄÁßçÂ∑≤Áü•ÁöÑËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li>‰∫ÜËß£‰∏çÂêåÁöÑËÆæËÆ°Ê®°ÂºèÂèäÂÖ∂Ëß£ËÄ¶ÁöÑÊÑèÂõæ„ÄÇ</li>
<li>Ê†πÊçÆËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæÔºåÂú®ÂøÖË¶ÅÊó∂Â∫îÁî®ÂÆÉ‰ª¨„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô14‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞Êù•‰º†ËææÊÑèÂõæ">ÂáÜÂàô14Ôºö‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞Êù•‰º†ËææÊÑèÂõæ
</h3><p>Âú®Ââç‰∏§ËäÇ‰∏≠Ôºå‰Ω†‰∫ÜËß£‰∫Ü‰ªÄ‰πàÊòØËÆæËÆ°Ê®°ÂºèÔºåÂÆÉ‰∏çÊòØ‰ªÄ‰πàÔºå‰ª•ÂèäËÆæËÆ°Ê®°ÂºèÊó†Â§Ñ‰∏çÂú®„ÄÇ</p>
<p>‰Ω†Ëøò‰∫ÜËß£Âà∞ÊØè‰∏™ËÆæËÆ°Ê®°ÂºèÈÉΩÊúâ‰∏Ä‰∏™ÂêçÁß∞ÔºåËøô‰∏™ÂêçÁß∞Ë°®Ëææ‰∫ÜÊ∏ÖÊô∞„ÄÅÁÆÄÊ¥Å‰∏îÊòéÁ°ÆÁöÑÊÑèÂõæ„ÄÇÂõ†Ê≠§ÔºåÂêçÁß∞ÊâøËΩΩÁùÄÊÑè‰πâ„ÄÇÈÄöËøá‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞Ôºå‰Ω†ÂèØ‰ª•Ë°®ËææÈóÆÈ¢òÊòØ‰ªÄ‰πàÔºåÈÄâÊã©‰∫ÜÂì™ÁßçËß£ÂÜ≥ÊñπÊ°àÊù•Ëß£ÂÜ≥ÈóÆÈ¢òÔºåÂπ∂ÊèèËø∞‰ª£Á†ÅÈ¢ÑÊúüÂ¶Ç‰ΩïÊºîÂèò„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåËÄÉËôëÊ†áÂáÜÂ∫ì‰∏≠ÁöÑ <code>accumulate()</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">InputIt</span><span class="p">,</span> <span class="k">class</span> <span class="nc">T</span><span class="p">,</span> <span class="k">class</span> <span class="nc">BinaryOperation</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">T</span> <span class="n">accumulate</span><span class="p">(</span> <span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">T</span> <span class="n">init</span><span class="p">,</span> <span class="n">BinaryOperation</span> <span class="n">op</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Á¨¨‰∏â‰∏™Ê®°ÊùøÂèÇÊï∞Âêç‰∏∫ <code>BinaryOperation</code>ÔºåËôΩÁÑ∂ËøôÁ°ÆÂÆû‰º†Ëææ‰∫Ü‰º†ÈÄíÁöÑÂèØË∞ÉÁî®ÂØπË±°ÈúÄË¶ÅÊé•Âèó‰∏§‰∏™ÂèÇÊï∞ÁöÑ‰∫ãÂÆûÔºå‰ΩÜÂêçÁß∞Âπ∂Ê≤°Êúâ‰º†ËææÂèÇÊï∞ÁöÑÊÑèÂõæ„ÄÇ</p>
<p>‰∏∫‰∫ÜÊõ¥Ê∏ÖÊô∞Âú∞Ë°®ËææÊÑèÂõæÔºåÂèØ‰ª•Â∞ÜÂÖ∂ÂëΩÂêç‰∏∫ <code>BinaryReductionStrategy</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">InputIt</span><span class="p">,</span> <span class="k">class</span> <span class="nc">T</span><span class="p">,</span> <span class="k">class</span> <span class="nc">BinaryReductionStrategy</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">T</span> <span class="n">accumulate</span><span class="p">(</span> <span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">T</span> <span class="n">init</span><span class="p">,</span> <span class="n">BinaryReductionStrategy</span> <span class="n">op</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúØËØ≠‚ÄúReduction‚ÄùÂíåÂêçÁß∞‚ÄúStrategy‚ÄùÂØπÊØè‰∏™C++Á®ãÂ∫èÂëòÊù•ËØ¥ÈÉΩÂÖ∑ÊúâÊÑè‰πâÔºåÂõ†Ê≠§Ôºå‰Ω†Áé∞Âú®Êõ¥Ê∏ÖÊô∞Âú∞ÊçïÊçâÂπ∂Ë°®Ëææ‰∫Ü‰Ω†ÁöÑÊÑèÂõæÔºöËØ•ÂèÇÊï∞ÂÖÅËÆ∏‰æùËµñÊ≥®ÂÖ•‰∏Ä‰∏™‰∫åÂÖÉÊìç‰ΩúÔºå‰ªéËÄåÂÖÅËÆ∏‰Ω†ÊåáÂÆöÂΩíÁ∫¶Êìç‰ΩúÁöÑÂ∑•‰ΩúÊñπÂºè„ÄÇÂõ†Ê≠§ÔºåËØ•ÂèÇÊï∞Ëß£ÂÜ≥‰∫ÜËá™ÂÆö‰πâÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÊ≠£Â¶Ç‰Ω†Â∞ÜÂú®Á¨¨5Á´†ÁúãÂà∞ÁöÑÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰º†Ëææ‰∫ÜÂØπËØ•Êìç‰ΩúÊúâ‰∏ÄÂÆöÁöÑÊúüÊúõÔºå‰Ω†Âè™ËÉΩÊåáÂÆöÂΩíÁ∫¶Êìç‰ΩúÁöÑÂ∑•‰ΩúÊñπÂºèÔºõ‰∏çËÉΩÈáçÊñ∞ÂÆö‰πâ <code>accumulate()</code> ÁöÑÂäüËÉΩ„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÊÉ≥Ë°®ËææËøô‰∏ÄÁÇπÔºå‰Ω†Â∫îËØ•‰ΩøÁî®ÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">InputIt</span><span class="p">,</span> <span class="k">class</span> <span class="nc">UnaryCommand</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">UnaryCommand</span> <span class="n">for_each</span><span class="p">(</span> <span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">UnaryCommand</span> <span class="n">f</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>std::for_each()</code> ÁÆóÊ≥ïÂÖÅËÆ∏‰Ω†Â∞Ü‰ªª‰Ωï‰∏ÄÂÖÉÊìç‰ΩúÂ∫îÁî®‰∫é‰∏ÄÁ≥ªÂàóÂÖÉÁ¥†Ôºå‰∏∫‰∫ÜË°®ËææËøô‰∏ÄÊÑèÂõæÔºåÁ¨¨‰∫å‰∏™Ê®°ÊùøÂèÇÊï∞ÂèØ‰ª•ÂëΩÂêç‰∏∫ <code>UnaryCommand</code>ÔºåËøôÊòéÁ°ÆË°®Á§∫ÂØπËØ•Êìç‰ΩúÂá†‰πéÊ≤°ÊúâÈ¢ÑÊúüÁöÑË¶ÅÊ±Ç„ÄÇ</p>
<p>Âè¶‰∏Ä‰∏™Êù•Ëá™Ê†áÂáÜÂ∫ìÁöÑ‰æãÂ≠êÂ±ïÁ§∫‰∫ÜËÆæËÆ°Ê®°ÂºèÂêçÁß∞ËÉΩ‰∏∫‰∏ÄÊÆµ‰ª£Á†ÅÂ∏¶Êù•Â§öÂ∞ë‰ª∑ÂÄºÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;variant&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Print</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;int: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="kt">double</span> <span class="n">d</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;double: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">d</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;string: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">variant</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">double</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">{};</span>  
</span></span><span class="line"><span class="cl">    <span class="n">v</span> <span class="o">=</span> <span class="s">&#34;C++ Variant example&#34;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">visit</span><span class="p">(</span><span class="n">Print</span><span class="p">{},</span> <span class="n">v</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® <code>main()</code> ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂåÖÂê´‰∏â‰∏™ÈÄâÈ°πÔºà<code>int</code>„ÄÅ<code>double</code> Âíå <code>std::string</code>ÔºâÁöÑ <code>std::variant</code>„ÄÇ</p>
<p>Êé•‰∏ãÊù•‰∏ÄË°åÔºåÊàë‰ª¨ÂàÜÈÖç‰∫Ü‰∏Ä‰∏™CÈ£éÊ†ºÂ≠óÁ¨¶‰∏≤Â≠óÈù¢ÈáèÔºåÂÆÉ‰ºöÂú®Âèò‰ΩìÂÜÖÈÉ®ËΩ¨Êç¢‰∏∫ <code>std::string</code>„ÄÇ</p>
<p>ÁÑ∂ÂêéÊàë‰ª¨ÈÄöËøá <code>std::visit()</code> ÂáΩÊï∞Âíå <code>Print</code> ÂáΩÊï∞ÂØπË±°ÊâìÂç∞Âèò‰ΩìÁöÑÂÜÖÂÆπ„ÄÇ</p>
<p>Ê≥®ÊÑè <code>std::visit()</code> ÂáΩÊï∞ÁöÑÂêçÁß∞ÔºåËØ•ÂêçÁß∞Áõ¥Êé•ÂºïÁî®‰∫ÜËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÔºåÂõ†Ê≠§ÊòéÁ°ÆË°®Ëææ‰∫ÜÂÖ∂ÊÑèÂõæÔºö‰Ω†ÂèØ‰ª•ÂØπÂèò‰ΩìÂÆû‰æã‰∏≠ÂåÖÂê´ÁöÑÂ∞ÅÈó≠Á±ªÂûãÈõÜÂ∫îÁî®‰ªª‰ΩïÊìç‰Ωú„ÄÇÊ≠§Â§ñÔºå‰Ω†ÂèØ‰ª•Èùû‰æµÂÖ•ÂºèÂú∞Êâ©Â±ïÊìç‰ΩúÈõÜ„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞Êù•‰º†ËææËß£ÂÜ≥ÊñπÊ°àÁöÑÊÑèÂõæ„ÄÇ</li>
<li>‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞Êù•ÊèêÈ´òÂèØËØªÊÄß„ÄÇ</li>
</ul>
<h2 id="Á¨¨ÂõõÁ´†-ËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè">Á¨¨ÂõõÁ´† ËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè
</h2><p>Êú¨Á´†ÂÆåÂÖ®‰∏ìÊ≥®‰∫éËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÔºåÂ¶ÇÊûú‰Ω†Â∑≤ÁªèÂê¨ËØ¥ËøáËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÔºåÁîöËá≥Âú®Ëá™Â∑±ÁöÑËÆæËÆ°‰∏≠‰ΩøÁî®ËøáÂÆÉÔºå‰Ω†ÂèØËÉΩ‰ºöÂ•ΩÂ•á‰∏∫‰ªÄ‰πàÊàëÈÄâÊã©ËÆøÈóÆËÄÖ‰Ωú‰∏∫Á¨¨‰∏Ä‰∏™ËØ¶ÁªÜËß£ÈáäÁöÑËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>ÊòØÁöÑÔºåËÆøÈóÆËÄÖËÇØÂÆö‰∏çÊòØÊúÄËÄÄÁúºÁöÑËÆæËÆ°Ê®°Âºè‰πã‰∏ÄÔºåÁÑ∂ËÄåÔºåÂÆÉÁªùÂØπÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑ‰æãÂ≠êÔºåÂèØ‰ª•Â±ïÁ§∫‰Ω†Âú®ÂÆûÁé∞ËÆæËÆ°Ê®°ÂºèÊó∂Êã•ÊúâÁöÑÂ§öÁßçÈÄâÊã©Ôºå‰ª•ÂèäËøô‰∫õÂÆûÁé∞ÊñπÂºèÂèØ‰ª•ÊúâÂ§ö‰πà‰∏çÂêå„ÄÇ</p>
<p>ÂÆÉËøòÂ∞Ü‰Ωú‰∏∫‰∏Ä‰∏™ÊúâÊïàÁöÑ‰æãÂ≠êÔºåÂ±ïÁ§∫Áé∞‰ª£C++ÁöÑ‰ºòÂäø„ÄÇ</p>
<p><strong>ÂáÜÂàô15Ôºö‰∏∫Ê∑ªÂä†Á±ªÂûãÊàñÊìç‰ΩúËøõË°åËÆæËÆ°</strong></p>
<p>È¶ñÂÖàÔºåÊàë‰ª¨Âú®‚ÄúÂáÜÂàô15Ôºö‰∏∫Ê∑ªÂä†Á±ªÂûãÊàñÊìç‰ΩúËøõË°åËÆæËÆ°‚Äù‰∏≠ËÆ®ËÆ∫ÂΩì‰Ω†Ê∂âË∂≥Âä®ÊÄÅÂ§öÊÄÅÊÄßÈ¢ÜÂüüÊó∂ÈúÄË¶ÅÂÅöÂá∫ÁöÑÂü∫Êú¨ËÆæËÆ°ÂÜ≥Á≠ñÔºöÂÖ≥Ê≥®Á±ªÂûãËøòÊòØÊìç‰Ωú„ÄÇÂú®Ëøô‰∏™ÂáÜÂàô‰∏≠ÔºåÊàë‰ª¨Ëøò‰ºöËÆ®ËÆ∫ÁºñÁ®ãËåÉÂºèÁöÑÂÜÖÂú®‰ºòÂäøÂíåÂä£Âäø„ÄÇ</p>
<p><strong>ÂáÜÂàô16Ôºö‰ΩøÁî®ËÆøÈóÆËÄÖÊâ©Â±ïÊìç‰Ωú</strong></p>
<p>Âú®‚ÄúÂáÜÂàô16Ôºö‰ΩøÁî®ËÆøÈóÆËÄÖÊâ©Â±ïÊìç‰Ωú‚Äù‰∏≠ÔºåÊàë‰ºöÂêë‰Ω†‰ªãÁªçËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè„ÄÇÊàëÂ∞ÜËß£ÈáäÂÆÉÁöÑÊÑèÂõæÊòØÊâ©Â±ïÊìç‰ΩúËÄå‰∏çÊòØÁ±ªÂûãÔºåÂπ∂Âêë‰Ω†Â±ïÁ§∫ÁªèÂÖ∏ËÆøÈóÆËÄÖÊ®°ÂºèÁöÑ‰ºòÁÇπÂíåÁº∫ÁÇπ„ÄÇ</p>
<p><strong>ÂáÜÂàô17ÔºöËÄÉËôë‰ΩøÁî® <code>std::variant</code> ÂÆûÁé∞ËÆøÈóÆËÄÖ</strong></p>
<p>Âú®‚ÄúÂáÜÂàô17ÔºöËÄÉËôë‰ΩøÁî® <code>std::variant</code> ÂÆûÁé∞ËÆøÈóÆËÄÖ‚Äù‰∏≠Ôºå‰Ω†‰ºö‰∫ÜËß£Âà∞ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÁé∞‰ª£ÂÆûÁé∞„ÄÇÊàëÂ∞ÜÂêë‰Ω†‰ªãÁªç <code>std::variant</code> Âπ∂Ëß£ÈáäËøôÁßçÁâπÂÆöÂÆûÁé∞ÁöÑËÆ∏Â§ö‰ºòÁÇπ„ÄÇ</p>
<p><strong>ÂáÜÂàô18ÔºöË≠¶ÊÉïÊó†ÁéØËÆøÈóÆËÄÖÁöÑÊÄßËÉΩÈóÆÈ¢ò</strong></p>
<p>Âú®‚ÄúÂáÜÂàô18ÔºöË≠¶ÊÉïÊó†ÁéØËÆøÈóÆËÄÖÁöÑÊÄßËÉΩÈóÆÈ¢ò‚Äù‰∏≠ÔºåÊàë‰ºöÂêë‰Ω†‰ªãÁªçÊó†ÁéØËÆøÈóÆËÄÖ„ÄÇ‰πç‰∏ÄÁúãÔºåËøôÁßçÊñπÊ≥ï‰ºº‰πéËß£ÂÜ≥‰∫ÜËÆøÈóÆËÄÖÊ®°ÂºèÁöÑ‰∏Ä‰∫õÂü∫Êú¨ÈóÆÈ¢òÔºå‰ΩÜ‰ªîÁªÜËßÇÂØüÂêéÊàë‰ª¨‰ºöÂèëÁé∞ÔºåËøêË°åÊó∂ÂºÄÈîÄÂèØËÉΩ‰ΩøËøôÁßçÂÆûÁé∞‰∏çÈÄÇÁî®„ÄÇ</p>
<h3 id="ÂáÜÂàô15‰∏∫Ê∑ªÂä†Á±ªÂûãÊàñÊìç‰ΩúËøõË°åËÆæËÆ°">ÂáÜÂàô15Ôºö‰∏∫Ê∑ªÂä†Á±ªÂûãÊàñÊìç‰ΩúËøõË°åËÆæËÆ°
</h3><p>ÂØπ‰∫é‰Ω†Êù•ËØ¥ÔºåÂä®ÊÄÅÂ§öÊÄÅÊÄßËøô‰∏™ÊúØËØ≠ÂèØËÉΩÂê¨Ëµ∑Êù•ÂÉèÊòØÊúâÂæàÂ§öËá™Áî±ÔºåÂÆÉÂèØËÉΩËÆ©‰Ω†ÊÑüËßâÂÉèÂ∞èÊó∂ÂÄô‰∏ÄÊ†∑ÔºöÊúâÊó†Â∞ΩÁöÑÂèØËÉΩÊÄßÔºåÊ≤°Êúâ‰ªª‰ΩïÈôêÂà∂ÔºÅ</p>
<p>ÁÑ∂ËÄåÔºå‰Ω†Â∑≤ÁªèÈïøÂ§ß‰∫ÜÂπ∂Èù¢ÂØπÁé∞ÂÆûÔºö‰Ω†‰∏çÂèØËÉΩÊã•Êúâ‰∏ÄÂàáÔºåÊÄªÊòØÈúÄË¶ÅÂÅöÂá∫ÈÄâÊã©„ÄÇ</p>
<p>‰∏çÂπ∏ÁöÑÊòØÔºåÂä®ÊÄÅÂ§öÊÄÅÊÄß‰πüÊòØÂ¶ÇÊ≠§ÔºåÂ∞ΩÁÆ°Âê¨Ëµ∑Êù•ÂÉèÊòØÂÆåÂÖ®ÁöÑËá™Áî±Ôºå‰ΩÜ‰ªçÁÑ∂Êúâ‰∏Ä‰∏™ÈôêÂà∂ÊÄßÁöÑÈÄâÊã©Ôºö‰Ω†ÊòØÊÉ≥Êâ©Â±ïÁ±ªÂûãËøòÊòØÊìç‰ΩúÔºü</p>
<p>‰∏∫‰∫ÜÊõ¥Â•ΩÂú∞ÁêÜËß£ÊàëÁöÑÊÑèÊÄùÔºåËÆ©Êàë‰ª¨ÂõûÂà∞Á¨¨‰∏âÁ´†‰∏≠ÁöÑÂú∫ÊôØÔºöÊàë‰ª¨Â∏åÊúõÁªòÂà∂‰∏Ä‰∏™ÁªôÂÆöÁöÑÂΩ¢Áä∂ÔºåÊàë‰ª¨ÂùöÊåÅ‰ΩøÁî®Âä®ÊÄÅÂ§öÊÄÅÊÄßÔºåÂπ∂‰∏îÂú®ÂàùÊ¨°Â∞ùËØï‰∏≠ÔºåÊàë‰ª¨Â∞Ü‰ΩøÁî®‰º†ÁªüÁöÑËøáÁ®ãÂºèÁºñÁ®ãÊù•ÂÆûÁé∞Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p><strong>ËøáÁ®ãÂºèËß£ÂÜ≥ÊñπÊ°à</strong></p>
<p>Á¨¨‰∏Ä‰∏™Â§¥Êñá‰ª∂ <code>Point.h</code> Êèê‰æõ‰∫Ü‰∏Ä‰∏™Áõ∏ÂΩìÁÆÄÂçïÁöÑ <code>Point</code> Á±ªÔºåËøô‰∏ªË¶ÅÊòØ‰∏∫‰∫Ü‰Ωø‰ª£Á†ÅÂÆåÊï¥Ôºå‰ΩÜ‰πüÁªô‰∫ÜÊàë‰ª¨‰∏Ä‰∏™ÊèêÁ§∫ÔºåÂç≥Êàë‰ª¨Ê≠£Âú®Â§ÑÁêÜ‰∫åÁª¥ÂΩ¢Áä∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Point.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">struct</span> <span class="nc">Point</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">x</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">y</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Á¨¨‰∫å‰∏™Ê¶ÇÂøµÊÄßÁöÑÂ§¥Êñá‰ª∂ <code>Shape.h</code> ÊòæÂæóÊõ¥Âä†ÊúâË∂£Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">enum</span> <span class="nc">ShapeType</span>  
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">circle</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">square</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"> <span class="k">protected</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">explicit</span> <span class="n">Shape</span><span class="p">(</span> <span class="n">ShapeType</span> <span class="n">type</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">      <span class="o">:</span> <span class="n">type_</span><span class="p">(</span> <span class="n">type</span> <span class="p">)</span>   
</span></span><span class="line"><span class="cl">   <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="n">ShapeType</span> <span class="nf">getType</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">type_</span><span class="p">;</span> <span class="p">}</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">ShapeType</span> <span class="n">type_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>È¶ñÂÖàÔºåÊàë‰ª¨ÂºïÂÖ•‰∫ÜÊûö‰∏æ <code>ShapeType</code>ÔºåÂÆÉÁõÆÂâçÂàóÂá∫‰∫Ü‰∏§‰∏™Êûö‰∏æÂÄºÔºö<code>circle</code> Âíå <code>square</code>ÔºåÊòæÁÑ∂ÔºåÊàë‰ª¨ÊúÄÂàùÂè™Â§ÑÁêÜÂúÜÂΩ¢ÂíåÊñπÂΩ¢„ÄÇ</p>
<p>ÂÖ∂Ê¨°ÔºåÊàë‰ª¨ÂºïÂÖ•‰∫ÜÁ±ª <code>Shape</code>„ÄÇËÄÉËôëÂà∞‰øùÊä§ÊûÑÈÄ†ÂáΩÊï∞ÂíåËôöÊûêÊûÑÂáΩÊï∞Ôºå‰Ω†ÂèØ‰ª•È¢ÑËßÅ <code>Shape</code> ÊòØ‰Ωú‰∏∫Âü∫Á±ª‰ΩøÁî®ÁöÑ„ÄÇ<br/>‰ΩÜËøôÂπ∂‰∏çÊòØ <code>Shape</code> ÊúÄ‰ª§‰∫∫ÊÉäËÆ∂ÁöÑÁªÜËäÇÔºö<code>Shape</code> Êúâ‰∏Ä‰∏™Á±ªÂûã‰∏∫ <code>ShapeType</code> ÁöÑÊï∞ÊçÆÊàêÂëòÔºåËøô‰∏™Êï∞ÊçÆÊàêÂëòÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞ÂàùÂßãÂåñÔºåÂπ∂ÂèØ‰ª•ÈÄöËøá <code>getType()</code> ÊàêÂëòÂáΩÊï∞Êü•ËØ¢„ÄÇ</p>
<p>ÊòæÁÑ∂Ôºå<code>Shape</code> Â∞ÜÂÖ∂Á±ªÂûã‰ª• <code>ShapeType</code> Êûö‰∏æÁöÑÂΩ¢ÂºèÂ≠òÂÇ®„ÄÇ</p>
<p><code>Shape</code> Âü∫Á±ªÁöÑ‰∏Ä‰∏™‰ΩøÁî®Á§∫‰æãÊòØ <code>Circle</code> Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Point.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"> <span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span> <span class="kt">double</span> <span class="n">radius</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">      <span class="o">:</span> <span class="n">Shape</span><span class="p">(</span> <span class="n">circle</span> <span class="p">)</span>   
</span></span><span class="line"><span class="cl">      <span class="p">,</span> <span class="n">radius_</span><span class="p">(</span> <span class="n">radius</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="cm">/* Checking that the given radius is valid */</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="nf">center</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">center_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"> <span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="n">center_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Circle</code> ÂÖ¨ÂºÄÁªßÊâøËá™ <code>Shape</code>ÔºåÂõ†Ê≠§Áî±‰∫é <code>Shape</code> Áº∫Â∞ëÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºåÈúÄË¶ÅÂàùÂßãÂåñÂü∫Á±ª„ÄÇ<br/>Âõ†‰∏∫ÂÆÉÊòØÂúÜÂΩ¢ÔºåÊâÄ‰ª•ÂÆÉ‰ΩøÁî® <code>circle</code> Êûö‰∏æÂÄº‰Ωú‰∏∫Âü∫Á±ªÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂèÇÊï∞„ÄÇ</p>
<p>Ê≠£Â¶Ç‰πãÂâçÊâÄËø∞ÔºåÊàë‰ª¨Â∏åÊúõÁªòÂà∂ÂΩ¢Áä∂„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÂºïÂÖ•‰∫ÜÁî®‰∫éÂúÜÂΩ¢ÁöÑ <code>draw()</code> ÂáΩÊï∞„ÄÇ<br/>‰∏∫‰∫ÜÈÅøÂÖç‰∏é‰ªª‰ΩïÁªòÂõæÂÆûÁé∞ÁªÜËäÇÁ¥ßÂØÜËÄ¶ÂêàÔºå<code>draw()</code> ÂáΩÊï∞Âú®Ê¶ÇÂøµÊÄßÂ§¥Êñá‰ª∂ <code>DrawCircle.h</code> ‰∏≠Â£∞ÊòéÔºåÂú®ÂØπÂ∫îÁöÑÊ∫êÊñá‰ª∂‰∏≠ÂÆö‰πâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawCircle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Circle</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span> <span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawCircle.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;DrawCircle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* some graphics library */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span> <span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">c</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Implementing the logic for drawing a circle 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩìÁÑ∂Ôºå‰∏ç‰ªÖ‰ªÖÊòØÂúÜÂΩ¢ÔºåÂ¶Ç square Êûö‰∏æÊâÄÁ§∫ÔºåËøòÊúâ‰∏Ä‰∏™ Square Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Point.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"> <span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">explicit</span> <span class="n">Square</span><span class="p">(</span> <span class="kt">double</span> <span class="n">side</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">      <span class="o">:</span> <span class="n">Shape</span><span class="p">(</span> <span class="n">square</span> <span class="p">)</span>   
</span></span><span class="line"><span class="cl">      <span class="p">,</span> <span class="n">side_</span><span class="p">(</span> <span class="n">side</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="cm">/* Checking that the given side length is valid */</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="nf">side</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">side_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="nf">center</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">center_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="n">side_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="n">center_</span><span class="p">{};</span>  <span class="c1">// Or any corner, if you prefer 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawSquare.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span> <span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawSquare.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawSquare.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* some graphics library */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span> <span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">s</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... Implementing the logic for drawing a square 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Square</code> Á±ª‰∏é <code>Circle</code> Á±ªÈùûÂ∏∏Áõ∏‰ºº„ÄÇ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫é <code>Square</code> ‰ΩøÁî® <code>square</code> Êûö‰∏æÂÄºÂàùÂßãÂåñÂÖ∂Âü∫Á±ª„ÄÇ</p>
<p>Áé∞Âú®Êúâ‰∫ÜÂúÜÂΩ¢ÂíåÊñπÂΩ¢ÔºåÊàë‰ª¨Â∏åÊúõÁªòÂà∂Êï¥‰∏™‰∏çÂêåÂΩ¢Áä∂ÁöÑÂêëÈáè„ÄÇ‰∏∫Ê≠§ÔºåÊàë‰ª¨ÂºïÂÖ•‰∫Ü <code>drawAllShapes()</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawAllShapes.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Shape</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">drawAllShapes</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shapes</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawAllShapes.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawAllShapes.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">drawAllShapes</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shapes</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">for</span><span class="p">(</span> <span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">shape</span> <span class="p">:</span> <span class="n">shapes</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="k">switch</span><span class="p">(</span> <span class="n">shape</span><span class="o">-&gt;</span><span class="n">getType</span><span class="p">()</span> <span class="p">)</span>   
</span></span><span class="line"><span class="cl">      <span class="p">{</span> 
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">circle</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl">            <span class="n">draw</span><span class="p">(</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;&gt;</span><span class="p">(</span> <span class="o">*</span><span class="n">shape</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">square</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl">            <span class="n">draw</span><span class="p">(</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Square</span> <span class="k">const</span><span class="o">&amp;&gt;</span><span class="p">(</span> <span class="o">*</span><span class="n">shape</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">      <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>drawAllShapes()</code>  Êé•Âèó‰∏Ä‰∏™ <code>std::unique_ptr&lt;Shape&gt; </code> ÂΩ¢ÂºèÁöÑÂΩ¢Áä∂ÂêëÈáèÔºåÊåáÂêëÂü∫Á±ªÁöÑÊåáÈíàÊòØ‰∏∫‰∫ÜÂÆπÁ∫≥‰∏çÂêåÁßçÁ±ªÁöÑÂÖ∑‰ΩìÂΩ¢Áä∂ÔºåËÄå std::unique_ptr ÂàôÁî®‰∫éÈÄöËøá RAII ÊÉØÁî®Ê≥ïËá™Âä®ÁÆ°ÁêÜËøô‰∫õÂΩ¢Áä∂„ÄÇ</p>
<p>Âú®ÂáΩÊï∞ÂÜÖÈÉ®ÔºåÊàë‰ª¨ÂºÄÂßãÈÅçÂéÜÂêëÈáè‰ª•ÁªòÂà∂ÊØè‰∏™ÂΩ¢Áä∂„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÊ≠§Êó∂Êàë‰ª¨Âè™Êúâ Shape ÊåáÈíà„ÄÇ<br/>Âõ†Ê≠§ÔºåÊàë‰ª¨ÈúÄË¶ÅÈÄöËøá getType() ÂáΩÊï∞ËØ¢ÈóÆÊØè‰∏™ÂΩ¢Áä∂Ôºö‰Ω†ÊòØ‰ªÄ‰πàÁ±ªÂûãÁöÑÂΩ¢Áä∂ÔºüÂ¶ÇÊûúÂΩ¢Áä∂ÂõûÂ§ç circleÔºåÊàë‰ª¨Áü•ÈÅìÂøÖÈ°ªÂ∞ÜÂÖ∂ÁªòÂà∂‰∏∫ Circle Âπ∂ÊâßË°åÁõ∏Â∫îÁöÑ static_cast„ÄÇÂ¶ÇÊûúÂΩ¢Áä∂ÂõûÂ§ç squareÔºåÊàë‰ª¨Â∞ÜÂÖ∂ÁªòÂà∂‰∏∫ Square„ÄÇ</p>
<p>ÊàëÊÑüËßâ‰Ω†ÂØπËøô‰∏™Ëß£ÂÜ≥ÊñπÊ°à‰∏çÂ§™Êª°ÊÑè„ÄÇ‰ΩÜÂú®ËÆ®ËÆ∫ÂÖ∂‰∏çË∂≥‰πãÂ§Ñ‰πãÂâçÔºåËÆ©Êàë‰ª¨ÂÖàÁúãÁúã main() ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Main.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawAllShapes.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">Shapes</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// Creating some shapes 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Shapes</span> <span class="n">shapes</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span> <span class="mf">2.3</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Square</span><span class="o">&gt;</span><span class="p">(</span> <span class="mf">1.2</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span> <span class="mf">4.1</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// Drawing all shapes 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">drawAllShapes</span><span class="p">(</span> <span class="n">shapes</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆÉÁ°ÆÂÆûÂèØ‰ª•Â∑•‰ΩúÔºÅ‰ΩøÁî®Ëøô‰∏™ main() ÂáΩÊï∞Ôºå‰ª£Á†ÅÁºñËØëÂπ∂ÁªòÂà∂‰∏â‰∏™ÂΩ¢Áä∂Ôºà‰∏§‰∏™ÂúÜÂΩ¢Âíå‰∏Ä‰∏™ÊñπÂΩ¢Ôºâ„ÄÇ<br/>Ëøô‰∏çÊòØÂæàÂ•ΩÂêóÔºüÊòØÁöÑÔºå‰ΩÜÂÆÉ‰∏ç‰ºöÈòªÊ≠¢‰Ω†ÂØπÊ≠§ÊñπÊ°àËøõË°åÊä±ÊÄ®Ôºö‚ÄúÂ§ö‰πàÂéüÂßãÁöÑËß£ÂÜ≥ÊñπÊ°àÔºÅ‰∏ç‰ªÖ‰ΩøÁî® switch Êù•Âå∫ÂàÜ‰∏çÂêåÁßçÁ±ªÁöÑÂΩ¢Áä∂ÊòØ‰∏™Á≥üÁ≥ïÁöÑÈÄâÊã©ÔºåËÄå‰∏îËøòÊ≤°ÊúâÈªòËÆ§ÊÉÖÂÜµÔºÅËøòÊúâË∞ÅÊúâËøô‰∏™ÁñØÁãÇÁöÑÊÉ≥Ê≥ïÔºåÈÄöËøáÊú™ÈôêÂÆöËåÉÂõ¥ÁöÑÊûö‰∏æÊù•ÁºñÁ†ÅÂΩ¢Áä∂ÁöÑÁ±ªÂûãÔºü‚Äù</p>
<p>‰Ω†ÊÄÄÁñëÂú∞ÁúãÂêëÊàëÁöÑÊñπÂêë‚Ä¶‚Ä¶</p>
<p>Â•ΩÂêßÔºåÊàëËÉΩÁêÜËß£‰Ω†ÁöÑÂèçÂ∫î„ÄÇ‰ΩÜËÆ©Êàë‰ª¨Êõ¥ËØ¶ÁªÜÂú∞ÂàÜÊûêËøô‰∏™ÈóÆÈ¢ò„ÄÇ<br/>ËÆ©ÊàëÁåú‰∏Ä‰∏ãÔºö‰Ω†ËÆ∞Âæó‚ÄúÂáÜÂàô5ÔºöËÆæËÆ°Êâ©Â±ï‚ÄùÔºå‰Ω†Áé∞Âú®ÊÉ≥Ë±°Ê∑ªÂä†Á¨¨‰∏âÁßçÂΩ¢Áä∂ÈúÄË¶ÅÂÅö‰ªÄ‰πà„ÄÇ<br/>È¶ñÂÖàÔºå‰Ω†ÈúÄË¶ÅÊâ©Â±ïÊûö‰∏æ„ÄÇ‰æãÂ¶ÇÔºåÊàë‰ª¨ÈúÄË¶ÅÊ∑ªÂä†Êñ∞ÁöÑÊûö‰∏æÂÄº triangleÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">ShapeType</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">circle</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">square</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">triangle</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ∑Ê≥®ÊÑèÔºåËøôÁßçÊ∑ªÂä†‰∏ç‰ªÖ‰ºöÂΩ±Âìç drawAllShapes() ÂáΩÊï∞‰∏≠ÁöÑ switch ËØ≠Âè•ÔºàÁé∞Âú®ÁúüÊ≠£‰∏çÂÆåÊï¥ÔºâÔºåËøò‰ºöÂΩ±ÂìçÊâÄÊúâ‰ªé Shape ÁªßÊâøÁöÑÁ±ªÔºàCircle Âíå SquareÔºâ„ÄÇ<br/>Ëøô‰∫õÁ±ª‰æùËµñ‰∫éÊûö‰∏æÔºåÂõ†‰∏∫ÂÆÉ‰ª¨‰æùËµñ‰∫é Shape Âü∫Á±ªÂπ∂‰∏îÁõ¥Êé•‰ΩøÁî®ËØ•Êûö‰∏æ„ÄÇ<br/>Âõ†Ê≠§ÔºåÊõ¥ÊîπÊûö‰∏æÂ∞ÜÂØºËá¥ÊâÄÊúâÁõ∏ÂÖ≥Ê∫êÊñá‰ª∂ÈáçÊñ∞ÁºñËØëÔºå‰Ω†Â∫îËØ•ËÆ§ËØÜÂà∞ËøôÊòØ‰∏Ä‰∏™‰∏•ÈáçÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p>‰∫ãÂÆû‰∏äÔºåÈóÆÈ¢òÁöÑÊ†∏ÂøÉÊòØÊâÄÊúâÂΩ¢Áä∂Á±ªÂíåÂáΩÊï∞ÂØπÊûö‰∏æÁöÑÁõ¥Êé•‰æùËµñÔºå‰ªª‰ΩïÂØπÊûö‰∏æÁöÑÊõ¥ÊîπÈÉΩ‰ºöÂºïÂèëËøûÈîÅÂèçÂ∫îÔºåË¶ÅÊ±Ç‰æùËµñÊñá‰ª∂ÈáçÊñ∞ÁºñËØë„ÄÇ<br/>ÊòæÁÑ∂ÔºåËøôÁõ¥Êé•ËøùÂèç‰∫ÜÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâÔºàËßÅ‚ÄúÂáÜÂàô5ÔºöËÆæËÆ°Êâ©Â±ï‚ÄùÔºâ„ÄÇ<br/>ËøôÁúãËµ∑Êù•‰∏çÂØπÔºöÊ∑ªÂä†‰∏Ä‰∏™ Triangle ‰∏çÂ∫îËØ•ÂØºËá¥ Circle Âíå Square Á±ªÈáçÊñ∞ÁºñËØë„ÄÇ</p>
<p>ËøòÊúâÊõ¥Â§öÈóÆÈ¢ò„ÄÇÈô§‰∫ÜÂÆûÈôÖÁºñÂÜô‰∏Ä‰∏™ Triangle Á±ªÔºàËøô‰∏™ÁïôÁªô‰Ω†Ëá™Â∑±ÊÉ≥Ë±°ÔºâÔºå‰Ω†ËøòÈúÄË¶ÅÊõ¥Êñ∞ switch ËØ≠Âè•‰ª•Â§ÑÁêÜ‰∏âËßíÂΩ¢Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">drawAllShapes</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shapes</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">for</span><span class="p">(</span> <span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">shape</span> <span class="p">:</span> <span class="n">shapes</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="k">switch</span><span class="p">(</span> <span class="n">shape</span><span class="o">-&gt;</span><span class="n">getType</span><span class="p">()</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">      <span class="p">{</span> 
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">circle</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl">            <span class="n">draw</span><span class="p">(</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;&gt;</span><span class="p">(</span> <span class="o">*</span><span class="n">shape</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">square</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl">            <span class="n">draw</span><span class="p">(</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Square</span> <span class="k">const</span><span class="o">&amp;&gt;</span><span class="p">(</span> <span class="o">*</span><span class="n">shape</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">triangle</span><span class="p">:</span>   
</span></span><span class="line"><span class="cl">            <span class="n">draw</span><span class="p">(</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Triangle</span> <span class="k">const</span><span class="o">&amp;&gt;</span><span class="p">(</span> <span class="o">*</span><span class="n">shape</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">      <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàëÂèØ‰ª•ÊÉ≥Ë±°‰Ω†ÁöÑÊäóËÆÆÔºö‚ÄúÂ§çÂà∂Á≤òË¥¥ÔºÅÈáçÂ§çÔºÅ‚ÄùÊòØÁöÑÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂºÄÂèëËÄÖÂæàÂèØËÉΩ‰ºö‰ΩøÁî®Â§çÂà∂Á≤òË¥¥Êù•ÂÆûÁé∞Êñ∞ÈÄªËæëÔºåËøôÊ†∑ÂÅöÂæàÊñπ‰æøÔºåÂõ†‰∏∫Êñ∞ÊÉÖÂÜµ‰∏éÂâç‰∏§ÁßçÊÉÖÂÜµÈùûÂ∏∏Áõ∏‰ºº„ÄÇ</p>
<p>ÂÆûÈôÖ‰∏äÔºåËøôË°®ÊòéËÆæËÆ°ÂèØ‰ª•ÊîπËøõ„ÄÇÁÑ∂ËÄåÔºåÊàëÁúãÂà∞‰∏Ä‰∏™Êõ¥‰∏∫‰∏•ÈáçÁöÑÁº∫Èô∑ÔºöÂú®‰∏Ä‰∏™Êõ¥Â§ßÁöÑ‰ª£Á†ÅÂ∫ì‰∏≠ÔºåËøô‰∏ç‰ºöÊòØÂîØ‰∏ÄÁöÑ <code>switch</code> ËØ≠Âè•„ÄÇÁõ∏ÂèçÔºå‰ºöÊúâÂÖ∂‰ªñÈúÄË¶ÅÊõ¥Êñ∞ÁöÑ <code>switch</code> ËØ≠Âè•„ÄÇ<br/>ÊúâÂ§öÂ∞ë‰∏™ÔºüÂçÅÂá†‰∏™Ôºü‰∫îÂçÅ‰∏™ÔºüË∂ÖËøá‰∏ÄÁôæ‰∏™Ôºü‰Ω†Â¶Ç‰ΩïÊâæÂà∞ÊâÄÊúâËøô‰∫õÔºüÂ•ΩÂêßÔºå‰Ω†ÂèØËÉΩ‰ºö‰∫âËæ©ËØ¥ÁºñËØëÂô®‰ºöÂ∏ÆÂä©‰Ω†ÂÆåÊàêËøôÈ°π‰ªªÂä°„ÄÇÂØπ‰∫é <code>switch</code> ËØ≠Âè•ÂèØËÉΩÊòØËøôÊ†∑Ôºå‰ΩÜÂ¶ÇÊûú‰πüÊúâ <code>if-else-if</code> Á∫ßËÅîÂë¢Ôºü<br/>ÁÑ∂ÂêéÔºåÂú®Êõ¥Êñ∞È©¨ÊãâÊùæÁªìÊùüÂêéÔºåÂΩì‰Ω†ËÆ§‰∏∫Â∑≤ÁªèÂÆåÊàêÊó∂ÔºåÂ¶Ç‰Ωï‰øùËØÅ‰Ω†ÁúüÊ≠£Êõ¥Êñ∞‰∫ÜÊâÄÊúâÂøÖË¶ÅÁöÑÈÉ®ÂàÜÔºü</p>
<p>ÊòØÁöÑÔºåÊàëËÉΩÁêÜËß£‰Ω†ÁöÑÂèçÂ∫î‰ª•Âèä‰∏∫‰ªÄ‰πà‰Ω†‰∏çÂñúÊ¨¢ËøôÁßç‰ª£Á†ÅÔºöËøôÁßçÊòæÂºèÂ§ÑÁêÜÁ±ªÂûãÁöÑÊñπÂºèÊòØ‰∏Ä‰∏™Áª¥Êä§Âô©Ê¢¶„ÄÇ<br/>ÂºïÁî® Scott Meyers ÁöÑËØùÔºö</p>
<p><strong>ËøôÁßçÂü∫‰∫éÁ±ªÂûãÁöÑÁºñÁ®ãÂú® C ËØ≠Ë®Ä‰∏≠ÊúâÂæàÈïøÁöÑÂéÜÂè≤ÔºåÊàë‰ª¨Áü•ÈÅìÂÆÉ‰ºöÂØºËá¥Âü∫Êú¨‰∏ä‰∏çÂèØÁª¥Êä§ÁöÑÁ®ãÂ∫è„ÄÇ</strong></p>
<p><strong>Èù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°à</strong></p>
<p>ÈÇ£‰πàËÆ©ÊàëÈóÆ‰∏Ä‰∏ãÔºö‰Ω†‰ºöÊÄé‰πàÂÅöÔºü‰Ω†‰ºöÂ¶Ç‰ΩïÂÆûÁé∞ÂΩ¢Áä∂ÁöÑÁªòÂà∂ÔºüÊàëÁåú‰Ω†ÂèØËÉΩ‰ºö‰ΩøÁî®Èù¢ÂêëÂØπË±°ÁöÑÊñπÊ≥ïÔºåËøôÊÑèÂë≥ÁùÄ‰Ω†‰ºöÊäõÂºÉÊûö‰∏æÔºåÂπ∂Âú® <code>Shape</code> Âü∫Á±ª‰∏≠Ê∑ªÂä†‰∏Ä‰∏™Á∫ØËôöÂáΩÊï∞ <code>draw()</code>„ÄÇ<br/>ËøôÊ†∑Ôºå<code>Shape</code> Â∞±‰∏çÂÜçÈúÄË¶ÅËÆ∞‰ΩèÂÆÉÁöÑÁ±ªÂûã‰∫ÜÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"> <span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êúâ‰∫ÜËøô‰∏™Âü∫Á±ªÔºåÊ¥æÁîüÁ±ªÁé∞Âú®Âè™ÈúÄË¶ÅÂÆûÁé∞ <code>draw()</code> ÊàêÂëòÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Point.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"> <span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span> <span class="kt">double</span> <span class="n">radius</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">      <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span> <span class="n">radius</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="cm">/* Checking that the given radius is valid */</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="nf">center</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">center_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="n">center_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* some graphics library */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Circle</span><span class="o">::</span><span class="n">draw</span><span class="p">()</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... Implementing the logic for drawing a circle 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Point.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"> <span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">explicit</span> <span class="n">Square</span><span class="p">(</span> <span class="kt">double</span> <span class="n">side</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">      <span class="o">:</span> <span class="n">side_</span><span class="p">(</span> <span class="n">side</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="cm">/* Checking that the given side length is valid */</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="nf">side</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">side_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="nf">center</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">center_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="n">side_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="n">center_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* some graphics library */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Square</span><span class="o">::</span><span class="n">draw</span><span class="p">()</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... Implementing the logic for drawing a square 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏ÄÊó¶  <code>virtual draw()</code> ÂáΩÊï∞Âà∞‰ΩçÂπ∂Áî±ÊâÄÊúâÊ¥æÁîüÁ±ªÂÆûÁé∞ÔºåÂ∞±ÂèØ‰ª•Áî®ÂÆÉÊù•ÈáçÊûÑ <code>drawAllShapes()</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawAllShapes.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Shape</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">drawAllShapes</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shapes</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawAllShapes.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;DrawAllShapes.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="nf">drawAllShapes</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shapes</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span> <span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">shape</span> <span class="p">:</span> <span class="n">shapes</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">shape</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàëÂèØ‰ª•ÁúãËßÅ‰Ω†ÊîæÊùæ‰∏ãÊù•ÔºåÂºÄÂßãÂæÆÁ¨ëÔºåËøôÁúãËµ∑Êù•Â•ΩÂ§ö‰∫ÜÔºåÊõ¥Âä†ÁÆÄÊ¥Å„ÄÇ<br/>ËôΩÁÑ∂ÊàëÁü•ÈÅì‰Ω†ÂñúÊ¨¢Ëøô‰∏™Ëß£ÂÜ≥ÊñπÊ°àÔºåÂπ∂Â∏åÊúõÂú®Ëøô‰∏™ËàíÈÄÇÂå∫Â§öÂæÖ‰∏Ä‰ºöÂÑøÔºå‰ΩÜ‰∏çÂπ∏ÁöÑÊòØÔºåÊàëÂøÖÈ°ªÊåáÂá∫ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™Áº∫Èô∑„ÄÇÊòØÁöÑÔºåËøô‰∏™Ëß£ÂÜ≥ÊñπÊ°à‰πüÂèØËÉΩÊúâÁº∫ÁÇπ„ÄÇ</p>
<p>Ê≠£Â¶ÇÊú¨ËäÇÂºÄÂ§¥ÊâÄÊèêÂà∞ÁöÑÔºåÈÄöËøáÈù¢ÂêëÂØπË±°ÁöÑÊñπÊ≥ïÔºåÊàë‰ª¨Áé∞Âú®ÂèØ‰ª•ÈùûÂ∏∏ÂÆπÊòìÂú∞Ê∑ªÂä†Êñ∞Á±ªÂûãÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÁºñÂÜô‰∏Ä‰∏™Êñ∞ÁöÑÊ¥æÁîüÁ±ªÂç≥ÂèØÔºåÊàë‰ª¨‰∏çÈúÄË¶Å‰øÆÊîπÊàñÈáçÊñ∞ÁºñËØë‰ªª‰ΩïÁé∞Êúâ‰ª£Á†Å(Èô§‰∫Ü main() ÂáΩÊï∞),ËøôÂÆåÁæéÂú∞Êª°Ë∂≥‰∫Ü<strong>ÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàô(OCP)</strong>„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºå‰Ω†ÊòØÂê¶Ê≥®ÊÑèÂà∞Êàë‰ª¨‰∏çËÉΩÂÜçËΩªÊùæÂú∞Ê∑ªÂä†Êìç‰Ωú‰∫ÜÔºü<br/>‰æãÂ¶ÇÔºåÂÅáËÆæÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™ <strong>virtual serialize() ÂáΩÊï∞</strong> Â∞Ü Shape ËΩ¨Êç¢‰∏∫Â≠óËäÇÊµÅÔºå<br/>Êàë‰ª¨Â¶Ç‰ΩïÂú®‰∏ç‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÁöÑÊÉÖÂÜµ‰∏ãÊ∑ªÂä†Ëøô‰∏™ÂäüËÉΩÔºü‰ªª‰Ωï‰∫∫Â¶Ç‰ΩïÂú®‰∏ç‰øÆÊîπ Shape Âü∫Á±ªÁöÑÊÉÖÂÜµ‰∏ãËΩªÊùæÊ∑ªÂä†Ëøô‰∏™Êìç‰ΩúÔºü</p>
<p>‰∏çÂπ∏ÁöÑÊòØÔºåËøôÂ∑≤Áªè‰∏çÂèØËÉΩ‰∫ÜÔºåÊàë‰ª¨Áé∞Âú®Â§ÑÁêÜÁöÑÊòØ‰∏Ä‰∏™Â∞ÅÈó≠ÁöÑÊìç‰ΩúÈõÜÔºåËøôÊÑèÂë≥ÁùÄÊàë‰ª¨Âú®Ê∑ªÂä†Êìç‰ΩúÊó∂ËøùÂèç‰∫Ü OCP„ÄÇ<br/>Ë¶ÅÊ∑ªÂä†ËôöÊãüÂáΩÊï∞ÔºåÂü∫Á±ªÈúÄË¶ÅË¢´‰øÆÊîπÔºåÊâÄÊúâÊ¥æÁîüÁ±ªÔºàÂúÜÂΩ¢„ÄÅÊñπÂΩ¢Á≠âÔºâÈÉΩÈúÄË¶ÅÂÆûÁé∞Êñ∞ÁöÑÂáΩÊï∞ÔºåÂç≥‰ΩøËØ•ÂáΩÊï∞ÂèØËÉΩÊ∞∏Ëøú‰∏ç‰ºöË¢´Ë∞ÉÁî®„ÄÇ<br/>ÊÄª‰πãÔºåÈù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°àÂú®Ê∑ªÂä†Á±ªÂûãÊñπÈù¢Á¨¶Âêà OCPÔºå‰ΩÜÂú®Ê∑ªÂä†Êìç‰ΩúÊñπÈù¢ËøùÂèç‰∫ÜÂÆÉ„ÄÇ</p>
<p>ÊàëÁü•ÈÅì‰Ω†‰ª•‰∏∫Êàë‰ª¨Â∑≤ÁªèÂΩªÂ∫ïÂëäÂà´‰∫ÜËøáÁ®ãÂºèËß£ÂÜ≥ÊñπÊ°àÔºå‰ΩÜËÆ©Êàë‰ª¨ÂÜçÁúã‰∏ÄÁúºÔºåÂú®ËøáÁ®ãÂºèÊñπÊ≥ï‰∏≠ÔºåÊ∑ªÂä†Êñ∞Êìç‰ΩúÂÆûÈôÖ‰∏äÈùûÂ∏∏ÁÆÄÂçï„ÄÇ<br/>Êñ∞Êìç‰ΩúÂèØ‰ª•ÈÄöËøáËá™Áî±ÂáΩÊï∞ÊàñÁã¨Á´ãÁ±ªÁöÑÂΩ¢ÂºèÊ∑ªÂä†Ôºå‰∏çÈúÄË¶Å‰øÆÊîπ Shape Âü∫Á±ªÊàñ‰ªª‰ΩïÊ¥æÁîüÁ±ª„ÄÇ<br/>Âõ†Ê≠§ÔºåÂú®ËøáÁ®ãÂºèËß£ÂÜ≥ÊñπÊ°à‰∏≠ÔºåÊàë‰ª¨Âú®Ê∑ªÂä†Êìç‰ΩúÊñπÈù¢Á¨¶Âêà OCPÔºå‰ΩÜÊòØÂ¶ÇÊàë‰ª¨ÊâÄËßÅÔºåËøáÁ®ãÂºèËß£ÂÜ≥ÊñπÊ°àÂú®Ê∑ªÂä†Á±ªÂûãÊó∂ËøùÂèç‰∫Ü OCP„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂÆÉ‰ºº‰πéÊòØÈù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°àÁöÑÂÄíÁΩÆÔºåÂèç‰πã‰∫¶ÁÑ∂„ÄÇ</p>
<p><strong>Ê≥®ÊÑèÂä®ÊÄÅÂ§öÊÄÅÊÄß‰∏≠ÁöÑËÆæËÆ°ÈÄâÊã©</strong></p>
<p>Ëøô‰∏™‰æãÂ≠êÁöÑÂÖ≥ÈîÆÂú®‰∫é‰ΩøÁî®Âä®ÊÄÅÂ§öÊÄÅÊÄßÊó∂Â≠òÂú®‰∏Ä‰∏™ËÆæËÆ°ÈÄâÊã©ÔºöË¶Å‰πà‰Ω†ÂèØ‰ª•ÈÄöËøáÂõ∫ÂÆöÊìç‰ΩúÁöÑÊï∞ÈáèÊù•ËΩªÊùæÊ∑ªÂä†Á±ªÂûãÔºåË¶Å‰πà‰Ω†ÂèØ‰ª•ÈÄöËøáÂõ∫ÂÆöÁ±ªÂûãÁöÑÊï∞ÈáèÊù•ËΩªÊùæÊ∑ªÂä†Êìç‰Ωú„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâÊúâ‰∏§‰∏™Áª¥Â∫¶ÔºöÂú®ËÆæËÆ°ËΩØ‰ª∂Êó∂Ôºå‰Ω†ÂøÖÈ°ªÊúâÊÑèËØÜÂú∞ÂÜ≥ÂÆö‰Ω†ÊúüÊúõÂì™ÁßçÊâ©Â±ï„ÄÇ</p>
<p>Èù¢ÂêëÂØπË±°ÁºñÁ®ãÁöÑ‰ºòÂäøÂú®‰∫éÂèØ‰ª•ËΩªÊùæÊ∑ªÂä†Êñ∞ÁöÑÁ±ªÂûãÔºå‰ΩÜÂÖ∂Âº±ÁÇπÊòØÊ∑ªÂä†Êìç‰ΩúÂèòÂæóÊõ¥Âä†Âõ∞Èöæ„ÄÇ</p>
<p>ËøáÁ®ãÂºèÁºñÁ®ãÁöÑ‰ºòÂäøÂú®‰∫éÂèØ‰ª•ËΩªÊùæÊ∑ªÂä†Êìç‰ΩúÔºå‰ΩÜÊ∑ªÂä†Á±ªÂûãÂàôÈùûÂ∏∏È∫ªÁÉ¶ÔºàËßÅË°®4-1Ôºâ„ÄÇ</p>
<p><strong>ËøôÂèñÂÜ≥‰∫é‰Ω†ÁöÑÈ°πÁõÆ</strong>Ôºö<br/>Â¶ÇÊûú‰Ω†È¢ÑËÆ°‰ºöÈ¢ëÁπÅÊ∑ªÂä†Êñ∞Á±ªÂûãËÄå‰∏çÊòØÊìç‰ΩúÔºå‰Ω†Â∫îËØ•Âä™ÂäõÂÆûÁé∞‰∏ÄÁßçÂ∞ÜÊìç‰ΩúËßÜ‰∏∫Â∞ÅÈó≠ÈõÜ„ÄÅÁ±ªÂûãËßÜ‰∏∫ÂºÄÊîæÈõÜÁöÑOCPËß£ÂÜ≥ÊñπÊ°à„ÄÇ<br/>Â¶ÇÊûú‰Ω†È¢ÑËÆ°‰ºöÊ∑ªÂä†Êìç‰ΩúÔºå‰Ω†Â∫îËØ•Âä™ÂäõÂÆûÁé∞‰∏ÄÁßçÂ∞ÜÁ±ªÂûãËßÜ‰∏∫Â∞ÅÈó≠ÈõÜ„ÄÅÊìç‰ΩúËßÜ‰∏∫ÂºÄÊîæÈõÜÁöÑËøáÁ®ãÂºèËß£ÂÜ≥ÊñπÊ°à„ÄÇÂ¶ÇÊûúÂÅöÂá∫‰∫ÜÊ≠£Á°ÆÁöÑÈÄâÊã©Ôºå‰Ω†Â∞ÜËäÇÁúÅËá™Â∑±ÂíåÂêå‰∫ãÁöÑÊó∂Èó¥ÔºåÂπ∂‰∏îÊâ©Â±ïÂ∞Ü‰ºöÂèòÂæóËá™ÁÑ∂ÂíåÂÆπÊòì„ÄÇ</p>
<p><strong>Ë°®4-1. ‰∏çÂêåÁºñÁ®ãËåÉÂºèÁöÑ‰ºòÁº∫ÁÇπ</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÁºñÁ®ãËåÉÂºè</th>
<th>‰ºòÁÇπ</th>
<th>Áº∫ÁÇπ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ËøáÁ®ãÂºèÁºñÁ®ã</td>
<td>Ê∑ªÂä†Êìç‰Ωú</td>
<td>Ê∑ªÂä†ÔºàÂ§öÊÄÅÔºâÁ±ªÂûã</td>
</tr>
<tr>
<td>Èù¢ÂêëÂØπË±°ÁºñÁ®ã</td>
<td>Ê∑ªÂä†ÔºàÂ§öÊÄÅÔºâÁ±ªÂûã</td>
<td>Ê∑ªÂä†Êìç‰Ωú</td>
</tr>
</tbody>
</table></div>
<p>Ê≥®ÊÑèËøô‰∫õ‰ºòÂäøÔºöÂü∫‰∫é‰Ω†ÂØπ‰ª£Á†ÅÂ∫ìÂ¶Ç‰ΩïÊºîÂåñÁöÑÈ¢ÑÊúüÔºåÈÄâÊã©ÂêàÈÄÇÁöÑËÆæËÆ°ÊñπÊ≥ï‰ª•ÊîØÊåÅÊâ©Â±ï„ÄÇ‰∏çË¶ÅÂøΩËßÜËøô‰∫õÂº±ÁÇπÔºå‰πü‰∏çË¶ÅËÆ©Ëá™Â∑±Èô∑ÂÖ•‰∏çÂπ∏ÁöÑÁª¥Êä§Âô©Ê¢¶„ÄÇ</p>
<p>ÊàëÁåú‰Ω†Áé∞Âú®ÂèØËÉΩÂú®ÊÉ≥ÊòØÂê¶ÊúâÂèØËÉΩÂêåÊó∂Êã•Êúâ‰∏§‰∏™ÂºÄÊîæÈõÜÔºåÊçÆÊàëÊâÄÁü•ÔºåËøô‰∏çÊòØ‰∏çÂèØËÉΩÁöÑÔºå‰ΩÜÈÄöÂ∏∏‰∏çÂàáÂÆûÈôÖ„ÄÇ<br/>‰æãÂ¶ÇÔºåÂú®‚ÄúÂáÜÂàô18ÔºöË≠¶ÊÉïÊó†ÁéØËÆøÈóÆËÄÖÁöÑÊÄßËÉΩ‚Äù‰∏≠ÔºåÊàë‰ºöÂ±ïÁ§∫ÊÄßËÉΩÂèØËÉΩ‰ºöÂèóÂà∞ÊòæËëóÂΩ±Âìç„ÄÇ</p>
<p>Áî±‰∫é‰Ω†ÂèØËÉΩÊòØÂü∫‰∫éÊ®°ÊùøÁöÑÁºñÁ®ãÂíåÁ±ª‰ººÁöÑÁºñËØëÊó∂Â∑•‰ΩúÁöÑÁ≤â‰∏ùÔºåÊàë‰πüÂ∫îËØ•ÊòéÁ°ÆÊåáÂá∫ÈùôÊÄÅÂ§öÊÄÅÊÄßÂπ∂Ê≤°ÊúâÁõ∏ÂêåÁöÑÈôêÂà∂„ÄÇ<br/>ËôΩÁÑ∂Âú®Âä®ÊÄÅÂ§öÊÄÅÊÄß‰∏≠ÔºåËÆæËÆ°ËΩ¥‰πã‰∏ÄÔºàÁ±ªÂûãÂíåÊìç‰ΩúÔºâÈúÄË¶ÅÂõ∫ÂÆöÔºå‰ΩÜÂú®ÈùôÊÄÅÂ§öÊÄÅÊÄß‰∏≠ÔºåËøô‰∏§Á±ª‰ø°ÊÅØÂú®ÁºñËØëÊó∂ÈÉΩÊòØÂèØÁî®ÁöÑ„ÄÇÂõ†Ê≠§Ôºå‰∏§ÊñπÈù¢ÈÉΩÂèØ‰ª•ËΩªÊùæÊâ©Â±ïÔºàÂ¶ÇÊûú‰Ω†ÂÅöÂæóÊ≠£Á°ÆÔºâ„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>
<p>Ê≥®ÊÑè‰∏çÂêåÁºñÁ®ãËåÉÂºèÁöÑ‰ºòÁº∫ÁÇπ„ÄÇ</p>
</li>
<li>
<p>Âà©Áî®ËåÉÂºèÁöÑ‰ºòÂäøÔºå‰ΩÜÈÅøÂÖçÂÖ∂Âº±ÁÇπ„ÄÇ</p>
</li>
<li>
<p>ÁêÜËß£Âä®ÊÄÅÂ§öÊÄÅÊÄß‰∏≠Á±ªÂûãÊàñÊìç‰ΩúÁöÑÊ∑ªÂä†ÈÄâÊã©„ÄÇ</p>
</li>
<li>
<p>ÂΩì‰Ω†‰∏ªË¶ÅÊÉ≥Ê∑ªÂä†Á±ªÂûãÊó∂Ôºå‰ºòÂÖàÈÄâÊã©Èù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
</li>
<li>
<p>ÂΩì‰Ω†‰∏ªË¶ÅÊÉ≥Ê∑ªÂä†Êìç‰ΩúÊó∂Ôºå‰ºòÂÖàÈÄâÊã©ËøáÁ®ãÂºè/ÂáΩÊï∞ÂºèËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
</li>
</ul>
<h3 id="ÂáÜÂàô16‰ΩøÁî®ËÆøÈóÆËÄÖÊ®°ÂºèÊâ©Â±ïÊìç‰Ωú">ÂáÜÂàô16Ôºö‰ΩøÁî®ËÆøÈóÆËÄÖÊ®°ÂºèÊâ©Â±ïÊìç‰Ωú
</h3><p>Âú®‰∏ä‰∏ÄËäÇ‰∏≠Ôºå‰Ω†ÁúãÂà∞Èù¢ÂêëÂØπË±°ÁºñÁ®ãÔºàOOPÔºâÁöÑ‰ºòÂäøÂú®‰∫éÂèØ‰ª•ËΩªÊùæÊ∑ªÂä†Á±ªÂûãÔºåËÄåÂÖ∂Âº±ÁÇπÂú®‰∫éÈöæ‰ª•Ê∑ªÂä†Êìç‰Ωú„ÄÇÂΩìÁÑ∂ÔºåOOPÂØπÊ≠§Êúâ‰∏Ä‰∏™Ëß£ÂÜ≥ÊñπÊ°àÔºöËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÊòØGang of FourÔºàGoFÔºâÊâÄÊèèËø∞ÁöÑÁªèÂÖ∏ËÆæËÆ°Ê®°Âºè‰πã‰∏Ä„ÄÇÂÆÉÁöÑÈáçÁÇπÂú®‰∫éÂÖÅËÆ∏‰Ω†È¢ëÁπÅÂú∞Ê∑ªÂä†Êìç‰ΩúËÄå‰∏çÊòØÁ±ªÂûã„ÄÇËÆ©ÊàëÈÄöËøáÂâçÈù¢ÁöÑÁ§∫‰æãÔºàÂΩ¢Áä∂ÁªòÂà∂ÔºâÊù•Ëß£ÈáäËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>Âú®Âõæ4-1‰∏≠Ôºå‰Ω†ÁúãÂà∞‰∫ÜÂΩ¢Áä∂Â±ÇÊ¨°ÁªìÊûÑ„ÄÇ<code>Shape</code>Á±ªÂÜçÊ¨°‰Ωú‰∏∫Â§ö‰∏™ÂÖ∑‰ΩìÂΩ¢Áä∂ÁöÑÂü∫Á±ª„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÂè™Êúâ‰∏§‰∏™Á±ªÔºö<code>Circle</code>Âíå<code>Square</code>Ôºå‰ΩÜÂΩìÁÑ∂‰πüÂèØ‰ª•ÊúâÊõ¥Â§öÁöÑÂΩ¢Áä∂Á±ªÔºå‰æãÂ¶Ç<code>Triangle</code>„ÄÅ<code>Rectangle</code>Êàñ<code>Ellipse</code>Á±ª„ÄÇ</p>
<p><strong>ÂàÜÊûêËÆæËÆ°ÈóÆÈ¢ò</strong></p>
<p>ÂÅáËÆæ‰Ω†Á°ÆÂÆöÂ∑≤ÁªèÊã•Êúâ‰∫ÜÊâÄÊúâ‰Ω†ÈúÄË¶ÅÁöÑÂΩ¢Áä∂Ôºå‰πüÂ∞±ÊòØËØ¥Ôºå‰Ω†ËÆ§‰∏∫ÂΩ¢Áä∂ÈõÜÂêàÊòØ‰∏Ä‰∏™Â∞ÅÈó≠ÈõÜ„ÄÇ<br/>ÁÑ∂ËÄåÔºå‰Ω†Áº∫Â∞ëÁöÑÊòØÈ¢ùÂ§ñÁöÑÊìç‰ΩúÔºå‰æãÂ¶ÇÔºå‰Ω†Áº∫Â∞ë‰∏Ä‰∏™ÊóãËΩ¨ÂΩ¢Áä∂ÁöÑÊìç‰ΩúÔºå‰Ω†‰πüÂ∏åÊúõÂ∫èÂàóÂåñÂΩ¢Áä∂ÔºåÂç≥Â∞ÜÂΩ¢Áä∂ÂÆû‰æãËΩ¨Êç¢‰∏∫Â≠óËäÇÊµÅ„ÄÇ<br/>ÂΩìÁÑ∂Ôºå‰Ω†ËøòÂ∏åÊúõÁªòÂà∂ÂΩ¢Áä∂„ÄÇÊ≠§Â§ñÔºå‰Ω†Â∏åÊúõ‰ªª‰Ωï‰∫∫ËÉΩÂ§üÊ∑ªÂä†Êñ∞ÁöÑÊìç‰Ωú„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå‰Ω†ÊúüÊúõÊúâ‰∏Ä‰∏™ÂºÄÊîæÁöÑÊìç‰ΩúÈõÜÔºåÊØè‰∏Ä‰∏™Êñ∞ÁöÑÊìç‰ΩúÁé∞Âú®ÈÉΩÈúÄË¶Å‰Ω†Âú®Âü∫Á±ª‰∏≠ÊèíÂÖ•‰∏Ä‰∏™Êñ∞ÁöÑËôöÂáΩÊï∞„ÄÇ<br/>‰∏çÂπ∏ÁöÑÊòØÔºåËøôÂú®‰∏çÂêåÁöÑÊñπÈù¢ÂèØËÉΩ‰ºöÂ∏¶Êù•È∫ªÁÉ¶ÔºåÊúÄÊòéÊòæÁöÑÊòØÔºåÂπ∂‰∏çÊòØÊØè‰∏™‰∫∫ÈÉΩËÉΩÂú® <code>Shape</code> Âü∫Á±ª‰∏≠Ê∑ªÂä†‰∏Ä‰∏™ËôöÂáΩÊï∞„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÊàë‰∏çËÉΩÁÆÄÂçïÂú∞Âéª‰øÆÊîπ‰Ω†ÁöÑ‰ª£Á†Å„ÄÇÂõ†Ê≠§ÔºåËøôÁßçÊñπÊ≥ïÊó†Ê≥ïÊª°Ë∂≥‰ªª‰Ωï‰∫∫ÈÉΩËÉΩÊ∑ªÂä†Êìç‰ΩúÁöÑÊúüÊúõÔºåËôΩÁÑ∂‰Ω†ÂèØËÉΩÂ∑≤ÁªèÂ∞ÜÊ≠§ËßÜ‰∏∫ÊúÄÁªàÁöÑË¥üÈù¢ÁªìËÆ∫Ôºå‰ΩÜËÆ©Êàë‰ª¨ËØ¶ÁªÜÂàÜÊûê‰∏Ä‰∏ãËôöÂáΩÊï∞ÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÂÜ≥ÂÆö‰ΩøÁî®Á∫ØËôöÂáΩÊï∞Ôºå‰Ω†Â∞Ü‰∏çÂæó‰∏çÂú®ÊØè‰∏™Ê¥æÁîüÁ±ª‰∏≠ÂÆûÁé∞ËØ•ÂáΩÊï∞„ÄÇÂØπ‰∫é‰Ω†Ëá™Â∑±ÂÆö‰πâÁöÑÊ¥æÁîüÁ±ªÂûãÊù•ËØ¥ÔºåËøôÂèØËÉΩÂè™ÊòØÂ§ö‰∫Ü‰∏Ä‰∫õÂ∑•‰ΩúÈáè„ÄÇ‰ΩÜÂØπ‰∫éÂÖ∂‰ªñ‰∫∫ÈÄöËøáÁªßÊâø <code>Shape</code> Âü∫Á±ªÂàõÂª∫ÁöÑÊñ∞ÂΩ¢Áä∂Êù•ËØ¥ÔºåËøôÂèØËÉΩ‰ºöÂ¢ûÂä†È¢ùÂ§ñÁöÑÂ∑•‰ΩúÈáè„ÄÇ<br/>ËÄåËøôÊòØÈù¢ÂêëÂØπË±°ÁºñÁ®ãÁöÑ‰ºòÂäø‰πã‰∏ÄÔºö‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•ËΩªÊùæÊ∑ªÂä†Êñ∞Á±ªÂûã„ÄÇÁî±‰∫éËøôÁßçÊÉÖÂÜµÊòØÂèØ‰ª•È¢ÑÊúüÁöÑÔºåÂõ†Ê≠§ËøôÂèØËÉΩÊòØ‰∏ç‰ΩøÁî®Á∫ØËôöÂáΩÊï∞ÁöÑ‰∏Ä‰∏™ÂéüÂõ†„ÄÇ</p>
<p>‰Ωú‰∏∫Êõø‰ª£ÊñπÊ°àÔºå‰Ω†ÂèØ‰ª•ÂºïÂÖ•‰∏Ä‰∏™ÊôÆÈÄöÁöÑËôöÂáΩÊï∞ÔºåÂç≥Â∏¶ÊúâÈªòËÆ§ÂÆûÁé∞ÁöÑËôöÂáΩÊï∞„ÄÇ<br/>ËôΩÁÑ∂ <code>rotate()</code> ÂáΩÊï∞ÁöÑÈªòËÆ§Ë°å‰∏∫Âê¨Ëµ∑Êù•ÂÉèÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÂêàÁêÜÁöÑÊÉ≥Ê≥ïÔºå‰ΩÜ <code>serialize()</code> ÂáΩÊï∞ÁöÑÈªòËÆ§ÂÆûÁé∞Âê¨Ëµ∑Êù•Âπ∂‰∏çÂÆπÊòì„ÄÇ</p>
<p>ÊàëÊâøËÆ§ÊàëÂøÖÈ°ª‰ªîÁªÜËÄÉËôëÂ¶Ç‰ΩïÂÆûÁé∞ËøôÊ†∑ÁöÑÂáΩÊï∞Ôºå‰Ω†Áé∞Âú®ÂèØËÉΩ‰ºöÂª∫ËÆÆÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊäõÂá∫ÂºÇÂ∏∏Ôºå‰ΩÜËøôÊÑèÂë≥ÁùÄÊ¥æÁîüÁ±ªÂøÖÈ°ªÂÜçÊ¨°ÂÆûÁé∞Áº∫Â§±ÁöÑË°å‰∏∫ÔºåËøôÂÆûÈôÖ‰∏äÂ∞±ÊòØ‰∏Ä‰∏™‰º™Ë£ÖÁöÑÁ∫ØËôöÂáΩÊï∞ÔºåÊàñËÄÖÊòéÁ°ÆËøùÂèç‰∫ÜÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºàËßÅ‚ÄúÂáÜÂàô6ÔºöÈÅµÂæ™ÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫‚ÄùÔºâ„ÄÇ</p>
<p>Êó†ËÆ∫Âì™ÁßçÊñπÂºèÔºåÂú® <code>Shape</code> Âü∫Á±ª‰∏≠Ê∑ªÂä†Êñ∞Êìç‰ΩúÈÉΩÊòØÂõ∞ÈöæÁöÑÔºåÁîöËá≥Ê†πÊú¨‰∏çÂèØËÉΩ„ÄÇ</p>
<p>ÂÖ∂Ê†πÊú¨ÂéüÂõ†ÊòØÊ∑ªÂä†ËôöÂáΩÊï∞ËøùÂèç‰∫ÜÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâÔºåÂ¶ÇÊûú‰Ω†Á°ÆÂÆûÈúÄË¶ÅÈ¢ëÁπÅÊ∑ªÂä†Êñ∞Êìç‰ΩúÔºåÈÇ£‰πà‰Ω†Â∫îËØ•ËÆæËÆ°‰∏ÄÁßç‰ΩøÂæóÊìç‰ΩúÊâ©Â±ïÂèòÂæóÂÆπÊòìÁöÑÊñπÂºè„ÄÇËøôÂ∞±ÊòØËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèËØïÂõæÂÆûÁé∞ÁöÑÁõÆÊ†á„ÄÇ</p>
<p><strong>ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèËß£Èáä</strong></p>
<p>ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæÊòØÂÖÅËÆ∏Ê∑ªÂä†Êìç‰Ωú„ÄÇ</p>
<p>Èô§‰∫Ü <code>Shape</code> Â±ÇÊ¨°ÁªìÊûÑÂ§ñÔºåÊàëÁé∞Âú®Âú®Âõæ4-2ÁöÑÂ∑¶‰æßÂºïÂÖ•‰∫Ü <code>ShapeVisitor</code> Â±ÇÊ¨°ÁªìÊûÑ„ÄÇ</p>
<p><code>ShapeVisitor</code> Âü∫Á±ª‰ª£Ë°®ÂΩ¢Áä∂Êìç‰ΩúÁöÑÊäΩË±°ÔºåÂõ†Ê≠§Ôºå‰Ω†ÂèØ‰ª•ËÆ§‰∏∫ <code>ShapeOperation</code> ÂèØËÉΩÊòØËøô‰∏™Á±ªÊõ¥Â•ΩÁöÑÂêçÂ≠ó„ÄÇÁÑ∂ËÄåÔºåÂ∫îÁî®‚ÄúÂáÜÂàô14Ôºö‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÂ≠óÊù•‰º†ËææÊÑèÂõæ‚ÄùÊòØÊúâÁõäÁöÑÔºåÂêçÂ≠ó <code>Visitor</code> Â∞ÜÂ∏ÆÂä©ÂÖ∂‰ªñ‰∫∫ÁêÜËß£ËÆæËÆ°„ÄÇ</p>
<p><code>ShapeVisitor</code> Âü∫Á±ª‰∏∫ <code>Shape</code> Â±ÇÊ¨°ÁªìÊûÑ‰∏≠ÁöÑÊØè‰∏™ÂÖ∑‰ΩìÂΩ¢Áä∂Êèê‰æõ‰∏Ä‰∏™Á∫ØËôöÂáΩÊï∞ <code>visit()</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeVisitor</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">ShapeVisitor</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">visit</span><span class="p">(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">visit</span><span class="p">(</span><span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂèØËÉΩÊúâÊõ¥Â§öÁöÑ visit() ÂáΩÊï∞ÔºåÊØè‰∏™ÂÖ∑‰ΩìÂΩ¢Áä∂‰∏Ä‰∏™ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊúâ‰∏Ä‰∏™Áî®‰∫é <code>Circle</code> ÁöÑ <code>visit()</code> ÂáΩÊï∞Âíå‰∏Ä‰∏™Áî®‰∫é <code>Square</code> ÁöÑ <code>visit()</code> ÂáΩÊï∞„ÄÇ<br/>ÂΩìÁÑ∂ÔºåÂèØËÉΩÊúâÊõ¥Â§ö <code>visit()</code> ÂáΩÊï∞‚Äî‚Äî‰æãÂ¶ÇÔºå‰∏Ä‰∏™Áî®‰∫é <code>Triangle</code>Ôºå‰∏Ä‰∏™Áî®‰∫é <code>Rectangle</code>Ôºå‰∏Ä‰∏™Áî®‰∫é <code>Ellipse</code>‚Äî‚ÄîÂÅáËÆæËøô‰∫õ‰πüÊòØ‰ªé <code>Shape</code> Âü∫Á±ªÊ¥æÁîüÁöÑÁ±ª„ÄÇ</p>
<p>Êúâ‰∫Ü <code>ShapeVisitor</code> Âü∫Á±ªÂêéÔºå‰Ω†Áé∞Âú®ÂèØ‰ª•ËΩªÊùæÂú∞Ê∑ªÂä†Êñ∞Êìç‰ΩúÔºåË¶ÅÊ∑ªÂä†‰∏Ä‰∏™Êìç‰ΩúÔºåÂè™ÈúÄÊ∑ªÂä†‰∏Ä‰∏™Êñ∞ÁöÑÊ¥æÁîüÁ±ª„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå‰∏∫‰∫ÜÂêØÁî®ÊóãËΩ¨ÂΩ¢Áä∂Ôºå‰Ω†ÂèØ‰ª•ÂºïÂÖ• <code>Rotate</code> Á±ªÂπ∂ÂÆûÁé∞ÊâÄÊúâ <code>visit()</code> ÂáΩÊï∞„ÄÇ<br/>‰∏∫‰∫ÜÂêØÁî®ÁªòÂà∂ÂΩ¢Áä∂Ôºå‰Ω†Âè™ÈúÄË¶ÅÂºïÂÖ•‰∏Ä‰∏™ <code>Draw</code> Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Draw</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ShapeVisitor</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">visit</span><span class="p">(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">visit</span><span class="p">(</span><span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂèØËÉΩÊúâÊõ¥Â§öÁöÑ visit() ÂáΩÊï∞ÔºåÊØè‰∏™ÂÖ∑‰ΩìÂΩ¢Áä∂‰∏Ä‰∏™ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰Ω†ÂèØ‰ª•ËÄÉËôëÂºïÂÖ•Â§ö‰∏™ <code>Draw</code> Á±ªÔºåÊØè‰∏™ÂõæÂΩ¢Â∫ì‰∏Ä‰∏™„ÄÇ‰Ω†ÂèØ‰ª•ËΩªÊùæÂÅöÂà∞Ëøô‰∏ÄÁÇπÔºåÂõ†‰∏∫‰Ω†‰∏çÈúÄË¶Å‰øÆÊîπ‰ªª‰ΩïÁé∞Êúâ‰ª£Á†Å„ÄÇ<br/>Âè™ÈúÄÈÄöËøáÊ∑ªÂä†Êñ∞‰ª£Á†ÅÊâ©Â±ï <code>ShapeVisitor</code> Â±ÇÊ¨°ÁªìÊûÑÂç≥ÂèØ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËøôÁßçËÆæËÆ°Âú®Ê∑ªÂä†Êìç‰ΩúÊñπÈù¢Á¨¶ÂêàÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâ„ÄÇ</p>
<p>Ë¶ÅÂÆåÂÖ®ÁêÜËß£ËÆøÈóÆËÄÖÁöÑËÆæËÆ°ÁâπÊÄßÔºåÈáçË¶ÅÁöÑÊòØÁêÜËß£‰∏∫‰ªÄ‰πàËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèËÉΩÂ§üÊª°Ë∂≥ OCP„ÄÇ</p>
<p>ÊúÄÂàùÁöÑÈóÆÈ¢òÊòØÊØèÊ¨°Ê∑ªÂä†Êñ∞Êìç‰ΩúÈÉΩÈúÄË¶Å‰øÆÊîπ <code>Shape</code> Âü∫Á±ªÔºåËÆøÈóÆËÄÖÂ∞ÜÊìç‰ΩúÁöÑÊ∑ªÂä†ËØÜÂà´‰∏∫ÂèòÂåñÁÇπÔºå<br/>ÈÄöËøáÊèêÂèñËøô‰∏™ÂèòÂåñÁÇπÔºåÂç≥Â∞ÜÂÖ∂‰Ωú‰∏∫‰∏Ä‰∏™Áã¨Á´ãÁöÑÁ±ªÔºå‰Ω†ÈÅµÂæ™‰∫ÜÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÔºö<code>Shape</code> ‰∏çÈúÄË¶Å‰∏∫ÊØè‰∏™Êñ∞Êìç‰ΩúËÄåÊîπÂèò„ÄÇ</p>
<p>ËøôÈÅøÂÖç‰∫ÜÈ¢ëÁπÅ‰øÆÊîπ <code>Shape</code> Â±ÇÊ¨°ÁªìÊûÑÔºåÂπ∂‰ΩøÂæóÊ∑ªÂä†Êñ∞Êìç‰ΩúÂèòÂæóÂÆπÊòì„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåSRP Êàê‰∏∫‰∫Ü OCP ÁöÑÊé®Âä®ËÄÖ„ÄÇ</p>
<p>Ë¶ÅÂú®ÂΩ¢Áä∂‰∏ä‰ΩøÁî®ËÆøÈóÆËÄÖÔºà‰ªé <code>ShapeVisitor</code> Âü∫Á±ªÊ¥æÁîüÁöÑÁ±ªÔºâÔºå‰Ω†Áé∞Âú®ÂøÖÈ°ªÂú® <code>Shape</code> Â±ÇÊ¨°ÁªìÊûÑ‰∏≠Ê∑ªÂä†ÊúÄÂêé‰∏Ä‰∏™ÂáΩÊï∞Ôºö<code>accept()</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">accept</span><span class="p">(</span><span class="n">ShapeVisitor</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÂçäÂæÑÁöÑÊúâÊïàÊÄß */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">accept</span><span class="p">(</span><span class="n">ShapeVisitor</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span> <span class="n">v</span><span class="p">.</span><span class="n">visit</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span> <span class="p">}</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Square</span><span class="p">(</span><span class="kt">double</span> <span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">side_</span><span class="p">(</span><span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöËæπÈïøÁöÑÊúâÊïàÊÄß */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">accept</span><span class="p">(</span><span class="n">ShapeVisitor</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span> <span class="n">v</span><span class="p">.</span><span class="n">visit</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span> <span class="p">}</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">side</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">side_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">side_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>accept()</code> ÂáΩÊï∞ÁöÑÂÆûÁé∞ÂæàÁÆÄÂçïÔºåÂÆÉÂè™ÊòØÊ†πÊçÆÂÖ∑‰Ωì <code>Shape</code> ÁöÑÁ±ªÂûãË∞ÉÁî®ÁªôÂÆöËÆøÈóÆËÄÖÁöÑÁõ∏Â∫î <code>visit()</code> ÂáΩÊï∞„ÄÇ</p>
<p>ËøôÊòØÈÄöËøáÂ∞Ü <code>this</code> ÊåáÈíà‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíÁªô <code>visit()</code> Êù•ÂÆûÁé∞ÁöÑÔºåÂõ†Ê≠§ÔºåÊØè‰∏™Ê¥æÁîüÁ±ª‰∏≠ÁöÑ <code>accept()</code> ÂÆûÁé∞Áõ∏ÂêåÔºå‰ΩÜÁî±‰∫é‰∏çÂêåÁ±ªÂûãÁöÑ <code>this</code> ÊåáÈíàÔºåÂÆÉ‰ºöËß¶ÂèëÁªôÂÆöËÆøÈóÆËÄÖ‰∏≠ <code>visit()</code> ÂáΩÊï∞ÁöÑ‰∏çÂêåÈáçËΩΩ„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå<code>Shape</code> Âü∫Á±ª‰∏çËÉΩÊèê‰æõÈªòËÆ§ÂÆûÁé∞„ÄÇ</p>
<p>Áé∞Âú®ÂèØ‰ª•Âú®ÈúÄË¶ÅÊâßË°åÊìç‰ΩúÁöÑÂú∞Êñπ‰ΩøÁî®Ëøô‰∏™ <code>accept()</code> ÂáΩÊï∞„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå<code>drawAllShapes()</code> ÂáΩÊï∞‰ΩøÁî® <code>accept()</code> Êù•ÁªòÂà∂ÁªôÂÆöÂΩ¢Áä∂ÂêëÈáè‰∏≠ÁöÑÊâÄÊúâÂΩ¢Áä∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">drawAllShapes</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shapes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">shape</span> <span class="p">:</span> <span class="n">shapes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">shape</span><span class="o">-&gt;</span><span class="n">accept</span><span class="p">(</span><span class="n">Draw</span><span class="p">{});</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáÊ∑ªÂä† <code>accept()</code> ÂáΩÊï∞Ôºå‰Ω†Áé∞Âú®ÂèØ‰ª•ËΩªÊùæÂú∞Êâ©Â±ï <code>Shape</code> Â±ÇÊ¨°ÁªìÊûÑ‰ª•ÊîØÊåÅÊõ¥Â§öÁöÑÊìç‰Ωú„ÄÇ</p>
<p>‰Ω†Áé∞Âú®ËÆæËÆ°‰∫Ü‰∏Ä‰∏™ÂºÄÊîæÁöÑÊìç‰ΩúÈõÜÔºåÂ§™Ê£í‰∫ÜÔºÅ<br/>ÁÑ∂ËÄåÔºåÊ≤°Êúâ‰∏áËÉΩËçØÔºå‰πüÊ≤°ÊúâÊÄªÊòØÊúâÊïàÁöÑËÆæËÆ°ÔºåÊØèÁßçËÆæËÆ°ÈÉΩÊúâ‰ºòÁÇπÔºå‰ΩÜ‰πüÊúâÁº∫ÁÇπ„ÄÇ</p>
<p>ÊâÄ‰ª•Âú®‰Ω†ÂºÄÂßãÂ∫ÜÁ•ù‰πãÂâçÔºåÊàëÂ∫îËØ•ÂëäËØâ‰Ω†ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥‰πãÂ§ÑÔºå‰ª•‰æøËÆ©‰Ω†ÂÖ®Èù¢‰∫ÜËß£„ÄÇ</p>
<p><strong>ÂàÜÊûêËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥</strong></p>
<p>ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèËøúÈùûÂÆåÁæé„ÄÇËÄÉËôëÂà∞ËÆøÈóÆËÄÖÂÆûÈôÖ‰∏äÊòØ‰∏∫‰∫ÜÂº•Ë°•Èù¢ÂêëÂØπË±°ÁºñÁ®ãÔºàOOPÔºâÂÜÖÂú®ÁöÑÂº±ÁÇπËÄåËÆæËÆ°ÁöÑ‰∏ÄÁßçÂèòÈÄöÊñπÊ°àÔºåËÄå‰∏çÊòØÂü∫‰∫éOOPÁöÑ‰ºòÂäøÊûÑÂª∫ÁöÑÔºåËøô‰∏ÄÁÇπÊòØÂèØ‰ª•È¢ÑÊñôÂà∞ÁöÑ„ÄÇ</p>
<p><strong>Á¨¨‰∏Ä‰∏™Áº∫ÁÇπÔºö‰ΩéÂÆûÁé∞ÁÅµÊ¥ªÊÄß</strong></p>
<p>Á¨¨‰∏Ä‰∏™Áº∫ÁÇπÊòØÂÆûÁé∞ÁÅµÊ¥ªÊÄßËæÉ‰Ωé„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ËÄÉËôëÂÆûÁé∞‰∏Ä‰∏™ <code>Translate</code> ËÆøÈóÆËÄÖÔºåËøôÁßçÁº∫ÁÇπÂ∞±ÂèòÂæóÂæàÊòéÊòæÔºå<code>Translate</code> ËÆøÈóÆËÄÖÈúÄË¶ÅÈÄöËøáÁªôÂÆöÁöÑÂÅèÁßªÈáèÁßªÂä®ÊØè‰∏™ÂΩ¢Áä∂ÁöÑ‰∏≠ÂøÉÁÇπ„ÄÇ‰∏∫Ê≠§Ôºå<code>Translate</code> ÈúÄË¶Å‰∏∫ÊØè‰∏™ÂÖ∑‰ΩìÂΩ¢Áä∂ÂÆûÁé∞‰∏Ä‰∏™ <code>visit()</code> ÂáΩÊï∞„ÄÇ</p>
<p>ÁâπÂà´ÊòØÂØπ‰∫é <code>Translate</code>Ôºå‰Ω†ÂèØ‰ª•ÊÉ≥Ë±°Ëøô‰∫õ <code>visit()</code> ÂáΩÊï∞ÁöÑÂÆûÁé∞‰ºöÈùûÂ∏∏Áõ∏‰ººÔºåÁîöËá≥ÂÆåÂÖ®Áõ∏ÂêåÔºöÊóãËΩ¨‰∏Ä‰∏™ÂúÜÂΩ¢ÂíåÊóãËΩ¨‰∏Ä‰∏™ÊñπÂΩ¢Ê≤°Êúâ‰ªÄ‰πà‰∏çÂêå„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºå‰Ω†‰ªçÁÑ∂ÈúÄË¶ÅÁºñÂÜôÊâÄÊúâÁöÑ <code>visit()</code> ÂáΩÊï∞ÔºåÂΩìÁÑ∂Ôºå‰Ω†ÂèØ‰ª•Ê†πÊçÆDRYÂéüÂàôÂ∞ÜÈÄªËæë‰ªé <code>visit()</code> ÂáΩÊï∞‰∏≠ÊèêÂèñÂá∫Êù•ÔºåÂπ∂Âú®Á¨¨‰∏â‰∏™Áã¨Á´ãÂáΩÊï∞‰∏≠ÂÆûÁé∞‰ª•ÂáèÂ∞ëÈáçÂ§ç‰ª£Á†Å„ÄÇ</p>
<p>‰ΩÜ‰∏çÂπ∏ÁöÑÊòØÔºåÂü∫Á±ªÁöÑ‰∏•Ê†ºË¶ÅÊ±Ç‰∏çÂÖÅËÆ∏‰Ω†Â∞ÜËøô‰∫õ <code>visit()</code> ÂáΩÊï∞ÂÆûÁé∞‰∏∫‰∏Ä‰∏™Áªü‰∏ÄÁöÑÂáΩÊï∞„ÄÇÁªìÊûúÊòØ‰∏Ä‰∫õÊ†∑Êùø‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Translate</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ShapeVisitor</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁßªÂä®ÂúÜÂΩ¢ÂíåÊñπÂΩ¢Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü‰Ω†‰ªçÁÑ∂ÈúÄË¶ÅÂÆûÁé∞ÊâÄÊúâËôöÂáΩÊï∞...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="n">visit</span><span class="p">(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">visit</span><span class="p">(</span><span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂèØËÉΩÊúâÊõ¥Â§öÁöÑ visit() ÂáΩÊï∞ÔºåÊØè‰∏™ÂÖ∑‰ΩìÂΩ¢Áä∂‰∏Ä‰∏™ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Á±ª‰ººÁöÑÂÆûÁé∞‰∏çÁÅµÊ¥ªËøòÂåÖÊã¨ <code>visit()</code> ÂáΩÊï∞ÁöÑËøîÂõûÁ±ªÂûãÔºåËøîÂõûÁ±ªÂûãÁöÑÂÜ≥ÂÆöÊòØÂú® <code>ShapeVisitor</code> Âü∫Á±ª‰∏≠ÂÅöÂá∫ÁöÑÔºåÊ¥æÁîüÁ±ªÊó†Ê≥ïÊõ¥Êîπ„ÄÇÈÄöÂ∏∏ÁöÑÂÅöÊ≥ïÊòØÂ∞ÜÁªìÊûúÂ≠òÂÇ®Âú®ËÆøÈóÆËÄÖ‰∏≠Âπ∂Âú®Á®çÂêéËÆøÈóÆÂÆÉ„ÄÇ</p>
<p><strong>Á¨¨‰∫å‰∏™Áº∫ÁÇπÔºöÈöæ‰ª•Ê∑ªÂä†Êñ∞Á±ªÂûã</strong></p>
<p>Á¨¨‰∫å‰∏™Áº∫ÁÇπÊòØ‰ΩøÁî®ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÂêéÔºåÊ∑ªÂä†Êñ∞Á±ªÂûãÂèòÂæóÂõ∞Èöæ„ÄÇ</p>
<p>‰πãÂâçÊàë‰ª¨ÂÅáËÆæ‰Ω†Á°ÆÂÆöÂ∑≤ÁªèÊã•Êúâ‰∫ÜÊâÄÊúâ‰Ω†ÈúÄË¶ÅÁöÑÂΩ¢Áä∂ÔºåËøô‰∏™ÂÅáËÆæÁé∞Âú®ÂèòÊàê‰∫ÜÈôêÂà∂„ÄÇ</p>
<p>Âú® <code>Shape</code> Â±ÇÊ¨°ÁªìÊûÑ‰∏≠Ê∑ªÂä†Êñ∞ÁöÑÂΩ¢Áä∂ÈúÄË¶ÅÊõ¥Êñ∞Êï¥‰∏™ <code>ShapeVisitor</code> Â±ÇÊ¨°ÁªìÊûÑÔºö‰Ω†ÂøÖÈ°ªÂú® <code>ShapeVisitor</code> Âü∫Á±ª‰∏≠Ê∑ªÂä†‰∏Ä‰∏™Êñ∞ÁöÑÁ∫ØËôöÂáΩÊï∞ÔºåÂπ∂‰∏îËøô‰∏™ËôöÂáΩÊï∞ÈúÄË¶ÅÁî±ÊâÄÊúâÊ¥æÁîüÁ±ªÂÆûÁé∞„ÄÇ</p>
<p>ÂΩìÁÑ∂ÔºåËøôÂ∏¶Êù•‰∫ÜÊàë‰ª¨‰πãÂâçËÆ®ËÆ∫ÁöÑÊâÄÊúâÁº∫ÁÇπÔºåÁâπÂà´ÊòØÔºå‰Ω†‰ºöËø´‰ΩøÂÖ∂‰ªñÂºÄÂèë‰∫∫ÂëòÊõ¥Êñ∞‰ªñ‰ª¨ÁöÑÊìç‰Ωú„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèË¶ÅÊ±ÇÊúâ‰∏Ä‰∏™Â∞ÅÈó≠ÁöÑÁ±ªÂûãÈõÜÔºåÂπ∂‰ª•Ê≠§‰∫§Êç¢ÂºÄÊîæÁöÑÊìç‰ΩúÈõÜ„ÄÇ</p>
<p>Â∫ïÂ±ÇÁöÑÂéüÂõ†ÊòØ <code>ShapeVisitor</code> Âü∫Á±ª„ÄÅÂÖ∑‰ΩìÂΩ¢Áä∂ÔºàÂ¶Ç <code>Circle</code> Âíå <code>Square</code> Á≠âÔºâ‰ª•Âèä <code>Shape</code> Âü∫Á±ª‰πãÈó¥Â≠òÂú®Âæ™ÁéØ‰æùËµñ„ÄÇ</p>
<p><strong>Á¨¨‰∏â‰∏™Áº∫ÁÇπÔºö‰æµÂÖ•ÊÄß</strong></p>
<p>Á¨¨‰∏â‰∏™Áº∫ÁÇπÊòØËÆøÈóÆËÄÖÁöÑ‰æµÂÖ•ÊÄßÔºåË¶ÅÂú®Áé∞ÊúâÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠Ê∑ªÂä†ËÆøÈóÆËÄÖÔºå‰Ω†ÈúÄË¶ÅÂú®ËØ•Â±ÇÊ¨°ÁªìÊûÑÁöÑÂü∫Á±ª‰∏≠Ê∑ªÂä†<code>virtual accept()</code> ÂáΩÊï∞„ÄÇ</p>
<p>ËôΩÁÑ∂ËøôÈÄöÂ∏∏ÊòØÂèØËÉΩÁöÑÔºå‰ΩÜÂÆÉ‰ªçÁÑ∂Â≠òÂú®ÂêëÁé∞ÊúâÂ±ÇÊ¨°ÁªìÊûÑÊ∑ªÂä†Á∫ØËôöÂáΩÊï∞ÁöÑÂ∏∏ËßÅÈóÆÈ¢òÔºàËßÅ‚ÄúÂáÜÂàô15ÔºöËÆæËÆ°‰ª•ÊîØÊåÅÁ±ªÂûãÊàñÊìç‰ΩúÁöÑÊ∑ªÂä†‚ÄùÔºâ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰∏çËÉΩÊ∑ªÂä† <code>accept()</code> ÂáΩÊï∞ÔºåÂàôËøôÁßçÂΩ¢ÂºèÁöÑËÆøÈóÆËÄÖ‰∏çÂèØË°å„ÄÇ<br/>Â¶ÇÊûúÊòØËøôÁßçÊÉÖÂÜµÔºå‰∏çË¶ÅÊãÖÂøÉÔºöÊàë‰ª¨Â∞ÜÂú®‚ÄúÂáÜÂàô17ÔºöËÄÉËôë‰ΩøÁî® std::variant ÂÆûÁé∞ËÆøÈóÆËÄÖ‚Äù‰∏≠ÁúãÂà∞Âè¶‰∏ÄÁßçÈùû‰æµÂÖ•ÊÄßÁöÑËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p><strong>Á¨¨Âõõ‰∏™Áº∫ÁÇπÔºöÁªßÊâøÁöÑ accept() ÂáΩÊï∞</strong></p>
<p>Á¨¨Âõõ‰∏™Áº∫ÁÇπÔºàÂ∞ΩÁÆ°ËæÉ‰∏∫ÈöêËîΩÔºâÊòØ <code>accept()</code> ÂáΩÊï∞ÊòØÁî±Ê¥æÁîüÁ±ªÁªßÊâøÁöÑ„ÄÇ</p>
<p>Â¶ÇÊûúÊúâ‰∫∫ÂêéÊù•Ê∑ªÂä†‰∫ÜÂè¶‰∏ÄÂ±ÇÊ¥æÁîüÁ±ªÔºàÂèØËÉΩÊòØ‰Ω†Ëá™Â∑±ÔºâÂπ∂ÂøòËÆ∞ÈáçÂÜô <code>accept()</code> ÂáΩÊï∞ÔºåËÆøÈóÆËÄÖÂ∞ÜË¢´Â∫îÁî®Âà∞ÈîôËØØÁöÑÁ±ªÂûã‰∏ä„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºå‰Ω†‰∏ç‰ºöÂæóÂà∞‰ªª‰ΩïË≠¶Âëä„ÄÇ</p>
<p>ËøôÂè™ÊòØËøõ‰∏ÄÊ≠•ËØÅÊòéÊ∑ªÂä†Êñ∞Á±ªÂûãÂèòÂæóÊõ¥Âä†Âõ∞Èöæ„ÄÇ‰∏ÄÁßçÂèØËÉΩÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØÂ∞Ü <code>Circle</code> Âíå <code>Square</code> Á±ªÂ£∞Êòé‰∏∫ <code>final</code>Ôºå‰ΩÜËøôÂ∞ÜÈôêÂà∂Êú™Êù•ÁöÑÊâ©Â±ï„ÄÇ</p>
<p><strong>Á¨¨‰∫î‰∏™Áº∫ÁÇπÔºöÂèåÈáçÂàÜÊ¥æÊÄßËÉΩÂºÄÈîÄ</strong></p>
<p>Á¨¨‰∫î‰∏™Áº∫ÁÇπÂú®Êàë‰ª¨ËÄÉËôëÊØèÊ¨°Êìç‰ΩúÈÉΩÈúÄË¶ÅË∞ÉÁî®‰∏§‰∏™ËôöÂáΩÊï∞Êó∂ÂèòÂæóÊòéÊòæ„ÄÇ</p>
<p>ÊúÄÂàùÔºåÊàë‰ª¨Êó¢‰∏çÁü•ÈÅìÊìç‰ΩúÁöÑÁ±ªÂûã‰πü‰∏çÁü•ÈÅìÂΩ¢Áä∂ÁöÑÁ±ªÂûã„ÄÇ</p>
<p>Á¨¨‰∏Ä‰∏™ËôöÂáΩÊï∞ÊòØ <code>accept()</code> ÂáΩÊï∞ÔºåÂÆÉÊé•Êî∂‰∏Ä‰∏™ÊäΩË±°ÁöÑ <code>ShapeVisitor</code>„ÄÇ<code>accept()</code> ÂáΩÊï∞Áé∞Âú®Ëß£ÊûêÂÖ∑‰ΩìÁöÑÂΩ¢Áä∂Á±ªÂûã„ÄÇ</p>
<p>Á¨¨‰∫å‰∏™ËôöÊãüÂáΩÊï∞ÊòØ <code>visit()</code> ÂáΩÊï∞ÔºåÂÆÉÊé•Êî∂‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑ <code>Shape</code> Á±ªÂûã„ÄÇ<code>visit()</code> ÂáΩÊï∞Áé∞Âú®Ëß£ÊûêÂÖ∑‰ΩìÁöÑÊìç‰ΩúÁ±ªÂûã„ÄÇ</p>
<p>ËøôÁßçÊâÄË∞ìÁöÑÂèåÈáçÂàÜÊ¥æ‰∏çÂπ∏Âπ∂‰∏çÊòØÂÖçË¥πÁöÑ„ÄÇÁõ∏ÂèçÔºåÂú®ÊÄßËÉΩÊñπÈù¢Ôºå‰Ω†Â∫îËØ•ËÆ§‰∏∫ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁõ∏ÂØπËæÉÊÖ¢„ÄÇÊàëÂ∞ÜÂú®‰∏ã‰∏Ä‰∏™ÂáÜÂàô‰∏≠Êèê‰æõ‰∏Ä‰∫õÊÄßËÉΩÊï∞ÊçÆ„ÄÇ</p>
<p>Âú®Ë∞àËÆ∫ÊÄßËÉΩÊó∂ÔºåÊàëËøòÂ∫îËØ•ÊèêÂà∞Âè¶Â§ñ‰∏§‰∏™ÂØπÊÄßËÉΩÊúâË¥üÈù¢ÂΩ±ÂìçÁöÑÊñπÈù¢Ôºö</p>
<p><strong>È¢ëÁπÅÁöÑÂ∞èÂÜÖÂ≠òÂàÜÈÖç</strong>ÔºöÊàë‰ª¨ÈÄöÂ∏∏ÂçïÁã¨ÂàÜÈÖçÊØè‰∏™ÂΩ¢Áä∂ÂíåËÆøÈóÆËÄÖ„ÄÇËÄÉËôë‰ª•‰∏ã <code>main()</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">Shapes</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Shapes</span> <span class="n">shapes</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">2.3</span><span class="p">));</span>  
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Square</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">1.2</span><span class="p">));</span>   
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">4.1</span><span class="p">));</span>   
</span></span><span class="line"><span class="cl">    <span class="n">drawAllShapes</span><span class="p">(</span><span class="n">shapes</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™ <code>main()</code> ÂáΩÊï∞‰∏≠ÔºåÊâÄÊúâÂàÜÈÖçÈÉΩÊòØÈÄöËøá <code>std::make_unique()</code> ËøõË°åÁöÑ</p>
<p>Ôºà‰æãÂ¶Ç <code>shapes.emplace_back(std::make_unique&lt;Circle&gt;(2.3))</code>Ôºâ„ÄÇ</p>
<p>Ëøô‰∫õËÆ∏Â§öÂ∞èÁöÑÂàÜÈÖçÊú¨Ë∫´Â∞±‰ºöÊ∂àËÄóËøêË°åÊó∂Èó¥ÔºåÂπ∂‰∏îÊúÄÁªà‰ºöÂØºËá¥ÂÜÖÂ≠òÁ¢éÁâáÂåñ„ÄÇ</p>
<p>Ê≠§Â§ñÔºåÂÜÖÂ≠òÂ∏ÉÂ±ÄÂèØËÉΩ‰∏çÂà©‰∫éÁºìÂ≠òÂèãÂ•ΩÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨ÈÄöÂ∏∏‰ΩøÁî®ÊåáÈíàÊù•Â§ÑÁêÜÁîüÊàêÁöÑÂΩ¢Áä∂ÂíåËÆøÈóÆËÄÖ„ÄÇ</p>
<p>Áî±Ê≠§‰∫ßÁîüÁöÑÈó¥Êé•ÊÄß‰ΩøÂæóÁºñËØëÂô®Êõ¥ÈöæËøõË°å‰ªª‰ΩïÂΩ¢ÂºèÁöÑ‰ºòÂåñÔºåÂπ∂‰ºöÂú®ÊÄßËÉΩÂü∫ÂáÜÊµãËØï‰∏≠ÊòæÁé∞Âá∫Êù•„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËÄÅÂÆûËØ¥ÔºåËøô‰∏çÊòØËÆøÈóÆËÄÖÁâπÊúâÁöÑÈóÆÈ¢òÔºåËÄåÊòØÈù¢ÂêëÂØπË±°ÁºñÁ®ã‰∏≠Â∏∏ËßÅÁöÑ‰∏§‰∏™ÊñπÈù¢„ÄÇ</p>
<p><strong>ÊúÄÂêéÁöÑÁº∫ÁÇπÔºöÂ§çÊùÇÊÄßÂíåÁª¥Êä§ÈöæÂ∫¶</strong></p>
<p>ÊúÄÂêéÁöÑÁº∫ÁÇπÊòØÁªèÈ™åË°®ÊòéÔºåËøôÁßçËÆæËÆ°Ê®°ÂºèÁõ∏ÂΩìÈöæ‰ª•ÂÆåÂÖ®ÁêÜËß£ÂíåÁª¥Êä§„ÄÇËøôÊòØ‰∏Ä‰∏™ÊØîËæÉ‰∏ªËßÇÁöÑÁº∫ÁÇπÔºå‰ΩÜ‰∏§‰∏™Â±ÇÊ¨°ÁªìÊûÑ‰πãÈó¥Â§çÊùÇÁöÑÁõ∏‰∫í‰ΩúÁî®ÂæÄÂæÄËÆ©‰∫∫ÊÑüËßâÊõ¥ÂÉèÊòØË¥üÊãÖËÄå‰∏çÊòØÁúüÊ≠£ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p><strong>ÊÄªÁªì</strong></p>
<ul>
<li>
<p>ËØ∑ËÆ∞‰ΩèÔºåÂú®Áé∞ÊúâÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠Ê∑ªÂä†Êñ∞Êìç‰ΩúÊòØÂõ∞ÈöæÁöÑ„ÄÇ</p>
</li>
<li>
<p>Â∫îÁî®ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæÊòØÂÖÅËÆ∏ËΩªÊùæÊ∑ªÂä†Êìç‰Ωú„ÄÇ</p>
</li>
<li>
<p>Ë¶ÅÊ≥®ÊÑèËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥„ÄÇ</p>
</li>
</ul>
<h3 id="ÂáÜÂàô17ËÄÉËôë‰ΩøÁî®-stdvariant-ÂÆûÁé∞ËÆøÈóÆËÄÖ">ÂáÜÂàô17ÔºöËÄÉËôë‰ΩøÁî® std::variant ÂÆûÁé∞ËÆøÈóÆËÄÖ
</h3><p>Âú®‚ÄúÂáÜÂàô16Ôºö‰ΩøÁî®ËÆøÈóÆËÄÖÊâ©Â±ïÊìç‰Ωú‚Äù‰∏≠ÔºåÊàëÂêë‰Ω†‰ªãÁªç‰∫ÜËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>ÊàëÊÉ≥‰Ω†Âπ∂‰∏ç‰ºöÁ´ãÂàªÁà±‰∏äÂÆÉÔºöÂ∞ΩÁÆ°ËÆøÈóÆËÄÖÁ°ÆÂÆûÂÖ∑Êúâ‰∏Ä‰∫õÁã¨ÁâπÁöÑÁâπÊÄßÔºå‰ΩÜÂÆÉ‰πüÊòØ‰∏Ä‰∏™Áõ∏ÂΩìÂ§çÊùÇÁöÑËÆæËÆ°Ê®°ÂºèÔºåÂÖ∑ÊúâËæÉÂº∫ÁöÑÂÜÖÈÉ®ËÄ¶ÂêàÂíåÊÄßËÉΩÁº∫Èô∑„ÄÇ</p>
<p>‰∏çÔºåÁªùÂØπ‰∏çÊòØÁà±ÔºÅÁÑ∂ËÄåÔºå‰∏çÁî®ÊãÖÂøÉÔºåÁªèÂÖ∏ÂΩ¢ÂºèÂπ∂‰∏çÊòØÂÆûÁé∞ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÂîØ‰∏ÄÊñπÂºè„ÄÇ</p>
<p>Âú®Êú¨ËäÇ‰∏≠ÔºåÊàëÊÉ≥Âêë‰Ω†‰ªãÁªç‰∏ÄÁßç‰∏çÂêåÁöÑÂÆûÁé∞ËÆøÈóÆËÄÖÁöÑÊñπÂºè„ÄÇÊàëÁõ∏‰ø°ËøôÁßçÊñπÊ≥ï‰ºöÊõ¥Á¨¶Âêà‰Ω†ÁöÑÂñúÂ•Ω„ÄÇ</p>
<p><strong>std::variant ÁÆÄ‰ªã</strong></p>
<p>Âú®Êú¨Á´†ÁöÑÂºÄÂ§¥ÔºåÊàë‰ª¨ËÆ®ËÆ∫‰∫Ü‰∏çÂêåËåÉÂºèÔºàÈù¢ÂêëÂØπË±°ÁºñÁ®ã‰∏éËøáÁ®ãÂºèÁºñÁ®ãÔºâÁöÑ‰ºòÁÇπÂíåÁº∫ÁÇπ„ÄÇ</p>
<p>ÁâπÂà´ÊòØÔºåÊàë‰ª¨Ë∞àÂà∞‰∫ÜËøáÁ®ãÂºèÁºñÁ®ãÂú®‰∏∫Áé∞ÊúâÁ±ªÂûãÈõÜÊ∑ªÂä†Êñ∞Êìç‰ΩúÊñπÈù¢ÁâπÂà´ÊìÖÈïø„ÄÇ</p>
<p>ÈÇ£‰πàÔºå‰∏éÂÖ∂ËØïÂõæÂú®OOP‰∏≠ÂØªÊâæÂèòÈÄöÊñπÊ≥ïÔºå‰∏∫‰ªÄ‰πà‰∏çÂà©Áî®ËøáÁ®ãÂºèÁºñÁ®ãÁöÑ‰ºòÂäøÂë¢Ôºü</p>
<p>‰∏çÔºå‰∏çÁî®ÊãÖÂøÉÔºõÂΩìÁÑ∂Êàë‰∏çÊòØÂª∫ËÆÆÂõûÂà∞ÊúÄÂàùÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇÈÇ£ÁßçÊñπÊ≥ïÂ§™ÂÆπÊòìÂá∫Èîô„ÄÇÁõ∏ÂèçÔºåÊàëÊåáÁöÑÊòØ <strong>std::variantÔºö</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;variant&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Print</span>  
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;int: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="kt">double</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;double: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;string: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ÈªòËÆ§ÂåÖÂê´ &#39;int&#39; ÂàùÂßãÂåñ‰∏∫ 0 ÁöÑ variant
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">variant</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">double</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">{};</span>  
</span></span><span class="line"><span class="cl">    <span class="n">v</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>        <span class="c1">// ÂàÜÈÖçÊï¥Êï∞ 42 Áªô variant   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">v</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>      <span class="c1">// ÂàÜÈÖçÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ 3.14 Áªô variant   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">v</span> <span class="o">=</span> <span class="mf">2.71F</span><span class="p">;</span>     <span class="c1">// ÂàÜÈÖçÊµÆÁÇπÊï∞Ôºå‰ºöË¢´ÊèêÂçá‰∏∫ÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">v</span> <span class="o">=</span> <span class="s">&#34;Bjarne&#34;</span><span class="p">;</span>  <span class="c1">// ÂàÜÈÖçÂ≠óÁ¨¶‰∏≤Â≠óÈù¢Èáè &#39;Bjarne&#39; Áªô variant   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">v</span> <span class="o">=</span> <span class="mi">43</span><span class="p">;</span>        <span class="c1">// ÂàÜÈÖçÊï¥Êï∞ 43 Áªô variant   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="k">const</span> <span class="n">i</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>  <span class="c1">// Áõ¥Êé•ËÆøÈóÆÂÄº   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span><span class="o">*</span> <span class="k">const</span> <span class="n">pi</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">get_if</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">v</span><span class="p">);</span>  <span class="c1">// Áõ¥Êé•ËÆøÈóÆÂÄº   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">visit</span><span class="p">(</span><span class="n">Print</span><span class="p">{},</span> <span class="n">v</span><span class="p">);</span>  <span class="c1">// Â∫îÁî® Print ËÆøÈóÆËÄÖ   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫é‰Ω†ÂèØËÉΩËøòÊ≤°ÊúâÊú∫‰ºöÊé•Ëß¶ C++17 ÁöÑ <strong>std::variant</strong>ÔºåËØ∑ÂÖÅËÆ∏ÊàëÁÆÄË¶Å‰ªãÁªç‰∏Ä‰∏ã„ÄÇ</p>
<p>‰∏Ä‰∏™ variant Ë°®Á§∫Âá†ÁßçÂ§áÈÄâÊñπÊ°à‰∏≠ÁöÑ‰∏ÄÁßç„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÂú®‰∏äËø∞‰ª£Á†ÅÁ§∫‰æã‰∏≠ÁöÑ <strong>main()</strong> ÂáΩÊï∞ÂºÄÂßãÊó∂Ôºå<strong>variant</strong> ÂèØ‰ª•ÂåÖÂê´‰∏Ä‰∏™ <strong>int</strong>„ÄÅ‰∏Ä‰∏™ <strong>double</strong> Êàñ‰∏Ä‰∏™ <strong>std::string</strong>„ÄÇËØ∑Ê≥®ÊÑèÊàëËØ¥ÁöÑÊòØ <strong>‚ÄúÊàñ‚Äù</strong> Ôºö‰∏Ä‰∏™ variant Âè™ËÉΩÂåÖÂê´Ëøô‰∏âÁßçÂ§áÈÄâÊñπÊ°à‰∏≠ÁöÑ‰∏ÄÁßçÔºåÂÆÉÊ∞∏Ëøú‰∏ç‰ºöÂêåÊó∂ÂåÖÂê´Â§ö‰∏™ÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ã‰πü‰∏çÂ∫îËØ•‰∏∫Á©∫„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÊàë‰ª¨Â∞Ü variant Áß∞‰∏∫‰∏ÄÁßç <strong>‚ÄúÊÄªÂíåÁ±ªÂûã‚Äù</strong> ÔºöÂèØËÉΩÁä∂ÊÄÅÁöÑÈõÜÂêàÊòØÂêÑÂ§áÈÄâÊñπÊ°àÂèØËÉΩÁä∂ÊÄÅÁöÑÊÄªÂíå„ÄÇ</p>
<p>ÈªòËÆ§ÁöÑ variant ‰πü‰∏çÊòØÁ©∫ÁöÑ„ÄÇÂÆÉË¢´ÂàùÂßãÂåñ‰∏∫Á¨¨‰∏Ä‰∏™Â§áÈÄâÊñπÊ°àÁöÑÈªòËÆ§ÂÄº„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÈªòËÆ§ÁöÑ <strong>variant</strong> ÂåÖÂê´‰∏Ä‰∏™ÂÄº‰∏∫ <strong>0</strong> ÁöÑ<strong>Êï¥Êï∞</strong>„ÄÇ</p>
<p>ÊîπÂèò variant ÁöÑÂÄºÂæàÁÆÄÂçïÔºö‰Ω†ÂèØ‰ª•Áõ¥Êé•ÂàÜÈÖçÊñ∞ÂÄº„ÄÇ‰æãÂ¶ÇÔºåÊàë‰ª¨ÂèØ‰ª•ÂàÜÈÖçÂÄº 42ÔºåËøôÊÑèÂë≥ÁùÄ variant Â≠òÂÇ®‰∫Ü‰∏Ä‰∏™ÂÄº‰∏∫ 42 ÁöÑÊï¥Êï∞„ÄÇ</p>
<p>Â¶ÇÊûúÊàë‰ª¨ÈöèÂêéÂàÜÈÖçÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ <strong>3.14</strong>ÔºåÂàô <strong>variant</strong> Â∞ÜÂ≠òÂÇ®‰∏Ä‰∏™ÂÄº‰∏∫ <strong>3.14</strong> ÁöÑÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÊÉ≥ÂàÜÈÖç‰∏Ä‰∏™‰∏çÂ±û‰∫éËøô‰∫õÂ§áÈÄâÊñπÊ°à‰πã‰∏ÄÁöÑÁ±ªÂûãÁöÑÂÄºÔºåÂàôÂ∫îÁî®Â∏∏ËßÑËΩ¨Êç¢ËßÑÂàô„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ÂàÜÈÖç‰∏Ä‰∏™ÊµÆÁÇπÊï∞ÔºåÂü∫‰∫éÂ∏∏ËßÑËΩ¨Êç¢ËßÑÂàôÔºåÂÆÉ‰ºöË¢´ÊèêÂçá‰∏∫ÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞„ÄÇ</p>
<p>‰∏∫‰∫ÜÂ≠òÂÇ®Â§áÈÄâÊñπÊ°àÔºå<strong>variant</strong> Êèê‰æõ‰∫ÜÂàöÂ•ΩË∂≥Â§üÁöÑÂÜÖÈÉ®ÁºìÂÜ≤Âå∫Êù•ÂÆπÁ∫≥ÊúÄÂ§ßÁöÑÂ§áÈÄâÊñπÊ°à„ÄÇ</p>
<p>Âú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊúÄÂ§ßÁöÑÂ§áÈÄâÊñπÊ°àÊòØ <strong>std::string</strong>ÔºåÈÄöÂ∏∏ÊòØ 24 Âà∞ 32 Â≠óËäÇÔºàÂèñÂÜ≥‰∫éÊ†áÂáÜÂ∫ìÁöÑÂÖ∑‰ΩìÂÆûÁé∞Ôºâ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂΩì‰Ω†ÂàÜÈÖçÂ≠óÁ¨¶‰∏≤Â≠óÈù¢Èáè <strong>&ldquo;Bjarne&rdquo;</strong> Êó∂Ôºå<strong>variant</strong> È¶ñÂÖàÊ∏ÖÁêÜ‰πãÂâçÁöÑÂÄºÔºàËøôÈáåÊ≤°‰ªÄ‰πàÈúÄË¶ÅÂÅöÁöÑÔºåÂè™ÊòØ‰∏Ä‰∏™ÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÔºâÔºå</p>
<p>ÁÑ∂Âêé <strong>ÊûÑÈÄ† std::string</strong> Âπ∂Â∞ÜÂÖ∂ÊîæÁΩÆÂú®ÂÖ∂Ëá™Ë∫´ÁöÑ<strong>ÁºìÂÜ≤Âå∫</strong>ÂÜÖ„ÄÇ</p>
<p>ÂΩì‰Ω†ÊîπÂèò‰∏ªÊÑèÂπ∂ÂàÜÈÖçÊï¥Êï∞ <strong>43</strong> Êó∂Ôºå<strong>variant</strong> ‰ºöÈÄöËøáÂÖ∂ <strong>ÊûêÊûÑÂáΩÊï∞</strong> Ê≠£Á°ÆÈîÄÊØÅ <strong>std::string</strong> Âπ∂ÈáçÁî®ÂÜÖÈÉ®ÁºìÂÜ≤Âå∫Áî®‰∫éÊï¥Êï∞„ÄÇ</p>
<p>ÊòØ‰∏çÊòØÂæàÁ•ûÂ•áÔºü<strong>variant</strong> ÊòØÁ±ªÂûãÂÆâÂÖ®‰∏îÂßãÁªàÊ≠£Á°ÆÂàùÂßãÂåñÁöÑ„ÄÇÊàë‰ª¨ËøòËÉΩË¶ÅÊ±Ç‰ªÄ‰πàÂë¢Ôºü</p>
<p>ÂΩìÁÑ∂Ôºå‰Ω†ÊÉ≥Ë¶ÅÂØπ variant ‰∏≠ÁöÑÂÄºËøõË°å‰∏Ä‰∫õÊìç‰ΩúÔºåÂ¶ÇÊûúÂè™ÊòØÂ≠òÂÇ®ÂÄºËÄå‰∏çÂÅö‰ªª‰Ωï‰∫ãÊÉÖÔºåÈÇ£Â∞ÜÊØ´Êó†ÊÑè‰πâ„ÄÇ</p>
<p>‰∏çÂπ∏ÁöÑÊòØÔºå‰Ω†‰∏çËÉΩÁÆÄÂçïÂú∞Â∞Ü <strong>variant</strong> ËµãÂÄºÁªôÂÖ∂‰ªñ‰ªª‰ΩïÂÄºÔºå‰æãÂ¶Ç intÔºå‰ª•Ëé∑ÂèñÂõû‰Ω†ÁöÑÂÄº„ÄÇ‰∏çÔºåËÆøÈóÆÂÄºÊúâÁÇπÂ§çÊùÇ„ÄÇ</p>
<p>ÊúâÂá†ÁßçËÆøÈóÆÂ≠òÂÇ®ÂÄºÁöÑÊñπÊ≥ïÔºåÊúÄÁõ¥Êé•ÁöÑÊñπÊ≥ïÊòØ‰ΩøÁî® <strong>std::get()</strong>„ÄÇÈÄöËøá <strong>std::get()</strong>Ôºå‰Ω†ÂèØ‰ª•Êü•ËØ¢ÁâπÂÆöÁ±ªÂûãÁöÑÂÄº„ÄÇ</p>
<p>Â¶ÇÊûú <strong>variant</strong> ÂåÖÂê´ËØ•Á±ªÂûãÁöÑÂÄºÔºåÂÆÉÂ∞ÜËøîÂõûÂØπËØ•ÂÄºÁöÑ<strong>ÂºïÁî®</strong>„ÄÇ</p>
<p>Â¶ÇÊûú‰∏çÂåÖÂê´ÔºåÂàôÊäõÂá∫ <strong>std::bad_variant_exception</strong>„ÄÇ</p>
<p>ËøôÁúãËµ∑Êù•ÊòØ‰∏Ä‰∏™Áõ∏ÂΩìÁ≤óÈ≤ÅÁöÑÂìçÂ∫îÔºåÊØïÁ´ü‰Ω†ÊòØÁ§ºË≤åÂú∞ËØ∑Ê±ÇÁöÑÔºå‰ΩÜÊàë‰ª¨Â∫îËØ•ÊÑüÂà∞È´òÂÖ¥ÁöÑÊòØÔºåÂΩì variant Á°ÆÂÆû‰∏çÂåÖÂê´Êüê‰∏™ÂÄºÊó∂ÔºåÂÆÉ‰∏ç‰ºöÂÅáË£ÖÊåÅÊúâËØ•ÂÄº„ÄÇËá≥Â∞ëÂÆÉÊòØËØöÂÆûÁöÑ„ÄÇ</p>
<p>ËøòÊúâ‰∏ÄÁßçÊõ¥ÂèãÂ•ΩÁöÑÊñπÂºèÊòØ <strong>std::get_if()</strong>„ÄÇ‰∏é <strong>std::get()</strong> ‰∏çÂêåÔºå<strong>std::get_if()</strong> <strong>ËøîÂõû‰∏Ä‰∏™ÊåáÈíà</strong>ËÄå‰∏çÊòØÂºïÁî®„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ËØ∑Ê±ÇÁöÑÁ±ªÂûãÊòØ <strong>std::variant</strong> ÂΩìÂâç<strong>Êú™ÊåÅÊúâÁöÑÁ±ªÂûã</strong>ÔºåÂÆÉ‰∏ç‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºåËÄåÊòØ<strong>ËøîÂõû nullptr</strong>„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËøòÊúâÁ¨¨‰∏âÁßçÊñπÂºèÔºåËøôÁßçÊñπÂºèÂØπÊàë‰ª¨Êù•ËØ¥ÁâπÂà´ÊúâË∂£Ôºö<strong>std::visit()</strong>„ÄÇ</p>
<p><strong>std::visit()</strong> ÂÖÅËÆ∏‰Ω†Âú®Â≠òÂÇ®ÁöÑÂÄº‰∏äÊâßË°å‰ªª‰ΩïÊìç‰ΩúÔºåÊõ¥ÂáÜÁ°ÆÂú∞ËØ¥ÔºåÂÆÉÂÖÅËÆ∏‰Ω†‰º†ÈÄí‰∏Ä‰∏™Ëá™ÂÆö‰πâËÆøÈóÆËÄÖÊù•ÂØπÂ∞ÅÈó≠Á±ªÂûãÈõÜÁöÑÂ≠òÂÇ®ÂÄºÊâßË°å‰ªª‰ΩïÊìç‰Ωú„ÄÇÂê¨Ëµ∑Êù•ÁÜüÊÇâÂêóÔºü</p>
<p>Êàë‰ª¨‰Ωú‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞‰º†ÈÄíÁöÑ <strong>Print</strong> ËÆøÈóÆËÄÖÂøÖÈ°ª‰∏∫ÊØè‰∏™ÂèØËÉΩÁöÑÂ§áÈÄâÊñπÊ°àÊèê‰æõ‰∏Ä‰∏™ÂáΩÊï∞Ë∞ÉÁî®ËøêÁÆóÁ¨¶Ôºàoperator()Ôºâ„ÄÇ</p>
<p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåËøôÊòØÈÄöËøáÊèê‰æõ‰∏â‰∏™ <strong>operator()</strong> Êù•ÂÆûÁé∞ÁöÑÔºö‰∏Ä‰∏™Áî®‰∫é <strong>int</strong>Ôºå‰∏Ä‰∏™Áî®‰∫é <strong>double</strong>Ôºå‰∏Ä‰∏™Áî®‰∫é <strong>std::string</strong>„ÄÇ</p>
<p>ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºå<strong>Print</strong> ‰∏çÂøÖÁªßÊâøËá™‰ªª‰ΩïÂü∫Á±ªÔºå‰πüÊ≤°Êúâ‰ªª‰ΩïËôöÂáΩÊï∞„ÄÇÂõ†Ê≠§ÔºåÊ≤°ÊúâÂº∫ËÄ¶ÂêàÂà∞‰ªª‰ΩïË¶ÅÊ±Ç„ÄÇ</p>
<p>Â¶ÇÊûúÊàë‰ª¨ÊÑøÊÑèÔºåÊàë‰ª¨‰πüÂèØ‰ª•Â∞Ü <strong>int</strong> Âíå <strong>double</strong> ÁöÑÂáΩÊï∞Ë∞ÉÁî®ËøêÁÆóÁ¨¶ÂêàÂπ∂‰∏∫‰∏Ä‰∏™ÔºåÂõ†‰∏∫ int ÂèØ‰ª•ËΩ¨Êç¢‰∏∫ doubleÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Print</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="kt">double</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;int or double: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;string: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËôΩÁÑ∂ÂÖ≥‰∫éÂì™‰∏™ÁâàÊú¨ÊòØÊàë‰ª¨Â∫îËØ•È¶ñÈÄâÁöÑÈóÆÈ¢òÁõÆÂâçÂØπÊàë‰ª¨Êù•ËØ¥Âπ∂‰∏çÁâπÂà´ÈáçË¶ÅÔºå‰ΩÜ‰Ω†‰ºöÊ≥®ÊÑèÂà∞Êàë‰ª¨ÊúâÂæàÂ§öÂÆûÁé∞ÁÅµÊ¥ªÊÄß„ÄÇ</p>
<p>Âè™ÊúâÈùûÂ∏∏ÊùæÊï£ÁöÑËÄ¶ÂêàÔºåÂü∫‰∫éËøôÊ†∑‰∏Ä‰∏™Á∫¶ÂÆöÔºöÂØπ‰∫éÊØè‰∏Ä‰∏™Â§áÈÄâÊñπÊ°àÔºåÈÉΩÈúÄË¶ÅÊúâ‰∏Ä‰∏™ <code>operator()</code>ÔºåËÄå‰∏çËÆ∫ÂÖ∂Á°ÆÂàáÂΩ¢ÂºèÂ¶Ç‰Ωï„ÄÇ</p>
<p>Êàë‰ª¨‰∏çÂÜçÊúâ‰∏Ä‰∏™Âº∫Âà∂Êàë‰ª¨‰ª•ÈùûÂ∏∏ÂÖ∑‰ΩìÊñπÂºèÂÅö‰∫ãÁöÑËÆøÈóÆËÄÖÂü∫Á±ªÔºåÊàë‰ª¨‰πüÊ≤°Êúâ‰ªª‰ΩïÂ§áÈÄâÊñπÊ°àÁöÑÂü∫Á±ªÔºöÊàë‰ª¨ÂèØ‰ª•Ëá™Áî±‰ΩøÁî®Âü∫Êú¨Á±ªÂûãÂ¶Ç <code>int</code> Âíå <code>double</code>Ôºå‰ª•Âèä‰ªªÊÑèÁ±ªÁ±ªÂûãÂ¶Ç <code>std::string</code>„ÄÇ</p>
<p>‰πüËÆ∏ÊúÄÈáçË¶ÅÁöÑÊòØÔºå‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•ËΩªÊùæÊ∑ªÂä†Êñ∞ÁöÑÊìç‰ΩúÔºå‰∏çÈúÄË¶Å‰øÆÊîπÁé∞Êúâ‰ª£Á†Å„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•ËÆ§‰∏∫ËøôÊòØ‰∏ÄÁßçËøáÁ®ãÂºèËß£ÂÜ≥ÊñπÊ°àÔºåÂè™‰∏çËøáÊØîÊúÄÂàùÁöÑÂü∫‰∫éÊûö‰∏æÁöÑËß£ÂÜ≥ÊñπÊ°àÊõ¥Âä†‰ºòÈõÖÔºåÂêéËÄÖ‰ΩøÁî®Âü∫Á±ªÊù•‰øùÂ≠òÂå∫ÂàÜÂô®„ÄÇ</p>
<p><strong>ÈáçÊûÑÂΩ¢Áä∂ÁªòÂà∂‰∏∫Âü∫‰∫éÂÄºÁöÑÈùû‰æµÂÖ•ÂºèËß£ÂÜ≥ÊñπÊ°à</strong></p>
<p>Âá≠ÂÄüËøô‰∫õÁâπÊÄßÔºåstd::variant ÈùûÂ∏∏ÈÄÇÂêàÊàë‰ª¨ÁöÑÁªòÂõæÁ§∫‰æã„ÄÇËÆ©Êàë‰ª¨‰ΩøÁî® std::variant ÈáçÊñ∞ÂÆûÁé∞ÂΩ¢Áä∂ÁöÑÁªòÂà∂„ÄÇ</p>
<p>È¶ñÂÖàÔºåÊàë‰ª¨ÈáçÊûÑ Circle Âíå Square Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Point.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"> <span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">      <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÂçäÂæÑÊòØÂê¶ÊúâÊïà */</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="nf">center</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">center_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="n">center_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Point.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"> <span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">explicit</span> <span class="n">Square</span><span class="p">(</span><span class="kt">double</span> <span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">      <span class="o">:</span> <span class="n">side_</span><span class="p">(</span><span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöËæπÈïøÊòØÂê¶ÊúâÊïà */</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="nf">side</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">side_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="nf">center</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">center_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">double</span> <span class="n">side_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Point</span> <span class="n">center_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Circle</code> Âíå <code>Square</code> Á±ªÈÉΩË¢´Â§ßÂ§ßÁÆÄÂåñ‰∫ÜÔºö‰∏çÂÜçÈúÄË¶Å <code>Shape</code> Âü∫Á±ªÔºå‰πü‰∏çÂÜçÈúÄË¶ÅÂÆûÁé∞‰ªª‰ΩïËôöÂáΩÊï∞‚Äî‚ÄîÁâπÂà´ÊòØ <code>accept()</code> ÂáΩÊï∞„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËøôÁßçËÆøÈóÆËÄÖÊñπÊ≥ïÊòØÈùû‰æµÂÖ•ÂºèÁöÑÔºöËøôÁßçÂΩ¢ÂºèÁöÑËÆøÈóÆËÄÖÂèØ‰ª•ËΩªÊùæÊ∑ªÂä†Âà∞Áé∞ÊúâÁ±ªÂûã‰∏≠ÔºÅËÄå‰∏î‰∏çÈúÄË¶Å‰∏∫Ëøô‰∫õÁ±ªÂáÜÂ§á‰ªª‰ΩïÂç≥Â∞ÜËøõË°åÁöÑÊìç‰Ωú„ÄÇ</p>
<p>Êàë‰ª¨ÂèØ‰ª•ÂÆåÂÖ®‰∏ìÊ≥®‰∫éÂ∞ÜËøô‰∏§‰∏™Á±ªÂÆûÁé∞‰∏∫ÂÆÉ‰ª¨Êú¨Êù•ÁöÑÊ†∑Â≠êÔºöÂá†‰ΩïÂü∫Êú¨‰Ωì„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÈáçÊûÑ‰∏≠ÊúÄÁ≤æÂΩ©ÁöÑÈÉ®ÂàÜÊòØÂÆûÈôÖ‰ΩøÁî® <code>std::variant</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;variant&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="n">Shape</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">variant</span><span class="o">&lt;</span><span class="n">Circle</span><span class="p">,</span> <span class="n">Square</span><span class="o">&gt;</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Shapes.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="n">Shapes</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫éÊàë‰ª¨ÁöÑÂ∞ÅÈó≠Á±ªÂûãÈõÜÊòØ‰∏ÄÁªÑÂΩ¢Áä∂Ôºå<strong>variant</strong> Áé∞Âú®ÂåÖÂê´‰∏Ä‰∏™ <strong>Circle</strong> Êàñ <strong>Square</strong>„ÄÇ</p>
<p>ÈÇ£‰πà‰ª£Ë°®ÂΩ¢Áä∂Á±ªÂûãÁöÑÊäΩË±°ÈõÜÂêàÁöÑÂ•ΩÂêçÂ≠óÊòØ‰ªÄ‰πàÂë¢ÔºüÂóØ‚Ä¶‚Ä¶<strong>Shape</strong>„ÄÇ‰ª£ÊõøÊäΩË±°Âá∫ÂÖ∑‰ΩìÂΩ¢Áä∂Á±ªÂûãÁöÑÂü∫Á±ªÔºå<strong>std::variant</strong> Áé∞Âú®ÊâøÊãÖ‰∫ÜËøô‰∏Ä‰ªªÂä°„ÄÇÂ¶ÇÊûú‰Ω†ÊòØÁ¨¨‰∏ÄÊ¨°ÁúãÂà∞Ëøô‰∏ÄÁÇπÔºå‰Ω†ÂèØËÉΩ‰ºöÊÑüÂà∞ÈùûÂ∏∏ÊÉäËÆ∂„ÄÇ</p>
<p>‰ΩÜËØ∑Á®çÁ≠âÔºåËøòÊúâÊõ¥Â§öÔºöËøô‰πüÊÑèÂë≥ÁùÄÊàë‰ª¨Áé∞Âú®ÂèØ‰ª•ÊîæÂºÉ <strong>std::unique_ptr</strong>„ÄÇ<br/>ËÆ∞‰ΩèÔºöÊàë‰ª¨‰ΩøÁî®ÔºàÊô∫ËÉΩÔºâÊåáÈíàÁöÑÂîØ‰∏ÄÂéüÂõ†ÊòØËÉΩÂ§üÂ∞Ü‰∏çÂêåÁßçÁ±ªÁöÑÂΩ¢Áä∂Â≠òÂÇ®Âú®Âêå‰∏Ä‰∏™ÂêëÈáè‰∏≠„ÄÇ<br/>‰ΩÜÁé∞Âú® <strong>std::variant</strong> ‰ΩøÊàë‰ª¨ËÉΩÂ§üÂÅöÂà∞Ëøô‰∏ÄÁÇπÔºåÊàë‰ª¨ÂèØ‰ª•ÁÆÄÂçïÂú∞Â∞Ü <strong>variant</strong> ÂØπË±°Â≠òÂÇ®Âú®‰∏Ä‰∏™Âçï‰∏ÄÁöÑÂêëÈáè‰∏≠„ÄÇ</p>
<p>Êúâ‰∫ÜËøô‰∏™ÂäüËÉΩÔºåÊàë‰ª¨ÂèØ‰ª•ÁºñÂÜôËá™ÂÆö‰πâÊìç‰ΩúÊù•Â§ÑÁêÜÂΩ¢Áä∂„ÄÇÊàë‰ª¨‰ªçÁÑ∂ÂØπÁªòÂà∂ÂΩ¢Áä∂ÊÑüÂÖ¥Ë∂£„ÄÇ</p>
<p>‰∏∫Ê≠§ÔºåÊàë‰ª¨Áé∞Âú®ÂÆûÁé∞ Draw ËÆøÈóÆËÄÖÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Draw.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* ‰∏Ä‰∫õÂõæÂΩ¢Â∫ì */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">struct</span> <span class="nc">Draw</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">Circle</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="cm">/* ÂÆûÁé∞ÁªòÂà∂ÂúÜÁöÑÈÄªËæë */</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">Square</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="cm">/* ÂÆûÁé∞ÁªòÂà∂Ê≠£ÊñπÂΩ¢ÁöÑÈÄªËæë */</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜçÊ¨°ÔºåÊàë‰ª¨ÈÅµÂæ™ÊúüÊúõ‰∏∫ÊØè‰∏™Â§áÈÄâÊñπÊ°àÂÆûÁé∞‰∏Ä‰∏™ <code>operator()</code>Ôºö‰∏Ä‰∏™ÊòØ <code>Circle</code>ÔºåÂè¶‰∏Ä‰∏™ÊòØ <code>Square</code>„ÄÇ</p>
<p>‰ΩÜËøôÊ¨°Êàë‰ª¨ÊúâÈÄâÊã©Ôºå‰∏çÈúÄË¶ÅÂÆûÁé∞‰ªª‰ΩïÂü∫Á±ªÔºå‰πü‰∏çÈúÄË¶ÅÈáçÂÜô‰ªª‰ΩïËôöÂáΩÊï∞„ÄÇ<br/>Âõ†Ê≠§Ôºå‰∏çÈúÄË¶Å‰∏∫ÊØè‰∏™Â§áÈÄâÊñπÊ°àÁ≤æÁ°ÆÂÆûÁé∞‰∏Ä‰∏™ <code>operator()</code>„ÄÇ</p>
<p>ËôΩÁÑ∂Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊã•Êúâ‰∏§‰∏™ÂáΩÊï∞‰ºº‰πéÊòØÂêàÁêÜÁöÑÔºå‰ΩÜÊàë‰ª¨‰πüÂèØ‰ª•ÈÄâÊã©Â∞Ü‰∏§‰∏™ <code>operator()</code> ÂêàÂπ∂‰∏∫‰∏Ä‰∏™ÂáΩÊï∞ÔºåÊàë‰ª¨ËøòÂèØ‰ª•ÈÄâÊã©Êìç‰ΩúÁöÑËøîÂõûÁ±ªÂûãÔºåÊàë‰ª¨ÂèØ‰ª•Êú¨Âú∞ÂÜ≥ÂÆöÂ∫îËØ•ËøîÂõû‰ªÄ‰πàÔºåÂπ∂‰∏î‰∏çÊòØÁî±Âü∫Á±ªÁã¨Á´ã‰∫éÁâπÂÆöÊìç‰ΩúÂÅöÂá∫ÂÖ®Â±ÄÂÜ≥Á≠ñ„ÄÇÂÆûÁé∞‰∫ÜÁÅµÊ¥ªÊÄß„ÄÇÊùæÊï£ËÄ¶ÂêàÔºå‰ª§‰∫∫ÊÉäÂèπÔºÅ</p>
<p>ÊúÄÂêé‰∏ÄÂùóÊãºÂõæÊòØ <code>drawAllShapes()</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawAllShapes.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Shapes.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="nf">drawAllShapes</span><span class="p">(</span><span class="k">const</span> <span class="n">Shapes</span><span class="o">&amp;</span> <span class="n">shapes</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawAllShapes.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;DrawAllShapes.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="nf">drawAllShapes</span><span class="p">(</span><span class="k">const</span> <span class="n">Shapes</span><span class="o">&amp;</span> <span class="n">shapes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">shape</span> <span class="p">:</span> <span class="n">shapes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">std</span><span class="o">::</span><span class="n">visit</span><span class="p">(</span><span class="n">Draw</span><span class="p">{},</span> <span class="n">shape</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>drawAllShapes()</code> ÂáΩÊï∞Ë¢´ÈáçÊûÑ‰ª•Âà©Áî® <code>std::visit()</code>„ÄÇÂú®Ëøô‰∏™ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨Áé∞Âú®Â∞Ü <code>Draw</code> ËÆøÈóÆËÄÖÂ∫îÁî®‰∫éÂ≠òÂÇ®Âú®ÂêëÈáè‰∏≠ÁöÑÊâÄÊúâ <code>variant</code>„ÄÇ</p>
<p><code>std::visit()</code> ÁöÑÂ∑•‰ΩúÊòØ‰∏∫‰Ω†ÊâßË°åÂøÖË¶ÅÁöÑÁ±ªÂûãË∞ÉÂ∫¶ÔºåÂ¶ÇÊûúÁªôÂÆöÁöÑ <code>std::variant</code> ÂåÖÂê´‰∏Ä‰∏™ <code>Circle</code>ÔºåÂÆÉÂ∞ÜË∞ÉÁî® <code>Draw::operator()</code> Êù•ÁªòÂà∂ÂúÜ„ÄÇÂê¶ÂàôÔºåÂÆÉ‰ºöË∞ÉÁî® <code>Draw::operator()</code> Êù•ÁªòÂà∂Ê≠£ÊñπÂΩ¢„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÊÉ≥ÁöÑËØùÔºå‰Ω†ÂèØ‰ª•ÊâãÂä®ÂÆûÁé∞Áõ∏ÂêåÁöÑË∞ÉÂ∫¶Ôºå‰ΩøÁî® <code>std::get_if()</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">drawAllShapes</span><span class="p">(</span><span class="k">const</span> <span class="n">Shapes</span><span class="o">&amp;</span> <span class="n">shapes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">shape</span> <span class="p">:</span> <span class="n">shapes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="k">if</span><span class="p">(</span><span class="n">Circle</span><span class="o">*</span> <span class="n">circle</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">get_if</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">shape</span><span class="p">))</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">         <span class="c1">// ... ÁªòÂà∂‰∏Ä‰∏™ÂúÜ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">}</span> 
</span></span><span class="line"><span class="cl">      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">Square</span><span class="o">*</span> <span class="n">square</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">get_if</span><span class="o">&lt;</span><span class="n">Square</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">shape</span><span class="p">))</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">         <span class="c1">// ... ÁªòÂà∂‰∏Ä‰∏™Ê≠£ÊñπÂΩ¢ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàëÁü•ÈÅì‰Ω†Âú®ÊÉ≥‰ªÄ‰πàÔºö‚ÄúËçíË∞¨ÔºÅ‰∏∫‰ªÄ‰πàÊàë‰ºöÊÉ≥Ë¶ÅËøôÊ†∑ÂÅöÔºüËøô‰ºöÂØºËá¥‰∏éÂü∫‰∫éÊûö‰∏æÁöÑËß£ÂÜ≥ÊñπÊ°àÁõ∏ÂêåÁöÑÁª¥Êä§Âô©Ê¢¶„ÄÇ‚Äù</p>
<p>ÊàëÂÆåÂÖ®ÂêåÊÑè‰Ω†ÁöÑËßÇÁÇπÔºö‰ªéËΩØ‰ª∂ËÆæËÆ°ÁöÑËßíÂ∫¶Êù•ÁúãÔºåËøôÂ∞ÜÊòØ‰∏Ä‰∏™Á≥üÁ≥ïÁöÑÊÉ≥Ê≥ï„ÄÇ<br/>Â∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÊàë‰∏çÂæó‰∏çËØ¥ÔºåÂú®ËøôÊú¨‰π¶ÁöÑ‰∏ä‰∏ãÊñá‰∏≠ÊâøËÆ§Ëøô‰∏ÄÁÇπÊúâ‰∫õÂõ∞ÈöæÔºåÊúâÊó∂ÂèØËÉΩÊúâ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÁêÜÁî±ËøôÊ†∑ÂÅöÔºö<strong>ÊÄßËÉΩ</strong>„ÄÇ</p>
<p>ÊàëÁü•ÈÅìÔºåÁé∞Âú®ÊàëÂ∑≤ÁªèÂºïËµ∑‰∫Ü‰Ω†ÁöÑÂÖ¥Ë∂£Ôºå‰ΩÜÁî±‰∫éÊàë‰ª¨Âá†‰πéÂáÜÂ§áÂ•ΩËÆ®ËÆ∫ÊÄßËÉΩÈóÆÈ¢òÔºåÂÖÅËÆ∏ÊàëÊöÇÊó∂Êé®ËøüËøô‰∏™ËÆ®ËÆ∫Âá†ÊÆµÊñáÂ≠ó„ÄÇÊàë‰øùËØÅ‰ºöÂõûÂà∞Ëøô‰∏™ÈóÆÈ¢òÔºÅ</p>
<p>Êúâ‰∫ÜÊâÄÊúâËøô‰∫õÁªÜËäÇÔºåÊàë‰ª¨Áªà‰∫éÂèØ‰ª•ÈáçÊûÑ <code>main()</code> ÂáΩÊï∞‰∫ÜÔºå<br/>‰ΩÜËøô‰∏çÈúÄË¶ÅÂÅöÂ§™Â§öÂ∑•‰ΩúÔºö‰∏çÂÜçÈÄöËøá <code>std::make_unique()</code> ÂàõÂª∫ÂúÜÂíåÊ≠£ÊñπÂΩ¢ÔºåËÄåÊòØÁõ¥Êé•ÂàõÂª∫ÂúÜÂíåÊ≠£ÊñπÂΩ¢ÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨Ê∑ªÂä†Âà∞ÂêëÈáè‰∏≠„ÄÇ</p>
<p>ËøôÂæóÁõä‰∫é <code>variant</code> ÁöÑÈùûÊòæÂºèÊûÑÈÄ†ÂáΩÊï∞ÔºåÂÆÉÂÖÅËÆ∏ÈöêÂºèËΩ¨Êç¢‰ªª‰ΩïÂ§áÈÄâÊñπÊ°àÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Main.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shapes.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawAllShapes.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Shapes</span> <span class="n">shapes</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">Circle</span><span class="p">{</span><span class="mf">2.3</span><span class="p">});</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">Square</span><span class="p">{</span><span class="mf">1.2</span><span class="p">});</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">Circle</span><span class="p">{</span><span class="mf">4.1</span><span class="p">});</span> 
</span></span><span class="line"><span class="cl">    <span class="n">drawAllShapes</span><span class="p">(</span><span class="n">shapes</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÂü∫‰∫éÂÄºÁöÑËß£ÂÜ≥ÊñπÊ°àÁöÑÊúÄÁªàÁªìÊûú‰ª§‰∫∫ÊÉäÂèπÔºöÊ≤°Êúâ‰ªª‰ΩïÂü∫Á±ª„ÄÇÊ≤°ÊúâËôöÂáΩÊï∞ÔºåÊ≤°ÊúâÊåáÈíà„ÄÇÊ≤°ÊúâÊâãÂä®ÂÜÖÂ≠òÂàÜÈÖç„ÄÇ</p>
<p>‰∫ãÊÉÖÂ∞ΩÂèØËÉΩÂú∞Áõ¥Êé•ÔºåÂá†‰πéÊ≤°ÊúâÊ†∑Êùø‰ª£Á†Å„ÄÇÊ≠§Â§ñÔºåÂ∞ΩÁÆ°‰ª£Á†ÅÁúãËµ∑Êù•‰∏é‰πãÂâçÁöÑËß£ÂÜ≥ÊñπÊ°àÈùûÂ∏∏‰∏çÂêåÔºå‰ΩÜÊû∂ÊûÑÂ±ûÊÄßÊòØÁõ∏ÂêåÁöÑÔºöÊØè‰∏™‰∫∫ÈÉΩÂèØ‰ª•Âú®‰∏ç‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÁöÑÊÉÖÂÜµ‰∏ãÊ∑ªÂä†Êñ∞Êìç‰ΩúÔºàÂèÇËßÅÂõæ 4-4Ôºâ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÊàë‰ª¨Âú®Ê∑ªÂä†Êìç‰ΩúÊñπÈù¢‰ªçÁÑ∂Êª°Ë∂≥ OCPÔºàÂºÄÈó≠ÂéüÂàôÔºâ„ÄÇ</p>
<p>Â¶ÇÂâçÊâÄËø∞ÔºåËøôÁßçÊñπÊ≥ïÊòØÈùû‰æµÂÖ•ÂºèÁöÑ„ÄÇ‰ªéÊû∂ÊûÑËßíÂ∫¶Êù•ÁúãÔºåËøôÁªô‰Ω†Â∏¶Êù•‰∫ÜÂè¶‰∏Ä‰∏™ÊòæËëóÁöÑ‰ºòÂäøÔºåÁõ∏ÊØî‰∫éÁªèÂÖ∏ÁöÑËÆøÈóÆËÄÖÊ®°Âºè„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÊØîËæÉ<strong>ÁªèÂÖ∏ËÆøÈóÆËÄÖ</strong>ÁöÑ‰æùËµñÂÖ≥Á≥ªÂõæÔºàËßÅÂõæ 4-3ÔºâÂíå <code>std::variant</code> Ëß£ÂÜ≥ÊñπÊ°àÁöÑ‰æùËµñÂÖ≥Á≥ªÂõæÔºàËßÅÂõæ 4-4ÔºâÔºå‰Ω†‰ºöÁúãÂà∞ <code>std::variant</code> Ëß£ÂÜ≥ÊñπÊ°àÁöÑ‰æùËµñÂÖ≥Á≥ªÂõæÊúâ‰∏Ä‰∏™È¢ùÂ§ñÁöÑÊû∂ÊûÑËæπÁïå„ÄÇ</p>
<p>ËøôÊÑèÂë≥ÁùÄ <code>std::variant</code> ÂèäÂÖ∂Â§áÈÄâÊñπÊ°à‰πãÈó¥Ê≤°ÊúâÂæ™ÁéØ‰æùËµñÔºåÊàëÂ∫îËØ•ÈáçÂ§ç‰∏ÄÈÅç‰ª•Âº∫Ë∞ÉÂÖ∂ÈáçË¶ÅÊÄßÔºö<code>std::variant</code> ÂèäÂÖ∂Â§áÈÄâÊñπÊ°à‰πãÈó¥Ê≤°ÊúâÂæ™ÁéØ‰æùËµñÔºÅËøôÁúã‰ºº‰∏Ä‰∏™Â∞èÁªÜËäÇÔºå‰ΩÜÂÆûÈôÖ‰∏äÊòØ‰∏Ä‰∏™Â∑®Â§ßÁöÑÊû∂ÊûÑ‰ºòÂäøÔºåÂ∑®Â§ßÔºÅ‰æãÂ¶ÇÔºå‰Ω†ÂèØ‰ª•Âç≥Êó∂ÂàõÂª∫Âü∫‰∫é <code>std::variant</code> ÁöÑÊäΩË±°Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;variant&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="n">Shape</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">variant</span><span class="o">&lt;</span><span class="n">Circle</span><span class="p">,</span> <span class="n">Square</span><span class="o">&gt;</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;SomeHeader.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Ellipse.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;variant&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="n">RoundShapes</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">variant</span><span class="o">&lt;</span><span class="n">Circle</span><span class="p">,</span> <span class="n">Ellipse</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;SomeOtherHeader.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Rectangle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include &lt;variant&gt; 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="n">AngularShapes</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">variant</span><span class="o">&lt;</span><span class="n">Square</span><span class="p">,</span> <span class="n">Rectangle</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span></code></pre></td></tr></table>
</div>
</div><p>Èô§‰∫ÜÊàë‰ª¨Â∑≤ÁªèÂàõÂª∫ÁöÑ <code>Shape</code> ÊäΩË±°Â§ñÔºå‰Ω†ËøòÂèØ‰ª•ÂàõÂª∫ÊâÄÊúâÂúÜÂΩ¢ÁöÑ <code>std::variant</code>Ôºå‰ª•ÂèäÊâÄÊúâËßíÂ∫¶ÂΩ¢Áä∂ÁöÑ <code>std::variant</code>ÔºåËøô‰∏§ËÄÖÈÉΩÂèØËÉΩËøúÁ¶ª <code>Shape</code> ÊäΩË±°„ÄÇ</p>
<p>‰Ω†ÂèØ‰ª•ËΩªÊùæÂÅöÂà∞Ëøô‰∏ÄÁÇπÔºåÂõ†‰∏∫‰∏çÈúÄË¶Å‰ªéÂ§ö‰∏™ËÆøÈóÆËÄÖÂü∫Á±ªÊ¥æÁîü„ÄÇÁõ∏ÂèçÔºåÂΩ¢Áä∂Á±ª‰∏ç‰ºöÂèóÂà∞ÂΩ±Âìç„ÄÇÂõ†Ê≠§Ôºå<code>std::variant</code> Ëß£ÂÜ≥ÊñπÊ°àÁöÑÈùû‰æµÂÖ•ÊÄßÂÖ∑ÊúâÊúÄÈ´òÁöÑÊû∂ÊûÑ‰ª∑ÂÄº„ÄÇ</p>
<p><strong>ÊÄßËÉΩÂü∫ÂáÜÊµãËØï</strong></p>
<p>ÊàëÁü•ÈÅì‰Ω†Áé∞Âú®ÁöÑÊÑüËßâÔºåÊòØÁöÑÔºåËøôÂ∞±ÊòØ‰∏ÄËßÅÈíüÊÉÖÁöÑÊÑüËßâ„ÄÇ‰ΩÜ‰ø°‰∏ç‰ø°Áî±‰Ω†ÔºåËøòÊúâÊõ¥Â§öÂÜÖÂÆπ„ÄÇÊúâ‰∏Ä‰∏™Êàë‰ª¨ËøòÊ≤°ÊúâËÆ®ËÆ∫ÁöÑËØùÈ¢òÔºåËøôÊòØÊØè‰∏™C++ÂºÄÂèëËÄÖÈÉΩÂÖ≥ÂøÉÁöÑÔºåÈÇ£Â∞±ÊòØÊÄßËÉΩ„ÄÇ</p>
<p>ËôΩÁÑ∂ËøôÊú¨‰π¶Âπ∂‰∏çÊòØ‰∏ìÈó®ËÆ®ËÆ∫ÊÄßËÉΩÁöÑÔºå‰ΩÜ‰ªçÁÑ∂ÂÄºÂæó‰∏ÄÊèêÁöÑÊòØÔºå‰Ω†‰∏çÈúÄË¶ÅÊãÖÂøÉ <strong>std::variant</strong> ÁöÑÊÄßËÉΩ„ÄÇÊàëÂèØ‰ª•Âêë‰Ω†‰øùËØÅÂÆÉÈùûÂ∏∏Âø´„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂú®ÊàëÂêë‰Ω†Â±ïÁ§∫Âü∫ÂáÜÊµãËØïÁªìÊûú‰πãÂâçÔºåËØ∑ÂÖÅËÆ∏ÊàëÂØπËøô‰∫õÂü∫ÂáÜÊµãËØïÂÅö‰∏Ä‰∫õËØÑËÆ∫„ÄÇÊÄßËÉΩ‚Äî‚ÄîÂîâ„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÊÄßËÉΩÊÄªÊòØ‰∏Ä‰∏™Ê£òÊâãÁöÑËØùÈ¢ò„ÄÇÊÄªÊúâ‰∫∫Êä±ÊÄ®ÊÄßËÉΩÈóÆÈ¢ò„ÄÇÂõ†Ê≠§ÔºåÊàëÂæà‰πêÊÑèÂÆåÂÖ®Ë∑≥ËøáËøô‰∏™ËØùÈ¢ò„ÄÇ</p>
<p>‰ΩÜÂè¶‰∏ÄÊñπÈù¢Ôºå‰πüÊúâ‰∫∫Êä±ÊÄ®Áº∫Â∞ëÊÄßËÉΩÊï∞ÊçÆ„ÄÇÂîâÔºåÊó¢ÁÑ∂Êó†ËÆ∫Â¶Ç‰ΩïÊÄª‰ºöÊúâ‰∏Ä‰∫õÊä±ÊÄ®ÔºåÂπ∂‰∏îÁªìÊûúÂÆûÂú®Â§™Â•Ω‰∫Ü‰∏çÂÆπÈîôËøáÔºåÊàë‰ºöÂêë‰Ω†Â±ïÁ§∫‰∏Ä‰∫õÂü∫ÂáÜÊµãËØïÁöÑÁªìÊûú„ÄÇ</p>
<p>‰ΩÜÊúâ‰∏§‰∏™Êù°‰ª∂ÔºöÈ¶ñÂÖàÔºå‰Ω†‰∏çÂ∫îÂ∞ÜËøô‰∫õÁªìÊûúËßÜ‰∏∫‰ª£Ë°®ÁªùÂØπÁúüÁêÜÁöÑÂÆöÈáèÂÄºÔºåËÄåÂè™ÊòØÊåáÂêëÊ≠£Á°ÆÊñπÂêëÁöÑÂÆöÊÄßÂÄº„ÄÇÂÖ∂Ê¨°Ôºå‰Ω†‰∏ç‰ºöÂõ†‰∏∫ÊàëÊ≤°Êúâ‰ΩøÁî®‰Ω†ÊúÄÂñúÊ¨¢ÁöÑÁºñËØëÂô®„ÄÅÁºñËØëÊ†áÂøóÊàñIDEËÄåÂú®ÊàëÁöÑÊàøÂ≠êÂâçÊäóËÆÆ„ÄÇÁ≠îÂ∫îÂêóÔºü</p>
<p><strong>‰Ω†</strong>ÔºöÁÇπÂ§¥Âπ∂ÊâøËØ∫‰∏ç‰ºöÊä±ÊÄ®ÁêêÁ¢éÁöÑ‰∫ãÊÉÖÔºÅ</p>
<p>Â•ΩÁöÑÔºåÂ§™Ê£í‰∫ÜÔºåÈÇ£‰πàË°®4-2ÁªôÂá∫‰∫ÜÂü∫ÂáÜÊµãËØïÁöÑÁªìÊûú„ÄÇ</p>
<p><strong>Ë°®4-2 ‰∏çÂêåËÆøÈóÆËÄÖÂÆûÁé∞ÁöÑÂü∫ÂáÜÊµãËØïÁªìÊûú</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ËÆøÈóÆËÄÖÂÆûÁé∞</th>
<th>GCC 11.1</th>
<th>Clang 11.1</th>
</tr>
</thead>
<tbody>
<tr>
<td>ÁªèÂÖ∏ËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè</td>
<td>1.6161 s</td>
<td>1.8015 s</td>
</tr>
<tr>
<td>Èù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°à</td>
<td>1.5205 s</td>
<td>1.1480 s</td>
</tr>
<tr>
<td>Êûö‰∏æËß£ÂÜ≥ÊñπÊ°à</td>
<td>1.2179 s</td>
<td>1.1200 s</td>
</tr>
<tr>
<td><code>std::variant</code>Ôºà‰ΩøÁî® <code>std::visit()</code>Ôºâ</td>
<td>1.1992 s</td>
<td>1.2279 s</td>
</tr>
<tr>
<td><code>std::variant</code>Ôºà‰ΩøÁî® <code>std::get_if()</code>Ôºâ</td>
<td>1.0252 s</td>
<td>0.6998 s</td>
</tr>
</tbody>
</table></div>
<p>‰∏∫‰∫ÜÊõ¥Â•ΩÂú∞ÁêÜËß£Ëøô‰∫õÊï∞Â≠óÔºåÊàëÂ∫îËØ•Áªô‰Ω†‰∏Ä‰∫õËÉåÊôØ‰ø°ÊÅØ„ÄÇ‰∏∫‰∫ÜËÆ©Âú∫ÊôØÊõ¥Âä†Áé∞ÂÆûÔºåÊàë‰∏ç‰ªÖ‰ΩøÁî®‰∫ÜÂúÜÂíåÊ≠£ÊñπÂΩ¢ÔºåËøò‰ΩøÁî®‰∫ÜÁü©ÂΩ¢ÂíåÊ§≠ÂúÜ„ÄÇ</p>
<p>ÁÑ∂ÂêéÂú®10,000‰∏™ÈöèÊú∫ÂàõÂª∫ÁöÑÂΩ¢Áä∂‰∏äËøêË°å‰∫Ü25,000Ê¨°Êìç‰ΩúÔºåÊàëÊ≤°ÊúâÁªòÂà∂Ëøô‰∫õÂΩ¢Áä∂ÔºåËÄåÊòØÈÄöËøáÈöèÊú∫ÂêëÈáèÊõ¥Êñ∞‰∏≠ÂøÉÁÇπ„ÄÇ</p>
<p>ËøôÊòØÂõ†‰∏∫ËøôÁßçÂπ≥ÁßªÊìç‰ΩúÈùûÂ∏∏‰æøÂÆúÔºåÂèØ‰ª•ËÆ©ÊàëÊõ¥Â•ΩÂú∞Â±ïÁ§∫ÊâÄÊúâËøô‰∫õËß£ÂÜ≥ÊñπÊ°àÁöÑÂÜÖÂú®ÂºÄÈîÄÔºàÂ¶ÇÈó¥Êé•ÂØªÂùÄÂíåËôöÂáΩÊï∞Ë∞ÉÁî®ÁöÑÂºÄÈîÄÔºâ„ÄÇ</p>
<p>‰∏Ä‰∏™ÊòÇË¥µÁöÑÊìç‰ΩúÔºåÂ¶Ç draw()Ôºå‰ºöÊé©ÁõñËøô‰∫õÁªÜËäÇÔºåÂπ∂ÂèØËÉΩÁªô‰∫∫‰ª•ÊâÄÊúâÊñπÊ≥ïÈÉΩÈùûÂ∏∏Áõ∏‰ººÁöÑÂç∞Ë±°„ÄÇ</p>
<p>Êàë‰ΩøÁî®‰∫Ü<strong>GCC 11.1</strong>Âíå<strong>Clang 11.1</strong>ÔºåÂπ∂‰∏∫Ëøô‰∏§ÁßçÁºñËØëÂô®‰ªÖÊ∑ªÂä†‰∫Ü <strong>-O3</strong> Âíå <strong>-DNDEBUG</strong> ÁºñËØëÊ†áÂøó„ÄÇ‰ΩøÁî®ÁöÑÂπ≥Âè∞ÊòØmacOS Big SurÔºàÁâàÊú¨11.4ÔºâÔºåÊê≠ËΩΩ8Ê†∏Intel Core i7Â§ÑÁêÜÂô®Ôºå‰∏ªÈ¢ë3.8 GHzÔºåÂÜÖÂ≠ò64 GB„ÄÇ</p>
<p>‰ªéÂü∫ÂáÜÊµãËØïÁªìÊûú‰∏≠ÊúÄÊòéÊòæÁöÑÁªìËÆ∫ÊòØÔºå<strong>variant</strong> Ëß£ÂÜ≥ÊñπÊ°àÊØî <strong>ÁªèÂÖ∏ËÆøÈóÆËÄÖ</strong> Ëß£ÂÜ≥ÊñπÊ°àÊõ¥<strong>È´òÊïà</strong>„ÄÇËøôÂπ∂‰∏ç‰ª§‰∫∫ÊÉäËÆ∂ÔºöÁî±‰∫éÂèåÈáçÂàÜÊ¥æÔºå<strong>ÁªèÂÖ∏ËÆøÈóÆËÄÖ</strong>ÂÆûÁé∞ÂåÖÂê´‰∫Ü<strong>ÂæàÂ§öÈó¥Êé•ÂØªÂùÄ</strong>ÔºåÂõ†Ê≠§‰πü<strong>ÂæàÈöæ‰ºòÂåñ</strong>„ÄÇ</p>
<p>Ê≠§Â§ñÔºåÂΩ¢Áä∂ÂØπË±°ÁöÑÂÜÖÂ≠òÂ∏ÉÂ±ÄÈùûÂ∏∏ÂÆåÁæéÔºö‰∏éÂÖ∂‰ªñÊâÄÊúâËß£ÂÜ≥ÊñπÊ°àÔºàÂåÖÊã¨Âü∫‰∫éÊûö‰∏æÁöÑËß£ÂÜ≥ÊñπÊ°àÔºâÁõ∏ÊØîÔºåÊâÄÊúâÂΩ¢Áä∂ÈÉΩÂú®ÂÜÖÂ≠ò‰∏≠ËøûÁª≠Â≠òÂÇ®ÔºåËøôÊòØ‰Ω†ÂèØ‰ª•ÈÄâÊã©ÁöÑÊúÄ<strong>ÊúâÂà©‰∫éÁºìÂ≠òÁöÑÂ∏ÉÂ±Ä</strong>„ÄÇ</p>
<p>Á¨¨‰∫å‰∏™ÁªìËÆ∫ÊòØÔºå<strong>std::variant</strong> Á°ÆÂÆûÈùûÂ∏∏È´òÊïàÔºåÁîöËá≥ÂèØ‰ª•ËØ¥ÊòØÂá∫‰πéÊÑèÊñôÂú∞È´òÊïà„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºå‰ª§‰∫∫ÊÉäËÆ∂ÁöÑÊòØÊïàÁéáÈ´òÂ∫¶‰æùËµñ‰∫éÊàë‰ª¨ÊòØÂê¶‰ΩøÁî® <strong>std::get_if()</strong> Êàñ <strong>std::visit()</strong>ÔºàÊàëÁ≠îÂ∫î‰ºöÂõûÂà∞Ëøô‰∏ÄÁÇπÔºâ„ÄÇ</p>
<p>Êó†ËÆ∫ÊòØ<strong>GCC</strong>ËøòÊòØ<strong>Clang</strong>ÔºåÂú®‰ΩøÁî® <strong>std::visit()</strong> Êó∂ÁîüÊàêÁöÑ‰ª£Á†ÅÈÉΩË¶Å<strong>ÊÖ¢</strong>ÂæóÂ§ö„ÄÇÊàëÂÅáËÆæ <strong>std::visit()</strong> Âú®Ëøô‰∏ÄÁÇπ‰∏äÂπ∂Ê≤°ÊúâË¢´ÂÆåÁæéÂÆûÁé∞Âíå‰ºòÂåñ„ÄÇ‰ΩÜÊòØÔºåÊ≠£Â¶ÇÊàë‰πãÂâçÊâÄËØ¥ÔºåÊÄßËÉΩÊÄªÊòØÂæàÂ§çÊùÇÔºåÊàë‰∏çÊâìÁÆóÊ∑±ÂÖ•Êé¢ËÆ®Ëøô‰∏™Ë∞úÈ¢ò„ÄÇ</p>
<p>ÊúÄÈáçË¶ÅÁöÑÊòØÔºå<strong>std::variant</strong> ÁöÑÁæé‰∏ΩÂπ∂Ê≤°ÊúâÂõ†‰∏∫Á≥üÁ≥ïÁöÑÊÄßËÉΩÊï∞ÊçÆËÄåÂèóÂà∞Á†¥Âùè„ÄÇ</p>
<p>Áõ∏ÂèçÔºöÊÄßËÉΩÁªìÊûúÊúâÂä©‰∫éÂä†Ê∑±‰Ω†‰∏é <strong>std::variant</strong> Êñ∞Âª∫Á´ãÁöÑÂÖ≥Á≥ª„ÄÇ</p>
<p><strong>ÂàÜÊûê std::variant Ëß£ÂÜ≥ÊñπÊ°àÁöÑ‰∏çË∂≥‰πãÂ§Ñ</strong></p>
<p>ËôΩÁÑ∂Êàë‰∏çÊÉ≥Âç±ÂèäËøôÁßçÂÖ≥Á≥ªÔºå‰ΩÜÊàëËÆ§‰∏∫ÊåáÂá∫‰∏Ä‰∫õÁº∫ÁÇπÊòØÊàëÁöÑË¥£‰ªªÔºåÂ¶ÇÊûú‰Ω†‰ΩøÁî®Âü∫‰∫é <strong>std::variant</strong> ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºå‰Ω†Â∞Ü‰∏çÂæó‰∏çÈù¢ÂØπËøô‰∫õÈóÆÈ¢ò„ÄÇ</p>
<p>È¶ñÂÖàÔºåÊàëÂ∫îËØ•ÂÜçÊ¨°ÊåáÂá∫ÊòæËÄåÊòìËßÅÁöÑ‰∫ãÂÆûÔºö‰Ωú‰∏∫‰∏ÄÁßçÁ±ª‰ºº‰∫éËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè‰∏îÂü∫‰∫éËøáÁ®ãÁºñÁ®ãÁöÑËß£ÂÜ≥ÊñπÊ°àÔºå<br/><strong>std::variant</strong> ‰πü‰∏ìÊ≥®‰∫éÊèê‰æõ‰∏ÄÁªÑÂºÄÊîæÁöÑÊìç‰ΩúÔºåÂÖ∂Áº∫ÁÇπÊòØ‰Ω†ÂøÖÈ°ªÂ§ÑÁêÜ‰∏Ä‰∏™Â∞ÅÈó≠ÁöÑÁ±ªÂûãÈõÜ„ÄÇ</p>
<p>Ê∑ªÂä†Êñ∞Á±ªÂûã‰ºöÂºïÂèë‰∏éÊàë‰ª¨Âú® ‚ÄúÂáÜÂàô15Ôºö‰∏∫Á±ªÂûãÊàñÊìç‰ΩúÁöÑÊ∑ªÂä†ËøõË°åËÆæËÆ°‚Äù ‰∏≠ÊèêÂà∞ÁöÑ<strong>Âü∫‰∫éÊûö‰∏æ</strong>ÁöÑËß£ÂÜ≥ÊñπÊ°àÁ±ª‰ººÁöÑÈóÆÈ¢ò„ÄÇ<br/>È¶ñÂÖàÔºå‰Ω†ÂøÖÈ°ªÊõ¥Êñ∞ <strong>variant</strong> Êú¨Ë∫´ÔºåËøôÂèØËÉΩ‰ºöËß¶ÂèëÊâÄÊúâ‰ΩøÁî®ËØ• <strong>variant</strong> Á±ªÂûãÁöÑ‰ª£Á†ÅÈáçÊñ∞ÁºñËØëÔºàËøòËÆ∞ÂæóÊõ¥Êñ∞Êûö‰∏æÂêóÔºüÔºâ„ÄÇ<br/>Ê≠§Â§ñÔºå‰Ω†ËøòÂøÖÈ°ª<strong>Êõ¥Êñ∞ÊâÄÊúâÊìç‰Ωú</strong>ÔºåÂπ∂‰∏∫Êñ∞ÁöÑÂ§áÈÄâÊñπÊ°àÊ∑ªÂä†ÂèØËÉΩÁº∫Â§±ÁöÑ <strong>operator()</strong>„ÄÇ<br/>Â•ΩÁöÑ‰∏ÄÈù¢ÊòØÔºåÂ¶ÇÊûúÁº∫Â∞ëËøô‰∫õÊìç‰ΩúÁ¨¶‰πã‰∏ÄÔºåÁºñËØëÂô®‰ºöÊä•Èîô„ÄÇÂùèÁöÑ‰∏ÄÈù¢ÊòØÔºåÁºñËØëÂô®‰∏ç‰ºöÁîüÊàê‰∏ÄÊù°ÂèãÂ•Ω„ÄÅÊòìËØªÁöÑÈîôËØØ‰ø°ÊÅØÔºåËÄåÊòØÁîüÊàêÊé•ËøëÊâÄÊúâÊ®°ÊùøÁõ∏ÂÖ≥ÈîôËØØÊ∂àÊÅØ‰πãÊØçÁöÑ‰∏úË•ø„ÄÇ</p>
<p>ÊÄªÁöÑÊù•ËØ¥ÔºåËøôÁúüÁöÑÈùûÂ∏∏ÂÉèÊàë‰ª¨‰πãÂâç‰ΩøÁî®<strong>Âü∫‰∫éÊûö‰∏æ</strong>ÁöÑËß£ÂÜ≥ÊñπÊ°àÊó∂ÁöÑÁªèÂéÜ„ÄÇ</p>
<p><strong>Á¨¨‰∫å‰∏™ÊΩúÂú®ÈóÆÈ¢ò</strong>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‰Ω†Â∫îËØ•<strong>ÈÅøÂÖç</strong>Âú® <strong>variant</strong> ‰∏≠ÊîæÁΩÆ<strong>Â§ßÂ∞èÂ∑ÆÂºÇÂæàÂ§ß</strong>ÁöÑÁ±ªÂûã„ÄÇ</p>
<p>Â¶ÇÊûúËá≥Â∞ëÊúâ‰∏Ä‰∏™Â§áÈÄâÊñπÊ°àÊØîÂÖ∂‰ªñÁöÑÂ§ßÂæóÂ§öÔºå<strong>Â≠òÂÇ®ËÆ∏Â§öËæÉÂ∞èÁöÑÂ§áÈÄâÊñπÊ°àÂèØËÉΩ‰ºöÊµ™Ë¥πÂ§ßÈáèÁ©∫Èó¥</strong>„ÄÇ<br/>Ëøô‰ºöÂØπÊÄßËÉΩ‰∫ßÁîüË¥üÈù¢ÂΩ±ÂìçÔºåËß£ÂÜ≥ÊñπÊ°àÊòØ‰∏çÁõ¥Êé•Â≠òÂÇ®ËæÉÂ§ßÁöÑÂ§áÈÄâÊñπÊ°àÔºåËÄåÊòØ<strong>ÈÄöËøá‰ª£ÁêÜÂØπË±°</strong>Êàñ<strong>‰ΩøÁî®Ê°•Êé•ËÆæËÆ°Ê®°Âºè</strong>Êù•Â≠òÂÇ®ÂÆÉ‰ª¨„ÄÇ</p>
<p>ÂΩìÁÑ∂ÔºåËøô‰ºö<strong>ÂºïÂÖ•Èó¥Êé•ÂØªÂùÄ</strong>ÔºåËøô‰πü‰ºö<strong>ÂΩ±ÂìçÊÄßËÉΩ</strong>„ÄÇ‰∏éÂ≠òÂÇ®‰∏çÂêåÂ§ßÂ∞èÁöÑÂÄºÁõ∏ÊØîÔºåËøôÁßçÊñπÊ≥ïÂú®ÊÄßËÉΩ‰∏äÁöÑÂä£Âäø‰∏éÂê¶ÈúÄË¶Å‰Ω†Ëá™Â∑±ËøõË°åÂü∫ÂáÜÊµãËØï„ÄÇ</p>
<p>ÊúÄÂêé‰ΩÜÂêåÊ†∑ÈáçË¶ÅÁöÑÊòØÔºå‰Ω†Â∫îËØ•ÂßãÁªàÊÑèËØÜÂà∞ <strong>variant</strong> ÂèØ‰ª•Êè≠Á§∫ÂæàÂ§ö‰ø°ÊÅØ„ÄÇ<br/>ËôΩÁÑ∂ÂÆÉ‰ª£Ë°®‰∫Ü‰∏ÄÁßçËøêË°åÊó∂ÊäΩË±°Ôºå‰ΩÜÂåÖÂê´ÁöÑÁ±ªÂûã‰ªçÁÑ∂Ê∏ÖÊô∞ÂèØËßÅ„ÄÇËøôÂèØËÉΩ‰ºöÂàõÂª∫ÂØπ <strong>variant</strong> ÁöÑÁâ©ÁêÜ‰æùËµñÔºåÂç≥ÂΩì‰Ω†‰øÆÊîπÂÖ∂‰∏≠‰∏Ä‰∏™Â§áÈÄâÁ±ªÂûãÊó∂ÔºåÂèØËÉΩÈúÄË¶ÅÈáçÊñ∞ÁºñËØë‰ªª‰Ωï‰æùËµñÂÆÉÁöÑ‰ª£Á†Å„ÄÇ</p>
<p>Ëß£ÂÜ≥ÊñπÊ°àÂêåÊ†∑ÊòØÂ≠òÂÇ®<strong>ÊåáÈíà</strong>Êàñ<strong>‰ª£ÁêÜÂØπË±°</strong>ÔºåËøôÊ†∑ÂèØ‰ª•ÈöêËóèÂÆûÁé∞ÁªÜËäÇ„ÄÇ<br/>‰∏çÂπ∏ÁöÑÊòØÔºåËøô‰πü‰ºöÂØπÊÄßËÉΩ‰∫ßÁîüÂΩ±ÂìçÔºåÂõ†‰∏∫ÂæàÂ§öÊÄßËÉΩÊèêÂçáÊù•Ëá™‰∫éÁºñËØëÂô®‰∫ÜËß£Ëøô‰∫õÁªÜËäÇÂπ∂Áõ∏Â∫îÂú∞‰ºòÂåñÂÆÉ‰ª¨„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂú®ÊÄßËÉΩÂíåÂ∞ÅË£Ö‰πãÈó¥ÊÄªÊòØÂ≠òÂú®ÊùÉË°°„ÄÇ</p>
<p>Â∞ΩÁÆ°Â≠òÂú®Ëøô‰∫õ‰∏çË∂≥ÔºåÊÄª‰ΩìËÄåË®ÄÔºå<strong>std::variant</strong> Ë¢´ËØÅÊòéÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÊõø‰ª£<strong>Èù¢ÂêëÂØπË±°ÁºñÁ®ãÔºàOOPÔºâ<strong>ÁöÑ</strong>ËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè</strong>„ÄÇ<br/>ÂÆÉÂ§ßÂ§ßÁÆÄÂåñ‰∫Ü‰ª£Á†ÅÔºåÂá†‰πéÊ∂àÈô§‰∫ÜÊâÄÊúâÁöÑÊ†∑Êùø‰ª£Á†ÅÔºåÂπ∂Â∞ÅË£Ö‰∫Ü‰∏ëÈôã‰∏îÁª¥Êä§ÂØÜÈõÜÁöÑÈÉ®ÂàÜÔºåÂêåÊó∂Â∏¶Êù•‰∫ÜÂçìË∂äÁöÑÊÄßËÉΩ„ÄÇ</p>
<p>Ê≠§Â§ñÔºå<strong>std::variant</strong> ËøòËØÅÊòé‰∫Ü‰∏Ä‰∏™‰∫ãÂÆûÔºåÂç≥ËÆæËÆ°Ê®°ÂºèÂÖ≥Ê≥®ÁöÑÊòØÊÑèÂõæÔºåËÄå‰∏çÊòØÂÆûÁé∞ÁªÜËäÇ„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>ÁêÜËß£ÁªèÂÖ∏<strong>Visitor</strong>Âíå<strong>std::variant</strong>‰πãÈó¥ÁöÑÊû∂ÊûÑÁõ∏‰ººÊÄß„ÄÇ</li>
<li>Ê≥®ÊÑè<strong>std::variant</strong>‰∏éÈù¢ÂêëÂØπË±°ËÆøÈóÆËÄÖËß£ÂÜ≥ÊñπÊ°àÁõ∏ÊØîÁöÑ‰ºòÂäø„ÄÇ</li>
<li>‰ΩøÁî®<strong>std::variant</strong>ÁöÑÈùû‰æµÂÖ•ÊÄßÊù•Âä®ÊÄÅÂàõÂª∫ÊäΩË±°„ÄÇ</li>
<li>ËÆ∞‰Ωè<strong>std::variant</strong>ÁöÑÁº∫ÁÇπÔºåÂπ∂Âú®‰∏çÂêàÈÄÇÁöÑÊó∂ÂÄôÈÅøÂÖç‰ΩøÁî®ÂÆÉ</li>
</ul>
<h3 id="ÂáÜÂàô18Ë≠¶ÊÉïÊó†ÁéØËÆøÈóÆËÄÖÁöÑÊÄßËÉΩ">ÂáÜÂàô18ÔºöË≠¶ÊÉïÊó†ÁéØËÆøÈóÆËÄÖÁöÑÊÄßËÉΩ
</h3><p>Ê≠£Â¶Ç‰Ω†Âú®‚ÄúÂáÜÂàô15Ôºö‰∏∫Á±ªÂûãÊàñÊìç‰ΩúÁöÑÊ∑ªÂä†ËøõË°åËÆæËÆ°‚Äù‰∏≠ÁúãÂà∞ÁöÑÔºåÂΩì‰Ω†‰ΩøÁî®Âä®ÊÄÅÂ§öÊÄÅÊÄßÊó∂Ôºå‰Ω†ÂøÖÈ°ªÂÅöÂá∫‰∏Ä‰∏™ÂÜ≥ÂÆöÔºö‰Ω†ÂèØ‰ª•ÊîØÊåÅÂºÄÊîæÁöÑÁ±ªÂûãÈõÜÊàñÂºÄÊîæÁöÑÊìç‰ΩúÈõÜ„ÄÇ</p>
<p>‰Ω†‰∏çËÉΩ‰∏§ËÄÖÂÖºÂæóÔºåÂ•ΩÂêßÔºåÊàëÁâπÂà´ÊèêÂà∞ËøáÔºåÊçÆÊàëÊâÄÁü•ÔºåÂêåÊó∂Êã•Êúâ‰∏§ËÄÖÂπ∂‰∏çÊòØ‰∏çÂèØËÉΩÁöÑÔºå‰ΩÜÈÄöÂ∏∏‰∏çÂàáÂÆûÈôÖ„ÄÇ</p>
<p>‰∏∫‰∫ÜËØ¥ÊòéËøô‰∏ÄÁÇπÔºåËÆ©ÊàëÂêë‰Ω†‰ªãÁªçËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÂè¶‰∏ÄÁßçÂèò‰ΩìÔºö<strong>Êó†ÁéØËÆøÈóÆËÄÖ</strong>ÔºàAcyclic VisitorÔºâ„ÄÇ</p>
<p>Âú® ‚ÄúÂáÜÂàô16Ôºö‰ΩøÁî®ËÆøÈóÆËÄÖÊâ©Â±ïÊìç‰Ωú‚Äù‰∏≠Ôºå‰Ω†ÁúãÂà∞‰∫Ü<strong>ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÂÖ≥ÈîÆÂèÇ‰∏éËÄÖ‰πãÈó¥Â≠òÂú®Âæ™ÁéØ‰æùËµñ</strong>Ôºö<br/><strong>ËÆøÈóÆËÄÖÂü∫Á±ª‰æùËµñ‰∫éÂΩ¢Áä∂ÁöÑÂÖ∑‰ΩìÁ±ªÂûãÔºàÂ¶Ç Circle„ÄÅSquare Á≠âÔºâÔºåÂÖ∑‰ΩìÁ±ªÂûãÁöÑÂΩ¢Áä∂‰æùËµñ‰∫é Shape Âü∫Á±ªÔºåËÄå Shape Âü∫Á±ªÂèà‰æùËµñ‰∫éËÆøÈóÆËÄÖÂü∫Á±ª„ÄÇ</strong></p>
<p>Áî±‰∫éËøôÁßçÂæ™ÁéØ‰æùËµñÔºåÂ∞ÜÊâÄÊúâËøô‰∫õÂÖ≥ÈîÆËßíËâ≤ÈîÅÂÆöÂú®‰∏Ä‰∏™Êû∂ÊûÑÂ±ÇÊ¨°‰∏äÔºå‰ΩøÂæóÂêëËÆøÈóÆËÄÖÊ∑ªÂä†Êñ∞Á±ªÂûãÂèòÂæóÂõ∞Èöæ„ÄÇ</p>
<p><strong>Êó†ÁéØËÆøÈóÆËÄÖÁöÑÊÉ≥Ê≥ïÊòØÊâìÁ†¥ËøôÁßç‰æùËµñÂÖ≥Á≥ª„ÄÇ</strong></p>
<p>Âõæ4-5 ÊòæÁ§∫‰∫ÜÊó†ÁéØËÆøÈóÆËÄÖÁöÑUMLÂõæ„ÄÇ</p>
<p>‰∏éGoFËÆøÈóÆËÄÖÁõ∏ÊØîÔºåËôΩÁÑ∂ÂõæÁâáÂè≥‰æßÂè™ÊúâÂæàÂ∞èÁöÑÂå∫Âà´Ôºå‰ΩÜÂú®Â∑¶‰æßÊúâ‰∏Ä‰∫õÊ†πÊú¨ÊÄßÁöÑÂèòÂåñ„ÄÇ</p>
<p>ÊúÄÈáçË¶ÅÁöÑÊòØÔºåËÆøÈóÆËÄÖÂü∫Á±ªË¢´ÊãÜÂàÜÊàê‰∫ÜÂ§ö‰∏™Âü∫Á±ªÔºö<strong>AbstractVisitor</strong> Âü∫Á±ªÂíåÊØè‰∏™ÂÖ∑‰ΩìÂΩ¢Áä∂Á±ªÂûãÁöÑ‰∏Ä‰∏™Âü∫Á±ªÔºàÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÊòØ <strong>CircleVisitor</strong> Âíå <strong>SquareVisitor</strong>Ôºâ„ÄÇ</p>
<p>ÊâÄÊúâËÆøÈóÆËÄÖÈÉΩÂøÖÈ°ªÁªßÊâøËá™ <strong>AbstractVisitor</strong> Âü∫Á±ªÔºå‰ΩÜÁé∞Âú®‰πüÊúâÈÄâÊã©ÂèØ‰ª•ÁªßÊâøËá™ÂÖ∑‰ΩìÁöÑÂΩ¢Áä∂ËÆøÈóÆËÄÖÂü∫Á±ª„ÄÇ</p>
<p>Â¶ÇÊûú‰∏Ä‰∏™Êìç‰ΩúÊÉ≥Ë¶ÅÊîØÊåÅ<strong>ÂúÜÂΩ¢</strong>ÔºåÂÆÉÂ∞±ÁªßÊâøËá™ <strong>CircleVisitor</strong> Âü∫Á±ªÂπ∂ÂÆûÁé∞ÈíàÂØπ <strong>Circle</strong> ÁöÑ <strong>visit() ÂáΩÊï∞</strong>„ÄÇ</p>
<p>Â¶ÇÊûúÂÆÉ‰∏çÊÉ≥ÊîØÊåÅÂúÜÂΩ¢ÔºåÂàôÂè™ÈúÄ‰∏çÁªßÊâø CircleVisitor„ÄÇ</p>
<p>‰ª•‰∏ã‰ª£Á†ÅÁâáÊÆµÂ±ïÁ§∫‰∫ÜËÆøÈóÆËÄÖÂü∫Á±ªÁöÑ‰∏ÄÁßçÂèØËÉΩÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;AbstractVisitor.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">AbstractVisitor</span>  
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">AbstractVisitor</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Visitor.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Visitor</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Visitor</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">visit</span><span class="p">(</span> <span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>AbstractVisitor Âü∫Á±ªÂè™ÊòØ‰∏Ä‰∏™Â∏¶ÊúâËôöÊûêÊûÑÂáΩÊï∞ÁöÑÁ©∫Âü∫Á±ª„ÄÇ‰∏çÈúÄË¶ÅÂÖ∂‰ªñ‰ªª‰ΩïÂáΩÊï∞„ÄÇÊ≠£Â¶Ç‰Ω†Â∞ÜÁúãÂà∞ÁöÑÔºåAbstractVisitor ‰ªÖ‰Ωú‰∏∫‰∏Ä‰∏™ÈÄöÁî®Ê†áËÆ∞Êù•ËØÜÂà´ËÆøÈóÆËÄÖÔºåÂπ∂‰∏çÈúÄË¶ÅÊèê‰æõ‰ªª‰ΩïÊìç‰Ωú„ÄÇÂú®C++‰∏≠ÔºåÊàë‰ª¨ÂÄæÂêë‰∫é‰ª•Á±ªÊ®°ÊùøÁöÑÂΩ¢ÂºèÂÆûÁé∞ÂÖ∑‰ΩìÁöÑÂΩ¢Áä∂ËÆøÈóÆËÄÖÂü∫Á±ª„ÄÇVisitor Á±ªÊ®°ÊùøÊ†πÊçÆÁâπÂÆöÁöÑÂΩ¢Áä∂Á±ªÂûãËøõË°åÂèÇÊï∞ÂåñÔºåÂπ∂‰∏∫ËØ•ÁâπÂÆöÂΩ¢Áä∂ÂºïÂÖ•Á∫ØËôöÂáΩÊï∞ visit()„ÄÇ</p>
<p>Âú®Êàë‰ª¨ÁöÑ Draw ËÆøÈóÆËÄÖÁöÑÂÆûÁé∞‰∏≠ÔºåÊàë‰ª¨Áé∞Âú®Â∞ÜÁªßÊâøËá™‰∏â‰∏™Âü∫Á±ªÔºö</p>
<p><code>AbstractVisitor„ÄÅVisitor&lt;Circle&gt; </code> Âíå <code>Visitor&lt;Square&gt;</code> ÔºåÂõ†‰∏∫Êàë‰ª¨Â∏åÊúõÊîØÊåÅ Circle Âíå SquareÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Draw</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AbstractVisitor</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">             <span class="k">public</span> <span class="n">Visitor</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">             <span class="k">public</span> <span class="n">Visitor</span><span class="o">&lt;</span><span class="n">Square</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">visit</span><span class="p">(</span> <span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">c</span> <span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="cm">/* ... ÂÆûÁé∞ÁªòÂà∂ÂúÜÁöÑÈÄªËæë ... */</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">visit</span><span class="p">(</span> <span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">s</span> <span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="cm">/* ... ÂÆûÁé∞ÁªòÂà∂Ê≠£ÊñπÂΩ¢ÁöÑÈÄªËæë ... */</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÂÆûÁé∞ÈÄâÊã©ÊâìÁ†¥‰∫ÜÂæ™ÁéØ‰æùËµñ„ÄÇÂ¶ÇÂõæ4-6ÊâÄÁ§∫ÔºåÊû∂ÊûÑÁöÑÈ´òÂ±Ç‰∏çÂÜç‰æùËµñ‰∫éÂÖ∑‰ΩìÁöÑÂΩ¢Áä∂Á±ªÂûã„ÄÇÊó†ËÆ∫ÊòØÂΩ¢Áä∂Ôºà<code>Circle</code> Âíå <code>Square</code>ÔºâËøòÊòØÊìç‰ΩúÁé∞Âú®ÈÉΩ‰Ωç‰∫éÊû∂ÊûÑËæπÁïåÁöÑ‰ΩéÂ±Ç„ÄÇÊàë‰ª¨Áé∞Âú®ÂèØ‰ª•ÂêåÊó∂Ê∑ªÂä†Á±ªÂûãÂíåÊìç‰Ωú„ÄÇ</p>
<p>Ê≠§ÂàªÔºå‰Ω†ÁúãËµ∑Êù•ÈùûÂ∏∏ÊÄÄÁñëÔºåÂá†‰πéÊòØË¥£Â§áÂú∞ÁúãÂêëÊàë„ÄÇÊàë‰∏çÊòØËØ¥Ëøá‰∏§ËÄÖÂÖºÂæóÊòØ‰∏çÂèØËÉΩÁöÑÂêóÔºüÊòæÁÑ∂ÔºåËøôÊòØÂèØËÉΩÁöÑÔºåÂØπÂêßÔºüÂ•ΩÂêßÔºåÂÜç‰∏ÄÊ¨°Âº∫Ë∞ÉÔºåÊàëÊ≤°ÊúâÂ£∞Áß∞ËøôÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇÊàëÊõ¥ÂÄæÂêë‰∫éËØ¥ËøôÂèØËÉΩÊòØ‰∏çÂàáÂÆûÈôÖÁöÑ„ÄÇÁé∞Âú®‰Ω†Â∑≤ÁªèÁúãÂà∞‰∫ÜÊó†ÁéØËÆøÈóÆËÄÖÁöÑ‰ºòÂäøÔºåËÆ©ÊàëÂêë‰Ω†Â±ïÁ§∫ËøôÁßçÊñπÊ≥ïÁöÑÁº∫ÁÇπ„ÄÇ</p>
<p>È¶ñÂÖàÔºåËÆ©Êàë‰ª¨Áúã‰∏Ä‰∏ã <strong>Circle</strong> ‰∏≠ <strong>accept()</strong> ÂáΩÊï∞ÁöÑÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑÂçäÂæÑÊòØÂê¶ÊúâÊïà */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">accept</span><span class="p">(</span><span class="n">AbstractVisitor</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>   
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="k">auto</span> <span class="k">const</span><span class="o">*</span> <span class="n">cv</span> <span class="o">=</span> <span class="k">dynamic_cast</span><span class="o">&lt;</span><span class="n">Visitor</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">*&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">v</span><span class="p">))</span> <span class="p">{</span>   
</span></span><span class="line"><span class="cl">            <span class="n">cv</span><span class="o">-&gt;</span><span class="n">visit</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">        <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="nf">center</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">center_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="n">center_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰Ω†ÂèØËÉΩÂ∑≤ÁªèÊ≥®ÊÑèÂà∞ <strong>Shape</strong> Â±ÇÊ¨°ÁªìÊûÑ‰∏≠ÁöÑ‰∏Ä‰∏™Â∞èÂèòÂåñÔºöËôöÂáΩÊï∞ accept() Áé∞Âú®Êé•Âèó‰∏Ä‰∏™ <strong>AbstractVisitor</strong>„ÄÇ</p>
<p>‰Ω†ËøòËÆ∞Âæó <strong>AbstractVisitor</strong> Êú¨Ë∫´Âπ∂‰∏çÂÆûÁé∞‰ªª‰ΩïÊìç‰Ωú„ÄÇÂõ†Ê≠§Ôºå<strong>Circle</strong> ‰∏çÊòØÂú® <strong>AbstractVisitor</strong> ‰∏äË∞ÉÁî® <strong>visit()</strong> ÂáΩÊï∞ÔºåËÄåÊòØÈÄöËøáÊâßË°å <strong>dynamic_cast</strong> Êù•Á°ÆÂÆöÁªôÂÆöÁöÑËÆøÈóÆËÄÖÊòØÂê¶ÊîØÊåÅÂúÜÂΩ¢Ôºà<code>Visitor&lt;Circle&gt;</code> Ôºâ„ÄÇ</p>
<p>ËØ∑Ê≥®ÊÑèÔºåÂÆÉÊâßË°åÁöÑÊòØÊåáÈíàËΩ¨Êç¢ÔºåËøôÊÑèÂë≥ÁùÄ <strong>dynamic_cast</strong> Â∞ÜËøîÂõû‰∏Ä‰∏™ÊúâÊïàÁöÑ <code>Visitor&lt;Circle&gt;</code>  ÊåáÈíàÊàñ nullptr„ÄÇ<br/>Â¶ÇÊûúËøîÂõû‰∏Ä‰∏™ÊúâÊïàÁöÑ <code>Visitor&lt;Circle&gt;</code>  ÊåáÈíàÔºåÂÆÉÂ∞ÜË∞ÉÁî®Áõ∏Â∫îÁöÑ <strong>visit()</strong> ÂáΩÊï∞„ÄÇ</p>
<p>ËôΩÁÑ∂ËøôÁßçÊñπÊ≥ïÁ°ÆÂÆûÊúâÊïàÔºåÂπ∂‰∏îÊòØÊâìÁ†¥ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÂæ™ÁéØ‰æùËµñÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ΩÜ‰ΩøÁî® <strong>dynamic_cast</strong> ÊÄª‰ºöËÆ©‰∫∫ÊÑüÂà∞‰∏çÂÆâ„ÄÇ</p>
<p><strong>dynamic_cast</strong> Â∫îËØ•ÊÄªÊòØËÆ©‰∫∫ÊúâÁÇπÊÄÄÁñëÔºåÂõ†‰∏∫Â¶ÇÊûú‰ΩøÁî®‰∏çÂΩìÔºåÂÆÉÂèØËÉΩ‰ºöÁ†¥ÂùèÊû∂ÊûÑ„ÄÇ<br/>ËøôÁßçÊÉÖÂÜµÂèëÁîüÂú®Êàë‰ª¨‰ªéÊû∂ÊûÑÁöÑÈ´òÂ±ÇÂØπ‰Ωç‰∫éÊû∂ÊûÑ‰ΩéÂ±ÇÁöÑ‰∏úË•øËøõË°åÂº∫Âà∂Á±ªÂûãËΩ¨Êç¢Êó∂„ÄÇ<br/>Âú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÂÆûÈôÖ‰∏äÊòØÂèØ‰ª•‰ΩøÁî®ÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨ÊòØÂú®Êû∂ÊûÑÁöÑ‰ΩéÂ±Ç‰ΩøÁî®ÂÆÉ„ÄÇÂõ†Ê≠§ÔºåÈÄöËøáÂ∞Ü‰ΩéÂ±ÇÁöÑÁü•ËØÜÊèíÂÖ•Âà∞È´òÂ±ÇÂπ∂‰∏ç‰ºöÁ†¥ÂùèÊû∂ÊûÑ„ÄÇ</p>
<p>ÁúüÊ≠£ÁöÑÁº∫Èô∑Âú®‰∫éËøêË°åÊó∂ÁöÑÂºÄÈîÄ„ÄÇÂΩìÊàë‰ª¨ËøêË°å‰∏é‚ÄúÂáÜÂàô17ÔºöËÄÉËôë‰ΩøÁî® std::variant ÂÆûÁé∞ËÆøÈóÆËÄÖ‚ÄùÁõ∏ÂêåÁöÑÂü∫ÂáÜÊµãËØïÊó∂Ôºå‰Ω†‰ºöÂèëÁé∞Êó†ÁéØËÆøÈóÆËÄÖÁöÑËøêË°åÊó∂Èó¥Âá†‰πéÊØîÂæ™ÁéØËÆøÈóÆËÄÖÈ´òÂá∫‰∏Ä‰∏™Êï∞ÈáèÁ∫ßÔºàËßÅË°®4-3Ôºâ„ÄÇ</p>
<p>ÂéüÂõ†ÊòØ <strong>dynamic_cast</strong> ÂæàÊÖ¢ÔºåÈùûÂ∏∏ÊÖ¢„ÄÇÂØπ‰∫éËøô‰∏™Â∫îÁî®Â∞§ÂÖ∂Â¶ÇÊ≠§„ÄÇÊàë‰ª¨Âú®ËøôÈáåËøõË°åÁöÑÊòØ‰∫§ÂèâËΩ¨Êç¢Ôºàcross-castÔºâ„ÄÇ<br/>Êàë‰ª¨‰∏ç‰ªÖ‰ªÖÊòØÂú®Âêë‰∏ãËΩ¨Êç¢Âà∞ÁâπÂÆöÁöÑÊ¥æÁîüÁ±ªÔºåËÄåÊòØÂú®ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÁöÑÂè¶‰∏Ä‰∏™ÂàÜÊîØ‰∏äËøõË°åËΩ¨Êç¢„ÄÇËøôÁßç‰∫§ÂèâËΩ¨Êç¢ÔºåÂÜçÂä†‰∏äËôöÊãüÂáΩÊï∞Ë∞ÉÁî®ÔºåÊØîÁÆÄÂçïÁöÑÂêë‰∏ãËΩ¨Êç¢Ë¶ÅÊòÇË¥µÂæóÂ§ö„ÄÇ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ËÆøÈóÆËÄÖÂÆûÁé∞</th>
<th>GCC 11.1</th>
<th>Clang 11.1</th>
</tr>
</thead>
<tbody>
<tr>
<td>Êó†ÁéØËÆøÈóÆËÄÖ</td>
<td>14.3423 s</td>
<td>7.3445 s</td>
</tr>
<tr>
<td>Âæ™ÁéØËÆøÈóÆËÄÖ</td>
<td>1.6161 s</td>
<td>1.8015 s</td>
</tr>
<tr>
<td>Èù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°à</td>
<td>1.5205 s</td>
<td>1.1480 s</td>
</tr>
<tr>
<td>Êûö‰∏æËß£ÂÜ≥ÊñπÊ°à</td>
<td>1.2179 s</td>
<td>1.1200 s</td>
</tr>
<tr>
<td><code>std::variant</code>Ôºà‰ΩøÁî® <code>std::visit()</code>Ôºâ</td>
<td>1.1992 s</td>
<td>1.2279 s</td>
</tr>
<tr>
<td><code>std::variant</code>Ôºà‰ΩøÁî® <code>std::get_if()</code>Ôºâ</td>
<td>1.0252 s</td>
<td>0.6998 s</td>
</tr>
</tbody>
</table></div>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>‰∫ÜËß£Êó†Âæ™ÁéØËÆøÈóÆÂô®ÁöÑÊû∂ÊûÑ‰ºòÂäø„ÄÇ</li>
<li>ËØ∑Ê≥®ÊÑèËØ•Ëß£ÂÜ≥ÊñπÊ°àÁöÑÊòæËëóÊÄßËÉΩÁº∫ÁÇπ„ÄÇ</li>
</ul>
<h2 id="Á¨¨‰∫îÁ´†-Á≠ñÁï•ÂíåÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè">Á¨¨‰∫îÁ´† Á≠ñÁï•ÂíåÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè
</h2><p>Êú¨Á´†‰∏ìÈó®ËÆ®ËÆ∫‰∏§ÁßçÊúÄÂ∏∏Áî®ÁöÑËÆæËÆ°Ê®°ÂºèÔºö<strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong> Âíå <strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>„ÄÇ‰∫ãÂÆû‰∏äÔºåÂÆÉ‰ª¨ÊòØÈùûÂ∏∏Â∏∏Áî®ÁöÑÔºöC++ Ê†áÂáÜÂ∫ìÊú¨Ë∫´Â∞±‰ΩøÁî®‰∫ÜËøô‰∏§ÁßçÊ®°ÂºèÊï∞ÂçÅÊ¨°ÔºåËÄå‰∏îÂæàÊúâÂèØËÉΩ‰Ω†Ëá™Â∑±‰πüÂ§öÊ¨°‰ΩøÁî®ËøáÂÆÉ‰ª¨„ÄÇËøô‰∏§ÁßçÊ®°ÂºèÂèØ‰ª•Ë¢´ËßÜ‰∏∫ÊØè‰∏™ÂºÄÂèëËÄÖÁöÑÂü∫Áü≥Â∑•ÂÖ∑„ÄÇ</p>
<p>Âú®‚Äú<strong>ÂáÜÂàô19Ôºö‰ΩøÁî®Á≠ñÁï•ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÂÆûÁé∞ÊñπÂºè</strong>‚Äù‰∏≠ÔºåÊàëÂ∞ÜÂêë‰Ω†‰ªãÁªçÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè„ÄÇÊàëÂ∞ÜÂ±ïÁ§∫‰∏∫‰ªÄ‰πàÂÆÉÊòØÊúÄÊúâÁî®ÂíåÊúÄÈáçË¶ÅÁöÑËÆæËÆ°Ê®°Âºè‰πã‰∏ÄÔºåÂπ∂Ëß£Èáä‰∏∫‰ªÄ‰πà‰Ω†‰ºöÂú®ËÆ∏Â§öÂú∫ÊôØ‰∏≠ÂèëÁé∞ÂÆÉÈùûÂ∏∏ÊúâÁî®„ÄÇ</p>
<p>Âú®‚Äú<strong>ÂáÜÂàô20Ôºö‰ºòÂÖà‰ΩøÁî®ÁªÑÂêàËÄåÈùûÁªßÊâø</strong>‚Äù‰∏≠ÔºåÊàë‰ª¨Â∞ÜÊé¢ËÆ®ÁªßÊâø‰ª•Âèä‰∏∫‰ªÄ‰πàËÆ∏Â§ö‰∫∫ÂØπÂÆÉÊúâÊä±ÊÄ®„ÄÇ‰Ω†‰ºöÂèëÁé∞ÁªßÊâøÊú¨Ë∫´Âπ∂‰∏çÊòØÂùèÁöÑÔºå‰ΩÜÂíåÂÖ∂‰ªñ‰ªª‰Ωï‰∏úË•ø‰∏ÄÊ†∑ÔºåÂÆÉÊúâÂÖ∂‰ºòÁÇπÂíåÂ±ÄÈôêÊÄß„ÄÇÊúÄÈáçË¶ÅÁöÑÊòØÔºåÊàëÂ∞ÜËß£ÈáäËÆ∏Â§öÁªèÂÖ∏ËÆæËÆ°Ê®°ÂºèÁöÑÂäõÈáèÂπ∂ÈùûÊù•Ê∫ê‰∫éÁªßÊâøÔºåËÄåÊòØÊù•Ê∫ê‰∫éÁªÑÂêà„ÄÇ</p>
<p>Âú®‚Äú<strong>ÂáÜÂàô21Ôºö‰ΩøÁî®ÂëΩ‰ª§ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÊìç‰ΩúÂÜÖÂÆπ</strong>‚Äù‰∏≠ÔºåÊàëÂ∞ÜÂêë‰Ω†‰ªãÁªçÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè„ÄÇÊàëÂ∞ÜÂ±ïÁ§∫Â¶Ç‰ΩïÈ´òÊïàÂú∞‰ΩøÁî®ËØ•ËÆæËÆ°Ê®°ÂºèÔºåÂπ∂Áªô‰Ω†‰∏Ä‰∏™ÂÖ≥‰∫éÂëΩ‰ª§‰∏éÁ≠ñÁï•‰πãÈó¥ÊØîËæÉÁöÑÊ¶ÇÂøµ„ÄÇ</p>
<p>Âú®‚Äú<strong>ÂáÜÂàô22Ôºö‰ºòÂÖà‰ΩøÁî®ÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ</strong>‚Äù‰∏≠ÔºåÊàë‰ª¨Â∞ÜÊ∑±ÂÖ•Êé¢ËÆ®ÂºïÁî®ËØ≠‰πâÁöÑÈ¢ÜÂüü„ÄÇÁÑ∂ËÄåÔºåÊàë‰ª¨‰ºöÂèëÁé∞Ëøô‰∏™È¢ÜÂüüÂπ∂‰∏çÁâπÂà´ÂèãÂ•ΩÂíåÂ•ΩÂÆ¢ÔºåÂπ∂‰∏î‰ºöËÆ©Êàë‰ª¨ÊãÖÂøÉ‰ª£Á†ÅÁöÑË¥®Èáè„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Â∞ÜËøÅÁßªÂà∞ÂÄºËØ≠‰πâÁöÑÈ¢ÜÂüüÔºåËøôÂ∞Ü‰∏∫Êàë‰ª¨Êèê‰æõËÆ∏Â§öÂØπ‰ª£Á†ÅÂ∫ìÊúâÁõäÁöÑÂäüËÉΩ„ÄÇ</p>
<p>Âú®‚Äú<strong>ÂáÜÂàô23Ôºö‰ºòÂÖà‰ΩøÁî®Âü∫‰∫éÂÄºÁöÑÁ≠ñÁï•ÂíåÂëΩ‰ª§ÂÆûÁé∞</strong>‚Äù‰∏≠ÔºåÊàë‰ª¨Â∞ÜÂÜçÊ¨°ÂõûÈ°æÁ≠ñÁï•ÂíåÂëΩ‰ª§Ê®°Âºè„ÄÇÊàëÂ∞ÜÂ±ïÁ§∫Â¶Ç‰ΩïÂ∫îÁî®Êàë‰ª¨Âú®ÂÄºËØ≠‰πâÈ¢ÜÂüüËé∑ÂæóÁöÑËßÅËß£ÔºåÂπ∂Âü∫‰∫é <strong>std::function</strong> ÂÆûÁé∞Ëøô‰∏§ÁßçËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>ÈÄöËøáËøô‰∫õÊåáÂçóÔºå‰Ω†Â∞ÜÊõ¥Â•ΩÂú∞ÁêÜËß£Â¶Ç‰ΩïÂú®ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÊúâÊïà‰ΩøÁî®Á≠ñÁï•ÂíåÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÔºåÂπ∂Â≠¶‰ºöÂ¶Ç‰ΩïÈÄâÊã©ÈÄÇÂΩìÁöÑÂÆûÁé∞ÊñπÂºè‰ª•‰ºòÂåñ‰ª£Á†ÅË¥®ÈáèÂíåÊÄßËÉΩ„ÄÇÂ∏åÊúõËøô‰∫õÂÜÖÂÆπÂØπ‰Ω†ÊúâÊâÄÂ∏ÆÂä©ÔºÅ</p>
<h3 id="ÂáÜÂàô19‰ΩøÁî®Á≠ñÁï•ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÂÆûÁé∞ÊñπÂºè">ÂáÜÂàô19Ôºö‰ΩøÁî®Á≠ñÁï•ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÂÆûÁé∞ÊñπÂºè
</h3><p>ËÆ©Êàë‰ª¨ÂÅáËÆæ‰Ω†Âíå‰Ω†ÁöÑÂõ¢ÈòüÂç≥Â∞ÜÂÆûÁé∞‰∏Ä‰∏™Êñ∞ÁöÑ2DÂõæÂΩ¢Â∑•ÂÖ∑„ÄÇÈô§‰∫ÜÂÖ∂‰ªñÈúÄÊ±ÇÂ§ñÔºåÂÆÉÈúÄË¶ÅÂ§ÑÁêÜÁÆÄÂçïÁöÑÂá†‰ΩïÂõæÂÖÉÔºåÂ¶ÇÂúÜÂΩ¢„ÄÅÊ≠£ÊñπÂΩ¢Á≠âÔºåÂπ∂‰∏îËøô‰∫õÂõæÂÖÉÈúÄË¶ÅË¢´ÁªòÂà∂ÔºàËßÅÂõæ5-1Ôºâ„ÄÇ</p>
<p>Âõæ5-1. ÂàùÂßãÁöÑShapeÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ</p>
<p>‰∏Ä‰∫õÁ±ªÂ∑≤ÁªèÂÆûÁé∞‰∫ÜÔºå‰æãÂ¶Ç‰∏Ä‰∏™ Shape Âü∫Á±ª„ÄÅ‰∏Ä‰∏™ Circle Á±ªÂíå‰∏Ä‰∏™ Square Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Point.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑÂçäÂæÑÊòØÂê¶ÊúâÊïà */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="nf">center</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">center_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="n">center_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* ‰∏Ä‰∫õÂõæÂΩ¢Â∫ì */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Circle</span><span class="o">::</span><span class="n">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂÆûÁé∞ÁªòÂà∂ÂúÜÁöÑÈÄªËæë 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Point.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Square</span><span class="p">(</span><span class="kt">double</span> <span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">side_</span><span class="p">(</span><span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑËæπÈïøÊòØÂê¶ÊúâÊïà */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">side</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">side_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="nf">center</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">center_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">side_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="n">center_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* ‰∏Ä‰∫õÂõæÂΩ¢Â∫ì */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Square</span><span class="o">::</span><span class="n">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂÆûÁé∞ÁªòÂà∂Ê≠£ÊñπÂΩ¢ÁöÑÈÄªËæë 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúÄÈáçË¶ÅÁöÑÊñπÈù¢ÊòØ <code>Shape</code> Âü∫Á±ª‰∏≠ÁöÑÁ∫ØËôöÂáΩÊï∞ <code>draw()</code>ÔºàÔºâ„ÄÇ</p>
<p>Âú®‰Ω†‰ºëÂÅáÊúüÈó¥Ôºå‰Ω†ÁöÑÂõ¢ÈòüÊàêÂëòÂ∑≤Áªè‰∏∫ <code>Circle</code> Âíå <code>Square</code> Á±ªÂÆûÁé∞‰∫ÜËøô‰∏™ <code>draw()</code> ÊàêÂëòÂáΩÊï∞Ôºå‰ΩøÁî®ÁöÑÊòØOpenGLÔºàÂíåÔºâ„ÄÇ</p>
<p>ËØ•Â∑•ÂÖ∑Â∑≤ÁªèËÉΩÂ§üÁªòÂà∂ÂúÜÂΩ¢ÂíåÊ≠£ÊñπÂΩ¢ÔºåÂπ∂‰∏îÊï¥‰∏™Âõ¢Èòü‰∏ÄËá¥ËÆ§‰∏∫ÁîüÊàêÁöÑÂõæÂΩ¢ÁúãËµ∑Êù•ÈùûÂ∏∏Êï¥Ê¥Å„ÄÇÊØè‰∏™‰∫∫ÈÉΩÊÑüÂà∞Êª°ÊÑèÔºÅ</p>
<p><strong>ÂàÜÊûêËÆæËÆ°ÈóÆÈ¢ò</strong>
Èô§‰∫Ü‰Ω†‰πãÂ§ñÁöÑÊØè‰∏™‰∫∫Ôºå‰ªéÂÅáÊúüÂõûÊù•ÂêéÔºå‰Ω†ÂΩìÁÑ∂Á´ãÂç≥ÊÑèËØÜÂà∞Â∑≤ÂÆûÁé∞ÁöÑËß£ÂÜ≥ÊñπÊ°àËøùÂèç‰∫ÜÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâ„ÄÇ</p>
<p>ÁõÆÂâçÊù•ÁúãÔºå<strong>Shape</strong> Â±ÇÊ¨°ÁªìÊûÑÂπ∂Ê≤°Êúâ<strong>‰∏∫ÂèòÂåñËÄåËÆæËÆ°</strong>„ÄÇ</p>
<p>È¶ñÂÖàÔºåÊîπÂèòÂΩ¢Áä∂ÁöÑÁªòÂà∂ÊñπÂºèÂπ∂‰∏çÂÆπÊòìÔºåÂú®ÂΩìÂâçÂÆûÁé∞‰∏≠ÔºåÂè™Êúâ‰∏ÄÁßçÂõ∫ÂÆöÁöÑÁªòÂà∂ÂΩ¢Áä∂ÁöÑÊñπÂºèÔºåÂπ∂‰∏îÊó†Ê≥ïÈùû‰æµÂÖ•ÊÄßÂú∞Êõ¥ÊîπËøô‰∫õÁªÜËäÇ„ÄÇÂõ†‰∏∫‰Ω†Â∑≤ÁªèÈ¢ÑÊµãÂà∞ËØ•Â∑•ÂÖ∑Â∞ÜÈúÄË¶ÅÊîØÊåÅÂ§ö‰∏™ÂõæÂΩ¢Â∫ìÔºåËøôÁªùÂØπÊòØ‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇÂÖ∂Ê¨°ÔºåÂ¶ÇÊûú‰Ω†ÊúÄÁªàËøõË°åÊõ¥ÊîπÔºåÂàôÈúÄË¶ÅÂú®Â§ö‰∏™‰∏çÁõ∏ÂÖ≥ÁöÑÂú∞ÁÇπ‰øÆÊîπË°å‰∏∫„ÄÇ</p>
<p>‰ΩÜËøòÊúâÊõ¥Â§öÈóÆÈ¢ò„ÄÇÁî±‰∫éÁªòÂà∂ÂäüËÉΩÊòØÂú® <strong>Circle</strong> Âíå <strong>Square</strong> Á±ª‰∏≠ÂÆûÁé∞ÁöÑÔºåÂõ†Ê≠§ <strong>Circle</strong> Âíå <strong>Square</strong> Á±ª‰æùËµñ‰∫é <strong>draw()</strong> ÁöÑÂÆûÁé∞ÁªÜËäÇÔºåËøôÊÑèÂë≥ÁùÄÂÆÉ‰ª¨‰æùËµñ‰∫é OpenGL„ÄÇ</p>
<p>Â∞ΩÁÆ°ÂúÜÂíåÊ≠£ÊñπÂΩ¢Â∫îËØ•‰∏ªË¶ÅÊòØÁÆÄÂçïÁöÑÂá†‰ΩïÂõæÂÖÉÔºå‰ΩÜÁé∞Âú®Ëøô‰∏§‰∏™Á±ªÂú®ÊâÄÊúâ‰ΩøÁî®ÁöÑÂú∞ÊñπÈÉΩÂøÖÈ°ªÊâøÊãÖ‰ΩøÁî® <strong>OpenGL</strong> ÁöÑË¥üÊãÖ„ÄÇ</p>
<p>ÂΩì‰Ω†ÂêëÂêå‰∫ã‰ª¨ÊåáÂá∫Ëøô‰∫õÈóÆÈ¢òÊó∂Ôºå‰ªñ‰ª¨‰∏ÄÂºÄÂßãÊúâ‰∫õ‰∏çÁü•ÊâÄÊé™„ÄÇÂêåÊó∂‰πüÊúâÁÇπÊÅºÁÅ´ÔºåÂõ†‰∏∫‰ªñ‰ª¨Ê≤°ÊúâÈ¢ÑÊñôÂà∞‰Ω†‰ºöÊåáÂá∫‰ªñ‰ª¨Áæé‰∏ΩËß£ÂÜ≥ÊñπÊ°à‰∏≠ÁöÑ‰ªª‰ΩïÁº∫Èô∑„ÄÇÁÑ∂ËÄåÔºå‰Ω†Êúâ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁöÑËß£ÈáäÈóÆÈ¢òÁöÑÊñπÊ≥ïÔºåÊúÄÁªà‰ªñ‰ª¨ÂêåÊÑè‰∫Ü‰Ω†ÁöÑËßÇÁÇπÂπ∂ÂºÄÂßãÊÄùËÄÉÊõ¥Â•ΩÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>Ê≤°ËøáÂ§ö‰πÖÔºå‰ªñ‰ª¨Â∞±ÊÉ≥Âá∫‰∫Ü‰∏Ä‰∏™Êõ¥Â•ΩÁöÑÊñπÊ≥ï„ÄÇÂá†Â§©ÂêéÁöÑ‰∏ã‰∏ÄÊ¨°Âõ¢Èòü‰ºöËÆÆ‰∏äÔºå‰ªñ‰ª¨Â±ïÁ§∫‰∫Ü‰ªñ‰ª¨ÁöÑÊñ∞ÊÉ≥Ê≥ïÔºöÂú®ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠Â¢ûÂä†‰∏ÄÂ±ÇÔºàËßÅÂõæ5-2Ôºâ„ÄÇ</p>
<p>‰∏∫‰∫ÜÊºîÁ§∫Ëøô‰∏™ÊÉ≥Ê≥ïÔºå‰ªñ‰ª¨Â∑≤ÁªèÂÆûÁé∞‰∫Ü <strong>OpenGLCircle</strong> Âíå <strong>OpenGLSquare</strong> Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ‰∏çÂÜçÂÆûÁé∞ draw() ÊàêÂëòÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;OpenGLCircle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">OpenGLCircle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Circle</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">OpenGLCircle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;OpenGLCircle.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;OpenGLCircle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* OpenGL ÂõæÂΩ¢Â∫ìÂ§¥Êñá‰ª∂ */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="n">OpenGLCircle</span><span class="o">::</span><span class="n">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ‰ΩøÁî® OpenGL ÂÆûÁé∞ÁªòÂà∂ÂúÜÁöÑÈÄªËæë 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Square</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ‰∏çÂÜçÂÆûÁé∞ draw() ÊàêÂëòÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;OpenGLSquare.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">OpenGLSquare</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Square</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">OpenGLSquare</span><span class="p">(</span><span class="kt">double</span> <span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">Square</span><span class="p">(</span><span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;OpenGLSquare.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;OpenGLSquare.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* OpenGL ÂõæÂΩ¢Â∫ìÂ§¥Êñá‰ª∂ */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="n">OpenGLSquare</span><span class="o">::</span><span class="n">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ‰ΩøÁî® OpenGL ÂÆûÁé∞ÁªòÂà∂Ê≠£ÊñπÂΩ¢ÁöÑÈÄªËæë 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁªßÊâøÔºÅÂΩìÁÑ∂ÔºÅÈÄöËøáÁÆÄÂçïÂú∞‰ªé <strong>Circle</strong> Âíå <strong>Square</strong> Ê¥æÁîüÔºåÂπ∂Â∞Ü <strong>draw()</strong> ÂáΩÊï∞ÁöÑÂÆûÁé∞Ëøõ‰∏ÄÊ≠•‰∏ãÁßªÂà∞Â±ÇÊ¨°ÁªìÊûÑ‰∏≠ÔºåÂèØ‰ª•ÂæàÂÆπÊòìÂú∞‰ª•‰∏çÂêåÁöÑÊñπÂºèÂÆûÁé∞ÁªòÂà∂„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÂèØËÉΩ‰ºöÊúâ <strong>MetalCircle</strong> Âíå <strong>VulkanCircle</strong>ÔºåÂÅáËÆæÈúÄË¶ÅÊîØÊåÅ <strong>Metal</strong> Âíå <strong>Vulkan</strong> Â∫ì„ÄÇÁ™ÅÁÑ∂‰πãÈó¥ÔºåÊîπÂèòÂèòÂæóÂÆπÊòì‰∫ÜÔºåÂØπÂêßÔºü</p>
<p>ËôΩÁÑ∂‰Ω†ÁöÑÂêå‰∫ã‰ª¨‰ªçÁÑ∂‰∏∫‰ªñ‰ª¨ÁöÑÊñ∞Ëß£ÂÜ≥ÊñπÊ°àÊÑüÂà∞ÈùûÂ∏∏Ëá™Ë±™Ôºå‰ΩÜ‰Ω†Â∑≤ÁªèÊÑèËØÜÂà∞ËøôÁßçÊñπÊ≥ï‰∏ç‰ºöÈïøÊúüÊúâÊïà„ÄÇÂπ∂‰∏îÂæàÂÆπÊòìÂ±ïÁ§∫ÂÖ∂Áº∫ÁÇπÔºö‰Ω†Âè™ÈúÄË¶ÅËÄÉËôëÂè¶‰∏Ä‰∏™ÈúÄÊ±ÇÔºå‰æãÂ¶Ç‰∏Ä‰∏™ <strong>serialize()</strong> ÊàêÂëòÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>serialize()</strong> ÊàêÂëòÂáΩÊï∞Êó®Âú®Â∞ÜÂΩ¢Áä∂ËΩ¨Êç¢‰∏∫Â≠óËäÇÂ∫èÂàóÔºåÂèØ‰ª•Â≠òÂÇ®Âú®Êñá‰ª∂ÊàñÊï∞ÊçÆÂ∫ì‰∏≠ÔºåÁÑ∂ÂêéÂèØ‰ª•‰ªéÂ≠óËäÇÂ∫èÂàóÂèçÂ∫èÂàóÂåñ‰ª•ÈáçÊñ∞ÂàõÂª∫ÂÆåÂÖ®Áõ∏ÂêåÁöÑÂΩ¢Áä∂„ÄÇÂ∞±ÂÉè <strong>draw()</strong> ÊàêÂëòÂáΩÊï∞‰∏ÄÊ†∑Ôºå<strong>serialize()</strong> ÊàêÂëòÂáΩÊï∞‰πüÂèØ‰ª•‰ª•Â§öÁßçÊñπÂºèÂÆûÁé∞„ÄÇ‰æãÂ¶ÇÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî® <strong>protobuf</strong> Êàñ <strong>Boost.serialization</strong> Â∫ì„ÄÇ</p>
<p>‰ΩøÁî®Â∞ÜÂÆûÁé∞ÁªÜËäÇÂêë‰∏ãÁßªÂä®Âà∞ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÁöÑÁõ∏ÂêåÁ≠ñÁï•ÔºåËøôÂ∞ÜÂæàÂø´ÂØºËá¥‰∏Ä‰∏™Áõ∏ÂΩìÂ§çÊùÇ‰∏îÁõ∏ÂΩì‰∫∫‰∏∫ÁöÑÂ±ÇÊ¨°ÁªìÊûÑÔºàËßÅÂõæ5-3Ôºâ„ÄÇËÄÉËôë‰ª•‰∏ãÁ±ªÂêçÔºö<strong>OpenGLProtobufCircle</strong>„ÄÅ<strong>MetalBoostSerialSquare</strong> Á≠âÁ≠â„ÄÇ</p>
<p>ÂèØÁ¨ëÂêßÔºüÊàë‰ª¨ËØ•Â¶Ç‰ΩïÁªÑÁªáËøôÁßçÁªìÊûÑÂë¢ÔºüÊàë‰ª¨Â∫îËØ•Âú®Â±ÇÊ¨°ÁªìÊûÑ‰∏≠Ê∑ªÂä†Âè¶‰∏ÄÂ±ÇÔºàÂ¶Ç <strong>Square</strong> ÂàÜÊîØÊâÄÁ§∫ÔºâÂêóÔºü</p>
<p>ËøôÁßçÊñπÊ≥ï‰ºöËøÖÈÄüÂØºËá¥‰∏Ä‰∏™Ê∑±Â±ÇÊ¨°‰∏îÂ§çÊùÇÁöÑÂ±ÇÊ¨°ÁªìÊûÑÔºåÊàñËÄÖÊàë‰ª¨ÊòØÂê¶Â∫îËØ•Êõ¥Âπ≥Âù¶Âú∞Â±ïÂºÄÂ±ÇÊ¨°ÁªìÊûÑÔºàÂ¶Ç Circle ÂàÜÊîØÊâÄÁ§∫ÔºâÔºüÂÖ≥‰∫éÈáçÁî®ÂÆûÁé∞ÁªÜËäÇÂèàËØ•ÊÄé‰πàÂäûÂë¢Ôºü‰æãÂ¶ÇÔºåÂ¶Ç‰ΩïÂú® <strong>OpenGLProtobufCircle</strong> Âíå <strong>OpenGLBoostSerialCircle</strong> Á±ª‰πãÈó¥ÈáçÁî® <strong>OpenGL</strong> ‰ª£Á†ÅÔºü</p>
<p><strong>Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèËß£Èáä</strong></p>
<p>‰Ω†ÊÑèËØÜÂà∞‰Ω†ÁöÑÂêå‰∫ã‰ª¨Ëøá‰∫éËø∑ÊÅãÁªßÊâøÔºåËÄå‰Ω†ÈúÄË¶ÅÊãØÊïëËøô‰∏ÄÂ§©„ÄÇ</p>
<p>‰ªñ‰ª¨‰ºº‰πéÈúÄË¶ÅÊúâ‰∫∫Âêë‰ªñ‰ª¨Â±ïÁ§∫Â¶Ç‰Ωï‰∏∫ËøôÁßçÂèòÂåñËøõË°åÊ≠£Á°ÆÁöÑËÆæËÆ°ÔºåÂπ∂‰∏∫‰ªñ‰ª¨Êèê‰æõ‰∏Ä‰∏™ÈÄÇÂΩìÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>Ê≠£Â¶Ç‰∏§‰ΩçÂä°ÂÆûÁöÑÁ®ãÂ∫èÂëòÊâÄË®ÄÔºö<strong>‚ÄúÁªßÊâøÂæàÂ∞ëÊòØÁ≠îÊ°à„ÄÇ‚Äù</strong> ÈóÆÈ¢ò‰ªçÁÑ∂ÊòØËøùÂèç‰∫ÜÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÔºåÂõ†‰∏∫‰Ω†ÈúÄË¶ÅËÆ°ÂàíÂ¶Ç‰ΩïÊîπÂèò‰∏çÂêåÂΩ¢Áä∂ÁöÑÁªòÂà∂ÊñπÂºèÔºå‰Ω†Â∫îËØ•Â∞ÜÁªòÂà∂ÊñπÈù¢ËØÜÂà´‰∏∫‰∏Ä‰∏™ÂèòÂåñÁÇπ„ÄÇ</p>
<p>Êúâ‰∫ÜËøô‰∏™ËÆ§ËØÜÔºåÊ≠£Á°ÆÁöÑÂÅöÊ≥ïÊòØ‰∏∫ÂèòÂåñËÆæËÆ°ÔºåÈÅµÂæ™SRPÔºåÂπ∂ÊèêÂèñÂèòÂåñÁÇπ„ÄÇËøôÂ∞±ÊòØÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæÔºåÂÆÉÊòØÁªèÂÖ∏GoFËÆæËÆ°Ê®°Âºè‰πã‰∏Ä„ÄÇ</p>
<p>ÊÑèÂõæÔºö‚Äú<strong>ÂÆö‰πâ‰∏ÄÁªÑÁÆóÊ≥ïÔºåÂ∞ÅË£ÖÊØè‰∏™ÁÆóÊ≥ïÔºåÂπ∂‰ΩøÂÆÉ‰ª¨ÂèØ‰ª•‰∫íÊç¢„ÄÇÁ≠ñÁï•Ê®°ÂºèÂÖÅËÆ∏ÁÆóÊ≥ïÁã¨Á´ã‰∫é‰ΩøÁî®ÂÆÉÁöÑÂÆ¢Êà∑Á´ØËøõË°åÂèòÂåñ„ÄÇ</strong>‚Äù ËÄå‰∏çÊòØÂú®Ê¥æÁîüÁ±ª‰∏≠ÂÆûÁé∞ËôöÂáΩÊï∞ <strong>draw()</strong>Ôºå‰Ω†ÂèØ‰ª•ÂºïÂÖ•Âè¶‰∏Ä‰∏™Á±ªÊù•‰∏ìÈó®Áî®‰∫éÁªòÂà∂ÂΩ¢Áä∂„ÄÇ</p>
<p>Âú®ÁªèÂÖ∏ÁöÑ<strong>Èù¢ÂêëÂØπË±°</strong>ÔºàOOÔºâÂΩ¢ÂºèÁöÑ<strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong>‰∏≠ÔºåËøôÊòØÈÄöËøáÂºïÂÖ• <strong>DrawStrategy Âü∫Á±ª</strong>Êù•ÂÆûÁé∞ÁöÑÔºàËßÅÂõæ5-4Ôºâ„ÄÇ</p>
<p>Áé∞Âú®Â∞ÜÁªòÂà∂ÊñπÈù¢ÈöîÁ¶ªÂá∫Êù•Ôºå‰ΩøÂæóÊàë‰ª¨ÂèØ‰ª•Âú®‰∏ç‰øÆÊîπÂΩ¢Áä∂Á±ªÁöÑÊÉÖÂÜµ‰∏ãÊõ¥ÊîπÁªòÂà∂ÁöÑÂÆûÁé∞„ÄÇËøôÂÆûÁé∞‰∫Ü<strong>SRP</strong>ÁöÑÊÄùÊÉ≥„ÄÇ‰Ω†Áé∞Âú®‰πüÂèØ‰ª•Âú®‰∏ç‰øÆÊîπ‰ªª‰ΩïÂÖ∂‰ªñ‰ª£Á†ÅÁöÑÊÉÖÂÜµ‰∏ãÂºïÂÖ•Êñ∞ÁöÑ <strong>draw()</strong> ÂÆûÁé∞„ÄÇËøôÊª°Ë∂≥‰∫Ü<strong>ÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàô</strong>ÔºàOCPÔºâ„ÄÇÂÜç‰∏ÄÊ¨°ÔºåÂú®ËøôÁßçÈù¢ÂêëÂØπË±°ËÆæÁΩÆ‰∏≠Ôºå<strong>SRP</strong>ÊòØ<strong>OCP</strong>ÁöÑÊé®Âä®ËÄÖ„ÄÇ</p>
<p>‰ª•‰∏ã‰ª£Á†ÅÁâáÊÆµÂ±ïÁ§∫‰∫Ü <strong>DrawStrategy</strong> Âü∫Á±ªÁöÑ‰∏Ä‰∏™ÁÆÄÂçïÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Circle</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DrawStrategy</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">DrawStrategy</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">circle</span><span class="p">,</span> <span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">square</span><span class="p">,</span> <span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>DrawStrategy</strong> Á±ªÂ∏¶ÊúâËôöÊãüÊûêÊûÑÂáΩÊï∞Âíå‰∏§‰∏™Á∫ØËôöÂáΩÊï∞ <strong>draw()</strong>Ôºå‰∏Ä‰∏™Áî®‰∫éÂúÜÂΩ¢Ôºå‰∏Ä‰∏™Áî®‰∫éÊ≠£ÊñπÂΩ¢„ÄÇ</p>
<p>‰∏∫‰∫ÜÁºñËØëËøô‰∏™Âü∫Á±ªÔºå‰Ω†ÈúÄË¶ÅÂâçÂêëÂ£∞Êòé <strong>Circle</strong> Âíå <strong>Square</strong> Á±ª„ÄÇ</p>
<p>Áî±‰∫éÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÔºå<strong>Shape</strong> Âü∫Á±ªÊ≤°ÊúâÂèòÂåñ„ÄÇÂÆÉ‰ªçÁÑ∂‰ª£Ë°®ÊâÄÊúâÂΩ¢Áä∂ÁöÑÊäΩË±°ÔºåÂπ∂Âõ†Ê≠§Êèê‰æõ‰∫Ü‰∏Ä‰∏™Á∫ØËôöÂáΩÊï∞ <strong>draw()</strong>„ÄÇÁ≠ñÁï•Ê®°ÂºèÊó®Âú®ÊèêÂèñÂÆûÁé∞ÁªÜËäÇÔºåÂõ†Ê≠§Âè™ÂΩ±ÂìçÊ¥æÁîüÁ±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂèØËÉΩËøòÊúâÂÖ∂‰ªñÂáΩÊï∞Ôºå‰æãÂ¶Ç &#39;serialize()&#39; ÊàêÂëòÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËôΩÁÑ∂Áî±‰∫éÁ≠ñÁï•Ê®°Âºè <code>Shape</code> Âü∫Á±ªÊ≤°ÊúâÂèòÂåñÔºå‰ΩÜ <code>Circle</code> Âíå <code>Square</code> Á±ªÂèóÂà∞‰∫ÜÂΩ±ÂìçÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DrawStrategy</span><span class="o">&gt;</span> <span class="n">drawer</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑÂçäÂæÑÊòØÂê¶ÊúâÊïà‰∏îÁªôÂÆöÁöÑ std::unique_ptr ÂÆû‰æã‰∏çÊòØ nullptr */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">drawer_</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/* some arguments */</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DrawStrategy</span><span class="o">&gt;</span> <span class="n">drawer_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Square</span><span class="p">(</span><span class="kt">double</span> <span class="n">side</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DrawStrategy</span><span class="o">&gt;</span> <span class="n">drawer</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">side_</span><span class="p">(</span><span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑËæπÈïøÊòØÂê¶ÊúâÊïà‰∏îÁªôÂÆöÁöÑ std::unique_ptr ÂÆû‰æã‰∏çÊòØ nullptr */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">drawer_</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/* some arguments */</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">side</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">side_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">side_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DrawStrategy</span><span class="o">&gt;</span> <span class="n">drawer_</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áé∞Âú®Ôºå<code>Circle</code> Âíå <code>Square</code> ÈÉΩÊúüÊúõÂú®ÂÖ∂ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Êé•Êî∂‰∏Ä‰∏™ÊåáÂêë <code>DrawStrategy</code> ÁöÑ <code>unique_ptr</code>„ÄÇ</p>
<p>ËøôÂÖÅËÆ∏Êàë‰ª¨‰ªéÂ§ñÈÉ®ÈÖçÁΩÆÁªòÂà∂Ë°å‰∏∫ÔºåÈÄöÂ∏∏Áß∞‰∏∫‰æùËµñÊ≥®ÂÖ•„ÄÇ<code>unique_ptr</code> Ë¢´ÁßªÂä®Âà∞Áõ∏ÂêåÁ±ªÂûãÁöÑÊñ∞ÁöÑÊï∞ÊçÆÊàêÂëò‰∏≠„ÄÇ</p>
<p>ËøòÂèØ‰ª•Êèê‰æõÁõ∏Â∫îÁöÑ setter ÂáΩÊï∞ÔºåËøôÂ∞ÜÂÖÅËÆ∏‰Ω†Âú®Á®çÂêéÁöÑÊó∂Èó¥ÁÇπÊõ¥ÊîπÁªòÂà∂Ë°å‰∏∫„ÄÇ<code>draw()</code> ÊàêÂëòÂáΩÊï∞Áé∞Âú®‰∏çÈúÄË¶ÅËá™Â∑±ÂÆûÁé∞ÁªòÂà∂ÈÄªËæëÔºåÂè™ÈúÄË∞ÉÁî®ÁªôÂÆö <code>DrawStrategy</code> ÁöÑ <code>draw()</code> ÂáΩÊï∞„ÄÇ</p>
<p><strong>ÂàÜÊûêÊú¥Á¥†Ëß£ÂÜ≥ÊñπÊ°àÁöÑ‰∏çË∂≥</strong></p>
<p>Â§™Ê£í‰∫ÜÔºÅÊúâ‰∫ÜËøô‰∏™ÂÆûÁé∞Ôºå‰Ω†Áé∞Âú®ÂèØ‰ª•Âú®Êú¨Âú∞„ÄÅÈöîÁ¶ªÂú∞ÊîπÂèòÂΩ¢Áä∂ÁªòÂà∂ÁöÑË°å‰∏∫ÔºåÂπ∂ËÆ©ÊØè‰∏™‰∫∫ÈÉΩËÉΩÂÆûÁé∞Êñ∞ÁöÑÁªòÂà∂Ë°å‰∏∫„ÄÇÁÑ∂ËÄåÔºåÁõÆÂâçÊàë‰ª¨ÁöÑÁ≠ñÁï•ÂÆûÁé∞Êúâ‰∏Ä‰∏™‰∏•ÈáçÁöÑËÆæËÆ°Áº∫Èô∑„ÄÇ</p>
<p>‰∏∫‰∫ÜÂàÜÊûêËøô‰∏™Áº∫Èô∑ÔºåÂÅáËÆæ‰Ω†ÈúÄË¶ÅÊ∑ªÂä†‰∏ÄÁßçÊñ∞ÁöÑÂΩ¢Áä∂ÔºåÊØîÂ¶Ç‰∏âËßíÂΩ¢„ÄÇËøôÂ∫îËØ•ÂæàÂÆπÊòìÔºåÂõ†‰∏∫Ê≠£Â¶ÇÊàë‰ª¨Âú®‚Äú<strong>ÂáÜÂàô15ÔºöËÆæËÆ°‰ª•Â¢ûÂä†Á±ªÂûãÊàñÊìç‰Ωú</strong>‚Äù‰∏≠ËÆ®ËÆ∫ÁöÑÈÇ£Ê†∑Ôºå<strong>Èù¢ÂêëÂØπË±°ÁºñÁ®ã</strong>ÔºàOOPÔºâÁöÑ‰ºòÂäøÂú®‰∫éËÉΩÂ§üËΩªÊùæÊ∑ªÂä†Êñ∞Á±ªÂûã„ÄÇ</p>
<p>ÂΩì‰Ω†ÂºÄÂßãÂºïÂÖ•‰∏âËßíÂΩ¢Êó∂Ôºå‰Ω†‰ºöÂèëÁé∞Ê∑ªÂä†Êñ∞Á±ªÂûãÁöÑÂΩ¢Áä∂Âπ∂‰∏çÂÉèÈ¢ÑÊúüÁöÑÈÇ£‰πàÁÆÄÂçï„ÄÇ</p>
<p>È¶ñÂÖàÔºå‰Ω†ÈúÄË¶ÅÁºñÂÜôÊñ∞Á±ª„ÄÇËøôÊòØÂèØ‰ª•È¢ÑÊñôÁöÑÔºå‰πü‰∏çÊòØÈóÆÈ¢ò„ÄÇ‰ΩÜÈöèÂêé‰Ω†ÂøÖÈ°ªÊõ¥Êñ∞ <strong>DrawStrategy</strong> Âü∫Á±ªÔºå‰ª•‰æø‰πüËÉΩÁªòÂà∂‰∏âËßíÂΩ¢„ÄÇÂèçËøáÊù•ÔºåËøô‰ºöÂØπÂúÜÂΩ¢ÂíåÊ≠£ÊñπÂΩ¢‰∫ßÁîü‰∏çÂπ∏ÁöÑÂΩ±ÂìçÔºö<strong>Circle</strong> Âíå <strong>Square</strong> Á±ªÈÉΩÈúÄË¶ÅÈáçÊñ∞ÁºñËØë„ÄÅÈáçÊñ∞ÊµãËØïÂπ∂ÂèØËÉΩÈáçÊñ∞ÈÉ®ÁΩ≤„ÄÇÊõ¥ÂπøÊ≥õÂú∞ËØ¥ÔºåÊâÄÊúâÂΩ¢Áä∂ÈÉΩ‰ºöÂèóÂà∞ÂΩ±Âìç„ÄÇËÄåËøôÁßçÊÉÖÂÜµÂ∫îËØ•ÊòØÊúâÈóÆÈ¢òÁöÑ„ÄÇ‰∏∫‰ªÄ‰πàÂú®Ê∑ªÂä†‰∏Ä‰∏™ <strong>Triangle</strong> Á±ªÊó∂ÔºåÂúÜÂΩ¢ÂíåÊ≠£ÊñπÂΩ¢ÈúÄË¶ÅÈáçÊñ∞ÁºñËØëÔºü</p>
<p>ÊäÄÊúØ‰∏äÁöÑÂéüÂõ†ÊòØÈÄöËøá <strong>DrawStrategy</strong> Âü∫Á±ªÔºåÊâÄÊúâÂΩ¢Áä∂ÈöêÂºèÂú∞Áü•ÈÅìÂΩºÊ≠§„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÊ∑ªÂä†‰∏Ä‰∏™Êñ∞ÁöÑÂΩ¢Áä∂‰ºöÂΩ±ÂìçÊâÄÊúâÂÖ∂‰ªñÂΩ¢Áä∂„ÄÇÊ†πÊú¨ÁöÑËÆæËÆ°ÂéüÂõ†ÊòØ<strong>ËøùÂèç‰∫ÜÊé•Âè£ÂàÜÁ¶ªÂéüÂàô</strong>ÔºàISPÔºâÔºàËßÅ‚Äú<strong>ÂáÜÂàô3ÔºöÂàÜÁ¶ªÊé•Âè£‰ª•ÈÅøÂÖç‰∫∫‰∏∫ËÄ¶Âêà</strong>‚ÄùÔºâ„ÄÇ</p>
<p>ÈÄöËøáÂÆö‰πâÂçï‰∏ÄÁöÑ <strong>DrawStrategy</strong> Âü∫Á±ªÔºå‰Ω†‰∫∫‰∏∫Âú∞Â∞ÜÂúÜÂΩ¢„ÄÅÊ≠£ÊñπÂΩ¢Âíå‰∏âËßíÂΩ¢ËÄ¶ÂêàÂú®‰∏ÄËµ∑„ÄÇÁî±‰∫éËøôÁßçËÄ¶ÂêàÔºå‰Ω†‰ΩøÂæóÊ∑ªÂä†Êñ∞Á±ªÂûãÂèòÂæóÊõ¥Âä†Âõ∞ÈöæÔºå‰ªéËÄåÈôêÂà∂‰∫Ü<strong>OOP</strong>ÁöÑ‰ºòÂäø„ÄÇÁõ∏ÊØî‰πã‰∏ãÔºå‰Ω†ÂàõÈÄ†‰∫Ü‰∏ÄÁßç‰∏éÊàë‰ª¨ËÆ®ËÆ∫ËøáÁ®ãÂåñËß£ÂÜ≥ÊñπÊ°àÊó∂ÈùûÂ∏∏Áõ∏‰ººÁöÑÊÉÖÂÜµÔºàËßÅ‚Äú<strong>ÂáÜÂàô15ÔºöËÆæËÆ°‰ª•Â¢ûÂä†Á±ªÂûãÊàñÊìç‰Ωú</strong>‚ÄùÔºâ„ÄÇ</p>
<p>‚Äú<strong>ÈöæÈÅìÊàë‰ª¨Êó†ÊÑè‰∏≠ÈáçÊñ∞ÂÆûÁé∞‰∫ÜËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÂêóÔºü</strong>‚Äù‰Ω†ÂèØËÉΩ‰ºöÈóÆ„ÄÇ</p>
<p>ÊàëÊòéÁôΩ‰Ω†ÁöÑÊÑèÊÄùÔºö<strong>DrawStrategy</strong> Á°ÆÂÆûÁúãËµ∑Êù•ÂæàÂÉèËÆøÈóÆËÄÖ„ÄÇ‰ΩÜ‰∏çÂπ∏ÁöÑÊòØÔºåÂÆÉÂπ∂‰∏çËÉΩÊª°Ë∂≥ËÆøÈóÆËÄÖÁöÑÊÑèÂõæÔºåÂõ†‰∏∫‰Ω†‰∏çËÉΩËΩªÊòìÂú∞Ê∑ªÂä†ÂÖ∂‰ªñÊìç‰Ωú„ÄÇË¶ÅÂÅöÂà∞Ëøô‰∏ÄÁÇπÔºå‰Ω†ÈúÄË¶Å<strong>‰æµÂÖ•ÊÄß</strong>Âú∞Âú® <strong>Shape</strong> Â±ÇÊ¨°ÁªìÊûÑ‰∏≠Ê∑ªÂä†‰∏Ä‰∏™ËôöÊãüÊàêÂëòÂáΩÊï∞„ÄÇ‚ÄúËÄå‰∏îÂÆÉ‰πü‰∏çÊòØÁ≠ñÁï•Ê®°ÂºèÔºåÂõ†‰∏∫Êàë‰ª¨Êó†Ê≥ïÊ∑ªÂä†Á±ªÂûãÔºåÂØπÂêßÔºü‚ÄùÊòØÁöÑÔºåÊ≠£Á°Æ„ÄÇ‰ªéËÆæËÆ°ÁöÑËßíÂ∫¶Êù•ÁúãÔºåËøôÊòØÊúÄÁ≥üÁ≥ïÁöÑÊÉÖÂÜµ„ÄÇ</p>
<p>Ë¶ÅÊ≠£Á°ÆÂÆûÁé∞<strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong>Ôºå‰Ω†ÂøÖÈ°ªÂàÜÂà´ÊèêÂèñÊØè‰∏™ÂΩ¢Áä∂ÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇ‰Ω†ÈúÄË¶Å‰∏∫ÊØèÁßçÂΩ¢Áä∂ÂºïÂÖ•‰∏Ä‰∏™ <strong>DrawStrategy</strong> Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawCircleStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Circle</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DrawCircleStrategy</span>  
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">DrawCircleStrategy</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">circle</span><span class="p">,</span> <span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawCircleStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DrawCircleStrategy</span><span class="o">&gt;</span> <span class="n">drawer</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑÂçäÂæÑÊòØÂê¶ÊúâÊïà‰∏îÁªôÂÆöÁöÑ &#39;std::unique_ptr&#39; ‰∏çÊòØ nullptr */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">drawer_</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/*some arguments*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DrawCircleStrategy</span><span class="o">&gt;</span> <span class="n">drawer_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawSquareStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DrawSquareStrategy</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">DrawSquareStrategy</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">square</span><span class="p">,</span> <span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawSquareStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Square</span><span class="p">(</span><span class="kt">double</span> <span class="n">side</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DrawSquareStrategy</span><span class="o">&gt;</span> <span class="n">drawer</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">side_</span><span class="p">(</span><span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑËæπÈïøÊòØÂê¶ÊúâÊïà‰∏îÁªôÂÆöÁöÑ &#39;std::unique_ptr&#39; ‰∏çÊòØ nullptr */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">drawer_</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/*some arguments*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">side</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">side_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">side_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DrawSquareStrategy</span><span class="o">&gt;</span> <span class="n">drawer_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂØπ‰∫é <strong>Circle</strong> Á±ªÔºå‰Ω†ÈúÄË¶ÅÂºïÂÖ• <strong>DrawCircleStrategy</strong> Âü∫Á±ªÔºåËÄåÂØπ‰∫é <strong>Square</strong> Á±ªÔºåÂàôÊòØ <strong>DrawSquareStrategy</strong> Âü∫Á±ª„ÄÇ</p>
<p>ÈöèÁùÄ <strong>Triangle</strong> Á±ªÁöÑÊ∑ªÂä†Ôºå‰Ω†‰πüÈúÄË¶ÅÊ∑ªÂä†‰∏Ä‰∏™ <strong>DrawTriangleStrategy</strong> Âü∫Á±ª„ÄÇÂè™ÊúâËøôÊ†∑Ôºå‰Ω†ÊâçËÉΩÊ≠£Á°ÆÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÔºåÂπ∂‰ªçÁÑ∂ÂÖÅËÆ∏ÊØè‰∏™‰∫∫Ê∑ªÂä†Êñ∞Á±ªÂûãÂíåÂΩ¢Áä∂ÁªòÂà∂ÁöÑÊñ∞ÂÆûÁé∞„ÄÇ</p>
<p>Êúâ‰∫ÜËøô‰∫õÂäüËÉΩÔºå‰Ω†ÂèØ‰ª•ËΩªÊùæÂÆûÁé∞Áî®‰∫éÁªòÂà∂ÂúÜÂΩ¢„ÄÅÊ≠£ÊñπÂΩ¢ÁîöËá≥‰∏âËßíÂΩ¢ÁöÑÊñ∞Á≠ñÁï•Á±ª„ÄÇ‰æãÂ¶ÇÔºåËÄÉËôëÂÆûÁé∞ <strong>DrawCircleStrategy</strong> Êé•Âè£ÁöÑ <strong>OpenGLCircleStrategy</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;OpenGLCircleStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawCircleStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* OpenGL ÂõæÂΩ¢Â∫ì */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OpenGLCircleStrategy</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DrawCircleStrategy</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">OpenGLCircleStrategy</span><span class="p">(</span><span class="cm">/* ÁªòÂà∂Áõ∏ÂÖ≥ÁöÑÂèÇÊï∞ */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">circle</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* ÁªòÂà∂Áõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÊàêÂëòÔºå‰æãÂ¶ÇÈ¢úËâ≤„ÄÅÁ∫πÁêÜÁ≠â */</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ∑Ê≥®ÊÑèÔºå<strong>Circle</strong> Âíå <strong>DrawCircleStrategy</strong> Á±ª‰Ωç‰∫éÁõ∏ÂêåÁöÑÊû∂ÊûÑÁ∫ßÂà´„ÄÇ</p>
<p>Êõ¥ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂæ™ÁéØ‰æùËµñÂÖ≥Á≥ªÔºö<strong>Circle</strong> ‰æùËµñ‰∫é <strong>DrawCircleStrategy</strong>Ôºå‰ΩÜ <strong>DrawCircleStrategy</strong> ‰πü‰æùËµñ‰∫é <strong>Circle</strong>„ÄÇ‰ΩÜÊòØ‰∏çË¶ÅÊãÖÂøÉÔºöËôΩÁÑ∂‰πç‰∏ÄÁúãËøô‰ºº‰πéÊòØ‰∏™ÈóÆÈ¢òÔºå‰ΩÜÂÆûÈôÖ‰∏äÂπ∂‰∏çÊòØ„ÄÇËøôÊòØ‰∏Ä‰∏™ÂøÖË¶ÅÁöÑÂÖ≥Á≥ªÔºåË°®Êòé <strong>Circle</strong> ÁúüÊ≠£Êã•Êúâ <strong>DrawCircleStrategy</strong> Âπ∂Áî±Ê≠§ÂàõÂª∫‰∫ÜÊâÄÈúÄ‰æùËµñÂÄíÁΩÆÔºåÂ¶Ç‚Äú<strong>ÂáÜÂàô9ÔºöÊ≥®ÊÑèÊäΩË±°ÁöÑÊâÄÊúâÊùÉ</strong>‚Äù‰∏≠ÊâÄËÆ®ËÆ∫ÁöÑÈÇ£Ê†∑„ÄÇ</p>
<p>‚Äú‰ΩøÁî®Á±ªÊ®°ÊùøÂÆûÁé∞‰∏çÂêåÁöÑ <strong>draw</strong> Á≠ñÁï•Á±ªÊòØÂê¶ÂèØË°åÔºüÊàëÊÉ≥Ë±°‰∏≠ÁöÑÁ±ª‰ºº‰∫éÁî®‰∫éÊó†ÁéØËÆøÈóÆËÄÖÁöÑËÆøÈóÆËÄÖÁ±ª‚ÄùÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DrawStrategy</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">DrawStrategy</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊòØ‰∏Ä‰∏™Â•Ω‰∏ªÊÑèÔºå‰πüÊ≠£ÊòØ‰Ω†Â∫îËØ•ÂÅöÁöÑ„ÄÇÈÄöËøáÊ≠§Á±ªÊ®°ÊùøÔºå‰Ω†ÂèØ‰ª•Â∞Ü <strong>DrawStrategy</strong> ÊèêÂçáÂà∞Êõ¥È´òÁöÑÊû∂ÊûÑÁ∫ßÂà´ÔºåÈáçÁî®‰ª£Á†ÅÔºåÂπ∂ÈÅµÂæ™<strong>DRYÂéüÂàô</strong>ÔºàËßÅÂõæ5-6Ôºâ„ÄÇÊ≠§Â§ñÔºåÂ¶ÇÊûú‰ªé‰∏ÄÂºÄÂßãÂ∞±ÈááÁî®ËøôÁßçÊñπÊ≥ïÔºåÊàë‰ª¨Â∞Ü‰∏ç‰ºöÈô∑ÂÖ•‰∫∫‰∏∫ËÄ¶Âêà‰∏çÂêåÁ±ªÂûãÁöÑÈóÆÈ¢ò„ÄÇÊòØÁöÑÔºåÊàëÁúüÁöÑÂñúÊ¨¢Ëøô‰∏™ÔºÅ</p>
<p>Â∞ΩÁÆ°ËøôÊòØÊàë‰ª¨Â¶Ç‰ΩïÂÆûÁé∞ËøôÊ†∑‰∏Ä‰∏™Á≠ñÁï•Á±ªÁöÑÊñπÂºèÔºå‰ΩÜ‰Ω†‰ªçÁÑ∂‰∏çÂ∫îËØ•ÊúüÊúõËøô‰ºöÂáèÂ∞ëÂü∫Á±ªÁöÑÊï∞ÈáèÔºà‰ªçÁÑ∂ÊòØÁõ∏ÂêåÁöÑÔºåÂè™ÊòØÁîüÊàêÁöÑÔºâÔºåÊàñËÄÖËøô‰ºö‰∏∫‰Ω†ËäÇÁúÅÂæàÂ§öÂ∑•‰Ωú„ÄÇ</p>
<p><strong>DrawStrategy</strong> ÁöÑÂÆûÁé∞Ôºå‰æãÂ¶Ç <strong>OpenGLCircleStrategy</strong> Á±ªÔºå‰ª£Ë°®‰∫ÜÂ§ßÈÉ®ÂàÜÁöÑÂ∑•‰ΩúÔºåÂπ∂‰∏îÂá†‰πé‰∏ç‰ºöÊîπÂèòÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;OpenGLCircleStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* OpenGL ÂõæÂΩ¢Â∫ì */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">OpenGLCircleStrategy</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DrawStrategy</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÅáËÆæÁ±ª‰ººÂÆûÁé∞ÁöÑ <code>OpenGLSquareStrategy</code>ÔºåÊàë‰ª¨Áé∞Âú®ÂèØ‰ª•Â∞ÜÊâÄÊúâÂÜÖÂÆπÊîæÂú®‰∏ÄËµ∑ÔºåÂπ∂ÂÜçÊ¨°ÁªòÂà∂ÂΩ¢Áä∂ÔºåËøôÊ¨°ÊòØ‰ΩøÁî®Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÊ≠£Á°ÆËß£ËÄ¶ÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;OpenGLCircleStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;OpenGLSquareStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">Shapes</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Shapes</span> <span class="n">shapes</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∫õÂΩ¢Áä∂ÔºåÊØè‰∏™ÂΩ¢Áä∂ÈÉΩÈÖçÂ§á‰∫ÜÁõ∏Â∫îÁöÑOpenGLÁªòÂà∂Á≠ñÁï• 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">            <span class="mf">2.3</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">OpenGLCircleStrategy</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/*...Á∫¢Ëâ≤...*/</span><span class="p">)</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Square</span><span class="o">&gt;</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">            <span class="mf">1.2</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">OpenGLSquareStrategy</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/*...ÁªøËâ≤...*/</span><span class="p">)</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">            <span class="mf">4.1</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">OpenGLCircleStrategy</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/*...ËìùËâ≤...*/</span><span class="p">)</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁªòÂà∂ÊâÄÊúâÂΩ¢Áä∂ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">shape</span> <span class="p">:</span> <span class="n">shapes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">shape</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">(</span><span class="cm">/*some arguments*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ËÆøÈóÆËÄÖÊ®°Âºè‰∏éÁ≠ñÁï•Ê®°ÂºèÁöÑÊØîËæÉ</strong></p>
<p>Êó¢ÁÑ∂‰Ω†Â∑≤Áªè‰∫ÜËß£‰∫ÜËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÂíåÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÔºå‰Ω†ÂèØËÉΩ‰ºöÁñëÊÉëËøô‰∏§ËÄÖÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πà„ÄÇÊØïÁ´üÔºåÂÆÉ‰ª¨ÁöÑÂÆûÁé∞ÁúãËµ∑Êù•Áõ∏ÂΩìÁõ∏‰ºº„ÄÇÁÑ∂ËÄåÔºåÂ∞ΩÁÆ°Âú®ÂÆûÁé∞‰∏äÊúâ‰∏Ä‰∫õÁõ∏‰ºº‰πãÂ§ÑÔºåËøô‰∏§ÁßçËÆæËÆ°Ê®°ÂºèÁöÑÁâπÊÄßÊòØÈùûÂ∏∏‰∏çÂêåÁöÑ„ÄÇ</p>
<p>‰ΩøÁî®ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÊó∂ÔºåÊàë‰ª¨Â∞Ü‰∏ÄËà¨Êìç‰ΩúÁöÑÊ∑ªÂä†ËßÜ‰∏∫ÂèòÂåñÁÇπ„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨‰∏∫Êìç‰ΩúÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÊäΩË±°ÔºåËøôÂèçËøáÊù•ÂÖÅËÆ∏ÊØè‰∏™‰∫∫Ê∑ªÂä†Êìç‰Ωú„ÄÇ‰∏çÂπ∏ÁöÑÂâØ‰ΩúÁî®ÊòØÔºåÊ∑ªÂä†Êñ∞ÁöÑÂΩ¢Áä∂Á±ªÂûãÂèòÂæó‰∏çÂÜçÂÆπÊòì„ÄÇ</p>
<p>‰ΩøÁî®Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÊó∂ÔºåÊàë‰ª¨Â∞ÜÂçï‰∏™ÂáΩÊï∞ÁöÑÂÆûÁé∞ÁªÜËäÇËßÜ‰∏∫ÂèòÂåñÁÇπ„ÄÇÂºïÂÖ•Ëøô‰∫õÂÆûÁé∞ÁªÜËäÇÁöÑÊäΩË±°ÂêéÔºåÊàë‰ª¨‰ªçÁÑ∂ËÉΩÂ§üËΩªÊùæÂú∞Ê∑ªÂä†Êñ∞ÁöÑÂΩ¢Áä∂Á±ªÂûãÔºå‰ΩÜÊó†Ê≥ïËΩªÊùæÂú∞Ê∑ªÂä†Êñ∞Êìç‰Ωú„ÄÇÊ∑ªÂä†‰∏Ä‰∏™Êìç‰Ωú‰ªçÁÑ∂ÈúÄË¶Å‰æµÂÖ•ÊÄßÂú∞Ê∑ªÂä†‰∏Ä‰∏™ËôöÊãüÊàêÂëòÂáΩÊï∞„ÄÇÂõ†Ê≠§ÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæ‰∏éËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæÊ≠£Â•ΩÁõ∏Âèç„ÄÇ</p>
<p>Â∞ÜËøô‰∏§ÁßçËÆæËÆ°Ê®°ÂºèÁªìÂêàËµ∑Êù•‰ª•Ëé∑Âæó‰∏§ËÄÖÁöÑ‰ºòÁÇπÔºà‰ΩøÊ∑ªÂä†Á±ªÂûãÂíåÊìç‰ΩúÈÉΩÂèòÂæóÂÆπÊòìÔºâÂê¨Ëµ∑Êù•ÂæàÊúâÂâçÊôØ„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåËøôÁßçÊñπÊ≥ïË°å‰∏çÈÄöÔºöÊó†ËÆ∫‰Ω†ÂÖàÂ∫îÁî®Âì™ÁßçËÆæËÆ°Ê®°ÂºèÔºåÈÉΩ‰ºöÂõ∫ÂÆö‰∏§‰∏™Ëá™Áî±ËΩ¥‰∏≠ÁöÑ‰∏Ä‰∏™„ÄÇÂõ†Ê≠§Ôºå‰Ω†Â∫îËØ•ËÆ∞‰ΩèËøô‰∏§ÁßçËÆæËÆ°Ê®°ÂºèÁöÑ‰ºòÁÇπÂíåÁº∫ÁÇπÔºåÂπ∂Ê†πÊçÆ‰Ω†ÂØπ‰ª£Á†ÅÂ∫ìÊºîÂåñÁöÑÈ¢ÑÊúüÊù•Â∫îÁî®ÂÆÉ‰ª¨„ÄÇ</p>
<p><strong>ÂàÜÊûêÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥</strong></p>
<p>ÊàëÂ∑≤ÁªèÂêë‰Ω†Â±ïÁ§∫‰∫ÜÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑ‰ºòÂäøÔºöÂÆÉÈÄöËøáÂºïÂÖ•‰∏Ä‰∏™ÊäΩË±°Êù•ÂáèÂ∞ëÂØπÁâπÂÆöÂÆûÁé∞ÁªÜËäÇÁöÑ‰æùËµñ„ÄÇÁÑ∂ËÄåÔºåÂú®ËΩØ‰ª∂ËÆæËÆ°‰∏≠Ê≤°Êúâ‰∏áËÉΩËçØÔºåÊØèÁßçËÆæËÆ°ÈÉΩÊúâÂÖ∂‰∏ÄÁ≥ªÂàóÁöÑÁº∫ÁÇπ„ÄÇÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰πü‰∏ç‰æãÂ§ñÔºåËÄÉËôëÊΩúÂú®ÁöÑÁº∫ÁÇπÂêåÊ†∑ÈáçË¶Å„ÄÇ</p>
<p>È¶ñÂÖàÔºåËôΩÁÑ∂Êüê‰∏™Êìç‰ΩúÁöÑÂÆûÁé∞ÁªÜËäÇÂ∑≤ÁªèË¢´ÊèêÂèñÂíåÈöîÁ¶ªÔºå‰ΩÜËØ•Êìç‰ΩúÊú¨Ë∫´‰ªçÁÑ∂ÊòØÂÖ∑‰ΩìÁ±ªÂûãÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇËøô‰∏Ä‰∫ãÂÆûËØÅÊòé‰∫Ü‰∏äËø∞ÈôêÂà∂ÔºåÂç≥Êàë‰ª¨‰ªçÁÑ∂‰∏çËÉΩËΩªÊòìÂú∞Ê∑ªÂä†Êìç‰Ωú„ÄÇ‰∏éËÆøÈóÆËÄÖ‰∏çÂêåÔºåÁ≠ñÁï•‰øùÁïô‰∫ÜOOPÁöÑ‰ºòÂäøÔºå‰Ωø‰Ω†ÂèØ‰ª•ËΩªÊùæÊ∑ªÂä†Êñ∞Á±ªÂûã„ÄÇ</p>
<p>ÂÖ∂Ê¨°ÔºåÂ∞ΩÊó©ËØÜÂà´Ëøô‰∫õÂèòÂåñÁÇπÊòØÊúâÂõûÊä•ÁöÑ„ÄÇÂê¶ÂàôÈúÄË¶ÅËøõË°åÂ§ßËßÑÊ®°ÈáçÊûÑ„ÄÇÂΩìÁÑ∂ÔºåËøôÂπ∂‰∏çÊÑèÂë≥ÁùÄ‰Ω†Â∫îËØ•‰∏ÄÂºÄÂßãÂ∞±Áî®Á≠ñÁï•Ê®°ÂºèÂÆûÁé∞‰∏ÄÂàá‰ª•Èò≤Êú™Êù•ÈúÄË¶ÅÈáçÊûÑ„ÄÇËøôÊ†∑ÂÅöÂèØËÉΩ‰ºöÂØºËá¥ËøáÂ∫¶ËÆæËÆ°„ÄÇ‰ΩÜÂú®ÊúâËøπË±°Ë°®ÊòéÂÆûÁé∞ÁªÜËäÇÂèØËÉΩÂèëÁîüÂèòÂåñÔºåÊàñËÄÖÊúâÂ§öÈáçÂÆûÁé∞ÁöÑÈúÄÊ±ÇÊó∂ÔºåÂ∫îËØ•Â∞ΩÂø´ÂÆûÊñΩÂøÖË¶ÅÁöÑ‰øÆÊîπ„ÄÇÊúÄÂ•ΩÁöÑÂª∫ËÆÆÔºåËôΩÁÑ∂ÊòØÊúâÁÇπ‰∏çÂÖ∑‰ΩìÁöÑÔºåÂ∞±ÊòØ‰øùÊåÅ‰∫ãÊÉÖÂ∞ΩÂèØËÉΩÁÆÄÂçïÔºàKISSÂéüÂàôÔºõ‰øùÊåÅÁÆÄÂçïÔºåÊÑöË†¢Ôºâ„ÄÇ</p>
<p>Á¨¨‰∏âÔºåÂ¶ÇÊûú‰Ω†ÈÄöËøáÂü∫Á±ªÂÆûÁé∞Á≠ñÁï•Ê®°ÂºèÔºåÊÄßËÉΩËÇØÂÆö‰ºöÂõ†‰∏∫È¢ùÂ§ñÁöÑËøêË°åÊó∂Èó¥Êé•Ë∞ÉÁî®ËÄåÂèóÂà∞ÂΩ±Âìç„ÄÇÊÄßËÉΩËøòÂèóÂà∞ËÆ∏Â§öÊâãÂä®ÂàÜÈÖçÔºà<code>std::make_unique()</code> Ë∞ÉÁî®Ôºâ„ÄÅÁî±Ê≠§‰∫ßÁîüÁöÑÂÜÖÂ≠òÁ¢éÁâá‰ª•ÂèäÁî±‰∫é‰ºóÂ§öÊåáÈíàÈÄ†ÊàêÁöÑÂêÑÁßçÈó¥Êé•Ë∞ÉÁî®ÁöÑÂΩ±Âìç„ÄÇËøôÊòØÂèØ‰ª•È¢ÑÊñôÁöÑÔºå‰ΩÜ‰Ω†ÁöÑÂÆûÁé∞ÁöÑÁÅµÊ¥ªÊÄß‰ª•ÂèäÊØè‰∏™‰∫∫ÈÉΩÂèØ‰ª•Ê∑ªÂä†Êñ∞ÂÆûÁé∞ÁöÑÊú∫‰ºöÂèØËÉΩ‰ºöË∂ÖËøáËøôÁßçÊÄßËÉΩÊçüÂ§±„ÄÇÂΩìÁÑ∂ÔºåËøôÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÊÉÖÂÜµÔºå‰Ω†ÈúÄË¶ÅÈÄêÊ°àÂÜ≥ÂÆö„ÄÇÂ¶ÇÊûú‰Ω†‰ΩøÁî®Ê®°ÊùøÂÆûÁé∞Á≠ñÁï•Ê®°ÂºèÔºàËßÅ‚ÄúÂü∫‰∫éÁ≠ñÁï•ÁöÑËÆæËÆ°‚ÄùËÆ®ËÆ∫ÔºâÔºåËøôÁßçÁº∫ÁÇπÂ∞±‰∏çÊàêÈóÆÈ¢ò„ÄÇ</p>
<p>ÊúÄÂêé‰ΩÜÂπ∂ÈùûÊúÄ‰∏çÈáçË¶ÅÁöÑÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏ªË¶ÅÁº∫ÁÇπÊòØÂçï‰∏ÄÁ≠ñÁï•Â∫îÂ§ÑÁêÜÂçï‰∏ÄÊìç‰ΩúÊàñ‰∏ÄÁªÑÁ¥ßÂØÜÁõ∏ÂÖ≥ÁöÑÂáΩÊï∞„ÄÇÂê¶ÂàôÔºå‰Ω†Âèà‰ºöËøùÂèçÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâ„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÊèêÂèñÂ§ö‰∏™Êìç‰ΩúÁöÑÂÆûÁé∞ÁªÜËäÇÔºåÂàôÈúÄË¶ÅÊúâÂ§ö‰∏™Á≠ñÁï•Âü∫Á±ªÂíåÂ§ö‰∏™Êï∞ÊçÆÊàêÂëòÔºåÂèØ‰ª•ÈÄöËøá‰æùËµñÊ≥®ÂÖ•ËÆæÁΩÆ„ÄÇ‰æãÂ¶ÇÔºåËÄÉËôëÊúâ‰∏Ä‰∏™È¢ùÂ§ñÁöÑ <code>serialize()</code> ÊàêÂëòÂáΩÊï∞ÁöÑÊÉÖÂÜµÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DrawCircleStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Circle</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DrawCircleStrategy</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">DrawCircleStrategy</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">circle</span><span class="p">,</span> <span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;SerializeCircleStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">SerializeCircleStrategy</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">SerializeCircleStrategy</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">circle</span><span class="p">,</span> <span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawCircleStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;SerializeCircleStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DrawCircleStrategy</span><span class="o">&gt;</span> <span class="n">drawer</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">SerializeCircleStrategy</span><span class="o">&gt;</span> <span class="n">serializer</span> 
</span></span><span class="line"><span class="cl">                    <span class="cm">/* ÂèØËÉΩËøòÊúâÊõ¥Â§ö‰∏éÁ≠ñÁï•Áõ∏ÂÖ≥ÁöÑÂèÇÊï∞ */</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">serializer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">serializer</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑÂçäÂæÑÊòØÂê¶ÊúâÊïà‰∏îÁªôÂÆöÁöÑ std::unique_ptrs ‰∏çÊòØ nullptrs */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">drawer_</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/*some arguments*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">serializer_</span><span class="o">-&gt;</span><span class="n">serialize</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/*some arguments*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DrawCircleStrategy</span><span class="o">&gt;</span> <span class="n">drawer_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">SerializeCircleStrategy</span><span class="o">&gt;</span> <span class="n">serializer_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂèØËÉΩËøòÊúâÊõ¥Â§ö‰∏éÁ≠ñÁï•Áõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÊàêÂëò 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËôΩÁÑ∂Ëøô‰ºöÂØºËá¥Âü∫Á±ªÁöÑÂ§ßÈáèÂ¢ûÂä†‰ª•ÂèäÁî±‰∫éÂ§ö‰∏™ÊåáÈíàËÄåÂØºËá¥ÂÆû‰æãÂèòÂ§ßÔºå‰ΩÜ‰πüÊèêÂá∫‰∫ÜÂ¶Ç‰ΩïËÆæËÆ°Á±ª‰ª•‰æøÊñπ‰æøÂú∞ÂàÜÈÖçÂ§ö‰∏™‰∏çÂêåÁ≠ñÁï•ÁöÑÈóÆÈ¢ò„ÄÇÂõ†Ê≠§ÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂú®ÈúÄË¶ÅÈöîÁ¶ªÂ∞ëÈáèÂÆûÁé∞ÁªÜËäÇÁöÑÊÉÖÂÜµ‰∏ãÊúÄ‰∏∫Âº∫Â§ß„ÄÇÂ¶ÇÊûú‰Ω†ÈÅáÂà∞ÈúÄË¶ÅÊèêÂèñËÆ∏Â§öÊìç‰ΩúÁªÜËäÇÁöÑÊÉÖÂÜµÔºåÊúÄÂ•ΩËÄÉËôëÂÖ∂‰ªñÊñπÊ≥ïÔºà‰æãÂ¶ÇÁ¨¨7Á´†ÁöÑÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÊàñÁ¨¨8Á´†ÁöÑÁ±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°ÂºèÔºâ„ÄÇ</p>
<p><strong>Âü∫‰∫éÁ≠ñÁï•ÁöÑËÆæËÆ°</strong></p>
<p>Ê≠£Â¶ÇÂâçÈù¢Á´†ËäÇÊâÄÂ±ïÁ§∫ÁöÑÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰∏ç‰ªÖÈôê‰∫éÂä®ÊÄÅÂ§öÊÄÅÊÄß„ÄÇÁõ∏ÂèçÔºåÁ≠ñÁï•ÁöÑÊÑèÂõæÂèØ‰ª•ÈÄöËøá‰ΩøÁî®Ê®°ÊùøÂú®ÈùôÊÄÅÂ§öÊÄÅÊÄß‰∏≠ÂÆåÁæéÂÆûÁé∞„ÄÇ‰æãÂ¶ÇÔºåËÄÉËôëÊ†áÂáÜÂ∫ì‰∏≠ÁöÑ‰ª•‰∏ã‰∏§‰∏™ÁÆóÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">std</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ForwardIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">UnaryPredicate</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">ForwardIt</span> <span class="n">partition</span><span class="p">(</span><span class="n">ForwardIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">ForwardIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">UnaryPredicate</span> <span class="n">p</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">RandomIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Compare</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="kt">void</span> <span class="n">sort</span><span class="p">(</span><span class="n">RandomIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">RandomIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">Compare</span> <span class="n">comp</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace std 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>std::partition()</code> Âíå <code>std::sort()</code> ÁÆóÊ≥ïÈÉΩ‰ΩøÁî®‰∫ÜÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè„ÄÇ<code>std::partition()</code> ÁöÑ <code>UnaryPredicate</code> ÂèÇÊï∞Âíå <code>std::sort()</code> ÁöÑ <code>Compare</code> ÂèÇÊï∞‰ª£Ë°®‰∫Ü‰∏ÄÁßç‰ªéÂ§ñÈÉ®Ê≥®ÂÖ•ÈÉ®ÂàÜË°å‰∏∫ÁöÑÊñπÊ≥ï„ÄÇÊõ¥ÂÖ∑‰ΩìÂú∞ËØ¥ÔºåËøô‰∏§‰∏™ÂèÇÊï∞ÂÖÅËÆ∏‰Ω†ÊåáÂÆöÂÖÉÁ¥†Â¶Ç‰ΩïÊéíÂ∫è„ÄÇÂõ†Ê≠§ÔºåËøô‰∏§‰∏™ÁÆóÊ≥ïÊèêÂèñ‰∫ÜÂÖ∂ÁâπÂÆöË°å‰∏∫ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂπ∂‰ª•Ê¶ÇÂøµÁöÑÂΩ¢Âºè‰∏∫Ëøô‰∫õË°å‰∏∫Êèê‰æõ‰∫ÜÊäΩË±°ÔºàËßÅ‚ÄúÊåáÂçó7ÔºöÁêÜËß£Âü∫Á±ª‰∏éÊ¶ÇÂøµ‰πãÈó¥ÁöÑÁõ∏‰ººÊÄß‚ÄùÔºâ„ÄÇËøô‰∏éÈù¢ÂêëÂØπË±°ÂΩ¢ÂºèÁöÑÁ≠ñÁï•‰∏çÂêåÔºå‰∏ç‰ºö‰∫ßÁîü‰ªª‰ΩïËøêË°åÊó∂ÊÄßËÉΩÊçüÂ§±„ÄÇ</p>
<p>Á±ª‰ººÁöÑÊÄùË∑Ø‰πüÂèØ‰ª•Âú® <code>std::unique_ptr</code> Á±ªÊ®°Êùø‰∏≠ÁúãÂà∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">std</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Deleter</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">default_delete</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span>   
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">unique_ptr</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Deleter</span><span class="o">&gt;</span>   
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">unique_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="p">[],</span> <span class="n">Deleter</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace std 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂØπ‰∫éÂü∫Á°ÄÊ®°ÊùøÂíåÊï∞ÁªÑ‰∏ìÁî®Ê®°ÊùøÔºåÈÉΩÂèØ‰ª•ÊåáÂÆöÁ¨¨‰∫å‰∏™Ê®°ÊùøÂèÇÊï∞‰∏∫ÊòæÂºèÁöÑ <code>Deleter</code>„ÄÇÈÄöËøáËøô‰∏™ÂèÇÊï∞Ôºå‰Ω†ÂèØ‰ª•ÂÜ≥ÂÆöÊòØÂê¶Ë¶ÅÈÄöËøá <code>delete</code>„ÄÅ<code>free()</code> ÊàñÂÖ∂‰ªñÈáäÊîæÂáΩÊï∞Êù•ÈáäÊîæËµÑÊ∫ê„ÄÇÁîöËá≥ÂèØ‰ª•‚ÄúÊª•Áî®‚Äù <code>std::unique_ptr</code> Êù•ÊâßË°åÂÆåÂÖ®‰∏çÂêåÁöÑÊ∏ÖÁêÜÊìç‰Ωú„ÄÇ</p>
<p>ËøôÁßçÁÅµÊ¥ªÊÄß‰πüÊòØÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑËØÅÊçÆ„ÄÇÊ®°ÊùøÂèÇÊï∞ÂÖÅËÆ∏‰Ω†Â∞Ü‰∏Ä‰∫õÊ∏ÖÁêÜË°å‰∏∫Ê≥®ÂÖ•Âà∞Á±ª‰∏≠„ÄÇËøôÁßçÂΩ¢ÂºèÁöÑÁ≠ñÁï•‰πüË¢´Áß∞‰∏∫Âü∫‰∫éÁ≠ñÁï•ÁöÑËÆæËÆ°ÔºåËøôÊòØÂÆâÂæ∑ÁÉà¬∑‰∫öÂéÜÂ±±Âæ∑Èõ∑ÊñØÂ∫ìÂú®2001Âπ¥ÊèêÂá∫ÁöÑ‰∏ÄÁßçËÆæËÆ°ÁêÜÂøµ„ÄÇÂÖ∂ÊÄùÊÉ≥Áõ∏ÂêåÔºöÊèêÂèñÂπ∂ÈöîÁ¶ªÁ±ªÊ®°ÊùøÁöÑÂÖ∑‰ΩìË°å‰∏∫Ôºå‰ª•ÊèêÈ´òÂèØÂèòÊÄß„ÄÅÂèØÊâ©Â±ïÊÄß„ÄÅÂèØÊµãËØïÊÄßÂíåÂèØÈáçÁî®ÊÄß„ÄÇÂõ†Ê≠§ÔºåÂü∫‰∫éÁ≠ñÁï•ÁöÑËÆæËÆ°ÂèØ‰ª•Ë¢´ËßÜ‰∏∫Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÈùôÊÄÅÂ§öÊÄÅÂΩ¢Âºè„ÄÇÊòæÁÑ∂ÔºåËøôÁßçËÆæËÆ°ÈùûÂ∏∏ÊúâÊïàÔºåÂ¶ÇÊ†áÂáÜÂ∫ì‰∏≠‰ºóÂ§öÂ∫îÁî®ÊâÄÂ±ïÁ§∫ÁöÑÈÇ£Ê†∑„ÄÇ</p>
<p>‰Ω†ËøòÂèØ‰ª•Â∞ÜÂü∫‰∫éÁ≠ñÁï•ÁöÑËÆæËÆ°Â∫îÁî®‰∫éÂΩ¢Áä∂ÁªòÂà∂ÁöÑ‰æãÂ≠ê„ÄÇËÄÉËôë‰ª•‰∏ã <code>Circle</code> Á±ªÁöÑÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;DrawCircleStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">DrawCircleStrategy</span><span class="o">&gt;</span>   
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">,</span> <span class="n">DrawCircleStrategy</span> <span class="n">drawer</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑÂçäÂæÑÊòØÂê¶ÊúâÊïà */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">drawer_</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/*some arguments*/</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">DrawCircleStrategy</span> <span class="n">drawer_</span><span class="p">;</span>  <span class="c1">// Â¶ÇÊûúÂÅáÂÆöÁªôÂÆöÁöÑÁ≠ñÁï•ÊòØÊó†Áä∂ÊÄÅÁöÑÔºåÂàôÂèØËÉΩÂèØ‰ª•ÁúÅÁï•„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏éÂÖ∂Âú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠‰º†ÈÄí <code>std::unique_ptr</code> Âà∞ <code>DrawCircleStrategy</code> Âü∫Á±ªÔºå‰∏çÂ¶ÇÈÄöËøáÊ®°ÊùøÂèÇÊï∞ÊåáÂÆöÁ≠ñÁï•„ÄÇÊúÄÂ§ßÁöÑ‰ºòÂäøÊòØÁî±‰∫éËæÉÂ∞ëÁöÑÊåáÈíàÈó¥Êé•Ë∞ÉÁî®ËÄåÂ∏¶Êù•ÁöÑÊÄßËÉΩÊèêÂçáÔºö‰Ω†ÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî®Áî± <code>DrawCircleStrategy</code> Êèê‰æõÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÔºåËÄå‰∏çÊòØÈÄöËøá <code>std::unique_ptr</code> Ë∞ÉÁî®„ÄÇÁº∫ÁÇπÊòØ‰Ω†‰ºöÂ§±ÂéªÂú®ËøêË°åÊó∂Ë∞ÉÊï¥ÁâπÂÆö <code>Circle</code> ÂÆû‰æãÁªòÂà∂Á≠ñÁï•ÁöÑÁÅµÊ¥ªÊÄß„ÄÇÊ≠§Â§ñÔºå‰Ω†‰∏ç‰ºöÂÜçÊúâ‰∏Ä‰∏™Âçï‰∏ÄÁöÑ <code>Circle</code> Á±ª„ÄÇ‰Ω†‰ºö‰∏∫ÊØè‰∏™ÁªòÂà∂Á≠ñÁï•Êúâ‰∏Ä‰∏™ <code>Circle</code> ÁöÑÂÆû‰æãÂåñ„ÄÇÊúÄÂêé‰ΩÜÂπ∂ÈùûÊúÄ‰∏çÈáçË¶ÅÁöÑÊòØÔºå‰Ω†Â∫îËØ•ËÆ∞‰ΩèÁ±ªÊ®°ÊùøÈÄöÂ∏∏ÂÆåÂÖ®‰Ωç‰∫éÂ§¥Êñá‰ª∂‰∏≠„ÄÇÂõ†Ê≠§Ôºå‰Ω†ÂèØËÉΩ‰ºöÂ§±ÂéªÂú®Ê∫êÊñá‰ª∂‰∏≠ÈöêËóèÂÆûÁé∞ÁªÜËäÇÁöÑÊú∫‰ºö„ÄÇ‰∏ÄÂ¶ÇÊó¢ÂæÄÔºåÊ≤°ÊúâÂÆåÁæéÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÈÄâÊã©‚ÄúÊ≠£Á°Æ‚ÄùÁöÑËß£ÂÜ≥ÊñπÊ°àÂèñÂÜ≥‰∫éÂÆûÈôÖ‰∏ä‰∏ãÊñá„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Ë¶ÅÊòéÁôΩÔºåÁªßÊâøÂæàÂ∞ëËÉΩËß£ÂÜ≥ÈóÆÈ¢ò„ÄÇ</li>
<li>Â∫îÁî®StrategyËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑÊòØÊèêÂèñ‰∏ÄÁªÑÂÜÖËÅöÂäüËÉΩÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇ</li>
<li>‰∏∫ÊØè‰∏™Êìç‰ΩúÂÆûÁé∞‰∏Ä‰∏™Á≠ñÁï•Ôºå‰ª•ÈÅøÂÖç‰∫∫‰∏∫ËÄ¶Âêà„ÄÇ</li>
<li>Â∞ÜÂü∫‰∫éÁ≠ñÁï•ÁöÑËÆæËÆ°ËßÜ‰∏∫Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÁºñËØëÊó∂ÂΩ¢Âºè„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô20‰ºòÂÖà‰ΩøÁî®ÁªÑÂêàËÄåÈùûÁªßÊâø">ÂáÜÂàô20Ôºö‰ºòÂÖà‰ΩøÁî®ÁªÑÂêàËÄåÈùûÁªßÊâø
</h3><p>Âú®90Âπ¥‰ª£Âíå21‰∏ñÁ∫™ÂàùÈù¢ÂêëÂØπË±°ÁºñÁ®ãÔºàOOPÔºâÁÉ≠ÊΩÆ‰πãÂêéÔºåÂ¶Ç‰ªäÁöÑOOPÂ§Ñ‰∫éÂÆàÂäø„ÄÇÂèçÂØπOOPÂπ∂Âº∫Ë∞ÉÂÖ∂Áº∫ÁÇπÁöÑÂ£∞Èü≥Ë∂äÊù•Ë∂äÂº∫ÁÉà„ÄÇËøô‰∏ç‰ªÖÈôê‰∫éC++Á§æÂå∫Ôºå‰πüÂåÖÊã¨ÂÖ∂‰ªñÁºñÁ®ãËØ≠Ë®ÄÁ§æÂå∫„ÄÇËôΩÁÑ∂OOPÊï¥‰ΩìÁ°ÆÂÆûÊúâ‰∏Ä‰∫õÂ±ÄÈôêÊÄßÔºå‰ΩÜËÆ©Êàë‰ª¨ËÅöÁÑ¶‰∫éÂºïËµ∑ÊúÄÂ§ö‰∫âËÆÆÁöÑ‰∏Ä‰∏™ÁâπÊÄßÔºöÁªßÊâø„ÄÇÊ≠£Â¶ÇSean ParentÊâÄËØ¥Ôºö</p>
<p><strong>‚ÄúÁªßÊâøÊòØ‰∏áÊÅ∂‰πãÊ∫ê„ÄÇ‚Äù</strong></p>
<p>ËôΩÁÑ∂ÁªßÊâøË¢´ÂÆ£‰º†‰∏∫‰∏ÄÁßçÈùûÂ∏∏Ëá™ÁÑ∂‰∏îÁõ¥ËßÇÁöÑÊñπÂºèÂéªÊ®°ÊãüÁé∞ÂÆû‰∏ñÁïåÁöÑÂÖ≥Á≥ªÔºå‰ΩÜÂÆûÈôÖ‰∏äÂÆÉÊØîÊâøËØ∫ÁöÑË¶ÅÈöæÁî®ÂæóÂ§ö„ÄÇÂΩì‰Ω†Êàë‰ª¨Âú®ËÆ®ËÆ∫LiskovÊõøÊç¢ÂéüÂàôÔºàLSPÔºâÊó∂Â∑≤ÁªèÁúãÂà∞‰∫ÜÁªßÊâøÁöÑÂæÆÂ¶ôÂ§±Ë¥•ÔºàËßÅ‚ÄúÊåáÂçó6ÔºöÈÅµÂæ™ÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫‚ÄùÔºâ„ÄÇ‰ΩÜÁªßÊâøËøòÊúâÂÖ∂‰ªñÊñπÈù¢Â∏∏Â∏∏Ë¢´ËØØËß£„ÄÇ</p>
<p>È¶ñÂÖàÔºåÁªßÊâøÊÄªÊòØË¢´ËÆ§‰∏∫ÁÆÄÂåñ‰∫ÜÂèØÈáçÁî®ÊÄß„ÄÇËøô‰ºº‰πéÊòØÁõ¥ËßÇÁöÑÔºåÂõ†‰∏∫‰ªéÂè¶‰∏Ä‰∏™Á±ªÁªßÊâø‰ª£Á†ÅÁúãËµ∑Êù•ÂæàÂÆπÊòìÈáçÁî®„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåËøôÁßçÈáçÁî®Âπ∂‰∏çÊòØÁªßÊâøÂ∏¶Êù•ÁöÑÈÇ£ÁßçÈáçÁî®„ÄÇÁªßÊâø‰∏çÊòØÂÖ≥‰∫éÈáçÁî®Âü∫Á±ª‰∏≠ÁöÑ‰ª£Á†ÅÔºõÁõ∏ÂèçÔºåÂÆÉÊòØÂÖ≥‰∫éÈÄöËøá‰ΩøÁî®Âü∫Á±ªÂ§öÊÄÅÂú∞ÈáçÁî®ÂÖ∂‰ªñ‰ª£Á†Å„ÄÇ‰æãÂ¶ÇÔºåÂÅáËÆæÊúâ‰∏Ä‰∏™Á®çÂæÆÊâ©Â±ïÁöÑ <code>Shape</code> Âü∫Á±ªÔºå‰ª•‰∏ãÂáΩÊï∞ÈÄÇÁî®‰∫éÊâÄÊúâÁ±ªÂûãÁöÑÂΩ¢Áä∂ÔºåÂπ∂Âõ†Ê≠§ÂèØ‰ª•Ë¢´ <code>Shape</code> Âü∫Á±ªÁöÑÊâÄÊúâÂÆûÁé∞ÈáçÁî®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">translate</span><span class="p">(</span><span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">rotate</span><span class="p">(</span><span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="cm">/*some arguments*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂèØËÉΩÊúâÂÖ∂‰ªñÊàêÂëòÂáΩÊï∞ ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">rotateAroundPoint</span><span class="p">(</span><span class="n">Shape</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">mergeShapes</span><span class="p">(</span><span class="n">Shape</span><span class="o">&amp;</span> <span class="n">s1</span><span class="p">,</span> <span class="n">Shape</span><span class="o">&amp;</span> <span class="n">s2</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">writeToFile</span><span class="p">(</span><span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">sendViaRPC</span><span class="p">(</span><span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâÄÊúâÂõõ‰∏™ÂáΩÊï∞Ôºà<code>rotateAroundPoint</code>„ÄÅ<code>mergeShapes</code>„ÄÅ<code>writeToFile</code> Âíå <code>sendViaRPC</code>ÔºâÈÉΩÊòØÂü∫‰∫é <code>Shape</code> ÊäΩË±°ÊûÑÂª∫ÁöÑ„ÄÇÊâÄÊúâËøô‰∫õÂáΩÊï∞‰ªÖËÄ¶ÂêàÂà∞ÊâÄÊúâÁ±ªÂûãÂΩ¢Áä∂ÁöÑÂÖ¨ÂÖ±Êé•Âè£ÔºåËÄå‰∏çÊòØ‰ªª‰ΩïÁâπÂÆöÁöÑÂΩ¢Áä∂„ÄÇÊâÄÊúâÁ±ªÂûãÁöÑÂΩ¢Áä∂ÈÉΩÂèØ‰ª•Âõ¥Áªï‰∏Ä‰∏™ÁÇπÊóãËΩ¨„ÄÅÂêàÂπ∂„ÄÅÂÜôÂÖ•Êñá‰ª∂Âπ∂ÈÄöËøáRPCÂèëÈÄÅ„ÄÇÊØèÁßçÂΩ¢Áä∂ÈÉΩ‚ÄúÈáçÁî®‚Äù‰∫ÜÊ≠§ÂäüËÉΩ„ÄÇ</p>
<p>Ê≠£ÊòØÈÄöËøáÊäΩË±°Ë°®ËææÂäüËÉΩÁöÑËÉΩÂäõÂàõÈÄ†‰∫Ü‰ª£Á†ÅÈáçÁî®ÁöÑÊú∫‰ºö„ÄÇ‰∏éÂü∫Á±ª‰∏≠ÂåÖÂê´ÁöÑÂ∞èÈáè‰ª£Á†ÅÁõ∏ÊØîÔºåËøôÁßçÂäüËÉΩÈ¢ÑËÆ°‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑ‰ª£Á†Å„ÄÇÂõ†Ê≠§ÔºåÁúüÊ≠£ÁöÑÂèØÈáçÁî®ÊÄßÊòØÁî±Á±ªÂûãÁöÑÂ§öÊÄÅ‰ΩøÁî®ÂàõÂª∫ÁöÑÔºåËÄå‰∏çÊòØÁî±Â§öÊÄÅÁ±ªÂûãÂàõÂª∫ÁöÑ„ÄÇ</p>
<p>ÂÖ∂Ê¨°ÔºåÁªßÊâøË¢´ËÆ§‰∏∫ÊúâÂä©‰∫éËß£ËÄ¶ËΩØ‰ª∂ÂÆû‰Ωì„ÄÇËôΩÁÑ∂ËøôÁªùÂØπÊòØÊ≠£Á°ÆÁöÑÔºà‰æãÂ¶ÇÔºåÂõûÊÉ≥‰∏Ä‰∏ã‚ÄúÊåáÂçó9ÔºöÊ≥®ÊÑèÊäΩË±°ÁöÑÊâÄÊúâÊùÉ‚Äù‰∏≠ÂÖ≥‰∫é‰æùËµñÂÄíÁΩÆÂéüÂàôÔºàDIPÔºâÁöÑËÆ®ËÆ∫ÔºâÔºå‰ΩÜÂæÄÂæÄÊ≤°ÊúâËß£ÈáäÁªßÊâø‰πü‰ºö‰∫ßÁîüËÄ¶Âêà„ÄÇ‰Ω†‰πãÂâçÂ∑≤ÁªèÁúãÂà∞ËøáËøô‰∏ÄÁÇπ„ÄÇÂú®ÂÆûÁé∞ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÊó∂Ôºå‰Ω†‰ΩìÈ™åÂà∞‰∫ÜÁªßÊâøÂ¶Ç‰ΩïÂº∫Âà∂Êüê‰∫õÂÆûÁé∞ÁªÜËäÇÁªô‰Ω†„ÄÇÂú®‰∏Ä‰∏™ÁªèÂÖ∏ÁöÑËÆøÈóÆËÄÖÊ®°Âºè‰∏≠Ôºå‰Ω†ÂøÖÈ°ªÂÆûÁé∞ËÆøÈóÆËÄÖÂü∫Á±ªÁöÑÁ∫ØËôöÂáΩÊï∞ÔºåÂç≥‰ΩøËøôÂØπ‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫èÊù•ËØ¥Âπ∂‰∏çÁêÜÊÉ≥„ÄÇ‰Ω†ÂØπÂáΩÊï∞ÂèÇÊï∞ÊàñËøîÂõûÁ±ªÂûã‰πüÊ≤°ÊúâÂ§™Â§öÈÄâÊã©„ÄÇËøô‰∫õÈÉΩÊòØÂõ∫ÂÆöÁöÑ„ÄÇ</p>
<p>‰Ω†Âú®ËÆ®ËÆ∫Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂºÄÂßãÊó∂‰πü‰ΩìÈ™åÂà∞‰∫ÜËøôÁßçËÄ¶Âêà„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÁªßÊâøÂº∫Âà∂‰∫Ü‰∏ÄÁßçÁªìÊûÑËÄ¶ÂêàÔºåÂØºËá¥‰∫ÜÊõ¥Ê∑±ÁöÑÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÔºåÂØºËá¥‰∫ÜÂèØÁñëÁöÑÁ±ªÂëΩÂêçÔºåÂπ∂ÊçüÂÆ≥‰∫ÜÈáçÁî®ÊÄß„ÄÇ</p>
<p>Âú®Ê≠§Êó∂Ôºå‰Ω†ÂèØËÉΩ‰ºöËßâÂæóÊàëÂú®ËØïÂõæÂÆåÂÖ®ËØãÊØÅÁªßÊâø„ÄÇÂ•ΩÂêßÔºåËØ¥ÂÆûËØùÔºåÊàëÂè™ÊòØÊÉ≥ËÆ©ÂÆÉÁúãËµ∑Êù•ÊúâÁÇπ‰∏çÂ•ΩÔºå‰ΩÜÂè™ÊòØÂøÖË¶ÅÁöÑÁ®ãÂ∫¶„ÄÇÊòéÁ°ÆÂú∞ËØ¥ÔºöÁªßÊâøÂπ∂‰∏çÂùèÔºå‰πü‰∏çÊÑèÂë≥ÁùÄ‰∏çÂ∫îËØ•‰ΩøÁî®ÂÆÉ„ÄÇÁõ∏ÂèçÔºöÁªßÊâøÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Âº∫Â§ßÁöÑÁâπÊÄßÔºåÂ¶ÇÊûú‰ΩøÁî®ÂæóÂΩìÔºå‰Ω†ÂèØ‰ª•Áî®ÂÆÉÂÅö‰ª§‰∫∫Èöæ‰ª•ÁΩÆ‰ø°ÁöÑ‰∫ãÊÉÖ„ÄÇÁÑ∂ËÄåÔºå‚ÄúÂ¶ÇÊûú‰ΩøÁî®ÂæóÂΩì‚ÄùËøôÈÉ®ÂàÜÊòØ‰∏™ÈóÆÈ¢ò„ÄÇÁªßÊâøÂ∑≤ÁªèË¢´ËØÅÊòéÂæàÈöæÊ≠£Á°Æ‰ΩøÁî®ÔºàËÇØÂÆöÊØîÊàë‰ª¨Ë¢´ÂëäÁü•ÁöÑË¶ÅÈöæÂæóÂ§öÔºõÂèÇËßÅÊàë‰πãÂâçÁöÑÁêÜÁî±ÔºâÔºåÂõ†Ê≠§ÁªèÂ∏∏Ë¢´Êó†ÊÑè‰∏≠ËØØÁî®„ÄÇÂÆÉ‰πüË¢´ËøáÂ∫¶‰ΩøÁî®ÔºåÂõ†‰∏∫ËÆ∏Â§öÂºÄÂèë‰∫∫Âëò‰π†ÊÉØ‰∫éÁî®ÂÆÉÊù•Ëß£ÂÜ≥ÂêÑÁßçÈóÆÈ¢ò„ÄÇËøôÁßçËøáÂ∫¶‰ΩøÁî®‰ºº‰πéÊòØËÆ∏Â§öÈóÆÈ¢òÁöÑÊ†πÊ∫êÔºåÊ≠£Â¶ÇMichael FeathersÊâÄË®ÄÔºö</p>
<p>‚Äú[ÁºñÁ®ãÂ∑ÆÂºÇ]Âú®1990Âπ¥‰ª£Â§±ÂÆ†ÔºåÂΩìÊó∂ËÆ∏Â§ö‰∫∫Ê≥®ÊÑèÂà∞Â¶ÇÊûúËøáÂ∫¶‰ΩøÁî®ÁªßÊâø‰ºöÁõ∏ÂΩìÈ∫ªÁÉ¶„ÄÇ‚Äù</p>
<p>Âú®ËÆ∏Â§öÊÉÖÂÜµ‰∏ãÔºåÁªßÊâøÊó¢‰∏çÊòØÊ≠£Á°ÆÁöÑËß£ÂÜ≥ÊñπÊ°à‰πü‰∏çÊòØÊ≠£Á°ÆÁöÑÂ∑•ÂÖ∑„ÄÇÂ§ßÂ§öÊï∞Êó∂ÂÄôÔºå‰ΩøÁî®ÁªÑÂêàÊõ¥‰∏∫ÂèØÂèñ„ÄÇ‰Ω†Â∫îËØ•‰∏ç‰ºöÂØπÊ≠§ÊÑüÂà∞ÊÉäËÆ∂ÔºåÂõ†‰∏∫‰Ω†Â∑≤ÁªèÁúãÂà∞ËøôÊòØ‰∫ãÂÆû„ÄÇÁªÑÂêàÊòØOOÂΩ¢ÂºèÁöÑÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂ¶ÇÊ≠§ÊúâÊïàÁöÑÊ†πÊú¨ÂéüÂõ†ÔºåËÄå‰∏çÊòØÁªßÊâø„ÄÇÂºïÂÖ•ÊäΩË±°ÂíåËÅöÂêàÁõ∏Â∫îÁöÑÊï∞ÊçÆÊàêÂëò‰ΩøÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂ¶ÇÊ≠§Âº∫Â§ßÔºåËÄå‰∏çÊòØÂü∫‰∫éÁªßÊâøÁöÑ‰∏çÂêåÁ≠ñÁï•ÂÆûÁé∞„ÄÇÂÆûÈôÖ‰∏äÔºå‰Ω†‰ºöÂèëÁé∞ËÆ∏Â§öËÆæËÆ°Ê®°ÂºèÂùöÂÆûÂú∞Âü∫‰∫éÁªÑÂêàÔºåËÄå‰∏çÊòØÁªßÊâø„ÄÇÊâÄÊúâËøô‰∫õÊ®°ÂºèÈÉΩËÉΩÈÄöËøáÁªßÊâøËøõË°åÊâ©Â±ïÔºå‰ΩÜÂÆÉ‰ª¨Êú¨Ë∫´ÊòØÈÄöËøáÁªÑÂêàÂÆûÁé∞ÁöÑ„ÄÇ</p>
<p><strong>ÂßîÊâòÁªôÊúçÂä°ÔºöÊã•Êúâ‰ºò‰∫éÊòØ„ÄÇ</strong> ‚Äî‚ÄîAndrew HuntÂíåDavid ThomasÔºå„ÄäÂÆûÁî®Á®ãÂ∫èÂëò„Äã</p>
<p>ËøôÊòØËÆ∏Â§öËÆæËÆ°Ê®°ÂºèÁöÑ‰∏ÄËà¨Ë¶ÅÁÇπ„ÄÇÊàëÂª∫ËÆÆ‰Ω†Â∞ÜËøô‰∏ÄËßÅËß£Áâ¢ËÆ∞Âú®ÂøÉÔºåÂõ†‰∏∫ÂÆÉÂ∞ÜÂØπ‰Ω†ÁêÜËß£Êú¨‰π¶Ââ©‰ΩôÈÉ®ÂàÜ‰∏≠ÁúãÂà∞ÁöÑËÆæËÆ°Ê®°ÂºèÈùûÂ∏∏ÊúâÁî®ÔºåÂπ∂Â∞ÜÊèêÈ´ò‰Ω†ÂÆûÁé∞ÁöÑË¥®Èáè„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Ë¶ÅÊòéÁôΩÁªßÊâøÁªèÂ∏∏Ë¢´ËøáÂ∫¶‰ΩøÁî®ÔºåÊúâÊó∂ÁîöËá≥Ë¢´ËØØÁî®„ÄÇ</li>
<li>ËØ∑ËÆ∞‰ΩèÔºåÁªßÊâøÂàõÂª∫‰∫ÜÁ¥ßÂØÜËÄ¶Âêà„ÄÇ</li>
<li>Ë¶ÅËÆ§ËØÜÂà∞ËÆ∏Â§öËÆæËÆ°Ê®°ÂºèÊòØÈÄöËøáÁªÑÂêàËÄå‰∏çÊòØÁªßÊâøÊù•ÂÆûÁé∞ÁöÑ„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô21‰ΩøÁî®ÂëΩ‰ª§Ê®°ÂºèÈöîÁ¶ªÊìç‰ΩúÂÜÖÂÆπ">ÂáÜÂàô21Ôºö‰ΩøÁî®ÂëΩ‰ª§Ê®°ÂºèÈöîÁ¶ªÊìç‰ΩúÂÜÖÂÆπ
</h3><p>Âú®Êàë‰ª¨ÂºÄÂßãËøôÊù°ÊåáÂçó‰πãÂâçÔºåËÆ©Êàë‰ª¨ÂÖàÂÅö‰∏Ä‰∏™ÂÆûÈ™å„ÄÇ</p>
<p>ÊâìÂºÄ‰Ω†ÂñúÊ¨¢ÁöÑÁîµÂ≠êÈÇÆ‰ª∂ÂÆ¢Êà∑Á´ØÔºåÁªôÊàëÂÜô‰∏ÄÂ∞ÅÁîµÂ≠êÈÇÆ‰ª∂„ÄÇÊ∑ªÂä†‰ª•‰∏ãÂÜÖÂÆπÔºö‚ÄúÊàëÁà±ÊÇ®ÁöÑ‰π¶ÔºÅÂÆÉËÆ©ÊàëÊï¥ÊôöÈÉΩÁù°‰∏çÁùÄÔºåÂπ∂‰∏îËÆ©ÊàëÂøòËÆ∞‰∫ÜÊâÄÊúâÁöÑÁÉ¶ÊÅº„ÄÇ‚Äù Â•ΩÁöÑÔºåÂæàÂ•Ω„ÄÇÁé∞Âú®ÁÇπÂáªÂèëÈÄÅ„ÄÇ</p>
<p>Âπ≤Âæó‰∏çÈîôÔºÅÁªôÊàëÂá†ÁßíÈíüÊ£ÄÊü•ÊàëÁöÑÈÇÆÁÆ±‚Ä¶‚Ä¶ËøòÊ≤°ÊúâÊî∂Âà∞‚Ä¶‚Ä¶ËøòÊòØÊ≤°Êúâ‚Ä¶‚Ä¶ËÆ©Êàë‰ª¨ÂÜçËØï‰∏ÄÊ¨°ÔºöÁÇπÂáªÈáçÊñ∞ÂèëÈÄÅ„ÄÇËøòÊòØÊ≤°Êúâ„ÄÇ</p>
<p>ÂóØÔºåÊàëÁåúÊúâ‰∫õÊúçÂä°Âô®ÂèØËÉΩÂá∫‰∫ÜÈóÆÈ¢ò„ÄÇÊàñËÄÖÊòØÊàëËøôËæπÁöÑÊâÄÊúâÂëΩ‰ª§ÈÉΩÂ§±Ë¥•‰∫ÜÔºö<code>WriteCommand</code>ÔºàÂÜôÂëΩ‰ª§Ôºâ„ÄÅ<code>SendCommand</code>ÔºàÂèëÈÄÅÂëΩ‰ª§Ôºâ„ÄÅ<code>ResendCommand</code>ÔºàÈáçÊñ∞ÂèëÈÄÅÂëΩ‰ª§ÔºâÔºåÁ≠âÁ≠â„ÄÇÁúü‰∏çÂπ∏„ÄÇ</p>
<p>‰ΩÜÂ∞ΩÁÆ°Ëøô‰∏™ÂÆûÈ™åÂ§±Ë¥•‰∫ÜÔºå‰Ω†Áé∞Âú®Â∫îËØ•ÂØπÂè¶‰∏Ä‰∏™GoFËÆæËÆ°Ê®°ÂºèÊúâ‰∫Ü‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÁêÜËß£Ôºö<strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>„ÄÇ</p>
<p><strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèËß£Êûê</strong></p>
<p>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè‰∏ìÊ≥®‰∫éÂ∞ÅË£ÖÂíåÈöîÁ¶ªÂ∑•‰ΩúÂåÖÔºåËøô‰∫õÂ∑•‰ΩúÂåÖÈÄöÂ∏∏Âè™ÊâßË°å‰∏ÄÊ¨°ÔºåÂπ∂‰∏îÈÄöÂ∏∏ÊòØÁ´ãÂç≥ÊâßË°åÁöÑ„ÄÇ‰∏∫Ê≠§ÔºåÂÆÉËØÜÂà´‰∏çÂêåÁ±ªÂûãÁöÑÂ∑•‰ΩúÂåÖ‰Ωú‰∏∫ÂèòÂåñÁÇπÔºåÂπ∂ÂºïÂÖ•Áõ∏Â∫îÁöÑÊäΩË±°ÔºåÂÖÅËÆ∏ËΩªÊùæÂÆûÁé∞Êñ∞ÁöÑÂ∑•‰ΩúÂåÖÁ±ªÂûã„ÄÇ</p>
<p>ÊÑèÂõæÔºö‚Äú<strong>Â∞ÜËØ∑Ê±ÇÂ∞ÅË£Ö‰∏∫ÂØπË±°Ôºå‰ªéËÄåËÆ©‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏çÂêåÁöÑËØ∑Ê±ÇÂèÇÊï∞ÂåñÂÆ¢Êà∑Á´ØÔºåÈòüÂàóÊàñËÆ∞ÂΩïËØ∑Ê±ÇÔºåÂπ∂ÊîØÊåÅÂèØÊí§ÈîÄÁöÑÊìç‰Ωú„ÄÇ</strong>‚Äù</p>
<p>‰ª•ËÆ°ÁÆóÂô®‰∏∫‰æãÔºå‰∏ãÈù¢ÊòØÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏Ä‰∏™ÂÆûÁé∞„ÄÇÁ¨¨‰∏Ä‰∏™‰ª£Á†ÅÁâáÊÆµÂ±ïÁ§∫‰∫Ü<code>CalculatorCommand</code>Âü∫Á±ªÁöÑÂÆûÁé∞ÔºåÂÆÉ‰ª£Ë°®‰∫ÜÂØπÁªôÂÆöÊï¥Êï∞ËøõË°åÊï∞Â≠¶ËøêÁÆóÁöÑÊäΩË±°Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;CalculatorCommand.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CalculatorCommand</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">CalculatorCommand</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">execute</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">undo</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>CalculatorCommand</code>Á±ªÊúüÊúõÊ¥æÁîüÁ±ªÂÆûÁé∞Á∫ØËôöÂáΩÊï∞<code>execute()</code>Âíå<code>undo()</code>„ÄÇÂØπ‰∫é<code>undo()</code>ÁöÑÈ¢ÑÊúüÊòØÂÆÉÂÆûÁé∞‰∫ÜÂøÖË¶ÅÁöÑÊìç‰ΩúÊù•ÈÄÜËΩ¨<code>execute()</code>ÂáΩÊï∞ÁöÑÊïàÊûú„ÄÇ</p>
<p>Âä†Ê≥ïÂíåÂáèÊ≥ïÁ±ªÈÉΩ‰ª£Ë°®‰∫ÜËÆ°ÁÆóÂô®ÂèØËÉΩÁöÑÂëΩ‰ª§ÔºåÂõ†Ê≠§ÂÆÉ‰ª¨ÂÆûÁé∞‰∫Ü<code>CalculatorCommand</code>Âü∫Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Add.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;CalculatorCommand.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Add</span> <span class="o">:</span> <span class="k">public</span> <span class="n">CalculatorCommand</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Add</span><span class="p">(</span><span class="kt">int</span> <span class="n">operand</span><span class="p">)</span> <span class="o">:</span> <span class="n">operand_</span><span class="p">(</span><span class="n">operand</span><span class="p">)</span> <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">execute</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="n">operand_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">undo</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">i</span> <span class="o">-</span> <span class="n">operand_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">operand_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Subtract.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;CalculatorCommand.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Subtract</span> <span class="o">:</span> <span class="k">public</span> <span class="n">CalculatorCommand</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Subtract</span><span class="p">(</span><span class="kt">int</span> <span class="n">operand</span><span class="p">)</span> <span class="o">:</span> <span class="n">operand_</span><span class="p">(</span><span class="n">operand</span><span class="p">)</span> <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">execute</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">i</span> <span class="o">-</span> <span class="n">operand_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">undo</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="n">operand_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">operand_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Add</code>Á±ªÂÆûÁé∞‰∫Ü<code>execute()</code>ÂáΩÊï∞Áî®‰∫éÂä†Ê≥ïÊìç‰ΩúÔºåÂπ∂ÂÆûÁé∞‰∫Ü<code>undo()</code>ÂáΩÊï∞Áî®‰∫éÂáèÊ≥ïÊìç‰Ωú„ÄÇ<code>Subtract</code>Á±ªÂàôÂÆûÁé∞‰∫ÜÁõ∏ÂèçÁöÑÊìç‰Ωú„ÄÇ</p>
<p>Áî±‰∫é<code>CalculatorCommand</code>Â±ÇÊ¨°ÁªìÊûÑÁöÑÂ≠òÂú®Ôºå<code>Calculator</code>Á±ªÊú¨Ë∫´ÂèØ‰ª•‰øùÊåÅÁõ∏ÂΩìÁÆÄÂçïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Calculator.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;CalculatorCommand.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stack&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Calculator</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">compute</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">CalculatorCommand</span><span class="o">&gt;</span> <span class="n">command</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">undoLast</span><span class="p">();</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">result</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">clear</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">CommandStack</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">stack</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">CalculatorCommand</span><span class="o">&gt;&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">current_</span><span class="p">{};</span>  
</span></span><span class="line"><span class="cl">    <span class="n">CommandStack</span> <span class="n">stack_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Calculator.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Calculator.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="n">Calculator</span><span class="o">::</span><span class="n">compute</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">CalculatorCommand</span><span class="o">&gt;</span> <span class="n">command</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">current_</span> <span class="o">=</span> <span class="n">command</span><span class="o">-&gt;</span><span class="n">execute</span><span class="p">(</span><span class="n">current_</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">stack_</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">command</span><span class="p">));</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Calculator</span><span class="o">::</span><span class="n">undoLast</span><span class="p">()</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">stack_</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="k">return</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">command</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">stack_</span><span class="p">.</span><span class="n">top</span><span class="p">());</span> 
</span></span><span class="line"><span class="cl">    <span class="n">stack_</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="n">current_</span> <span class="o">=</span> <span class="n">command</span><span class="o">-&gt;</span><span class="n">undo</span><span class="p">(</span><span class="n">current_</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">Calculator</span><span class="o">::</span><span class="n">result</span><span class="p">()</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">current_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Calculator</span><span class="o">::</span><span class="n">clear</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">current_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">CommandStack</span><span class="p">{}.</span><span class="n">swap</span><span class="p">(</span><span class="n">stack_</span><span class="p">);</span>  <span class="c1">// Ê∏ÖÁ©∫Ê†à 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨Âè™ÈúÄË¶Å‰∏§‰∏™ÂáΩÊï∞Êù•ËøõË°åËÆ°ÁÆóÊ¥ªÂä®Ôºö<code>compute()</code>Âíå<code>undoLast()</code>„ÄÇ</p>
<p><code>compute()</code>ÂáΩÊï∞Êé•Êî∂‰∏Ä‰∏™<code>CalculatorCommand</code>ÂÆû‰æãÔºåÁ´ãÂç≥ÊâßË°åÂÆÉ‰ª•Êõ¥Êñ∞ÂΩìÂâçÂÄºÔºåÂπ∂Â∞ÜÂÖ∂Â≠òÂÇ®Âú®Ê†à‰∏≠„ÄÇ<code>undoLast()</code>ÂáΩÊï∞ÈÄöËøá‰ªéÊ†à‰∏≠ÂºπÂá∫ÊúÄÂêé‰∏Ä‰∏™ÊâßË°åÁöÑÂëΩ‰ª§Âπ∂Ë∞ÉÁî®ÂÖ∂<code>undo()</code>ÊñπÊ≥ïÊù•Êí§ÈîÄÊúÄÂêé‰∏ÄÊ¨°Êìç‰Ωú„ÄÇ</p>
<p><code>main()</code>ÂáΩÊï∞Â∞ÜÊâÄÊúâÈÉ®ÂàÜÁªÑÂêàÂú®‰∏ÄËµ∑Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Main.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Calculator.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Add.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Subtract.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Calculator</span> <span class="n">calculator</span><span class="p">{};</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">op1</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Add</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">op2</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Add</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">op3</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Subtract</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">op4</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Subtract</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">calculator</span><span class="p">.</span><span class="n">compute</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">op1</span><span class="p">));</span>  <span class="c1">// ËÆ°ÁÆó 0 + 3ÔºåÂ≠òÂÇ®Âπ∂ËøîÂõû 3 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">calculator</span><span class="p">.</span><span class="n">compute</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">op2</span><span class="p">));</span>  <span class="c1">// ËÆ°ÁÆó 3 + 7ÔºåÂ≠òÂÇ®Âπ∂ËøîÂõû 10 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">calculator</span><span class="p">.</span><span class="n">compute</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">op3</span><span class="p">));</span>  <span class="c1">// ËÆ°ÁÆó 10 - 4ÔºåÂ≠òÂÇ®Âπ∂ËøîÂõû 6 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">calculator</span><span class="p">.</span><span class="n">compute</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">op4</span><span class="p">));</span>  <span class="c1">// ËÆ°ÁÆó 6 - 2ÔºåÂ≠òÂÇ®Âπ∂ËøîÂõû 4 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">calculator</span><span class="p">.</span><span class="n">undoLast</span><span class="p">();</span>  <span class="c1">// Êí§ÈîÄÊúÄÂêé‰∏ÄÊ¨°Êìç‰ΩúÔºåÂ≠òÂÇ®Âπ∂ËøîÂõû 6 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="k">const</span> <span class="n">res</span> <span class="o">=</span> <span class="n">calculator</span><span class="p">.</span><span class="n">result</span><span class="p">();</span>  <span class="c1">// Ëé∑ÂèñÊúÄÁªàÁªìÊûúÔºö6 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>È¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™ËÆ°ÁÆóÂô®ÔºåÂπ∂ÂàõÂª∫‰∏ÄÁ≥ªÂàóÊìç‰ΩúÔºå‰æùÊ¨°Â∫îÁî®Ëøô‰∫õÊìç‰Ωú„ÄÇ</p>
<p>‰πãÂêéÔºåÈÄöËøá<code>undo()</code>Êìç‰ΩúÊí§ÈîÄ<code>op4</code>ÔºåÁÑ∂ÂêéÊü•ËØ¢ÊúÄÁªàÁªìÊûú„ÄÇ</p>
<p>ËøôÁßçËÆæËÆ°ÂæàÂ•ΩÂú∞ÈÅµÂæ™‰∫Ü<strong>SOLID</strong>ÂéüÂàô„ÄÇÂÆÉÈÅµÂÆà<strong>Âçï‰∏ÄËÅåË¥£ÂéüÂàô</strong>ÔºàSRPÔºâÔºåÂõ†‰∏∫ÈÄöËøá<strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>Â∑≤ÁªèÊèêÂèñ‰∫ÜÂèòÂåñÁÇπ„ÄÇÂõ†Ê≠§Ôºå<code>compute()</code>Âíå<code>undo()</code>‰∏çÈúÄË¶ÅÊòØËôöÂáΩÊï∞„ÄÇ<strong>SRP</strong>‰πü‰øÉËøõ‰∫Ü<strong>ÂºÄÈó≠ÂéüÂàô</strong>ÔºàOCPÔºâÔºå‰ΩøÊàë‰ª¨ÂèØ‰ª•Ê∑ªÂä†Êñ∞Êìç‰ΩúËÄåÊó†ÈúÄ‰øÆÊîπÁé∞Êúâ‰ª£Á†Å„ÄÇ</p>
<p>ÊúÄÂêéÔºåÂ¶ÇÊûúÊ≠£Á°ÆÂàÜÈÖç‰∫Ü<code>Command</code>Âü∫Á±ªÁöÑÊâÄÊúâÊùÉÔºåÂàôËÆæËÆ°‰πüÁ¨¶Âêà<strong>‰æùËµñÂÄíÁΩÆÂéüÂàô</strong>ÔºàDIPÔºâ„ÄÇ</p>
<p><strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÁöÑÁ¨¨‰∫å‰∏™ÁªèÂÖ∏Á§∫‰æãÔºöÁ∫øÁ®ãÊ±†</strong></p>
<p><strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>ÁöÑÂè¶‰∏Ä‰∏™ÁªèÂÖ∏Á§∫‰æãÊòØ<strong>Á∫øÁ®ãÊ±†</strong>„ÄÇ</p>
<p>Á∫øÁ®ãÊ±†ÁöÑ‰ΩúÁî®ÊòØÁª¥Êä§Â§ö‰∏™Á∫øÁ®ãÔºåÁ≠âÂæÖ‰ªªÂä°‰ª•‰æøÂπ∂Ë°åÊâßË°å„ÄÇ</p>
<p>Ëøô‰∏ÄÊÉ≥Ê≥ïÈÄöËøá‰ª•‰∏ã<code>ThreadPool</code>Á±ªÂÆûÁé∞ÔºöÂÆÉÊèê‰æõ‰∫Ü‰∏Ä‰∫õÊàêÂëòÂáΩÊï∞Êù•Â∞ÜÊüê‰∫õ‰ªªÂä°ÂàÜÈÖçÁªôÁâπÂÆöÊï∞ÈáèÁöÑÂèØÁî®Á∫øÁ®ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Command</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="cm">/* ÊâßË°åÂíåÊí§ÈîÄ‰ªª‰ΩïÁ±ªÂûãÊìç‰ΩúÁöÑÊäΩË±°Êé•Âè£ */</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ThreadPool</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">ThreadPool</span><span class="p">(</span><span class="n">size_t</span> <span class="n">numThreads</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="kr">inline</span> <span class="kt">bool</span> <span class="nf">isEmpty</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kr">inline</span> <span class="n">size_t</span> <span class="nf">size</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kr">inline</span> <span class="n">size_t</span> <span class="nf">active</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kr">inline</span> <span class="n">size_t</span> <span class="nf">ready</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">schedule</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Command</span><span class="o">&gt;</span> <span class="n">command</span><span class="p">);</span>   <span class="c1">// ÂÆâÊéí‰∏Ä‰∏™‰ªªÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="nf">wait</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúÄÈáçË¶ÅÁöÑÊòØÔºå<code>ThreadPool</code>ÂÖÅËÆ∏‰Ω†ÈÄöËøá<code>schedule()</code>ÂáΩÊï∞ÂÆâÊéí‰∏Ä‰∏™‰ªªÂä°„ÄÇ</p>
<p>Ëøô‰∏™‰ªªÂä°ÂèØ‰ª•ÊòØ‰ªª‰ΩïÁ±ªÂûãÁöÑÔºö<code>ThreadPool</code>ÂÆåÂÖ®‰∏çÂÖ≥ÂøÉÂÖ∂Á∫øÁ®ãÈúÄË¶ÅÊâßË°å‰ªÄ‰πàÁ±ªÂûãÁöÑÂ∑•‰Ωú„ÄÇ</p>
<p>ÈÄöËøá<code>Command</code>Âü∫Á±ªÔºåÂÆÉ‰∏éÂÆûÈôÖË∞ÉÂ∫¶ÁöÑ‰ªªÂä°Á±ªÂûãÂÆåÂÖ®Ëß£ËÄ¶„ÄÇ</p>
<p>Âè™ÈúÄ‰ªé<code>Command</code>Ê¥æÁîüÔºåÂ∞±ÂèØ‰ª•Âà∂ÂÆö‰ªªÊÑè‰ªªÂä°Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">FormattingCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Command</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="cm">/* ÂÆûÁé∞Á£ÅÁõòÊ†ºÂºèÂåñ */</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PrintCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Command</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="cm">/* ÂÆûÁé∞ÊâìÂç∞‰ªªÂä° */</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ÂàùÂßãÊúâ‰∏§‰∏™Â∑•‰ΩúÁ∫øÁ®ãÁöÑÁ∫øÁ®ãÊ±† 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">ThreadPool</span> <span class="n">threadpool</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂÆâÊéí‰∏§‰∏™Âπ∂Âèë‰ªªÂä° 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">threadpool</span><span class="p">.</span><span class="n">schedule</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">FormattingCommand</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/* ‰∏Ä‰∫õÂèÇÊï∞ */</span><span class="p">));</span> 
</span></span><span class="line"><span class="cl">    <span class="n">threadpool</span><span class="p">.</span><span class="n">schedule</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">PrintCommand</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/* ‰∏Ä‰∫õÂèÇÊï∞ */</span><span class="p">));</span> 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// Á≠âÂæÖÁ∫øÁ®ãÊ±†ÂÆåÊàêÊâÄÊúâÂëΩ‰ª§ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">threadpool</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰æãÂ¶ÇÔºå<code>FormattingCommand</code>‰ªªÂä°‰ºöËé∑ÂèñÂøÖË¶ÅÁöÑ‰ø°ÊÅØÔºåÈÄöËøáÊìç‰ΩúÁ≥ªÁªüËß¶ÂèëÁ£ÅÁõòÊ†ºÂºèÂåñ„ÄÇ</p>
<p>Âè¶‰∏ÄÁßçÊÉÖÂÜµÊòØ<code>PrintCommand</code>ÔºåÂÆÉÊé•Êî∂ÊâÄÊúâÊï∞ÊçÆ‰ª•Ëß¶ÂèëÊâìÂç∞‰Ωú‰∏ö„ÄÇ</p>
<p>Âú®Ëøô‰∏™Á∫øÁ®ãÊ±†Á§∫‰æã‰∏≠Ôºå‰Ω†‰πüËÉΩÂ§üËØÜÂà´Âá∫<strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>ÁöÑÊïàÊûúÔºö‰∏çÂêåÁ±ªÂûãÁöÑ‰ªªÂä°Ë¢´ËØÜÂà´‰∏∫ÂèòÂåñÁÇπÔºåÂπ∂Ë¢´ÊèêÂèñÂá∫Êù•ÔºàËøô‰πüÈÅµÂæ™‰∫ÜÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºâÔºåËøô‰Ωø‰Ω†ÂèØ‰ª•ÂÆûÁé∞‰∏çÂêåÁ±ªÂûãÁöÑ‰ªªÂä°ËÄåÊó†ÈúÄ‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÔºàÁ¨¶ÂêàÂºÄÈó≠ÂéüÂàôÔºâ„ÄÇ</p>
<p>ÂΩìÁÑ∂ÔºåÊ†áÂáÜÂ∫ì‰∏≠‰πüÊúâ‰∏Ä‰∫õ‰æãÂ≠êÂ±ïÁ§∫‰∫ÜÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÁöÑÂ∫îÁî®„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÂú®<code>std::for_each()</code>ÁÆóÊ≥ï‰∏≠ÂèØ‰ª•ÁúãÂà∞ÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÁöÑÂÆûÈôÖÂ∫îÁî®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">std</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InputIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">UnaryFunction</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">UnaryFunction</span> <span class="n">for_each</span><span class="p">(</span><span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">UnaryFunction</span> <span class="n">f</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace std 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∏â‰∏™ÂèÇÊï∞</strong>ÊåáÂÆö‰∫ÜÁÆóÊ≥ïÂ∫îÂØπÊâÄÊúâÁªôÂÆöÂÖÉÁ¥†ÊâßË°å‰ªÄ‰πà‰ªªÂä°„ÄÇËøô‰∏™‰ªªÂä°ÂèØ‰ª•ÊòØ‰ªª‰ΩïÊìç‰ΩúÔºå‰ªéÊìç‰ΩúÂÖÉÁ¥†Âà∞ÊâìÂç∞ÂÆÉ‰ª¨ÔºåÂèØ‰ª•ÈÄöËøáÁÆÄÂçïÁöÑÂáΩÊï∞ÊåáÈíàÊàñÂº∫Â§ßÁöÑlambdaË°®ËææÂºèÊåáÂÆöÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">multBy10</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span> <span class="n">i</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">i</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∞ÜÊâÄÊúâÊï¥Êï∞‰πò‰ª•10 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">for_each</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">multBy10</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// ÊâìÂç∞ÊâÄÊúâÊï¥Êï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">for_each</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="p">[](</span><span class="kt">int</span><span class="o">&amp;</span> <span class="n">i</span><span class="p">){</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">});</span> 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®‰∏äËø∞‰ª£Á†Å‰∏≠Ôºå<code>std::for_each</code>ÁöÑÁ¨¨‰∏Ä‰∏™Ë∞ÉÁî®Â∞ÜÂêëÈáè‰∏≠ÁöÑÊØè‰∏™Êï¥Êï∞‰πò‰ª•10ÔºåÁ¨¨‰∫å‰∏™Ë∞ÉÁî®ÂàôÊâìÂç∞Ëøô‰∫õÊï¥Êï∞„ÄÇÈÄöËøá‰ΩøÁî®‰∏çÂêåÁöÑÂáΩÊï∞ÊàñlambdaË°®ËææÂºè‰Ωú‰∏∫Á¨¨‰∏â‰∏™ÂèÇÊï∞Ôºå‰Ω†ÂèØ‰ª•ËΩªÊùæÂú∞ÊîπÂèò<code>std::for_each</code>ÁöÑË°å‰∏∫Ôºå‰ªéËÄåÂÆûÁé∞È´òÂ∫¶ÁÅµÊ¥ªÁöÑÊìç‰Ωú„ÄÇËøôÁßçÁÅµÊ¥ªÊÄßÊ≠£ÊòØÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉ‰ºòÂäø‰πã‰∏Ä„ÄÇ</p>
<p><strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè‰∏éÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÂØπÊØî</strong></p>
<p>‚ÄúÁ≠â‰∏Ä‰∏ãÔºÅ‚Äù‰Ω†ÂèØËÉΩ‰ºöÂñäÈÅìÔºå‚Äú‰Ω†‰∏çÊòØÂàöÂàöËß£ÈáäËøáÊ†áÂáÜÂ∫ìÁÆóÊ≥ïÊòØÈÄöËøáÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂÆûÁé∞ÁöÑÂêóÔºüËøô‰∏çÊòØÂÆåÂÖ®‰∏é‰πãÂâçÁöÑÈôàËø∞ÁüõÁõæÂêóÔºü‚Äù ÊòØÁöÑÔºå‰Ω†ÊòØÂØπÁöÑ„ÄÇÂ∞±Âú®Âá†È°µ‰πãÂâçÔºåÊàëÁ°ÆÂÆûËß£Èáä‰∫Ü<code>std::partition()</code>Âíå<code>std::sort()</code>ÁÆóÊ≥ïÊòØÈÄöËøáÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂÆûÁé∞ÁöÑ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÊàëÊâøËÆ§Áé∞Âú®ÁúãËµ∑Êù•ÂÉèÊòØËá™Áõ∏ÁüõÁõæ„ÄÇÁÑ∂ËÄåÔºåÊàëÊ≤°ÊúâÂ£∞Áß∞ÊâÄÊúâÁÆóÊ≥ïÈÉΩÂü∫‰∫éÁ≠ñÁï•Ê®°Âºè„ÄÇËÆ©ÊàëËß£Èáä‰∏Ä‰∏ã„ÄÇ</p>
<p>‰ªéÁªìÊûÑ‰∏äÁúãÔºå<strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong>Âíå<strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>ÊòØÁõ∏ÂêåÁöÑÔºöÊó†ËÆ∫ÊòØ‰ΩøÁî®Âä®ÊÄÅÂ§öÊÄÅËøòÊòØÈùôÊÄÅÂ§öÊÄÅ„ÄÇ</p>
<p>‰ªéÂÆûÁé∞ËßíÂ∫¶Êù•ÁúãÔºå<strong>Á≠ñÁï•</strong>Âíå<strong>ÂëΩ‰ª§</strong>‰πãÈó¥Ê≤°ÊúâÂå∫Âà´„ÄÇ‰∏§ËÄÖÁöÑÂ∑ÆÂºÇÂÆåÂÖ®Âú®‰∫éÂÆÉ‰ª¨ÁöÑËÆæËÆ°ÊÑèÂõæ„ÄÇ</p>
<p><strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong>ÊåáÂÆöÊüê‰ª∂‰∫ãÂ∫îËØ•Â¶Ç‰ΩïÂÆåÊàêÔºåËÄå<strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>ÂàôÊåáÂÆöÂ∫îËØ•ÂÆåÊàê‰ªÄ‰πà„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåËÄÉËôë<code>std::partition()</code>Âíå<code>std::for_each()</code>ÁÆóÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">std</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ForwardIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">UnaryPredicate</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">ForwardIt</span> <span class="n">partition</span><span class="p">(</span><span class="n">ForwardIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">ForwardIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">UnaryPredicate</span> <span class="n">p</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InputIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">UnaryFunction</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">UnaryFunction</span> <span class="n">for_each</span><span class="p">(</span><span class="n">InputIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">InputIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">UnaryFunction</span> <span class="n">f</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace std 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®<code>std::partition()</code>ÁÆóÊ≥ï‰∏≠Ôºå‰Ω†Âè™ËÉΩÊéßÂà∂Â¶Ç‰ΩïÈÄâÊã©ÂÖÉÁ¥†ÔºåËÄåÂú®<code>std::for_each()</code>ÁÆóÊ≥ï‰∏≠Ôºå‰Ω†ÂèØ‰ª•ÊéßÂà∂ÂØπÁªôÂÆöËåÉÂõ¥ÂÜÖÊØè‰∏™ÂÖÉÁ¥†Â∫îÁî®‰ªÄ‰πàÊìç‰Ωú„ÄÇ</p>
<p>Âú®ÂΩ¢Áä∂Á§∫‰æã‰∏≠Ôºå‰Ω†Âè™ËÉΩÊåáÂÆöÂ¶Ç‰ΩïÁªòÂà∂ÊüêÁßçÂΩ¢Áä∂ÔºåËÄåÂú®Á∫øÁ®ãÊ±†Á§∫‰æã‰∏≠Ôºå‰Ω†ÂÆåÂÖ®Ë¥üË¥£ÂÜ≥ÂÆöÂÆâÊéí‰ªÄ‰πàÊìç‰Ωú„ÄÇ</p>
<p>Ê≠§Â§ñÔºåËøòÊúâ‰∏§‰∏™ÊåáÊ†áÂèØ‰ª•Â∏ÆÂä©‰Ω†Âå∫ÂàÜËøô‰∏§ÁßçËÆæËÆ°Ê®°ÂºèÁöÑÂ∫îÁî®Ôºö</p>
<p><strong>‰æùËµñÊ≥®ÂÖ•</strong>ÔºöÂ¶ÇÊûú‰Ω†Êúâ‰∏Ä‰∏™ÂØπË±°Âπ∂ÈÄöËøáÂä®‰ΩúÔºàÊâßË°å‰æùËµñÊ≥®ÂÖ•ÔºâÈÖçÁΩÆÂÆÉÔºåÈÇ£‰πà‰Ω†ÂæàÂèØËÉΩÂú®‰ΩøÁî®Á≠ñÁï•ËÆæËÆ°Ê®°Âºè„ÄÇÂ¶ÇÊûú‰Ω†‰∏ç‰ΩøÁî®Âä®‰ΩúÊù•ÈÖçÁΩÆÂØπË±°ÔºåËÄåÊòØÁõ¥Êé•ÊâßË°åËØ•Âä®‰ΩúÔºåÈÇ£‰πà‰Ω†ÂæàÂèØËÉΩÂú®‰ΩøÁî®<strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>„ÄÇÂú®Êàë‰ª¨ÁöÑËÆ°ÁÆóÂô®Á§∫‰æã‰∏≠ÔºåÊàë‰ª¨Ê≤°Êúâ‰º†ÈÄíÂä®‰ΩúÊù•ÈÖçÁΩÆËÆ°ÁÆóÂô®ÔºåËÄåÊòØÁ´ãÂç≥ËØÑ‰º∞‰∫ÜËØ•Âä®‰Ωú„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Âü∫‰∫éÂëΩ‰ª§Ê®°ÂºèÊûÑÂª∫„ÄÇ</p>
<p>Âè¶Â§ñÔºåÊàë‰ª¨‰πüÂèØ‰ª•ÈÄöËøáÁ≠ñÁï•Ê®°ÂºèÂÆûÁé∞ËÆ°ÁÆóÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;CalculatorStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CalculatorStrategy</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"> <span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">CalculatorStrategy</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">int</span> <span class="nf">compute</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Calculator.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;CalculatorStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Calculator</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"> <span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">set</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">CalculatorStrategy</span><span class="o">&gt;</span> <span class="n">operation</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">compute</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"> <span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">current_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">CalculatorStrategy</span><span class="o">&gt;</span> <span class="n">operation_</span><span class="p">;</span>  <span class="c1">// ÈúÄË¶Å‰∏Ä‰∏™ÈªòËÆ§ÂÄºÔºÅ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Calculator.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Calculator.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Calculator</span><span class="o">::</span><span class="n">set</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">CalculatorStrategy</span><span class="o">&gt;</span> <span class="n">operation</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">operation_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">operation</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Calculator</span><span class="o">::</span><span class="n">compute</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">current_</span> <span class="o">=</span> <span class="n">operation_</span><span class="o">-&gt;</span><span class="n">compute</span><span class="p">(</span><span class="n">value</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™ËÆ°ÁÆóÂô®ÂÆûÁé∞‰∏≠ÔºåÁ≠ñÁï•ÊòØÈÄöËøá<code>set()</code>ÂáΩÊï∞Ê≥®ÂÖ•ÁöÑ„ÄÇ<code>compute()</code>ÂáΩÊï∞‰ΩøÁî®Ê≥®ÂÖ•ÁöÑÁ≠ñÁï•ËøõË°åËÆ°ÁÆó„ÄÇ‰ΩÜÊòØËØ∑Ê≥®ÊÑèÔºåËøôÁßçÊñπÊ≥ï‰ΩøÂæóÂÆûÁé∞ÂêàÁêÜÁöÑÊí§ÈîÄÊú∫Âà∂Êõ¥Âä†Âõ∞Èöæ„ÄÇ</p>
<p><strong>Êí§ÈîÄÊìç‰Ωú</strong>ÔºöÂ¶ÇÊûú‰Ω†ÁöÑÂä®‰ΩúÊèê‰æõ‰∫Ü‰∏Ä‰∏™Êí§ÈîÄÊìç‰ΩúÊù•ÂõûÊªöÂÆÉÊâÄÂÅöÁöÑÂ∑•‰ΩúÔºåÂπ∂Â∞ÅË£Ö‰∫ÜÊâßË°åÊí§ÈîÄÊâÄÈúÄÁöÑ‰∏ÄÂàáÔºåÈÇ£‰πà‰Ω†ÂæàÂèØËÉΩÂú®Â§ÑÁêÜ<strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÁöÑÂä®‰ΩúÊ≤°ÊúâÊèê‰æõÊí§ÈîÄÊìç‰ΩúÔºåÂõ†‰∏∫ÂÆÉ‰∏ìÊ≥®‰∫éÂ¶Ç‰ΩïÂÆåÊàêÊüê‰∫ãÊàñÁº∫‰πèÂõûÊªöÊìç‰ΩúÁöÑ‰ø°ÊÅØÔºåÈÇ£‰πà‰Ω†ÂæàÂèØËÉΩÂú®Â§ÑÁêÜ<strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong>„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÊàëË¶ÅÊòéÁ°ÆÊåáÂá∫ÁöÑÊòØÔºåÁº∫Â∞ëÊí§ÈîÄÊìç‰ΩúÂπ∂‰∏çËÉΩ‰Ωú‰∏∫Á≠ñÁï•Ê®°ÂºèÁöÑÁªìËÆ∫ÊÄßËØÅÊçÆ„ÄÇÂ¶ÇÊûúÊÑèÂõæÊòØÊåáÂÆöÂ∫îËØ•ÂÅö‰ªÄ‰πàÔºåÂç≥‰ΩøÊ≤°ÊúâÊí§ÈîÄÊìç‰ΩúÔºå‰ªçÁÑ∂ÂèØËÉΩÊòØÂëΩ‰ª§Ê®°ÂºèÁöÑ‰∏ÄÁßçÂÆûÁé∞„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå<code>std::for_each()</code>ÁÆóÊ≥ï‰ªçÁÑ∂ÊúüÊúõ‰∏Ä‰∏™ÂëΩ‰ª§ÔºåÂ∞ΩÁÆ°‰∏çÈúÄË¶ÅÊí§ÈîÄÊìç‰Ωú„ÄÇ</p>
<p>Êí§ÈîÄÊìç‰ΩúÂ∫îË¢´ËßÜ‰∏∫ÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏Ä‰∏™ÂèØÈÄâÁâπÊÄßÔºåËÄå‰∏çÊòØÂÆö‰πâÊÄßÁöÑÁâπÂæÅ„ÄÇÂú®ÊàëÁúãÊù•ÔºåÊí§ÈîÄÊìç‰ΩúÂπ∂‰∏çÊòØÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÁöÑ‰ºòÂäøÔºåËÄåÊòØ‰∏ÄÁßçÁ∫ØÁ≤πÁöÑÂøÖË¶ÅÊÄßÔºöÂ¶ÇÊûú‰∏Ä‰∏™Âä®‰ΩúÊúâÂÆåÂÖ®Ëá™Áî±ÂÅö‰ªª‰ΩïÂÆÉÊÉ≥ÂÅöÁöÑ‰∫ãÊÉÖÔºåÈÇ£‰πàÂè™ÊúâËøô‰∏™Âä®‰ΩúÊú¨Ë∫´ÊâçËÉΩÂõûÊªöÊìç‰ΩúÔºàÂΩìÁÑ∂ÔºåÂÅáËÆæ‰Ω†‰∏çÂ∏åÊúõ‰∏∫ÊØèÊ¨°Ë∞ÉÁî®ÂëΩ‰ª§Â≠òÂÇ®ÂÆåÊï¥ÁöÑÂâØÊú¨Ôºâ„ÄÇ</p>
<p>ÊàëÊâøËÆ§Ëøô‰∏§‰∏™Ê®°Âºè‰πãÈó¥Ê≤°ÊúâÊòéÁ°ÆÁöÑÂàÜÁïåÁ∫øÔºåËÄå‰∏îÂÆÉ‰ª¨‰πãÈó¥Â≠òÂú®ÁÅ∞Ëâ≤Âú∞Â∏¶„ÄÇÁÑ∂ËÄåÔºå‰∫âËÆ∫Êüê‰∫ãÁâ©ÊòØÂëΩ‰ª§ËøòÊòØÁ≠ñÁï•Âπ∂Ê≤°ÊúâÊÑè‰πâÔºåÁîöËá≥ÂèØËÉΩÂ§±Âéª‰∏Ä‰∫õÊúãÂèã„ÄÇÊõ¥ÈáçË¶ÅÁöÑÊòØÂà©Áî®ÂÆÉ‰ª¨ÊèêÂèñÂÆûÁé∞ÁªÜËäÇÂíåÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÁöÑËÉΩÂäõ„ÄÇ‰∏§ÁßçËÆæËÆ°Ê®°ÂºèÈÉΩÂèØ‰ª•Â∏ÆÂä©‰Ω†ÈöîÁ¶ªÂèòÂåñÂíåÊâ©Â±ïÔºå‰ªéËÄåÈÅµÂæ™<strong>Âçï‰∏ÄËÅåË¥£ÂéüÂàô</strong>ÔºàSRPÔºâÂíå<strong>ÂºÄÈó≠ÂéüÂàô</strong>ÔºàOCPÔºâ„ÄÇ</p>
<p>ÊØïÁ´üÔºåËøôÂèØËÉΩÊòØ‰∏∫‰ªÄ‰πàÂú®C++Ê†áÂáÜÂ∫ì‰∏≠ÊúâÂ¶ÇÊ≠§Â§öËøô‰∏§ÁßçËÆæËÆ°Ê®°ÂºèÁöÑ‰æãÂ≠êÁöÑÂéüÂõ†„ÄÇ</p>
<p><strong>ÂàÜÊûêÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥‰πãÂ§Ñ</strong></p>
<p><strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>ÁöÑ‰ºòÁÇπÁ±ª‰ºº‰∫é<strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong>ÁöÑ‰ºòÁÇπÔºö<strong>ÂëΩ‰ª§Ê®°Âºè</strong>ÈÄöËøáÂºïÂÖ•ÊüêÁßçÊäΩË±°Ôºà‰æãÂ¶ÇÂü∫Á±ªÊàñÊ¶ÇÂøµÔºâÂ∏ÆÂä©‰Ω†Ëß£ËÄ¶ÂÖ∑‰Ωì‰ªªÂä°ÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇËøôÁßçÊäΩË±°ÂÖÅËÆ∏‰Ω†ËΩªÊùæÊ∑ªÂä†Êñ∞‰ªªÂä°„ÄÇÂõ†Ê≠§ÔºåÂëΩ‰ª§Ê®°ÂºèÂêåÊó∂Êª°Ë∂≥‰∫Ü<strong>SRP</strong>Âíå<strong>OCP</strong>„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºå<strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>‰πüÊúâÂÖ∂Áº∫ÁÇπ„ÄÇ‰∏éÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁõ∏ÊØîÔºåÂÖ∂Áº∫ÁÇπÂàóË°®Áõ∏ÂΩìÁü≠„ÄÇÂîØ‰∏ÄÁúüÊ≠£ÁöÑÁº∫ÁÇπÊòØÁî±‰∫éÈ¢ùÂ§ñÁöÑÈó¥Êé•Â±ÇÂØºËá¥ÁöÑËøêË°åÊó∂ÊÄßËÉΩÂºÄÈîÄÔºåÂ∞§ÂÖ∂ÊòØÂú®ÈÄöËøáÂü∫Á±ªÂÆûÁé∞ÂëΩ‰ª§Ê®°ÂºèÊó∂ÔºàÁªèÂÖ∏ÁöÑGoFÈ£éÊ†ºÔºâ„ÄÇÂÜçÊ¨°Âº∫Ë∞ÉÔºåÁî±‰Ω†ÂÜ≥ÂÆöÂ¢ûÂä†ÁöÑÁÅµÊ¥ªÊÄßÊòØÂê¶Ë∂ÖËøá‰∫ÜËøêË°åÊó∂ÊÄßËÉΩÁöÑÊçüÂ§±„ÄÇ</p>
<p>ÊÄª‰πãÔºåÂ∞±ÂÉèÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰∏ÄÊ†∑ÔºåÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÊòØËÆæËÆ°Ê®°ÂºèÁõÆÂΩï‰∏≠ÊúÄÂü∫Êú¨ÂíåÊúÄÊúâÁî®ÁöÑÊ®°Âºè‰πã‰∏Ä„ÄÇ‰Ω†‰ºöÂú®ËÆ∏Â§ö‰∏çÂêåÁöÑÊÉÖÂÜµ‰∏ãÈÅáÂà∞ÂëΩ‰ª§Ê®°ÂºèÁöÑÂÆûÁé∞ÔºåÊó†ËÆ∫ÊòØÈùôÊÄÅÁöÑËøòÊòØÂä®ÊÄÅÁöÑ„ÄÇÂõ†Ê≠§ÔºåÁêÜËß£ÂëΩ‰ª§Ê®°ÂºèÁöÑÊÑèÂõæ„ÄÅ‰ºòÁÇπÂíåÁº∫ÁÇπÂ∞ÜÂú®ËÆ∏Â§öÊó∂ÂÄôËØÅÊòéÊòØÊúâÁî®ÁöÑ„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Â∫îÁî®CommandËÆæËÆ°Ê®°ÂºèÔºåÁõÆÁöÑÊòØÊäΩË±°ÂíåÂ∞ÅË£Ö‰∏Ä‰∏™ÔºàÂèØËÉΩÊòØÂèØÊí§ÈîÄÁöÑÔºâÊìç‰Ωú„ÄÇ</li>
<li>ËØ∑Ê≥®ÊÑèÔºåÂëΩ‰ª§ÂíåÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰πãÈó¥ÁöÑÁïåÈôêÊòØÂèØÂèòÁöÑ„ÄÇ</li>
<li>ÂØπÂä®ÊÄÅÂíåÈùôÊÄÅÂ∫îÁî®Á®ãÂ∫èÈÉΩ‰ΩøÁî®Command„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô22‰ºòÂÖà‰ΩøÁî®ÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ">ÂáÜÂàô22Ôºö‰ºòÂÖà‰ΩøÁî®ÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ
</h3><p>Âú®‚Äú<strong>ÂáÜÂàô19Ôºö‰ΩøÁî®Á≠ñÁï•Ê®°ÂºèÈöîÁ¶ªÂ¶Ç‰ΩïÂÆåÊàê‰ªªÂä°</strong>‚ÄùÂíå‚Äú<strong>ÂáÜÂàô21Ôºö‰ΩøÁî®ÂëΩ‰ª§Ê®°ÂºèÈöîÁ¶ªÂ∫îËØ•ÂÆåÊàê‰ªÄ‰πà‰ªªÂä°</strong>‚Äù‰∏≠ÔºåÊàëÂàÜÂà´Âêë‰Ω†‰ªãÁªç‰∫Ü<strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong>Âíå<strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>„ÄÇ</p>
<p>Âú®Ëøô‰∏§ÁßçÊÉÖÂÜµ‰∏ãÔºåÁ§∫‰æãÈÉΩÊòØÂü∫‰∫éÁªèÂÖ∏ÁöÑGoFÈ£éÊ†ºÊûÑÂª∫ÁöÑÔºöÂÆÉ‰ª¨ÈÄöËøáÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‰ΩøÁî®Âä®ÊÄÅÂ§öÊÄÅÊÄß„ÄÇËøôÁßçÁªèÂÖ∏Èù¢ÂêëÂØπË±°ÁöÑÈ£éÊ†ºÁº∫‰πèÁé∞‰ª£ÊÑüÔºåÂèØ‰ª•ÊÉ≥Ë±°‰Ω†Áé∞Âú®ÂèØËÉΩÂ∑≤ÁªèÂõ†‰∏∫Âí¨ÊåáÁî≤ËÄåÊÉπÊÅº‰∫Ü‰Ω†ÁöÑÁæéÁî≤Â∏à„ÄÇ</p>
<p>‰Ω†ÂèØËÉΩ‰ºöÊÉ≥Ôºö‚ÄúÈöæÈÅìÊ≤°ÊúâÂè¶‰∏ÄÁßçÊõ¥Â•ΩÁöÑÊñπÂºèÊù•ÂÆûÁé∞Á≠ñÁï•ÂíåÂëΩ‰ª§Ê®°ÂºèÂêóÔºü‰∏ÄÁßçÊõ¥‚ÄòÁé∞‰ª£‚ÄôÁöÑÊñπÊ≥ïÔºü‚Äù ÊòØÁöÑÔºåÊîæÂøÉÔºõÁ°ÆÂÆûÊúâ„ÄÇËøôÁßçÊñπÊ≥ïÂØπ‰∫éÊàë‰ª¨Áé∞Âú®Áß∞‰πã‰∏∫ <strong>Áé∞‰ª£C++</strong> ÁöÑÂì≤Â≠¶ÈùûÂ∏∏ÈáçË¶ÅÔºå‰ª•Ëá≥‰∫éÂÆÉÂÄºÂæó‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊåáÂçóÊù•Ëß£ÈáäÂÖ∂‰ºòÁÇπ„ÄÇ</p>
<p>ÊàëÁõ∏‰ø°‰Ω†ÁöÑÁæéÁî≤Â∏à‰ºöÁêÜËß£ËøôÊ¨°Â∞èÊèíÊõ≤ÁöÑÂéüÂõ†„ÄÇ</p>
<p><strong>GoFÈ£éÊ†ºÁöÑ‰∏çË∂≥ÔºöÂºïÁî®ËØ≠‰πâ</strong></p>
<p>Áî±Âõõ‰∫∫ÁªÑÔºàGang of FourÔºâÊî∂ÈõÜÂπ∂Âú®‰ªñ‰ª¨ÁöÑ‰π¶‰∏≠‰ªãÁªçÁöÑ<strong>ËÆæËÆ°Ê®°Âºè</strong>ÊòØ‰Ωú‰∏∫<strong>Èù¢ÂêëÂØπË±°ËÆæËÆ°Ê®°Âºè</strong>ÂºïÂÖ•ÁöÑ„ÄÇ</p>
<p>‰ªñ‰ª¨‰π¶‰∏≠ÊèèËø∞ÁöÑ<strong>23ÁßçËÆæËÆ°Ê®°Âºè</strong>Âá†‰πéÈÉΩ‰ΩøÁî®Ëá≥Â∞ë‰∏Ä‰∏™<strong>ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ</strong>ÔºåÂõ†Ê≠§Áâ¢Áâ¢ÊâéÊ†π‰∫é<strong>Èù¢ÂêëÂØπË±°ÁºñÁ®ãÈ¢ÜÂüü</strong>„ÄÇ</p>
<p><strong>Ê®°Êùø</strong>‰Ωú‰∏∫ÊòæËÄåÊòìËßÅÁöÑÁ¨¨‰∫åÈÄâÊã©ÔºåÂú®GoFÁöÑ‰π¶‰∏≠Âπ∂Ê≤°ÊúâÊâÆÊºî‰ªª‰ΩïËßíËâ≤ÔºåËøôÁßç<strong>Á∫ØÁ≤πÁöÑÈù¢ÂêëÂØπË±°È£éÊ†º</strong>Â∞±ÊòØÊàëÊâÄÁß∞ÁöÑ<strong>GoFÈ£éÊ†º</strong>„ÄÇ</p>
<p>‰ªé‰ªäÂ§©ÁöÑËßÜËßíÊù•ÁúãÔºåËøôÁßçÈ£éÊ†ºÂèØËÉΩÊòæÂæóËÄÅÊóß„ÄÅËøáÊó∂Ôºå‰ΩÜÊàë‰ª¨ÈúÄË¶ÅËÆ∞‰ΩèËøôÊú¨‰π¶ÊòØÂú®1994Âπ¥10ÊúàÂèëÂ∏ÉÁöÑ„ÄÇÈÇ£Êó∂ÔºåÊ®°ÊùøÂèØËÉΩÂ∑≤ÁªèÊòØËØ≠Ë®ÄÁöÑ‰∏ÄÈÉ®ÂàÜÔºàËá≥Â∞ëÂú®„ÄäÊ≥®ÈáäÂèÇËÄÉÊâãÂÜå„Äã(ARM)‰∏≠ÊúâÊ≠£ÂºèÊèèËø∞ÔºâÔºå‰ΩÜÊàë‰ª¨ËøòÊ≤°Êúâ‰∏éÊ®°ÊùøÁõ∏ÂÖ≥ÁöÑÊÉØÁî®Ê≥ïÔºåC++‰ªçÁÑ∂ÊôÆÈÅçË¢´ËßÜ‰∏∫‰∏ÄÁßçÈù¢ÂêëÂØπË±°ÁöÑÁºñÁ®ãËØ≠Ë®Ä„ÄÇÂõ†Ê≠§Ôºå‰ΩøÁî®C++ÁöÑÂ∏∏ËßÅÊñπÂºèÊòØ‰∏ªË¶Å‰ΩøÁî®ÁªßÊâø„ÄÇ</p>
<p>‰ªäÂ§©Êàë‰ª¨Áü•ÈÅìÔºå<strong>GoFÈ£éÊ†ºÂ≠òÂú®‰∏Ä‰∫õÁº∫ÁÇπ</strong>„ÄÇÂÖ∂‰∏≠ÊúÄÈáçË¶Å‰∏îÈÄöÂ∏∏Ë¢´ÊèêÂà∞ÊúÄÂ§öÁöÑÊòØ<strong>ÊÄßËÉΩÈóÆÈ¢ò</strong>Ôºö</p>
<ul>
<li>ËôöÂáΩÊï∞Â¢ûÂä†‰∫ÜËøêË°åÊó∂ÂºÄÈîÄÔºåÂπ∂ÂáèÂ∞ë‰∫ÜÁºñËØëÂô®‰ºòÂåñÁöÑÊú∫‰ºö„ÄÇ</li>
<li>Â∞èÂûãÂ§öÊÄÅÂØπË±°ÁöÑÂ§öÊ¨°ÂàÜÈÖçÊ∂àËÄóÈ¢ùÂ§ñÁöÑËøêË°åÊó∂Èó¥ÔºåÂØºËá¥ÂÜÖÂ≠òÁ¢éÁâáÂåñÔºåÂπ∂ÂØºËá¥ÁºìÂ≠ò‰ΩøÁî®‰∏ç‰Ω≥„ÄÇ</li>
<li>Êï∞ÊçÆÁöÑÊéíÂàóÊñπÂºèÈÄöÂ∏∏‰∏çÂà©‰∫éÊï∞ÊçÆËÆøÈóÆÊñπÊ°à„ÄÇ</li>
</ul>
<p><strong>ÊÄßËÉΩ</strong>Á°ÆÂÆû‰∏çÊòØ<strong>GoFÈ£éÊ†º</strong>ÁöÑÂº∫È°π„ÄÇ‰∏çËøõË°åÂÖ®Èù¢ËÆ®ËÆ∫ÊâÄÊúâÂèØËÉΩÁöÑGoFÈ£éÊ†ºÁöÑ‰∏çË∂≥‰πãÂ§ÑÔºåËÆ©Êàë‰ª¨ÂÖ≥Ê≥®Âè¶‰∏Ä‰∏™ÊàëËÆ§‰∏∫ÁâπÂà´ÊúâË∂£ÁöÑÁº∫ÁÇπÔºö<strong>GoFÈ£éÊ†º</strong>Â±û‰∫éÊàë‰ª¨‰ªäÂ§©ÊâÄËØ¥ÁöÑ<strong>ÂºïÁî®ËØ≠‰πâ</strong>ÔºàÊúâÊó∂‰πüÁß∞‰∏∫ÊåáÈíàËØ≠‰πâÔºâ„ÄÇ</p>
<p>ËøôÁßçÈ£éÊ†ºÂõ†ÂÖ∂‰∏ªË¶Å‰ΩøÁî®<strong>ÊåáÈíà</strong>Âíå<strong>ÂºïÁî®</strong>Êù•ÂëΩÂêç„ÄÇ</p>
<p>‰∏∫‰∫ÜÂ±ïÁ§∫ÊúØËØ≠<strong>ÂºïÁî®ËØ≠‰πâ</strong>ÁöÑÂê´‰πâÂèäÂÖ∂ÈÄöÂ∏∏Â∏¶ÊúâÁöÑË¥üÈù¢Âê´‰πâÔºåËÆ©Êàë‰ª¨Áúã‰∏Ä‰∏ã‰ª•‰∏ã‰ΩøÁî®C++20 <code>std::span</code> Á±ªÊ®°ÊùøÁöÑ‰ª£Á†ÅÁ§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;span&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">s</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; (&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="nl">i</span> <span class="p">:</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39; &#39;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; )</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span> <span class="p">};</span>   
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">w</span><span class="p">{</span> <span class="n">v</span> <span class="p">};</span>   
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">s</span><span class="p">{</span> <span class="n">v</span> <span class="p">};</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">w</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99</span><span class="p">;</span>  <span class="c1">// ÁºñËØëÈîôËØØÔºÅ   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99</span><span class="p">;</span>  <span class="c1">// ÊàêÂäüÔºÅ  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ËæìÂá∫ ( 1 2 99 4 ); 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">print</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">v</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span> <span class="p">};</span>   
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99</span><span class="p">;</span>  <span class="c1">// ÊàêÂäüÔºÅ   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ËæìÂá∫ ? 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">print</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>print()</code> ÂáΩÊï∞Â±ïÁ§∫‰∫Ü <code>std::span</code> ÁöÑÁî®ÈÄî„ÄÇ<code>std::span</code> Á±ªÊ®°ÊùøË°®Á§∫Êï∞ÁªÑÁöÑÊäΩË±°„ÄÇ</p>
<p><code>print()</code> ÂáΩÊï∞ÂèØ‰ª•‰∏é‰ªª‰ΩïÁ±ªÂûãÁöÑÊï∞ÁªÑÔºàÂÜÖÁΩÆÊï∞ÁªÑ„ÄÅ<code>std::array</code>„ÄÅ<code>std::vector</code> Á≠âÔºâ‰∏ÄËµ∑‰ΩøÁî®Ôºå<br/>ËÄå‰∏çËÄ¶ÂêàÂà∞‰ªª‰ΩïÁâπÂÆöÁ±ªÂûãÁöÑÊï∞ÁªÑ„ÄÇ</p>
<p>Âú®ÂÖ∑ÊúâÂä®ÊÄÅËåÉÂõ¥ÁöÑ <code>std::span</code> Á§∫‰æã‰∏≠ÔºàÊ≤°ÊúâÁ¨¨‰∫å‰∏™Ê®°ÊùøÂèÇÊï∞Ë°®Á§∫Êï∞ÁªÑÂ§ßÂ∞èÔºâÔºåÂÖ∏ÂûãÁöÑ <code>std::span</code> ÂÆûÁé∞ÂåÖÂê´‰∏§‰∏™Êï∞ÊçÆÊàêÂëòÔºö<strong>ÊåáÂêëÊï∞ÁªÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊåáÈíà Âíå Êï∞ÁªÑÁöÑÂ§ßÂ∞è</strong>„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå<code>std::span</code> ÂæàÂÆπÊòìÂ§çÂà∂ÔºåÈÄöÂ∏∏ÊåâÂÄº‰º†ÈÄí„ÄÇÈô§Ê≠§‰πãÂ§ñÔºå<code>print()</code> Âè™ÊòØÈÅçÂéÜ <code>std::span</code> ÁöÑÂÖÉÁ¥†ÔºàÂú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠ÊòØÊï¥Êï∞ÔºâÂπ∂ÈÄöËøá <code>std::cout</code> ÊâìÂç∞ÂÆÉ‰ª¨„ÄÇ</p>
<p>Âú® <code>main()</code> ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨È¶ñÂÖàÂàõÂª∫ <code>std::vector&lt;int&gt;</code> v Âπ∂Á´ãÂç≥Â°´ÂÖÖÊï¥Êï∞ 1„ÄÅ2„ÄÅ3 Âíå 4„ÄÇ<br/>ÁÑ∂ÂêéÊàë‰ª¨ÂàõÂª∫Âè¶‰∏Ä‰∏™ <code>std::vector</code> <strong>w</strong> ‰Ωú‰∏∫ <strong>v</strong> ÁöÑÂâØÊú¨ Âíå <code>std::span</code> <strong>s</strong>„ÄÇ</p>
<p><strong>w</strong> Âíå <strong>s</strong> ÈÉΩË¢´Â£∞Êòé‰∏∫ <code>const</code>ÔºåÁ¥ßÊé•ÁùÄÔºåÊàë‰ª¨Â∞ùËØï‰øÆÊîπ <strong>w</strong> Âíå <strong>s</strong> Âú®Á¥¢Âºï 2 Â§ÑÁöÑÂÄº„ÄÇ<br/>Â∞ùËØïÊõ¥Êîπ w Â§±Ë¥•Âπ∂Âá∫Áé∞ÁºñËØëÈîôËØØÔºöw Ë¢´Â£∞Êòé‰∏∫ <code>const</code>ÔºåÂõ†Ê≠§Êó†Ê≥ïÊõ¥ÊîπÂåÖÂê´ÁöÑÂÖÉÁ¥†„ÄÇ<br/>ÁÑ∂ËÄåÔºåÂ∞ùËØïÊõ¥Êîπ s ÂàôÊàêÂäü„ÄÇÂ∞ΩÁÆ° s Ë¢´Â£∞Êòé‰∏∫ <code>const</code>Ôºå‰πü‰∏ç‰ºöÂá∫Áé∞ÁºñËØëÈîôËØØ„ÄÇ</p>
<p>ÂéüÂõ†ÊòØÔºö <strong>s</strong> ‰∏çÊòØ <strong>v</strong> ÁöÑÂâØÊú¨Ôºå‰∏ç‰ª£Ë°®‰∏Ä‰∏™ÂÄº„ÄÇÁõ∏ÂèçÔºåÂÆÉ‰ª£Ë°®ÂØπ v ÁöÑÂºïÁî®„ÄÇ<br/>ÂÆÉÂÆûÈôÖ‰∏äÂÖÖÂΩìÊåáÂêë v Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊåáÈíà„ÄÇÂõ†Ê≠§Ôºå<code>const</code> ÈôêÂÆöÁ¨¶Âú®ËØ≠‰πâ‰∏äÁ≠âÂêå‰∫éÂ£∞ÊòéÊåáÈíà <code>const</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">s</span><span class="p">{</span> <span class="n">v</span> <span class="p">};</span>  <span class="c1">// s ‰Ωú‰∏∫ÊåáÂêë v Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊåáÈíà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span><span class="o">*</span> <span class="k">const</span> <span class="n">ptr</span><span class="p">{</span> <span class="n">v</span><span class="p">.</span><span class="n">data</span><span class="p">()</span> <span class="p">};</span>   <span class="c1">// Á≠âÊïàËØ≠‰πâ
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËôΩÁÑ∂ÊåáÈíà <code>ptr</code> ‰∏çËÉΩË¢´ÊîπÂèòÔºåÂπ∂‰∏îÂú®ÂÖ∂ÁîüÂëΩÂë®ÊúüÂÜÖÂ∞ÜÂßãÁªàÊåáÂêë v ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†Ôºå‰ΩÜÂºïÁî®ÁöÑÊï¥Êï∞ÂèØ‰ª•ËΩªÊùæ‰øÆÊîπ„ÄÇ<br/>Ë¶ÅÈò≤Ê≠¢ÂØπÊï¥Êï∞ËøõË°åËµãÂÄºÔºåÈúÄË¶Å‰∏∫ <code>int</code> Ê∑ªÂä†È¢ùÂ§ñÁöÑ <code>const</code> ÈôêÂÆöÁ¨¶Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="kt">int</span> <span class="k">const</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">s</span><span class="p">{</span><span class="n">v</span><span class="p">};</span>   <span class="c1">// s Ë°®Á§∫ÊåáÂêëÂ∏∏ÈáèÊï¥Êï∞ÁöÑÂ∏∏ÈáèÊåáÈíà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="k">const</span><span class="o">*</span> <span class="k">const</span> <span class="n">ptr</span><span class="p">{</span> <span class="n">v</span><span class="p">.</span><span class="n">data</span><span class="p">()</span> <span class="p">};</span>  <span class="c1">// Á≠âÊïàËØ≠‰πâ
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫éÊåáÈíàÂíå <code>std::span</code> ÁöÑËØ≠‰πâÊòØÁ≠â‰ª∑ÁöÑÔºå<code>std::span</code> ÊòæÁÑ∂Â±û‰∫éÂºïÁî®ËØ≠‰πâÁöÑËåÉÁï¥„ÄÇËøôÂ∏¶Êù•‰∫Ü‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÈ£éÈô©ÔºåÂ¶Ç <code>main()</code> ÂáΩÊï∞Ââ©‰ΩôÈÉ®ÂàÜÊâÄÁ§∫„ÄÇ‰∏ã‰∏ÄÊ≠•ÔºåÊàë‰ª¨ÊâìÂç∞ s ÂºïÁî®ÁöÑÂÖÉÁ¥†„ÄÇÊ≥®ÊÑèÔºå‰Ω†‰πüÂèØ‰ª•Áõ¥Êé•‰º†ÈÄíÂêëÈáè vÔºåÂõ†‰∏∫ <code>std::span</code> Êèê‰æõ‰∫ÜÂøÖË¶ÅÁöÑËΩ¨Êç¢ÊûÑÈÄ†ÂáΩÊï∞Êù•Êé•Âèó <code>std::vector</code>„ÄÇ<code>print()</code> ÂáΩÊï∞Â∞ÜÊ≠£Á°ÆËæìÂá∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="p">(</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">99</span> <span class="mi">4</span> <span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âõ†‰∏∫Êàë‰ª¨ÂèØ‰ª•ÔºàÂπ∂‰∏îÁé∞Âú®Êï∞Â≠ó 1 Âà∞ 4 ÂèØËÉΩÂê¨Ëµ∑Êù•ÊúâÁÇπÊó†ËÅäÔºâÔºåÊàë‰ª¨Áé∞Âú®Â∞Ü‰∏ÄÁªÑÊñ∞Êï∞Â≠óËµãÁªôÂêëÈáè v„ÄÇËØöÁÑ∂ÔºåÈÄâÊã© 5„ÄÅ6„ÄÅ7„ÄÅ8 Âíå 9 Êó¢‰∏çÁâπÂà´ÊúâÂàõÊÑè‰πü‰∏çÊúâË∂£Ôºå‰ΩÜÂÆÉ‰ºöËææÂà∞ÁõÆÁöÑ„ÄÇÁ¥ßÊé•ÁùÄÔºåÊàë‰ª¨ÂÜçÊ¨°ÈÄöËøá s ÂÜôÂÖ•Á¨¨‰∫å‰∏™Á¥¢ÂºïÂπ∂ÂÜçÊ¨°ÊâìÂç∞ s ÂºïÁî®ÁöÑÂÖÉÁ¥†„ÄÇÂΩìÁÑ∂ÔºåÊàë‰ª¨ÊúüÊúõËæìÂá∫ÊòØ <code>( 5 6 99 8 9 )</code>Ôºå‰ΩÜ‰∏çÂπ∏ÁöÑÊòØÂπ∂ÈùûÂ¶ÇÊ≠§„ÄÇÊàë‰ª¨ÂèØËÉΩ‰ºöÂæóÂà∞‰ª•‰∏ãËæìÂá∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="p">(</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">99</span> <span class="mi">4</span> <span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰πüËÆ∏‰Ω†‰ºöÂÆåÂÖ®ÈúáÊÉäÔºåÂπ∂Âõ†Ê≠§Â§öÂá∫Âá†Ê†πÁôΩÂèëÔºå‰πüËÆ∏‰Ω†‰ºöÊÑüÂà∞ÊÉäËÆ∂ÔºåÊàñËÄÖ‰Ω†‰ºöÂøÉÁü•ËÇöÊòéÂú∞ÂæÆÁ¨ëÂπ∂ÁÇπÂ§¥ÔºöÊòØÁöÑÔºåÂΩìÁÑ∂ÔºåÊú™ÂÆö‰πâË°å‰∏∫ÔºÅ</p>
<p>ÂΩìÊàë‰ª¨Â∞ÜÊñ∞ÂÄºËµãÁªô <code>std::vector</code> <strong>v</strong> Êó∂ÔºåÊàë‰ª¨‰∏ç‰ªÖÊîπÂèò‰∫ÜÂÄºÔºåËøòÊîπÂèò‰∫ÜÂêëÈáèÁöÑÂ§ßÂ∞è„ÄÇ<br/>ÂéüÊú¨Â≠òÂÇ®Âõõ‰∏™ÂÄºÁöÑÂêëÈáèÁé∞Âú®ÈúÄË¶ÅÂ≠òÂÇ®‰∫î‰∏™ÂÖÉÁ¥†ÔºåÂõ†Ê≠§ÔºåÂêëÈáèÂèØËÉΩËøõË°å‰∫ÜÈáçÊñ∞ÂàÜÈÖçÔºå‰ªéËÄåÊîπÂèò‰∫ÜÂÖ∂Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂú∞ÂùÄ„ÄÇ<br/>‰∏çÂπ∏ÁöÑÊòØÔºå<code>std::span</code> <strong>s</strong> Ê≤°ÊúâÊî∂Âà∞ÈÄöÁü•ÔºåÂπ∂‰∏î‰ªçÁÑ∂Á¥ßÁ¥ßÊåÅÊúâÊóßÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂú∞ÂùÄ„ÄÇ<br/>Âõ†Ê≠§ÔºåÂΩìÊàë‰ª¨Â∞ùËØïÈÄöËøá s Âêë v ÂÜôÂÖ•Êó∂ÔºåÊàë‰ª¨Âπ∂‰∏çÊòØÂÜôÂÖ•ÂΩìÂâçÁöÑ v Êï∞ÁªÑÔºåËÄåÊòØÂÜôÂÖ•‰∫Ü‰∏Ä‰∏™Â∑≤ÁªèË¢´‰∏¢ÂºÉÁöÑÂÜÖÂ≠òÂå∫ÂüüÔºåËØ•Âå∫ÂüüÊõæÁªèÊòØ v ÁöÑÂÜÖÈÉ®Êï∞ÁªÑ„ÄÇËøôÊòØÂÖ∏ÂûãÁöÑÊú™ÂÆö‰πâË°å‰∏∫Ôºå‰πüÊòØÂºïÁî®ËØ≠‰πâÁöÑÁªèÂÖ∏ÈóÆÈ¢ò„ÄÇ</p>
<p>‚ÄúÂòøÔºå‰Ω†ÊòØ‰∏çÊòØÂú®ËØïÂõæËØãÊØÅ <code>std::span</code>Ôºü‚Äù‰Ω†ÈóÆ„ÄÇ‰∏çÔºåÊàëÂπ∂‰∏çÊòØÂú®ÊöóÁ§∫ <code>std::span</code> Âíå <code>std::string_view</code> ÊòØ‰∏çÂ•ΩÁöÑ„ÄÇ</p>
<p>Áõ∏ÂèçÔºåÊàëÂÆûÈôÖ‰∏äÈùûÂ∏∏ÂñúÊ¨¢Ëøô‰∏§‰∏™Â∑•ÂÖ∑ÔºåÂõ†‰∏∫ÂÆÉ‰ª¨Êèê‰æõ‰∫ÜÈùûÂ∏∏ÁÆÄÂçï‰∏îÂªâ‰ª∑ÁöÑÊäΩË±°ÔºåÂàÜÂà´Áî®‰∫éÂêÑÁßçÊï∞ÁªÑÂíåÂ≠óÁ¨¶‰∏≤„ÄÇ<br/>ÁÑ∂ËÄåÔºåËØ∑ËÆ∞‰ΩèÊØè‰∏™Â∑•ÂÖ∑ÈÉΩÊúâÂÖ∂‰ºòÁº∫ÁÇπ„ÄÇÂΩìÊàë‰ΩøÁî®ÂÆÉ‰ª¨Êó∂ÔºåÊàë‰ºöÊúâÊÑèËØÜÂú∞‰ΩøÁî®ÂÆÉ‰ª¨ÔºåÂÆåÂÖ®ÊÑèËØÜÂà∞‰ªª‰ΩïÈùûÊã•ÊúâÂºïÁî®Á±ªÂûãÈÉΩÈúÄË¶Å‰ªîÁªÜÊ≥®ÊÑèÂÖ∂ÊâÄÂºïÁî®ÂÄºÁöÑÁîüÂëΩÂë®Êúü„ÄÇ‰æãÂ¶ÇÔºåËôΩÁÑ∂ÊàëËÆ§‰∏∫ÂÆÉ‰ª¨‰Ωú‰∏∫ÂáΩÊï∞ÂèÇÊï∞ÈùûÂ∏∏ÊúâÁî®Ôºå‰ΩÜÊàëÂÄæÂêë‰∫é‰∏çÂú®Êï∞ÊçÆÊàêÂëò‰∏≠‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇÁîüÂëΩÂë®ÊúüÈóÆÈ¢òÁöÑÈ£éÈô©Â§™È´ò‰∫Ü„ÄÇ</p>
<p><strong>ÂºïÁî®ËØ≠‰πâÔºöÁ¨¨‰∫å‰∏™Á§∫‰æã</strong></p>
<p>‚ÄúÂΩìÁÑ∂ÔºåÊàëÁü•ÈÅìËøô‰∏ÄÁÇπÔºå‚Äù‰Ω†‰∫âËæ©ÈÅì„ÄÇ‚ÄúÊàë‰πü‰∏ç‰ºöÈïøÊó∂Èó¥Â≠òÂÇ® <code>std::span</code>„ÄÇÁÑ∂ËÄåÔºåÊàë‰ªçÁÑ∂‰∏çÁõ∏‰ø°ÂºïÁî®ÂíåÊåáÈíàÊòØ‰∏™ÈóÆÈ¢ò„ÄÇ‚Äù Â•ΩÁöÑÔºåÂ¶ÇÊûúÁ¨¨‰∏Ä‰∏™‰æãÂ≠êËøò‰∏çË∂≥‰ª•ËÆ©‰Ω†ÈúáÊÉäÔºåÊàëËøòÊúâ‰∏Ä‰∏™Á¨¨‰∫å‰∏™‰æãÂ≠ê„ÄÇ</p>
<p>ËøôÊ¨°ÊàëÂ∞Ü‰ΩøÁî® STL ÁÆóÊ≥ï‰πã‰∏Ä <code>std::remove()</code>„ÄÇ<br/><code>std::remove()</code> ÁÆóÊ≥ïÊé•Âèó‰∏â‰∏™ÂèÇÊï∞Ôºö‰∏Ä‰∏™Áî®‰∫éÈÅçÂéÜ‰ª•ÁßªÈô§ÁâπÂÆöÂÄºÁöÑÊâÄÊúâÂÖÉÁ¥†ÁöÑËåÉÂõ¥ÁöÑËø≠‰ª£Âô®ÂØπÔºå‰ª•ÂèäÁ¨¨‰∏â‰∏™Ë°®Á§∫Ë¶ÅÁßªÈô§ÁöÑÂÄºÁöÑÂèÇÊï∞„ÄÇÁâπÂà´Ê≥®ÊÑèÔºåÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÊòØÈÄöËøáÂ∏∏ÈáèÂºïÁî®‰º†ÈÄíÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">ForwardIt</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">ForwardIt</span> <span class="n">remove</span><span class="p">(</span> <span class="n">ForwardIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">ForwardIt</span> <span class="n">last</span><span class="p">,</span> <span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">value</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËÆ©Êàë‰ª¨Êù•Áúã‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁ§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">vec</span><span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">9</span> <span class="p">};</span>  
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="k">const</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max_element</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">vec</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">vec</span><span class="p">));</span>   
</span></span><span class="line"><span class="cl"><span class="n">vec</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">remove</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">vec</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">vec</span><span class="p">),</span> <span class="o">*</span><span class="n">pos</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">vec</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨‰ªéÂàùÂßãÂåñ‰∫Ü‰∏Ä‰∫õÈöèÊú∫Êï∞Â≠óÁöÑ <code>std::vector</code> v ÂºÄÂßã„ÄÇ</p>
<p>Áé∞Âú®Êàë‰ª¨ÊÑüÂÖ¥Ë∂£ÁöÑÊòØÁßªÈô§ÂêëÈáè‰∏≠‰ª£Ë°®ÊúÄÂ§ßÂÄºÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇÂú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠ÔºåËøô‰∏™ÂÄºÊòØ 42ÔºåÂπ∂‰∏îÂú®ÂêëÈáè‰∏≠Âá∫Áé∞‰∫Ü‰∏§Ê¨°„ÄÇÊâßË°åÁßªÈô§ÁöÑÁ¨¨‰∏ÄÊ≠•ÊòØ‰ΩøÁî® <code>std::max_element()</code> ÁÆóÊ≥ïÁ°ÆÂÆöÊúÄÂ§ßÂÄº„ÄÇ<code>std::max_element()</code> ËøîÂõûÊåáÂêëÊúÄÂ§ßÂÄºÁöÑËø≠‰ª£Âô®„ÄÇÂ¶ÇÊûúËåÉÂõ¥ÂÜÖÊúâÂ§ö‰∏™ÂÖÉÁ¥†Á≠âÂêå‰∫éÊúÄÂ§ßÂÖÉÁ¥†ÔºåÂàôËøîÂõûÊåáÂêëÁ¨¨‰∏Ä‰∏™Ê≠§Á±ªÂÖÉÁ¥†ÁöÑËø≠‰ª£Âô®„ÄÇ</p>
<p>ÁßªÈô§ÊúÄÂ§ßÂÄºÁöÑÁ¨¨‰∫åÊ≠•ÊòØÂØπ <code>std::remove()</code> ÁöÑË∞ÉÁî®„ÄÇÊàë‰ª¨ÈÄöËøá <code>begin(vec)</code> Âíå <code>end(vec)</code> ‰º†ÈÄíÂÖÉÁ¥†ËåÉÂõ¥ÔºåÂπ∂ÈÄöËøáËß£ÂºïÁî® <code>pos</code> Ëø≠‰ª£Âô®‰º†ÈÄíÊúÄÂ§ßÂÄº„ÄÇÊúÄÂêéÔºåÊàë‰ª¨ÈÄöËøáË∞ÉÁî®ÊàêÂëòÂáΩÊï∞ <code>erase()</code> ÂÆåÊàêÊìç‰ΩúÔºöÊàë‰ª¨Âà†Èô§Áî± <code>std::remove()</code> ÁÆóÊ≥ïËøîÂõûÁöÑ‰ΩçÁΩÆÂà∞ÂêëÈáèÊú´Â∞æ‰πãÈó¥ÁöÑÊâÄÊúâÂÄº„ÄÇËøô‰∏ÄÁ≥ªÂàóÊìç‰ΩúÈÄöÂ∏∏Ë¢´Áß∞‰∏∫ erase-remove ÊÉØÁî®Ê≥ï„ÄÇ</p>
<p>Êàë‰ª¨ÊúüÊúõ‰ªéÂêëÈáè‰∏≠ÁßªÈô§‰∏§‰∏™ 42ÔºåÂπ∂Âõ†Ê≠§ÊúüÊúõÂæóÂà∞‰ª•‰∏ãÁªìÊûúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="p">(</span> <span class="mi">1</span> <span class="o">-</span><span class="mi">3</span> <span class="mi">27</span> <span class="mi">4</span> <span class="o">-</span><span class="mi">8</span> <span class="mi">22</span> <span class="mi">37</span> <span class="mi">4</span> <span class="mi">18</span> <span class="mi">9</span> <span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏çÂπ∏ÁöÑÊòØÔºåËøô‰∏™ÊúüÊúõÂπ∂‰∏çÊàêÁ´ã„ÄÇÁõ∏ÂèçÔºåÂêëÈáèÁé∞Âú®ÂåÖÂê´‰ª•‰∏ãÂÄºÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">( 1 -3 27 4 -8 22 42 37 18 9 )
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ∑Ê≥®ÊÑèÔºåÂêëÈáè‰ªçÁÑ∂ÂåÖÂê´‰∏Ä‰∏™ 42Ôºå‰ΩÜÁé∞Âú®Áº∫Â∞ë‰∫Ü‰∏Ä‰∏™ 4„ÄÇËøôÁßçË°å‰∏∫‰∏çÂΩìÁöÑÊ†πÊú¨ÂéüÂõ†‰ªçÁÑ∂ÊòØÂºïÁî®ËØ≠‰πâÔºöÈÄöËøáÂ∞ÜËß£ÂºïÁî®ÁöÑËø≠‰ª£Âô®‰º†ÈÄíÁªô <code>remove()</code> ÁÆóÊ≥ïÔºåÊàë‰ª¨ÈöêÂºèÂú∞ÊåáÂÆö‰∫ÜËØ•‰ΩçÁΩÆÂ≠òÂÇ®ÁöÑÂÄºÂ∫îËØ•Ë¢´ÁßªÈô§„ÄÇÁÑ∂ËÄåÔºåÂú®ÁßªÈô§‰∫ÜÁ¨¨‰∏Ä‰∏™ 42 ÂêéÔºåËØ•‰ΩçÁΩÆÁé∞Âú®Â≠òÂÇ®ÁöÑÊòØÂÄº 4„ÄÇ<code>remove()</code> ÁÆóÊ≥ï‰ºöÁßªÈô§ÊâÄÊúâÂÄº‰∏∫ 4 ÁöÑÂÖÉÁ¥†„ÄÇÂõ†Ê≠§Ôºå‰∏ã‰∏Ä‰∏™Ë¢´ÁßªÈô§ÁöÑÂÄº‰∏çÊòØ‰∏ã‰∏Ä‰∏™ 42ÔºåËÄåÊòØ‰∏ã‰∏Ä‰∏™ 4Ôºå‰æùÊ≠§Á±ªÊé®„ÄÇ</p>
<p>‚ÄúÂ•ΩÁöÑÔºåÊàëÊòéÁôΩ‰∫ÜÔºÅ‰ΩÜËøô‰∏™ÈóÆÈ¢òÂ∑≤ÁªèÊàê‰∏∫ÂéÜÂè≤‰∫ÜÔºÅ‰ªäÂ§©ÔºåÊàë‰ª¨‰∏çÂÜç‰ΩøÁî® erase-remove ÊÉØÁî®Ê≥ï‰∫Ü„ÄÇC++20 Áªà‰∫é‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜËá™Áî±ÁöÑ <code>std::erase()</code> ÂáΩÊï∞ÔºÅ‚Äù ÊàëÂ∏åÊúõÂêåÊÑèËøô‰∏™ËØ¥Ê≥ïÔºå‰ΩÜÈÅóÊÜæÁöÑÊòØÔºåÊàëÂè™ËÉΩÁ°ÆËÆ§ <code>std::erase()</code> ÂáΩÊï∞ÁöÑÂ≠òÂú®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Alloc</span><span class="p">,</span> <span class="k">typename</span> <span class="n">U</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">Alloc</span><span class="o">&gt;::</span><span class="n">size_type</span> 
</span></span><span class="line"><span class="cl"><span class="n">erase</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">Alloc</span><span class="o">&gt;&amp;</span> <span class="n">c</span><span class="p">,</span> <span class="n">U</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">value</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>std::erase()</code> ÂáΩÊï∞‰πüÈÄöËøáÂ∏∏ÈáèÂºïÁî®‰º†ÈÄíÂÖ∂Á¨¨‰∫å‰∏™ÂèÇÊï∞ÔºåÂç≥Ë¶ÅÁßªÈô§ÁöÑÂÄº„ÄÇÂõ†Ê≠§ÔºåÊàëÂàöÊâçÊèèËø∞ÁöÑÈóÆÈ¢ò‰ªçÁÑ∂Â≠òÂú®„ÄÇËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÁöÑÂîØ‰∏ÄÊñπÊ≥ïÊòØÊòæÂºèÂú∞Á°ÆÂÆöÊúÄÂ§ßÂÖÉÁ¥†Âπ∂Â∞ÜÂÖ∂‰º†ÈÄíÁªô <code>std::remove()</code> ÁÆóÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">vec</span><span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">9</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="k">const</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max_element</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">vec</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">vec</span><span class="p">));</span> 
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="k">const</span> <span class="n">greatest</span> <span class="o">=</span> <span class="o">*</span><span class="n">pos</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="n">vec</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">remove</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">vec</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">vec</span><span class="p">),</span> <span class="n">greatest</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">vec</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚Äú‰Ω†ÊòØ‰∏çÊòØÂú®ËÆ§ÁúüÂª∫ËÆÆÊàë‰ª¨‰∏çË¶ÅÂÜç‰ΩøÁî®<strong>ÂºïÁî®ÂèÇÊï∞</strong>‰∫ÜÔºü‚Äù ‰∏çÔºåÁªùÂØπ‰∏çÊòØÔºÅÂΩìÁÑ∂‰Ω†Â∫îËØ•‰ΩøÁî®ÂºïÁî®ÂèÇÊï∞Ôºå‰æãÂ¶ÇÂá∫‰∫éÊÄßËÉΩËÄÉËôë„ÄÇ<br/>ÁÑ∂ËÄåÔºåÊàëÂ∏åÊúõÂºïËµ∑‰∏ÄÂÆöÁöÑÊÑèËØÜÔºåÂ∏åÊúõ‰Ω†Áé∞Âú®ÁêÜËß£‰∫ÜÈóÆÈ¢òÊâÄÂú®ÔºöÂºïÁî®ÔºåÂ∞§ÂÖ∂ÊòØ<strong>ÊåáÈíà</strong>ÔºåËÆ©Êàë‰ª¨ÁöÑÁîüÊ¥ªÂèòÂæóÂ§çÊùÇÂæóÂ§öÔºåÁêÜËß£‰ª£Á†ÅÂèòÂæóÊõ¥Âä†Âõ∞ÈöæÔºåÂõ†Ê≠§Êõ¥ÂÆπÊòìÂú®‰ª£Á†Å‰∏≠ÂºïÂÖ•ÈîôËØØ„ÄÇ<br/>ÁâπÂà´ÊòØÊåáÈíàÂºïÂèë‰∫ÜÂæàÂ§öÈóÆÈ¢òÔºöÂÆÉÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑÊåáÈíàËøòÊòØ <code>nullptr</code>ÔºüË∞ÅÊã•ÊúâÊåáÈíàËÉåÂêéÁöÑËµÑÊ∫êÂπ∂ÁÆ°ÁêÜÂÖ∂ÁîüÂëΩÂë®ÊúüÔºüÂΩìÁÑ∂ÔºåÁî±‰∫éÊàë‰ª¨Êâ©Â±ï‰∫ÜÂ∑•ÂÖ∑ÁÆ±Âπ∂Êã•Êúâ‰∫Ü<strong>Êô∫ËÉΩÊåáÈíà</strong>ÔºåÁîüÂëΩÂë®ÊúüÈóÆÈ¢ò‰∏çÂÜçÊòØÂ§ßÈóÆÈ¢ò„ÄÇ<br/>Ê≠£Â¶ÇÊ†∏ÂøÉÊåáÂçó R.3 Ê∏ÖÊ•öÊåáÂá∫ÁöÑÈÇ£Ê†∑Ôºö<strong>ÂéüÂßãÊåáÈíà</strong>Ôºà<code>T*</code>ÔºâÊòØÈùûÊã•ÊúâÁöÑ„ÄÇ</p>
<p>ÁªìÂêàÁü•ÈÅì<strong>Êô∫ËÉΩÊåáÈíà</strong>ÊâøÊãÖ‰∫ÜÊâÄÊúâÊùÉÁöÑË¥£‰ªªÔºåËøôÂ§ßÂ§ßÊ∏ÖÁêÜ‰∫ÜÊåáÈíàÁöÑËØ≠‰πâ„ÄÇ<br/>‰ΩÜÊòØÔºåÂ∞ΩÁÆ°<strong>Êô∫ËÉΩÊåáÈíà</strong>ÂΩìÁÑ∂ÊòØÈùûÂ∏∏Êúâ‰ª∑ÂÄºÁöÑÂ∑•ÂÖ∑ÔºåÂπ∂‰∏îÂõ†ÂÖ∂‰ºòÁÇπËÄåË¢´Ë™â‰∏∫‚ÄúÁé∞‰ª£ C++‚ÄùÁöÑÈáçÂ§ßÊàêÂ∞±ÔºåÂÆÉ‰ª¨ÊúÄÁªàÂè™ÊòØ‰øÆË°•ÂºïÁî®ËØ≠‰πâÂú®Êàë‰ª¨Êé®ÁêÜ‰ª£Á†ÅËÉΩÂäõ‰∏äÊíïÂºÄÁöÑÊºèÊ¥û„ÄÇ<br/>ÊòØÁöÑÔºåÂºïÁî®ËØ≠‰πâ‰ΩøÁêÜËß£‰ª£Á†ÅÂíåÊé®ÁêÜÈáçË¶ÅÁªÜËäÇÂèòÂæóÊõ¥Âä†Âõ∞ÈöæÔºåÂõ†Ê≠§ÊòØÊàë‰ª¨Â∏åÊúõÈÅøÂÖçÁöÑ‰∏úË•ø„ÄÇ</p>
<p><strong>Áé∞‰ª£C++Âì≤Â≠¶ÔºöÂÄºËØ≠‰πâ</strong></p>
<p>‚Äú‰ΩÜÊòØÁ≠âÁ≠âÔºå‚ÄùÊàëËÉΩÂê¨Âà∞‰Ω†ÂèçÈ©≥Ôºå‚ÄúÊàë‰ª¨ËøòÊúâ‰ªÄ‰πàÂÖ∂‰ªñÈÄâÊã©ÔºüÊàë‰ª¨Â∫îËØ•ÊÄé‰πàÂÅöÔºüÊàë‰ª¨Â¶Ç‰ΩïÂ§ÑÁêÜÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÔºüÊàë‰ª¨‰∏çËÉΩÈÅøÂÖç‰ΩøÁî®ÊåáÈíàÔºåÂØπÂêßÔºü‚Äù Â¶ÇÊûú‰Ω†ÊúâÁ±ª‰ººÁöÑÊÉ≥Ê≥ïÔºåÈÇ£‰πàÊàëÊúâ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁöÑÊ∂àÊÅØÂëäËØâ‰Ω†ÔºöÊòØÁöÑÔºåÊúâÊõ¥Â•ΩÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>Ëøô‰∏™Ëß£ÂÜ≥ÊñπÊ°à‰Ωø‰Ω†ÁöÑ‰ª£Á†ÅÊõ¥ÂÆπÊòìÁêÜËß£„ÄÅÊé®ÁêÜÔºåÂπ∂‰∏îÂèØËÉΩÂØπÊÄßËÉΩ‰∫ßÁîüÁßØÊûÅÂΩ±ÂìçÔºàËøòËÆ∞ÂæóÊàë‰ª¨ËÆ®ËÆ∫ËøáÁöÑÂºïÁî®ËØ≠‰πâÁöÑË¥üÈù¢ÊÄßËÉΩÂΩ±ÂìçÔºâ„ÄÇËøô‰∏™Ëß£ÂÜ≥ÊñπÊ°àÂ∞±ÊòØÂÄºËØ≠‰πâ„ÄÇ</p>
<p>ÂÄºËØ≠‰πâÂú®C++‰∏≠Âπ∂‰∏çÊòØÊñ∞È≤ú‰∫ãÁâ©„ÄÇËøô‰∏™ÊÉ≥Ê≥ïÂ∑≤ÁªèÊòØÂéüÂßãSTLÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇËÆ©Êàë‰ª¨ËÄÉËôëÊúÄËëóÂêçÁöÑSTLÂÆπÂô®‰πã‰∏Ä <code>std::vector</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v1</span><span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">v2</span><span class="p">{</span> <span class="n">v1</span> <span class="p">};</span>  
</span></span><span class="line"><span class="cl"><span class="n">assert</span><span class="p">(</span> <span class="n">v1</span> <span class="o">==</span> <span class="n">v2</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl"><span class="n">assert</span><span class="p">(</span> <span class="n">v1</span><span class="p">.</span><span class="n">data</span><span class="p">()</span> <span class="o">!=</span> <span class="n">v2</span><span class="p">.</span><span class="n">data</span><span class="p">()</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl"><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="n">assert</span><span class="p">(</span> <span class="n">v1</span> <span class="o">!=</span> <span class="n">v2</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="k">const</span> <span class="n">v3</span><span class="p">{</span> <span class="n">v1</span> <span class="p">};</span>   
</span></span><span class="line"><span class="cl"><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99</span><span class="p">;</span>  <span class="c1">// ÁºñËØëÈîôËØØ!
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨‰ªé‰∏Ä‰∏™Âêç‰∏∫ <code>v1</code> ÁöÑ <code>std::vector</code> ÂºÄÂßãÔºåÂåÖÂê´‰∫î‰∏™Êï¥Êï∞„ÄÇÊé•‰∏ãÊù•ÔºåÊàë‰ª¨ÂàõÂª∫ <code>v1</code> ÁöÑÂâØÊú¨ÔºåÁß∞‰∏∫ <code>v2</code>„ÄÇÂêëÈáè <code>v2</code> ÊòØ‰∏Ä‰∏™ÁúüÊ≠£ÁöÑÂâØÊú¨ÔºåÊúâÊó∂‰πüÁß∞‰∏∫Ê∑±Êã∑Ë¥ùÔºåÂÆÉÁé∞Âú®Êã•ÊúâËá™Â∑±ÁöÑÂÜÖÂ≠òÂùóÂíåÊï¥Êï∞Ôºå‰∏çÂºïÁî® <code>v1</code> ‰∏≠ÁöÑÊï¥Êï∞„ÄÇÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÊØîËæÉ‰∏§‰∏™ÂêëÈáèÊù•È™åËØÅËøô‰∏ÄÁÇπÔºàÂÆÉ‰ª¨Ë¢´ËØÅÊòéÊòØÁõ∏Á≠âÁöÑÔºâÔºå‰ΩÜÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂú∞ÂùÄ‰∏çÂêå„ÄÇ‰øÆÊîπ <code>v2</code> ‰∏≠ÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†‰ºöÂØºËá¥‰∏§‰∏™ÂêëÈáè‰∏çÂÜçÁõ∏Á≠â„ÄÇÊòØÁöÑÔºå‰∏§‰∏™ÂêëÈáèÈÉΩÊúâËá™Â∑±ÁöÑÊï∞ÁªÑÔºåÂÆÉ‰ª¨‰∏çÂÖ±‰∫´ÂÜÖÂÆπÔºåÂç≥‰∏çËØïÂõæ‚Äú‰ºòÂåñ‚ÄùÂ§çÂà∂Êìç‰Ωú„ÄÇ</p>
<p>‰Ω†ÂèØËÉΩÂê¨ËØ¥Ëøá‰∏Ä‰∫õÊäÄÊúØÔºå‰æãÂ¶ÇÂÜôÊó∂Â§çÂà∂Ôºàcopy-on-writeÔºâ„ÄÇÁ°ÆÂÆûÔºåÂú®C++11‰πãÂâçÔºåËøôÊõæÊòØ <code>std::string</code> ÁöÑÂ∏∏ËßÅÂÆûÁé∞„ÄÇÁÑ∂ËÄåÔºåËá™C++11‰ª•Êù•ÔºåÁî±‰∫éC++Ê†áÂáÜ‰∏≠ÁöÑË¶ÅÊ±ÇÔºå<code>std::string</code> ‰∏çÂÜçÂÖÅËÆ∏‰ΩøÁî®ÂÜôÊó∂Â§çÂà∂„ÄÇÂéüÂõ†ÊòØËøôÁßç‚Äú‰ºòÂåñ‚ÄùÂú®‰∏Ä‰∏™Â§öÁ∫øÁ®ã‰∏ñÁïå‰∏≠ÂæàÂÆπÊòìÂèòÊàêÂä£Âåñ„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•Á°Æ‰ø°Â§çÂà∂ÊûÑÈÄ†‰ºöÂàõÂª∫‰∏Ä‰∏™ÁúüÊ≠£ÁöÑÂâØÊú¨„ÄÇ</p>
<p>ÊúÄÂêéÔºåÊàë‰ª¨ÂàõÂª∫Âè¶‰∏Ä‰∏™Âêç‰∏∫ <code>v3</code> ÁöÑÂâØÊú¨ÔºåÂπ∂Â∞ÜÂÖ∂Â£∞Êòé‰∏∫ <code>const</code>„ÄÇÂ¶ÇÊûúÊàë‰ª¨Â∞ùËØï‰øÆÊîπ <code>v3</code> ÁöÑÂÄºÔºåÂ∞Ü‰ºöÂæóÂà∞ÁºñËØëÈîôËØØ„ÄÇËøôË°®Êòé‰∏Ä‰∏™ <code>const</code> ÂêëÈáè‰∏ç‰ªÖÈò≤Ê≠¢Ê∑ªÂä†ÂíåÂà†Èô§ÂÖÉÁ¥†ÔºåËÄå‰∏îÊâÄÊúâÂÖÉÁ¥†‰πüË¢´ËßÜ‰∏∫ <code>const</code>„ÄÇ‰ªéËØ≠‰πâËßíÂ∫¶Êù•ÁúãÔºåËøôÊÑèÂë≥ÁùÄ <code>std::vector</code> Âíå‰ªª‰ΩïSTLÂÆπÂô®‰∏ÄÊ†∑ÔºåË¢´ËßÜ‰∏∫‰∏Ä‰∏™ÂÄº„ÄÇÊòØÁöÑÔºå‰∏Ä‰∏™ÂÄºÔºåÂ∞±ÂÉè‰∏Ä‰∏™ <code>int</code>„ÄÇÂ¶ÇÊûúÊàë‰ª¨Â§çÂà∂‰∏Ä‰∏™ÂÄºÔºåÊàë‰ª¨‰∏ç‰ºöÂè™Â§çÂà∂ÈÉ®ÂàÜÂÄºÔºåËÄåÊòØÊï¥‰∏™ÂÄº„ÄÇÂ¶ÇÊûúÊàë‰ª¨‰Ωø‰∏Ä‰∏™ÂÄº <code>const</code>ÔºåÂÆÉ‰∏ç‰ªÖ‰ªÖÊòØÈÉ®ÂàÜ <code>const</code>ÔºåËÄåÊòØÂÆåÂÖ® <code>const</code>„ÄÇËøôÂ∞±ÊòØÂÄºËØ≠‰πâÁöÑÂü∫Êú¨ÂéüÁêÜ„ÄÇÊàë‰ª¨Â∑≤ÁªèÁúãÂà∞‰∫Ü‰∏Ä‰∫õ‰ºòÁÇπÔºö‰∏éÊåáÈíàÂíåÂºïÁî®Áõ∏ÊØîÔºåÂÄºÊõ¥ÂÆπÊòìÊé®ÁêÜ„ÄÇ‰æãÂ¶ÇÔºåÊîπÂèò‰∏Ä‰∏™ÂÄº‰∏ç‰ºöÂΩ±ÂìçÂÖ∂‰ªñÂÄº„ÄÇÂèòÂåñÊòØÂ±ÄÈÉ®ÁöÑÔºåËÄå‰∏çÊòØÂèëÁîüÂú®Âà´Â§Ñ„ÄÇËøôÊòØ‰∏Ä‰∏™ÁºñËØëÂô®Áî®‰∫éÂÖ∂‰ºòÂåñÂ∑•‰ΩúÁöÑ‰ºòÂäø„ÄÇÊ≠§Â§ñÔºåÂÄº‰∏çÈúÄË¶ÅÊàë‰ª¨ËÄÉËôëÊâÄÊúâÊùÉÈóÆÈ¢ò„ÄÇÂÄºË¥üË¥£Ëá™Â∑±ÁöÑÂÜÖÂÆπ„ÄÇÂÄºËøò‰ΩøÂæóÊÄùËÄÉÁ∫øÁ®ãÈóÆÈ¢òÂèòÂæóÊõ¥Âä†ÂÆπÊòì„ÄÇËøôÂπ∂‰∏çÊÑèÂë≥ÁùÄÊ≤°ÊúâÈóÆÈ¢ò‰∫ÜÔºà‰Ω†Â∏åÊúõÂ¶ÇÊ≠§ÔºÅÔºâÔºå‰ΩÜ‰ª£Á†ÅËÇØÂÆöÊõ¥ÂÆπÊòìÁêÜËß£„ÄÇÂÄº‰∏ç‰ºöÁªôÊàë‰ª¨Áïô‰∏ãÂæàÂ§öÁñëÈóÆ„ÄÇ</p>
<p>‚ÄúÂ•ΩÁöÑÔºåÊàëÊòéÁôΩ‰∫Ü‰ª£Á†ÅÊ∏ÖÊô∞ÊÄßÁöÑË¶ÅÁÇπÔºå‚Äù‰Ω†‰∫âËæ©ÈÅìÔºå‚Äú‰ΩÜÊòØÂÖ≥‰∫éÊÄßËÉΩÂë¢ÔºüÈ¢ëÁπÅÂ§ÑÁêÜÂ§çÂà∂Êìç‰ΩúÊòØ‰∏çÊòØÈùûÂ∏∏ÊòÇË¥µÔºü‚Äù ÊòØÁöÑÔºå‰Ω†ÊòØÊ≠£Á°ÆÁöÑÔºõÂ§çÂà∂Êìç‰ΩúÂèØËÉΩÊòØÊòÇË¥µÁöÑ„ÄÇÁÑ∂ËÄåÔºåÂè™ÊúâÂΩìÂÆÉ‰ª¨ÁúüÊ≠£ÂèëÁîüÊó∂Êâç‰ºöÊòÇË¥µ„ÄÇÂú®ÂÆûÈôÖ‰ª£Á†Å‰∏≠ÔºåÊàë‰ª¨ÈÄöÂ∏∏ÂèØ‰ª•‰æùËµñ‰∫éÂ§çÂà∂ÁúÅÁï•„ÄÅÁßªÂä®ËØ≠‰πâÂíåÊåâÂºïÁî®‰º†ÈÄí„ÄÇÊ≠§Â§ñÔºåÊàë‰ª¨Â∑≤ÁªèÁúãÂà∞Ôºå‰ªéÊÄßËÉΩËßíÂ∫¶Êù•ÁúãÔºåÂÄºËØ≠‰πâÂèØËÉΩ‰ºöÁªôÊàë‰ª¨Â∏¶Êù•ÊÄßËÉΩÊèêÂçá„ÄÇÂΩìÁÑ∂ÔºåÊàëÊåáÁöÑÊòØ‚ÄúÊåáÂçó17ÔºöËÄÉËôë‰ΩøÁî® <code>std::variant</code> ÂÆûÁé∞ËÆøÈóÆËÄÖÊ®°Âºè‚Äù‰∏≠ÁöÑ <code>std::variant</code> Á§∫‰æã„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå‰ΩøÁî® <code>std::variant</code> Á±ªÂûãÁöÑÂÄºÊòæËëóÊèêÈ´ò‰∫ÜÊàë‰ª¨ÁöÑÊÄßËÉΩÔºåÂõ†‰∏∫ÂáèÂ∞ë‰∫ÜÊåáÈíàÂØºËá¥ÁöÑÈó¥Êé•ÂØªÂùÄÂíåÊõ¥Â•ΩÁöÑÂÜÖÂ≠òÂ∏ÉÂ±ÄÂèäËÆøÈóÆÊ®°Âºè„ÄÇ</p>
<p>ËÆ©Êàë‰ª¨Êù•ÁúãÁ¨¨‰∫å‰∏™Á§∫‰æã„ÄÇËøôÊ¨°Êàë‰ª¨ËÄÉËôë‰ª•‰∏ã <code>to_int()</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">to_int</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™ÂáΩÊï∞Ëß£ÊûêÁªôÂÆöÁöÑÂ≠óÁ¨¶‰∏≤ÔºàÊòØÁöÑÔºåÊàë‰ΩøÁî® <code>std::string_view</code> ‰ª•ÊèêÈ´òÊÄßËÉΩÔºâÂπ∂Â∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫ <code>int</code>„ÄÇÂØπÊàë‰ª¨Êù•ËØ¥ÊúÄÊúâË∂£ÁöÑÈóÆÈ¢òÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜÈîôËØØÔºåÊàñËÄÖËØ¥ÔºåÂ¶ÇÊûúÂ≠óÁ¨¶‰∏≤Êó†Ê≥ïËΩ¨Êç¢‰∏∫ <code>int</code>ÔºåÂáΩÊï∞Â∫îËØ•ÂÅö‰ªÄ‰πà„ÄÇÁ¨¨‰∏Ä‰∏™ÈÄâÈ°πÊòØÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãËøîÂõû 0„ÄÇÁÑ∂ËÄåÔºåËøôÁßçÊñπÊ≥ïÊúâÈóÆÈ¢òÔºåÂõ†‰∏∫ 0 ÊòØ <code>to_int()</code> ÂáΩÊï∞ÁöÑÊúâÊïàËøîÂõûÂÄº„ÄÇÊàë‰ª¨Â∞ÜÊó†Ê≥ïÂå∫ÂàÜÊàêÂäüÂíåÂ§±Ë¥•„ÄÇ</p>
<p>Âè¶‰∏ÄÁßçÂèØËÉΩÁöÑÊñπÊ≥ïÊòØÊäõÂá∫ÂºÇÂ∏∏„ÄÇÂ∞ΩÁÆ°ÂºÇÂ∏∏ÂèØËÉΩÊòØC++ÂéüÁîüÁöÑÈîôËØØ‰ø°Âè∑Â∑•ÂÖ∑Ôºå‰ΩÜÂØπ‰∫éËøô‰∏™ÈóÆÈ¢òÔºåÊ†πÊçÆ‰∏™‰∫∫È£éÊ†ºÂíåÂÅèÂ•ΩÔºåËøôÂèØËÉΩÊòæÂæóËøá‰∫éÂ§çÊùÇ„ÄÇÂêåÊó∂ÔºåËÄÉËôëÂà∞ÂæàÂ§ß‰∏ÄÈÉ®ÂàÜC++Á§æÂå∫‰∏çËÉΩ‰ΩøÁî®ÂºÇÂ∏∏ÔºåËøô‰∏ÄÈÄâÊã©ÂèØËÉΩ‰ºöÈôêÂà∂ÂáΩÊï∞ÁöÑÂèØÁî®ÊÄß„ÄÇ</p>
<p>Á¨¨‰∏âÁßçÂèØËÉΩÊÄßÊòØÁ®çÂæÆÊîπÂèòÁ≠æÂêçÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">bool</span> <span class="nf">to_int</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span> <span class="n">s</span><span class="p">,</span> <span class="kt">int</span><span class="o">&amp;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áé∞Âú®ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™ÂèØÂèò <code>int</code> ÁöÑÂºïÁî®‰Ωú‰∏∫Á¨¨‰∫å‰∏™ÂèÇÊï∞ÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™ <code>bool</code>„ÄÇÂ¶ÇÊûúÊàêÂäüÔºåÂáΩÊï∞ËøîÂõû <code>true</code> Âπ∂ËÆæÁΩÆ‰º†ÂÖ•ÁöÑÊï¥Êï∞ÔºõÂ¶ÇÊûúÂ§±Ë¥•ÔºåÂáΩÊï∞ËøîÂõû <code>false</code> Âπ∂‰øùÊåÅÊï¥Êï∞‰∏çÂèò„ÄÇËôΩÁÑ∂ËøôÂØπ‰Ω†Êù•ËØ¥‰ºº‰πéÊòØ‰∏Ä‰∏™ÂêàÁêÜÁöÑÊäòË°∑ÊñπÊ°àÔºå‰ΩÜÊàëËÆ§‰∏∫Êàë‰ª¨Áé∞Âú®Ëøõ‰∏ÄÊ≠•ËøõÂÖ•‰∫ÜÂºïÁî®ËØ≠‰πâÁöÑÈ¢ÜÂüüÔºàÂåÖÊã¨ÊâÄÊúâÊΩúÂú®ÁöÑËØØÁî®Ôºâ„ÄÇÂêåÊó∂Ôºå‰ª£Á†ÅÁöÑÊ∏ÖÊô∞Â∫¶ÊúâÊâÄ‰∏ãÈôçÔºöËøîÂõûÁªìÊûúÊúÄËá™ÁÑ∂ÁöÑÊñπÂºèÊòØÈÄöËøáËøîÂõûÂÄºÔºå‰ΩÜÁé∞Âú®ÁªìÊûúÊòØÁî±ËæìÂá∫ÂÄº‰∫ßÁîüÁöÑ„ÄÇ‰æãÂ¶ÇÔºåËøôÈòªÊ≠¢Êàë‰ª¨Â∞ÜÁªìÊûúËµãÂÄºÁªô <code>const</code> ÂÄº„ÄÇÂõ†Ê≠§ÔºåÊàëËÆ§‰∏∫ËøôÊòØËøÑ‰ªä‰∏∫Ê≠¢ÊúÄ‰∏çÂà©ÁöÑÊñπÊ≥ï„ÄÇ</p>
<p>Á¨¨ÂõõÁßçÊñπÊ≥ïÊòØÈÄöËøáÊåáÈíàËøîÂõûÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">to_int</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ªéËØ≠‰πâ‰∏äËÆ≤ÔºåËøôÁßçÊñπÊ≥ïÈùûÂ∏∏Âê∏Âºï‰∫∫ÔºöÂ¶ÇÊûúÊàêÂäüÔºåÂáΩÊï∞ËøîÂõûÊåáÂêë <code>int</code> ÁöÑÊúâÊïàÊåáÈíàÔºõÂ¶ÇÊûúÂ§±Ë¥•ÔºåËøîÂõû <code>nullptr</code>„ÄÇÂõ†Ê≠§Ôºå‰ª£Á†ÅÁöÑÊ∏ÖÊô∞Â∫¶ÂæóÂà∞‰∫ÜÊîπÂñÑÔºåÂõ†‰∏∫Êàë‰ª¨ËÉΩÊ∏ÖÊ•öÂú∞Âå∫ÂàÜËøô‰∏§ÁßçÊÉÖÂÜµ„ÄÇÁÑ∂ËÄåÔºåÊàë‰ª¨Âú®Âä®ÊÄÅÂÜÖÂ≠òÂàÜÈÖçÂíå‰ΩøÁî® <code>std::unique_ptr</code> ËøõË°åÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜÊñπÈù¢‰ªòÂá∫‰∫Ü‰ª£‰ª∑Ôºå‰ªçÁÑ∂ÂÅúÁïôÂú®ÂºïÁî®ËØ≠‰πâÁöÑÈ¢ÜÂüü„ÄÇÊâÄ‰ª•ÈóÆÈ¢òÊòØÔºöÂ¶Ç‰ΩïÂà©Áî®ËØ≠‰πâ‰∏äÁöÑ‰ºòÂäø‰ΩÜ‰ªçÂùöÊåÅÂÄºËØ≠‰πâÔºüËß£ÂÜ≥ÊñπÊ°àÁöÑÂΩ¢ÂºèÊòØ <code>std::optional</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">to_int</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>std::optional</code> ÊòØ‰∏ÄÁßçÂÄºÁ±ªÂûãÔºåË°®Á§∫Âè¶‰∏Ä‰∏™ÂÄºÔºåÂú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠ÊòØ <code>int</code>„ÄÇÂõ†Ê≠§Ôºå<code>std::optional</code> ÂèØ‰ª•Âèñ <code>int</code> ËÉΩÂèñÁöÑÊâÄÊúâÂÄº„ÄÇ<code>std::optional</code> ÁöÑÁâπÊÆä‰πãÂ§ÑÂú®‰∫éÂÆÉ‰∏∫Â∞ÅË£ÖÁöÑÂÄºÂ¢ûÂä†‰∫Ü‰∏Ä‰∏™Áä∂ÊÄÅÔºåË°®Á§∫Êó†ÂÄºÁöÑÁä∂ÊÄÅ„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÁöÑ <code>std::optional</code> ÊòØ‰∏Ä‰∏™ÂèØËÉΩÂ≠òÂú®‰πüÂèØËÉΩ‰∏çÂ≠òÂú®ÁöÑ <code>int</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;charconv&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;optional&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;sstream&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string_view&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">to_int</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span> <span class="n">sv</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">oi</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">int</span> <span class="n">i</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="k">auto</span> <span class="k">const</span> <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">from_chars</span><span class="p">(</span><span class="n">sv</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="n">sv</span><span class="p">.</span><span class="n">data</span><span class="p">()</span> <span class="o">+</span> <span class="n">sv</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">i</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">ec</span> <span class="o">!=</span> <span class="n">std</span><span class="o">::</span><span class="n">errc</span><span class="o">::</span><span class="n">invalid_argument</span><span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">oi</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">oi</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">value</span> <span class="o">=</span> <span class="s">&#34;42&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="k">if</span><span class="p">(</span><span class="k">auto</span> <span class="n">optional_int</span> <span class="o">=</span> <span class="n">to_int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="c1">// ... ÊàêÂäüÔºöËøîÂõûÁöÑ std::optional ÂåÖÂê´‰∏Ä‰∏™Êï¥Êï∞ÂÄº 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">else</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="c1">// ... Â§±Ë¥•ÔºöËøîÂõûÁöÑ std::optional ‰∏çÂåÖÂê´ÂÄº 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ªéËØ≠‰πâ‰∏äËÆ≤ÔºåËøôÁ≠âÂêå‰∫éÊåáÈíàÊñπÊ≥ïÔºå‰ΩÜÊàë‰ª¨‰∏çÈúÄË¶ÅÊîØ‰ªòÂä®ÊÄÅÂÜÖÂ≠òÂàÜÈÖçÁöÑÊàêÊú¨Ôºå‰πü‰∏çÈúÄË¶ÅÂ§ÑÁêÜÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ„ÄÇËøô‰∏™Ëß£ÂÜ≥ÊñπÊ°àËØ≠‰πâÊ∏ÖÊô∞„ÄÅÊòì‰∫éÁêÜËß£‰∏îÈ´òÊïà„ÄÇ</p>
<p><strong>‰ΩøÁî®ÂÄºËØ≠‰πâÂÆûÁé∞ËÆæËÆ°Ê®°Âºè</strong></p>
<p>‚ÄúÈÇ£ËÆæËÆ°Ê®°ÂºèÂë¢Ôºü‚Äù‰Ω†ÈóÆ„ÄÇ‚ÄúÂá†‰πéÊâÄÊúâÁöÑGoFÊ®°ÂºèÈÉΩÂü∫‰∫éÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÔºåÂõ†Ê≠§ÊòØÂºïÁî®ËØ≠‰πâ„ÄÇÊàë‰ª¨Â∫îËØ•Â¶Ç‰ΩïÂ§ÑÁêÜËøô‰∏™ÈóÆÈ¢òÔºü‚Äù ËøôÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁöÑÈóÆÈ¢ò„ÄÇÂπ∂‰∏î‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÆåÁæéÁöÑÊ°•Ê¢ÅÂà∞‰∏ã‰∏Ä‰∏™ÊåáÂçó„ÄÇÁÆÄÁü≠ÁöÑÂõûÁ≠îÊòØÔºö‰Ω†Â∫îËØ•‰ºòÂÖà‰ΩøÁî®ÂÄºËØ≠‰πâÊù•ÂÆûÁé∞ËÆæËÆ°Ê®°Âºè„ÄÇÊòØÁöÑÔºåËÆ§ÁúüÂú∞ËØ¥ÔºÅËøô‰∫õËß£ÂÜ≥ÊñπÊ°àÈÄöÂ∏∏‰ºöÂ∏¶Êù•Êõ¥ÂÖ®Èù¢„ÄÅÂèØÁª¥Êä§ÁöÑ‰ª£Á†ÅÔºåÂπ∂‰∏îÔºàÈÄöÂ∏∏ÔºâÂÖ∑ÊúâÊõ¥Â•ΩÁöÑÊÄßËÉΩ„ÄÇ</p>
<h3 id="ÂáÜÂàô23‰ºòÂÖà‰ΩøÁî®Âü∫‰∫éÂÄºÁöÑÁ≠ñÁï•ÂíåÂëΩ‰ª§ÂÆûÁé∞">ÂáÜÂàô23Ôºö‰ºòÂÖà‰ΩøÁî®Âü∫‰∫éÂÄºÁöÑÁ≠ñÁï•ÂíåÂëΩ‰ª§ÂÆûÁé∞
</h3><p>Âú®‚Äú<strong>ÂáÜÂàô19Ôºö‰ΩøÁî®Á≠ñÁï•Ê®°ÂºèÈöîÁ¶ªÊìç‰ΩúÊñπÂºè</strong>‚Äù‰∏≠ÔºåÊàëÂêë‰Ω†‰ªãÁªç‰∫Ü<strong>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong>ÔºõÂú®‚Äú<strong>ÂáÜÂàô21Ôºö‰ΩøÁî®ÂëΩ‰ª§Ê®°ÂºèÈöîÁ¶ªÊìç‰ΩúÂÜÖÂÆπ</strong>‚Äù‰∏≠ÔºåÊàë‰ªãÁªç‰∫Ü<strong>ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè</strong>„ÄÇ</p>
<p>ÊàëÂ±ïÁ§∫‰∫ÜËøô‰∏§ÁßçËÆæËÆ°Ê®°ÂºèÊòØ‰Ω†Êó•Â∏∏Â∑•ÂÖ∑ÁÆ±‰∏≠ÁöÑÈáçË¶ÅËß£ËÄ¶Â∑•ÂÖ∑„ÄÇÁÑ∂ËÄåÔºåÂú®‚ÄúÊåáÂçó22Ôºö‰ºòÂÖà‰ΩøÁî®ÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ‚Äù‰∏≠ÔºåÊàëÊèêÂá∫‰∫Ü‰ΩøÁî®ÂÄºËØ≠‰πâÊØîÂºïÁî®ËØ≠‰πâÊõ¥Â•ΩÁöÑËßÇÁÇπ„ÄÇËøôÂΩìÁÑ∂ÂºïÂèë‰∫Ü‰∏Ä‰∏™ÈóÆÈ¢òÔºöÂ¶Ç‰ΩïÂ∞ÜËøô‰∏ÄÊô∫ÊÖßÂ∫îÁî®‰∫éÁ≠ñÁï•ÂíåÂëΩ‰ª§ËÆæËÆ°Ê®°ÂºèÔºüËøôÈáåÊúâ‰∏Ä‰∏™ÂèØËÉΩÁöÑÂü∫‰∫éÂÄºËØ≠‰πâÁöÑËß£ÂÜ≥ÊñπÊ°àÔºöÂà©Áî® <code>std::function</code> ÁöÑÊäΩË±°ËÉΩÂäõ„ÄÇ</p>
<p><strong><code>std::function</code> ÁÆÄ‰ªã</strong></p>
<p>Â¶ÇÊûú‰Ω†ËøòÊ≤°ÊúâÂê¨ËØ¥Ëøá <code>std::function</code>ÔºåËÆ©ÊàëÊù•‰ªãÁªç‰∏Ä‰∏ã„ÄÇ<code>std::function</code> ÊòØÂØπÂèØË∞ÉÁî®ÂØπË±°Ôºà‰æãÂ¶ÇÂáΩÊï∞ÊåáÈíà„ÄÅÂáΩÊï∞ÂØπË±°ÊàñlambdaË°®ËææÂºèÔºâÁöÑÊäΩË±°„ÄÇÂîØ‰∏ÄÁöÑË¶ÅÊ±ÇÊòØËØ•ÂèØË∞ÉÁî®ÂØπË±°Êª°Ë∂≥ÁâπÂÆöÁöÑÂáΩÊï∞Á±ªÂûãÔºåËøôÊòØ‰Ωú‰∏∫ÂîØ‰∏ÄÁöÑÊ®°ÊùøÂèÇÊï∞‰º†ÈÄíÁªô <code>std::function</code> ÁöÑ„ÄÇ‰ª•‰∏ã‰ª£Á†ÅÁªôÂá∫‰∫Ü‰∏Ä‰∏™Âç∞Ë±°Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;foo: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ÈªòËÆ§ÁöÑ std::function ÂÆû‰æã„ÄÇË∞ÉÁî®ÂÆÉ‰ºöÂØºËá¥ std::bad_function_call ÂºÇÂ∏∏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">{};</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∞Ü‰∏Ä‰∏™ÂèØË∞ÉÁî®ÂØπË±°ËµãÂÄºÁªô &#39;f&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">f</span> <span class="o">=</span> <span class="p">[](</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;lambda: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>  <span class="c1">// ‰ΩøÁî®Êï¥Êï∞ &#39;1&#39; Ë∞ÉÁî® &#39;f&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">g</span> <span class="o">=</span> <span class="n">f</span><span class="p">;</span>  <span class="c1">// Â∞Ü &#39;f&#39; Â§çÂà∂Âà∞ &#39;g&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="n">f</span> <span class="o">=</span> <span class="n">foo</span><span class="p">;</span>  <span class="c1">// Â∞Ü‰∏çÂêåÁöÑÂèØË∞ÉÁî®ÂØπË±°ËµãÂÄºÁªô &#39;f&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>  <span class="c1">// ‰ΩøÁî®Êï¥Êï∞ &#39;2&#39; Ë∞ÉÁî® &#39;f&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="n">g</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>  <span class="c1">// ‰ΩøÁî®Êï¥Êï∞ &#39;3&#39; Ë∞ÉÁî® &#39;g&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® <code>main()</code> ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Âêç‰∏∫ <code>f</code> ÁöÑ <code>std::function</code> ÂÆû‰æã„ÄÇÊ®°ÊùøÂèÇÊï∞ÊåáÂÆö‰∫ÜÊâÄÈúÄÁöÑÂáΩÊï∞Á±ªÂûã„ÄÇÂú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠ÔºåËøôÊòØ <code>void(int)</code>„ÄÇ‚ÄúÂáΩÊï∞Á±ªÂûã‚Ä¶‚Ä¶‚Äù‰Ω†ËØ¥„ÄÇ‚Äú‰Ω†‰∏çÊåáÁöÑÊòØÂáΩÊï∞ÊåáÈíàÁ±ªÂûãÂêóÔºü‚Äù Â•ΩÂêßÔºåÁî±‰∫éËøôÂèØËÉΩÊòØ‰Ω†‰ª•ÂâçÂæàÂ∞ëËßÅËøáÁöÑ‰∏úË•øÔºåËÆ©ÊàëËß£Èáä‰∏Ä‰∏ã‰ªÄ‰πàÊòØÂáΩÊï∞Á±ªÂûãÔºåÂπ∂Â∞ÜÂÖ∂‰∏é‰Ω†ÂèØËÉΩÊõ¥Â∏∏ËßÅÁöÑÂáΩÊï∞ÊåáÈíàÁ±ªÂûãËøõË°åÂØπÊØî„ÄÇ‰ª•‰∏ãÁ§∫‰æãÂêåÊó∂‰ΩøÁî®‰∫ÜÂáΩÊï∞Á±ªÂûãÂíåÂáΩÊï∞ÊåáÈíàÁ±ªÂûãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">using</span> <span class="n">FunctionType</span> <span class="o">=</span> <span class="kt">double</span><span class="p">(</span><span class="kt">double</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">FunctionPointerType</span> <span class="o">=</span> <span class="kt">double</span><span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="kt">double</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÊàñËÄÖÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1">// using FunctionPointerType = FunctionType*;
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Á¨¨‰∏ÄË°åÊòæÁ§∫‰∫Ü‰∏Ä‰∏™ÂáΩÊï∞Á±ªÂûã„ÄÇÊ≠§Á±ªÂûãË°®Á§∫‰ªª‰ΩïÊé•Âèó <code>double</code> Âπ∂ËøîÂõû <code>double</code> ÁöÑÂáΩÊï∞„ÄÇËøôÁßçÂáΩÊï∞Á±ªÂûãÁöÑ‰æãÂ≠êÂåÖÊã¨ <code>std::sin</code>„ÄÅ<code>std::cos</code>„ÄÅ<code>std::log</code> Êàñ <code>std::sqrt</code> ÁöÑÁõ∏Â∫îÈáçËΩΩ„ÄÇÁ¨¨‰∫åË°åÊòæÁ§∫‰∫Ü‰∏Ä‰∏™ÂáΩÊï∞ÊåáÈíàÁ±ªÂûã„ÄÇÊ≥®ÊÑèÊã¨Âè∑‰∏≠ÁöÑÂ∞èÊòüÂè∑‚Äî‚ÄîËøô‰ΩøÂæóÂÆÉÊàê‰∏∫ÊåáÈíàÁ±ªÂûã„ÄÇÊ≠§Á±ªÂûãË°®Á§∫ÂáΩÊï∞Á±ªÂûãÁöÑ <code>FunctionType</code> ÂáΩÊï∞ÁöÑÂú∞ÂùÄ„ÄÇÂõ†Ê≠§ÔºåÂáΩÊï∞Á±ªÂûãÂíåÂáΩÊï∞ÊåáÈíàÁ±ªÂûã‰πãÈó¥ÁöÑÂÖ≥Á≥ªÈùûÂ∏∏Á±ª‰ºº‰∫é <code>int</code> ÂíåÊåáÂêë <code>int</code> ÁöÑÊåáÈíà‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºöËôΩÁÑ∂ÊúâËÆ∏Â§ö <code>int</code> ÂÄºÔºå‰ΩÜÊåáÂêë <code>int</code> ÁöÑÊåáÈíàÂ≠òÂÇ®ÁöÑÊòØÊÅ∞Â•Ω‰∏Ä‰∏™ <code>int</code> ÁöÑÂú∞ÂùÄ„ÄÇ</p>
<p>ÂõûÂà∞ <code>std::function</code> Á§∫‰æãÔºöÊúÄÂàùÔºåÂÆû‰æãÊòØÁ©∫ÁöÑÔºåÂõ†Ê≠§‰Ω†‰∏çËÉΩË∞ÉÁî®ÂÆÉ„ÄÇÂ¶ÇÊûú‰Ω†‰ªçÁÑ∂Â∞ùËØïËøôÊ†∑ÂÅöÔºå<code>std::function</code> ÂÆû‰æã‰ºöÊäõÂá∫ <code>std::bad_function_call</code> ÂºÇÂ∏∏„ÄÇÊúÄÂ•ΩÂà´ÊÉπÂÆÉ„ÄÇËÆ©Êàë‰ª¨‰∏∫ÂÆÉÂàÜÈÖç‰∏Ä‰∫õÊª°Ë∂≥ÂáΩÊï∞Á±ªÂûãË¶ÅÊ±ÇÁöÑÂèØË∞ÉÁî®ÂØπË±°Ôºå‰æãÂ¶Ç‰∏Ä‰∏™ÔºàÂèØËÉΩÊòØÊúâÁä∂ÊÄÅÁöÑÔºâlambda„ÄÇËøô‰∏™lambdaÊé•Âèó‰∏Ä‰∏™ <code>int</code> Âπ∂‰∏çËøîÂõû‰ªª‰Ωï‰∏úË•ø„ÄÇÁõ∏ÂèçÔºåÂÆÉÈÄöËøáÊèèËø∞ÊÄßÁöÑËæìÂá∫Ê∂àÊÅØÊâìÂç∞Âá∫ÂÆÉÂ∑≤Ë¢´Ë∞ÉÁî®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="nl">lambda</span><span class="p">:</span> <span class="mi">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â•ΩÁöÑÔºåËøôÂ∑•‰ΩúÂæóÂæàÂ•Ω„ÄÇËÆ©Êàë‰ª¨ËØïËØïÂà´ÁöÑÔºöÊàë‰ª¨Áé∞Âú®ÈÄöËøá <code>f</code> ÂàõÂª∫Âè¶‰∏Ä‰∏™ <code>std::function</code> ÂÆû‰æã <code>g</code>„ÄÇÁÑ∂ÂêéÊàë‰ª¨Â∞ÜÂè¶‰∏Ä‰∏™ÂèØË∞ÉÁî®ÂØπË±°ÂàÜÈÖçÁªô <code>f</code>„ÄÇËøôÊ¨°ÔºåÊàë‰ª¨ÂàÜÈÖç‰∫Ü <code>foo()</code> ÂáΩÊï∞ÁöÑÊåáÈíà„ÄÇÂêåÊ†∑ÔºåËøô‰∏™ÂèØË∞ÉÁî®ÂØπË±°Êª°Ë∂≥ <code>std::function</code> ÂÆû‰æãÁöÑË¶ÅÊ±ÇÔºöÂÆÉÊé•Âèó‰∏Ä‰∏™ <code>int</code> Âπ∂‰∏çËøîÂõû‰ªª‰Ωï‰∏úË•ø„ÄÇÁõ¥Êé•Âú®ÂàÜÈÖçÂêéÔºå‰Ω†Áî®Êï¥Êï∞ <code>2</code> Ë∞ÉÁî® <code>f</code>ÔºåËøôËß¶Âèë‰∫ÜÈ¢ÑÊúüÁöÑËæìÂá∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="nl">foo</span><span class="p">:</span> <span class="mi">2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÂèØËÉΩÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠ê„ÄÇÁÑ∂ËÄåÔºå‰∏ã‰∏Ä‰∏™ÂáΩÊï∞Ë∞ÉÁî®Ë¶ÅÊúâË∂£ÂæóÂ§ö„ÄÇÂ¶ÇÊûú‰Ω†Áî®Êï¥Êï∞ <code>3</code> Ë∞ÉÁî® <code>g</code>ÔºåËæìÂá∫Ë°®Êòé <code>std::function</code> ÂùöÂÆûÂú∞Âü∫‰∫éÂÄºËØ≠‰πâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="nl">lambda</span><span class="p">:</span> <span class="mi">3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ÂàùÂßãÂåñ <code>g</code> ÊúüÈó¥ÔºåÂÆû‰æã <code>f</code> Ë¢´Â§çÂà∂„ÄÇÂπ∂‰∏îÂÆÉÊòØÊåâÁÖßÂÄºÂ∫îËØ•Ë¢´Â§çÂà∂ÁöÑÊñπÂºèÂ§çÂà∂ÁöÑÔºöÂÆÉÊ≤°ÊúâÊâßË°å‚ÄúÊµÖÊã∑Ë¥ù‚ÄùÔºåËøô‰ºöÂØºËá¥ÂΩì <code>f</code> ÈöèÂêéÊîπÂèòÊó∂ÂΩ±Âìç <code>g</code>ÔºåËÄåÊòØÊâßË°å‰∫Ü‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂ§çÂà∂ÔºàÊ∑±Êã∑Ë¥ùÔºâÔºåÂåÖÊã¨lambdaÁöÑÂ§çÂà∂„ÄÇÂõ†Ê≠§ÔºåÊîπÂèò <code>f</code> ‰∏ç‰ºöÂΩ±Âìç <code>g</code>„ÄÇËøôÂ∞±ÊòØÂÄºËØ≠‰πâÁöÑÂ•ΩÂ§ÑÔºö‰ª£Á†ÅÁÆÄÂçïÁõ¥ËßÇÔºå‰Ω†‰∏çÂøÖÊãÖÂøÉÊÑèÂ§ñÁ†¥ÂùèÂÖ∂‰ªñÂú∞ÊñπÁöÑÂÜÖÂÆπ„ÄÇ</p>
<p>Âú®Ê≠§Âü∫Á°Ä‰∏äÔºå<code>std::function</code> ÁöÑÂäüËÉΩÂèØËÉΩ‰ºöËÆ©‰∫∫ÊÑüËßâÊúâÁÇπÂÉèÈ≠îÊ≥ïÔºöÂÆÉÊòØÂ¶Ç‰ΩïËÉΩÂ§üÊé•Âèó‰ªª‰ΩïÁ±ªÂûãÁöÑÂèØË∞ÉÁî®ÂØπË±°ÔºåÂåÖÊã¨ÂÉèlambdaËøôÊ†∑ÁöÑ‰∏úË•øÔºüÂÆÉÊòØÂ¶Ç‰ΩïÂ≠òÂÇ®‰ªª‰ΩïÂèØËÉΩÁöÑÁ±ªÂûãÔºåÁîöËá≥ÊòØÂÆÉ‰∏çÁü•ÈÅìÁöÑÁ±ªÂûãÔºåÂç≥‰ΩøËøô‰∫õÁ±ªÂûãÊòæÁÑ∂Ê≤°Êúâ‰ªª‰ΩïÂÖ±ÂêåÁÇπÔºü‰∏çÁî®ÊãÖÂøÉÔºöÂú®Á¨¨8Á´†ÔºåÊàë‰ºöËØ¶ÁªÜ‰ªãÁªç‰∏ÄÁßçÁß∞‰∏∫Á±ªÂûãÊì¶Èô§ÁöÑÊäÄÊúØÔºåÂÆÉÊòØ <code>std::function</code> ËÉåÂêéÁöÑÈ≠îÊ≥ï„ÄÇ</p>
<p><strong>ÈáçÊûÑÁªòÂà∂ÂΩ¢Áä∂ÁöÑ‰ª£Á†Å</strong></p>
<p><code>std::function</code> Êèê‰æõ‰∫ÜÊàë‰ª¨ÈúÄË¶ÅÁöÑ‰∏ÄÂàáÊù•ÈáçÊûÑÊàë‰ª¨Âú®‚ÄúÊåáÂçó19Ôºö‰ΩøÁî®Á≠ñÁï•Ê®°ÂºèÈöîÁ¶ªÊìç‰ΩúÊñπÂºè‚Äù‰∏≠ÁöÑÁªòÂõæÁ§∫‰æã„ÄÇÂÆÉË°®Á§∫Âçï‰∏™ÂèØË∞ÉÁî®ÂØπË±°ÁöÑÊäΩË±°ÔºåËøôÊ≠£ÊòØÊàë‰ª¨ÊõøÊç¢ <code>DrawCircleStrategy</code> Âíå <code>DrawSquareStrategy</code> Â±ÇÊ¨°ÁªìÊûÑÊâÄÈúÄË¶ÅÁöÑÔºåÊØè‰∏™Â±ÇÊ¨°ÁªìÊûÑÈÉΩÂåÖÂê´‰∏Ä‰∏™Âçï‰∏ÄÁöÑËôöÂáΩÊï∞„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨‰æùËµñ‰∫é <code>std::function</code> ÁöÑÊäΩË±°ËÉΩÂäõÔºö</p>
<p>Shape.h</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Circle.h</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">DrawStrategy</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="nf">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">),</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// Ê£ÄÊü•ÁªôÂÆöÂçäÂæÑÁöÑÊúâÊïàÊÄß‰ª•Âèä &#39;std::function&#39; ÂÆû‰æãÊòØÂê¶‰∏ç‰∏∫Á©∫ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">drawer_</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/* some arguments */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">DrawStrategy</span> <span class="n">drawer_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Square.h</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">DrawStrategy</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="nf">Square</span><span class="p">(</span><span class="kt">double</span> <span class="n">side</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">side_</span><span class="p">(</span><span class="n">side</span><span class="p">),</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// Ê£ÄÊü•ÁªôÂÆöËæπÈïøÁöÑÊúâÊïàÊÄß‰ª•Âèä &#39;std::function&#39; ÂÆû‰æãÊòØÂê¶‰∏ç‰∏∫Á©∫ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">drawer_</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/* some arguments */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">side</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">side_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">side_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">DrawStrategy</span> <span class="n">drawer_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>È¶ñÂÖàÔºåÂú® <code>Circle</code> Á±ª‰∏≠ÔºåÊàë‰ª¨‰∏∫ÊúüÊúõÁöÑ <code>std::function</code> Á±ªÂûãÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™Á±ªÂûãÂà´ÂêçÔºàÔºâ„ÄÇËøô‰∏™ <code>std::function</code> Á±ªÂûãË°®Á§∫‰ªª‰ΩïÂèØ‰ª•Êé•Âèó <code>Circle</code> ÂØπË±°ÂíåÂèØËÉΩÂá†‰∏™‰∏éÁªòÂõæÁõ∏ÂÖ≥ÁöÑÂèÇÊï∞ÔºåÂπ∂‰∏î‰∏çËøîÂõû‰ªª‰Ωï‰∏úË•øÁöÑÂèØË∞ÉÁî®ÂØπË±°„ÄÇÂΩìÁÑ∂ÔºåÊàë‰ª¨Âú® <code>Square</code> Á±ª‰∏≠‰πüÊ∑ªÂä†‰∫ÜÁõ∏Â∫îÁöÑÁ±ªÂûãÂà´ÂêçÔºàÔºâ„ÄÇÂú® <code>Circle</code> Âíå <code>Square</code> ÁöÑÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨Áé∞Âú®Êé•Âèó‰∏Ä‰∏™ <code>std::function</code> Á±ªÂûãÁöÑÂÆû‰æãÔºàÔºâ‰Ωú‰∏∫ÊåáÂêëÁ≠ñÁï•Âü∫Á±ªÔºà<code>DrawCircleStrategy</code> Êàñ <code>DrawSquareStrategy</code>ÔºâÊåáÈíàÁöÑÊõø‰ª£„ÄÇËøô‰∏™ÂÆû‰æãÁ´ãÂç≥Ë¢´ÁßªÂä®ÔºàÔºâÂà∞Êï∞ÊçÆÊàêÂëò <code>drawer_</code> ‰∏≠ÔºåËØ•ÊàêÂëò‰πüÊòØ <code>DrawStrategy</code> Á±ªÂûãÔºàÔºâ„ÄÇ</p>
<p>‚ÄúÂòøÔºå‰∏∫‰ªÄ‰πà‰Ω†ÈÄöËøáÂÄº‰º†ÈÄí <code>std::function</code> ÂÆû‰æãÔºüËøô‰∏çÊòØÈùûÂ∏∏‰ΩéÊïàÂêóÔºüÊàë‰ª¨Â∫îËØ•‰ºòÂÖàÈÄöËøáÂºïÁî®‰º†ÈÄíÂêóÔºü‚Äù ÁÆÄÁü≠ÂõûÁ≠îÔºö‰∏çÔºåÈÄöËøáÂÄº‰º†ÈÄíÂπ∂‰∏ç‰ΩéÊïàÔºåËÄåÊòØÂØπÊõø‰ª£ÊñπÊ°àÁöÑ‰∏ÄÁßç‰ºòÈõÖÂ¶•Âçè„ÄÇÊàëÊâøËÆ§ÔºåËøôÂèØËÉΩ‰ª§‰∫∫ÊÉäËÆ∂„ÄÇÁî±‰∫éËøôÊòØ‰∏Ä‰∏™ÂÄºÂæóÊ≥®ÊÑèÁöÑÂÆûÁé∞ÁªÜËäÇÔºåËÆ©Êàë‰ª¨‰ªîÁªÜÁúãÁúã„ÄÇ</p>
<p>Â¶ÇÊûúÊàë‰ª¨‰ΩøÁî®Â∏∏ÈáèÂºïÁî®ÔºåÊàë‰ª¨‰ºöÈÅáÂà∞ rvalue ‰∏çÂøÖË¶ÅÂú∞Ë¢´Â§çÂà∂ÁöÑÁº∫ÁÇπ„ÄÇÂ¶ÇÊûú‰º†ÈÄíÁªôÊàë‰ª¨ÁöÑÊòØ‰∏Ä‰∏™ rvalueÔºåËøô‰∏™ rvalue Â∞ÜÁªëÂÆöÂà∞ÔºàlvalueÔºâÂ∏∏ÈáèÂºïÁî®„ÄÇÁÑ∂ËÄåÔºåÂΩìÊàë‰ª¨ÊääËøô‰∏™Â∏∏ÈáèÂºïÁî®‰º†ÈÄíÁªôÊï∞ÊçÆÊàêÂëòÊó∂ÔºåÂÆÉ‰ºöË¢´Â§çÂà∂„ÄÇËøô‰∏çÊòØÊàë‰ª¨ÁöÑÊÑèÂõæÔºöÊàë‰ª¨Ëá™ÁÑ∂Â∏åÊúõÂÆÉÊòØÁßªÂä®ÁöÑ„ÄÇÁÆÄÂçïÁöÑÂéüÂõ†ÊòØÊàë‰ª¨‰∏çËÉΩ‰ªé <code>const</code> ÂØπË±°ÁßªÂä®ÔºàÂç≥‰Ωø‰ΩøÁî® <code>std::move</code>Ôºâ„ÄÇÂõ†Ê≠§Ôºå‰∏∫‰∫ÜÈ´òÊïàÂ§ÑÁêÜ rvalueÔºåÊàë‰ª¨ÂøÖÈ°ªÊèê‰æõÊé•Âèó rvalue ÂºïÁî®ÁöÑ <code>Circle</code> Âíå <code>Square</code> ÊûÑÈÄ†ÂáΩÊï∞ÈáçËΩΩÔºà<code>DrawStrategy&amp;&amp;</code>Ôºâ„ÄÇ‰∏∫‰∫ÜÊÄßËÉΩÔºåÊàë‰ª¨Â∞Ü‰∏∫ <code>Circle</code> Âíå <code>Square</code> Êèê‰æõ‰∏§‰∏™ÊûÑÈÄ†ÂáΩÊï∞„ÄÇ</p>
<p>Êèê‰æõ‰∏§‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ôºà‰∏Ä‰∏™Áî®‰∫é lvalueÔºå‰∏Ä‰∏™Áî®‰∫é rvalueÔºâÁ°ÆÂÆûÊúâÊïà‰∏îÈ´òÊïàÔºå‰ΩÜÊàë‰∏ç‰ºöÁß∞‰πã‰∏∫‰ºòÈõÖ„ÄÇÊ≠§Â§ñÔºåÊàë‰ª¨Â∫îËØ•ËÆ©Âêå‰∫ãÈÅøÂÖçÂ§ÑÁêÜËøô‰∫õÈóÆÈ¢ò„ÄÇ</p>
<p>‰∏∫Ê≠§ÔºåÊàë‰ª¨Âà©Áî®‰∫Ü <code>std::function</code> ÁöÑÂÆûÁé∞„ÄÇ<code>std::function</code> Êèê‰æõ‰∫ÜÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÂíåÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂõ†Ê≠§Êàë‰ª¨Áü•ÈÅìÂÆÉÂèØ‰ª•È´òÊïàÂú∞ÁßªÂä®„ÄÇÂΩìÊàë‰ª¨ÈÄöËøáÂÄº‰º†ÈÄí <code>std::function</code> Êó∂ÔºåË¶Å‰πà‰ºöË∞ÉÁî®Êã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÔºåË¶Å‰πà‰ºöË∞ÉÁî®ÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞„ÄÇÂ¶ÇÊûúÊàë‰ª¨‰º†ÈÄíÁöÑÊòØ‰∏Ä‰∏™ lvalueÔºåÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞‰ºöË¢´Ë∞ÉÁî®ÔºåÂ§çÂà∂ lvalue„ÄÇÁÑ∂ÂêéÊàë‰ª¨Â∞ÜËøô‰∏™ÂâØÊú¨ÁßªÂä®Âà∞Êï∞ÊçÆÊàêÂëò‰∏≠„ÄÇÊÄªÂÖ±ÔºåÊàë‰ª¨Â∞ÜÊâßË°å‰∏ÄÊ¨°Êã∑Ë¥ùÂíå‰∏ÄÊ¨°ÁßªÂä®Êù•ÂàùÂßãÂåñ <code>drawer_</code> Êï∞ÊçÆÊàêÂëò„ÄÇÂ¶ÇÊûúÊàë‰ª¨‰º†ÈÄíÁöÑÊòØ‰∏Ä‰∏™ rvalueÔºåÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞‰ºöË¢´Ë∞ÉÁî®ÔºåÁßªÂä® rvalue„ÄÇÁªìÊûúÂèÇÊï∞Á≠ñÁï•Â∞ÜË¢´ÁßªÂä®Âà∞Êï∞ÊçÆÊàêÂëò <code>drawer_</code> ‰∏≠„ÄÇÊÄªÂÖ±ÔºåÊàë‰ª¨Â∞ÜÊâßË°å‰∏§Ê¨°ÁßªÂä®Êìç‰ΩúÊù•ÂàùÂßãÂåñ <code>drawer_</code> Êï∞ÊçÆÊàêÂëò„ÄÇÂõ†Ê≠§ÔºåËøôÁßçÂΩ¢Âºè‰ª£Ë°®‰∫Ü‰∏ÄÁßçÂæàÂ•ΩÁöÑÂ¶•ÂçèÔºöÂÆÉ‰ºòÈõÖÔºåÂá†‰πéÊ≤°ÊúâÊïàÁéá‰∏äÁöÑÂ∑ÆÂºÇ„ÄÇ</p>
<p>‰∏ÄÊó¶Êàë‰ª¨ÈáçÊûÑ‰∫Ü <code>Circle</code> Âíå <code>Square</code> Á±ªÔºåÊàë‰ª¨ÂèØ‰ª•‰ª•‰ªª‰ΩïÂΩ¢ÂºèÂÆûÁé∞‰∏çÂêåÁöÑÁªòÂõæÁ≠ñÁï•Ôºà‰Ωú‰∏∫ÂáΩÊï∞„ÄÅÂáΩÊï∞ÂØπË±°Êàñ lambdaÔºâ„ÄÇ‰æãÂ¶ÇÔºåÊàë‰ª¨ÂèØ‰ª•ÂÆûÁé∞‰ª•‰∏ã <code>OpenGLCircleStrategy</code> ‰Ωú‰∏∫ÂáΩÊï∞ÂØπË±°Ôºö</p>
<p>OpenGLCircleStrategy.h</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">OpenGLCircleStrategy</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">OpenGLCircleStrategy</span><span class="p">(</span><span class="cm">/* Drawing related arguments */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">circle</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* ÁªòÂõæÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÊàêÂëòÔºåÂ¶ÇÈ¢úËâ≤„ÄÅÁ∫πÁêÜÁ≠â */</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂîØ‰∏ÄÈúÄË¶ÅÈÅµÂæ™ÁöÑÁ∫¶ÂÆöÊòØÊàë‰ª¨ÈúÄË¶ÅÊèê‰æõ‰∏Ä‰∏™Ë∞ÉÁî®Êìç‰ΩúÁ¨¶ÔºåËØ•Êìç‰ΩúÁ¨¶Êé•Âèó‰∏Ä‰∏™ <code>Circle</code> ÂíåÂèØËÉΩÂá†‰∏™‰∏éÁªòÂõæÁõ∏ÂÖ≥ÁöÑÂèÇÊï∞ÔºåÂπ∂‰∏î‰∏çËøîÂõû‰ªª‰Ωï‰∏úË•øÔºàÊª°Ë∂≥ÂáΩÊï∞Á±ªÂûã <code>void(Circle const&amp;, /*‚Ä¶*/)</code>Ôºâ„ÄÇ</p>
<p>ÂÅáËÆæÁ±ª‰ººÁöÑÂÆûÁé∞Áî®‰∫é <code>OpenGLSquareStrategy</code>ÔºåÊàë‰ª¨Áé∞Âú®ÂèØ‰ª•ÂàõÂª∫‰∏çÂêåÁßçÁ±ªÁöÑÂΩ¢Áä∂ÔºåÈÖçÁΩÆÊâÄÈúÄÁöÑÁªòÂõæË°å‰∏∫ÔºåÂπ∂ÊúÄÁªàÁªòÂà∂ÂÆÉ‰ª¨Ôºö</p>
<p>main.cpp</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;OpenGLCircleStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;OpenGLSquareStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">Shapes</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Shapes</span> <span class="n">shapes</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∫õÂΩ¢Áä∂ÔºåÊØè‰∏™ÂΩ¢Áä∂ÈÉΩÈÖçÂ§á‰∫ÜÁõ∏Â∫îÁöÑ OpenGL ÁªòÂõæÁ≠ñÁï• 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">2.3</span><span class="p">,</span> <span class="n">OpenGLCircleStrategy</span><span class="p">(</span><span class="cm">/*...red...*/</span><span class="p">)));</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Square</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">OpenGLSquareStrategy</span><span class="p">(</span><span class="cm">/*...green...*/</span><span class="p">)));</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">4.1</span><span class="p">,</span> <span class="n">OpenGLCircleStrategy</span><span class="p">(</span><span class="cm">/*...blue...*/</span><span class="p">)));</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁªòÂà∂ÊâÄÊúâÂΩ¢Áä∂ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">shape</span> <span class="p">:</span> <span class="n">shapes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">shape</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>main()</code> ÂáΩÊï∞‰∏é‰ΩøÁî®ÁªèÂÖ∏Á≠ñÁï•ÂÆûÁé∞ÁöÑÂéüÂßãÂÆûÁé∞ÈùûÂ∏∏Áõ∏‰ººÔºàÂèÇËßÅ‚ÄúÊåáÂçó19Ôºö‰ΩøÁî®Á≠ñÁï•Ê®°ÂºèÈöîÁ¶ªÊìç‰ΩúÊñπÂºè‚ÄùÔºâ„ÄÇÁÑ∂ËÄåÔºåËøôÁßçÈùû‰æµÂÖ•Âºè„ÄÅÊó†Âü∫Á±ªÁöÑÊñπÊ≥ïËøõ‰∏ÄÊ≠•ÂáèÂ∞ë‰∫ÜËÄ¶Âêà„ÄÇËøôÂú®Ëß£ÂÜ≥ÊñπÊ°àÁöÑ‰æùËµñÂÖ≥Á≥ªÂõæ‰∏≠ÂèòÂæóÊòéÊòæÔºàËßÅÂõæ5-9ÔºâÔºöÊàë‰ª¨ÂèØ‰ª•‰ª•‰ªª‰ΩïÂΩ¢ÂºèÂÆûÁé∞ÁªòÂõæÂäüËÉΩÔºà‰Ωú‰∏∫Ëá™Áî±ÂáΩÊï∞„ÄÅÂáΩÊï∞ÂØπË±°Êàñ lambdaÔºâÔºåÂπ∂‰∏î‰∏çÂøÖÈÅµÂÆàÂü∫Á±ªÁöÑË¶ÅÊ±Ç„ÄÇÊ≠§Â§ñÔºåÈÄöËøá <code>std::function</code>ÔºåÊàë‰ª¨Ëá™Âä®ÂèçËΩ¨‰∫Ü‰æùËµñÂÖ≥Á≥ªÔºàÂèÇËßÅ‚ÄúÊåáÂçó9ÔºöÊ≥®ÊÑèÊäΩË±°ÁöÑÊâÄÊúâÊùÉ‚ÄùÔºâ„ÄÇ</p>
<p><strong>ÊÄßËÉΩÂü∫ÂáÜÊµãËØï</strong></p>
<p>‚ÄúÊàëÂñúÊ¨¢ËøôÁßçÁÅµÊ¥ªÊÄß„ÄÅËá™Áî±Â∫¶„ÄÇËøôÂ§™Ê£í‰∫ÜÔºÅ‰ΩÜÊòØÊÄßËÉΩÂë¢Ôºü‚Äù ÊòØÁöÑÔºåÂ∞±ÂÉè‰∏Ä‰∏™ÁúüÊ≠£ÁöÑC++ÂºÄÂèëËÄÖ‰ºöËØ¥ÁöÑÈÇ£Ê†∑„ÄÇÂΩìÁÑ∂ÔºåÊÄßËÉΩÈùûÂ∏∏ÈáçË¶Å„ÄÇ‰ΩÜÂú®Â±ïÁ§∫ÊÄßËÉΩÁªìÊûú‰πãÂâçÔºåËÆ©ÊàëÂÖàÊèêÈÜí‰Ω†Êàë‰ª¨Áî®Êù•Ëé∑ÂèñË°®4-2Ôºà‚ÄúÊåáÂçó16Ôºö‰ΩøÁî®ËÆøÈóÆËÄÖÊ®°ÂºèÊâ©Â±ïÊìç‰Ωú‚ÄùÔºâÊï∞ÊçÆÁöÑÂü∫ÂáÜÂú∫ÊôØ„ÄÇÂØπ‰∫éÂü∫ÂáÜÊµãËØïÔºåÊàëÂÆûÁé∞‰∫ÜÂõõÁßç‰∏çÂêåÁ±ªÂûãÁöÑÂΩ¢Áä∂ÔºàÂúÜÂΩ¢„ÄÅÊ≠£ÊñπÂΩ¢„ÄÅÊ§≠ÂúÜÂíåÁü©ÂΩ¢Ôºâ„ÄÇÂÜçÊ¨°ËøêË°å25,000Ê¨°Âπ≥ÁßªÊìç‰ΩúÂú®10,000‰∏™ÈöèÊú∫ÂàõÂª∫ÁöÑÂΩ¢Áä∂‰∏ä„ÄÇÊàë‰ΩøÁî®‰∫ÜGCC 11.1ÂíåClang 11.1‰∏§‰∏™ÁºñËØëÂô®ÔºåÂπ∂‰∏îÂè™Ê∑ªÂä†‰∫Ü <code>-O3</code> Âíå <code>-DNDEBUG</code> ÁºñËØëÊ†áÂøó„ÄÇÂπ≥Âè∞ÊòØÊê≠ËΩΩ8Ê†∏Intel Core i7Â§ÑÁêÜÂô®Ôºà3.8 GHzÔºâ„ÄÅ64 GBÂÜÖÂ≠òÁöÑmacOS Big SurÔºàÁâàÊú¨11.4Ôºâ„ÄÇ</p>
<p>Êúâ‰∫ÜËøô‰∫õ‰ø°ÊÅØÔºå‰Ω†Â∞±ÂèØ‰ª•ÂáÜÂ§áÂ•ΩÊü•ÁúãÊÄßËÉΩÁªìÊûú‰∫Ü„ÄÇË°®5-1Â±ïÁ§∫‰∫ÜÂü∫‰∫éÁ≠ñÁï•ÂÆûÁé∞ÁöÑÁªòÂõæÁ§∫‰æã‰ª•Âèä‰ΩøÁî® <code>std::function</code> ÁöÑËß£ÂÜ≥ÊñπÊ°àÁöÑÊÄßËÉΩÊï∞Â≠ó„ÄÇ</p>
<p><strong>Ë°®5-1 ‰∏çÂêåÁ≠ñÁï•ÂÆûÁé∞ÁöÑÊÄßËÉΩÁªìÊûú</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Á≠ñÁï•ÂÆûÁé∞</th>
<th>GCC 11.1</th>
<th>Clang 11.1</th>
</tr>
</thead>
<tbody>
<tr>
<td>Èù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°à</td>
<td>1.5205 s</td>
<td>1.1480 s</td>
</tr>
<tr>
<td>‰ΩøÁî® <code>std::function</code></td>
<td>2.1782 s</td>
<td>1.4884 s</td>
</tr>
<tr>
<td>ÊâãÂä®ÂÆûÁé∞ <code>std::function</code></td>
<td>1.6354 s</td>
<td>-</td>
</tr>
<tr>
<td>ÁªèÂÖ∏Á≠ñÁï•ÂÆûÁé∞</td>
<td>1.4465 s</td>
<td>1.6372 s</td>
</tr>
</tbody>
</table></div>
<p>‰∏∫‰∫ÜÂèÇËÄÉÔºåÁ¨¨‰∏ÄË°åÊòæÁ§∫‰∫ÜÊù•Ëá™‚ÄúÊåáÂçó15ÔºöËÆæËÆ°‰ª•Â¢ûÂä†Á±ªÂûãÊàñÊìç‰Ωú‚ÄùÁöÑÈù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°àÁöÑÊÄßËÉΩ„ÄÇÂ¶Ç‰Ω†ÊâÄËßÅÔºåËøô‰∏™Ëß£ÂÜ≥ÊñπÊ°àÊèê‰æõ‰∫ÜÊúÄ‰Ω≥ÊÄßËÉΩ„ÄÇÁÑ∂ËÄåÔºåËøô‰∏çÊòØÊÑèÂ§ñÁöÑÁªìÊûúÔºöÁî±‰∫éÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÊó†ËÆ∫ÂÆûÈôÖÂÆûÁé∞Â¶Ç‰ΩïÈÉΩ‰ºöÂºïÂÖ•È¢ùÂ§ñÁöÑÂºÄÈîÄÔºåÂõ†Ê≠§ÊÄßËÉΩÈ¢ÑÊúü‰ºöÊúâÊâÄÈôç‰Ωé„ÄÇ</p>
<p>‰∏çËøáÔºåÊÑèÊÉ≥‰∏çÂà∞ÁöÑÊòØÔºå<code>std::function</code> ÂÆûÁé∞Â∏¶Êù•‰∫ÜÊÄßËÉΩÂºÄÈîÄÔºàÁâπÂà´ÊòØÂú®GCCÁöÑÊÉÖÂÜµ‰∏ãÊòæËëóÔºâ„ÄÇ‰ΩÜËØ∑Á®çÁ≠âÔºåÂú®‰Ω†Â∞ÜËøôÁßçÊñπÊ≥ïÊâîËøõÂøÉÁêÜÂûÉÂúæÊ°∂‰πãÂâçÔºåËØ∑ËÄÉËôëÁ¨¨‰∏âË°å„ÄÇÂÆÉÂ±ïÁ§∫‰∫Ü‰ΩøÁî®Á±ªÂûãÊì¶Èô§ÊäÄÊúØÁöÑÊâãÂä®ÂÆûÁé∞ <code>std::function</code>ÔºåËøôÈ°πÊäÄÊúØÂ∞ÜÂú®Á¨¨8Á´†Ëß£Èáä„ÄÇËøô‰∏™ÂÆûÁé∞Ë°®Áé∞ÂæóÊõ¥Â•ΩÔºåÂÆûÈôÖ‰∏ä‰∏éÁªèÂÖ∏Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÂÆûÁé∞‰∏ÄÊ†∑Â•ΩÔºàÊàñÂØπClangÊù•ËØ¥Âá†‰πé‰∏ÄÊ†∑Â•ΩÔºâ„ÄÇËøô‰∏ÄÁªìÊûúË°®ÊòéÈóÆÈ¢ò‰∏çÂú®‰∫éÂÄºËØ≠‰πâÔºåËÄåÊòØ <code>std::function</code> ÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÁªÜËäÇ„ÄÇÊÄª‰πãÔºå‰ªéÊÄßËÉΩËßíÂ∫¶Êù•ÁúãÔºåÂü∫‰∫éÂÄºËØ≠‰πâÁöÑÊñπÊ≥ïÂπ∂‰∏çÊØîÁªèÂÖ∏ÊñπÊ≥ïÂ∑ÆÔºåÂèçËÄåÂ¶ÇÂâçÊâÄËø∞ÔºåÂÆÉÊîπÂñÑ‰∫ÜËÆ∏Â§ö‰ª£Á†ÅÁöÑÈáçË¶ÅÊñπÈù¢„ÄÇ</p>
<p><strong>ÂàÜÊûê <code>std::function</code> Ëß£ÂÜ≥ÊñπÊ°àÁöÑ‰∏çË∂≥</strong></p>
<p>ÊÄª‰ΩìËÄåË®ÄÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑ <code>std::function</code> ÂÆûÁé∞Êèê‰æõ‰∫ÜËÆ∏Â§öÂ•ΩÂ§Ñ„ÄÇÈ¶ñÂÖàÔºå‰Ω†ÁöÑ‰ª£Á†ÅÂèòÂæóÊõ¥Ê∏ÖÊô∞ÊòìËØªÔºåÂõ†‰∏∫‰Ω†‰∏çÂøÖÂ§ÑÁêÜÊåáÈíàÂèäÂÖ∂Áõ∏ÂÖ≥ÁöÑÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜÔºà‰æãÂ¶ÇÔºå‰ΩøÁî® <code>std::unique_ptr</code>ÔºâÔºå‰πü‰∏çÂøÖÁªèÂéÜÈÄöÂ∏∏ÁöÑÂºïÁî®ËØ≠‰πâÈóÆÈ¢òÔºàÂèÇËßÅ‚ÄúÊåáÂçó22Ôºö‰ºòÂÖà‰ΩøÁî®ÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ‚ÄùÔºâ„ÄÇÂÖ∂Ê¨°Ôºå‰Ω†‰øÉËøõ‰∫ÜÊùæËÄ¶Âêà„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå<code>std::function</code> Ëµ∑Âà∞‰∫ÜÁºñËØëÈò≤ÁÅ´Â¢ôÁöÑ‰ΩúÁî®Ôºå‰øùÊä§‰Ω†ÂÖçÂèó‰∏çÂêåÁ≠ñÁï•ÂÆûÁé∞ÁöÑÂÆûÁé∞ÁªÜËäÇÂΩ±ÂìçÔºåÂêåÊó∂‰∏∫ÂºÄÂèë‰∫∫ÂëòÊèê‰æõ‰∫ÜÂ∑®Â§ßÁöÑÁÅµÊ¥ªÊÄßÊù•ÂÆûÁé∞‰∏çÂêåÁöÑÁ≠ñÁï•Ëß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>Â∞ΩÁÆ°ÊúâËøô‰∫õ‰ºòÁÇπÔºåÊ≤°Êúâ‰∏ÄÁßçËß£ÂÜ≥ÊñπÊ°àÊòØÊ≤°ÊúâÁº∫ÁÇπÁöÑ‚Äî‚ÄîÂç≥‰ΩøÊòØ <code>std::function</code> ÊñπÊ≥ï‰πüÊúâÂÖ∂Âä£Âäø„ÄÇÊàëÂ∑≤ÁªèÊåáÂá∫ÔºåÂ¶ÇÊûú‰Ω†‰æùËµñÊ†áÂáÜÂÆûÁé∞ÔºåÂèØËÉΩ‰ºöÂ≠òÂú®ÊÄßËÉΩÂä£Âäø„ÄÇËôΩÁÑ∂Êúâ‰∏Ä‰∫õËß£ÂÜ≥ÊñπÊ°àÂèØ‰ª•ÊúÄÂ∞èÂåñËøôÁßçÂΩ±ÂìçÔºàÂèÇËßÅÁ¨¨8Á´†ÔºâÔºå‰ΩÜÂÆÉ‰ªçÁÑ∂ÊòØ‰Ω†Âú®‰ª£Á†ÅÂ∫ì‰∏≠ÈúÄË¶ÅËÄÉËôëÁöÑÂõ†Á¥†„ÄÇ</p>
<p>ËøòÊúâ‰∏Ä‰∏™ËÆæËÆ°Áõ∏ÂÖ≥ÁöÑÈóÆÈ¢ò„ÄÇ<code>std::function</code> Âè™ËÉΩÊõøÊç¢Âçï‰∏™ËôöÂáΩÊï∞„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊäΩË±°Â§ö‰∏™ËôöÂáΩÊï∞ÔºåËøôÁßçÊÉÖÂÜµÂèØËÉΩÂá∫Áé∞Âú®‰Ω†ÊÉ≥‰ΩøÁî®Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÈÖçÁΩÆÂ§ö‰∏™ÊñπÈù¢Êó∂ÔºåÊàñËÄÖ‰Ω†ÈúÄË¶ÅÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè‰∏≠ÁöÑ <code>undo()</code> ÂáΩÊï∞Êó∂Ôºå‰Ω†Â∞Ü‰∏çÂæó‰∏ç‰ΩøÁî®Â§ö‰∏™ <code>std::function</code> ÂÆû‰æã„ÄÇËøô‰∏ç‰ªÖ‰ºöÂõ†‰∏∫Â§ö‰∏™Êï∞ÊçÆÊàêÂëòËÄåÂ¢ûÂä†Á±ªÁöÑÂ§ßÂ∞èÔºåËøò‰ºöÂõ†‰∏∫Â¶Ç‰Ωï‰ºòÈõÖÂú∞Â§ÑÁêÜ‰º†ÈÄíÂ§ö‰∏™ <code>std::function</code> ÂÆû‰æãÁöÑÈóÆÈ¢òËÄåÂ∏¶Êù•Êé•Âè£Ë¥üÊãÖ„ÄÇÂõ†Ê≠§Ôºå<code>std::function</code> ÊñπÊ≥ïÊúÄÈÄÇÂêàÁî®‰∫éÊõøÊç¢Âçï‰∏ÄÊàñÈùûÂ∏∏Â∞ëÈáèÁöÑËôöÂáΩÊï∞„ÄÇ‰∏çËøáÔºåËøôÂπ∂‰∏çÊÑèÂë≥ÁùÄ‰Ω†‰∏çËÉΩÂØπÂ§ö‰∏™ËôöÂáΩÊï∞‰ΩøÁî®Âü∫‰∫éÂÄºÁöÑÊñπÊ≥ïÔºöÂ¶ÇÊûúÈÅáÂà∞ËøôÁßçÊÉÖÂÜµÔºåÂèØ‰ª•ËÄÉËôëÈÄöËøáÁõ¥Êé•Â∫îÁî® <code>std::function</code> ÊäÄÊúØÂà∞‰Ω†ÁöÑÁ±ªÂûã‰∏äÊù•Ê≥õÂåñËØ•ÊñπÊ≥ï„ÄÇÊàëÂ∞ÜÂú®Á¨¨8Á´†Ëß£ÈáäÂ¶Ç‰ΩïÂÅöÂà∞Ëøô‰∏ÄÁÇπ„ÄÇ</p>
<p>Â∞ΩÁÆ°ÊúâËøô‰∫õ‰∏çË∂≥‰πãÂ§ÑÔºåÂü∫‰∫éÂÄºËØ≠‰πâÁöÑÊñπÊ≥ïË¢´ËØÅÊòéÊòØÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏Ä‰∏™Áªù‰Ω≥ÈÄâÊã©„ÄÇÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè‰πüÊòØÂ¶ÇÊ≠§„ÄÇÂõ†Ê≠§ÔºåËØ∑ËÆ∞‰ΩèËøôÊù°ÊåáÂçó‰Ωú‰∏∫ËøàÂêëÁé∞‰ª£C++ÁöÑÈáçË¶ÅÊ≠•È™§„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>ËÄÉËôë‰ΩøÁî® <code>std::function</code> Êù•ÂÆûÁé∞Á≠ñÁï•ÊàñÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li>Ê≥®ÊÑè <code>std::function</code> ÁöÑÊÄßËÉΩÂä£Âäø„ÄÇ</li>
<li>‰∫ÜËß£Á±ªÂûãÊì¶Èô§ÊòØÁ≠ñÁï•ÂíåÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè‰∏≠ÂÄºËØ≠‰πâÊñπÊ≥ïÁöÑ‰∏ÄËà¨Âåñ„ÄÇ</li>
</ul>
<h2 id="Á¨¨ÂÖ≠Á´†-ÈÄÇÈÖçÂô®ËßÇÂØüËÄÖÂíåcrtpËÆæËÆ°Ê®°Âºè">Á¨¨ÂÖ≠Á´† ÈÄÇÈÖçÂô®„ÄÅËßÇÂØüËÄÖÂíåCRTPËÆæËÆ°Ê®°Âºè
</h2><p>Âú®Êú¨Á´†‰∏≠ÔºåÊàë‰ª¨Â∞ÜÊ≥®ÊÑèÂäõËΩ¨Âêë‰∏â‰∏™ÂøÖÈ°ª‰∫ÜËß£ÁöÑËÆæËÆ°Ê®°ÂºèÔºö‰∏§‰∏™GoFÔºàGang of FourÔºåÂõõ‰∫∫ÁªÑÔºâËÆæËÆ°Ê®°Âºè‚Äî‚ÄîÈÄÇÈÖçÂô®ÔºàAdapterÔºâÂíåËßÇÂØüËÄÖÔºàObserverÔºâÔºå‰ª•ÂèäÂ•áÁâπÁöÑÈÄíÂΩíÊ®°ÊùøÊ®°ÂºèÔºàCuriously Recurring Template Pattern, CRTPÔºâËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p><strong>ÂáÜÂàô24Ôºö‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£</strong></p>
<p>Âú®‚ÄúÂáÜÂàô24Ôºö‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£‚Äù‰∏≠ÔºåÊàë‰ª¨Â∞ÜËÆ®ËÆ∫Â¶Ç‰ΩïÈÄöËøáÈÄÇÈÖçÊé•Âè£‰Ωø‰∏çÂÖºÂÆπÁöÑ‰∫ãÁâ©ÂçèÂêåÂ∑•‰Ωú„ÄÇ‰∏∫Ê≠§ÔºåÊàëÂ∞ÜÂêë‰Ω†Â±ïÁ§∫ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÂèäÂÖ∂Âú®ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÂíåÊ≥õÂûãÁºñÁ®ã‰∏≠ÁöÑÂ∫îÁî®„ÄÇ‰Ω†ËøòÂ∞ÜËé∑Âæó‰∏çÂêåÁ±ªÂûãÈÄÇÈÖçÂô®ÁöÑÊ¶ÇËø∞ÔºåÂåÖÊã¨ÂØπË±°ÈÄÇÈÖçÂô®„ÄÅÁ±ªÈÄÇÈÖçÂô®ÂíåÂáΩÊï∞ÈÄÇÈÖçÂô®„ÄÇ</p>
<p><strong>ÂáÜÂàô25ÔºöÂ∫îÁî®ËßÇÂØüËÄÖ‰Ωú‰∏∫ÊäΩË±°ÈÄöÁü•Êú∫Âà∂</strong></p>
<p>Âú®‚ÄúÂáÜÂàô25ÔºöÂ∫îÁî®ËßÇÂØüËÄÖ‰Ωú‰∏∫ÊäΩË±°ÈÄöÁü•Êú∫Âà∂‚Äù‰∏≠ÔºåÊàë‰ª¨Â∞ÜËÆ®ËÆ∫Â¶Ç‰ΩïËßÇÂØüÁä∂ÊÄÅÂèòÂåñÂπ∂Êé•Êî∂Áõ∏ÂÖ≥ÈÄöÁü•„ÄÇÂú®Ê≠§ËÉåÊôØ‰∏ãÔºåÊàëÂ∞ÜÂêë‰Ω†‰ªãÁªçËßÇÂØüËÄÖËÆæËÆ°Ê®°ÂºèÔºåËøôÊòØÊúÄËëóÂêç‰∏îÊúÄÂ∏∏Áî®ÁöÑÊ®°Âºè‰πã‰∏Ä„ÄÇÊàë‰ª¨Â∞ÜËÆ®ËÆ∫ÁªèÂÖ∏ÁöÑGoFÈ£éÊ†ºËßÇÂØüËÄÖÊ®°ÂºèÔºå‰ª•ÂèäÂ¶Ç‰ΩïÂú®Áé∞‰ª£C++‰∏≠ÂÆûÁé∞ËßÇÂØüËÄÖÊ®°Âºè„ÄÇ</p>
<p><strong>ÂáÜÂàô26Ôºö‰ΩøÁî®CRTPÂºïÂÖ•ÈùôÊÄÅÁ±ªÂûãÂàÜÁ±ª</strong></p>
<p>Âú®‚ÄúÂáÜÂàô26Ôºö‰ΩøÁî®CRTPÂºïÂÖ•ÈùôÊÄÅÁ±ªÂûãÂàÜÁ±ª‚Äù‰∏≠ÔºåÊàë‰ª¨Â∞ÜÂÖ≥Ê≥®CRTP„ÄÇÊàëÂ∞ÜÂêë‰Ω†Â±ïÁ§∫Â¶Ç‰Ωï‰ΩøÁî®CRTPÂÆö‰πâ‰∏ÄÁªÑÁõ∏ÂÖ≥Á±ªÂûãÁöÑÁºñËØëÊó∂ÂÖ≥Á≥ªÔºå‰ª•ÂèäÂ¶Ç‰ΩïÊ≠£Á°ÆÂÆûÁé∞CRTPÂü∫Á±ª„ÄÇ</p>
<p><strong>ÂáÜÂàô27Ôºö‰ΩøÁî®CRTPÂàõÂª∫ÈùôÊÄÅÊ∑∑ÂêàÁ±ª</strong></p>
<p>Âú®‚ÄúÂáÜÂàô27Ôºö‰ΩøÁî®CRTPÂàõÂª∫ÈùôÊÄÅÊ∑∑ÂêàÁ±ª‚Äù‰∏≠ÔºåÊàëÂ∞ÜÁªßÁª≠ËÆ≤Ëø∞CRTPÁöÑÂ∫îÁî®ÔºåÂ±ïÁ§∫Â¶Ç‰Ωï‰ΩøÁî®CRTPÂàõÂª∫ÁºñËØëÊó∂Ê∑∑ÂêàÁ±ª„ÄÇÊàë‰ª¨ËøòÂ∞ÜÁúãÂà∞ËØ≠‰πâÁªßÊâø‰∏éÊäÄÊúØÁªßÊâø‰πãÈó¥ÁöÑÂå∫Âà´ÔºöËØ≠‰πâÁªßÊâøÁî®‰∫éÂàõÂª∫ÊäΩË±°ÔºåËÄåÊäÄÊúØÁªßÊâø‰ªÖ‰Ωú‰∏∫ÂÆûÁé∞ÁªÜËäÇÔºåÁî®‰∫éÊèêÈ´òÊäÄÊúØ‰∏äÁöÑ‰ºòÈõÖÊÄßÂíå‰æøÂà©ÊÄß„ÄÇ</p>
<h3 id="ÂáÜÂàô24‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£">ÂáÜÂàô24Ôºö‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£
</h3><p>ÂÅáËÆæ‰Ω†Â∑≤ÁªèÂÆûÁé∞‰∫Ü‚ÄúÂáÜÂàô3ÔºöÂàÜÁ¶ªÊé•Âè£‰ª•ÈÅøÂÖç‰∫∫‰∏∫ËÄ¶Âêà‚Äù‰∏≠ÁöÑÊñáÊ°£Á§∫‰æãÔºåÂπ∂‰∏îÂõ†‰∏∫‰Ω†‰∏•Ê†ºÈÅµÂæ™Êé•Âè£ÈöîÁ¶ªÂéüÂàôÔºàISPÔºâÔºå‰Ω†ÂØπÂÆÉÁöÑËøê‰ΩúÊñπÂºèÁõ∏ÂΩìÊª°ÊÑèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">JSONExportable</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">virtual</span> <span class="o">~</span><span class="n">JSONExportable</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Serializable</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">virtual</span> <span class="o">~</span><span class="n">Serializable</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Document</span> 
</span></span><span class="line"><span class="cl">   <span class="o">:</span> <span class="k">public</span> <span class="n">JSONExportable</span> 
</span></span><span class="line"><span class="cl">   <span class="p">,</span> <span class="k">public</span> <span class="n">Serializable</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ËÄåÔºåÊúâ‰∏ÄÂ§©‰Ω†ÈúÄË¶ÅÂºïÂÖ•PagesÊñáÊ°£Ê†ºÂºè„ÄÇÂΩìÁÑ∂ÔºåÂÆÉ‰∏é‰Ω†Â∑≤ÊúâÁöÑWordÊñáÊ°£Ê†ºÂºèÁõ∏‰ººÔºå‰ΩÜ‰∏çÂπ∏ÁöÑÊòØÔºå‰Ω†‰∏çÁÜüÊÇâPagesÊ†ºÂºèÁöÑÂÖ∑‰ΩìÁªÜËäÇ„ÄÇÊõ¥Á≥üÁ≥ïÁöÑÊòØÔºåÁî±‰∫é‰Ω†ÊúâÂæàÂ§öÂÖ∂‰ªñ‰∫ãÊÉÖË¶ÅÂÅöÔºåÊ≤°ÊúâÂ§™Â§öÊó∂Èó¥ÂéªÁÜüÊÇâËøôÁßçÊ†ºÂºè„ÄÇ</p>
<p>Âπ∏ËøêÁöÑÊòØÔºå‰Ω†Áü•ÈÅìÊúâ‰∏Ä‰∏™Áõ∏ÂΩìÂêàÁêÜÁöÑÂºÄÊ∫êÂÆûÁé∞‚Äî‚ÄîOpenPagesÁ±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OpenPages</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kt">void</span> <span class="n">convertToBytes</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">exportToJSONFormat</span><span class="p">(</span><span class="n">OpenPages</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">pages</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ªéÂ•ΩÁöÑÊñπÈù¢Êù•ÁúãÔºåËøô‰∏™Á±ªÂá†‰πéÊèê‰æõ‰∫Ü‰Ω†ÊâÄÈúÄÁöÑ‰∏ÄÂàáÔºö‰∏Ä‰∏™Áî®‰∫éÂ∫èÂàóÂåñÊñáÊ°£ÂÜÖÂÆπÁöÑ<code>convertToBytes()</code>ÊàêÂëòÂáΩÊï∞Ôºå‰ª•Âèä‰∏Ä‰∏™Â∞ÜPagesÊñáÊ°£ËΩ¨Êç¢‰∏∫JSONÊ†ºÂºèÁöÑËá™Áî±ÂáΩÊï∞<code>exportToJSONFormat()</code>„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÂÆÉ‰∏çÁ¨¶Âêà‰Ω†ÁöÑÊé•Âè£ÊúüÊúõÔºö‰Ω†Â∏åÊúõÊúâ‰∏Ä‰∏™<code>serialize()</code>ÊàêÂëòÂáΩÊï∞ËÄå‰∏çÊòØ<code>convertToBytes()</code>ÊàêÂëòÂáΩÊï∞„ÄÇÂπ∂‰∏î‰Ω†Â∏åÊúõÊúâ‰∏Ä‰∏™<code>exportToJSON()</code>ÊàêÂëòÂáΩÊï∞ËÄå‰∏çÊòØËá™Áî±ÂáΩÊï∞<code>exportToJSONFormat()</code>„ÄÇÊúÄÁªàÔºåÁ¨¨‰∏âÊñπÁ±ªÂπ∂Ê≤°ÊúâÁªßÊâøËá™‰Ω†ÁöÑ<code>Document</code>Âü∫Á±ªÔºåËøôÊÑèÂë≥ÁùÄ‰Ω†Êó†Ê≥ïËΩªÊùæÂú∞Â∞ÜÂÖ∂Êï¥ÂêàÂà∞Áé∞ÊúâÁöÑÁ±ªÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠„ÄÇ‰∏çËøáÔºåËøô‰∏™ÈóÆÈ¢òÊúâ‰∏Ä‰∏™Ëß£ÂÜ≥ÊñπÊ°àÔºö‰ΩøÁî®ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèËøõË°åÊó†ÁºùÈõÜÊàê„ÄÇ</p>
<p><strong>‰ΩøÁî®ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèËøõË°åÊó†ÁºùÈõÜÊàê</strong></p>
<p>‰∏∫‰∫Ü‰Ωø<code>OpenPages</code>Á±ªÈÄÇÂ∫î‰Ω†ÁöÑÁé∞ÊúâÊé•Âè£Ôºå‰Ω†ÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™ÈÄÇÈÖçÂô®Á±ª„ÄÇÈÄÇÈÖçÂô®Á±ªÂ∞ÜÂÖÖÂΩìÊ°•Ê¢ÅÔºå‰ΩøÂæó<code>OpenPages</code>Á±ªËÉΩÂ§üÁ¨¶Âêà‰Ω†ÁöÑÊé•Âè£Ë¶ÅÊ±Ç„ÄÇ‰ª•‰∏ãÊòØÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// ÈÄÇÈÖçÂô®Á±ªÔºå‰ΩøOpenPagesÁ±ªÁ¨¶ÂêàSerializableÂíåJSONExportableÊé•Âè£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">OpenPagesAdapter</span> <span class="o">:</span> <span class="k">public</span> <span class="n">JSONExportable</span><span class="p">,</span> <span class="k">public</span> <span class="n">Serializable</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">OpenPages</span> <span class="n">openPages</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">OpenPagesAdapter</span><span class="p">(</span><span class="k">const</span> <span class="n">OpenPages</span><span class="o">&amp;</span> <span class="n">op</span><span class="p">)</span> <span class="o">:</span> <span class="n">openPages</span><span class="p">(</span><span class="n">op</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂÆûÁé∞SerializableÊé•Âè£ÁöÑserializeÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">openPages</span><span class="p">.</span><span class="n">convertToBytes</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Â∞ÜconvertToBytesÁöÑÁªìÊûúÂÜôÂÖ•ByteStream
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// ËøôÈáåÂÅáËÆæÊúâ‰∏Ä‰∫õÈÄªËæëÂ∞ÜÂ≠óËäÇÊï∞ÊçÆÂÜôÂÖ•bs
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂÆûÁé∞JSONExportableÊé•Âè£ÁöÑexportToJSONÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="nf">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">exportToJSONFormat</span><span class="p">(</span><span class="n">openPages</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ΩøÁî®ÈÄÇÈÖçÂô®Á±ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">OpenPages</span> <span class="n">op</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">OpenPagesAdapter</span> <span class="n">adapter</span><span class="p">(</span><span class="n">op</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Áé∞Âú®ÂèØ‰ª•ÂÉè‰ΩøÁî®DocumentÁ±ª‰∏ÄÊ†∑‰ΩøÁî®adapter
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">ByteStream</span> <span class="n">bs</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">adapter</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">adapter</span><span class="p">.</span><span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáËøôÁßçÊñπÂºèÔºå‰Ω†ÂèØ‰ª•Êó†ÁºùÂú∞Â∞Ü<code>OpenPages</code>Á±ªÈõÜÊàêÂà∞‰Ω†ÁöÑÁé∞ÊúâÁ≥ªÁªü‰∏≠ÔºåËÄåÊó†ÈúÄ‰øÆÊîπÂÖ∂ÂéüÂßãÂÆûÁé∞„ÄÇÈÄÇÈÖçÂô®Á±ªËµ∑Âà∞‰∫ÜÊ°•Ê¢ÅÁöÑ‰ΩúÁî®Ôºå‰ΩøÂæó<code>OpenPages</code>Á±ªËÉΩÂ§üÁ¨¶Âêà‰Ω†ÁöÑÊé•Âè£Ê†áÂáÜ„ÄÇ</p>
<p><strong>ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèËß£Êûê</strong></p>
<p>ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÊòØÁªèÂÖ∏ÁöÑGoFÔºàÂõõ‰∫∫ÁªÑÔºâËÆæËÆ°Ê®°Âºè‰πã‰∏Ä„ÄÇÂÆÉ‰∏ìÊ≥®‰∫éÊ†áÂáÜÂåñÊé•Âè£ÔºåÂπ∂Â∏ÆÂä©Èùû‰æµÂÖ•ÊÄßÂú∞ÂêëÁé∞ÊúâÁöÑÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠Ê∑ªÂä†ÂäüËÉΩ„ÄÇ</p>
<p><strong>ÊÑèÂõæÔºö</strong> ‚ÄúÂ∞Ü‰∏Ä‰∏™Á±ªÁöÑÊé•Âè£ËΩ¨Êç¢‰∏∫ÂÆ¢Êà∑ÊúüÊúõÁöÑÂè¶‰∏Ä‰∏™Êé•Âè£„ÄÇÈÄÇÈÖçÂô®‰ΩøÂæóÂéüÊú¨Áî±‰∫éÊé•Âè£‰∏çÂÖºÂÆπËÄåÊó†Ê≥ïÂçèÂêåÂ∑•‰ΩúÁöÑÁ±ªËÉΩÂ§ü‰∏ÄËµ∑Â∑•‰Ωú„ÄÇ‚Äù</p>
<p>Âõæ6-1Â±ïÁ§∫‰∫Ü‰Ω†ÁöÑÈÄÇÈÖçÂô®Âú∫ÊôØÁöÑUMLÂõæÔºö‰Ω†Â∑≤ÁªèÊúâ‰∫Ü<code>Document</code>Âü∫Á±ªÔºàÊàë‰ª¨ÊöÇÊó∂ÂøΩÁï•<code>JSONExportable</code>Âíå<code>Serializable</code>Êé•Âè£ÔºâÔºåÂπ∂‰∏îÂ∑≤ÁªèÂÆûÁé∞‰∫ÜÂá†Áßç‰∏çÂêåÁ±ªÂûãÁöÑÊñáÊ°£Ôºà‰æãÂ¶ÇÔºå‰ΩøÁî®<code>Word</code>Á±ªÔºâ„ÄÇËøô‰∏™Â±ÇÊ¨°ÁªìÊûÑÁöÑÊñ∞ÊàêÂëòÊòØ<code>Pages</code>Á±ª„ÄÇ</p>
<p><code>Pages</code>Á±ªÂÖÖÂΩìÁ¨¨‰∏âÊñπ<code>OpenPages</code>Á±ªÁöÑÂåÖË£ÖÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Pages</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Document</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kt">void</span> <span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">       <span class="n">exportToJSONFormat</span><span class="p">(</span><span class="n">pages</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">       <span class="n">pages</span><span class="p">.</span><span class="n">convertToBytes</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">OpenPages</span> <span class="n">pages</span><span class="p">;</span>  <span class="c1">// ÂØπË±°ÈÄÇÈÖçÂô®ÁöÑ‰æãÂ≠ê 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Pages</code>ÈÄöËøáÂ∞ÜË∞ÉÁî®ËΩ¨ÂèëÂà∞Áõ∏Â∫îÁöÑ<code>OpenPages</code>ÂáΩÊï∞Êù•ÂÆûÁé∞<code>Document</code>Êé•Âè£ÔºöÂØπ<code>exportToJSON()</code>ÁöÑË∞ÉÁî®Ë¢´ËΩ¨ÂèëÂà∞Ëá™Áî±ÂáΩÊï∞<code>exportToJSONFormat()</code>ÔºåËÄåÂØπ<code>serialize()</code>ÁöÑË∞ÉÁî®ÂàôË¢´ËΩ¨ÂèëÂà∞ÊàêÂëòÂáΩÊï∞<code>convertToBytes()</code>„ÄÇ</p>
<p>Êúâ‰∫Ü<code>Pages</code>Á±ªÔºå‰Ω†ÂèØ‰ª•ËΩªÊùæÂú∞Â∞ÜÁ¨¨‰∏âÊñπÂÆûÁé∞ÈõÜÊàêÂà∞Áé∞ÊúâÁöÑÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠„ÄÇÈùûÂ∏∏ÂÆπÊòìÂÅöÂà∞Ëøô‰∏ÄÁÇπÔºö‰Ω†ÂèØ‰ª•Âú®‰∏ç‰øÆÊîπÂÖ∂‰ªª‰Ωï‰ª£Á†ÅÁöÑÊÉÖÂÜµ‰∏ãËøõË°åÈõÜÊàê„ÄÇËøôÁßçÈùû‰æµÂÖ•ÊÄßÁöÑÁâπÊÄßÊ≠£ÊòØÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÁöÑÊúÄÂ§ß‰ºòÂäø‰πã‰∏ÄÔºö‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•ÈÄöËøáÊ∑ªÂä†ÈÄÇÈÖçÂô®Êù•ÈÄÇÂ∫î‰∏Ä‰∏™Êé•Âè£‰ª•ÂåπÈÖçÂè¶‰∏Ä‰∏™Áé∞ÊúâÊé•Âè£„ÄÇ</p>
<p>Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå<code>Pages</code>Á±ª‰Ωú‰∏∫ÂØπ<code>OpenPages</code>Á±ªÂÆûÈôÖÂÆûÁé∞ÁªÜËäÇÁöÑÊäΩË±°„ÄÇÂõ†Ê≠§ÔºåÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÂ∞ÜÊé•Âè£ÁöÑÂÖ≥Ê≥®ÁÇπ‰∏éÂÆûÁé∞ÁªÜËäÇÂàÜÁ¶ª„ÄÇËøôÂæàÂ•ΩÂú∞Á¨¶ÂêàÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÔºåÂπ∂‰∏éÂºÄÈó≠ÂéüÂàôÔºàOCPÔºâÁöÑÊÑèÂõæÁõ∏Â•ëÂêàÔºàÂèÇËßÅ‚ÄúÊåáÂçó2Ôºö‰∏∫ÂèòÂåñËÆæËÆ°‚ÄùÂíå‚ÄúÊåáÂçó5Ôºö‰∏∫Êâ©Â±ïËÆæËÆ°‚ÄùÔºâ„ÄÇ</p>
<p>ÊüêÁßçÁ®ãÂ∫¶‰∏äÔºå<code>Pages</code>ÈÄÇÈÖçÂô®‰Ωú‰∏∫‰∏Ä‰∏™Èó¥Êé•Â±ÇÔºå‰ªé‰∏ÄÁªÑÂáΩÊï∞Êò†Â∞ÑÂà∞Âè¶‰∏ÄÁªÑÂáΩÊï∞„ÄÇËØ∑Ê≥®ÊÑèÔºå‰∏•Ê†ºÊù•ËØ¥ÔºåÂπ∂‰∏ç‰∏ÄÂÆöÈúÄË¶ÅÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Êò†Â∞ÑÂà∞Âè¶‰∏Ä‰∏™ÂáΩÊï∞„ÄÇÁõ∏ÂèçÔºå‰Ω†ÂèØ‰ª•ÁÅµÊ¥ªÂú∞ÂÜ≥ÂÆöÂ¶Ç‰ΩïÂ∞ÜÈ¢ÑÊúüÁöÑÂáΩÊï∞ÈõÜÊò†Â∞ÑÂà∞ÂèØÁî®ÁöÑÂáΩÊï∞ÈõÜ„ÄÇÂõ†Ê≠§ÔºåÈÄÇÈÖçÂô®Âπ∂‰∏ç‰∏ÄÂÆö‰ª£Ë°®‰∏ÄÂØπ‰∏ÄÁöÑÂÖ≥Á≥ªÔºå‰πüÂèØ‰ª•ÊîØÊåÅ‰∏ÄÂØπÂ§öÁöÑÂÖ≥Á≥ª„ÄÇ</p>
<p>ÂÅáËÆæ‰Ω†Êúâ‰ª•‰∏ã‰∏§‰∏™Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// Á¨¨‰∏âÊñπÂ∫ìÊèê‰æõÁöÑÁ±ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">OpenPages</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="n">convertToBytes</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">exportToJSONFormat</span><span class="p">(</span><span class="n">OpenPages</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">pages</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª•Âèä‰Ω†Â∑≤ÊúâÁöÑ<code>Document</code>Âü∫Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Document</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="o">~</span><span class="n">Document</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏∫‰∫Ü‰Ωø<code>OpenPages</code>Á±ªÈÄÇÂ∫î<code>Document</code>Êé•Âè£Ôºå‰Ω†ÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™ÈÄÇÈÖçÂô®Á±ª<code>Pages</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Pages</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Document</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">OpenPages</span> <span class="n">pages</span><span class="p">;</span>  <span class="c1">// ÂØπË±°ÈÄÇÈÖçÂô®ÁöÑ‰æãÂ≠ê 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">       <span class="n">exportToJSONFormat</span><span class="p">(</span><span class="n">pages</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">       <span class="n">pages</span><span class="p">.</span><span class="n">convertToBytes</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå<code>Pages</code>Á±ªÈÄöËøáÂ∞Ü<code>Document</code>Êé•Âè£ÁöÑÊñπÊ≥ïËΩ¨ÂèëÁªô<code>OpenPages</code>Á±ªÁöÑÊñπÊ≥ïÔºåÂÆûÁé∞‰∫ÜÈÄÇÈÖçÂô®ÁöÑÂäüËÉΩ„ÄÇÂÖ∑‰ΩìÊù•ËØ¥Ôºö</p>
<ul>
<li><code>exportToJSON()</code>ÊñπÊ≥ïË¢´ËΩ¨ÂèëÂà∞Ëá™Áî±ÂáΩÊï∞<code>exportToJSONFormat()</code>„ÄÇ</li>
<li><code>serialize()</code>ÊñπÊ≥ïË¢´ËΩ¨ÂèëÂà∞<code>OpenPages</code>Á±ªÁöÑ<code>convertToBytes()</code>ÊñπÊ≥ï„ÄÇ</li>
</ul>
<p>ËøôÊ†∑Ôºå<code>Pages</code>Á±ªÂ∞±ÂèØ‰ª•Êó†ÁºùÂú∞ËûçÂÖ•‰Ω†ÁöÑÁé∞ÊúâÁ≥ªÁªü‰∏≠ÔºåËÄåÊó†ÈúÄ‰øÆÊîπ<code>OpenPages</code>Á±ªÁöÑÂéüÂßãÂÆûÁé∞„ÄÇÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÁöÑËøôÁßçÁÅµÊ¥ªÊÄß‰ΩøÂÖ∂Êàê‰∏∫Ëß£ÂÜ≥Êé•Âè£‰∏çÂÖºÂÆπÈóÆÈ¢òÁöÑÂº∫Â§ßÂ∑•ÂÖ∑ÔºåÁâπÂà´ÊòØÂú®ÈúÄË¶ÅÈõÜÊàêÁ¨¨‰∏âÊñπÂ∫ìÊàñÊóßÊúâÁ≥ªÁªüÊó∂„ÄÇ</p>
<p><strong>ÂØπË±°ÈÄÇÈÖçÂô®‰∏éÁ±ªÈÄÇÈÖçÂô®</strong></p>
<p><code>Pages</code>Á±ªÊòØ‰∏Ä‰∏™ÊâÄË∞ìÁöÑÂØπË±°ÈÄÇÈÖçÂô®ÁöÑ‰æãÂ≠ê„ÄÇËøô‰∏™ÊúØËØ≠ÊåáÁöÑÊòØ‰Ω†Â≠òÂÇ®‰∫ÜË¢´ÂåÖË£ÖÁ±ªÂûãÁöÑÂÆû‰æã„ÄÇÊàñËÄÖÔºåÂ¶ÇÊûúË¢´ÂåÖË£ÖÁ±ªÂûãÊòØÊüê‰∏™ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰Ω†ÂèØ‰ª•Â≠òÂÇ®ËØ•Â±ÇÊ¨°ÁªìÊûÑÂü∫Á±ªÁöÑÊåáÈíà„ÄÇËøôÂ∞ÜÂÖÅËÆ∏‰Ω†‰ΩøÁî®ÂØπË±°ÈÄÇÈÖçÂô®Â§ÑÁêÜÊâÄÊúâÂ±û‰∫éËØ•Â±ÇÊ¨°ÁªìÊûÑÁöÑÁ±ªÂûãÔºå‰ªéËÄåÂ§ßÂ§ßÊèêÈ´ò‰∫ÜÂØπË±°ÈÄÇÈÖçÂô®ÁöÑÁÅµÊ¥ªÊÄß„ÄÇ</p>
<p>Áõ∏ÊØî‰πã‰∏ãÔºåËøòÊúâ‰∏ÄÁßçÂÆûÁé∞ÊâÄË∞ìÁöÑÁ±ªÈÄÇÈÖçÂô®ÁöÑÊñπÂºèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Pages</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Document</span> 
</span></span><span class="line"><span class="cl">            <span class="p">,</span> <span class="k">private</span> <span class="n">OpenPages</span>  <span class="c1">// Á±ªÈÄÇÈÖçÂô®ÁöÑ‰æãÂ≠ê   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kt">void</span> <span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">exportToJSONFormat</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="o">-&gt;</span><span class="n">convertToBytes</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ËøôÁßçÊñπÂºè‰∏≠Ôºå‰∏çÊòØÂ≠òÂÇ®Ë¢´ÈÄÇÈÖçÁ±ªÂûãÁöÑÂÆû‰æãÔºåËÄåÊòØÈÄöËøáÔºàÂèØËÉΩÈùûÂÖ¨ÂºÄÂú∞ÔºâÁªßÊâøÂÆÉÔºåÂπ∂Áõ∏Â∫îÂú∞ÂÆûÁé∞È¢ÑÊúüÊé•Âè£„ÄÇÁÑ∂ËÄåÔºåÊ≠£Â¶ÇÂú®‚ÄúÊåáÂçó20Ôºö‰ºòÂÖàÁªÑÂêàËÄåÈùûÁªßÊâø‚Äù‰∏≠ËÆ®ËÆ∫ÁöÑÈÇ£Ê†∑ÔºåÂü∫‰∫éÁªÑÂêàÊûÑÂª∫ÈÄöÂ∏∏ÊòØÊõ¥Â•ΩÁöÑÈÄâÊã©„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂØπË±°ÈÄÇÈÖçÂô®ÊØîÁ±ªÈÄÇÈÖçÂô®Êõ¥ÁÅµÊ¥ªÔºåÂõ†Ê≠§Â∫î‰ºòÂÖàÈÄâÊã©ÂØπË±°ÈÄÇÈÖçÂô®„ÄÇÂè™ÊúâÂú®‰ª•‰∏ãÂá†ÁßçÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÂèØËÉΩ‰ºöÊõ¥ÂÄæÂêë‰∫é‰ΩøÁî®Á±ªÈÄÇÈÖçÂô®Ôºö</p>
<ol>
<li>Â¶ÇÊûú‰Ω†ÈúÄË¶ÅË¶ÜÁõñ‰∏Ä‰∏™ËôöÂáΩÊï∞„ÄÇ</li>
<li>Â¶ÇÊûú‰Ω†ÈúÄË¶ÅËÆøÈóÆ‰∏Ä‰∏™Âèó‰øùÊä§ÁöÑÊàêÂëòÂáΩÊï∞„ÄÇ</li>
<li>Â¶ÇÊûú‰Ω†ÈúÄË¶ÅÈÄÇÂ∫îÁöÑÁ±ªÂûãÂú®Âè¶‰∏Ä‰∏™Âü∫Á±ª‰πãÂâçÊûÑÈÄ†„ÄÇ</li>
<li>Â¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÖ±‰∫´‰∏Ä‰∏™ÂÖ±ÂêåÁöÑËôöÂü∫Á±ªÊàñË¶ÜÁõñËôöÂü∫Á±ªÁöÑÊûÑÈÄ†„ÄÇ</li>
<li>Â¶ÇÊûú‰Ω†ÂèØ‰ª•‰ªéÁ©∫Âü∫Á±ª‰ºòÂåñÔºàEBOÔºâ‰∏≠Ëé∑ÂæóÊòæËëó‰ºòÂäø„ÄÇ</li>
</ol>
<p>Âê¶ÂàôÔºåÂú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºå‰Ω†Â∫îËØ•‰ºòÂÖàÈÄâÊã©ÂØπË±°ÈÄÇÈÖçÂô®„ÄÇ</p>
<p><strong>ÂÖ≥‰∫éÂëΩÂêçÁöÑËÆ®ËÆ∫</strong></p>
<p>‚ÄúÊàëÂñúÊ¨¢Ëøô‰∏™ËÆæËÆ°Ê®°Âºè‚Äî‚ÄîÂÆÉÂæàÂº∫Â§ß„ÄÇ‰ΩÜÊòØÔºåÊàëÂàöÊÉ≥Ëµ∑Êù•‰Ω†Âª∫ËÆÆÂú®‰ª£Á†Å‰∏≠‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÂ≠óÊù•‰º†ËææÊÑèÂõæ„ÄÇËøô‰∏™Á±ª‰∏çÂ∫îËØ•Âè´ÂÅö<code>PagesAdapter</code>ÂêóÔºü‚Äù ‰Ω†ÊèêÂá∫‰∫Ü‰∏Ä‰∏™ÂæàÂ•ΩÁöÑËßÇÁÇπ„ÄÇÊàëÂæàÈ´òÂÖ¥‰Ω†ËÆ∞Âæó‚ÄúÊåáÂçó14Ôºö‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÂ≠óÊù•‰º†ËææÊÑèÂõæ‚ÄùÔºåÁ°ÆÂÆûÊàëÂú®ÂÖ∂‰∏≠ÊèêÂà∞ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÂ≠óÊúâÂä©‰∫éÁêÜËß£‰ª£Á†Å„ÄÇÊàëÊâøËÆ§Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàëÂØπ‰∏§ÁßçÂëΩÂêçÁ∫¶ÂÆöÈÉΩÊåÅÂºÄÊîæÊÄÅÂ∫¶„ÄÇËôΩÁÑ∂ÊàëÁúãÂà∞‰∫Ü<code>PagesAdapter</code>Ëøô‰∏™ÂêçÂ≠óÁöÑ‰ºòÁÇπÔºåÂõ†‰∏∫ÂÆÉÁ´ãÂç≥‰º†Ëææ‰∫Ü‰Ω†‰ΩøÁî®‰∫ÜÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÔºå‰ΩÜÊàëÂπ∂‰∏çËÆ§‰∏∫ÊúâÂøÖË¶ÅÊòéÁ°ÆËØ¥ÊòéËøô‰∏™Á±ªÊòØ‰∏Ä‰∏™ÈÄÇÈÖçÂô®„ÄÇÂØπÊàëÊù•ËØ¥ÔºåÈÄÇÈÖçÂô®Âú®ËøôÈáåÊõ¥ÂÉèÊòØ‰∏Ä‰∏™ÂÆûÁé∞ÁªÜËäÇÔºöÊàë‰∏çÈúÄË¶ÅÁü•ÈÅì<code>Pages</code>Á±ªÊ≤°ÊúâËá™Â∑±ÂÆûÁé∞ÊâÄÊúâÁªÜËäÇÔºåËÄåÊòØ‰ΩøÁî®‰∫Ü<code>OpenPages</code>Á±ª„ÄÇËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàÊàëËØ¥Ë¶Å‚ÄúËÄÉËôë‰ΩøÁî®Ëøô‰∏™ÂêçÂ≠ó‚Äù„ÄÇ‰Ω†Â∫îËØ•Ê†πÊçÆÂÖ∑‰ΩìÊÉÖÂÜµÂÜ≥ÂÆö„ÄÇ</p>
<p><strong>Ê†áÂáÜÂ∫ì‰∏≠ÁöÑ‰æãÂ≠ê</strong></p>
<p>ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏Ä‰∏™ÊúâÁî®Â∫îÁî®ÊòØÊ†áÂáÜÂåñ‰∏çÂêåÁßçÁ±ªÂÆπÂô®ÁöÑÊé•Âè£„ÄÇÂÅáËÆæÊàë‰ª¨Êúâ‰ª•‰∏ãÁöÑ<code>Stack</code>Âü∫Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Stack.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Stack</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="o">~</span><span class="n">Stack</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">top</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">bool</span> <span class="nf">empty</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="n">size_t</span> <span class="nf">size</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">push</span><span class="p">(</span><span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">pop</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™<code>Stack</code>Á±ªÊèê‰æõ‰∫ÜÂøÖË¶ÅÁöÑÊé•Âè£Êù•ËÆøÈóÆÊ†àÈ°∂ÂÖÉÁ¥†„ÄÅÊ£ÄÊü•Ê†àÊòØÂê¶‰∏∫Á©∫„ÄÅÊü•ËØ¢Ê†àÁöÑÂ§ßÂ∞è„ÄÅÂ∞ÜÂÖÉÁ¥†ÂéãÂÖ•Ê†à‰ª•ÂèäÁßªÈô§Ê†àÈ°∂ÂÖÉÁ¥†„ÄÇËøô‰∏™Âü∫Á±ªÁé∞Âú®ÂèØ‰ª•Áî®‰∫é‰∏∫ÂêÑÁßçÊï∞ÊçÆÁªìÊûÑÂÆûÁé∞‰∏çÂêåÁöÑÈÄÇÈÖçÂô®Ôºå‰æãÂ¶Ç<code>std::vector</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;VectorStack.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Stack.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">VectorStack</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">T</span><span class="o">&amp;</span> <span class="n">top</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">vec_</span><span class="p">.</span><span class="n">back</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">bool</span> <span class="nf">empty</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">vec_</span><span class="p">.</span><span class="n">empty</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">size_t</span> <span class="nf">size</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">vec_</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">push</span><span class="p">(</span><span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span> <span class="n">vec_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">value</span><span class="p">);</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">pop</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">vec_</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">vec_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰Ω†ÂèØËÉΩ‰ºöÊãÖÂøÉÔºö‚Äú‰Ω†ÁúüÁöÑÂª∫ËÆÆÁî®ÊäΩË±°Âü∫Á±ªÊù•ÂÆûÁé∞Ê†àÂêóÔºü‰Ω†‰∏çÊãÖÂøÉÊÄßËÉΩÂΩ±ÂìçÂêóÔºüÊØèÊ¨°Ë∞ÉÁî®ÊàêÂëòÂáΩÊï∞Êó∂ÔºåÈÉΩË¶Å‰ªòÂá∫ËôöÊãüÂáΩÊï∞Ë∞ÉÁî®ÁöÑ‰ª£‰ª∑ÔºÅ‚Äù ‰∏çÔºåÂΩìÁÑ∂Êàë‰∏çÊòØËøô‰πàÂª∫ËÆÆÁöÑ„ÄÇÊòæÁÑ∂‰Ω†ÊòØÂØπÁöÑÔºåÊàë‰πüÂÆåÂÖ®ÂêåÊÑè‰Ω†ÁöÑÁúãÊ≥ïÔºö‰ªéC++ÁöÑËßíÂ∫¶Êù•ÁúãÔºåËøôÁßçÂÆπÂô®ÊòæÂæóÂ•áÊÄ™‰∏îÈùûÂ∏∏‰ΩéÊïà„ÄÇ‰∏∫‰∫ÜÊèêÈ´òÊïàÁéáÔºåÊàë‰ª¨ÈÄöÂ∏∏ÈÄöËøáÁ±ªÊ®°ÊùøÊù•ÂÆûÁé∞Áõ∏ÂêåÁöÑÊÉ≥Ê≥ï„ÄÇËøôÊòØC++Ê†áÂáÜÂ∫ìÈááÁî®ÁöÑÊñπÊ≥ïÔºå‰ª•‰∏âÁßçSTLÁ±ªÁöÑÂΩ¢ÂºèÂÆûÁé∞ÂÆπÂô®ÈÄÇÈÖçÂô®Ôºö<code>std::stack</code>„ÄÅ<code>std::queue</code>Âíå<code>std::priority_queue</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Container</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">deque</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">stack</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Container</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">deque</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">queue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Container</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Compare</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Container</span><span class="o">::</span><span class="n">value_type</span><span class="o">&gt;&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">priority_queue</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏â‰∏™Á±ªÊ®°ÊùøÂ∞ÜÁªôÂÆöÂÆπÂô®Á±ªÂûãÁöÑÊé•Âè£ÈÄÇÈÖçÂà∞ÁâπÂÆöÁî®ÈÄî„ÄÇ‰æãÂ¶ÇÔºå<code>std::stack</code>Á±ªÊ®°ÊùøÁöÑÁõÆÁöÑÊòØÂ∞ÜÂÆπÂô®Êé•Âè£ÈÄÇÈÖçÂà∞Ê†àÊìç‰ΩúÔºö<code>top()</code>„ÄÅ<code>empty()</code>„ÄÅ<code>size()</code>„ÄÅ<code>push()</code>„ÄÅ<code>emplace()</code>„ÄÅ<code>pop()</code>Âíå<code>swap()</code>„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏â‰∏™ÂèØÁî®ÁöÑÂ∫èÂàóÂÆπÂô®Ôºö<code>std::vector</code>„ÄÅ<code>std::list</code>Âíå<code>std::deque</code>„ÄÇÂØπ‰∫é‰ªª‰ΩïÂÖ∂‰ªñÂÆπÂô®Á±ªÂûãÔºå‰Ω†ÂèØ‰ª•ÁâπÂåñ<code>std::stack</code>Á±ªÊ®°Êùø„ÄÇ</p>
<p>‚ÄúËøôÊÑüËßâÁÜüÊÇâÂ§ö‰∫ÜÔºå‚Äù‰Ω†ËØ¥ÔºåÊòéÊòæÊùæ‰∫Ü‰∏ÄÂè£Ê∞î„ÄÇÊàëÂÆåÂÖ®ÂêåÊÑè„ÄÇÊàë‰πüËÆ§‰∏∫Ê†áÂáÜÂ∫ìÁöÑÊñπÊ≥ïÊõ¥ÈÄÇÂêàÂÆπÂô®ÁöÑÁõÆÁöÑ„ÄÇ‰ΩÜÊØîËæÉËøô‰∏§ÁßçÊñπÊ≥ï‰ªçÁÑ∂ÂæàÊúâË∂£„ÄÇËôΩÁÑ∂<code>Stack</code>Âü∫Á±ªÂíå<code>std::stack</code>Á±ªÊ®°Êùø‰πãÈó¥ÊúâËÆ∏Â§öÊäÄÊúØ‰∏äÁöÑÂ∑ÆÂºÇÔºå‰ΩÜËøô‰∏§ËÄÖÁöÑÁî®ÈÄîÂíåËØ≠‰πâÈÉΩÈùûÂ∏∏Áõ∏‰ººÔºöÂÆÉ‰ª¨ÈÉΩÊèê‰æõ‰∫Ü‰∏ÄÁßçÂ∞Ü‰ªª‰ΩïÊï∞ÊçÆÁªìÊûÑÈÄÇÈÖçÂà∞ÁªôÂÆöÊ†àÊé•Âè£ÁöÑËÉΩÂäõ„ÄÇÂπ∂‰∏î‰∏§ËÄÖÈÉΩ‰Ωú‰∏∫ÂèòÂåñÁÇπÔºåÂÖÅËÆ∏‰Ω†Âú®‰∏ç‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÁöÑÊÉÖÂÜµ‰∏ãÈùû‰æµÂÖ•ÊÄßÂú∞Ê∑ªÂä†Êñ∞ÁöÑÈÄÇÈÖçÂô®„ÄÇ</p>
<p><strong>ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°Âºè‰∏éÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÊØîËæÉ</strong></p>
<p>‚ÄúËøô‰∏â‰∏™STLÁ±ª‰ºº‰πéÂÆûÁé∞‰∫ÜÈÄÇÈÖçÂô®ÁöÑÁõÆÁöÑÔºå‰ΩÜËøô‰∏çÂ∞±ÊòØÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰∏≠ÈÖçÁΩÆË°å‰∏∫ÁöÑÊñπÂºèÂêóÔºüËøôÂíå<code>std::unique_ptr</code>ÂèäÂÖ∂Âà†Èô§Âô®‰∏çÊòØ‰∏ÄÊ†∑ÁöÑÂêóÔºü‚Äù‰Ω†ÈóÆÈÅì„ÄÇÊòØÁöÑÔºå‰Ω†ÊòØÂØπÁöÑ„ÄÇ‰ªéÁªìÊûÑ‰∏äÁúãÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂíåÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÈùûÂ∏∏Áõ∏‰ºº„ÄÇÁÑ∂ËÄåÔºåÊ≠£Â¶ÇÂú®‚ÄúÊåáÂçó11ÔºöÁêÜËß£ËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑ‚Äù‰∏≠Ëß£ÈáäÁöÑÈÇ£Ê†∑ÔºåËÆæËÆ°Ê®°ÂºèÁöÑÁªìÊûÑÂèØËÉΩÁõ∏‰ººÁîöËá≥Áõ∏ÂêåÔºå‰ΩÜÂÆÉ‰ª¨ÁöÑÊÑèÂõæ‰∏çÂêå„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂÆπÂô®ÂèÇÊï∞‰∏ç‰ªÖ‰ªÖÊåáÂÆöË°å‰∏∫ÁöÑ‰∏Ä‰∏™ÊñπÈù¢ÔºåËÄåÊòØÂ§ßÈÉ®ÂàÜÊàñÂÖ®ÈÉ®Ë°å‰∏∫„ÄÇÁ±ªÊ®°ÊùøÂè™ÊòØÁªôÂÆöÁ±ªÂûãÁöÑÂ∞ÅË£ÖÂô®‚Äî‚ÄîÂÆÉ‰ª¨‰∏ªË¶ÅÈÄÇÈÖçÊé•Âè£„ÄÇÂõ†Ê≠§ÔºåÈÄÇÈÖçÂô®ÁöÑ‰∏ªË¶ÅÂÖ≥Ê≥®ÁÇπÊòØÊ†áÂáÜÂåñÊé•Âè£Âπ∂Â∞Ü‰∏çÂÖºÂÆπÁöÑÂäüËÉΩÈõÜÊàêÂà∞Áé∞ÊúâÁöÑËßÑËåÉÈõÜ‰∏≠ÔºõËÄåÂè¶‰∏ÄÊñπÈù¢ÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏ªË¶ÅÂÖ≥Ê≥®ÁÇπÊòØ‰ªéÂ§ñÈÉ®ÈÖçÁΩÆË°å‰∏∫ÔºåÊûÑÂª∫Âπ∂Êèê‰æõÈ¢ÑÊúüÁöÑÊé•Âè£„ÄÇÊ≠§Â§ñÔºåÂØπ‰∫éÈÄÇÈÖçÂô®ËÄåË®ÄÔºå‰∏çÈúÄË¶ÅÈöèÊó∂ÈáçÊñ∞ÈÖçÁΩÆË°å‰∏∫„ÄÇ</p>
<p><strong>ÂáΩÊï∞ÈÄÇÈÖçÂô®</strong></p>
<p>ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÁöÑÂÖ∂‰ªñ‰æãÂ≠êÂåÖÊã¨Ê†áÂáÜÂ∫ì‰∏≠ÁöÑËá™Áî±ÂáΩÊï∞<code>begin()</code>Âíå<code>end()</code>„ÄÇ‚Äú‰Ω†ËÆ§ÁúüÁöÑÂêóÔºü‚Äù‰Ω†ÊÉäËÆ∂Âú∞ÈóÆÔºå‚Äú‰Ω†Â£∞Áß∞Ëá™Áî±ÂáΩÊï∞ÊòØÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÁöÑ‰æãÂ≠êÔºüËøô‰∏çÊòØÁ±ªÁöÑÂ∑•‰ΩúÂêóÔºü‚ÄùÂÖ∂ÂÆû‰∏ç‰∏ÄÂÆö„ÄÇËá™Áî±<code>begin()</code>Âíå<code>end()</code>ÂáΩÊï∞ÁöÑÁõÆÁöÑÊòØÂ∞Ü‰ªª‰ΩïÁ±ªÂûãÁöÑËø≠‰ª£Âô®Êé•Âè£ÈÄÇÈÖçÂà∞È¢ÑÊúüÁöÑSTLËø≠‰ª£Âô®Êé•Âè£„ÄÇÂõ†Ê≠§ÔºåÂÆÉÂ∞ÜÂèØÁî®ÁöÑ‰∏ÄÁªÑÂáΩÊï∞Êò†Â∞ÑÂà∞È¢ÑÊúüÁöÑ‰∏ÄÁªÑÂáΩÊï∞ÔºåÂπ∂‰∏éÂÖ∂‰ªñÈÄÇÈÖçÂô®ÂÖ∑ÊúâÁõ∏ÂêåÁöÑÁõÆÁöÑ„ÄÇ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÔºå‰∏éÂü∫‰∫éÁªßÊâøÔºàËøêË°åÊó∂Â§öÊÄÅÔºâÊàñÊ®°ÊùøÔºàÁºñËØëÊó∂Â§öÊÄÅÔºâÁöÑÂØπË±°ÈÄÇÈÖçÂô®ÊàñÁ±ªÈÄÇÈÖçÂô®‰∏çÂêåÔºå<code>begin()</code>Âíå<code>end()</code>‰æùËµñ‰∫éÂáΩÊï∞ÈáçËΩΩÔºåËøôÊòØC++‰∏≠ÁöÑÁ¨¨‰∫åÁßç‰∏ªË¶ÅÁºñËØëÊó∂Â§öÊÄÅÊú∫Âà∂„ÄÇÂ∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÊüêÁßçÂΩ¢ÂºèÁöÑÊäΩË±°‰ªçÁÑ∂Â≠òÂú®„ÄÇ</p>
<p><strong>Ê≥®ÊÑè</strong></p>
<p>ËÆ∞‰ΩèÊâÄÊúâÁ±ªÂûãÁöÑÊäΩË±°ÈÉΩ‰ª£Ë°®‰∏ÄÁªÑÈúÄÊ±ÇÔºåÂõ†Ê≠§ÂøÖÈ°ªÈÅµÂÆàÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºàLSPÔºâ„ÄÇËøôÂØπÈáçËΩΩÈõÜ‰πüÈÄÇÁî®ÔºõÂèÇËßÅ‚ÄúÊåáÂçó8ÔºöÁêÜËß£ÈáçËΩΩÈõÜÁöÑËØ≠‰πâË¶ÅÊ±Ç‚Äù„ÄÇ</p>
<p>ËÄÉËôë‰ª•‰∏ãÂáΩÊï∞Ê®°ÊùøÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Range</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">traverseRange</span><span class="p">(</span><span class="n">Range</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">range</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="nl">element</span> <span class="p">:</span> <span class="n">range</span><span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®<code>traverseRange()</code>ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨ÈÄöËøáÂü∫‰∫éËåÉÂõ¥ÁöÑforÂæ™ÁéØÈÅçÂéÜÁªôÂÆöËåÉÂõ¥ÂÜÖÂåÖÂê´ÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇÈÅçÂéÜÈÄöËøáÁºñËØëÂô®‰ΩøÁî®Ëá™Áî±<code>begin()</code>Âíå<code>end()</code>ÂáΩÊï∞Ëé∑ÂèñÁöÑËø≠‰ª£Âô®ÂÆåÊàê„ÄÇÂõ†Ê≠§ÔºåÂâçÈù¢ÁöÑforÂæ™ÁéØÁ≠â‰ª∑‰∫é‰ª•‰∏ãÂΩ¢ÂºèÁöÑforÂæ™ÁéØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Range</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">traverseRange</span><span class="p">(</span><span class="n">Range</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">range</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">begin</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">auto</span> <span class="nf">first</span><span class="p">(</span><span class="n">begin</span><span class="p">(</span><span class="n">range</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">      <span class="k">auto</span> <span class="nf">last</span><span class="p">(</span><span class="n">end</span><span class="p">(</span><span class="n">range</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">      <span class="k">for</span><span class="p">(;</span> <span class="n">first</span> <span class="o">!=</span> <span class="n">last</span><span class="p">;</span> <span class="o">++</span><span class="n">first</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="n">element</span> <span class="o">=</span> <span class="o">*</span><span class="n">first</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊòæÁÑ∂ÔºåÂü∫‰∫éËåÉÂõ¥ÁöÑforÂæ™ÁéØÊõ¥Êñπ‰æø‰ΩøÁî®„ÄÇÁÑ∂ËÄåÔºåÂú®Ë°®Èù¢‰πã‰∏ãÔºåÁºñËØëÂô®ÁîüÊàêÁöÑ‰ª£Á†ÅÂü∫‰∫éËá™Áî±<code>begin()</code>Âíå<code>end()</code>ÂáΩÊï∞„ÄÇÊ≥®ÊÑèÂÖ∂ÂºÄÂ§¥ÁöÑ‰∏§‰∏™usingÂ£∞ÊòéÔºöÁõÆÁöÑÊòØ‰∏∫ÁªôÂÆöËåÉÂõ¥Á±ªÂûãÂêØÁî®ÂèÇÊï∞Áõ∏ÂÖ≥Êü•ÊâæÔºàADLÔºâ„ÄÇADLÁ°Æ‰øùÂç≥‰ΩøÈáçËΩΩÂáΩÊï∞‰Ωç‰∫éÁî®Êà∑ÁâπÂÆöÁöÑÂëΩÂêçÁ©∫Èó¥‰∏≠Ôºå‰πü‰ºöË∞ÉÁî®‚ÄúÊ≠£Á°ÆÁöÑ‚Äù<code>begin()</code>Âíå<code>end()</code>ÂáΩÊï∞„ÄÇËøôÊÑèÂë≥ÁùÄ‰Ω†ÂèØ‰ª•‰∏∫‰ªª‰ΩïÁ±ªÂûãÈáçËΩΩ<code>begin()</code>Âíå<code>end()</code>ÔºåÂπ∂Â∞ÜÈ¢ÑÊúüÊé•Âè£Êò†Â∞ÑÂà∞‰∏çÂêåÁöÑ„ÄÅÁâπÂÆöÁî®ÈÄîÁöÑÂáΩÊï∞ÈõÜ„ÄÇ</p>
<p>ËøôÁßçÁ±ªÂûãÁöÑÂáΩÊï∞ÈÄÇÈÖçÂô®Âú®2004Âπ¥Ë¢´Matthew WilsonÁß∞‰∏∫‚Äúshim‚Äù„ÄÇËØ•ÊäÄÊúØÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÁâπÊÄßÊòØÂÆåÂÖ®Èùû‰æµÂÖ•ÊÄßÔºöÂèØ‰ª•‰∏∫‰ªª‰ΩïÁ±ªÂûãÊ∑ªÂä†‰∏Ä‰∏™Ëá™Áî±ÂáΩÊï∞ÔºåÁîöËá≥ÊòØÁ¨¨‰∏âÊñπÂ∫ìÊèê‰æõÁöÑÁ±ªÂûã„ÄÇÂõ†Ê≠§Ôºå‰ª•shimsÊàñÂáΩÊï∞ÈÄÇÈÖçÂô®ÁºñÂÜôÁöÑ‰ªª‰ΩïÈÄöÁî®‰ª£Á†ÅÈÉΩËÉΩËÆ©‰Ω†Êã•ÊúâÂ∑®Â§ßÁöÑËÉΩÂäõÔºåÂ∞ÜÂá†‰πé‰ªª‰ΩïÁ±ªÂûãÈÄÇÈÖçÂà∞È¢ÑÊúüÊé•Âè£„ÄÇÂõ†Ê≠§Ôºå‰Ω†ÂèØ‰ª•ÊÉ≥Ë±°shimsÊàñÂáΩÊï∞ÈÄÇÈÖçÂô®ÊòØÊ≥õÂûãÁºñÁ®ãÁöÑÊ†∏ÂøÉ„ÄÇ</p>
<p><strong>ÂàÜÊûêÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥</strong></p>
<p>Â∞ΩÁÆ°ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÊúâÂÖ∂‰ª∑ÂÄºÔºå‰ΩÜÊàëÂ∫îËØ•ÊòéÁ°ÆÊåáÂá∫Ëøô‰∏™ËÆæËÆ°Ê®°ÂºèÊúâ‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p>ËÄÉËôë‰ª•‰∏ã‰æãÂ≠êÔºåÊàëÂÄüÈâ¥Ëá™Eric FreemanÂíåElisabeth RobsonÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Duck.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Duck</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="o">~</span><span class="n">Duck</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">quack</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">fly</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;MallardDuck.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Duck.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">MallardDuck</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Duck</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="n">quack</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">fly</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨‰ªéÊäΩË±°ÁöÑ<code>Duck</code>Á±ªÂºÄÂßãÔºåËØ•Á±ªÂºïÂÖ•‰∫Ü‰∏§‰∏™Á∫ØËôöÂáΩÊï∞<code>quack()</code>Âíå<code>fly()</code>„ÄÇÁ°ÆÂÆûÔºåËøôÊòØ‰∏Ä‰∏™Áõ∏ÂΩìÈ¢ÑÊúü‰∏îËá™ÁÑ∂ÁöÑÈ∏≠Â≠êÁ±ªÊé•Âè£ÔºåÂπ∂‰∏îÂΩìÁÑ∂‰ºöÂºïÂèë‰∏Ä‰∫õÊúüÊúõÔºöÈ∏≠Â≠êÂèëÂá∫ÈùûÂ∏∏Áã¨ÁâπÁöÑÂ£∞Èü≥Âπ∂‰∏îËÉΩÂ§üÂæàÂ•ΩÂú∞È£ûË°å„ÄÇËÆ∏Â§öÂèØËÉΩÁöÑÈ∏≠Â≠êÁ±ªÂûãÂÆûÁé∞‰∫ÜËøô‰∏™Êé•Âè£Ôºå‰æãÂ¶Ç<code>MallardDuck</code>Á±ª„ÄÇÁé∞Âú®ÔºåÁî±‰∫éÊüê‰∫õÂéüÂõ†ÔºåÊàë‰ª¨‰πüÈúÄË¶ÅÂ§ÑÁêÜÁÅ´È∏°Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Turkey.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Turkey</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="o">~</span><span class="n">Turkey</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">gobble</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// ÁÅ´È∏°‰∏ç‰ºöÂòéÂòéÂè´ÔºåËÄåÊòØÂíØÂíØÂè´ÔºÅ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">fly</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>     
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;WildTurkey.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">WildTurkey</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Turkey</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="n">gobble</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">fly</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÅ´È∏°Áî±ÊäΩË±°ÁöÑ<code>Turkey</code>Á±ªË°®Á§∫ÔºåÂΩìÁÑ∂ÊúâËÆ∏Â§ö‰∏çÂêåÁßçÁ±ªÁöÑÂÖ∑‰ΩìÁÅ´È∏°ÂÆûÁé∞ÔºåÊØîÂ¶Ç<code>WildTurkey</code>„ÄÇ‰∏∫‰∫Ü‰Ωø‰∫ãÊÉÖÂèòÂæóÊõ¥Á≥üÔºåÂá∫‰∫éÊüê‰∫õÂéüÂõ†ÔºåÈ∏≠Â≠êÂíåÁÅ´È∏°ÈúÄË¶Å‰∏ÄËµ∑‰ΩøÁî®„ÄÇ‰∏ÄÁßçÂèØËÉΩÁöÑÊñπÊ≥ïÊòØÂÅáË£ÖÁÅ´È∏°ÊòØ‰∏ÄÂè™È∏≠Â≠ê„ÄÇÊØïÁ´üÔºåÁÅ´È∏°‰∏éÈ∏≠Â≠êÈùûÂ∏∏Áõ∏‰ºº„ÄÇÂ•ΩÂêßÔºåËôΩÁÑ∂ÂÆÉ‰∏ç‰ºöÂòéÂòéÂè´Ôºå‰ΩÜÂÆÉ‰ºöÂíØÂíØÂè´ÔºàÂÖ∏ÂûãÁöÑÁÅ´È∏°Â£∞Èü≥ÔºâÔºåËÄå‰∏îÂÆÉ‰πüËÉΩÈ£ûÔºàËôΩÁÑ∂Ë∑ùÁ¶ª‰∏çÈïøÔºå‰ΩÜÁ°ÆÂÆûËÉΩÈ£ûÔºâ„ÄÇÂõ†Ê≠§Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®<code>TurkeyAdapter</code>Êù•ÈÄÇÈÖçÁÅ´È∏°Âà∞È∏≠Â≠êÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;TurkeyAdapter.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">TurkeyAdapter</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Duck</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">explicit</span> <span class="n">TurkeyAdapter</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Turkey</span><span class="o">&gt;</span> <span class="n">turkey</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="o">:</span> <span class="n">turkey_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">turkey</span><span class="p">)}</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">quack</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">turkey_</span><span class="o">-&gt;</span><span class="n">gobble</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">fly</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">turkey_</span><span class="o">-&gt;</span><span class="n">fly</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Turkey</span><span class="o">&gt;</span> <span class="n">turkey_</span><span class="p">;</span>  <span class="c1">// ËøôÊòØ‰∏Ä‰∏™ÂØπË±°ÈÄÇÈÖçÂô®ÁöÑ‰æãÂ≠ê 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËôΩÁÑ∂ËøôÊòØ‰∏Ä‰∏™ÊúâË∂£ÁöÑÈ∏≠Â≠êÁ±ªÂûãËß£ÈáäÔºå‰ΩÜËøô‰∏™‰æãÂ≠êÂæàÂ•ΩÂú∞Â±ïÁ§∫‰∫ÜÂ∞ÜÂ§ñÊù•‰∫ãÁâ©ËΩªÊùæÈõÜÊàêÂà∞Áé∞ÊúâÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠ÊòØÂ§ö‰πàÂÆπÊòì„ÄÇÁÅ´È∏°Ê†πÊú¨‰∏çÊòØÈ∏≠Â≠êÔºåÂç≥‰ΩøÊàë‰ª¨Â∏åÊúõÂÆÉÊòØ„ÄÇÊàëËÆ§‰∏∫<code>quack()</code>Âíå<code>fly()</code>ÂáΩÊï∞ÂæàÂèØËÉΩËøùÂèç‰∫ÜLSP„ÄÇËøô‰∫õÂáΩÊï∞ÂÆûÈôÖ‰∏äÂπ∂Ê≤°ÊúâÂÅöÊàëÊúüÊúõÁöÑ‰∫ãÊÉÖÔºàËá≥Â∞ëÊàëÂæàÁ°ÆÂÆöÊàëÂ∏åÊúõÂê¨Âà∞ÁöÑÊòØÂòéÂòéÂè´ËÄå‰∏çÊòØÂíØÂíØÂè´ÁöÑÂä®Áâ©ÔºåÂπ∂‰∏îÊàëÂ∏åÊúõÁúãÂà∞ÂÉèÈ∏≠Â≠ê‰∏ÄÊ†∑ÁúüÊ≠£È£ûË°åÁöÑ‰∏úË•øÔºâ„ÄÇÂΩìÁÑ∂ÔºåËøôÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÁöÑ‰∏ä‰∏ãÊñáÔºå‰ΩÜ‰∏çÂèØÂê¶ËÆ§ÁöÑÊòØÔºåÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°Âºè‰ΩøÂæóÁªÑÂêà‰∏çÁõ∏Âπ≤ÁöÑ‰∫ãÁâ©ÂèòÂæóÈùûÂ∏∏ÂÆπÊòì„ÄÇÂõ†Ê≠§ÔºåÂú®Â∫îÁî®Ê≠§ËÆæËÆ°Ê®°ÂºèÊó∂ÔºåÈùûÂ∏∏ÈáçË¶ÅÁöÑÊòØË¶ÅËÄÉËôëÈ¢ÑÊúüÁöÑË°å‰∏∫Âπ∂Ê£ÄÊü•ÊòØÂê¶ËøùÂèç‰∫ÜLSPÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;MallardDuck.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;WildTurkey.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;TurkeyAdapter.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">DuckChoir</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Duck</span><span class="o">&gt;&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">give_concert</span><span class="p">(</span><span class="n">DuckChoir</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">duck_choir</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">duck</span> <span class="p">:</span> <span class="n">duck_choir</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">duck</span><span class="o">-&gt;</span><span class="n">quack</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="n">DuckChoir</span> <span class="n">duck_choir</span><span class="p">{};</span>
</span></span><span class="line"><span class="cl">   <span class="c1">// ËÆ©Êàë‰ª¨Èõá‰Ω£‰∏ñÁïå‰∏äÊúÄÂ•ΩÁöÑÈ∏≠Â≠êÁªÑÊàêÂêàÂî±Âõ¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">duck_choir</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">MallardDuck</span><span class="o">&gt;</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">   <span class="n">duck_choir</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">MallardDuck</span><span class="o">&gt;</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">   <span class="n">duck_choir</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">MallardDuck</span><span class="o">&gt;</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="c1">// ‰∏çÂπ∏ÁöÑÊòØÔºåÊàë‰ª¨ËøòÈõá‰∫Ü‰∏Ä‰∏™‰º™Ë£ÖÊàêÈ∏≠Â≠êÁöÑÁÅ´È∏°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">auto</span> <span class="n">turkey</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">WildTurkey</span><span class="o">&gt;</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">   <span class="k">auto</span> <span class="n">turkey_in_disguise</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">TurkeyAdapter</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">turkey</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">   <span class="n">duck_choir</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">turkey_in_disguise</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="c1">// ÊºîÂá∫Â∞ÜÊòØ‰∏ÄÂú∫Èü≥‰πêÁÅæÈöæ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">give_concert</span><span class="p">(</span><span class="n">duck_choir</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Â∫îÁî®<strong>Adapter</strong>ËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑÊòØ<strong>Ë∞ÉÊï¥Êé•Âè£</strong>Ôºå‰ª•‰æø‰∏çÂÖºÂÆπÁöÑÈÉ®ÂàÜÂèØ‰ª•‰∏ÄËµ∑Â∑•‰Ωú„ÄÇ</li>
<li>ËØ∑Ê≥®ÊÑèÔºå<strong>Adapter</strong>ÂØπÂä®ÊÄÅÂíåÈùôÊÄÅÂ§öÊÄÅÊÄßÈÉΩÂæàÊúâÁî®„ÄÇ</li>
<li>Âå∫ÂàÜÂØπË±°ÈÄÇÈÖçÂô®„ÄÅÁ±ªÈÄÇÈÖçÂô®ÂíåÂáΩÊï∞ÈÄÇÈÖçÂô®„ÄÇ</li>
<li>ÁêÜËß£ÈÄÇÈÖçÂô®ÂíåÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰πãÈó¥ÁöÑÂå∫Âà´„ÄÇ</li>
<li>Âú®‰ΩøÁî®<strong>Adapter</strong>ËÆæËÆ°Ê®°ÂºèÊó∂ÔºåË¶ÅÊ≥®ÊÑèLSPËøùËßÑ</li>
</ul>
<h3 id="ÂáÜÂàô25Â∫îÁî®ËßÇÂØüËÄÖ‰Ωú‰∏∫ÊäΩË±°ÈÄöÁü•Êú∫Âà∂">ÂáÜÂàô25ÔºöÂ∫îÁî®ËßÇÂØüËÄÖ‰Ωú‰∏∫ÊäΩË±°ÈÄöÁü•Êú∫Âà∂
</h3><p>‰Ω†ÂæàÂèØËÉΩ‰πãÂâçÂê¨ËØ¥ËøáËßÇÂØüËÄÖÊ®°Âºè„ÄÇ‚ÄúÂì¶ÔºåÊòØÁöÑÔºåÂΩìÁÑ∂ÊàëÂê¨ËØ¥Ëøá‚Äî‚ÄîËøô‰∏çÂ∞±ÊòØÊâÄË∞ìÁöÑÁ§æ‰∫§Â™í‰ΩìÂπ≥Âè∞ÂØπÊàë‰ª¨ÊâÄÂÅöÁöÑÂêóÔºü‚Äù‰Ω†ÈóÆÈÅì„ÄÇÂóØÔºåËôΩÁÑ∂‰∏çÊòØÊàëÊâÄÊåáÁöÑÂÖ∑‰ΩìÂÜÖÂÆπÔºå‰ΩÜÁ°ÆÂÆûÔºåÊàë‰ª¨ÂèØ‰ª•ÊääËøô‰∫õÂπ≥Âè∞Áß∞‰∏∫ËßÇÂØüËÄÖ„ÄÇËÄå‰∏îÔºå‰ªñ‰ª¨ÂÅöÁöÑ‰∫ãÊÉÖ‰πüÈÅµÂæ™ÊüêÁßçÊ®°ÂºèÔºåÂ∞ΩÁÆ°Ëøô‰∏çÊòØ‰∏Ä‰∏™ËÆæËÆ°Ê®°Âºè„ÄÇÂÆûÈôÖ‰∏äÔºåÊàëÊåáÁöÑÊòØGoFÔºàÂõõ‰∫∫ÁªÑÔºâËÆæËÆ°Ê®°Âºè‰∏≠ÊúÄÂèóÊ¨¢ËøéÁöÑËÆæËÆ°Ê®°Âºè‰πã‰∏Ä‚Äî‚ÄîËßÇÂØüËÄÖËÆæËÆ°Ê®°Âºè„ÄÇÂç≥‰Ωø‰Ω†Ëøò‰∏çÁÜüÊÇâËøô‰∏™Ê¶ÇÂøµÔºå‰Ω†‰πüÂèØËÉΩÂú®ÁîüÊ¥ª‰∏≠ÊúâËøá‰∏éÊúâÁî®ÁöÑËßÇÂØüËÄÖÁöÑÁªèÈ™å„ÄÇ‰æãÂ¶ÇÔºå‰Ω†ÂèØËÉΩÊ≥®ÊÑèÂà∞Âú®Êüê‰∫õÊ∂àÊÅØÂ∫îÁî®Á®ãÂ∫è‰∏≠Ôºå‰∏ÄÊó¶‰Ω†ÈòÖËØª‰∫Ü‰∏ÄÊù°Êñ∞Ê∂àÊÅØÔºåÂèëÈÄÅËÄÖ‰ºöÁ´ãÂç≥Ë¢´ÂëäÁü•„ÄÇËøôÊÑèÂë≥ÁùÄÊ∂àÊÅØÊòæÁ§∫‰∏∫‚ÄúÂ∑≤ËØª‚ÄùËÄå‰∏çÊòØ‰ªÖ‰ªÖ‚ÄúÂ∑≤ÈÄÅËææ‚Äù„ÄÇËøôÈ°πÂ∞èÊúçÂä°Êú¨Ë¥®‰∏äÊòØÁî±Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÁöÑËßÇÂØüËÄÖÂÆåÊàêÁöÑÔºö‰∏ÄÊó¶Êñ∞Ê∂àÊÅØÁöÑÁä∂ÊÄÅÂèëÁîüÂèòÂåñÔºåÂèëÈÄÅËÄÖÂ∞±‰ºöÊî∂Âà∞ÈÄöÁü•Ôºå‰ªéËÄåÊúâÊú∫‰ºöÂØπÁä∂ÊÄÅÂèòÂåñÂÅöÂá∫ÂìçÂ∫î„ÄÇ</p>
<p><strong>ËßÇÂØüËÄÖËÆæËÆ°Ê®°ÂºèËß£Èáä</strong>
Âú®ËÆ∏Â§öËΩØ‰ª∂Âú∫ÊôØ‰∏≠ÔºåÂ∏åÊúõÂú®Êüê‰∏™Áä∂ÊÄÅÂèëÁîüÂèòÂåñÊó∂Á´ãÂç≥Ëé∑ÂæóÂèçÈ¶àÔºö‰ªªÂä°ÈòüÂàó‰∏≠Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™Êñ∞‰ªªÂä°„ÄÅÈÖçÁΩÆÂØπË±°‰∏≠ÁöÑËÆæÁΩÆË¢´Êõ¥Êîπ„ÄÅÁªìÊûúÂáÜÂ§áÂ•ΩË¢´ÊèêÂèñÁ≠â„ÄÇ‰ΩÜÊòØÂêåÊó∂ÔºåÂºïÂÖ•‰∏ªÈ¢òÔºàË¢´ËßÇÂØüÂÆû‰ΩìÔºå‰ºöÂèëÁîüÂèòÂåñÔºâ‰∏éÂÖ∂ËßÇÂØüËÄÖÔºàÂü∫‰∫éÁä∂ÊÄÅÂèòÂåñËÄåË¢´ÈÄöÁü•ÁöÑÂõûË∞ÉÂáΩÊï∞Ôºâ‰πãÈó¥ÁöÑÊòæÂºè‰æùËµñÂÖ≥Á≥ªÊòØÈùûÂ∏∏‰∏çÂèØÂèñÁöÑ„ÄÇÁõ∏ÂèçÔºå‰∏ªÈ¢òÂ∫îËØ•ÂØπÊΩúÂú®ÁöÑÂ§öÁßç‰∏çÂêåÁ±ªÂûãÁöÑËßÇÂØüËÄÖ‰øùÊåÅ‰∏çÁü•ÊÉÖ„ÄÇÂéüÂõ†ÂæàÁÆÄÂçïÔºå‰ªª‰ΩïÁõ¥Êé•ÁöÑ‰æùËµñÈÉΩ‰ºö‰ΩøËΩØ‰ª∂Êõ¥ÈöæÊîπÂèòÂíåÊâ©Â±ï„ÄÇËøôÁßç‰∏ªÈ¢ò‰∏éÂÖ∂ÊΩúÂú®Â§ö‰∏™ËßÇÂØüËÄÖ‰πãÈó¥ÁöÑËß£ËÄ¶Ê≠£ÊòØËßÇÂØüËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑ„ÄÇ</p>
<p>ÂÉèÊâÄÊúâËÆæËÆ°Ê®°Âºè‰∏ÄÊ†∑ÔºåËßÇÂØüËÄÖËÆæËÆ°Ê®°ÂºèËØÜÂà´Âá∫‰∏Ä‰∏™ÊñπÈù¢‰Ωú‰∏∫ÂèòÂåñÁÇπÔºà‰∏Ä‰∏™ÂèòÂåñÊàñÈ¢ÑÊúü‰ºöÂèòÂåñÁöÑÊñπÈù¢ÔºâÔºåÂπ∂‰ª•ÊäΩË±°ÁöÑÂΩ¢ÂºèÊèêÂèñÂÆÉ„ÄÇÂõ†Ê≠§ÔºåÂÆÉÊúâÂä©‰∫éËß£ËÄ¶ËΩØ‰ª∂ÂÆû‰Ωì„ÄÇÂú®ËßÇÂØüËÄÖÁöÑÊÉÖÂÜµ‰∏ãÔºåÂºïÂÖ•Êñ∞ËßÇÂØüËÄÖÁöÑÈúÄÊ±Ç‚Äî‚ÄîÊâ©Â±ï‰∏ÄÂØπÂ§ö‰æùËµñÂÖ≥Á≥ª‚Äî‚ÄîË¢´ËÆ§‰∏∫ÊòØÂèòÂåñÁÇπ„ÄÇÂ¶ÇÂõæ6-2ÊâÄÁ§∫ÔºåËøôÁßçÂèòÂåñÁÇπÈÄöËøáËßÇÂØüËÄÖÂü∫Á±ªÁöÑÂΩ¢ÂºèÂÆûÁé∞„ÄÇ</p>
<p>ËßÇÂØüËÄÖÁ±ª‰ª£Ë°®‰∫ÜÊâÄÊúâÂèØËÉΩÁöÑËßÇÂØüËÄÖÂÆûÁé∞ÁöÑÊäΩË±°„ÄÇËøô‰∫õËßÇÂØüËÄÖË¢´ÈôÑÂä†Âà∞Áî±ÂÖ∑‰Ωì‰∏ªÈ¢òÁ±ªÔºàConcreteSubjectÔºâË°®Á§∫ÁöÑÁâπÂÆö‰∏ªÈ¢ò‰∏ä„ÄÇ‰∏∫‰∫ÜÂáèÂ∞ëËßÇÂØüËÄÖ‰∏éÂÖ∂‰∏ªÈ¢ò‰πãÈó¥ÁöÑËÄ¶ÂêàÔºåÊàñËÄÖÈÄöËøáÊèê‰æõÊâÄÊúâÈÄöÁî®ÊúçÂä°Êù•ÁÆÄÂåñ‰ª£Á†ÅÈáçÂ§çÔºåÂèØ‰ª•‰ΩøÁî®‰∏ªÈ¢òÊäΩË±°Êù•ËøõË°åattach()Âíådetach()Êìç‰Ωú„ÄÇËØ•‰∏ªÈ¢òËøòÂèØ‰ª•Âú®ÂÖ∂Áä∂ÊÄÅÂèëÁîüÂèòÂåñÊó∂ÈÄöÁü•ÊâÄÊúâÈôÑÂä†ÁöÑËßÇÂØüËÄÖÔºåÂπ∂Ëß¶ÂèëÂÆÉ‰ª¨Áõ∏Â∫îÁöÑÊõ¥Êñ∞ÂäüËÉΩÔºàupdate()Ôºâ„ÄÇ</p>
<p>‚ÄúÂºïÂÖ•ËßÇÂØüËÄÖÂü∫Á±ªÊòØ‰∏çÊòØÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÁöÑÂè¶‰∏Ä‰∏™‰æãÂ≠êÔºü‚Äù‰Ω†ÈóÆ„ÄÇÊòØÁöÑÔºå‰Ω†100%Ê≠£Á°ÆÔºöÊèêÂèñËßÇÂØüËÄÖÁ±ª„ÄÅÊèêÂèñÂèòÂåñÁÇπÊ≠£ÊòØSRPÁöÑÂÆûÈôÖÂ∫îÁî®ÔºàÂèÇËßÅ‚ÄúÊåáÂçó2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°‚ÄùÔºâ„ÄÇÂÜçÊ¨°Âº∫Ë∞ÉÔºåSRPÂÖÖÂΩìÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâÁöÑÊé®Âä®ËÄÖÔºàÂèÇËßÅ‚ÄúÊåáÂçó5Ôºö‰∏∫Êâ©Â±ïËÄåËÆæËÆ°‚ÄùÔºâÔºöÈÄöËøáÂºïÂÖ•ËßÇÂØüËÄÖÊäΩË±°Ôºå‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•Âú®‰∏çÈúÄË¶Å‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÁöÑÊÉÖÂÜµ‰∏ãÊ∑ªÂä†Êñ∞ÁöÑËßÇÂØüËÄÖÁ±ªÂûãÔºà‰æãÂ¶ÇÔºåÂÖ∑‰ΩìËßÇÂØüËÄÖConcreteObserverÔºâ„ÄÇÂ¶ÇÊûú‰Ω†Ê≥®ÊÑèËßÇÂØüËÄÖÂü∫Á±ªÁöÑÊâÄÊúâÊùÉÔºåÂπ∂Á°Æ‰øùËßÇÂØüËÄÖÁ±ª‰Ωç‰∫éÊû∂ÊûÑÁöÑÈ´òÁ∫ßÂà´ÔºåÈÇ£‰πà‰Ω†‰πüÊª°Ë∂≥‰∫Ü‰æùËµñÂÄíÁΩÆÂéüÂàôÔºàDIPÔºâ„ÄÇ</p>
<p><strong>ÁªèÂÖ∏ËßÇÂØüËÄÖÂÆûÁé∞</strong></p>
<p>‚ÄúÂæàÂ•ΩÔºåÊàëÊòéÁôΩ‰∫ÜÔºÅÂæàÈ´òÂÖ¥ÂÜçÊ¨°ÁúãÂà∞Ëøô‰∫õËÆæËÆ°ÂéüÂàôÁöÑÂÆûÈôÖÂ∫îÁî®Ôºå‰ΩÜÊàëÂ∏åÊúõËÉΩÂ§üÁúãÂà∞‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑËßÇÂØüËÄÖ‰æãÂ≠ê„ÄÇ‚Äù ÊàëÁêÜËß£„ÄÇÈÇ£‰πàËÆ©Êàë‰ª¨Êù•Áúã‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑËßÇÂØüËÄÖÂÆûÁé∞„ÄÇÁÑ∂ËÄåÔºåÂú®Êàë‰ª¨ÂºÄÂßãÁúã‰ª£Á†Å‰πãÂâçÔºåÊàëÂ∫îËØ•Ê∏ÖÊ•öÂú∞ËØ¥Êòé‰ª•‰∏ãÁ§∫‰æãÁöÑÂ±ÄÈôêÊÄß„ÄÇ‰Ω†ÂèØËÉΩÂ∑≤ÁªèÁÜüÊÇâËßÇÂØüËÄÖÊ®°ÂºèÔºåÂõ†Ê≠§‰Ω†ÂèØËÉΩÂú®ÂØªÊâæÂÖ≥‰∫éËÆ∏Â§öÊ£òÊâãÂÆûÁé∞ÁªÜËäÇÁöÑÂ∏ÆÂä©ÂíåÊ∑±ÂÖ•Âª∫ËÆÆÔºöÂ¶Ç‰ΩïÂ§ÑÁêÜÈôÑÂä†ÂíåÂàÜÁ¶ªËßÇÂØüËÄÖÁöÑÈ°∫Â∫è„ÄÅÂ§öÊ¨°ÈôÑÂä†Âêå‰∏Ä‰∏™ËßÇÂØüËÄÖ‰ª•ÂèäÁâπÂà´ÊòØÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠‰ΩøÁî®ËßÇÂØüËÄÖ„ÄÇÊàëÂøÖÈ°ªËØöÂÆûÂú∞ËØ¥ÊòéÔºåÊàëÁöÑÊÑèÂõæÂπ∂‰∏çÊòØÂõûÁ≠îËøô‰∫õÈóÆÈ¢ò„ÄÇËøôÁßçËÆ®ËÆ∫Â∞±ÂÉèÊòØÊâìÂºÄÊΩòÂ§öÊãâÈ≠îÁõíÔºåÂæàÂø´‰ºöÊääÊàë‰ª¨Â∏¶ÂÖ•ÂÆûÁé∞ÁªÜËäÇÁöÑÈ¢ÜÂüü„ÄÇ‰∏çÔºåÂ∞ΩÁÆ°‰Ω†ÂèØËÉΩ‰ºöÂ§±ÊúõÔºå‰ΩÜÊàëÁöÑÊÑèÂõæ‰∏ªË¶ÅÊòØÂÅúÁïôÂú®ËΩØ‰ª∂ËÆæËÆ°ÁöÑÂ±ÇÈù¢‰∏ä„ÄÇ</p>
<p>ÂÉèÂâçÈù¢ÁöÑËÆæËÆ°Ê®°Âºè‰∏ÄÊ†∑ÔºåÊàë‰ª¨‰ªéËßÇÂØüËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÁªèÂÖ∏ÂÆûÁé∞ÂºÄÂßã„ÄÇÊ†∏ÂøÉÂÖÉÁ¥†ÊòØËßÇÂØüËÄÖÂü∫Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Observer.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Observer</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="o">~</span><span class="n">Observer</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span> <span class="cm">/*...*/</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™Á±ªÊúÄÈáçË¶ÅÁöÑÂÆûÁé∞ÁªÜËäÇÊòØÁ∫ØËôöÂáΩÊï∞<code>update()</code>ÔºåÂΩìËßÇÂØüËÄÖË¢´ÈÄöÁü•Êüê‰∏™Áä∂ÊÄÅÂèòÂåñÊó∂Â∞±‰ºöË∞ÉÁî®ÂÆÉ„ÄÇÊúâ‰∏âÁßçÂÆö‰πâ<code>update()</code>ÂáΩÊï∞ÁöÑÊñπÂºèÔºåÊèê‰æõ‰∫ÜÂêàÁêÜÁöÑÂÆûÁé∞ÂíåËÆæËÆ°ÁÅµÊ¥ªÊÄß„ÄÇÁ¨¨‰∏ÄÁßçÊñπÂºèÊòØÈÄöËøá‰∏Ä‰∏™ÊàñÂ§ö‰∏™<code>update()</code>ÂáΩÊï∞Êé®ÈÄÅÊõ¥Êñ∞Áä∂ÊÄÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Observer</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">virtual</span> <span class="kt">void</span> <span class="n">update1</span><span class="p">(</span> <span class="cm">/*arguments representing the updated state*/</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">update2</span><span class="p">(</span> <span class="cm">/*arguments representing the updated state*/</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÂΩ¢ÂºèÁöÑËßÇÂØüËÄÖÈÄöÂ∏∏Ë¢´Áß∞‰∏∫‚ÄúÊé®ËßÇÂØüËÄÖ‚Äù„ÄÇÂú®ËøôÁßçÂΩ¢Âºè‰∏≠ÔºåËßÇÂØüËÄÖÁî±‰∏ªÈ¢òÊèê‰æõÊâÄÊúâÂøÖË¶ÅÁöÑ‰ø°ÊÅØÔºåÂõ†Ê≠§‰∏çÈúÄË¶ÅËá™Â∑±‰ªé‰∏ªÈ¢ò‰∏≠ÊèêÂèñ‰ªª‰Ωï‰ø°ÊÅØ„ÄÇËøôÂèØ‰ª•ÊòæËëóÂáèÂ∞ë‰∏é‰∏ªÈ¢òÁöÑËÄ¶ÂêàÔºåÂπ∂‰∏∫Â§ö‰∏™‰∏ªÈ¢òÈáçÁî®ËßÇÂØüËÄÖÁ±ªÂàõÈÄ†Êú∫‰ºö„ÄÇÊ≠§Â§ñÔºåÊØèÁßçÁä∂ÊÄÅÂèòÂåñÈÉΩÊúâÂçïÁã¨ÁöÑÈáçËΩΩÂáΩÊï∞‰πüÊòØ‰∏Ä‰∏™ÈÄâÈ°π„ÄÇÂú®ÂâçÈù¢ÁöÑ‰ª£Á†ÅÁâáÊÆµ‰∏≠Êúâ‰∏§‰∏™<code>update()</code>ÂáΩÊï∞ÔºåÊØè‰∏™ÂØπÂ∫î‰∏ÄÁßçÂèØËÉΩÁöÑÁä∂ÊÄÅÂèòÂåñ„ÄÇÁî±‰∫éÊÄªÊòØÊòéÁ°ÆÁü•ÈÅìÂì™‰∏™Áä∂ÊÄÅÂèëÁîü‰∫ÜÂèòÂåñÔºåËßÇÂØüËÄÖ‰∏çÈúÄË¶Å‚ÄúÊêúÁ¥¢‚Äù‰ªª‰ΩïÁä∂ÊÄÅÂèòÂåñÔºåËøôËØÅÊòéÊòØÈ´òÊïàÁöÑ„ÄÇ</p>
<p>‚ÄúÂØπ‰∏çËµ∑Ôºå‚Äù‰Ω†ËØ¥Ôºå‚Äú‰ΩÜËøô‰∏çÊòØËøùÂèç‰∫ÜÊé•Âè£ÈöîÁ¶ªÂéüÂàôÔºàISPÔºâÂêóÔºüÊàë‰ª¨Â∫îËØ•ÈÄöËøáÂ∞Ü<code>update()</code>ÂáΩÊï∞ÂàÜÂºÄÂà∞Âá†‰∏™Âü∫Á±ªÊù•ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÂêóÔºü‚Äù ËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÈóÆÈ¢òÔºÅÊòæÁÑ∂Ôºå‰Ω†Âú®Ë≠¶ÊÉï‰∫∫‰∏∫ÁöÑËÄ¶Âêà„ÄÇÈùûÂ∏∏Â•ΩÔºÅ‰Ω†ÊòØÊ≠£Á°ÆÁöÑÔºöÊàë‰ª¨ÂèØ‰ª•Â∞ÜÂÖ∑ÊúâÂ§ö‰∏™<code>update()</code>ÂáΩÊï∞ÁöÑËßÇÂØüËÄÖÊãÜÂàÜ‰∏∫Êõ¥Â∞èÁöÑËßÇÂØüËÄÖÁ±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Observer1</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">virtual</span> <span class="kt">void</span> <span class="n">update1</span><span class="p">(</span> <span class="cm">/*arguments representing the updated state*/</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Observer2</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">virtual</span> <span class="kt">void</span> <span class="n">update2</span><span class="p">(</span> <span class="cm">/*arguments representing the updated state*/</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁêÜËÆ∫‰∏äÔºåËøôÁßçÊñπÊ≥ïÂèØ‰ª•Â∏ÆÂä©ÂáèÂ∞ëÂØπÁâπÂÆö‰∏ªÈ¢òÁöÑËÄ¶ÂêàÔºåÂπ∂Êõ¥ÂÆπÊòì‰∏∫‰∏çÂêåÁöÑ‰∏ªÈ¢òÈáçÁî®ËßÇÂØüËÄÖ„ÄÇ‰∏çÂêåËßÇÂØüËÄÖÂèØËÉΩÂØπ‰∏çÂêåÁöÑÁä∂ÊÄÅÂèòÂåñÊÑüÂÖ¥Ë∂£ÔºåÂõ†Ê≠§‰∫∫‰∏∫Âú∞Â∞ÜÊâÄÊúâÂèØËÉΩÁöÑÁä∂ÊÄÅÂèòÂåñËÄ¶ÂêàÂú®‰∏ÄËµ∑ÂèØËÉΩÊòØËøùÂèçISPÁöÑ„ÄÇÂΩìÁÑ∂ÔºåÂ¶ÇÊûúËÉΩÂ§üÈÅøÂÖçÂæàÂ§ö‰∏çÂøÖË¶ÅÁöÑÁä∂ÊÄÅÂèòÂåñÈÄöÁü•ÔºåËøôÂèØËÉΩ‰ºöÂ∏¶Êù•ÊïàÁéáÊèêÂçá„ÄÇ</p>
<p>‰∏çÂπ∏ÁöÑÊòØÔºåÁâπÂÆöÁöÑ‰∏ªÈ¢ò‰∏çÂ§™ÂèØËÉΩÂå∫ÂàÜ‰∏çÂêåÁ±ªÂûãÁöÑËßÇÂØüËÄÖ„ÄÇÈ¶ñÂÖàÔºåÂõ†‰∏∫ËøôÈúÄË¶Å‰∏ªÈ¢òÂ≠òÂÇ®‰∏çÂêåÁ±ªÂûãÁöÑÊåáÈíàÔºàÂØπ‰∫é‰∏ªÈ¢òÊù•ËØ¥Â§ÑÁêÜËµ∑Êù•‰∏çÊñπ‰æøÔºâÔºåÂÖ∂Ê¨°ÔºåÂõ†‰∏∫‰∏çÂêåÁä∂ÊÄÅÂèòÂåñ‰πãÈó¥ÂèØËÉΩÂ≠òÂú®ÊüêÁßçËÅîÁ≥ª„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰∏ªÈ¢òÊúüÊúõËßÇÂØüËÄÖÂØπÊâÄÊúâÂèØËÉΩÁöÑÁä∂ÊÄÅÂèòÂåñÈÉΩÊÑüÂÖ¥Ë∂£„ÄÇ‰ªéËøô‰∏™ËßíÂ∫¶Êù•ÁúãÔºåÂ∞ÜÂ§ö‰∏™<code>update()</code>ÂáΩÊï∞ÁªÑÂêàÂà∞‰∏Ä‰∏™Âü∫Á±ª‰∏≠ÊòØÂêàÁêÜÁöÑ„ÄÇÊó†ËÆ∫ÊÄéÊ†∑ÔºåÂÖ∑‰ΩìËßÇÂØüËÄÖÂæàÂèØËÉΩÈúÄË¶ÅÂ§ÑÁêÜÊâÄÊúâÁ±ªÂûãÁöÑÁä∂ÊÄÅÂèòÂåñ„ÄÇÊàëÁü•ÈÅìÔºåÂç≥‰ΩøÂè™ÂØπÂÖ∂‰∏≠‰∏ÄÂ∞èÈÉ®ÂàÜÊÑüÂÖ¥Ë∂£Ôºå‰πüÂøÖÈ°ªÂ§ÑÁêÜÂ§ö‰∏™<code>update()</code>ÂáΩÊï∞ÔºåËøôÂèØËÉΩÊòØ‰∏™È∫ªÁÉ¶„ÄÇ‰ΩÜÊòØÔºå‰ªçÁÑ∂Ë¶ÅÁ°Æ‰øù‰∏çË¶ÅÊó†ÊÑè‰∏≠ËøùÂèçÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºàLSPÔºâÔºåÂ¶ÇÊûú‰∏çÈÅµÂÆàÊüê‰∫õÈ¢ÑÊúüË°å‰∏∫ÔºàÂ¶ÇÊûúÊúâÔºâ„ÄÇ</p>
<p>ÊúâÂá†‰∏™ÊΩúÂú®Áº∫ÁÇπ‰ΩøÂæóÊé®ËßÇÂØüËÄÖÂπ∂‰∏çÁêÜÊÉ≥„ÄÇÈ¶ñÂÖàÔºåËßÇÂØüËÄÖÊÄªÊòØÂæóÂà∞ÊâÄÊúâ‰ø°ÊÅØÔºåÊó†ËÆ∫ÊòØÂê¶ÈúÄË¶Å„ÄÇÂõ†Ê≠§ÔºåÂè™ÊúâÂú®ËßÇÂØüËÄÖÂ§ßÂ§öÊï∞Êó∂ÂÄôÈÉΩÈúÄË¶ÅËøô‰∫õ‰ø°ÊÅØÊó∂ÔºåËøôÁßçÊé®ÈÄÅÈ£éÊ†ºÊâçÊúâÊïà„ÄÇÂê¶ÂàôÔºåÂæàÂ§öÂä™Âäõ‰ºöÊµ™Ë¥πÂú®‰∏çÂøÖË¶ÅÁöÑÈÄöÁü•‰∏ä„ÄÇÂÖ∂Ê¨°ÔºåÊé®ÈÄÅ‰ºö‰∫ßÁîüÂØπ‰º†ÈÄíÁªôËßÇÂØüËÄÖÁöÑÂèÇÊï∞Êï∞ÈáèÂíåÁßçÁ±ªÁöÑ‰æùËµñ„ÄÇÂØπËøô‰∫õÂèÇÊï∞ÁöÑ‰ªª‰ΩïÊõ¥ÊîπÈÉΩÈúÄË¶ÅÂú®ÁªßÊâøËßÇÂØüËÄÖÁ±ª‰∏≠ËøõË°åÂ§ßÈáèÂêéÁª≠Êõ¥Êîπ„ÄÇ</p>
<p>‰∏Ä‰∫õËøô‰∫õÁº∫ÁÇπÂèØ‰ª•ÈÄöËøáÁ¨¨‰∫åÁßçËßÇÂØüËÄÖÊõø‰ª£ÊñπÊ°àËß£ÂÜ≥„ÄÇÂèØ‰ª•Âè™‰º†ÈÄí‰∏ªÈ¢òÁöÑÂºïÁî®Êù•ËßÇÂØüËÄÖÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Observer</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">virtual</span> <span class="kt">void</span> <span class="n">update</span><span class="p">(</span> <span class="n">Subject</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">subject</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫éÊ≤°ÊúâÂêëËßÇÂØüËÄÖ‰º†ÈÄíÁâπÂÆö‰ø°ÊÅØÔºåÁªßÊâøËá™ËßÇÂØüËÄÖÂü∫Á±ªÁöÑÁ±ªÈúÄË¶ÅËá™Ë°å‰ªé‰∏ªÈ¢ò‰∏≠ÊèêÂèñÊñ∞‰ø°ÊÅØ„ÄÇÂõ†Ê≠§ÔºåËøôÁßçÂΩ¢ÂºèÁöÑËßÇÂØüËÄÖÈÄöÂ∏∏Ë¢´Áß∞‰∏∫‚ÄúÊãâËßÇÂØüËÄÖ‚Äù„ÄÇ‰ºòÁÇπÊòØÂØπÂèÇÊï∞Êï∞ÈáèÂíåÁßçÁ±ªÁöÑ‰æùËµñÂáèÂ∞ë„ÄÇË°çÁîüËßÇÂØüËÄÖÂèØ‰ª•Ëá™Áî±Êü•ËØ¢‰ªª‰Ωï‰ø°ÊÅØÔºåËÄå‰∏ç‰ªÖ‰ªÖÊòØÊîπÂèòÁöÑÁä∂ÊÄÅ„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåËøôÁßçËÆæËÆ°‰ºöÂú®ÁªßÊâøËá™ËßÇÂØüËÄÖÁöÑÁ±ªÂíå‰∏ªÈ¢ò‰πãÈó¥ÂàõÂª∫Âº∫Áõ¥Êé•‰æùËµñÂÖ≥Á≥ª„ÄÇÂõ†Ê≠§Ôºå‰ªª‰ΩïÂØπ‰∏ªÈ¢òÁöÑÊõ¥ÊîπÈÉΩ‰ºöËΩªÊòìÂΩ±ÂìçËßÇÂØüËÄÖ„ÄÇÊ≠§Â§ñÔºåËßÇÂØüËÄÖÂèØËÉΩÈúÄË¶Å‚ÄúÊêúÁ¥¢‚ÄùÁä∂ÊÄÅÂèòÂåñÔºåÂ¶ÇÊûúÂ§ö‰∏™ÁªÜËäÇÂèëÁîü‰∫ÜÂèòÂåñÔºåËøôÂèØËÉΩ‰ºöËØÅÊòéÊòØ‰∏çÂøÖË¶ÅÁöÑ‰ΩéÊïà„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†‰ªÖËÄÉËôëÂçï‰∏™ÂèòÂåñÁä∂ÊÄÅÔºåÊÄßËÉΩÂä£ÂäøÂèØËÉΩ‰∏ç‰ºöÂØπ‰Ω†ÊûÑÊàêÈôêÂà∂„ÄÇ‰∏çËøáÔºåËØ∑ËÆ∞‰ΩèËΩØ‰ª∂‰ºöÂèëÁîüÂèòÂåñÔºö‰∏ªÈ¢òÂèØËÉΩ‰ºöÂ¢ûÈïøÔºåÈöè‰πãËÄåÊù•ÁöÑÊòØÈÄöÁü•‰∏çÂêåÁ±ªÂûãÂèòÂåñÁöÑÈúÄÊ±Ç„ÄÇÈÄÇÂ∫îËøô‰∫õÂèòÂåñ‰ºöÂØºËá¥Â§ßÈáèÁöÑÈ¢ùÂ§ñÂ∑•‰Ωú„ÄÇ‰ªéËøô‰∏™ËßíÂ∫¶ÁúãÔºåÊé®ËßÇÂØüËÄÖ‰ºº‰πéÊòØ‰∏Ä‰∏™Êõ¥Â•ΩÁöÑÈÄâÊã©„ÄÇ</p>
<p>Âπ∏ËøêÁöÑÊòØÔºåÂ≠òÂú®Á¨¨‰∏âÁßçÊõø‰ª£ÊñπÊ°àÔºåÊ∂àÈô§‰∫Ü‰πãÂâçÁöÑËÆ∏Â§öÁº∫ÁÇπÔºå‰ªéËÄåÊàê‰∏∫Êàë‰ª¨ÁöÑÈ¶ñÈÄâÔºöÈô§‰∫Ü‰º†ÈÄí‰∏ªÈ¢òÂºïÁî®Â§ñÔºåËøò‰º†ÈÄí‰∏Ä‰∏™Ê†áÁ≠æ‰ª•Êèê‰æõÊúâÂÖ≥Âì™‰∏™Â±ûÊÄßÂ∑≤Êõ¥ÊîπÁöÑ‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Observer.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Observer</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="o">~</span><span class="n">Observer</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span> <span class="n">Subject</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">subject</span><span class="p">,</span> <span class="cm">/*Subject-specific type*/</span> <span class="n">property</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ•Ê†áÁ≠æÂèØ‰ª•Â∏ÆÂä©ËßÇÂØüËÄÖÂÜ≥ÂÆöÊüê‰∏™Áä∂ÊÄÅÂèòÂåñÊòØÂê¶ÊúâË∂£„ÄÇÈÄöÂ∏∏Ë°®Á§∫‰∏∫‰∏ªÈ¢òÁâπÂÆöÊûö‰∏æÁ±ªÂûãÔºåÂàóÂá∫ÊâÄÊúâÂèØËÉΩÁöÑÁä∂ÊÄÅÂèòÂåñ„ÄÇÈÅóÊÜæÁöÑÊòØÔºåËøôÂ¢ûÂä†‰∫ÜËßÇÂØüËÄÖÁ±ªÂØπÁâπÂÆö‰∏ªÈ¢òÁöÑËÄ¶Âêà„ÄÇ</p>
<p>‚ÄúÈÄöËøáÂ∞ÜËßÇÂØüËÄÖÂü∫Á±ªÂÆûÁé∞‰∏∫Á±ªÊ®°ÊùøÔºåÊòØÂê¶ÂèØ‰ª•ÁßªÈô§ÂØπÁâπÂÆö‰∏ªÈ¢òÁöÑ‰æùËµñÔºü‚Äù‰Ω†ÈóÆÈÅì„ÄÇËØ∑Áúã‰ª•‰∏ã‰ª£Á†ÅÁâáÊÆµÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Observer.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Subject</span><span class="p">,</span> <span class="k">typename</span> <span class="n">StateTag</span> <span class="o">&gt;</span>  
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Observer</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="o">~</span><span class="n">Observer</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span> <span class="n">Subject</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">subject</span><span class="p">,</span> <span class="n">StateTag</span> <span class="n">property</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÂª∫ËÆÆ„ÄÇÈÄöËøáÂ∞ÜËßÇÂØüËÄÖÁ±ªÂÆö‰πâ‰∏∫Á±ªÊ®°ÊùøÁöÑÂΩ¢ÂºèÔºåÊàë‰ª¨ÂèØ‰ª•ËΩªÊùæÂ∞ÜÂÖ∂ÊèêÂçáÂà∞Êõ¥È´òÁöÑÊû∂ÊûÑÁ∫ßÂà´„ÄÇÂú®ËøôÁßçÂΩ¢Âºè‰∏ãÔºåÁ±ª‰∏ç‰æùËµñ‰∫é‰ªª‰ΩïÁâπÂÆö‰∏ªÈ¢òÔºåÂõ†Ê≠§ÂèØ‰ª•Ë¢´Â∏åÊúõÂÆö‰πâ‰∏ÄÂØπÂ§öÂÖ≥Á≥ªÁöÑËÆ∏Â§ö‰∏çÂêå‰∏ªÈ¢òÈáçÂ§ç‰ΩøÁî®„ÄÇÁÑ∂ËÄåÔºå‰Ω†‰∏çÂ∫îÂØπÊ≠§ÊîπËøõÊúüÊúõËøáÈ´òÔºöÊïàÊûú‰ªÖÈôê‰∫éËßÇÂØüËÄÖÁ±ª„ÄÇÂÖ∑‰Ωì‰∏ªÈ¢ò‰ºöÊúüÊúõËØ•ËßÇÂØüËÄÖÁ±ªÁöÑÂÖ∑‰ΩìÂÆû‰æãÂåñÔºåÂπ∂‰∏îÂÖ∑‰ΩìÂÆûÁé∞ÁöÑËßÇÂØüËÄÖ‰ªçÁÑ∂Âº∫ÁÉà‰æùËµñ‰∫é‰∏ªÈ¢ò„ÄÇ</p>
<p>‰∏∫‰∫ÜÊõ¥Â•ΩÂú∞ÁêÜËß£‰∏∫‰ªÄ‰πà‰ºöËøôÊ†∑ÔºåËÆ©Êàë‰ª¨Áúã‰∏Ä‰∏ã‰∏Ä‰∏™ÂèØËÉΩÁöÑ‰∏ªÈ¢òÂÆûÁé∞„ÄÇÂú®‰Ω†ÊúÄÂàùÁöÑÂÖ≥‰∫éÁ§æ‰∫§Â™í‰ΩìÁöÑËØÑËÆ∫‰πãÂêéÔºåÊàëÂª∫ËÆÆÊàë‰ª¨‰∏∫‰∫∫Áâ©ÂÆûÁé∞‰∏Ä‰∏™ËßÇÂØüËÄÖ„ÄÇÂ•ΩÂêßÔºåËøô‰∏™‰æãÂ≠êÂèØËÉΩÂú®ÈÅìÂæ∑‰∏äÊúâÈóÆÈ¢òÔºå‰ΩÜÂÆÉ‰ºöËææÂà∞ÁõÆÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨Â∞±Áî®Ëøô‰∏™‰æãÂ≠êÂêß„ÄÇËá≥Â∞ëÊàë‰ª¨Áü•ÈÅìÊòØË∞ÅÈÄ†ÊàêÁöÑ„ÄÇ</p>
<p>‰ª•‰∏ã<code>Person</code>Á±ª‰ª£Ë°®‰∏Ä‰∏™Ë¢´ËßÇÂØüÁöÑ‰∫∫Áâ©Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Person.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Observer.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;set&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Person</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">enum</span> <span class="nc">StateChange</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">forenameChanged</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">      <span class="n">surnameChanged</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">      <span class="n">addressChanged</span> 
</span></span><span class="line"><span class="cl">   <span class="p">};</span> 
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">PersonObserver</span> <span class="o">=</span> <span class="n">Observer</span><span class="o">&lt;</span><span class="n">Person</span><span class="p">,</span><span class="n">StateChange</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="k">explicit</span> <span class="nf">Person</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">forename</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">surname</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">      <span class="o">:</span> <span class="n">forename_</span><span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">forename</span><span class="p">)</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">      <span class="p">,</span> <span class="n">surname_</span><span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">surname</span><span class="p">)</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">bool</span> <span class="nf">attach</span><span class="p">(</span> <span class="n">PersonObserver</span><span class="o">*</span> <span class="n">observer</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl">   <span class="kt">bool</span> <span class="nf">detach</span><span class="p">(</span> <span class="n">PersonObserver</span><span class="o">*</span> <span class="n">observer</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">notify</span><span class="p">(</span> <span class="n">StateChange</span> <span class="n">property</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">forename</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">newForename</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">surname</span> <span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">newSurname</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="nf">address</span> <span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">newAddress</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">forename</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">forename_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">surname</span> <span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">surname_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">address</span> <span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">address_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">forename_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">surname_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">address_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">PersonObserver</span><span class="o">*&gt;</span> <span class="n">observers_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå<code>Person</code>Âè™ÊòØ‰∏â‰∏™Êï∞ÊçÆÊàêÂëòÁöÑËÅöÂêàÔºö<code>forename_</code>„ÄÅ<code>surname_</code>Âíå<code>address_</code>ÔºàÊàëÁü•ÈÅìÔºåËøôÊòØ‰∏Ä‰∏™‰∫∫ÈùûÂ∏∏ÁÆÄÂçïÁöÑË°®Á§∫Ôºâ„ÄÇÊ≠§Â§ñÔºå‰∏Ä‰∏™‰∫∫ÊåÅÊúâÊ≥®ÂÜåËßÇÂØüËÄÖÁöÑ<code>std::set</code>„ÄÇËØ∑Ê≥®ÊÑèÔºåËßÇÂØüËÄÖÊòØÈÄöËøáÊåáÂêë<code>PersonObserver</code>ÂÆû‰æãÁöÑÊåáÈíàÊ≥®ÂÜåÁöÑ„ÄÇËøôÊúâ‰∏§‰∏™ÂéüÂõ†ÔºöÈ¶ñÂÖàÔºåËøôÂ±ïÁ§∫‰∫ÜÊ®°ÊùøÂåñÁöÑËßÇÂØüËÄÖÁ±ªÁöÑÁõÆÁöÑÔºö<code>Person</code>Á±ªÂÆû‰æãÂåñ‰∫ÜËá™Â∑±ÁöÑËßÇÂØüËÄÖÁ±ªÂûã„ÄÇÂÖ∂Ê¨°ÔºåÊåáÈíàÂú®ËøôÈáåÈùûÂ∏∏ÊúâÁî®ÔºåÂõ†‰∏∫ÂØπË±°ÁöÑÂú∞ÂùÄÊòØÂîØ‰∏ÄÁöÑ„ÄÇÂõ†Ê≠§ÔºåÈÄöÂ∏∏‰ΩøÁî®Âú∞ÂùÄ‰Ωú‰∏∫ËßÇÂØüËÄÖÁöÑÂîØ‰∏ÄÊ†áËØÜÁ¨¶„ÄÇ</p>
<p>‚ÄúËøô‰∏çÂ∫îËØ•‰ΩøÁî®<code>std::unique_ptr</code>Êàñ<code>std::shared_ptr</code>ÂêóÔºü‚Äù‰Ω†ÈóÆ„ÄÇ‰∏çÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ã‰∏çÈúÄË¶Å„ÄÇÊåáÈíà‰ªÖ‰Ωú‰∏∫Ê≥®ÂÜåËßÇÂØüËÄÖÁöÑÂè•ÊüÑÔºõÂÆÉ‰ª¨‰∏çÂ∫îËØ•Êã•ÊúâËßÇÂØüËÄÖ„ÄÇÂõ†Ê≠§Ôºå‰ªª‰ΩïÊã•ÊúâÊô∫ËÉΩÊåáÈíàÈÉΩÊòØ‰∏çÂêàÈÄÇÁöÑÂ∑•ÂÖ∑„ÄÇÂîØ‰∏ÄÂêàÁêÜÁöÑÈÄâÊã©ÊòØ<code>std::weak_ptr</code>ÔºåÂÆÉÂèØ‰ª•ËÆ©‰Ω†Ê£ÄÊü•ÊÇ¨Á©∫ÊåáÈíà„ÄÇÁÑ∂ËÄåÔºå<code>std::weak_ptr</code>‰∏çÈÄÇÂêàÁî®‰Ωú<code>std::set</code>ÁöÑÈîÆÔºàÂç≥‰ΩøÊòØÂ∏¶ÊúâËá™ÂÆö‰πâÊØîËæÉÂô®Ôºâ„ÄÇËôΩÁÑ∂Êúâ‰∏Ä‰∫õÊñπÊ≥ï‰ªçÁÑ∂ÂèØ‰ª•‰ΩøÁî®<code>std::weak_ptr</code>Ôºå‰ΩÜÊàëÂ∞ÜÂùöÊåÅ‰ΩøÁî®ÂéüÂßãÊåáÈíà„ÄÇ‰ΩÜËøôÂπ∂‰∏çÊÑèÂë≥ÁùÄÊàë‰ª¨Ë¶ÅÊîæÂºÉÁé∞‰ª£C++ÁöÑÂ•ΩÂ§Ñ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰ΩøÁî®ÂéüÂßãÊåáÈíàÊòØÂÆåÂÖ®ÊúâÊïàÁöÑ„ÄÇËøô‰πü‰ΩìÁé∞Âú®C++Ê†∏ÂøÉÊåáÂçóF.7‰∏≠Ôºö ÂØπ‰∫é‰∏ÄËà¨Áî®ÈÄîÔºåÂèñ<code>T*</code>Êàñ<code>T&amp;</code>ÂèÇÊï∞ËÄå‰∏çÊòØÊô∫ËÉΩÊåáÈíà„ÄÇ</p>
<p>ÊØèÂΩìÂØπ‰∫∫ÁöÑÁä∂ÊÄÅÂèòÂåñÊÑüÂÖ¥Ë∂£Êó∂ÔºåÈÉΩÂèØ‰ª•ÈÄöËøá<code>attach()</code>ÊàêÂëòÂáΩÊï∞Ê≥®ÂÜå‰∏Ä‰∏™ËßÇÂØüËÄÖ„ÄÇÂΩì‰Ω†‰∏çÂÜçÂ∏åÊúõÊé•Êî∂ÈÄöÁü•Êó∂ÔºåÂèØ‰ª•ÈÄöËøá<code>detach()</code>ÊàêÂëòÂáΩÊï∞Ê≥®ÈîÄËßÇÂØüËÄÖ„ÄÇËøô‰∏§‰∏™ÂáΩÊï∞ÊòØËßÇÂØüËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉÁªÑÊàêÈÉ®ÂàÜÔºåÂπ∂‰∏îÊòØÂ∫îÁî®ËØ•ËÆæËÆ°Ê®°ÂºèÁöÑÊòéÁ°ÆÊ†áÂøóÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">bool</span> <span class="n">Person</span><span class="o">::</span><span class="n">attach</span><span class="p">(</span> <span class="n">PersonObserver</span><span class="o">*</span> <span class="n">observer</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">auto</span> <span class="p">[</span><span class="n">pos</span><span class="p">,</span><span class="n">success</span><span class="p">]</span> <span class="o">=</span> <span class="n">observers_</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span> <span class="n">observer</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">success</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">bool</span> <span class="n">Person</span><span class="o">::</span><span class="n">detach</span><span class="p">(</span> <span class="n">PersonObserver</span><span class="o">*</span> <span class="n">observer</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="p">(</span> <span class="n">observers_</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span> <span class="n">observer</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0U</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰Ω†ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÈúÄÊ±ÇËá™Áî±ÂÆûÁé∞<code>attach()</code>Âíå<code>detach()</code>ÂáΩÊï∞„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨ÂÖÅËÆ∏‰∏Ä‰∏™ËßÇÂØüËÄÖÂè™ËÉΩÊ≥®ÂÜå‰∏ÄÊ¨°Âà∞<code>std::set</code>‰∏≠„ÄÇÂ¶ÇÊûú‰Ω†Â∞ùËØïÁ¨¨‰∫åÊ¨°Ê≥®ÂÜåÂêå‰∏Ä‰∏™ËßÇÂØüËÄÖÔºåÂáΩÊï∞‰ºöËøîÂõû<code>false</code>„ÄÇÂêåÊ†∑ÔºåÂ¶ÇÊûú‰Ω†Â∞ùËØïÊ≥®ÈîÄ‰∏Ä‰∏™Êú™Ê≥®ÂÜåÁöÑËßÇÂØüËÄÖÔºå‰πü‰ºöËøîÂõû<code>false</code>„ÄÇËØ∑Ê≥®ÊÑèÔºå‰∏çÂÖÅËÆ∏Â§öÊ¨°Ê≥®ÂÜåÊòØÊàëÁöÑÈÄâÊã©„ÄÇÂú®ÂÖ∂‰ªñÂú∫ÊôØ‰∏≠ÔºåÊé•ÂèóÈáçÂ§çÊ≥®ÂÜåÂèØËÉΩÊòØÂèØÂèñÁîöËá≥ÂøÖË¶ÅÁöÑ„ÄÇÊó†ËÆ∫Â¶Ç‰ΩïÔºå‰∏ªÈ¢òÁöÑË°å‰∏∫ÂíåÊé•Âè£Âú®ÊâÄÊúâÊÉÖÂÜµ‰∏ãÈÉΩÂ∫îËØ•‰∏ÄËá¥„ÄÇ</p>
<p>Âè¶‰∏Ä‰∏™ËßÇÂØüËÄÖËÆæËÆ°Ê®°ÂºèÁöÑÊ†∏ÂøÉÂáΩÊï∞ÊòØ<code>notify()</code>ÊàêÂëòÂáΩÊï∞„ÄÇÊØèÂΩìÂèëÁîüÊüêÁßçÁä∂ÊÄÅÂèòÂåñÊó∂ÔºåÊ≠§ÂáΩÊï∞‰ºöË¢´Ë∞ÉÁî®‰ª•ÈÄöÁü•ÊâÄÊúâÊ≥®ÂÜåÁöÑËßÇÂØüËÄÖÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Person</span><span class="o">::</span><span class="n">notify</span><span class="p">(</span> <span class="n">StateChange</span> <span class="n">property</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">for</span><span class="p">(</span> <span class="k">auto</span> <span class="n">iter</span><span class="o">=</span><span class="n">begin</span><span class="p">(</span><span class="n">observers_</span><span class="p">);</span> <span class="n">iter</span><span class="o">!=</span><span class="n">end</span><span class="p">(</span><span class="n">observers_</span><span class="p">);</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="k">auto</span> <span class="k">const</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">iter</span><span class="o">++</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span><span class="n">property</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚Äú‰∏∫‰ªÄ‰πà<code>notify()</code>ÂáΩÊï∞ÁöÑÂÆûÁé∞Â¶ÇÊ≠§Â§çÊùÇÔºüËåÉÂõ¥Âü∫‰∫éÁöÑforÂæ™ÁéØÈöæÈÅì‰∏çÂ§üÂêóÔºü‚Äù‰Ω†ÈóÆÂæóÂØπÔºåÊàëÂ∫îËØ•Ëß£Èáä‰∏Ä‰∏ãËøôÈáåÂèëÁîü‰∫Ü‰ªÄ‰πà„ÄÇÁªôÂá∫ÁöÑË°®ËææÂºèÁ°Æ‰øùÂèØ‰ª•Âú®Ëø≠‰ª£ÊúüÈó¥Ê£ÄÊµãÂà∞<code>detach()</code>Êìç‰Ωú„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûúËßÇÂØüËÄÖÂú®Ë∞ÉÁî®<code>update()</code>ÂáΩÊï∞Êó∂ÂÜ≥ÂÆöËá™ÊàëÂàÜÁ¶ªÔºåÂàôÂèØËÉΩÂèëÁîüËøôÁßçÊÉÖÂÜµ„ÄÇ‰ΩÜÊàë‰∏çËÉΩËØ¥ËøôÁßçÂÆûÁé∞ÊòØÂÆåÁæéÁöÑÔºö‰∏çÂπ∏ÁöÑÊòØÔºåÂÆÉÊó†Ê≥ïÂ∫îÂØπ<code>attach()</code>Êìç‰Ωú„ÄÇËÄå‰∏î‰∏çË¶ÅÂºÄÂßãËØ¢ÈóÆÂπ∂ÂèëÈóÆÈ¢òÔºÅÂõ†Ê≠§ÔºåËøôÂè™ÊòØËßÇÂØüËÄÖÂÆûÁé∞ÁªÜËäÇ‰∏∫‰ΩïÂ¶ÇÊ≠§Ê£òÊâãÁöÑ‰∏Ä‰∏™‰æãÂ≠ê„ÄÇ</p>
<p><code>notify()</code>ÂáΩÊï∞Âú®ÊâÄÊúâ‰∏â‰∏™ËÆæÁΩÆÂáΩÊï∞‰∏≠Ë¢´Ë∞ÉÁî®„ÄÇËØ∑Ê≥®ÊÑèÔºåÂú®ÊâÄÊúâ‰∏â‰∏™ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨ÊÄªÊòØ‰º†ÈÄí‰∏çÂêåÁöÑÊ†áÁ≠æÊù•ÊåáÁ§∫Âì™‰∏™Â±ûÊÄßÂ∑≤Êõ¥Êîπ„ÄÇËøô‰∏™Ê†áÁ≠æÂèØ‰ª•Áî±ÁªßÊâøËá™ËßÇÂØüËÄÖÂü∫Á±ªÁöÑÁ±ªÁî®Êù•Á°ÆÂÆöÂèòÂåñÁöÑÊÄßË¥®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Person</span><span class="o">::</span><span class="n">forename</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">newForename</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="n">forename_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">newForename</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">notify</span><span class="p">(</span> <span class="n">forenameChanged</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Person</span><span class="o">::</span><span class="n">surname</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">newSurname</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="n">surname_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">newSurname</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">notify</span><span class="p">(</span> <span class="n">surnameChanged</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Person</span><span class="o">::</span><span class="n">address</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">newAddress</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="n">address_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">newAddress</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">notify</span><span class="p">(</span> <span class="n">addressChanged</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êúâ‰∫ÜËøô‰∫õÊú∫Âà∂Ôºå‰Ω†Áé∞Âú®ÂèØ‰ª•ÁºñÂÜôÊñ∞ÁöÑÂÆåÂÖ®Á¨¶ÂêàOCPÔºàÂºÄÈó≠ÂéüÂàôÔºâÁöÑËßÇÂØüËÄÖ„ÄÇ‰æãÂ¶ÇÔºå‰Ω†ÂèØ‰ª•ÂÜ≥ÂÆöÂÆûÁé∞‰∏Ä‰∏™<code>NameObserver</code>Âíå‰∏Ä‰∏™<code>AddressObserver</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;NameObserver.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Observer.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Person.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">NameObserver</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Observer</span><span class="o">&lt;</span><span class="n">Person</span><span class="p">,</span><span class="n">Person</span><span class="o">::</span><span class="n">StateChange</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="n">update</span><span class="p">(</span> <span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">person</span><span class="p">,</span> <span class="n">Person</span><span class="o">::</span><span class="n">StateChange</span> <span class="n">property</span> <span class="p">)</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;NameObserver.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;NameObserver.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="n">NameObserver</span><span class="o">::</span><span class="n">update</span><span class="p">(</span> <span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">person</span><span class="p">,</span> <span class="n">Person</span><span class="o">::</span><span class="n">StateChange</span> <span class="n">property</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">if</span><span class="p">(</span> <span class="n">property</span> <span class="o">==</span> <span class="n">Person</span><span class="o">::</span><span class="n">forenameChanged</span> <span class="o">||</span> 
</span></span><span class="line"><span class="cl">       <span class="n">property</span> <span class="o">==</span> <span class="n">Person</span><span class="o">::</span><span class="n">surnameChanged</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="c1">// ... ÂìçÂ∫îÂêçÂ≠óÂèòÂåñ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;AddressObserver.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Observer.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Person.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">AddressObserver</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Observer</span><span class="o">&lt;</span><span class="n">Person</span><span class="p">,</span><span class="n">Person</span><span class="o">::</span><span class="n">StateChange</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="kt">void</span> <span class="n">update</span><span class="p">(</span> <span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">person</span><span class="p">,</span> <span class="n">Person</span><span class="o">::</span><span class="n">StateChange</span> <span class="n">property</span> <span class="p">)</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;AddressObserver.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;AddressObserver.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="n">AddressObserver</span><span class="o">::</span><span class="n">update</span><span class="p">(</span> <span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">person</span><span class="p">,</span> <span class="n">Person</span><span class="o">::</span><span class="n">StateChange</span> <span class="n">property</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">if</span><span class="p">(</span> <span class="n">property</span> <span class="o">==</span> <span class="n">Person</span><span class="o">::</span><span class="n">addressChanged</span> <span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="c1">// ... ÂìçÂ∫îÂú∞ÂùÄÂèòÂåñ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ë£ÖÂ§á‰∫ÜËøô‰∏§‰∏™ËßÇÂØüËÄÖÂêéÔºåÁé∞Âú®Êó†ËÆ∫‰ΩïÊó∂‰∫∫ÁöÑÂêçÂ≠óÊàñÂú∞ÂùÄÂèëÁîüÂèòÂåñÔºå‰Ω†ÈÉΩ‰ºöÊî∂Âà∞ÈÄöÁü•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;AddressObserver.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;NameObserver.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Person.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="n">NameObserver</span> <span class="n">nameObserver</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">AddressObserver</span> <span class="n">addressObserver</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Person</span> <span class="n">homer</span><span class="p">(</span> <span class="s">&#34;Homer&#34;</span>     <span class="p">,</span> <span class="s">&#34;Simpson&#34;</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Person</span> <span class="n">marge</span><span class="p">(</span> <span class="s">&#34;Marge&#34;</span>     <span class="p">,</span> <span class="s">&#34;Simpson&#34;</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Person</span> <span class="n">monty</span><span class="p">(</span> <span class="s">&#34;Montgomery&#34;</span><span class="p">,</span> <span class="s">&#34;Burns&#34;</span>   <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// Ê≥®ÂÜåËßÇÂØüËÄÖ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">homer</span><span class="p">.</span><span class="n">attach</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">nameObserver</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">marge</span><span class="p">.</span><span class="n">attach</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">addressObserver</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">monty</span><span class="p">.</span><span class="n">attach</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">addressObserver</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// Êõ¥Êñ∞Homer SimpsonÁöÑ‰ø°ÊÅØ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">homer</span><span class="p">.</span><span class="n">forename</span><span class="p">(</span> <span class="s">&#34;Homer Jay&#34;</span> <span class="p">);</span>  <span class="c1">// Ê∑ªÂä†‰∏≠Èó¥Âêç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">// Êõ¥Êñ∞Marge SimpsonÁöÑ‰ø°ÊÅØ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">marge</span><span class="p">.</span><span class="n">address</span><span class="p">(</span> <span class="s">&#34;712 Red Bark Lane, Henderson, Clark County, Nevada 89011&#34;</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// Êõ¥Êñ∞Montgomery BurnsÁöÑ‰ø°ÊÅØ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">monty</span><span class="p">.</span><span class="n">address</span><span class="p">(</span> <span class="s">&#34;Springfield Nuclear Power Plant&#34;</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// Ê≥®ÈîÄËßÇÂØüËÄÖ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">homer</span><span class="p">.</span><span class="n">detach</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">nameObserver</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®‰∫ÜËß£‰∫ÜËøô‰πàÂ§öÂÆûÁé∞ÁªÜËäÇ‰πãÂêéÔºåËÆ©Êàë‰ª¨ÈÄÄ‰∏ÄÊ≠•ÁúãÁúãÊõ¥Â§ßÁöÑÂõæÊôØ„ÄÇÂõæ6-3ÊòæÁ§∫‰∫ÜËøô‰∏™ËßÇÂØüËÄÖÁ§∫‰æãÁöÑ‰æùËµñÂÖ≥Á≥ªÂõæ„ÄÇ</p>
<p>Áî±‰∫éÂÜ≥ÂÆö‰ª•Á±ªÊ®°ÊùøÁöÑÂΩ¢ÂºèÂÆûÁé∞ËßÇÂØüËÄÖÁ±ªÔºåËßÇÂØüËÄÖÁ±ª‰Ωç‰∫éÊàë‰ª¨Êû∂ÊûÑÁöÑÊúÄÈ´òÂ±ÇÊ¨°„ÄÇËøô‰Ωø‰Ω†ËÉΩÂ§ü‰∏∫Â§öÁßçÁî®ÈÄîÈáçÁî®ËßÇÂØüËÄÖÁ±ªÔºå‰æãÂ¶Ç<code>Person</code>Á±ª„ÄÇ<code>Person</code>Á±ªÂ£∞Êòé‰∫ÜËá™Â∑±ÁöÑ<code>Observer&lt;Person,Person::StateChange&gt;</code>Á±ªÂûãÔºåÂπ∂ÈÄöËøáËøôÁßçÊñπÂºèÂ∞ÜËá™Â∑±ÁöÑ‰ª£Á†ÅÊ≥®ÂÖ•ÂÖ∂Ëá™Ë∫´ÁöÑÊû∂ÊûÑÂ±ÇÊ¨°„ÄÇÂÖ∑‰ΩìÁöÑ‰∫∫ËßÇÂØüËÄÖÔºåÂ¶Ç<code>NameObserver</code>Âíå<code>AddressObserver</code>ÔºåÂèØ‰ª•Âú®Ê≠§Â£∞ÊòéÁöÑÂü∫Á°Ä‰∏äÊûÑÂª∫„ÄÇ</p>
<p><strong>Âü∫‰∫éÂÄºËØ≠‰πâÁöÑËßÇÂØüËÄÖÂÆûÁé∞</strong></p>
<p>‚ÄúÊàëÁêÜËß£‰Ω†‰∏∫‰ªÄ‰πà‰ªéÁªèÂÖ∏ÂÆûÁé∞ÂºÄÂßãÔºå‰ΩÜÊó¢ÁÑ∂‰Ω†Â∑≤ÁªèÂº∫Ë∞É‰∫ÜÂÅèÂ•ΩÂÄºËØ≠‰πâÁöÑÈáçË¶ÅÊÄßÔºåÈÇ£‰πàÂú®‰∏Ä‰∏™Âü∫‰∫éÂÄºËØ≠‰πâÁöÑ‰∏ñÁïå‰∏≠ÔºåËßÇÂØüËÄÖ‰ºöÊòØ‰ªÄ‰πàÊ†∑Â≠êÂë¢Ôºü‚Äù ËøôÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫ËøôÊòØÈùûÂ∏∏ÂêàÁêÜÁöÑ‰∏ã‰∏ÄÊ≠•„ÄÇÊ≠£Â¶ÇÂú®‚ÄúÊåáÂçó22Ôºö‰ºòÂÖàÈÄâÊã©ÂÄºËØ≠‰πâËÄå‰∏çÊòØÂºïÁî®ËØ≠‰πâ‚Äù‰∏≠Ëß£ÈáäÁöÑÈÇ£Ê†∑ÔºåÊúâÂæàÂ§öÂ•ΩÁöÑÁêÜÁî±ÈÅøÂÖçÂºïÁî®ËØ≠‰πâÁöÑÈ¢ÜÂüü„ÄÇÁÑ∂ËÄåÔºåÊàë‰ª¨‰∏ç‰ºöÂÆåÂÖ®ÂÅèÁ¶ªÁªèÂÖ∏ÁöÑÂÆûÁé∞Ôºö‰∏∫‰∫ÜÊ≥®ÂÜåÂíåÊ≥®ÈîÄËßÇÂØüËÄÖÔºåÊàë‰ª¨ÊÄªÊòØÈúÄË¶ÅÊüêÁßçÂîØ‰∏ÄÁöÑÊ†áËØÜÁ¨¶Êù•Ê†áËØÜËßÇÂØüËÄÖÔºåËÄåËßÇÂØüËÄÖÁöÑÂîØ‰∏ÄÂú∞ÂùÄÂè™ÊòØËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÊúÄÁÆÄÂçï„ÄÅÊúÄÊñπ‰æøÁöÑÊñπÊ≥ï„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Â∞ÜÁªßÁª≠‰ΩøÁî®ÊåáÈíàÊù•ÂºïÁî®Â∑≤Ê≥®ÂÜåÁöÑËßÇÂØüËÄÖ„ÄÇ‰ΩÜÊòØÔºå<code>std::function</code>ÊòØ‰∏ÄÁßç‰ºòÈõÖÁöÑÊñπÂºèÊù•ÈÅøÂÖçÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Observer.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Subject</span><span class="p">,</span> <span class="k">typename</span> <span class="n">StateTag</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Observer</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">OnUpdate</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="n">Subject</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">,</span><span class="n">StateTag</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">   <span class="k">explicit</span> <span class="nf">Observer</span><span class="p">(</span> <span class="n">OnUpdate</span> <span class="n">onUpdate</span> <span class="p">)</span>   
</span></span><span class="line"><span class="cl">      <span class="o">:</span> <span class="n">onUpdate_</span><span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">onUpdate</span><span class="p">)</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="c1">// ÂèØËÉΩÂìçÂ∫îÊó†Êïà/Á©∫ÁöÑ std::function ÂÆû‰æã 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ÈùûËôöÂáΩÊï∞ update 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span> <span class="n">Subject</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">subject</span><span class="p">,</span> <span class="n">StateTag</span> <span class="n">property</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">onUpdate_</span><span class="p">(</span> <span class="n">subject</span><span class="p">,</span> <span class="n">property</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> <span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">OnUpdate</span> <span class="n">onUpdate_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª£ÊõøÂ∞ÜËßÇÂØüËÄÖÁ±ªÂÆûÁé∞‰∏∫Âü∫Á±ªÔºåÂπ∂Ë¶ÅÊ±ÇÊ¥æÁîüÁ±ª‰ª•ÁâπÂÆöÊñπÂºèÁªßÊâøÂπ∂ÂÆûÁé∞<code>update()</code>ÂáΩÊï∞ÔºåÊàë‰ª¨ÈÄöËøáÁªÑÂêàÔºàÂèÇËßÅ‚ÄúÊåáÂçó20Ôºö‰ºòÂÖàÈÄâÊã©ÁªÑÂêàËÄå‰∏çÊòØÁªßÊâø‚ÄùÔºâÊù•ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ„ÄÇËßÇÂØüËÄÖÁ±ªÈ¶ñÂÖàÊèê‰æõ‰∫Ü‰∏Ä‰∏™Âêç‰∏∫<code>OnUpdate</code>ÁöÑÁ±ªÂûãÂà´ÂêçÔºåÁî®‰∫éÈ¢ÑÊúüÁ≠æÂêçÁöÑ<code>std::function</code>Á±ªÂûã„ÄÇÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞ÔºåÊÇ®‰º†ÈÄí‰∫Ü‰∏Ä‰∏™<code>std::function</code>ÂÆû‰æãÔºåÂπ∂Â∞ÜÂÖ∂ÁßªÂä®Âà∞Êï∞ÊçÆÊàêÂëò<code>onUpdate_</code>‰∏≠„ÄÇ<code>update()</code>ÂáΩÊï∞Áé∞Âú®ÁöÑÂ∑•‰ΩúÊòØÂ∞ÜË∞ÉÁî®ÂèäÂÖ∂ÂèÇÊï∞ËΩ¨ÂèëÁªô<code>onUpdate_</code>„ÄÇ</p>
<p><code>std::function</code>ÁöÑÁÅµÊ¥ªÊÄßÂèØ‰ª•ÈÄöËøáÊõ¥Êñ∞ÂêéÁöÑ<code>main()</code>ÂáΩÊï∞ËΩªÊùæÂ±ïÁ§∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Observer.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Person.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">propertyChanged</span><span class="p">(</span> <span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">person</span><span class="p">,</span> <span class="n">Person</span><span class="o">::</span><span class="n">StateChange</span> <span class="n">property</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">if</span><span class="p">(</span> <span class="n">property</span> <span class="o">==</span> <span class="n">Person</span><span class="o">::</span><span class="n">forenameChanged</span> <span class="o">||</span> 
</span></span><span class="line"><span class="cl">       <span class="n">property</span> <span class="o">==</span> <span class="n">Person</span><span class="o">::</span><span class="n">surnameChanged</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="c1">// ... ÂìçÂ∫îÂêçÂ≠óÂèòÂåñ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">PersonObserver</span> <span class="o">=</span> <span class="n">Observer</span><span class="o">&lt;</span><span class="n">Person</span><span class="p">,</span><span class="n">Person</span><span class="o">::</span><span class="n">StateChange</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">   <span class="n">PersonObserver</span> <span class="n">nameObserver</span><span class="p">(</span> <span class="n">propertyChanged</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">   <span class="n">PersonObserver</span> <span class="n">addressObserver</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="cm">/*ÊçïËé∑ÁöÑÁä∂ÊÄÅ*/</span><span class="p">](</span> <span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">person</span><span class="p">,</span> <span class="n">Person</span><span class="o">::</span><span class="n">StateChange</span> <span class="n">property</span> <span class="p">){</span> 
</span></span><span class="line"><span class="cl">         <span class="k">if</span><span class="p">(</span> <span class="n">property</span> <span class="o">==</span> <span class="n">Person</span><span class="o">::</span><span class="n">addressChanged</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">         <span class="p">{</span> 
</span></span><span class="line"><span class="cl">            <span class="c1">// ... ÂìçÂ∫îÂú∞ÂùÄÂèòÂåñ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>         <span class="p">}</span> 
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">   <span class="n">Person</span> <span class="n">homer</span><span class="p">(</span> <span class="s">&#34;Homer&#34;</span>     <span class="p">,</span> <span class="s">&#34;Simpson&#34;</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Person</span> <span class="n">marge</span><span class="p">(</span> <span class="s">&#34;Marge&#34;</span>     <span class="p">,</span> <span class="s">&#34;Simpson&#34;</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Person</span> <span class="n">monty</span><span class="p">(</span> <span class="s">&#34;Montgomery&#34;</span><span class="p">,</span> <span class="s">&#34;Burns&#34;</span>   <span class="p">);</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">   <span class="c1">// Ê≥®ÂÜåËßÇÂØüËÄÖ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">homer</span><span class="p">.</span><span class="n">attach</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">nameObserver</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">marge</span><span class="p">.</span><span class="n">attach</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">addressObserver</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">   <span class="n">monty</span><span class="p">.</span><span class="n">attach</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">addressObserver</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> 
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫éÈÄâÊã©‰∫Ü‰æµÂÖ•ÊÄßËæÉ‰ΩéÁöÑÊñπÊ≥ïÔºåÂπ∂‰∏î‰∏é<code>std::function</code>Ëß£ËÄ¶ÔºåÂ¶Ç‰ΩïÂÆûÁé∞<code>update()</code>ÂáΩÊï∞ÁöÑÈÄâÊã©ÂÆåÂÖ®ÂèñÂÜ≥‰∫éËßÇÂØüËÄÖÁöÑÂÆûÁé∞ËÄÖÔºàÊó†Áä∂ÊÄÅ„ÄÅÊúâÁä∂ÊÄÅÁ≠âÔºâ„ÄÇÂØπ‰∫é<code>nameObserver</code>ÔºåÊàë‰ª¨‰æùËµñ‰∫éËá™Áî±ÂáΩÊï∞<code>propertyChanged()</code>ÔºåÂÆÉÊú¨Ë∫´ÊòØÈ´òÂ∫¶Ëß£ËÄ¶ÁöÑÔºåÂõ†‰∏∫ÂÆÉ‰∏çÁªëÂÆöÂà∞‰ªª‰ΩïÁ±ªÂπ∂‰∏îÂèØËÉΩÂú®Â§ö‰∏™Âú∫ÂêàÈáçÁî®„ÄÇÂè¶‰∏ÄÊñπÈù¢Ôºå<code>addressObserver</code>ÈÄâÊã©‰ΩøÁî®lambdaË°®ËææÂºèÔºåËØ•Ë°®ËææÂºèÂèØ‰ª•ÊçïËé∑‰∏Ä‰∫õÁä∂ÊÄÅ„ÄÇÊó†ËÆ∫Â¶Ç‰ΩïÔºåËøô‰∏§‰∏™ËßÇÂØüËÄÖÂè™ÈúÄË¶ÅÈÅµÂæ™ÊâÄÈúÄÁöÑ<code>std::function</code>Á±ªÂûãÁöÑÂøÖË¶ÅÁ≠æÂêçËøô‰∏ÄÁ∫¶ÂÆö„ÄÇ</p>
<p>‚Äú‰∏∫‰ªÄ‰πàÊàë‰ª¨‰ªçÁÑ∂ÈúÄË¶ÅËßÇÂØüËÄÖÁ±ªÔºüÈöæÈÅìÊàë‰ª¨‰∏çËÉΩÁõ¥Êé•‰ΩøÁî®<code>std::function</code>ÂêóÔºü‚Äù ‰ªéÂäüËÉΩËßíÂ∫¶Êù•ÁúãÔºåËßÇÂØüËÄÖÁ±ªÊú¨Ë∫´Âπ∂Ê≤°ÊúâÊ∑ªÂä†‰ªª‰Ωï‰∏úË•ø„ÄÇÁÑ∂ËÄåÔºå‰Ωú‰∏∫ÂÄºËØ≠‰πâÁöÑÁúüÊ≠£‰∫ßÁâ©ÔºåÊàë‰ª¨ÂÄæÂêë‰∫éÂ§çÂà∂ÊàñÁßªÂä®<code>std::function</code>ÂØπË±°„ÄÇ‰ΩÜÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãËøô‰∏çÊòØÊâÄÂ∏åÊúõÁöÑÔºöÁâπÂà´ÊòØÂ¶ÇÊûúÊÇ®‰ΩøÁî®ÁöÑÊòØÊúâÁä∂ÊÄÅËßÇÂØüËÄÖÔºåÊÇ®‰∏çÂ∏åÊúõÊÇ®ÁöÑËßÇÂØüËÄÖÁöÑÂâØÊú¨Ë¢´Ë∞ÉÁî®„ÄÇÂ∞ΩÁÆ°ÊäÄÊúØ‰∏äÂèØË°åÔºå‰ΩÜ‰º†ÈÄíÊåáÂêë<code>std::function</code>ÁöÑÊåáÈíàÂπ∂‰∏çÂ∏∏ËßÅ„ÄÇÂõ†Ê≠§ÔºåËßÇÂØüËÄÖÁ±ª‰ªçÂèØ‰ª•‰Ωú‰∏∫<code>std::function</code>ÁöÑÈÄÇÈÖçÂô®ÔºàÂèÇËßÅ‚ÄúÊåáÂçó24Ôºö‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£‚ÄùÔºâÂèëÊå•‰ΩúÁî®„ÄÇ</p>
<p><strong>ÂàÜÊûêËßÇÂØüËÄÖËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥</strong></p>
<p>‚ÄúËøôÂπ∂‰∏çÊòØÊàëÊúüÊúõÁöÑÂÄºËØ≠‰πâËß£ÂÜ≥ÊñπÊ°àÔºå‰ΩÜÊàë‰ªçÁÑ∂ÂñúÊ¨¢ÂÆÉÔºÅ‚Äù ÊàëÂæàÈ´òÂÖ¥ÊÇ®Ëøô‰πàÊÉ≥„ÄÇÁ°ÆÂÆûÔºåÂÄºËØ≠‰πâÁöÑ‰ºòÂäøÁªìÂêàËßÇÂØüËÄÖËÆæËÆ°Ê®°ÂºèÁöÑ‰ºòÁÇπÔºàÂç≥‰∫ã‰ª∂‰∏éÂÖ∂Áõ∏Â∫îÂä®‰ΩúÁöÑËß£ËÄ¶‰ª•ÂèäËΩªÊùæÊ∑ªÂä†Êñ∞ÁßçÁ±ªËßÇÂØüËÄÖÁöÑËÉΩÂäõÔºâÂ∑•‰ΩúÂæóÈùûÂ∏∏Â•Ω„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÊ≤°ÊúâÂÆåÁæéÁöÑËÆæËÆ°ÔºåÊØè‰∏™ËÆæËÆ°‰πüÊúâÂÖ∂Áº∫ÁÇπ„ÄÇ</p>
<p>È¶ñÂÖàÔºåÂ∫îËØ•ÊòéÁ°ÆÊåáÂá∫ÔºåÊºîÁ§∫ÁöÑ<code>std::function</code>ÊñπÊ≥ï‰ªÖÈÄÇÁî®‰∫éÂÖ∑ÊúâÂçï‰∏™<code>update()</code>ÂáΩÊï∞ÁöÑÊãâÂèñËßÇÂØüËÄÖ„ÄÇÁî±‰∫é<code>std::function</code>Âè™ËÉΩÂ§ÑÁêÜÂçï‰∏ÄÂèØË∞ÉÁî®ÂØπË±°Ôºå‰ªª‰ΩïÈúÄË¶ÅÂ§ö‰∏™<code>update()</code>ÂáΩÊï∞ÁöÑÊñπÊ≥ïÈÉΩÊó†Ê≥ïÁî±Âçï‰∏™<code>std::function</code>Â§ÑÁêÜ„ÄÇÂõ†Ê≠§ÔºåÂØπ‰∫éÂÖ∑ÊúâÂ§ö‰∏™<code>update()</code>ÂáΩÊï∞ÁöÑÊé®ÈÄÅËßÇÂØüËÄÖÊàñÊΩúÂú®Â¢ûÈïøÁöÑ<code>update()</code>ÂáΩÊï∞Êï∞ÈáèÔºå<code>std::function</code>ÈÄöÂ∏∏‰∏çÊòØÊúÄ‰Ω≥ÈÄâÊã©ÔºàËÆ∞‰ΩèÔºå‰ª£Á†ÅÂæÄÂæÄ‰ºöÂèëÁîüÂèòÂåñÔºÅÔºâ„ÄÇ‰∏çËøáÔºåÂèØ‰ª•Ê≥õÂåñ<code>std::function</code>ÁöÑÊñπÊ≥ï„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÔºåÁ±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°ÂºèÔºàÂèÇËßÅÁ¨¨8Á´†ÔºâÊòØÈ¶ñÈÄâ„ÄÇ</p>
<p>Á¨¨‰∫å‰∏™ÔºàËæÉÂ∞èÁöÑÔºâÁº∫ÁÇπÊòØÔºåÂ¶ÇÊÇ®ÊâÄËßÅÔºåÊ≤°ÊúâÁ∫ØÁ≤πÂü∫‰∫éÂÄºÁöÑÂÆûÁé∞„ÄÇËôΩÁÑ∂Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®<code>std::function</code>ÂÆûÁé∞<code>update()</code>ÂäüËÉΩ‰ª•Ëé∑ÂæóÁÅµÊ¥ªÊÄßÔºå‰ΩÜÊàë‰ª¨‰ªçÁÑ∂‰ΩøÁî®ÂéüÂßãÊåáÈíàÊù•ÈôÑÂä†ÂíåÂàÜÁ¶ªËßÇÂØüËÄÖ„ÄÇËøô‰∏ÄÁÇπÂæàÂÆπÊòìËß£ÈáäÔºö‰ΩøÁî®ÊåáÈíà‰Ωú‰∏∫ÂîØ‰∏ÄÊ†áËØÜÁ¨¶ÁöÑ‰ºòÁÇπÂÆûÂú®Â§™Â§öÔºåÊó†Ê≥ïÂøΩËßÜ„ÄÇÊ≠§Â§ñÔºåÂØπ‰∫éÊúâÁä∂ÊÄÅËßÇÂØüËÄÖÔºåÊàë‰ª¨‰∏çÊÉ≥Â§ÑÁêÜÂÆû‰ΩìÁöÑÂâØÊú¨„ÄÇÂΩìÁÑ∂ÔºåËøô‰ªçÁÑ∂ÈúÄË¶ÅÊàë‰ª¨Ê£ÄÊü•<code>nullptr</code>ÔºàËøôÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂä™ÂäõÔºâÔºåÂπ∂‰∏îÊàë‰ª¨ÂøÖÈ°ªÂßãÁªàÊîØ‰ªòÊåáÈíà‰ª£Ë°®ÁöÑÈó¥Êé•Ë¥πÁî®„ÄÇÊàë‰∏™‰∫∫ËÆ§‰∏∫ËøôÊòØ‰∏Ä‰∏™Â∞èÈóÆÈ¢òÔºåÂõ†‰∏∫ËøôÁßçÊñπÊ≥ïÊúâËÆ∏Â§ö‰ºòÁÇπ„ÄÇ</p>
<p>Êõ¥Â§ßÁöÑÁº∫ÁÇπÊòØËßÇÂØüËÄÖÁöÑÊΩúÂú®ÂÆûÁé∞ÈóÆÈ¢òÔºöÊ≥®ÂÜåÂíåÊ≥®ÈîÄÁöÑÈ°∫Â∫èÂèØËÉΩ‰ºöÊúâÂæàÂ§ßÂΩ±ÂìçÔºåÁâπÂà´ÊòØÂú®ÂÖÅËÆ∏ËßÇÂØüËÄÖÂ§öÊ¨°Ê≥®ÂÜåÁöÑÊÉÖÂÜµ‰∏ã„ÄÇÊ≠§Â§ñÔºåÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏≠ÔºåÁ∫øÁ®ãÂÆâÂÖ®Âú∞Ê≥®ÂÜåÂíåÊ≥®ÈîÄËßÇÂØüËÄÖ‰ª•Âèä‰∫ã‰ª∂Â§ÑÁêÜÊòØÈùûÂ∏∏Â§çÊùÇÁöÑ‰∏ªÈ¢ò„ÄÇ‰æãÂ¶ÇÔºå‰∏çÂèØ‰ø°ÁöÑËßÇÂØüËÄÖÂú®ÂõûË∞ÉÊúüÈó¥Â¶ÇÊûúË°å‰∏∫‰∏çÂΩìÂèØËÉΩ‰ºöÂÜªÁªìÊúçÂä°Âô®ÔºåÂπ∂‰∏î‰∏∫‰ªªÊÑèËÆ°ÁÆóÂÆûÁé∞Ë∂ÖÊó∂ÈùûÂ∏∏Â§çÊùÇ„ÄÇÁÑ∂ËÄåÔºåËøô‰∏™ËØùÈ¢òËøúËøúË∂ÖÂá∫‰∫ÜÊú¨‰π¶ÁöÑËåÉÂõ¥„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ±û‰∫éÊú¨‰π¶ËåÉÂõ¥ÁöÑÊòØËßÇÂØüËÄÖËøáÂ∫¶‰ΩøÁî®ÁöÑÊâÄË∞ìÂç±Èô©ÔºöÂÆÉÂèØ‰ª•Âø´ÈÄü‰∏îÂÆπÊòìÂú∞ÂØºËá¥Â§çÊùÇÁöÑ‰∫íËøûÁΩëÁªú„ÄÇ‰∫ãÂÆû‰∏äÔºåÂ¶ÇÊûú‰∏çÂ∞èÂøÉÔºåÂèØËÉΩ‰ºöÊÑèÂ§ñÂºïÂÖ•Êó†ÈôêÂæ™ÁéØÁöÑÂõûË∞ÉÔºÅÂõ†Ê≠§ÔºåÂºÄÂèë‰∫∫ÂëòÊúâÊó∂‰ºöÂØπ‰ΩøÁî®ËßÇÂØüËÄÖÊÑüÂà∞ÊãÖÂøßÔºåÂπ∂ÊãÖÂøÉÂçï‰∏™ÈÄöÁü•ÂèØËÉΩ‰ºöÁî±‰∫éËøô‰∫õ‰∫íËøûËÄåÂØºËá¥Â∑®Â§ßÁöÑÂÖ®Â±ÄÂìçÂ∫î„ÄÇËôΩÁÑ∂ËøôÁßçÂç±Èô©Á°ÆÂÆûÂ≠òÂú®Ôºå‰ΩÜÂ¶ÇÊûúËÆæËÆ°ÂêàÁêÜÂπ∂‰∏îËßÇÂØüËÄÖÂÆûÁé∞Ê≠£Á°ÆÔºåÂàô‰ªª‰ΩïÈÄöÁü•Â∫èÂàóÈÉΩÂ∫îËØ•Ê≤øÁùÄÊúâÂêëÊó†ÁéØÂõæÔºàDAGÔºâÊúùÁùÄÊû∂ÊûÑÁöÑ‰ΩéÂ±ÇËøêË°å„ÄÇËÄåËøôÊ≠£ÊòØËâØÂ•ΩËΩØ‰ª∂ËÆæËÆ°ÁöÑÁæéÂ¶ô‰πãÂ§Ñ„ÄÇ</p>
<p>ÊÄªÁªìÊù•ËØ¥ÔºåÊó®Âú®Êèê‰æõÁä∂ÊÄÅÂèòÂåñÈÄöÁü•ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåËßÇÂØüËÄÖËÆæËÆ°Ê®°ÂºèË¢´ËØÅÊòéÊòØÊúÄËëóÂêçÂíåÊúÄÂ∏∏Áî®ÁöÑÊ®°Âºè‰πã‰∏Ä„ÄÇÈô§‰∫ÜÊΩúÂú®Ê£òÊâãÁöÑÂÆûÁé∞ÁªÜËäÇÂ§ñÔºåÂÆÉÊó†ÁñëÊòØÊØè‰∏™ÂºÄÂèë‰∫∫ÂëòÂ∑•ÂÖ∑ÁÆ±‰∏≠Â∫îÂåÖÂê´ÁöÑËÆæËÆ°Ê®°Âºè‰πã‰∏Ä„ÄÇÂ∫îÁî®ËßÇÂØüËÄÖËÆæËÆ°Ê®°Âºè‰ª•ÂàõÂª∫‰∏ªÈ¢ò‰∏éÂÖ∂ËßÇÂØüËÄÖ‰πãÈó¥ÁöÑ‰∏ÄÂØπÂ§öÂÖ≥Á≥ªÔºåÂπ∂‰∫ÜËß£Êé®ÈÄÅËßÇÂØüËÄÖ‰∏éÊãâÂèñËßÇÂØüËÄÖ‰πãÈó¥ÁöÑÊùÉË°°„ÄÇÂà©Áî®Âü∫‰∫éÂÄºËØ≠‰πâÁöÑËßÇÂØüËÄÖÂÆûÁé∞ÁöÑ‰ºòÂäø„ÄÇ</p>
<h3 id="ÂáÜÂàô26‰ΩøÁî®crtpÂºïÂÖ•ÈùôÊÄÅÁ±ªÂûãÁ±ªÂà´"><strong>ÂáÜÂàô26Ôºö‰ΩøÁî®CRTPÂºïÂÖ•ÈùôÊÄÅÁ±ªÂûãÁ±ªÂà´</strong>
</h3><p>C++ ÁúüÁöÑÊúâÂæàÂ§öÂÄºÂæóÊé¢Á¥¢ÁöÑÂú∞Êñπ„ÄÇÂÆÉÂ∏¶ÊúâËÆ∏Â§öÁâπÊÄß„ÄÅËÆ∏Â§öËØ≠Ê≥ï‰∏äÁöÑÂ•áÁâπ‰πãÂ§Ñ‰ª•ÂèäÂ§ßÈáèÁöÑ‰ª§‰∫∫ÊÉäÂèπ‰ΩÜÈöæ‰ª•ÂèëÈü≥ÔºàÂØπ‰∫éÊñ∞ÊâãÊù•ËØ¥Âá†‰πéÊòØÁ•ûÁßòÁöÑÔºâÁöÑÁº©ÂÜôËØçÔºöRAII„ÄÅADL„ÄÅCTAD„ÄÅSFINAE„ÄÅNTTP„ÄÅIFNDR Âíå SIOF„ÄÇÂì¶ÔºåÂ§ö‰πàÊúâË∂£ÔºÅÂÖ∂‰∏≠‰∏Ä‰∏™Á•ûÁßòÁöÑÁº©ÂÜôÊòØ CRTPÔºåÂç≥ Curiously Recurring Template PatternÔºàÂ•áÂ¶ôÈÄíÂΩíÊ®°ÊùøÊ®°ÂºèÔºâÁöÑÁº©ÂÜô„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†Âõ†‰∏∫Ëøô‰∏™ÂêçÂ≠óÊØ´Êó†ÊÑè‰πâËÄåÊÑüÂà∞Âõ∞ÊÉëÔºå‰∏çË¶ÅÊãÖÂøÉÔºöÂú® C++ ‰∏≠ÔºåÂêçÂ≠óÈÄöÂ∏∏ÊòØÈöèÊÑèÈÄâÊã©ÁöÑÔºå‰ΩÜ‰∏ÄÊó¶ÈÄâÂÆöÂ∞±‰∏ç‰ºöÂÜçÊõ¥Êîπ„ÄÇËøô‰∏™Ê®°ÂºèÊòØÁî± James Coplien Âú® 1995 Âπ¥ 2 ÊúàÁöÑ„ÄäC++ Report„Äã‰∏≠ÂëΩÂêçÁöÑÔºåÂõ†‰∏∫‰ªñÊÑèËØÜÂà∞ËøôÁßçÊ®°ÂºèÂú®ËÆ∏Â§ö‰∏çÂêåÁöÑ C++ ‰ª£Á†ÅÂ∫ì‰∏≠ÂèçÂ§çÂá∫Áé∞„ÄÇÂπ∂‰∏îÂ•áÊÄ™ÁöÑÊòØÔºåÂ∞ΩÁÆ°ËøôÁßçÊ®°ÂºèÂü∫‰∫éÁªßÊâøÔºàÂèØËÉΩ‰Ωú‰∏∫ÊäΩË±°ÔºâÔºå‰ΩÜÂÆÉÂπ∂Ê≤°ÊúâË°®Áé∞Âá∫ËÆ∏Â§öÂÖ∂‰ªñÁªèÂÖ∏ËÆæËÆ°Ê®°ÂºèÈÄöÂ∏∏ÂÖ∑ÊúâÁöÑÊÄßËÉΩÁº∫ÁÇπ„ÄÇÂõ†Ê≠§ÔºåCRTP ÁªùÂØπÂÄºÂæó‰∏ÄÁúãÔºåÂõ†‰∏∫ÂÆÉÂèØËÉΩ‰ºöÊàê‰∏∫‰Ω†ËÆæËÆ°Ê®°ÂºèÂ∑•ÂÖ∑ÁÆ±‰∏≠‰∏Ä‰∏™Êúâ‰ª∑ÂÄºÁîöËá≥ÂèØ‰ª•ËØ¥ÊòØ‚ÄúÂ•áÂ¶ô‚ÄùÁöÑË°•ÂÖÖ„ÄÇ</p>
<p><strong>CRTP ÁöÑÂä®Êú∫</strong></p>
<p>Âú® C++ ‰∏≠ÔºåÊÄßËÉΩÈùûÂ∏∏ÈáçË¶Å„ÄÇ‰∫ãÂÆû‰∏äÔºåÂú®Êüê‰∫õ‰∏ä‰∏ãÊñá‰∏≠Ôºå‰ΩøÁî®ËôöÂáΩÊï∞ÁöÑÊÄßËÉΩÂºÄÈîÄË¢´ËÆ§‰∏∫ÊòØÂÆåÂÖ®‰∏çÂèØÊé•ÂèóÁöÑ„ÄÇÂõ†Ê≠§ÔºåÂú®ÊÄßËÉΩÊïèÊÑüÁöÑ‰∏ä‰∏ãÊñá‰∏≠Ôºå‰æãÂ¶ÇÊüê‰∫õËÆ°ÁÆóÊú∫Ê∏∏ÊàèÊàñÈ´òÈ¢ë‰∫§ÊòìÁöÑÈÉ®ÂàÜÔºå‰∏ç‰ºö‰ΩøÁî®ËôöÂáΩÊï∞„ÄÇÂêåÊ†∑ÁöÑÊÉÖÂÜµ‰πüÈÄÇÁî®‰∫éÈ´òÊÄßËÉΩËÆ°ÁÆóÔºàHPCÔºâ„ÄÇÂú® HPC ‰∏≠Ôºå‰ªª‰ΩïÊù°‰ª∂ÊàñÈó¥Êé•Êìç‰ΩúÔºåÂåÖÊã¨ËôöÂáΩÊï∞ÔºåÈÉΩË¢´Á¶ÅÊ≠¢Âá∫Áé∞Âú®ÊúÄÂΩ±ÂìçÊÄßËÉΩÁöÑÈÉ®ÂàÜÔºå‰æãÂ¶ÇËÆ°ÁÆóÂÜÖÊ†∏ÁöÑÊúÄÂÜÖÂ±ÇÂæ™ÁéØ„ÄÇ‰ΩøÁî®ÂÆÉ‰ª¨‰ºöÂ∏¶Êù•Â§™Â§öÁöÑÊÄßËÉΩÂºÄÈîÄ„ÄÇ</p>
<p>‰∏∫‰∫ÜËØ¥ÊòéËøô‰∏ÄÁÇπÂèäÂÖ∂ÈáçË¶ÅÊÄßÔºåËÆ©Êàë‰ª¨ËÄÉËôë‰ª•‰∏ãÊù•Ëá™Á∫øÊÄß‰ª£Êï∞ÔºàLAÔºâÂ∫ìÁöÑ <code>DynamicVector</code> Á±ªÊ®°ÊùøÁ§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DynamicVector.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;numeric&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iosfwd&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iterator&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DynamicVector</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">value_type</span>     <span class="o">=</span> <span class="n">T</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">iterator</span>       <span class="o">=</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">iterator</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">const_iterator</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... ÊûÑÈÄ†ÂáΩÊï∞ÂíåÁâπÊÆäÊàêÂëòÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">size_t</span> <span class="nf">size</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="n">T</span><span class="o">&amp;</span>       <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl">   <span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">iterator</span>       <span class="nf">begin</span><span class="p">();</span>   
</span></span><span class="line"><span class="cl">   <span class="n">const_iterator</span> <span class="nf">begin</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">iterator</span>       <span class="nf">end</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">   <span class="n">const_iterator</span> <span class="nf">end</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... ËÆ∏Â§öÊï∞ÂÄºÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">values_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="n">DynamicVector</span> <span class="k">const</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">vector</span> <span class="p">)</span>  
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;(&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">for</span><span class="p">(</span> <span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">element</span> <span class="p">:</span> <span class="n">vector</span> <span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">element</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; )&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">os</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">l2norm</span><span class="p">(</span> <span class="n">DynamicVector</span> <span class="k">const</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">vector</span> <span class="p">)</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">begin</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">end</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">inner_product</span><span class="p">(</span> <span class="n">begin</span><span class="p">(</span><span class="n">vector</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">                                       <span class="p">,</span> <span class="n">begin</span><span class="p">(</span><span class="n">vector</span><span class="p">),</span> <span class="n">T</span><span class="p">{}</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ... Êõ¥Â§öÂÜÖÂÆπ
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Â∞ΩÁÆ°ÂêçÁß∞Â¶ÇÊ≠§Ôºå<code>DynamicVector</code> Âπ∂‰∏ç‰ª£Ë°®ÂÆπÂô®ÔºåËÄåÊòØÁî®‰∫é LA ËÆ°ÁÆóÁöÑÊï∞ÂÄºÂêëÈáè„ÄÇÂêçÁß∞‰∏≠ÁöÑ‚ÄúÂä®ÊÄÅ‚ÄùÈÉ®ÂàÜÊÑèÂë≥ÁùÄÂÆÉ‰ª•Âä®ÊÄÅÊñπÂºèÂàÜÈÖçÂÖ∂ÂÖÉÁ¥†ÔºåÂú®Ê≠§Á§∫‰æã‰∏≠‰ΩøÁî® <code>std::vector</code>„ÄÇÂõ†Ê≠§ÔºåÂÆÉÈÄÇÁî®‰∫éÂ§ßÂûã LA ÈóÆÈ¢òÔºàËÇØÂÆöÊòØÂú®Êï∞Áôæ‰∏á‰∏™ÂÖÉÁ¥†ÁöÑËåÉÂõ¥ÂÜÖÔºâ„ÄÇËôΩÁÑ∂Ê≠§Á±ªÂèØËÉΩÂåÖÂê´ËÆ∏Â§öÊï∞ÂÄºËøêÁÆóÔºå‰ΩÜ‰ªéÊé•Âè£ËßíÂ∫¶Êù•ÁúãÔºå‰Ω†ÂèØËÉΩ‰ºöÁß∞‰πã‰∏∫ÂÆπÂô®ÔºöÂÆÉÊèê‰æõ‰∫ÜÂ∏∏Áî®ÁöÑÂµåÂ•óÁ±ªÂûãÔºà<code>value_type</code>„ÄÅ<code>iterator</code> Âíå <code>const_iterator</code>Ôºâ„ÄÅÊü•ËØ¢ÂΩìÂâçÂÖÉÁ¥†Êï∞ÈáèÁöÑ <code>size()</code> ÂáΩÊï∞„ÄÅÈÄöËøáÁ¥¢ÂºïËÆøÈóÆÂçï‰∏™ÂÖÉÁ¥†ÁöÑ‰∏ãÊ†áËøêÁÆóÁ¨¶Ôºà‰∏Ä‰∏™Áî®‰∫éÈùûÂ∏∏ÈáèÂêëÈáèÔºå‰∏Ä‰∏™Áî®‰∫éÂ∏∏ÈáèÂêëÈáèÔºâ„ÄÅËø≠‰ª£ÂÖÉÁ¥†ÁöÑ <code>begin()</code> Âíå <code>end()</code> ÂáΩÊï∞„ÄÇÈô§‰∫ÜÊàêÂëòÂáΩÊï∞Â§ñÔºåÂÆÉËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™ËæìÂá∫ËøêÁÆóÁ¨¶ÂíåËá≥Â∞ë‰∏Ä‰∏™ LA Êìç‰ΩúÔºåÁî®‰∫éËÆ°ÁÆóÂêëÈáèÁöÑÊ¨ßÂá†ÈáåÂæóËåÉÊï∞ÔºàÈÄöÂ∏∏‰πüÁß∞‰∏∫ L2 ËåÉÊï∞ÔºåÂõ†‰∏∫ÂÆÉËøë‰ºº‰∫éÁ¶ªÊï£ÂêëÈáèÁöÑ L2 ËåÉÊï∞Ôºâ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºå<code>DynamicVector</code> ‰∏çÊòØÂîØ‰∏ÄÁöÑÂêëÈáèÁ±ª„ÄÇÂú®Êàë‰ª¨ÁöÑ LA Â∫ì‰∏≠Ôºå‰Ω†Ëøò‰ºöÂèëÁé∞‰ª•‰∏ã <code>StaticVector</code> Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;StaticVector.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;numeric&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iosfwd&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iterator&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">Size</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">StaticVector</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">value_type</span>     <span class="o">=</span> <span class="n">T</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">iterator</span>       <span class="o">=</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">Size</span><span class="o">&gt;::</span><span class="n">iterator</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">const_iterator</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">Size</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... ÊûÑÈÄ†ÂáΩÊï∞ÂíåÁâπÊÆäÊàêÂëòÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">size_t</span> <span class="nf">size</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="n">T</span><span class="o">&amp;</span>       <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl">   <span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">iterator</span>       <span class="nf">begin</span><span class="p">();</span>   
</span></span><span class="line"><span class="cl">   <span class="n">const_iterator</span> <span class="nf">begin</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">iterator</span>       <span class="nf">end</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">   <span class="n">const_iterator</span> <span class="nf">end</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... ËÆ∏Â§öÊï∞ÂÄºÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">Size</span><span class="o">&gt;</span> <span class="n">values_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">Size</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span>     
</span></span><span class="line"><span class="cl">                          <span class="n">StaticVector</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">Size</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">vector</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;(&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">for</span><span class="p">(</span> <span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">element</span> <span class="p">:</span> <span class="n">vector</span> <span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">element</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; )&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">os</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">Size</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">l2norm</span><span class="p">(</span> <span class="n">StaticVector</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">Size</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">vector</span> <span class="p">)</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">begin</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">end</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">inner_product</span><span class="p">(</span> <span class="n">begin</span><span class="p">(</span><span class="n">vector</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">                                       <span class="p">,</span> <span class="n">begin</span><span class="p">(</span><span class="n">vector</span><span class="p">),</span> <span class="n">T</span><span class="p">{}</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ... Êõ¥Â§öÂÜÖÂÆπ
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‚ÄúËøô‰∏çÊòØÂá†‰πé‰∏é <code>DynamicVector</code> Á±ªÁõ∏ÂêåÂêóÔºü‚Äù‰Ω†ÂèØËÉΩ‰ºöÈóÆ„ÄÇÊòØÁöÑÔºåËøô‰∏§‰∏™Á±ªÁ°ÆÂÆûÈùûÂ∏∏Áõ∏‰ºº„ÄÇ<code>StaticVector</code> Á±ªÊèê‰æõ‰∫Ü‰∏é <code>DynamicVector</code> Áõ∏ÂêåÁöÑÊé•Âè£ÔºåÂ¶ÇÂµåÂ•óÁ±ªÂûã <code>value_type</code>„ÄÅ<code>iterator</code> Âíå <code>const_iterator</code>„ÄÅÊü•ËØ¢ÂΩìÂâçÂÖÉÁ¥†Êï∞ÈáèÁöÑ <code>size()</code> ÊàêÂëòÂáΩÊï∞„ÄÅ‰∏ãÊ†áËøêÁÆóÁ¨¶„ÄÅËø≠‰ª£ÂÖÉÁ¥†ÁöÑ <code>begin()</code> Âíå <code>end()</code> ÂáΩÊï∞„ÄÇÂÆÉËøòÂåÖÊã¨‰∏Ä‰∏™ËæìÂá∫ËøêÁÆóÁ¨¶Âíå‰∏Ä‰∏™Ëá™Áî±ÁöÑ <code>l2norm()</code> ÂáΩÊï∞„ÄÇÁÑ∂ËÄåÔºå‰∏§ËÄÖ‰πãÈó¥Êúâ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÊÄßËÉΩÁõ∏ÂÖ≥ÁöÑÂå∫Âà´ÔºöÊ≠£Â¶ÇÂêçÁß∞‰∏≠ÁöÑ‚ÄúÈùôÊÄÅ‚ÄùÊâÄÊöóÁ§∫ÁöÑÈÇ£Ê†∑Ôºå<code>StaticVector</code> ‰∏çÂä®ÊÄÅÂàÜÈÖçÂÖ∂ÂÖÉÁ¥†„ÄÇÁõ∏ÂèçÔºåÂÆÉ‰ΩøÁî®Á±ªÂÜÖÁöÑÁºìÂÜ≤Âå∫Êù•Â≠òÂÇ®ÂÖ∂ÂÖÉÁ¥†Ôºå‰æãÂ¶Ç‰ΩøÁî® <code>std::array</code>„ÄÇÂõ†Ê≠§Ôºå‰∏é <code>DynamicVector</code> Áõ∏ÊØîÔºå<code>StaticVector</code> ÁöÑÊâÄÊúâÂäüËÉΩÈÉΩÈíàÂØπÂ∞ëÈáèÂõ∫ÂÆöÊï∞ÈáèÁöÑÂÖÉÁ¥†ËøõË°å‰∫Ü‰ºòÂåñÔºå‰æãÂ¶Ç 2D Êàñ 3D ÂêëÈáè„ÄÇ</p>
<p>‚ÄúÂ•ΩÁöÑÔºåÊàëÁêÜËß£ËøôÂØπÊÄßËÉΩÂæàÈáçË¶ÅÔºå‰ΩÜËøô‰ªçÁÑ∂ÂØºËá¥‰∫ÜÂ§ßÈáèÁöÑ‰ª£Á†ÅÈáçÂ§çÔºåÂØπÂêßÔºü‚Äù‰Ω†ÂÜçÊ¨°Ê≠£Á°Æ„ÄÇÂ¶ÇÊûú‰ªîÁªÜÊü•Áúã‰∏§‰∏™ÂêëÈáèÁ±ªÁöÑÂÖ≥ËÅîËæìÂá∫ËøêÁÆóÁ¨¶Ôºå‰Ω†‰ºöÂèëÁé∞Ëøô‰∏§‰∏™ÂáΩÊï∞ÁöÑÂÆûÁé∞ÊòØÁõ∏ÂêåÁöÑ„ÄÇËøôÊòØÈùûÂ∏∏‰∏çÁêÜÊÉ≥ÁöÑÔºöÂ¶ÇÊûúÂèëÁîü‰ªª‰ΩïÂèòÂåñÔºå‰æãÂ¶ÇÂêëÈáèÊ†ºÂºèÁöÑÂèòÂåñÔºàËÆ∞‰ΩèÔºöÂèòÂåñÊòØËΩØ‰ª∂ÂºÄÂèë‰∏≠ÁöÑÂîØ‰∏Ä‰∏çÂèòÔºåÂøÖÈ°ªÈ¢ÑÊúüÂπ∂Â§ÑÁêÜÔºõÂèÇËßÅ‚ÄúÊåáÂçó2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°‚ÄùÔºâÔºåÈÇ£‰πà‰Ω†Â∞Ü‰∏çÂæó‰∏çÂú®Â§ö‰∏™Âú∞ÊñπËøõË°å‰øÆÊîπÔºåËÄå‰∏ç‰ªÖ‰ªÖÊòØ‰∏Ä‰∏™Âú∞Êñπ„ÄÇËøôËøùÂèç‰∫Ü‚Äú‰∏çË¶ÅÈáçÂ§çËá™Â∑±‚ÄùÔºàDRYÔºâÂéüÂàôÔºöÂæàÂÆπÊòìÂøòËÆ∞ÊàñÈîôËøáÊõ¥Êñ∞Êüê‰∏ÄÂ§ÑÔºå‰ªéËÄåÂºïÂÖ•‰∏ç‰∏ÄËá¥ÁîöËá≥ÈîôËØØ„ÄÇ</p>
<p>‚Äú‰ΩÜËøô‰∏çÊòØÂèØ‰ª•ÈÄöËøáÁ®çÂæÆÊõ¥ÈÄöÁî®ÁöÑÂáΩÊï∞Ê®°ÊùøËΩªÊùæËß£ÂÜ≥ÁöÑÈóÆÈ¢òÂêóÔºü‰æãÂ¶ÇÔºåÊàëÂèØ‰ª•ÊÉ≥Ë±°‰ª•‰∏ãÈÄÇÁî®‰∫éÊâÄÊúâÂØÜÈõÜÂêëÈáèÁöÑËæìÂá∫ËøêÁÆóÁ¨¶Ôºö‚Äù</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">DenseVector</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="n">DenseVector</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">vector</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... Â¶ÇÂâçÊâÄËø∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËôΩÁÑ∂Ëøô‰ºº‰πéÊòØ‰∏Ä‰∏™ÈÄÇÂΩìÁöÑËß£ÂÜ≥ÊñπÊ°àÔºå‰ΩÜÊàë‰∏ç‰ºöÂú®ÊãâÂèñËØ∑Ê±Ç‰∏≠Êé•ÂèóÊ≠§‰ª£Á†Å„ÄÇËØ•ÂáΩÊï∞Ê®°ÊùøÁ°ÆÂÆûÊõ¥ÈÄöÁî®Ôºå‰ΩÜÊàëÁªùÂØπ‰∏ç‰ºöÁß∞ÂÖ∂‰∏∫‚ÄúÁ®çÂæÆ‚ÄùÊõ¥ÈÄöÁî®Ôºõ‰Ω†Âª∫ËÆÆÁöÑÊòØÂèØ‰ª•ÁºñÂÜôÁöÑÊúÄÈÄöÁî®ÁöÑËæìÂá∫ËøêÁÆóÁ¨¶„ÄÇÊòØÁöÑÔºåËØ•ÂáΩÊï∞Ê®°ÊùøÁöÑÂêçÁß∞ÂèØËÉΩÊöóÁ§∫ÂÆÉ‰ªÖÈÄÇÁî®‰∫éÂØÜÈõÜÂêëÈáèÔºàÂåÖÊã¨ <code>DynamicVector</code> Âíå <code>StaticVector</code>ÔºâÔºå‰ΩÜÂÆûÈôÖ‰∏äÔºåËØ•ÂáΩÊï∞Ê®°Êùø‰ºöÊé•Âèó‰ªª‰ΩïÁ±ªÂûãÔºö<code>DynamicVector</code>„ÄÅ<code>StaticVector</code>„ÄÅ<code>std::vector</code>„ÄÅ<code>std::string</code> ‰ª•ÂèäÂü∫Êú¨Á±ªÂûãÂ¶Ç <code>int</code> Âíå <code>double</code>„ÄÇÂÆÉÊ†πÊú¨Êó†Ê≥ïÊåáÂÆö‰ªª‰ΩïË¶ÅÊ±ÇÊàñÁ∫¶Êùü„ÄÇÂõ†Ê≠§ÔºåÂÆÉËøùÂèç‰∫ÜÊ†∏ÂøÉÊåáÂçó T.10Ôºö ‰∏∫ÊâÄÊúâÊ®°ÊùøÂèÇÊï∞ÊåáÂÆöÊ¶ÇÂøµ„ÄÇ</p>
<p>ËôΩÁÑ∂Ê≠§ËæìÂá∫ËøêÁÆóÁ¨¶ÈÄÇÁî®‰∫éÊâÄÊúâÂØÜÈõÜÂêëÈáèÂíåÂ∫èÂàóÂÆπÂô®Ôºå‰ΩÜÂØπ‰∫é‰∏çÊèê‰æõÈ¢ÑÊúüÊé•Âè£ÁöÑÁ±ªÂûãÔºå‰Ω†‰ºöÂæóÂà∞ÁºñËØëÈîôËØØ„ÄÇÊàñËÄÖÊõ¥Á≥üÁ≥ïÁöÑÊòØÔºå‰Ω†ÂèØËÉΩ‰ºöÂæÆÂ¶ôÂú∞ËøùÂèçÈöêÂºèÁöÑË¶ÅÊ±ÇÂíåÊúüÊúõÔºå‰ªéËÄåËøùÂèç LSPÔºàÂèÇËßÅ‚ÄúÊåáÂçó6ÔºöÈÅµÂæ™ÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫‚ÄùÔºâ„ÄÇÂΩìÁÑ∂Ôºå‰Ω†‰∏ç‰ºöÊúâÊÑèËøôÊ†∑ÂÅöÔºå‰ΩÜÂæàÂèØËÉΩÊòØÊó†ÊÑèÈó¥ÂèëÁîüÁöÑÔºöÊ≠§ËæìÂá∫ËøêÁÆóÁ¨¶ÊòØ‰ªª‰ΩïÁ±ªÂûãÁöÑÂÆåÁæéÂåπÈÖçÔºåÂπ∂‰∏îÂç≥‰Ωø‰Ω†‰∏çÊúüÊúõ‰πü‰ºöË¢´‰ΩøÁî®„ÄÇÂõ†Ê≠§ÔºåËøô‰∏™ÂáΩÊï∞Ê®°ÊùøÂ∞ÜÊàê‰∏∫ËæìÂá∫ËøêÁÆóÁ¨¶ÈáçËΩΩÈõÜ‰∏≠ÁöÑ‰∏Ä‰∏™‰∏çÂπ∏Ê∑ªÂä†„ÄÇÊàë‰ª¨ÈúÄË¶ÅÁöÑÊòØ‰∏ÄÁªÑÂÖ®Êñ∞ÁöÑÁ±ªÂûãÔºå‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÂûãÁ±ªÂà´„ÄÇ</p>
<p>‚ÄúËøô‰∏çÊòØÂü∫Á±ªÁöÑ‰ΩúÁî®ÂêóÔºüÊàë‰ª¨‰∏çËÉΩÁÆÄÂçïÂú∞ÂÆö‰πâ‰∏Ä‰∏™ <code>DenseVector</code> Âü∫Á±ªÊù•‰∏∫ÊâÄÊúâÂØÜÈõÜÂêëÈáèÂÆö‰πâÈ¢ÑÊúüÊé•Âè£ÂêóÔºüËÄÉËôë‰ª•‰∏ã <code>DenseVector</code> Âü∫Á±ªÁöÑËçâÂõæÔºö‚Äù</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>  <span class="c1">// ÂÖÉÁ¥†Á±ªÂûã 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">DenseVector</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="o">~</span><span class="n">DenseVector</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="n">size_t</span> <span class="nf">size</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="n">T</span><span class="o">&amp;</span>       <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="n">DenseVector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">vector</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... Â¶ÇÂâçÊâÄËø∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚ÄúËøôÂ∫îËØ•ÂèØ‰ª•Â∑•‰ΩúÔºåÂØπÂêßÔºüÊàëÂè™ÊòØ‰∏çÁ°ÆÂÆöÂ¶Ç‰ΩïÂ£∞Êòé <code>begin()</code> Âíå <code>end()</code> ÂáΩÊï∞ÔºåÂõ†‰∏∫ÊàëÊó†Ê≥ï‰ªé‰∏çÂêåËø≠‰ª£Âô®Á±ªÂûãÔºàÂ¶Ç <code>std::vector&lt;T&gt;::iterator</code> Âíå <code>std::array&lt;T&gt;::iterator</code>Ôºâ‰∏≠ÊäΩË±°Âá∫Êù•„ÄÇ‚Äù Êàë‰πüÊúâÁ±ª‰ººÁöÑÊÑüËßâÔºåËøô‰∏™ÈóÆÈ¢òÊ≤°ÊúâÂø´ÈÄüËß£ÂÜ≥ÊñπÊ°à„ÄÇ‰ΩÜËøòÊúâ‰∏Ä‰∏™Êõ¥‰∏∫‰∏•ÈáçÁöÑÈóÆÈ¢òÔºöÊúâ‰∫ÜËøô‰∏™Âü∫Á±ªÔºåÊàë‰ª¨‰ºöÂ∞ÜÊâÄÊúâÊàêÂëòÂáΩÊï∞ÂèòÊàêËôöÊàêÂëòÂáΩÊï∞„ÄÇËøôÂåÖÊã¨ <code>begin()</code> Âíå <code>end()</code> ÂáΩÊï∞Ôºå‰ΩÜÊúÄÈáçË¶ÅÁöÑÊòØ‰∏§‰∏™‰∏ãÊ†áËøêÁÆóÁ¨¶„ÄÇÂêéÊûúÂ∞ÜÊòØÊòæËëóÁöÑÔºöÊØèÊ¨°ËÆøÈóÆÂêëÈáèÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†Êó∂ÔºåÊàë‰ª¨Áé∞Âú®ÈÉΩÈúÄË¶ÅË∞ÉÁî®‰∏Ä‰∏™ËôöÂáΩÊï∞„ÄÇÊØè‰∏ÄÊ¨°ËÆøÈóÆÔºÅÂõ†Ê≠§ÔºåÊúâ‰∫ÜËøô‰∏™Âü∫Á±ªÔºåÊàë‰ª¨Â∞±ÂëäÂà´‰∫ÜÈ´òÊÄßËÉΩ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÊûÑÂª∫ÊäΩË±°ÁöÑÂü∫Êú¨Á±ªÁöÑÊÉ≥Ê≥ïÊú¨Ë∫´ÊòØÂ•ΩÁöÑ„ÄÇÊàë‰ª¨Âè™ÈúÄË¶Å‰ª•‰∏çÂêåÁöÑÊñπÂºèÂéªÂÅö„ÄÇËøôÂ∞±ÊòØÊàë‰ª¨Â∫îËØ•‰ªîÁªÜÁúãÁúã CRTP ÁöÑÂú∞Êñπ„ÄÇ</p>
<p><strong>CRTP ËÆæËÆ°Ê®°ÂºèËß£Èáä</strong></p>
<p>CRTP ËÆæËÆ°Ê®°ÂºèÂª∫Á´ãÂú®ÂàõÂª∫ÊäΩË±°ÁöÑÂü∫Êú¨Á±ªËøô‰∏ÄÂ∏∏ËßÅÊÉ≥Ê≥ï‰∏ä„ÄÇ‰ΩÜÊòØÔºåÂÆÉÈÄöËøáÁºñËØëÊó∂ÂÖ≥Á≥ªËÄå‰∏çÊòØËøêË°åÊó∂ÂÖ≥Á≥ªÔºàÈÄöËøáËôöÂáΩÊï∞ÔºâÂú®Âü∫Á±ªÂíåÊ¥æÁîüÁ±ª‰πãÈó¥Âª∫Á´ã‰∫ÜËÅîÁ≥ª„ÄÇ</p>
<p>CRTP ËÆæËÆ°Ê®°ÂºèÈÄöËøáËØÜÂà´‰∏Ä‰∏™ÊñπÈù¢‰Ωú‰∏∫ÂèòÂåñÁÇπÔºà‰∏Ä‰∏™ÂèòÂåñÊàñÈ¢ÑÊúü‰ºöÂèòÂåñÁöÑÊñπÈù¢ÔºâÂπ∂Â∞ÜÂÖ∂ÊèêÂèñ‰∏∫ÊäΩË±°ÂΩ¢ÂºèÊù•Â∏ÆÂä©Ëß£ËÄ¶ËΩØ‰ª∂ÂÆû‰Ωì„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂºïÂÖ•Êñ∞ËßÇÂØüËÄÖÁöÑÈúÄÊ±Ç‚Äî‚ÄîÊâ©Â±ï‰∏ÄÂØπÂ§ö‰æùËµñÂÖ≥Á≥ª‚Äî‚ÄîË¢´ËÆ§‰∏∫ÊòØÂèòÂåñÁÇπ„ÄÇÂ¶ÇÂõæ 6-2 ÊâÄÁ§∫ÔºåËøôÁßçÂèòÂåñÁÇπÈÄöËøáËßÇÂØüËÄÖÂü∫Á±ªÁöÑÂΩ¢ÂºèÂÆûÁé∞„ÄÇ</p>
<p><code>Observer</code> Á±ª‰ª£Ë°®ÊâÄÊúâÂèØËÉΩÁöÑËßÇÂØüËÄÖÂÆûÁé∞ÁöÑÊäΩË±°„ÄÇËøô‰∫õËßÇÂØüËÄÖÈôÑÂä†Âà∞Áî±ÂÖ∑‰Ωì‰∏ªÈ¢òÁ±ªÔºà<code>ConcreteSubject</code>ÔºâË°®Á§∫ÁöÑÁâπÂÆö‰∏ªÈ¢ò‰∏ä„ÄÇ‰∏∫‰∫ÜÂáèÂ∞ëËßÇÂØüËÄÖ‰∏éÂÖ∂‰∏ªÈ¢ò‰πãÈó¥ÁöÑËÄ¶ÂêàÔºåÊàñËÄÖÈÄöËøáÊèê‰æõÊâÄÊúâÈÄöÁî®ÊúçÂä°Êù•ÁÆÄÂåñ‰ª£Á†ÅÈáçÂ§çÔºåÂèØ‰ª•‰ΩøÁî®‰∏ªÈ¢òÊäΩË±°Êù•ËøõË°å <code>attach()</code> Âíå <code>detach()</code> Êìç‰Ωú„ÄÇËØ•‰∏ªÈ¢òËøòÂèØ‰ª•Âú®ÂÖ∂Áä∂ÊÄÅÂèëÁîüÂèòÂåñÊó∂ÈÄöÁü•ÊâÄÊúâÈôÑÂä†ÁöÑËßÇÂØüËÄÖÔºåÂπ∂Ëß¶ÂèëÂÆÉ‰ª¨Áõ∏Â∫îÁöÑÊõ¥Êñ∞ÂäüËÉΩÔºà<code>update()</code>Ôºâ„ÄÇ</p>
<p>CRTP ËÆæËÆ°Ê®°ÂºèÂü∫‰∫é‰ΩøÁî®Âü∫Á±ªÂàõÂª∫ÊäΩË±°ÁöÑÂ∏∏ËßÅÊÄùÊÉ≥„ÄÇ‰ΩÜÂÆÉ‰∏çÊòØÈÄöËøáËôöÂáΩÊï∞Âú®Âü∫Á±ªÂíåÊ¥æÁîüÁ±ª‰πãÈó¥Âª∫Á´ãËøêË°åÊó∂ÂÖ≥Á≥ªÔºåËÄåÊòØÂàõÂª∫ÁºñËØëÊó∂ÂÖ≥Á≥ª„ÄÇ</p>
<p><code>DenseVector</code> Âü∫Á±ªÂíå <code>DynamicVector</code> Ê¥æÁîüÁ±ª‰πãÈó¥ÁöÑÁºñËØëÊó∂ÂÖ≥Á≥ªÊòØÈÄöËøáÂ∞ÜÂü∫Á±ªÂçáÁ∫ß‰∏∫Á±ªÊ®°ÊùøÊù•ÂàõÂª∫ÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DenseVector.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span>   
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DenseVector</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">size_t</span> <span class="nf">size</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Derived</span> <span class="k">const</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">).</span><span class="n">size</span><span class="p">();</span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;DynamicVector.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DynamicVector</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DenseVector</span><span class="o">&lt;</span><span class="n">DynamicVector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">size_t</span> <span class="n">size</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>CRTP ÁöÑÂ•áÂ¶ô‰πãÂ§ÑÂú®‰∫éÔºåÂü∫Á±ªÁöÑÊñ∞Ê®°ÊùøÂèÇÊï∞Ë°®Á§∫ÂÖ≥ËÅîÊ¥æÁîüÁ±ªÁöÑÁ±ªÂûã„ÄÇ‰æãÂ¶ÇÔºå<code>DynamicVector</code> Á≠âÊ¥æÁîüÁ±ªÈúÄË¶ÅÊèê‰æõËá™Â∑±ÁöÑÁ±ªÂûãÊù•ÂÆû‰æãÂåñÂü∫Á±ª„ÄÇ</p>
<p>‚ÄúÂìáÔºåÁ≠â‰∏Ä‰∏ã‚Äî‚ÄîËøôÊÄé‰πàÂèØËÉΩÔºü‚Äù‰Ω†ÂèØËÉΩ‰ºöÈóÆ„ÄÇÁ°ÆÂÆûÂèØ‰ª•„ÄÇ‰∏∫‰∫ÜÂÆû‰æãÂåñ‰∏Ä‰∏™Ê®°ÊùøÔºå‰Ω†‰∏çÈúÄË¶ÅÂÆåÊï¥ÁöÑÁ±ªÂûãÂÆö‰πâ„ÄÇ‰ΩøÁî®‰∏çÂÆåÊï¥Á±ªÂûãÂ∞±Ë∂≥Â§ü‰∫Ü„ÄÇËøôÁßç‰∏çÂÆåÊï¥Á±ªÂûãÂú®ÁºñËØëÂô®ÁúãÂà∞ <code>DynamicVector</code> Á±ªÂ£∞ÊòéÂêéÂç≥ÂèØËé∑Âæó„ÄÇÂÆûÈôÖ‰∏äÔºåËøôÊÆµËØ≠Ê≥ïËµ∑Âà∞‰∫ÜÂâçÂêëÂ£∞ÊòéÁöÑ‰ΩúÁî®„ÄÇÂõ†Ê≠§Ôºå<code>DynamicVector</code> Á±ªÁ°ÆÂÆûÂèØ‰ª•‰ΩøÁî®Ëá™Ë∫´‰Ωú‰∏∫ <code>DenseVector</code> Âü∫Á±ªÁöÑÊ®°ÊùøÂèÇÊï∞„ÄÇ</p>
<p>ÂΩìÁÑ∂Ôºå‰Ω†ÂèØ‰ª•Ê†πÊçÆÂñúÂ•ΩÂëΩÂêçÂü∫Á±ªÁöÑÊ®°ÊùøÂèÇÊï∞Ôºà‰æãÂ¶ÇÔºåÁÆÄÂçïÂú∞ÂëΩÂêç‰∏∫ <code>T</code>ÔºâÔºå‰ΩÜÊ≠£Â¶Ç‚ÄúÊåáÂçó14Ôºö‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÂêçÁß∞‰º†ËææÊÑèÂõæ‚Äù‰∏≠ËÆ®ËÆ∫ÁöÑÈÇ£Ê†∑Ôºå‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞ÊàñÂ∏∏Áî®ÂêçÁß∞ÊúâÂä©‰∫é‰º†ËææÊÑèÂõæ„ÄÇÂõ†Ê≠§Ôºå‰Ω†ÂèØ‰ª•Â∞ÜÂèÇÊï∞ÂëΩÂêç‰∏∫ <code>CRTP</code>ÔºåËøôÂæàÂ•ΩÂú∞‰º†Ëææ‰∫ÜÊ®°ÂºèÔºå‰ΩÜ‰∏çÂπ∏ÁöÑÊòØÂè™ÂØπÁÜüÊÇâÁöÑ‰∫∫ÊúâÊÑè‰πâ„ÄÇÂÖ∂‰ªñ‰∫∫‰ºöÂØπÊ≠§Áº©ÂÜôÊÑüÂà∞Âõ∞ÊÉë„ÄÇÂõ†Ê≠§ÔºåÊ®°ÊùøÂèÇÊï∞ÈÄöÂ∏∏Áß∞‰∏∫ <code>Derived</code>ÔºåËøôÂÆåÁæéË°®Ëææ‰∫ÜÂÖ∂Áî®ÈÄîÂπ∂‰º†Ëææ‰∫ÜÊÑèÂõæÔºöÂÆÉ‰ª£Ë°®Ê¥æÁîüÁ±ªÁöÑÁ±ªÂûã„ÄÇ</p>
<p>ÈÄöËøáËøô‰∏™Ê®°ÊùøÂèÇÊï∞ÔºåÂü∫Á±ªÁé∞Âú®Áü•ÈÅì‰∫ÜÂÆûÈôÖÊ¥æÁîüÁ±ªÂûãÁöÑÁ±ªÂûã„ÄÇËôΩÁÑ∂ÂÆÉ‰ªçÁÑ∂‰ª£Ë°®ÊâÄÊúâÂØÜÈõÜÂêëÈáèÁöÑÊäΩË±°ÂíåÂÖ¨ÂÖ±Êé•Âè£Ôºå‰ΩÜÁé∞Âú®ËÉΩÂ§üËÆøÈóÆÂíåË∞ÉÁî®Ê¥æÁîüÁ±ªÂûã‰∏≠ÁöÑÂÖ∑‰ΩìÂÆûÁé∞„ÄÇ‰æãÂ¶ÇÔºåÂú® <code>size()</code> ÊàêÂëòÂáΩÊï∞‰∏≠ÂèëÁîüËøôÁßçÊÉÖÂÜµÔºö<code>DenseVector</code> ‰ΩøÁî® <code>static_cast</code> Â∞ÜËá™Ë∫´ËΩ¨Êç¢‰∏∫Ê¥æÁîüÁ±ªÁöÑÂºïÁî®ÔºåÂπ∂Ë∞ÉÁî®ËØ•Á±ªÁöÑ <code>size()</code> ÂáΩÊï∞„ÄÇ‰πç‰∏ÄÁúãÔºåËøôÁúãËµ∑Êù•ÂÉèÊòØÈÄíÂΩíÂáΩÊï∞Ë∞ÉÁî®ÔºàÂú® <code>size()</code> ÂáΩÊï∞ÂÜÖÈÉ®Ë∞ÉÁî® <code>size()</code> ÂáΩÊï∞ÔºâÔºå‰ΩÜÂÆûÈôÖ‰∏äÊòØÂú®Ê¥æÁîüÁ±ª‰∏≠Ë∞ÉÁî® <code>size()</code> ÊàêÂëòÂáΩÊï∞„ÄÇ</p>
<p>‚ÄúÊâÄ‰ª•ËøôÂ∞±ÊòØ‰Ω†ÊâÄËØ¥ÁöÑÁºñËØëÊó∂ÂÖ≥Á≥ª„ÄÇÂü∫Á±ª‰ª£Ë°®ÂÖ∑‰ΩìÊ¥æÁîüÁ±ªÂûãÂíåÂÆûÁé∞ÁªÜËäÇÁöÑÊäΩË±°Ôºå‰ΩÜ‰ªçÁ°ÆÂàáÁü•ÈÅìÂÆûÁé∞ÁªÜËäÇÂú®Âì™Èáå„ÄÇÊâÄ‰ª•Êàë‰ª¨ÁúüÁöÑ‰∏çÈúÄË¶Å‰ªª‰ΩïËôöÂáΩÊï∞„ÄÇ‚Äù Ê≠£Á°Æ„ÄÇÈÄöËøá CRTPÔºåÊàë‰ª¨Áé∞Âú®ËÉΩÂ§üÂÆûÁé∞‰∏Ä‰∏™ÈÄöÁî®Êé•Âè£ÔºåÂπ∂ÈÄöËøáÁÆÄÂçïÁöÑ <code>static_cast</code> Â∞ÜÊØè‰∏™Ë∞ÉÁî®ËΩ¨ÂèëÁªôÊ¥æÁîüÁ±ª„ÄÇËøôÊ†∑ÂÅöÊ≤°Êúâ‰ªª‰ΩïÊÄßËÉΩÊçüÂ§±„ÄÇÂÆûÈôÖ‰∏äÔºåÂü∫Á±ªÂáΩÊï∞ÂæàÂèØËÉΩ‰ºöË¢´ÂÜÖËÅîÔºåÂ¶ÇÊûú <code>DenseVector</code> ÊòØÂîØ‰∏ÄÁöÑÊàñÁ¨¨‰∏Ä‰∏™Âü∫Á±ªÔºå<code>static_cast</code> ÁîöËá≥‰∏ç‰ºö‰∫ßÁîüÂçïÊù°Ê±áÁºñÊåá‰ª§„ÄÇÂÆÉÂè™ÊòØÂëäËØâÁºñËØëÂô®Â∞ÜÂØπË±°ËßÜ‰∏∫Ê¥æÁîüÁ±ªÂûãÁöÑÂØπË±°„ÄÇ</p>
<p>‰∏∫‰∫ÜÊèê‰æõ‰∏Ä‰∏™Âπ≤ÂáÄÁöÑ CRTP Âü∫Á±ªÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÊõ¥Êñ∞‰∏Ä‰∫õÁªÜËäÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DenseVector.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DenseVector</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="o">~</span><span class="n">DenseVector</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">   <span class="n">Derived</span><span class="o">&amp;</span>       <span class="n">derived</span><span class="p">()</span>       
</span></span><span class="line"><span class="cl">      <span class="p">{</span> <span class="k">return</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Derived</span><span class="o">&amp;&gt;</span><span class="p">(</span> <span class="o">*</span><span class="k">this</span> <span class="p">);</span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl">   <span class="n">Derived</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">derived</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Derived</span> <span class="k">const</span><span class="o">&amp;&gt;</span><span class="p">(</span> <span class="o">*</span><span class="k">this</span> <span class="p">);</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">size_t</span> <span class="nf">size</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">derived</span><span class="p">().</span><span class="n">size</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âõ†‰∏∫Êàë‰ª¨ÊÉ≥ÈÅøÂÖç‰ªª‰ΩïËôöÂáΩÊï∞ÔºåÊâÄ‰ª•Êàë‰ª¨‰πüÂØπËôöÊûêÊûÑÂáΩÊï∞‰∏çÊÑüÂÖ¥Ë∂£„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Â∞ÜÊûêÊûÑÂáΩÊï∞ÂÆûÁé∞‰∏∫‰øùÊä§ÈÉ®ÂàÜ‰∏≠ÁöÑÈùûËôöÂáΩÊï∞„ÄÇËøôÂÆåÂÖ®Á¨¶ÂêàÊ†∏ÂøÉÊåáÂçó C.35Ôºö Âü∫Á±ªÊûêÊûÑÂáΩÊï∞Â∫îËØ•ÊòØÂÖ¨ÂÖ±‰∏îËôöÁöÑÔºåÊàñËÄÖÊòØÂèó‰øùÊä§‰∏îÈùûËôöÁöÑ„ÄÇ</p>
<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÊ≠§ÊûêÊûÑÂáΩÊï∞ÁöÑÂÆö‰πâÈòªÊ≠¢‰∫ÜÁºñËØëÂô®ÁîüÊàê‰∏§‰∏™ÁßªÂä®Êìç‰Ωú„ÄÇÁî±‰∫é CRTP Âü∫Á±ªÈÄöÂ∏∏ÊòØÁ©∫ÁöÑÔºåÊ≤°Êúâ‰ªÄ‰πàÂèØÁßªÂä®ÁöÑÂÜÖÂÆπÔºåËøô‰∏çÊòØÈóÆÈ¢òÔºõ‰ΩÜ‰ªçÁÑ∂Ë¶ÅÊó∂ÂàªÊ≥®ÊÑè‚ÄúËßÑÂàô5‚Äù„ÄÇ</p>
<p>Êàë‰ª¨ËøòÂ∫îËØ•ÈÅøÂÖçÂú®Âü∫Á±ªÁöÑÊØè‰∏™ÊàêÂëòÂáΩÊï∞‰∏≠‰ΩøÁî® <code>static_cast</code>„ÄÇËôΩÁÑ∂ËøôÊòØÊ≠£Á°ÆÁöÑÔºå‰ΩÜ‰ªª‰ΩïÁ±ªÂûãËΩ¨Êç¢ÈÉΩÂ∫îËØ•Ë¢´ËßÜ‰∏∫ÂèØÁñëË°å‰∏∫ÔºåÂ∫îÂ∞ΩÈáèÂáèÂ∞ë„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Ê∑ªÂä†‰∫Ü‰∏§‰∏™ <code>derived()</code> ÊàêÂëòÂáΩÊï∞ÔºåÂÆÉ‰ª¨ÊâßË°åËΩ¨Êç¢Âπ∂Âú®ÂÖ∂‰ªñÊàêÂëòÂáΩÊï∞‰∏≠‰ΩøÁî®„ÄÇËøôÊ†∑‰∏ç‰ªÖ‰Ωø‰ª£Á†ÅÊõ¥ÁÆÄÊ¥Å„ÄÅÈÅµÂæ™ DRY ÂéüÂàôÔºåËÄå‰∏îÁúãËµ∑Êù•‰πüËøú‰∏çÈÇ£‰πàÂèØÁñë„ÄÇ</p>
<p>Êúâ‰∫Ü <code>derived()</code> ÂáΩÊï∞ÔºåÊàë‰ª¨Áé∞Âú®ÂèØ‰ª•ÂÆö‰πâ‰∏ãÊ†áËøêÁÆóÁ¨¶Âíå <code>begin()</code> Âíå <code>end()</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DenseVector</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span>       <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">()[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">()[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="n">begin</span><span class="p">()</span>       <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="n">begin</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="n">end</span><span class="p">()</span>         <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="n">end</span><span class="p">()</span>   <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ËÄåÔºåËøô‰∫õÂáΩÊï∞‰∏çÂÉè <code>size()</code> ÊàêÂëòÂáΩÊï∞ÈÇ£Ê†∑Áõ¥Êé•„ÄÇÁâπÂà´ÊòØËøîÂõûÁ±ªÂûãËØÅÊòéÊúâÁÇπÈöæ‰ª•ÊåáÂÆöÔºåÂõ†‰∏∫Ëøô‰∫õÁ±ªÂûã‰æùËµñ‰∫é <code>Derived</code> Á±ªÁöÑÂÆûÁé∞„ÄÇ‚ÄúÂóØÔºåÈÇ£‰∏çÂ∫îËØ•Â§™ÈöæÂêßÔºå‚Äù‰Ω†ËØ¥„ÄÇ‚ÄúËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàÊ¥æÁîüÁ±ªÂûãÊèê‰æõ‰∫ÜÂá†‰∏™ÂµåÂ•óÁ±ªÂûãÔºåÂ¶Ç <code>value_type</code>„ÄÅ<code>iterator</code> Âíå <code>const_iterator</code>ÔºåÂØπÂêßÔºü‚Äù ÂÆûÈôÖ‰∏äÔºåÁõ¥Êé•ËØ¢ÈóÆ‰ºº‰πéÊòØÁõ¥ËßÇÁöÑÂÅöÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DenseVector</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">using</span> <span class="n">value_type</span>     <span class="o">=</span> <span class="k">typename</span> <span class="n">Derived</span><span class="o">::</span><span class="n">value_type</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">iterator</span>       <span class="o">=</span> <span class="k">typename</span> <span class="n">Derived</span><span class="o">::</span><span class="n">iterator</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">using</span> <span class="n">const_iterator</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">Derived</span><span class="o">::</span><span class="n">const_iterator</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="n">value_type</span><span class="o">&amp;</span>       <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span>       <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">()[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">value_type</span> <span class="k">const</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">()[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">iterator</span>       <span class="nf">begin</span><span class="p">()</span>       <span class="p">{</span> <span class="k">return</span> <span class="n">derived</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">const_iterator</span> <span class="nf">begin</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">derived</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">iterator</span>       <span class="nf">end</span><span class="p">()</span>         <span class="p">{</span> <span class="k">return</span> <span class="n">derived</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="n">const_iterator</span> <span class="nf">end</span><span class="p">()</span>   <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">derived</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨Êü•ËØ¢Ê¥æÁîüÁ±ª‰∏≠ÁöÑ <code>value_type</code>„ÄÅ<code>iterator</code> Âíå <code>const_iterator</code> Á±ªÂûãÔºà‰∏çË¶ÅÂøòËÆ∞ <code>typename</code> ÂÖ≥ÈîÆÂ≠óÔºâÂπ∂‰ΩøÁî®Ëøô‰∫õÁ±ªÂûãÊù•ÊåáÂÆöÊàë‰ª¨ÁöÑËøîÂõûÁ±ªÂûã„ÄÇËøôÁúãËµ∑Êù•ÂæàÁÆÄÂçïÔºåÂØπÂêßÔºü‰Ω†Âá†‰πéÂèØ‰ª•ËÇØÂÆöËøôÂπ∂‰∏çÈÇ£‰πàÁÆÄÂçï„ÄÇÂ¶ÇÊûú‰Ω†Â∞ùËØïËøôÊ†∑ÂÅöÔºåClang ÁºñËØëÂô®‰ºöÊä•Âá∫‰∏ÄÊù°ÈùûÂ∏∏Â•áÊÄ™‰∏î‰ª§‰∫∫Âõ∞ÊÉëÁöÑÈîôËØØÊ∂àÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">CRTP</span><span class="p">.</span><span class="nl">cpp</span><span class="p">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">41</span><span class="o">:</span> <span class="nl">error</span><span class="p">:</span> <span class="n">no</span> <span class="n">type</span> <span class="n">named</span> <span class="err">&#39;</span><span class="n">value_type</span><span class="err">&#39;</span> <span class="n">in</span> <span class="err">&#39;</span><span class="n">DynamicVector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="err">&#39;</span> 
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">value_type</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">Derived</span><span class="o">::</span><span class="n">value_type</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">                      <span class="o">~~~~~~~~~~~~~~~~~~^~~~~~~~~~</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚ÄúÊ≤°Êúâ <code>DynamicVector&lt;int&gt;</code> ‰∏≠ÁöÑ <code>value_type</code> ‚Äî‚Äî ÂæàÂ•áÊÄ™„ÄÇ‚Äù ‰Ω†ÁöÑÁ¨¨‰∏Ä‰∏™ÊÉ≥Ê≥ïÊòØ‰Ω†ÊêûÁ†∏‰∫Ü„ÄÇ‰∏ÄÂÆöÊòØÊãºÂÜôÈîôËØØ„ÄÇÂΩìÁÑ∂ÔºÅÊâÄ‰ª•‰Ω†ÂõûÂà∞‰ª£Á†Å‰∏≠Ê£ÄÊü•ÊãºÂÜô„ÄÇÁÑ∂ËÄåÔºåÁªìÊûúÊòØÊãºÂÜôÊ≤°ÊúâÈóÆÈ¢ò„ÄÇ‰Ω†ÂÜçÊ¨°Ê£ÄÊü• <code>DynamicVector</code> Á±ªÔºöÈÇ£ÈáåÊúâÂµåÂ•óÁöÑ <code>value_type</code> ÊàêÂëò„ÄÇËÄå‰∏î‰∏ÄÂàáÈÉΩÊòØÂÖ¨ÂºÄÁöÑ„ÄÇÈîôËØØ‰ø°ÊÅØÊØ´Êó†ÊÑè‰πâ„ÄÇ‰Ω†ÈáçÊñ∞Ê£ÄÊü•‰∏ÄÂàáÔºåÂÜçÊ£ÄÊü•‰∏ÄÈÅçÔºåÂçäÂ∞èÊó∂Âêé‰Ω†ÂæóÂá∫ÁªìËÆ∫Ôºö‚ÄúÁºñËØëÂô®Êúâ‰∏Ä‰∏™ bugÔºÅ‚Äù</p>
<p>‰∏çÔºåËøô‰∏çÊòØÁºñËØëÂô®ÁöÑ bug„ÄÇÊó†ËÆ∫ÊòØ Clang ËøòÊòØÂÖ∂‰ªñÁºñËØëÂô®ÈÉΩÊ≤°Êúâ bug„ÄÇGCC Êèê‰æõ‰∫Ü‰∏Ä‰∏™‰∏çÂêåÁöÑ‰ΩÜÁ®çÂæÆÊõ¥ÂÖ∑ÂêØÂèëÊÄßÁöÑÈîôËØØÊ∂àÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">CRTP</span><span class="p">.</span><span class="nl">cpp</span><span class="p">:</span><span class="mi">29</span><span class="o">:</span><span class="mi">10</span><span class="o">:</span> <span class="nl">error</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">use</span> <span class="n">of</span> <span class="n">incomplete</span> <span class="n">type</span> <span class="err">&#39;</span><span class="k">class</span> <span class="nc">DynamicVector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="err">&#39;</span> 
</span></span><span class="line"><span class="cl"><span class="mi">29</span> <span class="o">|</span>    <span class="k">using</span> <span class="n">value_type</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">Derived</span><span class="o">::</span><span class="n">value_type</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="o">^~~~~~~~~~</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Clang ÁºñËØëÂô®ÊòØÂØπÁöÑÔºöÂú® <code>DynamicVector</code> Á±ª‰∏≠ËøòÊ≤°Êúâ <code>value_type</code>„ÄÇËøòÊ≤°ÊúâÔºÅÂΩì‰Ω†Êü•ËØ¢ÂµåÂ•óÁ±ªÂûãÊó∂Ôºå<code>DynamicVector</code> Á±ªÁöÑÂÆö‰πâËøòÊ≤°ÊúâË¢´ÁúãÂà∞Ôºå<code>DynamicVector</code> ‰ªçÁÑ∂ÊòØ‰∏Ä‰∏™‰∏çÂÆåÊï¥Á±ªÂûã„ÄÇËøôÊòØÂõ†‰∏∫ÁºñËØëÂô®‰ºöÂú® <code>DynamicVector</code> Á±ªÂÆö‰πâ‰πãÂâçÂÆû‰æãÂåñ <code>DenseVector</code> Âü∫Á±ª„ÄÇÊØïÁ´üÔºå‰ªéËØ≠Ê≥ï‰∏äÁúãÔºåÂü∫Á±ªÊòØÂú®Á±ª‰∏ª‰Ωì‰πãÂâçÊåáÂÆöÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DynamicVector</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DenseVector</span><span class="o">&lt;</span><span class="n">DynamicVector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âõ†Ê≠§ÔºåÊ≤°ÊúâÂäûÊ≥ï‰ΩøÁî®Ê¥æÁîüÁ±ªÁöÑÂµåÂ•óÁ±ªÂûãÊù•ÊåáÂÆö CRTP Á±ªÁöÑËøîÂõûÁ±ªÂûã„ÄÇÂÆûÈôÖ‰∏äÔºåÂè™Ë¶ÅÊ¥æÁîüÁ±ªÊòØ‰∏çÂÆåÊï¥Á±ªÂûãÔºå‰Ω†Â∞±‰∏çËÉΩ‰ΩøÁî®‰ªª‰Ωï‰∏úË•ø„ÄÇ‚Äú‰ΩÜÊòØ‰∏∫‰ªÄ‰πàÊàëÂèØ‰ª•Ë∞ÉÁî®Ê¥æÁîüÁ±ªÁöÑÊàêÂëòÂáΩÊï∞Âë¢ÔºüËøôÈöæÈÅì‰∏ç‰ºöÂØºËá¥ÂêåÊ†∑ÁöÑÈóÆÈ¢òÂêóÔºü‚Äù Âπ∏ËøêÁöÑÊòØÔºåËøôÂèØ‰ª•Â∑•‰ΩúÔºàÂê¶Âàô CRTP Ê®°ÂºèÊ†πÊú¨Êó†Ê≥ïÂ∑•‰ΩúÔºâ„ÄÇ‰ΩÜËøô‰ªÖÂú®Á±ªÊ®°ÊùøÁöÑ‰∏Ä‰∏™ÁâπÊÆäÂ±ûÊÄß‰∏ãÊúâÊïàÔºöÊàêÂëòÂáΩÊï∞‰ªÖÂú®ÂÆûÈôÖË∞ÉÁî®Êó∂ÊâçÂÆû‰æãÂåñ„ÄÇÁî±‰∫éÂÆûÈôÖË∞ÉÁî®ÈÄöÂ∏∏ÂèëÁîüÂú®Ê¥æÁîüÁ±ªÂÆö‰πâÂèØÁî®‰πãÂêéÔºåÂõ†Ê≠§‰∏çÂ≠òÂú®Áº∫Â∞ëÂÆö‰πâÁöÑÈóÆÈ¢ò„ÄÇÊ≠§Êó∂ÔºåÊ¥æÁîüÁ±ª‰∏çÂÜçÊòØ‰∏çÂÆåÊï¥Á±ªÂûã„ÄÇ</p>
<p>‚ÄúÂ•ΩÁöÑÔºåÊàëÊòéÁôΩ‰∫Ü„ÄÇ‰ΩÜÊàë‰ª¨Â¶Ç‰ΩïÊåáÂÆö‰∏ãÊ†áËøêÁÆóÁ¨¶Âíå <code>begin()</code> Âíå <code>end()</code> ÂáΩÊï∞ÁöÑËøîÂõûÁ±ªÂûãÂë¢Ôºü‚Äù Â§ÑÁêÜËøô‰∏™ÈóÆÈ¢òÊúÄÊñπ‰æøÁöÑÊñπÊ≥ïÊòØ‰ΩøÁî®ËøîÂõûÁ±ªÂûãÊé®ÂØº„ÄÇËøôÊòØ‰∏Ä‰∏™‰ΩøÁî® <code>decltype(auto)</code> ËøîÂõûÁ±ªÂûãÁöÑÁªù‰Ω≥Êú∫‰ºöÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DenseVector</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span>       <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">()[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">()[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="n">begin</span><span class="p">()</span>       <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="n">begin</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="n">end</span><span class="p">()</span>         <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span> <span class="n">end</span><span class="p">()</span>   <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚Äú‰ªÖ‰ªÖ‰ΩøÁî® <code>auto</code> ‰∏çÂ§üÂêóÔºü‰æãÂ¶ÇÔºåÊàë‰ª¨ÂèØ‰ª•ËøôÊ†∑ÂÆö‰πâËøîÂõûÁ±ªÂûãÔºö‚Äù</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DenseVector</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... Ê≥®ÊÑèÔºöËøôÁßçÊñπÊ≥ïÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÂèØËÉΩ‰∏çÂ§üÈÄöÁî®ÔºåËÄå `decltype(auto)` ÊÄªÊòØÊúâÊïàÁöÑ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">auto</span><span class="o">&amp;</span>       <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span>       <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">()[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">derived</span><span class="p">()[</span><span class="n">index</span><span class="p">];</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">auto</span> <span class="nf">begin</span><span class="p">()</span>       <span class="p">{</span> <span class="k">return</span> <span class="n">derived</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">auto</span> <span class="nf">begin</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">derived</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">auto</span> <span class="nf">end</span><span class="p">()</span>         <span class="p">{</span> <span class="k">return</span> <span class="n">derived</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">   <span class="k">auto</span> <span class="nf">end</span><span class="p">()</span>   <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">derived</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåËøôÁ°ÆÂÆûÊòØË∂≥Â§üÁöÑ„ÄÇÁÑ∂ËÄåÔºåÊ≠£Â¶ÇÊàë‰∏ÄÁõ¥Âº∫Ë∞ÉÁöÑÔºå‰ª£Á†Å‰ºöÂèëÁîüÂèòÂåñ„ÄÇÊúÄÁªàÔºåÂèØËÉΩ‰ºöÂá∫Áé∞Âè¶‰∏Ä‰∏™Ë°çÁîüÂêëÈáèÁ±ªÔºåÂÆÉ‰∏çÂ≠òÂÇ®ÂÄºËÄåÊòØÊåâÂÄºËøîÂõû„ÄÇ‰æãÂ¶ÇÔºåËÄÉËôë‰∏Ä‰∏™ <code>ZeroVector</code> Á±ªÔºåÂÆÉ‰ª£Ë°®ÂêëÈáèÁöÑÈõ∂ÂÖÉÁ¥†„ÄÇËøôÊ†∑ÁöÑÂêëÈáè‰∏ç‰ºöÂ≠òÂÇ®ÊâÄÊúâÂÖÉÁ¥†ÔºåÂõ†‰∏∫ËøôÊ†∑ÂÅö‰ºöÊµ™Ë¥πËµÑÊ∫êÔºåËÄåÊòØÂèØËÉΩÂÆûÁé∞‰∏∫Á©∫Á±ªÔºåÊØèÊ¨°ËÆøÈóÆÂÖÉÁ¥†Êó∂ËøîÂõûÈõ∂ÂÄº„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå<code>auto&amp;</code> ËøîÂõûÁ±ªÂûãÂ∞ÜÊòØ‰∏çÊ≠£Á°ÆÁöÑ„ÄÇÊòØÁöÑÔºåÁºñËØëÂô®ÔºàÂ∏åÊúõÔºâ‰ºöË≠¶Âëä‰Ω†Ëøô‰∏ÄÁÇπ„ÄÇ‰ΩÜ‰Ω†ÂèØ‰ª•ÈÄöËøáËøîÂõû‰∏éÊ¥æÁîüÁ±ªÁõ∏ÂêåÁöÑÁ±ªÂûãÊù•ÈÅøÂÖçÊï¥‰∏™ÈóÆÈ¢ò„ÄÇËøôÁßçËøîÂõûÁ±ªÂûãÁî± <code>decltype(auto)</code> Ë°®Á§∫„ÄÇ</p>
<p><strong>ÂàÜÊûê CRTP ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥</strong></p>
<p>‚ÄúÂìáÔºåËøô‰∏™ CRTP ËÆæËÆ°Ê®°ÂºèÂê¨Ëµ∑Êù•Â§™Ê£í‰∫Ü„ÄÇÊâÄ‰ª•ÔºåÈô§‰∫ÜËøô‰∫õÊØîÂπ≥Â∏∏Á®çÂæÆÂ§çÊùÇ‰∏ÄÁÇπÁöÑÂÆûÁé∞ÁªÜËäÇ‰πãÂ§ñÔºåËøô‰∏çÊòØËß£ÂÜ≥ÊâÄÊúâËôöÂáΩÊï∞ÊÄßËÉΩÈóÆÈ¢òÁöÑÂäûÊ≥ïÂêóÔºüËøôÈöæÈÅì‰∏çÊòØÊâÄÊúâ‰∏éÁªßÊâøÁõ∏ÂÖ≥ÈóÆÈ¢òÁöÑÂÖ≥ÈîÆ„ÄÅÂú£ÊùØÂêóÔºü‚Äù ÊàëËÉΩÁêÜËß£‰Ω†ÁöÑÁÉ≠ÊÉÖÔºÅ‰πç‰∏ÄÁúãÔºåCRTP Á°ÆÂÆûÂÉèÊòØËß£ÂÜ≥ÂêÑÁßçÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÁöÑÁªàÊûÅÊñπÊ°à„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåËøôÊòØ‰∏ÄÁßçÈîôËßâ„ÄÇËÆ∞‰ΩèÔºöÊØèÁßçËÆæËÆ°Ê®°ÂºèÈÉΩÊúâÂÖ∂‰ºòÁÇπÔºå‰ΩÜ‰πüÊúâÁº∫ÁÇπ„ÄÇCRTP ËÆæËÆ°Ê®°ÂºèÊúâÂá†‰∏™Áõ∏ÂΩìÈôêÂà∂ÊÄßÁöÑÁº∫ÁÇπ„ÄÇ</p>
<p>Á¨¨‰∏Ä‰∏™Ôºå‰πüÊòØÊúÄÈôêÂà∂ÊÄßÁöÑÁº∫ÁÇπ‰πã‰∏ÄÊòØÁº∫‰πè‰∏Ä‰∏™ÈÄöÁî®Âü∫Á±ª„ÄÇ‰∏∫‰∫ÜÂº∫Ë∞ÉÂÖ∂‰∏•ÈáçÊÄßÔºåÊàëÂÜçÈáçÂ§ç‰∏ÄÈÅçÔºöÊ≤°ÊúâÈÄöÁî®Âü∫Á±ªÔºÅÂÆûÈôÖ‰∏äÔºåÊØè‰∏™Ê¥æÁîüÁ±ªÈÉΩÊúâ‰∏çÂêåÁöÑÂü∫Á±ª„ÄÇ‰æãÂ¶ÇÔºå<code>DynamicVector&lt;T&gt;</code> Á±ªÊúâ <code>DenseVector&lt;DynamicVector&lt;T&gt;&gt;</code> Âü∫Á±ª„ÄÇ<code>StaticVector&lt;T, Size&gt;</code> Á±ªÊúâ <code>DenseVector&lt;StaticVector&lt;T, Size&gt;&gt;</code> Âü∫Á±ªÔºàËßÅÂõæ 6-4Ôºâ„ÄÇÂõ†Ê≠§ÔºåÊØèÂΩìÈúÄË¶Å‰∏Ä‰∏™ÈÄöÁî®Âü∫Á±ªÊó∂ÔºåÊØîÂ¶ÇÁî®‰∫éÂú®ÈõÜÂêà‰∏≠Â≠òÂÇ®‰∏çÂêåÁ±ªÂûãÔºåCRTP ËÆæËÆ°Ê®°ÂºèÂ∞±‰∏çÊòØ‰∏Ä‰∏™ÂêàÈÄÇÁöÑÈÄâÊã©„ÄÇ</p>
<p>‚ÄúÂì¶ÔºåÂìáÔºåÊàëÁúãÂà∞ËøôÁ°ÆÂÆûÊòØ‰∏Ä‰∏™ÁúüÊ≠£ÁöÑÈôêÂà∂„ÄÇ‰ΩÜÊàë‰ª¨‰∏çËÉΩËÆ© CRTP Âü∫Á±ª‰ªé‰∏Ä‰∏™ÈÄöÁî®Âü∫Á±ªÊ¥æÁîüÂêóÔºü‚Äù ‰Ω†ÂèØËÉΩ‰ºö‰∫âËæ©„ÄÇ‰∏çÔºåÂÆûÈôÖ‰∏ä‰∏çË°åÔºåÂõ†‰∏∫ËøôÊ†∑ÂÅö‰ºöË¶ÅÊ±ÇÊàë‰ª¨ÂÜçÊ¨°ÂºïÂÖ•ËôöÂáΩÊï∞„ÄÇ‚ÄúÂ•ΩÂêßÔºåÊàëÊòéÁôΩ‰∫Ü„ÄÇÈÇ£‰πà‰ΩøÁî® <code>std::variant</code> Ê®°Êãü‰∏Ä‰∏™ÈÄöÁî®Âü∫Á±ªÂë¢Ôºü‚Äù ÊòØÁöÑÔºåËøôÊòØ‰∏Ä‰∏™ÈÄâÈ°π„ÄÇÁÑ∂ËÄåÔºåËØ∑ËÆ∞‰Ωè <code>std::variant</code> ÂÆûÈôÖ‰∏äÊòØËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÁöÑ‰∏ÄÁßçË°®Áé∞ÂΩ¢ÂºèÔºàËßÅ‚ÄúÊåáÂçó 16Ôºö‰ΩøÁî®ËÆøÈóÆËÄÖÊâ©Â±ïÊìç‰Ωú‚ÄùÔºâ„ÄÇÁî±‰∫é <code>std::variant</code> ÈúÄË¶ÅÁü•ÈÅìÂÖ∂ÊâÄÊúâÊΩúÂú®Êõø‰ª£È°πÔºåËøôÂ∞ÜÈôêÂà∂‰Ω†Ê∑ªÂä†Êñ∞Á±ªÂûãÁöÑËá™Áî±Â∫¶„ÄÇÊâÄ‰ª•‰Ω†ÁúãÔºåÂç≥‰Ωø‰Ω†ÂèØËÉΩ‰∏çÂñúÊ¨¢ÂÆÉÔºåCRTP Âπ∂‰∏çËÉΩÊõø‰ª£ÊâÄÊúâÁöÑÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ„ÄÇ</p>
<p>Á¨¨‰∫å‰∏™ÔºåÂêåÊ†∑ÂèØËÉΩÈùûÂ∏∏ÈôêÂà∂ÊÄßÁöÑÁº∫ÁÇπÊòØÔºåÊâÄÊúâ‰∏é CRTP Âü∫Á±ªÊé•Ëß¶ÁöÑ‰∏úË•øÊú¨Ë∫´ÈÉΩÂèòÊàê‰∫ÜÊ®°Êùø„ÄÇËøôÂØπ‰∫éÊâÄÊúâ‰∏éËØ•Âü∫Á±ª‰∏ÄËµ∑Â∑•‰ΩúÁöÑÂáΩÊï∞Êù•ËØ¥Â∞§ÂÖ∂Â¶ÇÊ≠§„ÄÇ‰æãÂ¶ÇÔºåÂçáÁ∫ßÂêéÁöÑËæìÂá∫ËøêÁÆóÁ¨¶Âíå <code>l2norm()</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="n">DenseVector</span><span class="o">&lt;</span><span class="n">Derived</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">vector</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">l2norm</span><span class="p">(</span> <span class="n">DenseVector</span><span class="o">&lt;</span><span class="n">Derived</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">vector</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏§‰∏™ÂáΩÊï∞Â∫îËØ•ÈÄÇÁî®‰∫éÊâÄÊúâ‰ªé <code>DenseVector</code> CRTP Á±ªÊ¥æÁîüÁöÑÁ±ª„ÄÇÂΩìÁÑ∂ÔºåÂÆÉ‰ª¨‰∏çÂ∫îËØ•‰æùËµñ‰∫éÊ¥æÁîüÁ±ªÁöÑÂÖ∑‰ΩìÁ±ªÂûã„ÄÇÂõ†Ê≠§ÔºåËøô‰∏§‰∏™ÂáΩÊï∞ÂøÖÈ°ªÊòØÂáΩÊï∞Ê®°ÊùøÔºö<code>Derived</code> Á±ªÂûãÂøÖÈ°ªË¢´Êé®ÂØºÂá∫Êù•„ÄÇËôΩÁÑ∂Âú®‰∏Ä‰∏™Á∫øÊÄß‰ª£Êï∞Â∫ìÁöÑ‰∏ä‰∏ãÊñá‰∏≠ÔºåËøôÈÄöÂ∏∏‰∏çÊòØÈóÆÈ¢òÔºåÂõ†‰∏∫Âá†‰πéÊâÄÊúâÂäüËÉΩÈÉΩÊòØÁî®Ê®°ÊùøÂÆûÁé∞ÁöÑÔºå‰ΩÜÂú®ÂÖ∂‰ªñ‰∏ä‰∏ãÊñá‰∏≠ÔºåËøôÂèØËÉΩÊòØ‰∏Ä‰∏™ÂæàÂ§ßÁöÑÁº∫ÁÇπ„ÄÇÂ∞ÜÂ§ßÈáè‰ª£Á†ÅËΩ¨Êç¢‰∏∫Ê®°ÊùøÂπ∂Â∞ÜÂÆö‰πâÁßªÂà∞Â§¥Êñá‰ª∂‰∏≠ÔºåÂÆûÈôÖ‰∏äÁâ∫Áâ≤‰∫ÜÊ∫êÊñá‰ª∂ÁöÑÂ∞ÅË£ÖÊÄß„ÄÇÊòØÁöÑÔºåËøôÂèØËÉΩÁ°ÆÂÆûÊòØ‰∏Ä‰∏™‰∏•ÈáçÁöÑÁº∫ÁÇπÔºÅ</p>
<p>Á¨¨‰∏âÔºåCRTP ÊòØ‰∏ÄÁßç‰æµÂÖ•ÂºèËÆæËÆ°Ê®°Âºè„ÄÇÊ¥æÁîüÁ±ªÂøÖÈ°ªÈÄöËøáÁªßÊâøËá™ CRTP Âü∫Á±ªÊù•ÊòéÁ°ÆÈÄâÊã©Âä†ÂÖ•„ÄÇËôΩÁÑ∂Âú®Êàë‰ª¨Ëá™Â∑±ÁöÑ‰ª£Á†Å‰∏≠ËøôÂèØËÉΩ‰∏çÊòØÈóÆÈ¢òÔºå‰ΩÜ‰Ω†Êó†Ê≥ïËΩªÊòìÂú∞‰∏∫Â§ñÈÉ®‰ª£Á†ÅÊ∑ªÂä†Âü∫Á±ª„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÂøÖÈ°ªÊ±ÇÂä©‰∫éÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÔºàËßÅ‚ÄúÊåáÂçó 24Ôºö‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£‚ÄùÔºâ„ÄÇÂõ†Ê≠§ÔºåCRTP ‰∏çÊèê‰æõÈùû‰æµÂÖ•ÂºèËÆæËÆ°Ê®°ÂºèÁöÑÁÅµÊ¥ªÊÄßÔºà‰æãÂ¶ÇÔºå‰ΩøÁî® <code>std::variant</code> ÂÆûÁé∞ÁöÑËÆøÈóÆËÄÖËÆæËÆ°Ê®°Âºè„ÄÅÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÁ≠âÔºâ„ÄÇ</p>
<p>ÊúÄÂêé‰ΩÜÂπ∂ÈùûÊúÄ‰∏çÈáçË¶ÅÁöÑ‰∏ÄÁÇπÊòØÔºåCRTP ‰∏çÊèê‰æõËøêË°åÊó∂Â§öÊÄÅÊÄßÔºåÂè™Êèê‰æõÁºñËØëÊó∂Â§öÊÄÅÊÄß„ÄÇÂõ†Ê≠§ÔºåÂè™ÊúâÂú®ÈúÄË¶ÅÊüêÁßçÈùôÊÄÅÁ±ªÂûãÊäΩË±°ÁöÑÊÉÖÂÜµ‰∏ãÔºåËøôÁßçÊ®°ÂºèÊâçÊúâÊÑè‰πâ„ÄÇÂ¶ÇÊûú‰∏çÊòØËøôÊ†∑ÔºåÂÆÉ‰πü‰∏çÊòØÊâÄÊúâÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÁöÑÊõø‰ª£ÂìÅ„ÄÇ</p>
<p><strong>CRTP ÁöÑÊú™Êù•ÔºöCRTP ‰∏é C++20 Ê¶ÇÂøµÁöÑÊØîËæÉ</strong></p>
<p>‚ÄúÊàëÊòéÁôΩ‰∫ÜÔºå‰Ω†ÊòØÂØπÁöÑ„ÄÇCRTP ÊòØÁ∫ØÁ≤πÁöÑÁºñËØëÊó∂Â§öÊÄÅÊÄß„ÄÇÁÑ∂ËÄåÔºåËøôËÆ©ÊàëÊÄùËÄÉÔºöÊàë‰ª¨ËÉΩÂê¶Âü∫‰∫é C++20 Ê¶ÇÂøµËÄå‰∏çÊòØ CRTP Êù•ÊûÑÂª∫ÔºüËÄÉËôë‰ª•‰∏ã‰ª£Á†Å„ÄÇÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Ê¶ÇÂøµÊù•ÂÆö‰πâ‰∏ÄÁªÑÁ±ªÂûãÁöÑÊé•Âè£Ë¶ÅÊ±ÇÔºåÂπ∂Â∞ÜÂáΩÊï∞ÂíåËøêÁÆóÁ¨¶ÈôêÂà∂‰∏∫‰ªÖÈÇ£‰∫õÊèê‰æõÈ¢ÑÊúüÊé•Âè£ÁöÑÁ±ªÂûãÔºö‚Äù</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">concept</span> <span class="n">DenseVector</span> <span class="o">=</span> 
</span></span><span class="line"><span class="cl">   <span class="k">requires</span> <span class="p">(</span> <span class="n">T</span> <span class="n">t</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">t</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">      <span class="n">t</span><span class="p">[</span><span class="n">index</span><span class="p">];</span> 
</span></span><span class="line"><span class="cl">      <span class="p">{</span> <span class="n">t</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="p">}</span> <span class="o">-&gt;</span> <span class="n">std</span><span class="o">::</span><span class="n">same_as</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">::</span><span class="n">iterator</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">      <span class="p">{</span> <span class="n">t</span><span class="p">.</span><span class="n">end</span><span class="p">()</span> <span class="p">}</span> <span class="o">-&gt;</span> <span class="n">std</span><span class="o">::</span><span class="n">same_as</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">::</span><span class="n">iterator</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="p">}</span> <span class="o">&amp;&amp;</span> 
</span></span><span class="line"><span class="cl">   <span class="k">requires</span> <span class="p">(</span> <span class="n">T</span> <span class="k">const</span> <span class="n">t</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">index</span> <span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">t</span><span class="p">[</span><span class="n">index</span><span class="p">];</span> 
</span></span><span class="line"><span class="cl">      <span class="p">{</span> <span class="n">t</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="p">}</span> <span class="o">-&gt;</span> <span class="n">std</span><span class="o">::</span><span class="n">same_as</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">::</span><span class="n">const_iterator</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">      <span class="p">{</span> <span class="n">t</span><span class="p">.</span><span class="n">end</span><span class="p">()</span> <span class="p">}</span> <span class="o">-&gt;</span> <span class="n">std</span><span class="o">::</span><span class="n">same_as</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">::</span><span class="n">const_iterator</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">   <span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="n">DenseVector</span> <span class="n">VectorT</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="n">VectorT</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">vector</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">   <span class="c1">// ... Â¶Ç‰πãÂâç‰∏ÄÊ†∑ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰Ω†ÂÆåÂÖ®Ê≠£Á°Æ„ÄÇÊàëÂêåÊÑèÔºåËøôÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÂêàÁêÜÁöÑÊõø‰ª£ÊñπÊ°à„ÄÇÂÆûÈôÖ‰∏äÔºåC++20 Ê¶ÇÂøµ‰∏é CRTP ÈùûÂ∏∏Áõ∏‰ººÔºå‰ΩÜÊèê‰æõ‰∫ÜÊõ¥ÁÆÄÂçï„ÄÅÈùû‰æµÂÖ•ÂºèÁöÑÊõø‰ª£ÊñπÊ≥ï„ÄÇÁâπÂà´ÊòØÁî±‰∫éÂÖ∂Èùû‰æµÂÖ•ÊÄßÔºåÂ¶ÇÊûú‰Ω†ÂèØ‰ª•‰ΩøÁî® C++20 Ê¶ÇÂøµÂπ∂ÂèØ‰ª•ÈÄöËøáÊ¶ÇÂøµÂÆö‰πâÈùôÊÄÅÁ±ªÂûãÈõÜÔºå‰Ω†Â∫îËØ•‰ºòÂÖàÈÄâÊã©Ê¶ÇÂøµËÄå‰∏çÊòØ CRTP„ÄÇ</p>
<p>Â∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÊàëÂØπËøô‰∏™Ëß£ÂÜ≥ÊñπÊ°àÂπ∂‰∏çÂÆåÂÖ®Êª°ÊÑè„ÄÇËôΩÁÑ∂ËøôÁßçÂΩ¢ÂºèÁöÑËæìÂá∫ËøêÁÆóÁ¨¶ÊúâÊïàÂú∞Â∞ÜÂáΩÊï∞Ê®°ÊùøÈôêÂà∂‰∏∫‰ªÖÈÇ£‰∫õÊèê‰æõÈ¢ÑÊúüÊé•Âè£ÁöÑÁ±ªÂûãÔºå‰ΩÜÂÆÉÂπ∂Ê≤°ÊúâÂÆåÂÖ®ÈôêÂà∂ÂáΩÊï∞Ê®°ÊùøÂà∞Êàë‰ª¨ÁöÑÂØÜÈõÜÂêëÈáèÁ±ªÂûãÈõÜ„ÄÇ‰ªçÁÑ∂ÊúâÂèØËÉΩ‰º†ÈÄí <code>std::vector</code> Âíå <code>std::string</code>Ôºà<code>std::string</code> Âú® <code>std</code> ÂëΩÂêçÁ©∫Èó¥‰∏≠Â∑≤ÁªèÊúâ‰∏Ä‰∏™ËæìÂá∫ËøêÁÆóÁ¨¶Ôºâ„ÄÇÂõ†Ê≠§ÔºåËøô‰∏™Ê¶ÇÂøµËøò‰∏çÂ§üÂÖ∑‰Ωì„ÄÇ‰ΩÜÊòØÂ¶ÇÊûú‰Ω†ÈÅáÂà∞ËøôÁßçÊÉÖÂÜµÔºå‰∏çÁî®ÊãÖÂøÉÔºöÊúâ‰∏ÄÁßç‰ΩøÁî®Ê†áÁ≠æÁ±ªÁöÑËß£ÂÜ≥ÊñπÊ°àÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DenseVectorTag</span> <span class="p">{};</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">concept</span> <span class="n">DenseVector</span> <span class="o">=</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ... ÂØÜÈõÜÂêëÈáèÁöÑÊâÄÊúâË¶ÅÊ±ÇÂÆö‰πâÔºàÂ¶ÇÂâçÔºâ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&amp;&amp;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_base_of_v</span><span class="o">&lt;</span><span class="n">DenseVectorTag</span><span class="p">,</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DynamicVector</span> <span class="o">:</span> <span class="k">private</span> <span class="n">DenseVectorTag</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøá‰ªé <code>DenseVectorTag</code> Á±ªÔºàÊúÄÂ•ΩÊòØÁßÅÊúâÁªßÊâøÔºâÊ¥æÁîüÔºåÂÉè <code>DynamicVector</code> ËøôÊ†∑ÁöÑÁ±ªÂèØ‰ª•Ê†áËØÜ‰∏∫Â±û‰∫éÊüê‰∏™ÁâπÂÆöÁ±ªÂûãÁöÑÈõÜÂêà„ÄÇÂõ†Ê≠§ÔºåÂáΩÊï∞ÂíåËøêÁÆóÁ¨¶Ê®°ÊùøÂèØ‰ª•ÊúâÊïàÂú∞ÈôêÂà∂‰∏∫‰ªÖÊé•ÂèóÈÇ£‰∫õÊòéÁ°ÆÈÄâÊã©Âä†ÂÖ•Á±ªÂûãÈõÜÂêàÁöÑÁ±ªÂûã„ÄÇ</p>
<p>‰∏çÂπ∏ÁöÑÊòØÔºåËøôÈáåÊúâ‰∏™ÈóÆÈ¢òÔºöËøôÁßçÊñπÊ≥ï‰∏çÂÜçÊòØÈùû‰æµÂÖ•ÂºèÁöÑ„ÄÇ‰∏∫‰∫ÜÂÖãÊúçËøô‰∏ÄÈôêÂà∂ÔºåÊàë‰ª¨ÂºïÂÖ•‰∫Ü‰∏Ä‰∏™ÂèØÂÆöÂà∂ÁöÑÁ±ªÂûãÁâπÂæÅÁ±ªÊù•ËøõË°åÁºñËØëÊó∂Èó¥Êé•Ë∞ÉÁî®„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÊàë‰ª¨Â∫îÁî®Âçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÂπ∂Â∞ÜÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DenseVectorTag</span> <span class="p">{};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">IsDenseVector</span>  
</span></span><span class="line"><span class="cl"><span class="o">:</span> <span class="k">public</span> <span class="n">std</span><span class="o">::</span><span class="n">is_base_of</span><span class="o">&lt;</span><span class="n">DenseVectorTag</span><span class="p">,</span><span class="n">T</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="p">{};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="kt">bool</span> <span class="n">IsDenseVector_v</span> <span class="o">=</span> <span class="n">IsDenseVector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">concept</span> <span class="n">DenseVector</span> <span class="o">=</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ... ÂØÜÈõÜÂêëÈáèÁöÑÊâÄÊúâË¶ÅÊ±ÇÂÆö‰πâÔºàÂ¶ÇÂâçÔºâ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&amp;&amp;</span> <span class="n">IsDenseVector_v</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DynamicVector</span> <span class="o">:</span> <span class="k">private</span> <span class="n">DenseVectorTag</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">Size</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">StaticVector</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">Size</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">IsDenseVector</span><span class="o">&lt;</span> <span class="n">StaticVector</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">Size</span><span class="o">&gt;</span> <span class="o">&gt;</span>   
</span></span><span class="line"><span class="cl"><span class="o">:</span> <span class="k">public</span> <span class="n">std</span><span class="o">::</span><span class="n">true_type</span> 
</span></span><span class="line"><span class="cl"><span class="p">{};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>IsDenseVector</code> Á±ªÊ®°ÊùøÂèäÂÖ∂ÂØπÂ∫îÁöÑÂèòÈáèÊ®°ÊùøÊåáÁ§∫ÁªôÂÆöÁ±ªÂûãÊòØÂê¶Â±û‰∫éÂØÜÈõÜÂêëÈáèÁ±ªÂûãÈõÜ„ÄÇDenseVector Ê¶ÇÂøµ‰∏ç‰ºöÁõ¥Êé•Êü•ËØ¢ÁªôÂÆöÁ±ªÂûãÔºåËÄåÊòØÈÄöËøá <code>IsDenseVector</code> Á±ªÂûãÁâπÂæÅÈó¥Êé•ËØ¢ÈóÆ„ÄÇËøôÊ†∑ÔºåÁ±ªÂèØ‰ª•ÈÄâÊã©ÈÄöËøáÁªßÊâø <code>DenseVectorTag</code> ÊàñÈÄöËøáÈùû‰æµÂÖ•ÂºèÂú∞ÁâπÂåñ <code>IsDenseVector</code> Á±ªÂûãÁâπÂæÅÊù•ÊòéÁ°ÆÈÄâÊã©Âä†ÂÖ•Á±ªÂûãÈõÜÂêà„ÄÇÂú®ËøôÁßçÂΩ¢Âºè‰∏ãÔºåÊ¶ÇÂøµÊñπÊ≥ïÁúüÊ≠£Âèñ‰ª£‰∫ÜÁªèÂÖ∏ÁöÑ CRTP ÊñπÊ≥ï„ÄÇ</p>
<p>ÊÄªÁªìÊù•ËØ¥ÔºåCRTP ÊòØ‰∏ÄÁßçÁî®‰∫éÂÆö‰πâÁõ∏ÂÖ≥Á±ªÂûãÂÆ∂Êóè‰πãÈó¥ÁºñËØëÊó∂ÂÖ≥Á≥ªÁöÑÂá∫Ëâ≤ËÆæËÆ°Ê®°Âºè„ÄÇÊúÄÊúâË∂£ÁöÑÊòØÔºåÂÆÉËß£ÂÜ≥‰∫ÜÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠ÂèØËÉΩÈÅáÂà∞ÁöÑÊâÄÊúâÊÄßËÉΩÈóÆÈ¢ò„ÄÇÁÑ∂ËÄåÔºåCRTP Êúâ‰∏Ä‰∫õÊΩúÂú®ÁöÑÈôêÂà∂ÊÄßÁº∫ÁÇπÔºå‰æãÂ¶ÇÁº∫‰πèÈÄöÁî®Âü∫Á±ª„ÄÅÊ®°Êùø‰ª£Á†ÅÁöÑÂø´ÈÄü‰º†Êí≠‰ª•Âèä‰ªÖÈôê‰∫éÁºñËØëÊó∂Â§öÊÄÅÊÄß„ÄÇÂú® C++20 ‰∏≠ÔºåËÄÉËôëÁî®Ê¶ÇÂøµÊõøÊç¢ CRTPÔºåÂõ†‰∏∫Ê¶ÇÂøµÊèê‰æõ‰∫ÜÊõ¥ÁÆÄÂçï‰∏îÈùû‰æµÂÖ•ÂºèÁöÑÊõø‰ª£ÊñπÊ°à„ÄÇÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰Ω†Êó†Ê≥ï‰ΩøÁî® C++20 Ê¶ÇÂøµÂπ∂‰∏î CRTP ÈÄÇÁî®ÔºåÂÆÉÂ∞ÜÂØπ‰Ω†ÈùûÂ∏∏Êúâ‰ª∑ÂÄº„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Â∫îÁî® CRTP ËÆæËÆ°Ê®°Âºè‰∏∫Áõ∏ÂÖ≥Á±ªÂûãÂÆ∂ÊóèÂÆö‰πâÁºñËØëÊó∂ÊäΩË±°„ÄÇ</li>
<li>Ê≥®ÊÑè‰ªé CRTP Âü∫Á±ªÂà∞Ê¥æÁîüÁ±ªÁöÑÊúâÈôêËÆøÈóÆ„ÄÇ</li>
<li>ËÆ∞‰Ωè CRTP ËÆæËÆ°Ê®°ÂºèÁöÑÈôêÂà∂ÔºåÁâπÂà´ÊòØÁº∫‰πèÈÄöÁî®Âü∫Á±ª„ÄÇ</li>
<li>Â∞ΩÂèØËÉΩ‰ºòÂÖàÈÄâÊã© C++20 Ê¶ÇÂøµËÄåÈùû CRTP ËÆæËÆ°Ê®°Âºè„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô27‰ΩøÁî®-crtp-ÂÆûÁé∞ÈùôÊÄÅÊ∑∑ÂÖ•Á±ª">ÂáÜÂàô27Ôºö‰ΩøÁî® CRTP ÂÆûÁé∞ÈùôÊÄÅÊ∑∑ÂÖ•Á±ª
</h3><p>Âú®‚ÄúÂáÜÂàô 26Ôºö‰ΩøÁî® CRTP ÂºïÂÖ•ÈùôÊÄÅÁ±ªÂûãÁ±ªÂà´‚Äù‰∏≠ÔºåÊàëÂêë‰Ω†‰ªãÁªç‰∫Ü CRTP ËÆæËÆ°Ê®°Âºè„ÄÇÊàë‰πüÂèØËÉΩÁªô‰Ω†Áïô‰∏ã‰∫Ü CRTP Â∑≤ÁªèËøáÊó∂ÁöÑÂç∞Ë±°ÔºåË¢´ C++20 Ê¶ÇÂøµÁöÑÂá∫Áé∞ÊâÄÂèñ‰ª£„ÄÇÁÑ∂ËÄåÔºåÊúâË∂£ÁöÑÊòØÔºå‰∫ãÂÆûÂπ∂ÈùûÂ¶ÇÊ≠§„ÄÇËá≥Â∞ë‰∏çÂÆåÂÖ®ÊòØ„ÄÇÈÇ£ÊòØÂõ†‰∏∫ÊàëËøòÊ≤°ÊúâÂëäËØâ‰Ω†ÂÆåÊï¥ÁöÑÊïÖ‰∫ã„ÄÇCRTP ‰ªçÁÑ∂ÂèØËÉΩÊúâ‰ª∑ÂÄºÔºö‰∏çÊòØ‰Ωú‰∏∫ËÆæËÆ°Ê®°ÂºèÔºåËÄåÊòØ‰Ωú‰∏∫ÂÆûÁé∞Ê®°Âºè„ÄÇËÆ©Êàë‰ª¨Á®çÂæÆÂÅèÁ¶ª‰∏Ä‰∏ãÔºåËøõÂÖ•ÂÆûÁé∞Ê®°ÂºèÁöÑÈ¢ÜÂüüÔºåËÆ©ÊàëÊù•Ëß£Èáä„ÄÇ</p>
<p><strong>Âº∫Á±ªÂûãÂä®Êú∫</strong></p>
<p>ËÄÉËôë‰ª•‰∏ã <code>StrongType</code> Á±ªÊ®°ÊùøÔºåÂÆÉË°®Á§∫‰ªª‰ΩïÂÖ∂‰ªñÁ±ªÂûãÁöÑÂåÖË£ÖÂô®ÔºåÁõÆÁöÑÊòØÂàõÂª∫ÂîØ‰∏Ä‰∏îÂëΩÂêçÁöÑÁ±ªÂûãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;StrongType.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Tag</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">StrongType</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">value_type</span> <span class="o">=</span> <span class="n">T</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="nf">StrongType</span><span class="p">(</span> <span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">value</span> <span class="p">)</span> <span class="o">:</span> <span class="n">value_</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span> <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">T</span><span class="o">&amp;</span> <span class="n">get</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">value_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">get</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">value_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">T</span> <span class="n">value_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™Á±ªÂèØ‰ª•Áî®‰∫éÂÆö‰πâÁ±ªÂûãÂ¶Ç <code>Meter</code>„ÄÅ<code>Kilometer</code> Âíå <code>Surname</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Distances.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;StrongType.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Meter</span> <span class="o">=</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">MeterTag</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Kilometer</span> <span class="o">=</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">KilometerTag</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Person.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;StrongType.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Surname</span> <span class="o">=</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">SurnameTag</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩøÁî®Âà´ÂêçÊ®°ÊùøÔºàalias templatesÔºâ‰∏∫ <code>Meter</code> Âíå <code>Kilometer</code> ÂÖÅËÆ∏‰Ω†ÈÄâÊã©‰∏çÂêåÁöÑÁ±ªÂûãÔºà‰æãÂ¶Ç <code>long</code> Êàñ <code>double</code>ÔºâÊù•Ë°®Á§∫Ë∑ùÁ¶ª„ÄÇÂ∞ΩÁÆ°Ëøô‰∫õÁ±ªÂûãÂü∫‰∫éÂü∫Á°ÄÁ±ªÂûãÊàñÊ†áÂáÜÂ∫ìÁ±ªÂûãÔºàÂ¶Ç <code>std::string</code>ÔºâÔºåÂÆÉ‰ª¨‰ª£Ë°®ÂÖ∑ÊúâËØ≠‰πâÊÑè‰πâÁöÑÁã¨ÁâπÁ±ªÂûãÔºàÂº∫Á±ªÂûãÔºâÔºå‰∏çËÉΩÂú®ÁÆóÊúØÊìç‰Ωú‰∏≠ÊÑèÂ§ñÂú∞ÁªÑÂêàÂú®‰∏ÄËµ∑Ôºå‰æãÂ¶ÇÂä†Ê≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Main.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Distances.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="k">const</span> <span class="n">m1</span> <span class="o">=</span> <span class="n">Meter</span><span class="o">&lt;</span><span class="kt">long</span><span class="o">&gt;</span><span class="p">{</span> <span class="mi">120L</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="k">const</span> <span class="n">m2</span> <span class="o">=</span> <span class="n">Meter</span><span class="o">&lt;</span><span class="kt">long</span><span class="o">&gt;</span><span class="p">{</span> <span class="mi">50L</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="k">const</span> <span class="n">km</span> <span class="o">=</span> <span class="n">Kilometer</span><span class="o">&lt;</span><span class="kt">long</span><span class="o">&gt;</span><span class="p">{</span> <span class="mi">30L</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="k">const</span> <span class="n">surname1</span> <span class="o">=</span> <span class="n">Surname</span><span class="p">{</span> <span class="s">&#34;Stroustrup&#34;</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="k">const</span> <span class="n">surname2</span> <span class="o">=</span> <span class="n">Surname</span><span class="p">{</span> <span class="s">&#34;Iglberger&#34;</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê≠£Á°ÆÂú∞‰∏ç‰ºöÁºñËØëÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">m1</span> <span class="o">+</span> <span class="n">km</span><span class="p">;</span>              
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂêåÊ†∑Ê≠£Á°ÆÂú∞‰∏ç‰ºöÁºñËØëÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">surname1</span> <span class="o">+</span> <span class="n">surname2</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰∏çÂπ∏ÁöÑÊòØËøô‰πüÊó†Ê≥ïÁºñËØë„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">m1</span> <span class="o">+</span> <span class="n">m2</span><span class="p">;</span>              
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËôΩÁÑ∂ <code>Meter</code> Âíå <code>Kilometer</code> ÈÉΩÈÄöËøá <code>long</code> Ë°®Á§∫Ôºå‰ΩÜ‰∏çËÉΩÁõ¥Êé•Â∞Ü <code>Meter</code> Âíå <code>Kilometer</code> Áõ∏Âä†„ÄÇËøôÊòØÂæàÂ•ΩÁöÑÔºöÂÆÉ‰∏ç‰ºöÁïô‰∏ã‰ªª‰ΩïÊÑèÂ§ñÂºïÂÖ•ÈîôËØØÁöÑÊºèÊ¥û„ÄÇÂêåÊ†∑‰πü‰∏çËÉΩÂ∞Ü‰∏§‰∏™ <code>Surname</code> Áõ∏Âä†ÔºåÂ∞ΩÁÆ° <code>std::string</code> Êèê‰æõ‰∫ÜÂ≠óÁ¨¶‰∏≤ÊãºÊé•ÁöÑÂä†Ê≥ïËøêÁÆóÁ¨¶„ÄÇËøô‰πüÊòØÂæàÂ•ΩÁöÑÔºöÂº∫Á±ªÂûãÊúâÊïàÂú∞ÈôêÂà∂‰∫ÜÂ∫ïÂ±ÇÁ±ªÂûãÁöÑ‰∏çÊúüÊúõÊìç‰Ωú„ÄÇ</p>
<p>‰∏çÂπ∏ÁöÑÊòØÔºåËøô‰∏Ä‚ÄúÁâπÊÄß‚Äù‰πüÈòªÊ≠¢‰∫Ü‰∏§‰∏™ <code>Meter</code> ÂÆû‰æãÁöÑÁõ∏Âä†„ÄÇÁÑ∂ËÄåÔºåËøôÁßçÊìç‰ΩúÊòØÂèØÂèñÁöÑÔºöÁõ¥ËßÇ„ÄÅËá™ÁÑ∂ÔºåÂπ∂‰∏îÁî±‰∫éÊìç‰ΩúÁöÑÁªìÊûú‰ªçÁÑ∂ÊòØ <code>Meter</code> Á±ªÂûãÔºåÂõ†Ê≠§Áâ©ÁêÜ‰∏ä‰πüÊòØÂáÜÁ°ÆÁöÑ„ÄÇ‰∏∫‰∫ÜÂÆûÁé∞Ëøô‰∏ÄÁÇπÔºåÊàë‰ª¨ÂèØ‰ª•‰∏∫ <code>Meter</code> Á±ªÂûãÂÆûÁé∞‰∏Ä‰∏™Âä†Ê≥ïËøêÁÆóÁ¨¶„ÄÇÁÑ∂ËÄåÔºåÊòæÁÑ∂Ëøô‰∏ç‰ºöÊòØÂîØ‰∏ÄÁöÑÂä†Ê≥ïËøêÁÆóÁ¨¶„ÄÇÊàë‰ª¨ËøòÈúÄË¶Å‰∏∫ÂÖ∂‰ªñÂº∫Á±ªÂûãÔºàÂ¶Ç <code>Kilometer</code>„ÄÅ<code>Mile</code>„ÄÅ<code>Foot</code> Á≠âÔºâÂÆûÁé∞Á±ª‰ººÁöÑËøêÁÆóÁ¨¶„ÄÇÁî±‰∫éÊâÄÊúâËøô‰∫õÂÆûÁé∞ÁúãËµ∑Êù•ÈÉΩ‰∏ÄÊ†∑ÔºåËøôËøùÂèç‰∫Ü DRY ÂéüÂàô„ÄÇÂõ†Ê≠§ÔºåÊâ©Â±ï <code>StrongType</code> Á±ªÊ®°Êùø‰ª•ÂåÖÂê´Âä†Ê≥ïËøêÁÆóÁ¨¶‰ºº‰πéÊòØÂêàÁêÜÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Tag</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">Tag</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">operator</span><span class="o">+</span><span class="p">(</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">Tag</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">Tag</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">Tag</span><span class="o">&gt;</span><span class="p">(</span> <span class="n">a</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">+</span> <span class="n">b</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫éËøô‰∏™Âä†Ê≥ïËøêÁÆóÁ¨¶ÁöÑË°®Ëø∞ÊñπÂºèÔºå‰∏çÂèØËÉΩÂ∞Ü‰∏§‰∏™‰∏çÂêåÁöÑ <code>StrongType</code> ÂÆû‰æãÔºà‰æãÂ¶Ç <code>Meter</code> Âíå <code>Kilometer</code>ÔºâÁõ∏Âä†Ôºå‰ΩÜÂÆÉÂÖÅËÆ∏Áõ∏ÂêåÂÆû‰æãÂåñÁöÑ‰∏§‰∏™ <code>StrongType</code> ÂÆû‰æãÁõ∏Âä†„ÄÇ‚ÄúÂì¶Ôºå‰ΩÜÊàëÁúãÂà∞‰∫Ü‰∏Ä‰∏™ÈóÆÈ¢òÔºöËôΩÁÑ∂Áé∞Âú®ÂèØ‰ª•Â∞Ü‰∏§‰∏™ <code>Meter</code> Êàñ‰∏§‰∏™ <code>Kilometer</code> Áõ∏Âä†Ôºå‰ΩÜ‰πüÂèØ‰ª•Â∞Ü‰∏§‰∏™ <code>Surname</code> Áõ∏Âä†„ÄÇÊàë‰ª¨‰∏çÂ∏åÊúõÈÇ£Ê†∑ÔºÅ‚Äù ‰Ω†ÊòØÂØπÁöÑÔºöËøôÊòØ‰∏çÂ∏åÊúõÁöÑ„ÄÇÊàë‰ª¨ÈúÄË¶ÅÁöÑÊòØÁâπÂÆö <code>StrongType</code> ÂÆû‰æãÂåñ‰∏≠Êìç‰ΩúÁöÑÊúâÊÑèÊ∑ªÂä†„ÄÇËøôÂ∞±ÊòØ CRTP ÂèëÊå•‰ΩúÁî®ÁöÑÂú∞Êñπ„ÄÇ</p>
<p><strong>‰ΩøÁî® CRTP ‰Ωú‰∏∫ÂÆûÁé∞Ê®°Âºè</strong></p>
<p>‰∏éÂÖ∂Áõ¥Êé•‰∏∫ <code>StrongType</code> Á±ªÊ®°ÊùøÈÖçÂ§áÊìç‰ΩúÔºåÊàë‰ª¨ÈÄöËøáÊ∑∑ÂÖ•Á±ªÔºàmixin classesÔºâÊèê‰æõËøô‰∫õÊìç‰ΩúÔºöËøô‰∫õÂü∫Á±ª‚ÄúÊ≥®ÂÖ•‚ÄùÊâÄÈúÄÁöÑÊìç‰Ωú„ÄÇËøô‰∫õÊ∑∑ÂÖ•Á±ªÊòØÈÄöËøá CRTP ÂÆûÁé∞ÁöÑ„ÄÇ‰æãÂ¶ÇÔºåËÄÉËôëË°®Á§∫Âä†Ê≥ïÊìç‰ΩúÁöÑ <code>Addable</code> Á±ªÊ®°ÊùøÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Addable.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Addable</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="n">Derived</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">+=</span><span class="p">(</span> <span class="n">Derived</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Derived</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">rhs</span> <span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">        <span class="n">lhs</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">+=</span> <span class="n">rhs</span><span class="p">.</span><span class="n">get</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">lhs</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="n">Derived</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span> <span class="n">Derived</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Derived</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">rhs</span> <span class="p">)</span> <span class="p">{</span>   
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Derived</span><span class="p">{</span> <span class="n">lhs</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">+</span> <span class="n">rhs</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê®°ÊùøÂèÇÊï∞ÁöÑÂêçÂ≠óÊè≠Á§∫‰∫ÜÂÆÉÁöÑÁî®ÈÄîÔºö<code>Addable</code> ÊòØ‰∏Ä‰∏™ CRTP Âü∫Á±ª„ÄÇ<code>Addable</code> Âè™Êèê‰æõ‰∫Ü‰∏§‰∏™ÂáΩÊï∞Ôºå‰Ωú‰∏∫ÈöêËóèÂèãÂÖÉÂÆûÁé∞ÔºöËµãÂÄºÂä†Ê≥ïËøêÁÆóÁ¨¶ÂíåÂä†Ê≥ïËøêÁÆóÁ¨¶„ÄÇËøô‰∏§‰∏™ËøêÁÆóÁ¨¶ÈÉΩÂÆö‰πâÂú®ÊåáÂÆöÁöÑ <code>Derived</code> Á±ªÂûã‰∏äÔºåÂπ∂Ë¢´Ê≥®ÂÖ•Âà∞Âë®Âõ¥ÁöÑÂëΩÂêçÁ©∫Èó¥‰∏≠„ÄÇÂõ†Ê≠§Ôºå‰ªª‰Ωï‰ªéËøô‰∏™ CRTP Âü∫Á±ªÊ¥æÁîüÁöÑÁ±ªÈÉΩ‰ºö‚ÄúÁªßÊâø‚Äù‰∏§‰∏™Ëá™Áî±Âä†Ê≥ïËøêÁÆóÁ¨¶Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;StrongType.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;stdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Tag</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">StrongType</span> <span class="o">:</span> <span class="k">private</span> <span class="n">Addable</span><span class="o">&lt;</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Distances.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;StrongType.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Meter</span> <span class="o">=</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">MeterTag</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Main.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Distances.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="k">const</span> <span class="n">m1</span> <span class="o">=</span> <span class="n">Meter</span><span class="o">&lt;</span><span class="kt">long</span><span class="o">&gt;</span><span class="p">{</span> <span class="mi">100</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="k">const</span> <span class="n">m2</span> <span class="o">=</span> <span class="n">Meter</span><span class="o">&lt;</span><span class="kt">long</span><span class="o">&gt;</span><span class="p">{</span> <span class="mi">50</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="k">const</span> <span class="n">m3</span> <span class="o">=</span> <span class="n">m1</span> <span class="o">+</span> <span class="n">m2</span><span class="p">;</span>  <span class="c1">// ÁºñËØëÂπ∂ÂæóÂà∞ 150 Á±≥ÁöÑÁªìÊûú 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚ÄúÊàëÁêÜËß£Ê∑∑ÂÖ•Á±ªÁöÑÁõÆÁöÑÔºå‰ΩÜÂú®Ëøô‰∏™ÂΩ¢Âºè‰∏ãÔºåÊâÄÊúâ <code>StrongType</code> ÁöÑÂÆû‰æãÈÉΩ‰ºöÁªßÊâø‰∏Ä‰∏™Âä†Ê≥ïËøêÁÆóÁ¨¶ÔºåÂç≥‰ΩøÊúâ‰∫õÂÆû‰æã‰∏çÈúÄË¶ÅÂä†Ê≥ïÊìç‰ΩúÔºåÂØπÂêßÔºü‚Äù ÊòØÁöÑÔºåÁ°ÆÂÆûÂ¶ÇÊ≠§„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ËøòÊ≤°ÊúâÂÆåÊàê„ÄÇÊàë‰ª¨Â∏åÊúõÁöÑÊòØÊúâÈÄâÊã©Âú∞Â∞ÜÊ∑∑ÂÖ•Á±ªÊ∑ªÂä†Âà∞ÈÇ£‰∫õÈúÄË¶ÅÊìç‰ΩúÁöÑ <code>StrongType</code> ÂÆû‰æã‰∏≠„ÄÇÊàë‰ª¨ÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØÂ∞ÜÊ∑∑ÂÖ•Á±ª‰ª•ÂèØÈÄâÊ®°ÊùøÂèÇÊï∞ÁöÑÂΩ¢ÂºèÊèê‰æõ„ÄÇ‰∏∫Ê≠§ÔºåÊàë‰ª¨Â∞Ü <code>StrongType</code> Á±ªÊ®°ÊùøÊâ©Â±ï‰∏∫Â∏¶ÊúâÂèòÈïøÊ®°ÊùøÊ®°ÊùøÂèÇÊï∞ÂåÖÁöÑÂΩ¢ÂºèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;StrongType.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Tag</span><span class="p">,</span> <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;</span> <span class="k">class</span><span class="err">... </span><span class="nc">Skills</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">StrongType</span> 
</span></span><span class="line"><span class="cl"><span class="o">:</span> <span class="k">private</span> <span class="n">Skills</span><span class="o">&lt;</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">Tag</span><span class="p">,</span><span class="n">Skills</span><span class="p">...</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">...</span>  
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÊâ©Â±ï‰ΩøÊàë‰ª¨ËÉΩÂ§ü‰∏∫ÊØè‰∏™ÂçïÁã¨ÁöÑÂº∫Á±ªÂûãÊåáÂÆöÊâÄÈúÄÁöÑÊäÄËÉΩ„ÄÇ‰æãÂ¶ÇÔºåËÄÉËôëÂè¶Â§ñ‰∏§‰∏™ÊäÄËÉΩ <code>Printable</code> Âíå <code>Swappable</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Printable.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Printable</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">Derived</span><span class="o">&amp;</span> <span class="n">d</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="n">d</span><span class="p">.</span><span class="n">get</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">os</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Swappable.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Derived</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Swappable</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span> <span class="n">Derived</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Derived</span><span class="o">&amp;</span> <span class="n">rhs</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">;</span>  <span class="c1">// ÂêØÁî® ADL 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">swap</span><span class="p">(</span> <span class="n">lhs</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">rhs</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁªìÂêà <code>Addable</code> ÊäÄËÉΩÔºåÊàë‰ª¨Áé∞Âú®ÂèØ‰ª•ÁªÑË£ÖÂÖ∑ÊúâÊâÄÈúÄÊäÄËÉΩÁöÑÂº∫Á±ªÂûãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Distances.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;StrongType.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Meter</span> <span class="o">=</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">MeterTag</span><span class="p">,</span> <span class="n">Addable</span><span class="p">,</span> <span class="n">Printable</span><span class="p">,</span> <span class="n">Swappable</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Kilometer</span> <span class="o">=</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">KilometerTag</span><span class="p">,</span> <span class="n">Addable</span><span class="p">,</span> <span class="n">Printable</span><span class="p">,</span> <span class="n">Swappable</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Person.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;StrongType.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Surname</span> <span class="o">=</span> <span class="n">StrongType</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">SurnameTag</span><span class="p">,</span> <span class="n">Printable</span><span class="p">,</span> <span class="n">Swappable</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>Meter</code> Âíå <code>Kilometer</code> ÈÉΩÂèØ‰ª•ËøõË°åÂä†Ê≥ï„ÄÅÊâìÂç∞Âíå‰∫§Êç¢ÔºåËÄå <code>Surname</code> ÂèØ‰ª•ÊâìÂç∞Âíå‰∫§Êç¢Ôºå‰ΩÜ‰∏çËÉΩÁõ∏Âä†ÔºàÂç≥‰∏çÊé•Êî∂ <code>Addable</code> Ê∑∑ÂÖ•Á±ªÔºåÂõ†Ê≠§‰∏ç‰ªéÂÖ∂Ê¥æÁîüÔºâ„ÄÇ</p>
<p>‚ÄúËøôÂ§™Â•Ω‰∫Ü„ÄÇÊàëÁêÜËß£Âú®ËøôÁßçÊÉÖÂÜµ‰∏ã CRTP Ê∑∑ÂÖ•Á±ªÁöÑÁõÆÁöÑ„ÄÇ‰ΩÜËøô‰∏™ CRTP Á§∫‰æã‰∏é‰πãÂâçÁöÑÁ§∫‰æãÊúâ‰ªÄ‰πà‰∏çÂêåÔºü‚Äù ÂæàÂ•ΩÁöÑÈóÆÈ¢ò„ÄÇ‰Ω†ÈóÆÂæóÂØπÔºåÂÆûÁé∞ÁªÜËäÇÈùûÂ∏∏Áõ∏‰ºº„ÄÇ‰ΩÜÊúâÂá†‰∏™ÊòæËëóÁöÑÂå∫Âà´„ÄÇÊ≥®ÊÑèÔºåCRTP Âü∫Á±ªÊ≤°ÊúâÊèê‰æõËôöÊàñ‰øùÊä§ÊûêÊûÑÂáΩÊï∞„ÄÇÂõ†Ê≠§Ôºå‰∏é‰πãÂâçÁöÑÁ§∫‰æãÁõ∏ÊØîÔºåÂÆÉ‰∏çÊòØËÆæËÆ°‰∏∫Â§öÊÄÅÂü∫Á±ª„ÄÇËøòË¶ÅÊ≥®ÊÑèÔºåÂú®Ëøô‰∏™Á§∫‰æã‰∏≠Ôºå‰ΩøÁî® CRTP Âü∫Á±ª‰Ωú‰∏∫ÁßÅÊúâÂü∫Á±ªÂ∞±Ë∂≥Â§ü‰∫ÜÔºåÁîöËá≥Êõ¥Â•Ω„ÄÇÂõ†Ê≠§ÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåCRTP Âü∫Á±ª‰∏ç‰ª£Ë°®ÊäΩË±°ÔºåËÄåÊòØ‰ªÖ‰Ωú‰∏∫‰∏Ä‰∏™ÂÆûÁé∞ÁªÜËäÇ„ÄÇÂõ†Ê≠§ÔºåCRTP ‰∏çÂÖ∑Â§áËÆæËÆ°Ê®°ÂºèÁöÑÁâπÊÄßÔºå‰πü‰∏çÂÖÖÂΩìËÆæËÆ°Ê®°Âºè„ÄÇÂÆÉ‰ªçÁÑ∂ÊòØ‰∏Ä‰∏™Ê®°ÂºèÔºå‰ΩÜÂú®ËøôÈáåÂè™ÊòØ‰Ωú‰∏∫‰∏Ä‰∏™ÂÆûÁé∞Ê®°Âºè„ÄÇ</p>
<p>CRTP Á§∫‰æãÁöÑ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÊàë‰ª¨Â¶Ç‰Ωï‰ΩøÁî®ÁªßÊâø„ÄÇÂØπ‰∫é CRTP ËÆæËÆ°Ê®°ÂºèÔºåÊàë‰ª¨Ê†πÊçÆ LSP ‰ΩøÁî®ÁªßÊâø‰Ωú‰∏∫ÊäΩË±°ÔºöÂü∫Á±ª‰ª£Ë°®Ê¥æÁîüÁ±ªÁöÑË¶ÅÊ±ÇÔºå‰ª•ÂèäÂèØÁî®ÂíåÈ¢ÑÊúüÁöÑË°å‰∏∫„ÄÇÁî®Êà∑‰ª£Á†ÅÈÄöËøáÊåáÂêëÂü∫Á±ªÁöÑÊåáÈíàÊàñÂºïÁî®Áõ¥Êé•ËÆøÈóÆÊìç‰ΩúÔºåËøôÂèçËøáÊù•Ë¶ÅÊ±ÇÊàë‰ª¨Êèê‰æõËôöÊàñ‰øùÊä§ÊûêÊûÑÂáΩÊï∞„ÄÇÂΩìËøôÊ†∑ÂÆûÁé∞Êó∂ÔºåCRTP Êàê‰∏∫‰∫ÜËΩØ‰ª∂ËÆæËÆ°ÁöÑ‰∏Ä‰∏™ÁúüÊ≠£ÂÖÉÁ¥†‚Äî‚Äî‰∏Ä‰∏™ËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>Áõ∏ÊØî‰πã‰∏ãÔºåÂØπ‰∫é CRTP ÂÆûÁé∞Ê®°ÂºèÔºåÊàë‰ª¨‰ΩøÁî®ÁªßÊâøÊù•ÂÆûÁé∞ÊäÄÊúØ‰∏äÁöÑ‰ºòÈõÖÂíå‰æøÂà©„ÄÇÂü∫Á±ªÊàê‰∏∫ÂÆûÁé∞ÁªÜËäÇÔºå‰∏çÈúÄË¶ÅË¢´Ë∞ÉÁî®‰ª£Á†ÅÁü•ÈÅìÊàñ‰ΩøÁî®„ÄÇÂõ†Ê≠§ÔºåÂÆÉ‰∏çÈúÄË¶ÅËôöÊàñ‰øùÊä§ÊûêÊûÑÂáΩÊï∞„ÄÇÂΩìËøôÊ†∑ÂÆûÁé∞Êó∂ÔºåCRTP ‰øùÊåÅÂú®ÂÆûÁé∞ÁªÜËäÇÂ±ÇÈù¢ÔºåÂõ†Ê≠§ÊòØ‰∏Ä‰∏™ÂÆûÁé∞Ê®°Âºè„ÄÇÁÑ∂ËÄåÔºåÂú®ËøôÁßçÂΩ¢Âºè‰∏ãÔºåCRTP Âπ∂‰∏ç‰∏é C++20 Ê¶ÇÂøµÁ´û‰∫â„ÄÇÁõ∏ÂèçÔºöÂú®ËøôÁßçÂΩ¢Âºè‰∏ãÔºåCRTP ÊòØÊó†ÂèØÊõø‰ª£ÁöÑÔºåÂõ†‰∏∫ÂÆÉ‰ª£Ë°®‰∫Ü‰∏ÄÁßçÊèê‰æõÈùôÊÄÅÊ∑∑ÂÖ•ÂäüËÉΩÁöÑÁã¨ÁâπÊäÄÊúØ„ÄÇÂõ†Ê≠§ÔºåCRTP ‰ªäÂ§©‰ªçÁÑ∂Âú®‰ΩøÁî®ÔºåÂπ∂‰∏îÊòØÊØè‰∏™ C++ ÂºÄÂèëËÄÖÂ∑•ÂÖ∑ÁÆ±‰∏≠ÁöÑÂÆùË¥µË°•ÂÖÖ„ÄÇ</p>
<p>ÊÄªÁªìÊù•ËØ¥ÔºåCRTP Âπ∂Ê≤°ÊúâËøáÊó∂Ôºå‰ΩÜÂÆÉÁöÑ‰ª∑ÂÄºÂ∑≤ÁªèÊîπÂèò„ÄÇÂú® C++20 ‰∏≠ÔºåCRTP Ë¢´Ê¶ÇÂøµÊâÄÂèñ‰ª£ÔºåÂõ†Ê≠§‰∏çÂÜç‰Ωú‰∏∫ËÆæËÆ°Ê®°Âºè„ÄÇÁÑ∂ËÄåÔºåÂÆÉÁªßÁª≠‰Ωú‰∏∫Ê∑∑ÂÖ•Á±ªÁöÑÂÆûÁé∞Ê®°ÂºèÊúâ‰ª∑ÂÄº„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>ËØ∑Ê≥®ÊÑèÂ∞ÜCRTPÁî®‰ΩúËÆæËÆ°Ê®°ÂºèÂíåÂ∞ÜÂÖ∂Áî®‰ΩúÂÆûÁé∞Ê®°Âºè‰πãÈó¥ÁöÑÂå∫Âà´„ÄÇ</li>
<li>Ë¶ÅÁêÜËß£Ë°®Á§∫ÊäΩË±°ÁöÑCRTPÂü∫Á±ªÂÖÖÂΩìËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li>Ë¶Å‰∫ÜËß£Ôºå‰∏çË°®Á§∫ÊäΩË±°ÁöÑCRTPÂü∫Á±ªÂÖÖÂΩìÂÆûÁé∞Ê®°Âºè„ÄÇ</li>
</ul>
<h2 id="Á¨¨‰∏ÉÁ´†-Ê°•Êé•ÂéüÂûãÂíåÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè">Á¨¨‰∏ÉÁ´† Ê°•Êé•„ÄÅÂéüÂûãÂíåÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè
</h2><p>Âú®Êú¨Á´†‰∏≠ÔºåÊàë‰ª¨Â∞Ü‰∏ìÊ≥®‰∫é‰∏§‰∏™ÁªèÂÖ∏ÁöÑ GoFÔºàGang of FourÔºâËÆæËÆ°Ê®°ÂºèÔºöÊ°•Êé•ËÆæËÆ°Ê®°ÂºèÂíåÂéüÂûãËÆæËÆ°Ê®°Âºè„ÄÇÊ≠§Â§ñÔºåÊàë‰ª¨ËøòÂ∞ÜÁ†îÁ©∂Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè„ÄÇ‰πç‰∏ÄÁúãÔºåËøôÁßçÈÄâÊã©ÂèØËÉΩÊòæÂæóÂÉèÊòØ‰∏Ä‰∏™Êù∞Âá∫ÁöÑ„ÄÅÂá†‰πéÈöèÊú∫ÁöÑËÆæËÆ°Ê®°ÂºèÁªÑÂêà„ÄÇÁÑ∂ËÄåÔºåÊàëÈÄâÊã©Ëøô‰∫õÊ®°ÂºèÊúâ‰∏§‰∏™ÂéüÂõ†ÔºöÈ¶ñÂÖàÔºåÊ†πÊçÆÊàëÁöÑÁªèÈ™åÔºåËøô‰∏â‰∏™Ê®°ÂºèÂú®ËÆæËÆ°Ê®°ÂºèÁõÆÂΩï‰∏≠ÊòØÊúÄÊúâÁî®ÁöÑ„ÄÇÂõ†Ê≠§Ôºå‰Ω†Â∫îËØ•ÂØπÂÆÉ‰ª¨ÁöÑÊÑèÂõæ„ÄÅ‰ºòÁÇπÂíåÁº∫ÁÇπÊúâÁõ∏ÂΩìÂ•ΩÁöÑ‰∫ÜËß£„ÄÇÂÖ∂Ê¨°‰∏îÂêåÊ†∑ÈáçË¶ÅÁöÑÊòØÔºöÂÆÉ‰ª¨Âú®Á¨¨ÂÖ´Á´†‰∏≠ÈÉΩÂ∞ÜÂèëÊå•Ëá≥ÂÖ≥ÈáçË¶ÅÁöÑ‰ΩúÁî®„ÄÇ</p>
<p><strong>ÂáÜÂàô 28ÔºöÊûÑÂª∫Ê°•Ê¢Å‰ª•Ê∂àÈô§Áâ©ÁêÜ‰æùËµñ</strong></p>
<p>Âú®Ëøô‰∏ÄÈÉ®ÂàÜÔºåÊàëÂ∞ÜÂêë‰Ω†‰ªãÁªçÊ°•Êé•ËÆæËÆ°Ê®°ÂºèÂèäÂÖ∂ÊúÄÁÆÄÂçïÁöÑÂΩ¢Âºè‚Äî‚ÄîPimpl ÊÉØÁî®Ê≥ï„ÄÇÊúÄÈáçË¶ÅÁöÑÊòØÔºåÊàëÂ∞ÜÂ±ïÁ§∫Â¶Ç‰Ωï‰ΩøÁî®Ê°•Êé•Êù•ÈÄöËøáËß£ËÄ¶Êé•Âè£‰∏éÂÆûÁé∞ÁªÜËäÇÊù•ÂáèÂ∞ëÁâ©ÁêÜËÄ¶Âêà„ÄÇ</p>
<p><strong>ÂáÜÂàô 29ÔºöÊ≥®ÊÑèÊ°•Êé•ÊÄßËÉΩÁöÑÂ¢ûÁõä‰∏éÊçüÂ§±</strong></p>
<p>Âú®Ëøô‰∏ÄÈÉ®ÂàÜÔºåÊàë‰ª¨Â∞ÜÊòéÁ°ÆÂú∞Êé¢ËÆ®Ê°•Êé•ÂØπÊÄßËÉΩÁöÑÂΩ±Âìç„ÄÇÊàë‰ª¨Â∞ÜËøêË°åÂü∫ÂáÜÊµãËØïÔºåÊØîËæÉÊ≤°ÊúâÊ°•Êé•ÁöÑÂÆûÁé∞„ÄÅÂü∫‰∫éÊ°•Êé•ÁöÑÂÆûÁé∞‰ª•Âèä‚ÄúÈÉ®ÂàÜ‚ÄùÊ°•Êé•ÁöÑÂÆûÁé∞„ÄÇ</p>
<p><strong>ÂáÜÂàô 30ÔºöÂ∫îÁî®ÂéüÂûãËøõË°åÊäΩË±°Â§çÂà∂Êìç‰Ωú</strong></p>
<p>Âú®Ëøô‰∏ÄÈÉ®ÂàÜÔºåÊàëÂ∞ÜÂêë‰Ω†‰ªãÁªçÂÖãÈöÜÁöÑËâ∫ÊúØ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÊàë‰ª¨Â∞ÜËÆ®ËÆ∫Â§çÂà∂Êìç‰ΩúÔºåÁâπÂà´ÊòØÊäΩË±°Â§çÂà∂Êìç‰Ωú„ÄÇ‰∏∫Ê≠§ÁõÆÁöÑÔºåÊàë‰ª¨Â∞ÜÈááÁî®ÂéüÂûãËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p><strong>ÂáÜÂàô 31Ôºö‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÂÆûÁé∞Èùû‰æµÂÖ•ÂºèËøêË°åÊó∂Â§öÊÄÅ</strong></p>
<p>Âú®Ëøô‰∏ÄÈÉ®ÂàÜÔºåÊàë‰ª¨Â∞ÜÁªßÁª≠ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÁöÑÊóÖÁ®ãÔºåÈÄöËøá‰ªéÁ±ª‰∏≠ÊèêÂèñÂáΩÊï∞ÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇ‰∏∫‰∫ÜËøõ‰∏ÄÊ≠•ÂáèÂ∞ë‰æùËµñÊÄßÔºåÊàë‰ª¨Â∞ÜËøôÁßçÂàÜÁ¶ªÊèêÂçáÂà∞‰∏Ä‰∏™Êñ∞ÁöÑÊ∞¥Âπ≥Ôºö‰∏ç‰ªÖÊèêÂèñËôöÊãüÂáΩÊï∞ÁöÑÂÆûÁé∞ÁªÜËäÇÔºåËøòÊèêÂèñÊï¥‰∏™ÂáΩÊï∞Êú¨Ë∫´ÔºåËøôÂ∞ÜÈÄöËøáÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÊù•ÂÆûÁé∞„ÄÇ</p>
<h3 id="ÂáÜÂàô-28ÊûÑÂª∫Ê°•Ê¢Å‰ª•Ê∂àÈô§Áâ©ÁêÜ‰æùËµñ">ÂáÜÂàô 28ÔºöÊûÑÂª∫Ê°•Ê¢Å‰ª•Ê∂àÈô§Áâ©ÁêÜ‰æùËµñ
</h3><p>Ê†πÊçÆËØçÂÖ∏ÔºåÊúØËØ≠‚ÄúÊ°•‚ÄùË°®Á§∫Êó∂Èó¥„ÄÅÂú∞ÁÇπÊàñËøûÊé•ÊàñËøáÊ∏°ÁöÑÊñπÂºè„ÄÇÂ¶ÇÊûúÊàëÈóÆ‰Ω†‚ÄúÊ°•‚ÄùËøô‰∏™ËØçÂØπ‰Ω†ÊÑèÂë≥ÁùÄ‰ªÄ‰πàÔºåÊàëÁõ∏‰ø°‰Ω†‰ºöÊúâ‰∏Ä‰∏™Á±ª‰ººÁöÑÂÆö‰πâ„ÄÇ‰Ω†ÂèØËÉΩ‰ºöÈöêÂºèÂú∞ÊÉ≥Âà∞ËøûÊé•‰∏§‰ª∂‰∫ãÁâ©ÔºåÂπ∂Âõ†Ê≠§‰ΩøÂÆÉ‰ª¨Êõ¥Êé•Ëøë„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå‰Ω†ÂèØËÉΩ‰ºöÊÉ≥Âà∞‰∏Ä‰∏™Ë¢´Ê≤≥ÊµÅÂàÜÈöîÁöÑÂüéÂ∏Ç„ÄÇ‰∏ÄÂ∫ßÊ°•‰ºöÂ∞ÜÂüéÂ∏ÇÁöÑ‰∏§ËæπËøûÊé•Ëµ∑Êù•Ôºå‰ΩøÂÆÉ‰ª¨Êõ¥Êé•ËøëÔºåÂπ∂ËäÇÁúÅ‰∫∫‰ª¨ÂæàÂ§öÊó∂Èó¥„ÄÇ</p>
<p>‰Ω†‰πüÂèØËÉΩÊÉ≥Âà∞ÁîµÂ≠êÂ≠¶‰∏≠ÁöÑÊ°•ÔºåÂÆÉËøûÊé•ÁîµË∑ØÁöÑ‰∏§‰∏™Áã¨Á´ãÈÉ®ÂàÜ„ÄÇÈü≥‰πê‰∏≠ÊúâÊ°•ÔºåÁé∞ÂÆû‰∏ñÁïå‰∏≠‰πüÊúâÂæàÂ§ö‰æãÂ≠êÔºåËøô‰∫õÊ°•Â∏ÆÂä©Êàë‰ª¨ËøûÊé•‰∫ãÁâ©„ÄÇ</p>
<p>ÊòØÁöÑÔºåÁõ¥Ëßâ‰∏äÔºå‚ÄúÊ°•‚ÄùËøô‰∏™ËØçÊöóÁ§∫ÁùÄÂ¢ûÂä†Êé•ËøëÂíåÈÇªËøëÊÄß„ÄÇÂõ†Ê≠§ÔºåÊ°•Êé•ËÆæËÆ°Ê®°ÂºèÊÅ∞ÊÅ∞Áõ∏ÂèçÔºöÂÆÉÊîØÊåÅ‰Ω†ÂáèÂ∞ëÁâ©ÁêÜ‰æùËµñÔºåÂπ∂Â∏ÆÂä©Ëß£ËÄ¶ÔºåÂç≥‰øùÊåÅÈúÄË¶Å‰∏ÄËµ∑Â∑•‰ΩúÁöÑ‰∏§‰∏™ÂäüËÉΩÊ®°ÂùóÂú®ÂΩºÊ≠§‰πãÈó¥‰øùÊåÅ‰∏ÄÂÆöË∑ùÁ¶ªÔºå‰ªéËÄå‰∏çÈúÄ‰∫ÜËß£Â§™Â§öÂØπÊñπÁöÑÁªÜËäÇ„ÄÇ</p>
<p><strong>‰∏Ä‰∏™ÊøÄÂä±ÁöÑ‰æãÂ≠ê</strong></p>
<p>‰∏∫‰∫ÜËØ¥ÊòéÊàëÁöÑÊÉ≥Ê≥ïÔºåËÄÉËôë‰ª•‰∏ã <code>ElectricCar</code> Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;ElectricEngine.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">ElectricEngine</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">start</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">stop</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;ElectricCar.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;ElectricEngine.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">ElectricCar</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">ElectricCar</span><span class="p">(</span><span class="cm">/* maybe some engine arguments */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">drive</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">ElectricEngine</span> <span class="n">engine_</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§ö‰∏éÊ±ΩËΩ¶Áõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÊàêÂëòÔºàËΩÆÂ≠ê„ÄÅÈ©±Âä®Á≥ªÁªüÁ≠âÔºâ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;ElectricCar.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;ElectricCar.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="n">ElectricCar</span><span class="o">::</span><span class="n">ElectricCar</span><span class="p">(</span><span class="cm">/* maybe some engine arguments */</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">engine_</span><span class="p">{</span><span class="cm">/* engine arguments */</span><span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂàùÂßãÂåñÂÖ∂‰ªñÊï∞ÊçÆÊàêÂëò 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{}</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>È°æÂêçÊÄù‰πâÔºå<code>ElectricCar</code> Á±ªÈÖçÂ§á‰∫Ü‰∏Ä‰∏™ <code>ElectricEngine</code>„ÄÇÁÑ∂ËÄåÔºåÂ∞ΩÁÆ°Âú®Áé∞ÂÆû‰∏≠ËøôÊ†∑ÁöÑËΩ¶ÂèØËÉΩÈùûÂ∏∏ÊúâÂê∏ÂºïÂäõÔºåÂΩìÂâçÁöÑÂÆûÁé∞ÁªÜËäÇÂç¥‰ª§‰∫∫ÊãÖÂøßÔºöÁî±‰∫é <code>engine_</code> Êï∞ÊçÆÊàêÂëòÁöÑÂ≠òÂú®Ôºå„ÄäElectricCar.h„ÄãÂ§¥Êñá‰ª∂ÈúÄË¶ÅÂåÖÂê´„ÄäElectricEngine.h„ÄãÂ§¥Êñá‰ª∂„ÄÇÁºñËØëÂô®ÈúÄË¶ÅÁúãÂà∞ <code>ElectricEngine</code> ÁöÑÁ±ªÂÆö‰πâÔºåÂõ†‰∏∫Âê¶ÂàôÂÆÉÊó†Ê≥ïÁ°ÆÂÆö <code>ElectricCar</code> ÂÆû‰æãÁöÑÂ§ßÂ∞è„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂåÖÂê´„ÄäElectricEngine.h„ÄãÂ§¥Êñá‰ª∂ÂæàÂÆπÊòìÂØºËá¥‰º†ÈÄíÊÄßÁöÑÁâ©ÁêÜ‰æùËµñÔºöÊØè‰∏™ÂåÖÂê´„ÄäElectricCar.h„ÄãÂ§¥Êñá‰ª∂ÁöÑÊñá‰ª∂ÈÉΩ‰ºöÁâ©ÁêÜ‰∏ä‰æùËµñ‰∫é„ÄäElectricEngine.h„ÄãÂ§¥Êñá‰ª∂„ÄÇÂõ†Ê≠§ÔºåÊØèÂΩìÂ§¥Êñá‰ª∂ÂèëÁîüÊõ¥ÊîπÊó∂Ôºå<code>ElectricCar</code> Á±ª‰ª•ÂèäÊΩúÂú®ÁöÑËÆ∏Â§öÂÖ∂‰ªñÁ±ªÈÉΩ‰ºöÂèóÂà∞ÂΩ±Âìç„ÄÇÂÆÉ‰ª¨ÂèØËÉΩÈúÄË¶ÅÈáçÊñ∞ÁºñËØë„ÄÅÈáçÊñ∞ÊµãËØïÔºåÁîöËá≥Âú®ÊúÄÂùèÁöÑÊÉÖÂÜµ‰∏ãÈáçÊñ∞ÈÉ®ÁΩ≤‚Ä¶‚Ä¶Âîâ„ÄÇ</p>
<p>Ê≠§Â§ñÔºåËøôÁßçËÆæËÆ°Êö¥Èú≤‰∫ÜÊâÄÊúâÂÆûÁé∞ÁªÜËäÇ„ÄÇ‚Äú‰Ω†ÊòØ‰ªÄ‰πàÊÑèÊÄùÔºüÁ±ªÁöÑÁßÅÊúâÈÉ®ÂàÜ‰∏çÊòØÁî®Êù•ÈöêËóèÂíåÂ∞ÅË£ÖÂÆûÁé∞ÁªÜËäÇÁöÑÂêóÔºü‚Äù ÊòØÁöÑÔºåÂÆÉÊòØÁßÅÊúâÁöÑÔºå‰ΩÜ <code>private</code> Ê†áÁ≠æÂè™ÊòØ‰∏Ä‰∏™ËÆøÈóÆÊ†áÁ≠æ„ÄÇÂÆÉ‰∏çÊòØ‰∏Ä‰∏™ÂèØËßÅÊÄßÊ†áÁ≠æ„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå‰Ω†ÁöÑÁ±ªÂÆö‰πâ‰∏≠ÁöÑÊâÄÊúâÂÜÖÂÆπÔºàÊàëÊòØÊåáÊâÄÊúâÂÜÖÂÆπÔºâÂØπÊâÄÊúâËÉΩÁúãÂà∞ <code>ElectricCar</code> Á±ªÂÆö‰πâÁöÑ‰∫∫ÈÉΩÂèØËßÅ„ÄÇËøôÊÑèÂë≥ÁùÄ‰Ω†‰∏çËÉΩÂú®‰∏çË¢´‰∫∫Ê≥®ÊÑèÁöÑÊÉÖÂÜµ‰∏ãÊîπÂèòËøô‰∏™Á±ªÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇÁâπÂà´ÊòØÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊèê‰æõ ABI Á®≥ÂÆöÊÄßÔºåÂç≥‰Ω†ÁöÑÁ±ªÁöÑÂÜÖÂ≠òË°®Á§∫‰∏çËÉΩÊîπÂèòÔºåËøôÂèØËÉΩÊòØ‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p>Á®çÂæÆÂ•Ω‰∏ÄÁÇπÁöÑÊñπÊ≥ïÊòØÂè™Â≠òÂÇ®‰∏Ä‰∏™ÊåáÂêë <code>ElectricEngine</code> ÁöÑÊåáÈíàÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;ElectricCar.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">struct</span> <span class="nc">ElectricEngine</span><span class="p">;</span>  <span class="c1">// ÂâçÂêëÂ£∞Êòé 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">ElectricCar</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">ElectricCar</span><span class="p">(</span><span class="cm">/* maybe some engine arguments */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">drive</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ElectricEngine</span><span class="o">&gt;</span> <span class="n">engine_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§ö‰∏éÊ±ΩËΩ¶Áõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÊàêÂëòÔºàËΩÆÂ≠ê„ÄÅÈ©±Âä®Á≥ªÁªüÁ≠âÔºâ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;ElectricCar.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;ElectricCar.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ElectricEngine.h&gt;</span><span class="cp">   
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="n">ElectricCar</span><span class="o">::</span><span class="n">ElectricCar</span><span class="p">(</span><span class="cm">/* maybe some engine arguments */</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">engine_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ElectricEngine</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/* engine arguments */</span><span class="p">)}</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂàùÂßãÂåñÂÖ∂‰ªñÊï∞ÊçÆÊàêÂëò 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ... ÂÖ∂‰ªñ &#39;ElectricCar&#39; ÊàêÂëòÂáΩÊï∞Ôºå‰ΩøÁî®ÊåáÂêë &#39;ElectricEngine&#39; ÁöÑÊåáÈíà
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂè™ÈúÄË¶ÅÂêëÂâçÂ£∞Êòé <code>ElectricEngine</code> Á±ªÂç≥ÂèØÔºåÂõ†‰∏∫ÁºñËØëÂô®‰∏çÈúÄË¶ÅÁü•ÈÅìÁ±ªÂÆö‰πâÊù•Á°ÆÂÆö <code>ElectricCar</code> ÂÆû‰æãÁöÑÂ§ßÂ∞è„ÄÇ</p>
<p>Ê≠§Â§ñÔºåÁâ©ÁêÜ‰æùËµñ‰πüÊ∂àÂ§±‰∫ÜÔºåÂõ†‰∏∫„ÄäElectricEngine.h„ÄãÂ§¥Êñá‰ª∂Â∑≤ÁªèÁßªÂà∞‰∫ÜÊ∫êÊñá‰ª∂‰∏≠„ÄÇ<br/>Âõ†Ê≠§Ôºå‰ªé‰æùËµñÂÖ≥Á≥ªÁöÑËßíÂ∫¶Êù•ÁúãÔºåËøô‰∏™Ëß£ÂÜ≥ÊñπÊ°àË¶ÅÂ•ΩÂæóÂ§öÔºå‰ªçÁÑ∂Â≠òÂú®ÁöÑÈóÆÈ¢òÊòØÂÆûÁé∞ÁªÜËäÇÁöÑÂèØËßÅÊÄßÔºåÊØè‰∏™‰∫∫‰ªçÁÑ∂ÂèØ‰ª•ÁúãÂà∞ <code>ElectricCar</code> ÊûÑÂª∫Âú® <code>ElectricEngine</code> ‰πã‰∏äÔºåÂõ†Ê≠§ÊØè‰∏™‰∫∫ÈÉΩ‰ªçÁÑ∂ÈöêÂºèÂú∞‰æùËµñ‰∫éËøô‰∫õÂÆûÁé∞ÁªÜËäÇ„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå‰ªª‰ΩïÂØπËøô‰∫õÁªÜËäÇÁöÑÊõ¥ÊîπÔºå‰æãÂ¶ÇÂçáÁ∫ßÂà∞Êñ∞ÁöÑ <code>PowerEngine</code>ÔºåÈÉΩ‰ºöÂΩ±Âìç‰ΩøÁî®„ÄäElectricCar.h„ÄãÂ§¥Êñá‰ª∂ÁöÑÊâÄÊúâÁ±ª„ÄÇ‚ÄúËøôÊòØ‰∏çÂ•ΩÁöÑÔºåÂØπÂêßÔºü‚Äù Á°ÆÂÆûÂ¶ÇÊ≠§ÔºåÂõ†‰∏∫ÂèòÂåñÊòØÂèØ‰ª•È¢ÑÊúüÁöÑÔºàÂèÇËßÅ‚ÄúÊåáÂçó 2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°‚ÄùÔºâ„ÄÇ</p>
<p>‰∏∫‰∫ÜÊëÜËÑ±ËøôÁßç‰æùËµñÂπ∂Ëé∑ÂæóÈöèÊó∂ËΩªÊùæÊõ¥ÊîπÂÆûÁé∞ÁªÜËäÇËÄå‰∏çË¢´‰∫∫Ê≥®ÊÑèÁöÑ‰æøÂà©ÔºåÊàë‰ª¨ÂøÖÈ°ªÂºïÂÖ•ÊäΩË±°„ÄÇÁªèÂÖ∏ÁöÑÊäΩË±°ÂΩ¢ÂºèÊòØÂºïÂÖ•ÊäΩË±°Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Engine.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Engine</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Engine</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">start</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">stop</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§ö‰∏éÂºïÊìéÁõ∏ÂÖ≥ÁöÑÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;ElectricCar.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Engine.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ElectricCar</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">drive</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Engine</span><span class="o">&gt;</span> <span class="n">engine_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§ö‰∏éÊ±ΩËΩ¶Áõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÊàêÂëòÔºàËΩÆÂ≠ê„ÄÅÈ©±Âä®Á≥ªÁªüÁ≠âÔºâ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;ElectricEngine.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Engine.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ElectricEngine</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Engine</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">start</span><span class="p">()</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">stop</span><span class="p">()</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;ElectricCar.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;ElectricCar.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ElectricEngine.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">ElectricCar</span><span class="o">::</span><span class="n">ElectricCar</span><span class="p">(</span><span class="cm">/* maybe some engine arguments */</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">engine_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ElectricEngine</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/* engine arguments */</span><span class="p">)}</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂàùÂßãÂåñÂÖ∂‰ªñÊï∞ÊçÆÊàêÂëò 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ... ÂÖ∂‰ªñ &#39;ElectricCar&#39; ÊàêÂëòÂáΩÊï∞Ôºå‰∏ªË¶Å‰ΩøÁî® &#39;Engine&#39; ÊäΩË±°Ôºå‰ΩÜ‰πüÂèØËÉΩÊòéÁ°ÆÂ§ÑÁêÜ &#39;ElectricEngine&#39;
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Êúâ‰∫Ü <code>Engine</code> Âü∫Á±ªÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ËøôÁßçÊäΩË±°ÂÆûÁé∞ <code>ElectricCar</code> Á±ªÔºåÊ≤°Êúâ‰∫∫ÈúÄË¶ÅÁü•ÈÅìÊàë‰ª¨‰ΩøÁî®ÁöÑÂÆûÈôÖÂºïÊìéÁ±ªÂûã„ÄÇ‰πüÊ≤°Êúâ‰∫∫ÈúÄË¶ÅÁü•ÈÅìÊàë‰ª¨‰ΩïÊó∂ÂçáÁ∫ßÂºïÊìé„ÄÇ</p>
<p>ÈÄöËøáËøôÁßçÂÆûÁé∞ÔºåÊàë‰ª¨ÂèØ‰ª•ÈöèÊó∂ÈÄöËøá‰ªÖ‰øÆÊîπÊ∫êÊñá‰ª∂ËΩªÊùæÊõ¥ÊîπÂÆûÁé∞ÁªÜËäÇ„ÄÇÂõ†Ê≠§ÔºåÈÄöËøáËøôÁßçÊñπÊ≥ïÔºåÊàë‰ª¨ÁúüÊ≠£ÊúÄÂ∞èÂåñ‰∫ÜÂØπ <code>ElectricEngine</code> ÂÆûÁé∞ÁöÑ‰æùËµñ„ÄÇÊàë‰ª¨Â∞ÜËøô‰∏ÄÁªÜËäÇÁöÑÁü•ËØÜÂèòÊàêÊàë‰ª¨ÁöÑÁßòÂØÜÂÆûÁé∞ÁªÜËäÇ„ÄÇÈÄöËøáËøôÊ†∑ÂÅöÔºåÊàë‰ª¨ÊûÑÂª∫‰∫Ü‰∏ÄÂ∫ßÊ°•Ê¢Å„ÄÇ</p>
<p><strong>Ê°•Êé•ËÆæËÆ°Ê®°ÂºèËß£Èáä</strong></p>
<p>Ê°•Êé•ËÆæËÆ°Ê®°ÂºèÊòØ1994Âπ¥Áî±GoFÔºàÂõõ‰∫∫ÁªÑÔºâÂºïÂÖ•ÁöÑÁªèÂÖ∏ËÆæËÆ°Ê®°Âºè‰πã‰∏Ä„ÄÇÊ°•Êé•ÁöÑÁõÆÁöÑÂú®‰∫éÈÄöËøáÂ∞ÜÊüê‰∫õÂÆûÁé∞ÁªÜËäÇÂ∞ÅË£ÖÂú®ÊäΩË±°‰πãÂêéÊù•ÊúÄÂ∞èÂåñÁâ©ÁêÜ‰æùËµñ„ÄÇÂú®C++‰∏≠ÔºåÂÆÉÂÖÖÂΩìÁºñËØëÈò≤ÁÅ´Â¢ôÔºå‰ΩøÊõ¥ÊîπÂèòÂæóÂÆπÊòìÔºö</p>
<p>Âú®Ëøô‰∏™ÊÑèÂõæÁöÑË°®Ëø∞‰∏≠ÔºåÂõõ‰∫∫ÁªÑËÆ®ËÆ∫‰∫Ü‚ÄúÊäΩË±°‚ÄùÂíå‚ÄúÂÆûÁé∞‚Äù„ÄÇÂú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠Ôºå<code>ElectricCar</code> Á±ª‰ª£Ë°®‚ÄúÊäΩË±°‚ÄùÔºåËÄå <code>Engine</code> Á±ª‰ª£Ë°®‚ÄúÂÆûÁé∞‚ÄùÔºàÂèÇËßÅÂõæ7-1Ôºâ„ÄÇ</p>
<p>Ëøô‰∏§ËÄÖÈÉΩÂ∫îËØ•ËÉΩÂ§üÁã¨Á´ãÂèòÂåñÔºåÂç≥ÂØπÂÖ∂‰∏≠‰ªª‰Ωï‰∏Ä‰∏™ÁöÑÊõ¥ÊîπÈÉΩ‰∏çÂ∫îÂΩ±ÂìçÂè¶‰∏Ä‰∏™„ÄÇ</p>
<p>Êòì‰∫éÊõ¥ÊîπÁöÑÈöúÁ¢çÊòØ <code>ElectricCar</code> Á±ª‰∏éÂÖ∂ÂºïÊìé‰πãÈó¥ÁöÑÁâ©ÁêÜ‰æùËµñ„ÄÇÂõ†Ê≠§ÔºåÊÉ≥Ê≥ïÊòØÊèêÂèñÂπ∂ÈöîÁ¶ªËøô‰∫õ‰æùËµñÂÖ≥Á≥ª„ÄÇ</p>
<p>ÈÄöËøá‰ª• <code>Engine</code> ÊäΩË±°ÁöÑÂΩ¢ÂºèÈöîÁ¶ªÂÆÉ‰ª¨ÔºåÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÔºåÂπ∂Êª°Ë∂≥Âçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÔºå‰Ω†ÂèØ‰ª•Ëé∑ÂæóÁÅµÊ¥ªÂú∞Êõ¥Êîπ„ÄÅË∞ÉÊï¥ÊàñÂçáÁ∫ßÂºïÊìéÁöÑÊñπÂºèÔºàÂèÇËßÅ‚ÄúÊåáÂçó 2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°‚ÄùÔºâ„ÄÇ</p>
<p>ËøôÁßçÂèòÂåñ‰∏çÂÜçÂú® <code>ElectricCar</code> Á±ª‰∏≠ÂèØËßÅ„ÄÇÁªìÊûúÊòØÔºåÁé∞Âú®ÂèØ‰ª•ËΩªÊùæÊ∑ªÂä†Êñ∞ÁöÑÂºïÊìéÁ±ªÂûãËÄå‰∏çËÆ©‚ÄúÊäΩË±°‚ÄùÂØüËßâ„ÄÇËøôÁ¨¶ÂêàÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâÁöÑÊÄùÊÉ≥ÔºàÂèÇËßÅ‚ÄúÊåáÂçó 5Ôºö‰∏∫Êâ©Â±ïËÄåËÆæËÆ°‚ÄùÔºâ„ÄÇ</p>
<p>ËôΩÁÑ∂Ëøô‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜËΩªÊùæÂ∫îÁî®Êõ¥ÊîπÁöÑËÉΩÂäõÔºåÂπ∂ÂÆûÁé∞‰∫ÜÊ°•Êé•ÁöÑÊÉ≥Ê≥ïÔºå‰ΩÜÊàë‰ª¨ÂèØ‰ª•ÈááÂèñ‰∏Ä‰∏™È¢ùÂ§ñÁöÑÊ≠•È™§Êù•Ëøõ‰∏ÄÊ≠•Ëß£ËÄ¶ÂíåÂáèÂ∞ëÈáçÂ§ç„ÄÇ</p>
<p>ÂÅáËÆæÊàë‰ª¨‰∏ç‰ªÖÂØπÁîµÂä®Ê±ΩËΩ¶ÊÑüÂÖ¥Ë∂£ÔºåËøòÂØπÂÜÖÁáÉÊú∫Ê±ΩËΩ¶ÊÑüÂÖ¥Ë∂£„ÄÇÂõ†Ê≠§ÔºåÂØπ‰∫éÊØè‰∏ÄÁßçÊàë‰ª¨ËÆ°ÂàíÂÆûÁé∞ÁöÑÊ±ΩËΩ¶Á±ªÂûãÔºåÊàë‰ª¨ÈÉΩÂ∏åÊúõÂºïÂÖ•Áõ∏ÂêåÁöÑ‰∏éÂºïÊìéÁªÜËäÇËß£ËÄ¶ÊñπÂºèÔºåÂç≥Áõ∏ÂêåÁöÑÊ°•Êé•„ÄÇ‰∏∫‰∫ÜÂáèÂ∞ëÈáçÂ§çÂπ∂ÈÅµÂæ™DRYÂéüÂàôÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÊ°•Êé•Áõ∏ÂÖ≥ÁöÑÂÆûÁé∞ÁªÜËäÇÊèêÂèñÂà∞ <code>Car</code> Âü∫Á±ª‰∏≠„ÄÇ<code>Car</code> Âü∫Á±ªÂ∞ÅË£Ö‰∫Ü‰∏éÂÖ≥ËÅî <code>Engine</code> ÁöÑÊ°•Êé•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Car.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Engine.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Car</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Car</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Engine</span><span class="o">&gt;</span> <span class="n">engine</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">pimpl_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">engine</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{}</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Car</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">drive</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§ö‰∏éÊ±ΩËΩ¶Áõ∏ÂÖ≥ÁöÑÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Engine</span><span class="o">*</span> <span class="n">getEngine</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">pimpl_</span><span class="p">.</span><span class="n">get</span><span class="p">();</span> <span class="p">}</span>   
</span></span><span class="line"><span class="cl">    <span class="n">Engine</span> <span class="k">const</span><span class="o">*</span> <span class="nf">getEngine</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">pimpl_</span><span class="p">.</span><span class="n">get</span><span class="p">();</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Engine</span><span class="o">&gt;</span> <span class="n">pimpl_</span><span class="p">;</span>  <span class="c1">// Pointer-to-implementation (pimpl)   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ... Êõ¥Â§ö‰∏éÊ±ΩËΩ¶Áõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÊàêÂëòÔºàËΩÆÂ≠ê„ÄÅÈ©±Âä®Á≥ªÁªüÁ≠âÔºâ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáÊ∑ªÂä† <code>Car</code> Á±ªÔºå‚ÄúÊäΩË±°‚ÄùÂíå‚ÄúÂÆûÁé∞‚ÄùÈÉΩËé∑Âæó‰∫ÜÊòì‰∫éÊâ©Â±ïÁöÑÊú∫‰ºöÔºåÂπ∂‰∏îÂèØ‰ª•Áã¨Á´ãÂèòÂåñ„ÄÇÂ∞ΩÁÆ° <code>Engine</code> Âü∫Á±ª‰ªçÁÑ∂Âú®Ê≠§Ê°•Êé•ÂÖ≥Á≥ª‰∏≠‰ª£Ë°®‚ÄúÂÆûÁé∞‚ÄùÔºå‰ΩÜÁé∞Âú® <code>Car</code> Á±ªÊâÆÊºî‰∫Ü‚ÄúÊäΩË±°‚ÄùÁöÑËßíËâ≤„ÄÇ</p>
<p>ÂÖ≥‰∫é <code>Car</code> Á±ªÁöÑÁ¨¨‰∏Ä‰∏™ÂÄºÂæóÊ≥®ÊÑèÁöÑÁªÜËäÇÊòØÂèó‰øùÊä§ÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇËøô‰∏™ÈÄâÊã©Á°Æ‰øùÂè™ÊúâÊ¥æÁîüÁ±ªÊâçËÉΩÊåáÂÆöÂºïÊìéÁ±ªÂûã„ÄÇ</p>
<p>ÊûÑÈÄ†ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™ÊåáÂêë <code>Engine</code> ÁöÑ <code>std::unique_ptr</code> Âπ∂Â∞ÜÂÖ∂ÁßªÂä®Âà∞ÂÖ∂ <code>pimpl_</code> Êï∞ÊçÆÊàêÂëò„ÄÇËøô‰∏™ÊåáÈíàÊï∞ÊçÆÊàêÂëòÊòØÊâÄÊúâÁ±ªÂûãÁöÑ <code>Car</code> ÁöÑÂçï‰∏ÄÂÆûÁé∞ÊåáÈíàÔºåÈÄöÂ∏∏Áß∞‰∏∫ pimpl„ÄÇ</p>
<p>Ëøô‰∏™‰∏çÈÄèÊòéÊåáÈíàË°®Á§∫Âà∞Â∞ÅË£ÖÁöÑÂÆûÁé∞ÁªÜËäÇÁöÑÊ°•Êé•ÔºåÂπ∂ÂÆûË¥®‰∏ä‰ª£Ë°®‰∫ÜÊï¥‰∏™Ê°•Êé•ËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂú®‰ª£Á†Å‰∏≠‰ΩøÁî®ÂêçÁß∞ <code>pimpl</code> Êù•ÊåáÁ§∫‰Ω†ÁöÑÊÑèÂõæÊòØ‰∏Ä‰∏™Â•Ω‰∏ªÊÑèÔºàËÆ∞‰Ωè‚ÄúÊåáÂçó 14Ôºö‰ΩøÁî®ËÆæËÆ°Ê®°ÂºèÁöÑÂêçÁß∞‰º†ËææÊÑèÂõæ‚ÄùÔºâ„ÄÇ</p>
<p>Ê≥®ÊÑè <code>pimpl_</code> Ë¢´Â£∞ÊòéÂú®Á±ªÁöÑÁßÅÊúâÈÉ®ÂàÜÔºåÂ∞ΩÁÆ°Ê¥æÁîüÁ±ªÈúÄË¶Å‰ΩøÁî®ÂÆÉÔºåËøô‰∏ÄÈÄâÊã©ÊòØÁî±Ê†∏ÂøÉÊåáÂçó C.133 Âä®Êú∫Ôºö ÈÅøÂÖç‰øùÊä§ÁöÑÊï∞ÊçÆÊàêÂëò„ÄÇ ÂÆûÈôÖ‰∏äÔºåÁªèÈ™åË°®ÊòéÔºå‰øùÊä§ÁöÑÊï∞ÊçÆÊàêÂëòÂá†‰πé‰∏çÊØîÂÖ¨ÂÖ±Êï∞ÊçÆÊàêÂëòÊõ¥Â•Ω„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå‰∏∫‰∫ÜÊéà‰∫àËÆøÈóÆ <code>pimpl</code> ÁöÑÊùÉÈôêÔºå<code>Car</code> Á±ªÊèê‰æõ‰∫ÜÂèó‰øùÊä§ÁöÑ <code>getEngine()</code> ÊàêÂëòÂáΩÊï∞„ÄÇ</p>
<p><code>ElectricCar</code> Á±ªÁõ∏Â∫îÂú∞ËøõË°å‰∫ÜË∞ÉÊï¥Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;ElectricCar.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Engine.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ElectricCar</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Car</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">ElectricCar</span><span class="p">(</span><span class="cm">/* maybe some engine arguments */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">drive</span><span class="p">()</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;ElectricCar.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;ElectricCar.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ElectricEngine.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">ElectricCar</span><span class="o">::</span><span class="n">ElectricCar</span><span class="p">(</span><span class="cm">/* maybe some engine arguments */</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">Car</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ElectricEngine</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/* engine arguments */</span><span class="p">))</span>   
</span></span><span class="line"><span class="cl"><span class="p">{}</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËÄå‰∏çÊòØÂÆûÁé∞Ê°•Êé•Êú¨Ë∫´Ôºå<code>ElectricCar</code> Á±ªÁé∞Âú®ÁªßÊâøËá™ <code>Car</code> Âü∫Á±ª„ÄÇËøôÁßçÁªßÊâøÂÖ≥Á≥ªÂºïÂÖ•‰∫ÜÈÄöËøáÊåáÂÆö‰∏Ä‰∏™ <code>Engine</code> ÂàùÂßãÂåñ <code>Car</code> Âü∫Á±ªÁöÑË¶ÅÊ±Ç„ÄÇËøôÈ°π‰ªªÂä°Âú® <code>ElectricCar</code> ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂÆåÊàê„ÄÇ</p>
<p><strong>PimplÊÉØÁî®Ê≥ï</strong></p>
<p>Êúâ‰∏ÄÁßçÊõ¥ÁÆÄÂçïÁöÑÊ°•Êé•ËÆæËÆ°Ê®°ÂºèÂΩ¢ÂºèÔºåÂá†ÂçÅÂπ¥Êù•Âú®CÂíåC++‰∏≠Ë¢´ÂπøÊ≥õÊàêÂäü‰ΩøÁî®„ÄÇ‰∏∫‰∫ÜÁúã‰∏Ä‰∏™‰æãÂ≠êÔºåËÆ©Êàë‰ª¨ËÄÉËôë‰ª•‰∏ãÁöÑ<code>Person</code>Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Person</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">year_of_birth</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§öËÆøÈóÆÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">forename_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">surname_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">address_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">city_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">country_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">zip_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">year_of_birth_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂèØËÉΩËøòÊúâÊõ¥Â§öÁöÑÊï∞ÊçÆÊàêÂëò 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏Ä‰∏™‰∫∫ÂåÖÂê´‰∫ÜËÆ∏Â§öÊï∞ÊçÆÊàêÂëòÔºöÂêçÂ≠ó„ÄÅÂßìÊ∞è„ÄÅÂÆåÊï¥ÁöÑÈÇÆÊîøÂú∞ÂùÄ„ÄÅÂá∫ÁîüÂπ¥‰ªΩÁ≠âÔºåÂπ∂‰∏îÂèØËÉΩÈúÄË¶ÅÂú®Êú™Êù•Ê∑ªÂä†Êõ¥Â§öÊï∞ÊçÆÊàêÂëòÔºåÂ¶ÇÊâãÊú∫Âè∑Á†Å„ÄÅTwitterË¥¶Âè∑Êàñ‰∏ã‰∏Ä‰∏™Á§æ‰∫§Â™í‰ΩìÁÉ≠ÊΩÆÁöÑË¥¶Êà∑‰ø°ÊÅØ„ÄÇ</p>
<p>Êç¢Âè•ËØùËØ¥ÔºåÂèØ‰ª•ÂêàÁêÜÂú∞ËÆ§‰∏∫<code>Person</code>Á±ªÈúÄË¶ÅÈöèÁùÄÊó∂Èó¥Êâ©Â±ïÊàñÊõ¥ÊîπÔºåÁîöËá≥ÂèØËÉΩ‰ºöÈ¢ëÁπÅÊõ¥Êîπ„ÄÇËøôÂèØËÉΩ‰ºöÁªôËØ•Á±ªÁöÑÁî®Êà∑Â∏¶Êù•ÂæàÂ§ö‰∏ç‰æøÔºöÊØèÂΩì<code>Person</code>ÂèëÁîüÂèòÂåñÊó∂Ôºå‰ΩøÁî®<code>Person</code>ÁöÑÁî®Êà∑ÂøÖÈ°ªÈáçÊñ∞ÁºñËØë‰ªñ‰ª¨ÁöÑ‰ª£Á†Å„ÄÇÊõ¥‰∏çÁî®ËØ¥ABIÁ®≥ÂÆöÊÄß‰∫ÜÔºö<code>Person</code>ÂÆû‰æãÁöÑÂ§ßÂ∞è‰ºöÊîπÂèòÔºÅ</p>
<p>‰∏∫‰∫ÜÈöêËóèÊâÄÊúâÂØπ<code>Person</code>ÂÆûÁé∞ÁªÜËäÇÁöÑÊõ¥ÊîπÂπ∂Ëé∑ÂæóABIÁ®≥ÂÆöÊÄßÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®Ê°•Êé•ËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂú®ËøôÁßçÁâπÂÆöÊÉÖÂÜµ‰∏ãÔºå‰∏çÈúÄË¶ÅÊèê‰æõ‰ª•Âü∫Á±ªÂΩ¢ÂºèÁöÑÊäΩË±°ÔºöÂè™Êúâ‰∏Ä‰∏™Âπ∂‰∏îÁ°ÆÂàáÁöÑ<code>Person</code>ÂÆûÁé∞„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÊâÄÂÅöÁöÑÂ∞±ÊòØÂºïÂÖ•‰∏Ä‰∏™Âêç‰∏∫<code>Impl</code>ÁöÑÁßÅÊúâÂµåÂ•óÁ±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Person.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Person</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">Impl</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">pimpl_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Person.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Person.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">struct</span> <span class="nc">Person</span><span class="o">::</span><span class="n">Impl</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">forename</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">surname</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">address</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">city</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">country</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">zip</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">year_of_birth</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂèØËÉΩËøòÊúâÊõ¥Â§öÁöÑÊï∞ÊçÆÊàêÂëò 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂµåÂ•óÁöÑ<code>Impl</code>Á±ªÁöÑ‰ªªÂä°ÊòØÂ∞ÅË£Ö<code>Person</code>ÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇÂõ†Ê≠§Ôºå<code>Person</code>Á±ª‰∏≠ÂîØ‰∏ÄÁöÑÂâ©‰ΩôÊï∞ÊçÆÊàêÂëòÊòØ‰∏Ä‰∏™ÊåáÂêë<code>Impl</code>ÂÆû‰æãÁöÑ<code>std::unique_ptr</code>„ÄÇ</p>
<p>ÂÖ∂‰ªñÊâÄÊúâÊï∞ÊçÆÊàêÂëò‰ª•ÂèäÊΩúÂú®ÁöÑ‰∏Ä‰∫õÈùûËôöËæÖÂä©ÂáΩÊï∞ÈÉΩË¢´ÁßªÂà∞‰∫Ü<code>Impl</code>Á±ª‰∏≠„ÄÇ</p>
<p>ËØ∑Ê≥®ÊÑèÔºå<code>Impl</code>Á±ª‰ªÖÂú®<code>Person</code>Á±ª‰∏≠Â£∞Êòé‰ΩÜÊú™ÂÆö‰πâÔºåÁõ∏ÂèçÔºåÂÆÉÂú®Áõ∏Â∫îÁöÑÊ∫êÊñá‰ª∂‰∏≠ÂÆö‰πâ„ÄÇ</p>
<p>Âè™ÊúâËøôÊ†∑ÔºåÊâÄÊúâÁªÜËäÇÂèäÂÖ∂Êõ¥ÊîπÔºàÂ¶ÇÊ∑ªÂä†ÊàñÂà†Èô§Êï∞ÊçÆÊàêÂëòÔºåÊõ¥ÊîπÊï∞ÊçÆÊàêÂëòÁ±ªÂûãÁ≠âÔºâÊâç‰ºöÂØπ<code>Person</code>ÁöÑÁî®Êà∑ÈöêËóè„ÄÇ</p>
<p>Ëøô‰∏™<code>Person</code>ÁöÑÂÆûÁé∞‰ΩøÁî®‰∫ÜÊ°•Êé•ËÆæËÆ°Ê®°ÂºèÁöÑÊúÄÁÆÄÂçïÂΩ¢ÂºèÔºöËøôÁßçÂ±ÄÈÉ®„ÄÅÈùûÂ§öÊÄÅÂΩ¢ÂºèÁöÑÊ°•Êé•Ë¢´Áß∞‰∏∫PimplÊÉØÁî®Ê≥ï„ÄÇÂÆÉÂ∏¶Êù•‰∫ÜÊ°•Êé•Ê®°ÂºèÁöÑÊâÄÊúâËß£ËÄ¶‰ºòÂäøÔºå‰ΩÜÂ∞ΩÁÆ°ÂÖ∂ÁÆÄÂçïÊÄßÔºå‰ªçÁÑ∂ÂØºËá¥‰∫Ü<code>Person</code>Á±ªÂÆûÁé∞Á®çÂæÆÂ§çÊùÇ‰∏Ä‰∫õÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Person.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1">//#include &lt;memory&gt; 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Person</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Person</span><span class="p">();</span>    
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Person</span><span class="p">();</span>   
</span></span><span class="line"><span class="cl">    <span class="n">Person</span><span class="p">(</span><span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="n">Person</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="n">Person</span><span class="p">(</span><span class="n">Person</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="n">Person</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Person</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">year_of_birth</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§öËÆøÈóÆÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">Impl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">pimpl_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Person.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1">//#include &lt;Person.h&gt; 
</span></span></span><span class="line"><span class="cl"><span class="c1">//#include &lt;string&gt; 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">struct</span> <span class="nc">Person</span><span class="o">::</span><span class="n">Impl</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person</span><span class="o">::</span><span class="n">Person</span><span class="p">()</span>   
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">pimpl_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span><span class="p">()}</span> 
</span></span><span class="line"><span class="cl"><span class="p">{}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person</span><span class="o">::~</span><span class="n">Person</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person</span><span class="o">::</span><span class="n">Person</span><span class="p">(</span><span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">pimpl_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">other</span><span class="p">.</span><span class="n">pimpl_</span><span class="p">)}</span> 
</span></span><span class="line"><span class="cl"><span class="p">{}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person</span><span class="o">&amp;</span> <span class="n">Person</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Person</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="n">pimpl_</span> <span class="o">=</span> <span class="o">*</span><span class="n">other</span><span class="p">.</span><span class="n">pimpl_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person</span><span class="o">::</span><span class="n">Person</span><span class="p">(</span><span class="n">Person</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">pimpl_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="o">*</span><span class="n">other</span><span class="p">.</span><span class="n">pimpl_</span><span class="p">))}</span> 
</span></span><span class="line"><span class="cl"><span class="p">{}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person</span><span class="o">&amp;</span> <span class="n">Person</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Person</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="n">pimpl_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="o">*</span><span class="n">other</span><span class="p">.</span><span class="n">pimpl_</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">Person</span><span class="o">::</span><span class="n">year_of_birth</span><span class="p">()</span> <span class="k">const</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">pimpl_</span><span class="o">-&gt;</span><span class="n">year_of_birth</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ... Êõ¥Â§öPersonÊàêÂëòÂáΩÊï∞ 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>Person</code>ÊûÑÈÄ†ÂáΩÊï∞ÈÄöËøá<code>std::make_unique()</code>ÂàùÂßãÂåñ<code>pimpl_</code>Êï∞ÊçÆÊàêÂëò„ÄÇÂΩìÁÑ∂ÔºåËøôÊ∂âÂèäÂä®ÊÄÅÂÜÖÂ≠òÂàÜÈÖçÔºåËøôÊÑèÂë≥ÁùÄÈúÄË¶ÅÊ∏ÖÁêÜÂä®ÊÄÅÂÜÖÂ≠ò„ÄÇ‚ÄúÊâÄ‰ª•Êàë‰ª¨‰ΩøÁî®<code>std::unique_ptr</code>Ôºå‚Äù‰Ω†ËØ¥„ÄÇÊ≠£Á°Æ„ÄÇ‰ΩÜ‰πüËÆ∏‰ª§‰∫∫ÊÉäËÆ∂ÁöÑÊòØÔºåÂ∞ΩÁÆ°Êàë‰ª¨‰ΩøÁî®<code>std::unique_ptr</code>‰∏∫Ê≠§ÁõÆÁöÑÔºå‰ªçÁÑ∂ÈúÄË¶ÅÊâãÂä®Â§ÑÁêÜÊûêÊûÑÂáΩÊï∞„ÄÇ</p>
<p>‚Äú‰∏∫‰ªÄ‰πàÊàë‰ª¨ÂøÖÈ°ªËøôÊ†∑ÂÅöÔºü<code>std::unique_ptr</code>ÁöÑÁõÆÁöÑ‰∏çÂ∞±ÊòØÊàë‰ª¨‰∏çÂøÖÂ§ÑÁêÜÊ∏ÖÁêÜÂêóÔºü‚Äù ÊòØÁöÑÔºå‰ΩÜÊàë‰ª¨‰ªçÈúÄËøô‰πàÂÅö„ÄÇ</p>
<p>ËÆ©ÊàëËß£Èáä‰∏Ä‰∏ãÔºöÂ¶ÇÊûú‰Ω†‰∏çÁºñÂÜôÊûêÊûÑÂáΩÊï∞ÔºåÁºñËØëÂô®‰ºö‰∏∫‰Ω†ÁîüÊàê‰∏Ä‰∏™ÊûêÊûÑÂáΩÊï∞„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÂÆÉ‰ºöÂú®<code>&lt;Person.h&gt;</code>Â§¥Êñá‰ª∂‰∏≠ÁîüÊàêÊûêÊûÑÂáΩÊï∞„ÄÇ<code>Person</code>ÁöÑÊûêÊûÑÂáΩÊï∞Â∞ÜËß¶Âèë<code>std::unique_ptr</code>Êï∞ÊçÆÊàêÂëòÊûêÊûÑÂáΩÊï∞ÁöÑÂÆû‰æãÂåñÔºåËøôÂèçËøáÊù•ÂèàÈúÄË¶Å<code>Impl</code>Á±ªÊûêÊûÑÂáΩÊï∞ÁöÑÂÆö‰πâ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºå<code>Impl</code>ÁöÑÂÆö‰πâ‰∏çÂú®Â§¥Êñá‰ª∂‰∏≠ÔºåËÄåÊòØÂú®Ê∫êÊñá‰ª∂‰∏≠ÂÆö‰πâÔºåÂê¶ÂàôÔºåÂÆÉ‰ºöËøùËÉåÊ°•Êé•ÁöÑÁõÆÁöÑ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÁºñËØëÂô®‰ºöÂèëÂá∫ÂÖ≥‰∫é‰∏çÂÆåÊï¥Á±ªÂûã<code>Impl</code>ÁöÑÈîôËØØ„ÄÇÂπ∏ËøêÁöÑÊòØÔºå‰Ω†‰∏çÂøÖÊîæÂºÉ<code>std::unique_ptr</code>Êù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºà‰∫ãÂÆû‰∏ä‰Ω†‰∏çÂ∫îËØ•ÊîæÂºÉÔºâ„ÄÇÈóÆÈ¢òÁõ∏ÂΩìÁÆÄÂçïÔºöÂè™ÈúÄÂ∞Ü<code>Person</code>ÊûêÊûÑÂáΩÊï∞ÁöÑÂÆö‰πâÁßªÂà∞Ê∫êÊñá‰ª∂‰∏≠Âç≥ÂèØÔºöÂú®Á±ªÂÆö‰πâ‰∏≠Â£∞ÊòéÊûêÊûÑÂáΩÊï∞Âπ∂Âú®Ê∫êÊñá‰ª∂‰∏≠ÈÄöËøá<code>=default</code>ÂÆö‰πâÂÆÉ„ÄÇ</p>
<p>Áî±‰∫é<code>std::unique_ptr</code>‰∏çËÉΩË¢´Â§çÂà∂Ôºå‰Ω†ÂøÖÈ°ªÂÆûÁé∞Êã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞‰ª•‰øùÊåÅ<code>Person</code>Á±ªÁöÑÊã∑Ë¥ùËØ≠‰πâ„ÄÇ</p>
<p>ÂêåÊ†∑ÁöÑÈÅìÁêÜ‰πüÈÄÇÁî®‰∫éÊã∑Ë¥ùËµãÂÄºËøêÁÆóÁ¨¶ÔºåËØ∑Ê≥®ÊÑèÔºåÊ≠§ËøêÁÆóÁ¨¶ÂÅáËÆæÊØè‰∏™<code>Person</code>ÂÆû‰æãÈÉΩÂ∞ÜÊúâ‰∏Ä‰∏™ÊúâÊïàÁöÑ<code>pimpl_</code>„ÄÇËøô‰∏ÄÂÅáËÆæËß£Èáä‰∫ÜÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂÆûÁé∞ÔºöËÄå‰∏çÊòØÁÆÄÂçïÂú∞ÁßªÂä®<code>std::unique_ptr</code>ÔºåÂÆÉÊâßË°åÂèØËÉΩÂ§±Ë¥•ÊàñÊäõÂá∫ÂºÇÂ∏∏ÁöÑÂä®ÊÄÅÂÜÖÂ≠òÂàÜÈÖç‰∏é<code>std::make_unique()</code>„ÄÇÂõ†Ê≠§ÔºåÂÆÉÊ≤°ÊúâË¢´Â£∞Êòé‰∏∫<code>noexcept</code>„ÄÇ</p>
<p>Ëøô‰∏ÄÂÅáËÆæËøòËß£Èáä‰∫Ü‰∏∫‰ªÄ‰πà<code>pimpl_</code>Êï∞ÊçÆÊàêÂëòË¢´Â£∞Êòé‰∏∫<code>const</code>Ôºå‰∏ÄÊó¶ÂàùÂßãÂåñÔºåÊåáÈíàÂ∞Ü‰∏çÂÜçÊîπÂèòÔºåÂç≥‰ΩøÂú®ÁßªÂä®Êìç‰Ωú‰∏≠‰πüÊòØÂ¶ÇÊ≠§ÔºåÂåÖÊã¨ÁßªÂä®ËµãÂÄºËøêÁÆóÁ¨¶„ÄÇ</p>
<p>ÊúÄÂêé‰∏Ä‰∏™ÂÄºÂæóÊ≥®ÊÑèÁöÑÁªÜËäÇÊòØ<code>year_of_birth()</code>ÊàêÂëòÂáΩÊï∞ÁöÑÂÆö‰πâ‰Ωç‰∫éÊ∫êÊñá‰ª∂‰∏≠„ÄÇÂ∞ΩÁÆ°Ëøô‰∏™ÁÆÄÂçïÁöÑgetterÂáΩÊï∞ÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÂÜÖËÅîÂÄôÈÄâËÄÖÔºå‰ΩÜÊòØÂÆö‰πâ‰ªçÈúÄÁßªÂà∞Ê∫êÊñá‰ª∂‰∏≠„ÄÇ</p>
<p>ÂéüÂõ†ÊòØÂ§¥Êñá‰ª∂‰∏≠ÁöÑ<code>Impl</code>ÊòØ‰∏Ä‰∏™‰∏çÂÆåÂÖ®Á±ªÂûã„ÄÇËøôÊÑèÂë≥ÁùÄÂú®Â§¥Êñá‰ª∂‰∏≠Êó†Ê≥ïËÆøÈóÆ‰ªª‰ΩïÊàêÂëòÔºàÊï∞ÊçÆÂíåÂáΩÊï∞Ôºâ„ÄÇËøôÂè™ËÉΩÂú®Ê∫êÊñá‰ª∂‰∏≠ËøõË°åÔºåÊàñËÄÖÊõ¥Á°ÆÂàáÂú∞ËØ¥ÔºåÂè™Ë¶ÅÁºñËØëÂô®Áü•ÈÅì <code>Impl</code> ÁöÑÂÆö‰πâÔºåËøôÁßçÊÉÖÂÜµÊâçÊúâÂèØËÉΩÂÆûÁé∞„ÄÇ</p>
<p><strong>Ê°•Êé•‰∏éÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑÊØîËæÉ</strong></p>
<p>‚ÄúÊàëÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºå‚Äù‰Ω†ËØ¥Ôºå‚ÄúÊàëÁúãÂà∞Ê°•Êé•ÂíåÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰πãÈó¥ÊúâÂæàÂ§ßÁöÑÁõ∏‰ºº‰πãÂ§Ñ„ÄÇÊàëÁü•ÈÅì‰Ω†ËØ¥ËøáËÆæËÆ°Ê®°ÂºèÊúâÊó∂ÁªìÊûÑ‰∏äÈùûÂ∏∏Áõ∏‰ººÔºåÂîØ‰∏ÄÁöÑÂå∫Âà´Âú®‰∫éÂÆÉ‰ª¨ÁöÑÊÑèÂõæ„ÄÇ‰ΩÜËøô‰∏§ËÄÖ‰πãÈó¥ÁöÑÂÖ∑‰ΩìÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü‚Äù</p>
<p>ÊàëÁêÜËß£‰Ω†ÁöÑÈóÆÈ¢òÔºåËøô‰∏§ÁßçÊ®°Âºè‰πãÈó¥ÁöÑÁõ∏‰ººÊÄßÁ°ÆÂÆûÊúâ‰∫õ‰ª§‰∫∫Âõ∞ÊÉë„ÄÇÁÑ∂ËÄåÔºåÊúâ‰∏Ä‰∫õÊñπÊ≥ïÂèØ‰ª•Â∏ÆÂä©Âå∫ÂàÜÂÆÉ‰ª¨ÔºöÂ¶Ç‰ΩïÂàùÂßãÂåñÁõ∏Â∫îÊï∞ÊçÆÊàêÂëòÊòØ‰∏Ä‰∏™Âº∫ÊúâÂäõÁöÑÊåáÊ†áÔºåË°®Êòé‰Ω†Âú®‰ΩøÁî®Âì™ÁßçÊ®°Âºè„ÄÇ</p>
<p>Â¶ÇÊûú‰∏Ä‰∏™Á±ª‰∏çÊÉ≥Áü•ÈÅìÊüê‰∫õÂÆûÁé∞ÁªÜËäÇÔºåÂπ∂Âõ†Ê≠§Êèê‰æõ‰∫Ü‰ªéÂ§ñÈÉ®‰º†ÈÄíËøô‰∫õÁªÜËäÇÁöÑÊú∫‰ºöÔºà‰æãÂ¶ÇÔºåÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞ÊàñËÆæÁΩÆÂáΩÊï∞ÔºâÔºåÈÇ£‰πà‰Ω†ÂæàÂèØËÉΩÂú®Â§ÑÁêÜÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè„ÄÇÂõ†‰∏∫ÁÅµÊ¥ªÈÖçÁΩÆË°å‰∏∫ÔºàÂç≥ÂáèÂ∞ëÈÄªËæë‰æùËµñÔºâÊòØÂÆÉÁöÑ‰∏ªË¶ÅÂÖ≥Ê≥®ÁÇπÔºåÁ≠ñÁï•Ê®°ÂºèÂ±û‰∫éË°å‰∏∫ËÆæËÆ°Ê®°ÂºèÁ±ªÂà´„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÂú®‰ª•‰∏ã‰ª£Á†ÅÁâáÊÆµ‰∏≠Ôºå<code>Database</code>Á±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞Â∞±ÊòØ‰∏Ä‰∏™ÊòéÊòæÁöÑÊ†áÂøóÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DatabaseEngine</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">DatabaseEngine</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ËÆ∏Â§öÊï∞ÊçÆÂ∫ìÁâπÂÆöÁöÑÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Database</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Database</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DatabaseEngine</span><span class="o">&gt;</span> <span class="n">engine</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ËÆ∏Â§öÊï∞ÊçÆÂ∫ìÁâπÂÆöÁöÑÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DatabaseEngine</span><span class="o">&gt;</span> <span class="n">engine_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Êï∞ÊçÆÂ∫ì‰∏ç‰∫ÜËß£‰ªª‰ΩïÂÆûÁé∞ÁªÜËäÇÔºåÂπ∂ÈÄöËøáÂÖ∂ÊûÑÈÄ†ÂáΩÊï∞‰ªéÂ§ñÈÉ®ËØ∑Ê±Ç -&gt; Á≠ñÁï•ËÆæËÆ°Ê®°Âºè 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Database</span><span class="o">::</span><span class="n">Database</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DatabaseEngine</span><span class="o">&gt;</span> <span class="n">engine</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">engine_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">engine</span><span class="p">)}</span> 
</span></span><span class="line"><span class="cl"><span class="p">{}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆûÈôÖÁöÑ<code>DatabaseEngine</code>Á±ªÂûã‰ªéÂ§ñÈÉ®‰º†ÂÖ•ÔºåËøô‰ΩøÂæóÂÆÉÊàê‰∏∫Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑ‰æãÂ≠ê„ÄÇ</p>
<p>Âè¶‰∏ÄÊñπÈù¢ÔºåÂ¶ÇÊûú‰∏Ä‰∏™Á±ª‰∫ÜËß£ÂÆûÁé∞ÁªÜËäÇÔºå‰ΩÜ‰∏ªË¶ÅÊÉ≥ÂáèÂ∞ëÂØπËøô‰∫õÁªÜËäÇÁöÑÁâ©ÁêÜ‰æùËµñÔºåÂàô‰Ω†ÂæàÂèØËÉΩÂú®Â§ÑÁêÜÊ°•Êé•ËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÁ±ª‰∏ç‰ºöÊèê‰æõ‰ªª‰ΩïÊú∫‰ºö‰ªéÂ§ñÈÉ®ËÆæÁΩÆÊåáÈíàÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÊåáÈíàÊòØ‰∏Ä‰∏™ÂÆûÁé∞ÁªÜËäÇÔºåÂπ∂Âú®ÂÜÖÈÉ®ËÆæÁΩÆ„ÄÇ</p>
<p>Áî±‰∫éÊ°•Êé•ËÆæËÆ°Ê®°Âºè‰∏ªË¶ÅÂÖ≥Ê≥®ÂÆûÁé∞ÁªÜËäÇÁöÑÁâ©ÁêÜ‰æùËµñÔºåËÄå‰∏çÊòØÈÄªËæë‰æùËµñÔºåÂõ†Ê≠§Ê°•Êé•Ê®°ÂºèÂ±û‰∫éÁªìÊûÑÊÄßËÆæËÆ°Ê®°ÂºèÁ±ªÂà´„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåËÄÉËôë‰ª•‰∏ã‰ª£Á†ÅÁâáÊÆµÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Database</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Database</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">DatabaseEngine</span><span class="o">&gt;</span> <span class="n">pimpl_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Êï∞ÊçÆÂ∫ì‰∫ÜËß£ÊâÄÈúÄÁöÑÂÆûÁé∞ÁªÜËäÇÔºå‰ΩÜ‰∏çÊÉ≥Ëøá‰∫é‰æùËµñÂÆÉ -&gt; Ê°•Êé•ËÆæËÆ°Ê®°Âºè 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Database</span><span class="o">::</span><span class="n">Database</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">pimpl_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ConcreteDatabaseEngine</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/* ‰∏Ä‰∫õÂèÇÊï∞ */</span><span class="p">)}</span>  
</span></span><span class="line"><span class="cl"><span class="p">{}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê°•Êé•ËÆæËÆ°Ê®°ÂºèÁöÑÂ∫îÁî®Êúâ‰∏Ä‰∏™ÊòéÊòæÁöÑÊ†áÂøóÔºö‰∏çÊòØÊé•ÂèóÂ§ñÈÉ®ÁöÑ <code>Engine</code> ÔºåËÄåÊòØ<code>Database</code>Á±ªÁöÑÊûÑÈÄ†ÂáΩÊï∞‰∫ÜËß£<code>ConcreteDatabaseEngine</code>Âπ∂ÂÜÖÈÉ®ËÆæÁΩÆÂÆÉ„ÄÇ</p>
<p>Âõæ7-4ÊòæÁ§∫‰∫ÜÊï∞ÊçÆÂ∫ìÁ§∫‰æãÁöÑÊ°•Êé•ÂÆûÁé∞ÁöÑ‰æùËµñÂÖ≥Á≥ªÂõæ„ÄÇÊúÄÈáçË¶ÅÁöÑÊòØÔºå<code>Database</code>Á±ª‰∏é<code>ConcreteDatabaseEngine</code>Á±ªÂ§Ñ‰∫éÁõ∏ÂêåÁöÑÊû∂ÊûÑÁ∫ßÂà´ÔºåÂπ∂‰∏î‰∏çÂÖÅËÆ∏ÂÖ∂‰ªñ‰∫∫Êèê‰æõ‰∏çÂêåÁöÑÂÆûÁé∞„ÄÇËøôË°®Êòé‰∏éÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁõ∏ÊØîÔºåÊ°•Êé•Âú®ÈÄªËæë‰∏äËÄ¶ÂêàÂà∞ÁâπÂÆöÂÆûÁé∞Ôºå‰ΩÜÂú®Áâ©ÁêÜ‰∏ä‰ªÖÈÄöËøá<code>DatabaseEngine</code>ÊäΩË±°Ëß£ËÄ¶„ÄÇ</p>
<p><strong>ÂàÜÊûêÊ°•Êé•ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥</strong></p>
<p>‚ÄúÊàëÂÆåÂÖ®ÁêÜËß£‰∏∫‰ªÄ‰πàÊ°•Êé•ËÆæËÆ°Ê®°ÂºèÂú®Á§æÂå∫‰∏≠Â¶ÇÊ≠§ÂèóÊ¨¢Ëøé„ÄÇÂÆÉÁöÑËß£ËÄ¶ÁâπÊÄßÁúüÁöÑÈùûÂ∏∏Â•ΩÔºÅ‚Äù‰Ω†ÊÑüÂèπÈÅì„ÄÇ‚ÄúÁÑ∂ËÄåÔºå‰Ω†‰∏ÄÁõ¥ÂëäËØâÊàëÊØè‰∏™ËÆæËÆ°ÈÉΩÊúâÂÖ∂‰ºòÁº∫ÁÇπ„ÄÇÊàëÈ¢ÑËÆ°‰ºöÊúâ‰∏Ä‰∫õÊÄßËÉΩÊçüÂ§±Ôºü‚Äù</p>
<p>ÂæàÂ•ΩÔºå‰Ω†ËøòËÆ∞ÂæóÊØè‰∏™ËÆæËÆ°ÈÉΩÊúâÂÖ∂Áº∫ÁÇπ„ÄÇÂΩìÁÑ∂ÔºåËøôÂåÖÊã¨Ê°•Êé•ËÆæËÆ°Ê®°ÂºèÔºåÂ∞ΩÁÆ°ÂÆÉË¢´ËØÅÊòéÊòØÈùûÂ∏∏ÊúâÁî®ÁöÑ„ÄÇÊòØÁöÑÔºå‰Ω†ÁöÑÂÅáËÆæÊòØÊ≠£Á°ÆÁöÑÔºåÁ°ÆÂÆû‰ºöÊúâ‰∏Ä‰∫õÊÄßËÉΩÂºÄÈîÄ„ÄÇ</p>
<p>Ê°•Êé•ËÆæËÆ°Ê®°ÂºèÂ∏¶Êù•ÁöÑ‰∫îÁßçÂºÄÈîÄ‰∏≠ÁöÑÁ¨¨‰∏ÄÁßçÊ∫ê‰∫éËøôÊ†∑‰∏Ä‰∏™‰∫ãÂÆûÔºöÊ°•Êé•ÂºïÂÖ•‰∫ÜÈ¢ùÂ§ñÁöÑÈó¥Êé•Â±ÇÔºö<strong>pimpl</strong> ÊåáÈíà‰ΩøÂæóÊâÄÊúâÂØπÂÆûÁé∞ÁªÜËäÇÁöÑËÆøÈóÆÈÉΩÂèòÂæóÊõ¥Âä†ÊòÇË¥µ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËøô‰∏™ÊåáÈíàÂØºËá¥ÁöÑÊÄßËÉΩÊçüÂ§±ÊúâÂ§öÂ§ßÊòØ‰∏Ä‰∏™ÈúÄË¶ÅÂçïÁã¨ËÆ®ËÆ∫ÁöÑÈóÆÈ¢òÔºàÂèÇËßÅ‚ÄúÊåáÂçó 29ÔºöÊ≥®ÊÑèÊ°•Êé•ÁöÑÊÄßËÉΩÂ¢ûÁõä‰∏éÊçüÂ§±‚ÄùÔºâ„ÄÇ</p>
<p>‰∏çËøáÔºåËøôÂπ∂‰∏çÊòØÊÄßËÉΩÂºÄÈîÄÁöÑÂîØ‰∏ÄÊù•Ê∫êÔºåËøòÊúâÊõ¥Â§ö„ÄÇÂèñÂÜ≥‰∫é‰Ω†ÊòØÂê¶‰ΩøÁî®ÊäΩË±°Ôºå‰Ω†ÂèØËÉΩËøòÈúÄË¶ÅÊîØ‰ªòËôöÂáΩÊï∞Ë∞ÉÁî®ÁöÑÂºÄÈîÄ„ÄÇ</p>
<p>Ê≠§Â§ñÔºåÁî±‰∫éÂç≥‰ΩøÊòØËÆøÈóÆÊï∞ÊçÆÊàêÂëòÁöÑÊúÄÁÆÄÂçïÂáΩÊï∞‰πüÊó†Ê≥ïÂÜÖËÅîÔºå‰Ω†‰πüÈúÄË¶Å‰∏∫Ê≠§ÊîØ‰ªòÊõ¥Â§öÁöÑÊàêÊú¨„ÄÇÂΩìÁÑ∂ÔºåÊØèÂΩìÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂü∫‰∫éÊ°•Êé•ÂÆûÁé∞ÁöÑÁ±ªÂÆû‰æãÊó∂Ôºå‰Ω†ËøòÈúÄË¶Å‰∏∫È¢ùÂ§ñÁöÑÂä®ÊÄÅÂÜÖÂ≠òÂàÜÈÖçÊîØ‰ªòÊàêÊú¨„ÄÇ</p>
<p>ÊúÄÂêé‰ΩÜÂêåÊ†∑ÈáçË¶ÅÁöÑÊòØÔºå‰Ω†ËøòÂ∫îËØ•ËÄÉËôëÂà∞ÂºïÂÖ• <strong>pimpl</strong>  ÊåáÈíàÊâÄÂ∏¶Êù•ÁöÑÂÜÖÂ≠òÂºÄÈîÄ„ÄÇÊâÄ‰ª•ÔºåÊòØÁöÑÔºåÈöîÁ¶ªÁâ©ÁêÜ‰æùËµñÂπ∂ÈöêËóèÂÆûÁé∞ÁªÜËäÇÂπ∂‰∏çÊòØÊ≤°Êúâ‰ª£‰ª∑ÁöÑÔºåËÄåÊòØ‰ºöÂØºËá¥Áõ∏ÂΩìÂ§ßÁöÑÂºÄÈîÄ„ÄÇ</p>
<p>Â∞ΩÁÆ°Â¶ÇÊ≠§ÔºåËøô‰∏çÂ∫îËØ•ÊòØÊôÆÈÅçÊäõÂºÉÊ°•Êé•Ëß£ÂÜ≥ÊñπÊ°àÁöÑÁêÜÁî±ÔºöËøôÊÄªÊòØÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÊÉÖÂÜµ„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûúÂ∫ïÂ±ÇÂÆûÁé∞ÊâßË°åÁºìÊÖ¢„ÄÅÊòÇË¥µÁöÑ‰ªªÂä°ÔºàÂ¶ÇÁ≥ªÁªüË∞ÉÁî®ÔºâÔºåÈÇ£‰πàËøôÁßçÂºÄÈîÄÂèØËÉΩÊ†πÊú¨Êó†Ê≥ïÊµãÈáè„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÊòØÂê¶‰ΩøÁî®Ê°•Êé•Â∫îËØ•Ê†πÊçÆÂÖ∑‰ΩìÊÉÖÂÜµÂÜ≥ÂÆöÔºåÂπ∂ÈÄöËøáÊÄßËÉΩÂü∫ÂáÜÊµãËØïÊù•ÊîØÊåÅ„ÄÇ</p>
<p>Ê≠§Â§ñÔºå‰Ω†Â∑≤ÁªèÁúãÂà∞‰∫ÜÂÆûÁé∞ÁªÜËäÇÂπ∂ÊÑèËØÜÂà∞‰ª£Á†ÅÂ§çÊùÇÊÄßÊúâÊâÄÂ¢ûÂä†„ÄÇÁî±‰∫é‰ª£Á†ÅÁöÑÁÆÄÊ¥ÅÊÄßÂíåÂèØËØªÊÄßÊòØ‰∏ÄÁßçÁæéÂæ∑ÔºåËøôÂ∫îËØ•Ë¢´ËßÜ‰∏∫‰∏Ä‰∏™Áº∫ÁÇπ„ÄÇÁöÑÁ°ÆÔºåËøô‰ªÖÂΩ±ÂìçÁ±ªÁöÑÂÜÖÈÉ®ÂÆûÁé∞ÔºåËÄå‰∏çÂΩ±ÂìçÁî®Êà∑‰ª£Á†Å„ÄÇ‰ΩÜÊòØÔºåÂØπ‰∫éÁªèÈ™åËæÉÂ∞ëÁöÑÂºÄÂèë‰∫∫ÂëòÊù•ËØ¥Ôºå‰∏Ä‰∫õÁªÜËäÇÔºà‰æãÂ¶ÇÈúÄË¶ÅÂú®Ê∫êÊñá‰ª∂‰∏≠ÂÆö‰πâÊûêÊûÑÂáΩÊï∞ÔºâÂèØËÉΩ‰ºö‰ª§‰∫∫Âõ∞ÊÉë„ÄÇ</p>
<p>ÊÄªÁªìÊù•ËØ¥ÔºåÊ°•Êé•ËÆæËÆ°Ê®°ÂºèÊòØÂáèÂ∞ëÁâ©ÁêÜ‰æùËµñÊúÄÊúâ‰ª∑ÂÄºÂíåÊúÄÂ∏∏Áî®ÁöÑËß£ÂÜ≥ÊñπÊ°à‰πã‰∏Ä„ÄÇÂ∞ΩÁÆ°Â¶ÇÊ≠§Ôºå‰Ω†Â∫îËØ•ÊÑèËØÜÂà∞Ê°•Êé•ÂºïÂÖ•ÁöÑÂºÄÈîÄÂíåÂ§çÊùÇÊÄß„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∫õÂÖ∑‰ΩìÁöÑËÄÉËôëÂõ†Á¥†Ôºö</p>
<p><strong>ÊÄßËÉΩÂºÄÈîÄÔºö</strong></p>
<ul>
<li>È¢ùÂ§ñÁöÑÈó¥Êé•Â±ÇÔºàpimplÊåáÈíàÔºâ‰ΩøËÆøÈóÆÂÆûÁé∞ÁªÜËäÇÁöÑÊàêÊú¨Êõ¥È´ò„ÄÇ</li>
<li>‰ΩøÁî®ÊäΩË±°Êó∂ÔºåÂèØËÉΩÈúÄË¶ÅÊîØ‰ªòËôöÂáΩÊï∞Ë∞ÉÁî®ÁöÑÂºÄÈîÄ„ÄÇ</li>
<li>ÁÆÄÂçïÂáΩÊï∞Êó†Ê≥ïÂÜÖËÅîÔºåÂ¢ûÂä†‰∫ÜÊàêÊú¨„ÄÇ</li>
<li>ÂàõÂª∫Êñ∞ÂÆû‰æãÊó∂ÈúÄË¶ÅËøõË°åÈ¢ùÂ§ñÁöÑÂä®ÊÄÅÂÜÖÂ≠òÂàÜÈÖç„ÄÇ</li>
<li>ÂºïÂÖ• pimpl ÊåáÈíàÂ∏¶Êù•‰∫ÜÂÜÖÂ≠òÂºÄÈîÄ„ÄÇ</li>
</ul>
<p><strong>‰ª£Á†ÅÂ§çÊùÇÊÄßÔºö</strong></p>
<ul>
<li>ÂÆûÁé∞ÁªÜËäÇÂèòÂæóÊõ¥‰∏∫Â§çÊùÇÔºåËôΩÁÑ∂ËøôÂØπÁî®Êà∑‰ª£Á†ÅÁöÑÂΩ±ÂìçËæÉÂ∞è„ÄÇ</li>
<li>ÂØπ‰∫éÁªèÈ™åËæÉÂ∞ëÁöÑÂºÄÂèë‰∫∫ÂëòÊù•ËØ¥ÔºåÊüê‰∫õÁªÜËäÇÔºàÂ¶ÇÂú®Ê∫êÊñá‰ª∂‰∏≠ÂÆö‰πâÊûêÊûÑÂáΩÊï∞ÔºâÂèØËÉΩ‰ºöÈÄ†ÊàêÂõ∞ÊÉë„ÄÇ</li>
</ul>
<p>Âõ†Ê≠§ÔºåÂú®ÈÄâÊã©ÊòØÂê¶‰ΩøÁî®Ê°•Êé•ËÆæËÆ°Ê®°ÂºèÊó∂ÔºåÂ∫îÊùÉË°°ÂÖ∂‰ºòÁÇπÂíåÁº∫ÁÇπÔºåÂπ∂Ê†πÊçÆÂÖ∑‰ΩìÈúÄÊ±ÇËøõË°åËØÑ‰º∞„ÄÇ<br/>ÁâπÂà´ÊòØÂú®ÊÄßËÉΩÊïèÊÑüÁöÑÂ∫îÁî®Âú∫ÊôØ‰∏≠ÔºåÂª∫ËÆÆÈÄöËøáÂÆûÈôÖÁöÑÊÄßËÉΩÂü∫ÂáÜÊµãËØïÊù•È™åËØÅÊ°•Êé•ËÆæËÆ°Ê®°ÂºèÁöÑÂÆûÈôÖÊïàÊûú„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Ê≥®ÊÑèÁî±Êï∞ÊçÆÊàêÂëòÊàñÂåÖÊã¨ÂºïÂÖ•ÁöÑÁâ©ÁêÜ‰æùËµñÂÖ≥Á≥ª„ÄÇ</li>
<li>Â∫îÁî®Ê°•Êé•ËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑÊòØÂ∞ÜÁâ©ÁêÜ‰æùËµñ‰∏éÂÆûÁé∞ÁªÜËäÇÈöîÁ¶ªÂºÄÊù•Ôºõ</li>
<li>Âª∫ËÆÆ‰ΩøÁî®pimplÊï∞ÊçÆÊàêÂëòËøõË°åÊ°•Êé•ÈÄö‰ø°„ÄÇ</li>
<li>‰∫ÜËß£Ê°•Êé•ËÆæËÆ°Ê®°ÂºèÁöÑ‰ºòÁÇπÂíåÁº∫ÁÇπ„ÄÇ</li>
<li>‰∫ÜËß£ÂáèÂ∞ëÁâ©ÁêÜ‰æùËµñÔºàÊ°•Êé•ÔºâÂíåÂáèÂ∞ëÈÄªËæë‰æùËµñÔºàÁ≠ñÁï•Ôºâ‰πãÈó¥ÁöÑÂå∫Âà´„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô-29Ê≥®ÊÑèÊ°•Êé•ÁöÑÊÄßËÉΩÂ¢ûÁõä‰∏éÊçüÂ§±">ÂáÜÂàô 29ÔºöÊ≥®ÊÑèÊ°•Êé•ÁöÑÊÄßËÉΩÂ¢ûÁõä‰∏éÊçüÂ§±
</h3><p>Âú®‚ÄúÂáÜÂàô 28ÔºöÊûÑÂª∫Ê°•Ê¢Å‰ª•Ê∂àÈô§Áâ©ÁêÜ‰æùËµñ‚Äù‰∏≠ÔºåÊàë‰ª¨ËØ¶ÁªÜËÆ®ËÆ∫‰∫ÜÊ°•Êé•ËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>ËôΩÁÑ∂ÊàëÊÉ≥Ë±°Ê°•Êé•ÁöÑËÆæËÆ°ÂíåËß£ËÄ¶ÊñπÈù¢Áªô‰Ω†Áïô‰∏ã‰∫ÜÁßØÊûÅÁöÑÂç∞Ë±°Ôºå‰ΩÜÊàëÂøÖÈ°ªËÆ©‰Ω†ÊÑèËØÜÂà∞‰ΩøÁî®ËøôÁßçÊ®°ÂºèÂèØËÉΩ‰ºöÂºïÂÖ•ÊÄßËÉΩÊçüÂ§±„ÄÇ‚ÄúÊòØÁöÑÔºåËøôËÆ©ÊàëÊúâ‰∫õÊãÖÂøÉ„ÄÇÊÄßËÉΩÂØπÊàëÊù•ËØ¥ÂæàÈáçË¶ÅÔºåÂê¨Ëµ∑Êù•Ê°•Êé•‰ºöÂ∏¶Êù•Â∑®Â§ßÁöÑÊÄßËÉΩÂºÄÈîÄÔºå‚Äù‰Ω†ËØ¥„ÄÇ</p>
<p>ËøôÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÊôÆÈÅçÁöÑÈ¢ÑÊúüÔºåÁî±‰∫éÊÄßËÉΩËá≥ÂÖ≥ÈáçË¶ÅÔºåÊàëÁúüÁöÑÂ∫îËØ•Áªô‰Ω†‰∏Ä‰∏™Ê¶ÇÂøµÔºåÂëäËØâ‰Ω†Âú®‰ΩøÁî®Ê°•Êé•Êó∂ÈúÄË¶ÅÈ¢ÑÊúüÂ§öÂ∞ëÂºÄÈîÄ„ÄÇÁÑ∂ËÄåÔºåÊàë‰πüÂ∫îËØ•Â±ïÁ§∫Â¶Ç‰ΩïÊòéÊô∫Âú∞‰ΩøÁî®Ê°•Êé•Êù•ÊèêÈ´ò‰ª£Á†ÅÁöÑÊÄßËÉΩ„ÄÇ</p>
<p>Âê¨Ëµ∑Êù•Èöæ‰ª•ÁΩÆ‰ø°ÔºüËÆ©ÊàëÂêë‰Ω†Â±ïÁ§∫Â¶Ç‰ΩïÂÅöÂà∞Ëøô‰∏ÄÁÇπ„ÄÇ</p>
<p><strong>Ê°•Êé•ÁöÑÊÄßËÉΩÂΩ±Âìç</strong></p>
<p>Ê≠£Â¶ÇÂú®‚ÄúÂáÜÂàô 28ÔºöÊûÑÂª∫Ê°•Ê¢Å‰ª•Ê∂àÈô§Áâ©ÁêÜ‰æùËµñ‚Äù‰∏≠ËÆ®ËÆ∫ÁöÑÈÇ£Ê†∑ÔºåÊ°•Êé•ÂÆûÁé∞ÁöÑÊÄßËÉΩÂèóÂà∞ËÆ∏Â§öÂõ†Á¥†ÁöÑÂΩ±ÂìçÔºöÈÄöËøáÈó¥Êé•Â±ÇËÆøÈóÆ„ÄÅËôöÂáΩÊï∞Ë∞ÉÁî®„ÄÅÂÜÖËÅî„ÄÅÂä®ÊÄÅÂÜÖÂ≠òÂàÜÈÖçÁ≠â„ÄÇ</p>
<p>Áî±‰∫éËøô‰∫õÂõ†Á¥†ÂíåÂèØËÉΩÁöÑÁªÑÂêàÈùûÂ∏∏Â§öÔºåÊó†Ê≥ïÁªôÂá∫Ê°•Êé•‰ºöËÄóË¥πÂ§öÂ∞ëÊÄßËÉΩÁöÑÁ°ÆÂàáÁ≠îÊ°à„ÄÇÊ≤°ÊúâÊç∑ÂæÑÔºå‰πüÊ≤°ÊúâÊõø‰ª£ÊñπÊ≥ïÂèØ‰ª•‰ª£Êõø‰∏∫Ëá™Â∑±ÁöÑ‰ª£Á†ÅÁªÑË£Ö‰∏Ä‰∫õÂü∫ÂáÜÊµãËØïÂπ∂ËøêË°åÂÆÉ‰ª¨‰ª•ÂæóÂá∫Á°ÆÂàáÁ≠îÊ°à„ÄÇ</p>
<p>ÊàëÊÉ≥Â±ïÁ§∫ÁöÑÊòØÔºåÁ°ÆÂÆûÂ≠òÂú®Áî±‰∫éÈó¥Êé•ËÆøÈóÆÊï∞ÊçÆÊàêÂëòËÄåÂ∏¶Êù•ÁöÑÊÄßËÉΩÊçüÂ§±Ôºå‰ΩÜ‰Ω†‰ªçÁÑ∂ÂèØ‰ª•‰ΩøÁî®Ê°•Êé•Êù•ÂÆûÈôÖÊèêÈ´òÊÄßËÉΩ„ÄÇ</p>
<p>ËÆ©Êàë‰ª¨‰ªéÁªô‰Ω†‰∏Ä‰∏™ÂÖ≥‰∫éÂü∫ÂáÜÊµãËØïÁöÑÊ¶ÇÂøµÂºÄÂßãÔºå‰∏∫‰∫ÜÂΩ¢ÊàêÂØπÊåáÈíàÈó¥Êé•Â±ÇÊàêÊú¨ÁöÑÁúãÊ≥ïÔºåÊàë‰ª¨Â∞ÜÊØîËæÉ‰ª•‰∏ã‰∏§Áßç <code>Person</code> Á±ªÁöÑÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Person1.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Person1</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">forename_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">surname_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">address_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">city_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">country_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">zip_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">year_of_birth_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Person1</code> ÁªìÊûÑË°®Á§∫‰∏ÄÁßç‰∏çÂü∫‰∫éÊ°•Êé•ÂÆûÁé∞ÁöÑÁ±ªÂûã„ÄÇÊâÄÊúâ‰∏É‰∏™Êï∞ÊçÆÊàêÂëòÔºàÂÖ≠‰∏™ <code>std::string</code> Âíå‰∏Ä‰∏™ <code>int</code>ÔºâÈÉΩÁõ¥Êé•Â±û‰∫éÁªìÊûÑÊú¨Ë∫´„ÄÇ</p>
<p>ÊÄªÂÖ±ËÄåË®ÄÔºåÂπ∂ÂÅáËÆæÊòØ‰∏Ä‰∏™64‰ΩçÊú∫Âô®Ôºå‰∏Ä‰∏™ <code>Person1</code> ÂÆû‰æãÁöÑÂ§ßÂ∞èÊòØ152Â≠óËäÇÔºàClang 11.1ÔºâÊàñ200Â≠óËäÇÔºàGCC 11.1Ôºâ„ÄÇ</p>
<p>Âè¶‰∏ÄÊñπÈù¢Ôºå<code>Person2</code> ÁªìÊûÑÊòØÈÄöËøáPimplÊÉØÁî®Ê≥ïÂÆûÁé∞ÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Person2.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Person2</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Person2</span><span class="p">(</span><span class="cm">/*...ÂêÑÁßçpersonÂèÇÊï∞...*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Person2</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">Impl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">pimpl_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Person2.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Person2.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">struct</span> <span class="nc">Person2</span><span class="o">::</span><span class="n">Impl</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">forename</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">surname</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">address</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">city</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">country</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">zip</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">year_of_birth</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person2</span><span class="o">::</span><span class="n">Person2</span><span class="p">(</span><span class="cm">/*...ÂêÑÁßçpersonÂèÇÊï∞...*/</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">pimpl_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/*...ÂêÑÁßçpersonÂèÇÊï∞...*/</span><span class="p">)}</span> 
</span></span><span class="line"><span class="cl"><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person2</span><span class="o">::~</span><span class="n">Person2</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâÄÊúâ‰∏É‰∏™Êï∞ÊçÆÊàêÂëòÈÉΩË¢´ÁßªÂà∞ÂµåÂ•óÁöÑ <code>Impl</code> ÁªìÊûÑ‰∏≠ÔºåÂπ∂‰∏îÂè™ËÉΩÈÄöËøá <code>pimpl</code> ÊåáÈíàËÆøÈóÆ„ÄÇ</p>
<p>ËôΩÁÑ∂ÂµåÂ•óÁöÑ <code>Impl</code> ÁªìÊûÑÁöÑÊÄªÂ§ßÂ∞è‰∏é <code>Person1</code> ÁöÑÂ§ßÂ∞èÁõ∏ÂêåÔºå‰ΩÜ <code>Person2</code> ÁªìÊûÑÁöÑÂ§ßÂ∞è‰ªÖ‰∏∫8Â≠óËäÇÔºàÂÜçÊ¨°ÂÅáËÆæÊòØ64‰ΩçÊú∫Âô®Ôºâ„ÄÇ</p>
<p><strong>Ê≥®ÊÑè</strong>ÔºöÈÄöËøáÊ°•Êé•ËÆæËÆ°Ôºå‰Ω†ÂèØ‰ª•ÂáèÂ∞ëÁ±ªÂûãÁöÑÂ§ßÂ∞èÔºåÊúâÊó∂ÁîöËá≥ÊòæËëóÂáèÂ∞ë„ÄÇËøôÂèØ‰ª•ËØÅÊòéÈùûÂ∏∏Êúâ‰ª∑ÂÄºÔºå‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥Â∞ÜËØ•Á±ªÂûã‰Ωú‰∏∫ <code>std::variant</code> ÁöÑÊõø‰ª£ÊñπÊ°àÔºàÂèÇËßÅ‚ÄúÂáÜÂàô 17ÔºöËÄÉËôë‰ΩøÁî® <code>std::variant</code> ÂÆûÁé∞ËÆøÈóÆËÄÖ‚ÄùÔºâ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËÆ©ÊàëÊ¶ÇËø∞‰∏Ä‰∏ãÂü∫ÂáÜÊµãËØïÔºöÊàëÂ∞ÜÂàõÂª∫‰∏§‰∏™ÂåÖÂê´25,000‰∏™‰∫∫ÁöÑ <code>std::vector</code>ÔºåÊØè‰∏™ <code>Person</code> ÂÆûÁé∞‰∏Ä‰∏™„ÄÇ</p>
<p>Ëøô‰∏™Êï∞ÈáèÁöÑÂÖÉÁ¥†Â∞ÜÁ°Æ‰øùÊàë‰ª¨Âú®Â∫ïÂ±ÇCPUÁöÑÂÜÖÈÉ®ÁºìÂ≠ò‰πãÂ§ñÂ∑•‰ΩúÔºàÂç≥ÔºåÊàë‰ª¨Â∞Ü‰ΩøÁî®ÊÄªËÆ°3.2 MBÁöÑÂÜÖÂ≠òÔºåClang 11.1ÔºâÔºåÊàñËÄÖ4.2 MBÔºàGCC 11.1Ôºâ„ÄÇ</p>
<p>ÊâÄÊúâËøô‰∫õ‰∫∫Ë¢´Ëµã‰∫à‰ªªÊÑèÁöÑÂêçÂ≠óÂíåÂú∞ÂùÄÔºå‰ª•Âèä1957Âπ¥Ëá≥2004Âπ¥‰πãÈó¥ÁöÑÂá∫ÁîüÂπ¥‰ªΩÔºàÂú®Êí∞ÂÜôÊú¨ÊñáÊó∂ÔºåËøô‰ª£Ë°®‰∫Ü‰∏Ä‰∏™ÁªÑÁªá‰∏≠ÂëòÂ∑•ÂêàÁêÜÁöÑÂπ¥ÈæÑËåÉÂõ¥Ôºâ„ÄÇ</p>
<p>ÁÑ∂ÂêéÊàë‰ª¨Â∞ÜÈÅçÂéÜËøô‰∏§‰∏™ <code>Person</code> <strong>Vector</strong> ‰∫îÂçÉÊ¨°ÔºåÂπ∂ÊØèÊ¨°‰ΩøÁî® <code>std::min_element()</code> Á°ÆÂÆöÊúÄÂπ¥ÈïøÁöÑ‰∫∫„ÄÇ</p>
<p>ÁªìÊûúÁî±‰∫éÂü∫ÂáÜÊµãËØïÁöÑÈáçÂ§çÊÄßËÄåÁõ∏ÂΩìÊó†Ë∂£Ôºå‰∏ÄÁôæÊ¨°Ëø≠‰ª£ÂêéÔºå‰Ω†‰ºöËßâÂæóÊó†ËÅäÂà∞‰∏çÊÉ≥ÂÜçÁúã„ÄÇ</p>
<p>ÂîØ‰∏ÄÈáçË¶ÅÁöÑÊòØÁúãÂà∞Áõ¥Êé•ËÆøÈóÆÊï∞ÊçÆÊàêÂëòÔºà<code>Person1</code>ÔºâÂíåÈó¥Êé•ËÆøÈóÆÊï∞ÊçÆÊàêÂëòÔºà<code>Person2</code>Ôºâ‰πãÈó¥ÁöÑÊÄßËÉΩÂ∑ÆÂºÇ„ÄÇË°®7-1ÊòæÁ§∫‰∫Ü‰∏çÂêå <code>Person</code> ÂÆûÁé∞ÁöÑÊÄßËÉΩÁªìÊûúÔºåÂΩí‰∏ÄÂåñ‰∏∫ <code>Person1</code> ÂÆûÁé∞ÁöÑÊÄßËÉΩ„ÄÇ</p>
<p>Ë°®7-1 ‰∏çÂêå <code>Person</code> ÂÆûÁé∞ÁöÑÊÄßËÉΩÁªìÊûúÔºàÂΩí‰∏ÄÂåñÊÄßËÉΩÔºâ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th><code>Person</code> ÂÆûÁé∞</th>
<th>GCC 11.1</th>
<th>Clang 11.1</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Person1</code>ÔºàÊó† pimplÔºâ</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr>
<td><code>Person2</code>ÔºàÂÆåÊï¥ Pimpl ÊÉØÁî®Ê≥ïÔºâ</td>
<td>1.1099</td>
<td>1.1312</td>
</tr>
</tbody>
</table></div>
<p>ÂæàÊòéÊòæÔºåÂú®Ëøô‰∏™ÁâπÂÆöÁöÑÂü∫ÂáÜÊµãËØï‰∏≠ÔºåÊ°•Êé•ÂÆûÁé∞Â∏¶Êù•‰∫ÜÁõ∏ÂΩìÊòæËëóÁöÑÊÄßËÉΩÊçüÂ§±ÔºöÂØπ‰∫éGCCÊòØ11.0%ÔºåÂØπ‰∫éClangÊòØ13.1%„ÄÇËøôÂê¨Ëµ∑Êù•ÂæàÂ§öÔºÅÁÑ∂ËÄåÔºå‰∏çË¶ÅÊääËøô‰∫õÊï∞Â≠óÁúãÂæóÂ§™ËÆ§ÁúüÔºöÊòæÁÑ∂ÔºåÁªìÊûú‰∏•Èáç‰æùËµñ‰∫éÂÆûÈôÖÂÖÉÁ¥†ÁöÑÊï∞Èáè„ÄÅÂÆûÈôÖÊï∞ÊçÆÊàêÂëòÁöÑÊï∞ÈáèÂíåÁ±ªÂûã„ÄÅËøêË°åÁ≥ªÁªüÁöÑÂÖ∑‰ΩìÈÖçÁΩÆ‰ª•ÂèäÂü∫ÂáÜÊµãËØï‰∏≠ÊâßË°åÁöÑÂÆûÈôÖËÆ°ÁÆó„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÊîπÂèòÂÖ∂‰∏≠‰ªª‰Ωï‰∏Ä‰∏™ÁªÜËäÇÔºåÊï∞Â≠ó‰πü‰ºöÊîπÂèò„ÄÇÂõ†Ê≠§ÔºåËøô‰∫õÊï∞Â≠ó‰ªÖË°®ÊòéÁî±‰∫éÈó¥Êé•ËÆøÈóÆÊï∞ÊçÆÊàêÂëòËÄåÂØºËá¥Êúâ‰∏Ä‰∫õÔºåÁîöËá≥ÊòØÊõ¥Â§öÁöÑÂºÄÈîÄ„ÄÇ</p>
<p><strong>‰ΩøÁî®ÈÉ®ÂàÜÊ°•Êé•ÊîπËøõÊÄßËÉΩ</strong></p>
<p>‚ÄúÂ•ΩÂêßÔºå‰ΩÜËøôÊòØ‰∏Ä‰∏™È¢ÑÊúüÁöÑÁªìÊûúÔºåÂØπÂêßÔºüÊàëÂ∫îËØ•‰ªé‰∏≠Â≠¶‰π†‰ªÄ‰πàÔºü‚Äù‰Ω†ÈóÆÈÅì„ÄÇ</p>
<p>ÊàëÊâøËÆ§Ëøô‰∏™Âü∫ÂáÜÊµãËØïÈùûÂ∏∏ÂÖ∑‰ΩìÔºåÂπ∂‰∏çËÉΩÂõûÁ≠îÊâÄÊúâÈóÆÈ¢ò„ÄÇÁÑ∂ËÄåÔºåÂÆÉÁ°ÆÂÆû‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∏™Êú∫‰ºöÔºåÂÆûÈôÖ‰∏äÂèØ‰ª•ÈÄöËøáÊ°•Êé•Êù•ÊèêÈ´òÊÄßËÉΩ„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†‰ªîÁªÜËßÇÂØü <code>Person1</code> ÁöÑÂÆûÁé∞Ôºå‰Ω†ÂèØËÉΩ‰ºöÊÑèËØÜÂà∞ÂØπ‰∫éÁªôÂÆöÁöÑÂü∫ÂáÜÊµãËØïÔºåÂèØËææÂà∞ÁöÑÊÄßËÉΩÁõ∏ÂΩìÊúâÈôêÔºöÂ∞ΩÁÆ° <code>Person1</code> ÁöÑÊÄªÂ§ßÂ∞èÊòØ152Â≠óËäÇÔºàClang 11.1ÔºâÊàñ200Â≠óËäÇÔºàGCC 11.1ÔºâÔºå‰ΩÜÊàë‰ª¨Âè™‰ΩøÁî®‰∫Ü4Â≠óËäÇÔºåÂç≥Âçï‰∏™ <code>int</code>Ôºå‰ªéÊï¥‰∏™Êï∞ÊçÆÁªìÊûÑ‰∏≠„ÄÇ</p>
<p>ËøôË¢´ËØÅÊòéÊòØÈùûÂ∏∏Êµ™Ë¥πÂíå‰ΩéÊïàÁöÑÔºöÂõ†‰∏∫Âú®Âü∫‰∫éÁºìÂ≠òÁöÑÊû∂ÊûÑ‰∏≠ÔºåÂÜÖÂ≠òÊÄªÊòØÊåâÁºìÂ≠òË°åÂä†ËΩΩÔºåÊàë‰ª¨‰ªéÂÜÖÂ≠ò‰∏≠Âä†ËΩΩÁöÑÂ§ßÈÉ®ÂàÜÊï∞ÊçÆÂÆûÈôÖ‰∏äÊ†πÊú¨Ê≤°Êúâ‰ΩøÁî®„ÄÇ‰∫ãÂÆû‰∏äÔºåÂá†‰πéÊàë‰ª¨‰ªéÂÜÖÂ≠ò‰∏≠Âä†ËΩΩÁöÑÊâÄÊúâÊï∞ÊçÆÈÉΩÊ≤°ÊúâË¢´‰ΩøÁî®ÔºöÂÅáËÆæÁºìÂ≠òË°åÈïøÂ∫¶‰∏∫64Â≠óËäÇÔºåÊàë‰ª¨Âè™‰ΩøÁî®‰∫ÜÂ§ßÁ∫¶6%ÁöÑÂä†ËΩΩÊï∞ÊçÆ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂ∞ΩÁÆ°Êàë‰ª¨Ê†πÊçÆÊâÄÊúâ‰∫∫ÁöÑÂá∫ÁîüÂπ¥Êù•Á°ÆÂÆöÊúÄÂπ¥ÈïøÁöÑ‰∫∫Âê¨Ëµ∑Êù•ÂÉèÊòØ‰∏Ä‰∏™ËÆ°ÁÆóÂèóÈôêÁöÑÊìç‰ΩúÔºå‰ΩÜÂÆûÈôÖ‰∏äÊàë‰ª¨ÂÆåÂÖ®ÂèóÂÜÖÂ≠òÈôêÂà∂ÔºöÊú∫Âô®Ê†πÊú¨Êó†Ê≥ïË∂≥Â§üÂø´Âú∞Êèê‰æõÊï∞ÊçÆÔºåÊï¥Êï∞ÂçïÂÖÉÂ§ßÂ§öÊï∞Êó∂Èó¥Â§Ñ‰∫éÁ©∫Èó≤Áä∂ÊÄÅ„ÄÇ</p>
<p>ËøôÁßçËÆæÁΩÆ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰ΩøÁî®Ê°•Êé•Êù•ÊèêÈ´òÊÄßËÉΩÁöÑÊú∫‰ºöÔºå<br/>ÂÅáËÆæÊàë‰ª¨ÂèØ‰ª•Âå∫ÂàÜÁªèÂ∏∏‰ΩøÁî®ÁöÑÊï∞ÊçÆÔºàÂ¶ÇÂêçÂ≠ó„ÄÅÂßìÊ∞èÂíåÂá∫ÁîüÂπ¥‰ªΩÔºâÂíåÂæàÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆÔºàÂ¶ÇÈÇÆÊîøÂú∞ÂùÄÔºâ„ÄÇ<br/>Âü∫‰∫éËøôÁßçÂå∫ÂàÜÔºåÊàë‰ª¨Áé∞Âú®Áõ∏Â∫îÂú∞ÂÆâÊéíÊï∞ÊçÆÊàêÂëòÔºöÊâÄÊúâÁªèÂ∏∏‰ΩøÁî®ÁöÑÊï∞ÊçÆÊàêÂëòÁõ¥Êé•Â≠òÂÇ®Âú® <code>Person</code> Á±ª‰∏≠„ÄÇ<br/>ÊâÄÊúâÂæàÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆÊàêÂëòÂ≠òÂÇ®Âú® <code>Impl</code> ÁªìÊûÑ‰∏≠„ÄÇËøôÂØºËá¥‰∫Ü <code>Person3</code> ÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Person3.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Person3</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Person3</span><span class="p">(</span><span class="cm">/*...ÂêÑÁßçpersonÂèÇÊï∞...*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Person3</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">forename_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">surname_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">year_of_birth_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">Impl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">pimpl_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Person3.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Person3.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">struct</span> <span class="nc">Person3</span><span class="o">::</span><span class="n">Impl</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">address</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">city</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">country</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">zip</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person3</span><span class="o">::</span><span class="n">Person3</span><span class="p">(</span><span class="cm">/*...ÂêÑÁßçpersonÂèÇÊï∞...*/</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">forename_</span><span class="p">{</span><span class="cm">/*...*/</span><span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="p">,</span> <span class="n">surname_</span><span class="p">{</span><span class="cm">/*...*/</span><span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="p">,</span> <span class="n">year_of_birth_</span><span class="p">{</span><span class="cm">/*...*/</span><span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="p">,</span> <span class="n">pimpl_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span><span class="p">(</span><span class="cm">/*...addressÁõ∏ÂÖ≥ÁöÑÂèÇÊï∞...*/</span><span class="p">)}</span> 
</span></span><span class="line"><span class="cl"><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Person3</span><span class="o">::~</span><span class="n">Person3</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏Ä‰∏™ <code>Person3</code> ÂÆû‰æãÁöÑÊÄªÂ§ßÂ∞è‰∏∫ <strong>64Â≠óËäÇ</strong> ÔºàClang 11.1Ôºå‰∏§‰∏™24Â≠óËäÇÁöÑ <code>std::string</code>Ôºå‰∏Ä‰∏™Êï¥Êï∞Ôºå‰∏Ä‰∏™ÊåáÈíàÔºå‰ª•ÂèäÁî±‰∫éÂØπÈΩêË¶ÅÊ±ÇÁöÑÂõõ‰∏™Â°´ÂÖÖÂ≠óËäÇÔºâÊàñ <strong>80Â≠óËäÇ</strong>ÔºàGCC 11.1Ôºå‰∏§‰∏™32Â≠óËäÇÁöÑ <code>std::string</code>Ôºå‰∏Ä‰∏™Êï¥Êï∞Ôºå‰∏Ä‰∏™ÊåáÈíàÔºå‰ª•Âèä‰∏Ä‰∫õÂ°´ÂÖÖÔºâ„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå<code>Person3</code> ÂÆû‰æãÂè™Êúâ <code>Person1</code> ÂÆû‰æãÁöÑ‰∏ÄÂçäÂ§ßÂ∞è„ÄÇËøôÁßçÂ§ßÂ∞è‰∏äÁöÑÂ∑ÆÂºÇÊòØÂèØ‰ª•ÊµãÈáèÁöÑÔºöË°®7-2ÊòæÁ§∫‰∫ÜÊâÄÊúâ <code>Person</code> ÂÆûÁé∞ÁöÑÊÄßËÉΩÁªìÊûúÔºåÂåÖÊã¨ <code>Person3</code>„ÄÇÂêåÊ†∑ÔºåÁªìÊûúÂΩí‰∏ÄÂåñ‰∏∫ <code>Person1</code> ÂÆûÁé∞ÁöÑÊÄßËÉΩ„ÄÇ</p>
<p>Ë°®7-2 ‰∏çÂêå <code>Person</code> ÂÆûÁé∞ÁöÑÊÄßËÉΩÁªìÊûúÔºàÂΩí‰∏ÄÂåñÊÄßËÉΩÔºâ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th><code>Person</code> ÂÆûÁé∞</th>
<th>GCC 11.1</th>
<th>Clang 11.1</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Person1</code>ÔºàÊó† pimplÔºâ</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr>
<td><code>Person2</code>ÔºàÂÆåÊï¥ Pimpl ÊÉØÁî®Ê≥ïÔºâ</td>
<td>1.1099</td>
<td>1.1312</td>
</tr>
<tr>
<td><code>Person3</code>ÔºàÈÉ®ÂàÜ Pimpl ÊÉØÁî®Ê≥ïÔºâ</td>
<td>0.8597</td>
<td>0.9353</td>
</tr>
</tbody>
</table></div>
<p>‰∏é <code>Person1</code> ÂÆûÁé∞Áõ∏ÊØîÔºå<code>Person3</code> ÁöÑÊÄßËÉΩÊèêÈ´ò‰∫Ü14.0%ÔºàGCC 11.1ÔºâÂíå6.5%ÔºàClang 11.1Ôºâ„ÄÇ</p>
<p>ËÄå‰∏îÔºåÂ¶ÇÂâçÊâÄËø∞ÔºåËøôÂè™ÊòØÂõ†‰∏∫Êàë‰ª¨ÂáèÂ∞ë‰∫Ü <code>Person3</code> ÂÆûÁé∞ÁöÑÂ§ßÂ∞è„ÄÇ</p>
<p>‚ÄúÂìáÔºåËøôÊòØÂá∫‰πéÊÑèÊñôÁöÑ„ÄÇÊàëÊòéÁôΩ‰∫ÜÔºåÊ°•Êé•‰∏ç‰∏ÄÂÆöÊÄªÊòØÂØπÊÄßËÉΩÊúâÂÆ≥Ôºå‚Äù‰Ω†ËØ¥„ÄÇ</p>
<p>ÊòØÁöÑÔºåÁ°ÆÂÆûÂ¶ÇÊ≠§„ÄÇÂΩìÁÑ∂ÔºåËøôÊÄªÊòØÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÁöÑËÆæÁΩÆÔºå‰ΩÜÂå∫ÂàÜÁªèÂ∏∏‰ΩøÁî®ÂíåÂæàÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆÊàêÂëòÂπ∂ÈÄöËøáÂÆûÁé∞‚ÄúÈÉ®ÂàÜ‚ÄùÊ°•Êé•Êù•ÂáèÂ∞ëÊï∞ÊçÆÁªìÊûÑÁöÑÂ§ßÂ∞èÔºåÂèØËÉΩ‰ºöÂØπÊÄßËÉΩ‰∫ßÁîüÈùûÂ∏∏ÁßØÊûÅÁöÑÂΩ±Âìç„ÄÇ</p>
<p>‚ÄúÊÄßËÉΩÊèêÂçáÂæàÂ§ßÔºåËøôÂæàÂ•ΩÔºå‰ΩÜËøô‰∏çÊòØËøùËÉå‰∫ÜÊ°•Êé•ÁöÑÂàùË°∑ÂêóÔºü‚Äù‰Ω†ÈóÆÈÅì„ÄÇ</p>
<p>Á°ÆÂÆûÔºå‰Ω†ÊÑèËØÜÂà∞ÈöêËóèÂÆûÁé∞ÁªÜËäÇÂíå‰∏∫‰∫ÜÊÄßËÉΩ‚ÄúÂÜÖËÅî‚ÄùÊï∞ÊçÆÊàêÂëò‰πãÈó¥Â≠òÂú®‰∫åÂÖÉÂØπÁ´ã„ÄÇÂ¶ÇÂ∏∏ÔºåËøôÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÊÉÖÂÜµÔºö‰Ω†ÈúÄË¶ÅÈÄêÊ°àÂÜ≥ÂÆöË¶Å‰ºòÂÖàËÄÉËôëÂì™‰∏ÄÊñπÈù¢„ÄÇ</p>
<p>‰Ω†‰πüÊÑèËØÜÂà∞Âú®‰∏§‰∏™ÊûÅÁ´Ø‰πãÈó¥Êúâ‰∏ÄÁ≥ªÂàóÂÆåÊï¥ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºöÊ≤°ÊúâÂøÖË¶ÅÂ∞ÜÊâÄÊúâÊï∞ÊçÆÊàêÂëòÈÉΩÈöêËóèÂú®Ê°•Êé•ÂêéÈù¢„ÄÇÊúÄÁªàÔºå‰Ω†ÊâçÊòØÊâæÂà∞ÁªôÂÆöÈóÆÈ¢òÊúÄ‰ºòËß£ÁöÑ‰∫∫„ÄÇ</p>
<p>ÊÄª‰πãÔºåÂ∞ΩÁÆ°Ê°•Êé•ÈÄöÂ∏∏‰ºöÂØºËá¥‰∏ÄÂÆöÁöÑÊÄßËÉΩÊçüÂ§±Ôºå‰ΩÜÂú®ÈÄÇÂΩìÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÆûÁé∞ÈÉ®ÂàÜÊ°•Êé•ÂèØËÉΩ‰ºöÂØπÊÄßËÉΩ‰∫ßÁîüÈùûÂ∏∏ÁßØÊûÅÁöÑÂΩ±Âìç„ÄÇÁÑ∂ËÄåÔºåËøôÂè™ÊòØÂΩ±ÂìçÊÄßËÉΩÁöÑ‰ºóÂ§öÂõ†Á¥†‰πã‰∏Ä„ÄÇÂõ†Ê≠§Ôºå‰Ω†Â∫îËØ•ÂßãÁªàÊ£ÄÊü•Ê°•Êé•ÊòØÂê¶‰ºöÂØºËá¥ÊÄßËÉΩÁì∂È¢àÔºåÊàñËÄÖÈÉ®ÂàÜÊ°•Êé•ÊòØÂê¶ËÉΩËß£ÂÜ≥ÊÄßËÉΩÈóÆÈ¢ò„ÄÇÊúÄÂ•ΩÁöÑÈ™åËØÅÊñπÊ≥ïÊòØÂü∫‰∫éÂÆûÈôÖ‰ª£Á†ÅÂíåÂ∞ΩÂèØËÉΩÂ§öÁöÑÂÆûÈôÖÊï∞ÊçÆËøõË°åÊúâ‰ª£Ë°®ÊÄßÁöÑÂü∫ÂáÜÊµãËØï„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>ËØ∑ËÆ∞‰ΩèÔºåÊ°•Êé•ÂèØËÉΩ‰ºöÂØπÊÄßËÉΩ‰∫ßÁîüË¥üÈù¢ÂΩ±Âìç„ÄÇ</li>
<li>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂΩìÂàÜÁ¶ªÂ∏∏Áî®Êï∞ÊçÆÂíå‰∏çÂ∏∏Áî®Êï∞ÊçÆÊó∂ÔºåÈÉ®ÂàÜÊ°•Êé•ÂèØËÉΩÂØπÊÄßËÉΩÊúâÊ≠£Èù¢ÂΩ±Âìç„ÄÇ</li>
<li>ÂßãÁªàÈÄöËøáÊúâ‰ª£Ë°®ÊÄßÁöÑÂü∫ÂáÜÊµãËØïÊù•Á°ÆËÆ§ÊÄßËÉΩÁì∂È¢àÊàñÊîπËøõÔºõ‰∏çË¶Å‰æùËµñ‰Ω†ÁöÑÁõ¥Ëßâ„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô-30Â∫îÁî®ÂéüÂûãÊ®°ÂºèËøõË°åÊäΩË±°Â§çÂà∂Êìç‰Ωú">ÂáÜÂàô 30ÔºöÂ∫îÁî®ÂéüÂûãÊ®°ÂºèËøõË°åÊäΩË±°Â§çÂà∂Êìç‰Ωú
</h3><p>ÊÉ≥Ë±°‰∏Ä‰∏ã‰Ω†ÂùêÂú®‰∏ÄÂÆ∂È´òÊ°£ÁöÑÊÑèÂ§ßÂà©È§êÂéÖÈáåÔºåÊ≠£Âú®Á†îÁ©∂ËèúÂçï„ÄÇÂì¶ÔºåÂ§©Âì™Ôºå‰ªñ‰ª¨Êèê‰æõ‰∫ÜËøô‰πàÂ§öÁæéÂë≥ÁöÑ‰∏úË•ø.</p>
<p>ÂçÉÂ±ÇÈù¢Âê¨Ëµ∑Êù•ÂæàÊ£íÔºå‰ΩÜ‰ªñ‰ª¨Êèê‰æõÁöÑÊØîËê®ÈÄâÊã©‰πüÂæàÊ£í„ÄÇÁúüÊòØÈöæ‰ª•ÈÄâÊã©‚Ä¶‚Ä¶</p>
<p>ÁÑ∂ËÄåÔºå‰Ω†ÁöÑÊÄùÁª™Ë¢´ÊâìÊñ≠‰∫ÜÔºåÂõ†‰∏∫ÊúçÂä°ÂëòÁ´ØÁùÄ‰∏ÄÈÅìÁúãËµ∑Êù•ÈùûÂ∏∏ËØ±‰∫∫ÁöÑËèúËÇ¥Ëµ∞Ëøá„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÈÇ£ÈÅìËèú‰∏çÊòØ‰∏∫‰Ω†ÂáÜÂ§áÁöÑÔºåËÄåÊòØ‰∏∫Âè¶‰∏ÄÊ°åÂÆ¢‰∫∫ÂáÜÂ§áÁöÑ„ÄÇÂì¶ÔºåÂìáÔºåÈÇ£È¶ôÂë≥‚Ä¶‚Ä¶Âú®Ëøô‰∏ÄÂàªÔºå‰Ω†Áü•ÈÅì‰∏çÂÜçÈúÄË¶ÅËÄÉËôë‰Ω†ÊÉ≥ÂêÉ‰ªÄ‰πà‰∫ÜÔºöÊó†ËÆ∫ÊòØ‰ªÄ‰πàÔºå‰Ω†ÈÉΩË¶ÅÁÇπÂêåÊ†∑ÁöÑËèú„ÄÇ‚ÄúÂïäÔºåÊúçÂä°ÂëòÔºåÊàëÊÉ≥Ë¶Å‰ªñ‰ª¨ÁÇπÁöÑÈÇ£ÈÅìËèú„ÄÇ‚Äù</p>
<p>ÂêåÊ†∑ÁöÑÈóÆÈ¢ò‰πüÂèØËÉΩÂá∫Áé∞Âú®‰Ω†ÁöÑ‰ª£Á†Å‰∏≠ÔºåÁî®C++ÊúØËØ≠Êù•ËØ¥Ôºå‰Ω†ÂêëÊúçÂä°ÂëòËØ∑Ê±ÇÁöÑÊòØÂà´‰∫∫ÁõòÂ≠êÈáåËèúËÇ¥ÁöÑÂâØÊú¨„ÄÇ</p>
<p>Â§çÂà∂‰∏Ä‰∏™ÂØπË±°ÔºåÂç≥ÂàõÂª∫ÂÆû‰æãÁöÑÁ≤æÁ°ÆÂâØÊú¨ÔºåÊòØC++‰∏≠‰∏ÄÈ°πÂü∫Êú¨ÈáçË¶ÅÁöÑÊìç‰Ωú„ÄÇ<br>Â¶ÇÊ≠§ÈáçË¶Å‰ª•Ëá≥‰∫éÁ±ªÈªòËÆ§ÈÖçÂ§á‰∫ÜÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÂíåÊã∑Ë¥ùËµãÂÄºËøêÁÆóÁ¨¶‚Äî‚ÄîËøôÊòØÊâÄË∞ìÁöÑ‚ÄúÁâπÊÆäÊàêÂëòÂáΩÊï∞‚Äù‰∏≠ÁöÑ‰∏§‰∏™„ÄÇ<br/>ÁÑ∂ËÄåÔºåÂú®ËØ∑Ê±Ç‰∏Ä‰ªΩËèúËÇ¥ÁöÑÂâØÊú¨Êó∂Ôºå‰∏çÂπ∏ÁöÑÊòØ‰Ω†Âπ∂‰∏çÁü•ÈÅìÂÖ∑‰ΩìÊòØ‰ªÄ‰πàËèúËÇ¥„ÄÇÁî®C++ÊúØËØ≠Êù•ËØ¥Ôºå‰Ω†Âè™Êúâ‰∏Ä‰∏™ÊåáÂêëÂü∫Á±ªÁöÑÊåáÈíàÔºàÊØîÂ¶ÇËØ¥Ôºå‰∏Ä‰∏™ <code>Dish*</code>Ôºâ„ÄÇ<br></p>
<p>‰∏çÂπ∏ÁöÑÊòØÔºåÂ∞ùËØïÈÄöËøá <code>Dish*</code> ‰ΩøÁî®Êã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÊàñÊã∑Ë¥ùËµãÂÄºËøêÁÆóÁ¨¶ÈÄöÂ∏∏‰∏çËµ∑‰ΩúÁî®„ÄÇ<br>Â∞ΩÁÆ°Â¶ÇÊ≠§Ôºå‰Ω†‰ªçÁÑ∂ÊÉ≥Ë¶Å‰∏Ä‰∏™Á≤æÁ°ÆÁöÑÂâØÊú¨„ÄÇ</p>
<p>Ëøô‰∏™ÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØÂè¶‰∏Ä‰∏™ÁªèÂÖ∏ÁöÑGoFËÆæËÆ°Ê®°ÂºèÔºöÂéüÂûãËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p><strong>‰∏Ä‰∏™ÂÖ≥‰∫éÂ§çÂà∂Âä®Áâ©ÁöÑ‰æãÂ≠êÔºöÁªµÁæä</strong></p>
<p>‰Ωú‰∏∫‰∏Ä‰∏™‰æãÂ≠êÔºåËÆ©Êàë‰ª¨ËÄÉËôë‰ª•‰∏ã <code>Animal</code> Âü∫Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Animal.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Animal</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Animal</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">makeSound</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§ö‰∏éÂä®Áâ©Áõ∏ÂÖ≥ÁöÑÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Èô§‰∫ÜË°®Á§∫ <code>Animal</code> Â∫îËØ•ÊòØ‰∏Ä‰∏™Âü∫Á±ªÁöÑËôöÊûêÊûÑÂáΩÊï∞Â§ñÔºåÁ±ªÂè™Êèê‰æõ‰∫Ü‰∏Ä‰∏™Â§ÑÁêÜÊâìÂç∞ÂèØÁà±Âä®Áâ©Â£∞Èü≥ÁöÑ <code>makeSound()</code> ÂáΩÊï∞„ÄÇ</p>
<p>‰∏Ä‰∏™ËøôÊ†∑ÁöÑÂä®Áâ©Á§∫‰æãÊòØ <code>Sheep</code> Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Sheep.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Animal.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Sheep</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Animal</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Sheep</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">)</span> <span class="o">:</span> <span class="n">name_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">name</span><span class="p">)}</span> <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">makeSound</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§ö‰∏éÂä®Áâ©Áõ∏ÂÖ≥ÁöÑÂáΩÊï∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Sheep.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Sheep.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="n">Sheep</span><span class="o">::</span><span class="n">makeSound</span><span class="p">()</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;baa</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® <code>main()</code> ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨Áé∞Âú®ÂèØ‰ª•ÂàõÂª∫‰∏ÄÂè™ÁªµÁæäÂπ∂ËÆ©ÂÆÉÂèëÂá∫Â£∞Èü≥Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Sheep.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫ÂîØ‰∏ÄÁöÑ Dolly 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Animal</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">dolly</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Sheep</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;Dolly&#34;</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// Ëß¶Âèë Dolly ÁöÑÂè´Â£∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">dolly</span><span class="o">-&gt;</span><span class="n">makeSound</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Dolly ÂæàÊ£íÔºåÂØπÂêßÔºüËÄå‰∏îÈùûÂ∏∏ÂèØÁà±ÔºÅ‰∫ãÂÆû‰∏äÔºåÂ•πÈùûÂ∏∏ÊúâË∂£ÔºåÊàë‰ª¨Â∏åÊúõÂÜçÊúâ‰∏Ä‰∏™ Dolly„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÊàë‰ª¨Âè™Êúâ‰∏Ä‰∏™ÊåáÂêëÂü∫Á±ªÁöÑÊåáÈíà‚Äî‚Äî‰∏Ä‰∏™ <code>Animal*</code>„ÄÇÊàë‰ª¨‰∏çËÉΩÈÄöËøá <code>Sheep</code> ÁöÑÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÊàñÊã∑Ë¥ùËµãÂÄºËøêÁÆóÁ¨¶Êù•Â§çÂà∂ÂÆÉÔºåÂõ†‰∏∫Êàë‰ª¨ÔºàÊäÄÊúØ‰∏äÔºâÁîöËá≥‰∏çÁü•ÈÅìÊàë‰ª¨Ê≠£Âú®Â§ÑÁêÜÁöÑÊòØ‰∏ÄÂè™ <code>Sheep</code>„ÄÇÂÆÉÂèØ‰ª•ÊòØ‰ªª‰ΩïÁßçÁ±ªÁöÑÂä®Áâ©Ôºà‰æãÂ¶ÇÁãó„ÄÅÁå´„ÄÅÁªµÁæäÁ≠âÔºâ„ÄÇ</p>
<p>Êàë‰ª¨‰πü‰∏çÊÉ≥Âè™Â§çÂà∂ <code>Sheep</code> ÁöÑ <code>Animal</code> ÈÉ®ÂàÜÔºåÂõ†‰∏∫ËøôË¢´Áß∞‰∏∫ÂàáÁâá„ÄÇÂì¶ÔºåÊàëÁöÑÂ§©ÔºåÊàëÂàöÂàöÊÑèËØÜÂà∞Ëøô‰∏™‰æãÂ≠êÂèØËÉΩÁâπÂà´‰∏çÈÄÇÂêàËß£ÈáäÂéüÂûãËÆæËÆ°Ê®°Âºè,ÂàÜÂâ≤Âä®Áâ©Âê¨Ëµ∑Êù•ÂæàÁ≥üÁ≥ï,ÊâÄ‰ª•ËÆ©Êàë‰ª¨ËøÖÈÄüÁªßÁª≠,Êàë‰ª¨Âú®Âì™ÂÑøÔºüÂïäÔºåÊòØÁöÑÔºåÊàë‰ª¨ÊÉ≥Ë¶Å‰∏Ä‰∏™ Dolly ÁöÑÂâØÊú¨Ôºå‰ΩÜÊàë‰ª¨Âè™Êúâ‰∏Ä‰∏™ <code>Animal*</code>„ÄÇËøôÊó∂ÂéüÂûãËÆæËÆ°Ê®°ÂºèÂ∞±Ê¥æ‰∏äÁî®Âú∫‰∫Ü„ÄÇ</p>
<p><strong>ÂéüÂûãËÆæËÆ°Ê®°ÂºèËß£Èáä</strong></p>
<p>ÂéüÂûãËÆæËÆ°Ê®°ÂºèÊòØÁî±Âõõ‰∫∫ÁªÑÊî∂ÈõÜÁöÑ‰∫îÁßçÂàõÂª∫ÂûãËÆæËÆ°Ê®°Âºè‰πã‰∏Ä„ÄÇÂÆÉ‰∏ìÊ≥®‰∫éÊèê‰æõ‰∏ÄÁßçÂàõÂª∫Êüê‰∫õÊäΩË±°ÂÆû‰ΩìÂâØÊú¨ÁöÑÊäΩË±°ÊñπÂºè„ÄÇ</p>
<p>ÊÑèÂõæÔºö‚ÄúÊåáÂÆöË¶ÅÂàõÂª∫ÁöÑÂØπË±°ÁßçÁ±ªÔºå‰ΩøÁî®‰∏Ä‰∏™ÂéüÂûãÂÆû‰æãÔºåÂπ∂ÈÄöËøáÂ§çÂà∂Ëøô‰∏™ÂéüÂûãÂàõÂª∫Êñ∞ÁöÑÂØπË±°„ÄÇ‚Äù</p>
<p>ÂéüÂûãËÆæËÆ°Ê®°ÂºèÈÄöÂ∏∏ÈÄöËøáÂü∫Á±ª‰∏≠ÁöÑ <code>virutal clone()</code> ÂáΩÊï∞ÂÆûÁé∞„ÄÇËÄÉËôëÊõ¥Êñ∞ÂêéÁöÑ <code>Animal</code> Âü∫Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Animal.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Animal</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Animal</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">makeSound</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Animal</span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// ÂéüÂûãËÆæËÆ°Ê®°Âºè 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáËøô‰∏™ <code>clone()</code> ÂáΩÊï∞Ôºå‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•ËØ∑Ê±ÇÁªôÂÆöÔºàÂéüÂûãÔºâÂä®Áâ©ÁöÑÊäΩË±°ÂâØÊú¨ÔºåËÄåÊó†ÈúÄ‰∫ÜËß£‰ªª‰ΩïÁâπÂÆöÁ±ªÂûãÁöÑÂä®Áâ©ÔºàÂ¶Ç Dog„ÄÅCat Êàñ SheepÔºâ„ÄÇÂΩì <code>Animal</code> Âü∫Á±ªÊ≠£Á°ÆÂàÜÈÖçÂà∞Êû∂ÊûÑÁöÑÈ´òÂ±ÇÊó∂ÔºåÂÆÉÈÅµÂæ™‰æùËµñÂÄíÁΩÆÂéüÂàô„ÄÇ</p>
<p><code>clone()</code> ÂáΩÊï∞Ë¢´Â£∞Êòé‰∏∫Á∫ØËôöÂáΩÊï∞ÔºåËøôÊÑèÂë≥ÁùÄÊ¥æÁîüÁ±ªÂøÖÈ°ªÂÆûÁé∞ÂÆÉ„ÄÇ‰ΩÜÊòØÔºåÊ¥æÁîüÁ±ª‰∏çËÉΩÈöèÊÑèÂÆûÁé∞ËØ•ÂáΩÊï∞ÔºåËÄåÊòØÂ∫îËØ•ËøîÂõûËá™Ë∫´ÁöÑÁ≤æÁ°ÆÂâØÊú¨Ôºà‰ªª‰ΩïÂÖ∂‰ªñÁªìÊûúÈÉΩ‰ºöËøùÂèçLSPÔºõÂèÇËßÅ‚ÄúÂáÜÂàô 6ÔºöÈÅµÂÆàÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫‚ÄùÔºâ„ÄÇ</p>
<p>Ëøô‰∏™ÂâØÊú¨ÈÄöÂ∏∏ÊòØÈÄöËøá <code>new</code> Âä®ÊÄÅÂàõÂª∫Âπ∂ÈÄöËøáÊåáÂêëÂü∫Á±ªÁöÑÊåáÈíàËøîÂõûÁöÑ„ÄÇÂΩìÁÑ∂ÔºåËøô‰∏ç‰ªÖÂØºËá¥‰∫Ü‰∏Ä‰∏™ÊåáÈíàÔºåËøòÈúÄË¶ÅÊòæÂºèÂú∞Âà†Èô§ÂâØÊú¨„ÄÇ</p>
<p>Áî±‰∫éÊâãÂä®Ê∏ÖÁêÜÂú®Áé∞‰ª£C++‰∏≠Ë¢´ËÆ§‰∏∫ÊòØ‰∏çÂ•ΩÁöÑÂÅöÊ≥ïÔºåÊåáÈíà‰ª• <code>std::unique_ptr</code> Âà∞ <code>Animal</code> ÁöÑÂΩ¢ÂºèËøîÂõû„ÄÇ</p>
<p><code>Sheep</code> Á±ªÁõ∏Â∫îÂú∞ËøõË°å‰∫ÜÊõ¥Êñ∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Sheep.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Animal.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">class</span> <span class="nc">Sheep</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Animal</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Sheep</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">)</span> <span class="o">:</span> <span class="n">name_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">name</span><span class="p">)}</span> <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">makeSound</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Animal</span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>  <span class="c1">// ÂéüÂûãËÆæËÆ°Ê®°Âºè 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Sheep.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Sheep.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="n">Sheep</span><span class="o">::</span><span class="n">makeSound</span><span class="p">()</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;baa</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Animal</span><span class="o">&gt;</span> <span class="n">Sheep</span><span class="o">::</span><span class="n">clone</span><span class="p">()</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Sheep</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>  <span class="c1">// Â§çÂà∂ÊûÑÈÄ†‰∏ÄÂè™ÁªµÁæä 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áé∞Âú® <code>Sheep</code> Á±ªÂøÖÈ°ªÂÆûÁé∞ <code>clone()</code> ÂáΩÊï∞Âπ∂ËøîÂõûÂÖ∂Ëá™Ë∫´ÁöÑÁ≤æÁ°ÆÂâØÊú¨ÔºöÂú®ÂÖ∂Ëá™Â∑±ÁöÑ <code>clone()</code> ÂáΩÊï∞ÂÜÖÈÉ®ÔºåÂÆÉ‰ΩøÁî® <code>std::make_unique()</code> ÂáΩÊï∞ÂèäÂÖ∂Ëá™Â∑±ÁöÑÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÔºåÂç≥‰Ωø <code>Sheep</code> Á±ªÂú®Êú™Êù•ÂèëÁîüÂèòÂåñÔºå‰πüÊÄªÊòØÂÅáÂÆö‰ºöÂÅöÊ≠£Á°ÆÁöÑ‰∫ãÊÉÖ„ÄÇËøôÁßçÊñπÊ≥ïÊúâÂä©‰∫éÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÈáçÂ§çÔºå‰ªéËÄåÈÅµÂæ™DRYÂéüÂàôÔºàÂèÇËßÅ‚ÄúÊåáÂçó 2ÔºöËÆæËÆ°ÂèòÂåñ‚ÄùÔºâ„ÄÇ</p>
<p>ËØ∑Ê≥®ÊÑèÔºå<code>Sheep</code> Á±ªÊó¢Ê≤°ÊúâÂà†Èô§‰πüÊ≤°ÊúâÈöêËóèÂÖ∂Êã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÂíåÊã∑Ë¥ùËµãÂÄºËøêÁÆóÁ¨¶„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûú‰Ω†Êúâ‰∏ÄÂè™ÁªµÁæäÔºå‰Ω†‰ªçÁÑ∂ÂèØ‰ª•ÈÄöËøáÁâπÊÆäÊàêÂëòÂáΩÊï∞Â§çÂà∂ËøôÂè™ÁªµÁæä„ÄÇËøôÊòØÂÆåÂÖ®ÂèØ‰ª•ÁöÑÔºö<code>clone()</code> ‰ªÖÂ¢ûÂä†‰∫Ü‰∏ÄÁßçÂàõÂª∫ÂâØÊú¨ÁöÑÊñπÂºè‚Äî‚Äî‰∏ÄÁßçÊâßË°åËôöÊãüÂ§çÂà∂ÁöÑÊñπÂºè„ÄÇ</p>
<h3 id="ÂáÜÂàô-31‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÂÆûÁé∞Èùû‰æµÂÖ•ÂºèËøêË°åÊó∂Â§öÊÄÅ">ÂáÜÂàô 31Ôºö‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÂÆûÁé∞Èùû‰æµÂÖ•ÂºèËøêË°åÊó∂Â§öÊÄÅ
</h3><p>Âú®‚ÄúÂáÜÂàô 2ÔºöËÆæËÆ°ÂèòÂåñ‚Äù‰∏≠ÔºåÊàë‰ª¨ÁúãÂà∞‰∫ÜÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªËÆæËÆ°ÂéüÂàôÁöÑÂ∑®Â§ß‰ºòÂäø„ÄÇÂú®‚ÄúÂáÜÂàô 19Ôºö‰ΩøÁî®Á≠ñÁï•ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÊâßË°åÊñπÂºè‚Äù‰∏≠ÔºåÊàë‰ª¨Âà©Áî®ËøôÁßçÂäõÈáèÈÄöËøáÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰ªé‰∏ÄÁªÑÂΩ¢Áä∂‰∏≠ÊèêÂèñÁªòÂõæÂÆûÁé∞ÁªÜËäÇ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ∞ΩÁÆ°ËøôÊòæËëóÂáèÂ∞ë‰∫Ü‰æùËµñÂÖ≥Á≥ªÔºåÂπ∂‰∏îÊàë‰ª¨Âú®‚ÄúÂáÜÂàô 23Ôºö‰ºòÂÖà‰ΩøÁî®Âü∫‰∫éÂÄºÁöÑÁ≠ñÁï•ÂíåÂëΩ‰ª§ÂÆûÁé∞‚Äù‰∏≠ÂÄüÂä© <code>std::function</code> Áé∞‰ª£Âåñ‰∫ÜËß£ÂÜ≥ÊñπÊ°àÔºå‰ΩÜ‰ªçÁÑ∂Â≠òÂú®‰∏Ä‰∫õÁº∫ÁÇπ„ÄÇÁâπÂà´ÊòØÔºåÂΩ¢Áä∂Á±ª‰ªçÁÑ∂‰∏çÂæó‰∏çÂ§ÑÁêÜ <code>draw()</code> Êìç‰ΩúÔºåËôΩÁÑ∂Âá∫‰∫éËÄ¶ÂêàÁöÑÂéüÂõ†ÔºåÂ§ÑÁêÜÂÆûÁé∞ÁªÜËäÇÊòØ‰∏çÂèØÂèñÁöÑ„ÄÇ</p>
<p>Ê≠§Â§ñÔºå‰πüÊòØÊúÄÈáçË¶ÅÁöÑ‰∏ÄÁÇπÔºåÁ≠ñÁï•ÊñπÊ≥ïÂú®ÊèêÂèñÂ§ö‰∏™Â§öÊÄÅÊìç‰ΩúÊó∂ÊòæÂæóÊúâ‰∫õ‰∏çÂàáÂÆûÈôÖ„ÄÇ‰∏∫‰∫ÜËøõ‰∏ÄÊ≠•ÂáèÂ∞ëËÄ¶ÂêàÂπ∂‰ªéÊàë‰ª¨ÁöÑÂΩ¢Áä∂‰∏≠ÊèêÂèñÂ§öÊÄÅÊìç‰ΩúÔºåÊàë‰ª¨Â∞ÜÁªßÁª≠Ëøô‰∏ÄÊóÖÁ®ãÔºåÂπ∂Â∞ÜÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªÂéüÂàôÊèêÂçáÂà∞‰∏Ä‰∏™ÂÖ®Êñ∞ÁöÑ„ÄÅÂèØËÉΩ‰∏çÁÜüÊÇâÁöÑÊ∞¥Âπ≥ÔºöÊàë‰ª¨Â∞ÜÂÆåÂÖ®ÂàÜÁ¶ªÂ§öÊÄÅË°å‰∏∫„ÄÇ‰∏∫Ê≠§ÔºåÊàë‰ª¨Â∞ÜÂ∫îÁî®Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p><strong>Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèËß£Èáä</strong></p>
<p>ËÆ©Êàë‰ª¨ÂõûÂà∞ÁªòÂà∂ÂΩ¢Áä∂ÁöÑ‰æãÂ≠êÂíåÊàë‰ª¨Âú®‚ÄúÂáÜÂàô 23Ôºö‰ºòÂÖà‰ΩøÁî®Âü∫‰∫éÂÄºÁöÑÁ≠ñÁï•ÂíåÂëΩ‰ª§ÂÆûÁé∞‚Äù‰∏≠ÁöÑÊúÄÊñ∞Áâà <code>Circle</code> Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">DrawStrategy</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="nf">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">          <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑÂçäÂæÑÊòØÂê¶ÊúâÊïà‰∏îÁªôÂÆöÁöÑ &#39;std::function&#39; ÂÆû‰æã‰∏ç‰∏∫Á©∫ */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">drawer_</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="cm">/* some arguments */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">DrawStrategy</span> <span class="n">drawer_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÔºåÊàë‰ª¨ÂÖãÊúç‰∫ÜÊúÄÂàùÂØπ <code>draw()</code> ÊàêÂëòÂáΩÊï∞ÂÆûÁé∞ÁªÜËäÇÁöÑÂº∫ËÄ¶Âêà„ÄÇÊàë‰ª¨‰πüÊâæÂà∞‰∫Ü‰∏Ä‰∏™Âü∫‰∫é <code>std::function</code> ÁöÑÂÄºËØ≠‰πâËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºå<code>draw()</code> ÊàêÂëòÂáΩÊï∞‰ªçÁÑ∂ÊòØÊâÄÊúâ‰ªé <code>Shape</code> Âü∫Á±ªÊ¥æÁîüÁöÑÁ±ªÁöÑÂÖ¨ÂÖ±Êé•Âè£ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÊâÄÊúâÁöÑÂΩ¢Áä∂ÈÉΩÁªßÊâø‰∫ÜÂÆûÁé∞ÂÆÉÁöÑ‰πâÂä°„ÄÇËøôÊòØ‰∏Ä‰∏™ÊòéÊòæÁöÑÁº∫Èô∑ÔºöÂèØ‰ª•ËØ¥ÔºåÁªòÂà∂ÂäüËÉΩÂ∫îËØ•ÊòØÁã¨Á´ãÁöÑÔºåÊòØÂΩ¢Áä∂ÁöÑ‰∏Ä‰∏™Â≠§Á´ãÊñπÈù¢ÔºåËÄåÂΩ¢Áä∂Êú¨Ë∫´‰∏çÂ∫îËØ•Áü•ÈÅìÂÆÉ‰ª¨ÂèØ‰ª•Ë¢´ÁªòÂà∂ÁöÑ‰∫ãÂÆû„ÄÇÊàë‰ª¨Â∑≤ÁªèÊèêÂèñ‰∫ÜÂÆûÁé∞ÁªÜËäÇËøô‰∏Ä‰∫ãÂÆûËøõ‰∏ÄÊ≠•Âä†Âº∫‰∫ÜËøô‰∏ÄËÆ∫ÁÇπ„ÄÇ</p>
<p>‚ÄúÈÇ£‰πàÔºåËÆ©Êàë‰ª¨Áõ¥Êé•ÊèêÂèñ <code>draw()</code> ÊàêÂëòÂáΩÊï∞ÔºåÂØπÂêßÔºü‚Äù‰Ω†‰∫âËæ©ÈÅì„ÄÇ‰Ω†ÊòØÂØπÁöÑ„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºå‰πç‰∏ÄÁúãËøô‰ºº‰πéÊòØ‰∏Ä‰ª∂ÂæàÈöæÂÅöÂà∞ÁöÑ‰∫ãÊÉÖ„ÄÇÊàëÂ∏åÊúõ‰Ω†ËøòËÆ∞Âæó‚ÄúÊåáÂçó 15Ôºö‰∏∫Á±ªÂûãÊàñÊìç‰ΩúÁöÑÊ∑ªÂä†ËøõË°åËÆæËÆ°‚ÄùÔºåÂú®ÈÇ£ÈáåÊàë‰ª¨ÂæóÂá∫ÁªìËÆ∫ÔºåÂΩì‰Ω†‰∏ªË¶ÅÊÉ≥Ê∑ªÂä†Á±ªÂûãÊó∂Ôºå‰Ω†Â∫îËØ•‰ºòÂÖàÈÄâÊã©Èù¢ÂêëÂØπË±°ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ‰ªéËøô‰∏™ËßíÂ∫¶Êù•ÁúãÔºåÊàë‰ª¨‰ºº‰πéË¢´ <strong>virtual</strong> ÁöÑ <code>draw()</code> ÂáΩÊï∞ÂíåË°®Á§∫ÊâÄÊúâÂΩ¢Áä∂ÂèØÁî®Êìç‰ΩúÈõÜÁöÑ <code>Shape</code> Âü∫Á±ªÊâÄÂõ∞ÔºåÂç≥ÈúÄÊ±ÇÂàóË°®„ÄÇ</p>
<p>‰∏çËøáÔºåÊúâ‰∏Ä‰∏™Ëß£ÂÜ≥ÊñπÊ°à„ÄÇ‰∏Ä‰∏™Áõ∏ÂΩì‰ª§‰∫∫ÊÉäËÆ∂ÁöÑÊñπÊ°àÔºöÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÊù•ÊèêÂèñÂÆåÊï¥ÁöÑÂ§öÊÄÅË°å‰∏∫„ÄÇËØ•Ê®°ÂºèÁî± Chris Cleeland„ÄÅDouglas C. Schmidt Âíå Timothy H. Harrison Âú® 1996 Âπ¥ÁöÑ‰∏ÄÁØáËÆ∫Êñá‰∏≠ÂºïÂÖ•„ÄÇÂÖ∂ÊÑèÂõæÊòØ‰ΩøÈùûÂ§öÊÄÅÁ±ªÂûãÔºàÊ≤°ÊúâÂçï‰∏™ <strong>virtual</strong> ÂáΩÊï∞ÁöÑÁ±ªÂûãÔºâËÉΩÂ§ü‰ª•Â§öÊÄÅÊñπÂºèÂ§ÑÁêÜ„ÄÇ</p>
<p><strong>Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè</strong></p>
<p><strong>ÊÑèÂõæ</strong>Ôºö‚ÄúÂÖÅËÆ∏‰∏çÁõ∏ÂÖ≥‰∏îÊ≤°Êúâ <strong>virtual</strong> ÊñπÊ≥ïÁöÑ C++ Á±ª‰ª•Â§öÊÄÅÊñπÂºèÂ§ÑÁêÜ„ÄÇËøô‰∫õ‰∏çÁõ∏ÂÖ≥ÁöÑÁ±ªÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÂÆÉ‰ª¨ÁöÑËΩØ‰ª∂‰ª•Áªü‰∏ÄÁöÑÊñπÂºèÂ§ÑÁêÜ„ÄÇ‚Äù</p>
<p>È¶ñÂÖàÂºï‰∫∫Ê≥®ÁõÆÁöÑÊòØÔºå‰∏çÂÜçÊúâ <code>Shape</code> Âü∫Á±ª„ÄÇÂú®Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè‰∏≠Ôºå‰∏çÂêåÁßçÁ±ªÁöÑÂΩ¢Áä∂ÔºàÂ¶Ç <code>Circle</code>„ÄÅ<code>Square</code> Á≠âÔºâË¢´ËÆ§‰∏∫ÊòØÁÆÄÂçïÁöÑ„ÄÅÈùûÂ§öÊÄÅÁ±ªÂûã„ÄÇ</p>
<p>Ê≠§Â§ñÔºåÂΩ¢Áä∂‰∏çÈúÄË¶ÅÁü•ÈÅì‰ªª‰ΩïÂÖ≥‰∫éÁªòÂà∂ÁöÑ‰ø°ÊÅØ„ÄÇËÆæËÆ°Ê®°Âºè‰∏çÊòØË¶ÅÊ±ÇÂΩ¢Áä∂ÁªßÊâøËá™ <code>Shape</code> Âü∫Á±ªÔºåËÄåÊòØÂºïÂÖ•‰∫Ü‰∏Ä‰∏™Áã¨Á´ãÁöÑÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÔºåÂΩ¢Âºè‰∏äË°®Áé∞‰∏∫ <code>ShapeConcept</code> Âíå <code>ShapeModel</code> Á±ª„ÄÇËøôÁßçÂ§ñÈÉ®Â±ÇÊ¨°ÁªìÊûÑÈÄöËøáÂºïÂÖ•ÊâÄÊúâÊúüÊúõÁöÑÂΩ¢Áä∂Êìç‰ΩúÂíåË¶ÅÊ±ÇÊù•‰∏∫ÂΩ¢Áä∂ÂºïÂÖ•Â§öÊÄÅË°å‰∏∫„ÄÇ</p>
<p>Âú®Êàë‰ª¨ÁöÑÁÆÄÂçï‰æãÂ≠ê‰∏≠ÔºåÂ§öÊÄÅË°å‰∏∫‰ªÖÂåÖÂê´ <code>draw()</code> ÂáΩÊï∞„ÄÇÁÑ∂ËÄåÔºåÂΩìÁÑ∂ÔºåÈúÄÊ±ÇÈõÜÂêàÂèØ‰ª•Êõ¥Â§ßÔºà‰æãÂ¶Ç <code>rotate()</code>„ÄÅ<code>serialize()</code> Á≠âÔºâ„ÄÇËøô‰∏ÄÁªÑËôöÊãüÂáΩÊï∞Â∑≤Ë¢´ÁßªÂà∞ÊäΩË±°ÁöÑ <code>ShapeConcept</code> Á±ª‰∏≠ÔºåÁé∞Âú®ÂÆÉÂèñ‰ª£‰∫Ü‰πãÂâçÁöÑ <code>Shape</code> Âü∫Á±ª„ÄÇ</p>
<p>‰∏ªË¶ÅÁöÑÂå∫Âà´Âú®‰∫éÂÖ∑‰ΩìÂΩ¢Áä∂‰∏çÈúÄË¶Å‰∫ÜËß£ <code>ShapeConcept</code>ÔºåÁâπÂà´ÊòØ‰∏çÈúÄË¶ÅÁªßÊâøÂÆÉ„ÄÇÂõ†Ê≠§ÔºåÂΩ¢Áä∂ÂÆåÂÖ®Ëß£ËÄ¶‰∫éËôöÂáΩÊï∞ÈõÜ„ÄÇÂîØ‰∏ÄÁªßÊâøËá™ <code>ShapeConcept</code> ÁöÑÁ±ªÊòØ <code>ShapeModel</code> Á±ªÊ®°Êùø„ÄÇËøô‰∏™Á±ª‰∏∫ÁâπÂÆöÁ±ªÂûãÁöÑÂΩ¢Áä∂ÔºàÂ¶Ç <code>Circle</code>„ÄÅ<code>Square</code> Á≠âÔºâÂÆû‰æãÂåñÔºåÂπ∂‰Ωú‰∏∫ÂÖ∂ÂåÖË£ÖÂô®„ÄÇÁÑ∂ËÄåÔºå<code>ShapeModel</code> ‰∏ç‰ºöËá™Â∑±ÂÆûÁé∞ËôöÂáΩÊï∞ÁöÑÈÄªËæëÔºåËÄåÊòØÂ∞ÜËØ∑Ê±ÇÂßîÊâòÁªôÊâÄÈúÄÁöÑÂÆûÁé∞„ÄÇ</p>
<p>‚ÄúÂìáÔºåÂ§™Ê£í‰∫ÜÔºÅÊàëÊòéÁôΩ‰∫ÜÔºöËøô‰∏™Â§ñÈÉ®Â±ÇÊ¨°ÁªìÊûÑÊèêÂèñ‰∫ÜÊï¥‰∏™ËôöÂáΩÊï∞ÈõÜÔºå‰ªéËÄåÊèêÂèñ‰∫ÜÂΩ¢Áä∂ÁöÑÊâÄÊúâÂ§öÊÄÅË°å‰∏∫„ÄÇ‚Äù</p>
<p>ÊòØÁöÑÔºåÊ≠£ÊòØÂ¶ÇÊ≠§„ÄÇÂÜçÊ¨°Âº∫Ë∞ÉÔºåËøôÊòØÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªÂíåÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÁöÑ‰∏Ä‰∏™‰æãÂ≠ê„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂÆåÊï¥ÁöÑÂ§öÊÄÅË°å‰∏∫Ë¢´ËØÜÂà´‰∏∫ÂèòÂåñÁÇπÂπ∂‰ªéÂΩ¢Áä∂‰∏≠ÊèêÂèñÂá∫Êù•„ÄÇ</p>
<p>ËÄå‰∏îÔºåSRP ‰Ωú‰∏∫ÂºÄÈó≠ÂéüÂàôÔºàOCPÔºâÁöÑÊé®Âä®ËÄÖÔºöÊúâ‰∫Ü <code>ShapeModel</code> Á±ªÊ®°ÊùøÔºå‰Ω†ÂèØ‰ª•ËΩªÊùæÂú∞Â∞Ü‰ªª‰ΩïÊñ∞ÁöÑÈùûÂ§öÊÄÅÂΩ¢Áä∂Á±ªÂûãÊ∑ªÂä†Âà∞ <code>ShapeConcept</code> Â±ÇÊ¨°ÁªìÊûÑ‰∏≠„ÄÇÂè™Ë¶ÅÊñ∞Á±ªÂûãÊª°Ë∂≥ÊâÄÊúâÊâÄÈúÄÁöÑÊìç‰ΩúÔºåËøôÂ∞±ÂèØ‰ª•Â∑•‰Ωú„ÄÇ</p>
<p>‚ÄúÊàëÁúüÁöÑÂæàÂç∞Ë±°Ê∑±Âàª„ÄÇÁÑ∂ËÄåÔºåÊàë‰∏çÁ°ÆÂÆö‰Ω†ÊâÄËØ¥ÁöÑ‚ÄòÊª°Ë∂≥ÊâÄÊúâÊâÄÈúÄÁöÑÊìç‰Ωú‚ÄôÊòØ‰ªÄ‰πàÊÑèÊÄù„ÄÇ‰Ω†ËÉΩËØ¶ÁªÜËØ¥Êòé‰∏Ä‰∏ãÂêóÔºü‚Äù</p>
<p>ÂΩìÁÑ∂ÂèØ‰ª•ÔºÅÊàëËÆ§‰∏∫ÂΩìÂ±ïÁ§∫ÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅÁ§∫‰æãÊó∂ÔºåÂ•ΩÂ§Ñ‰ºöÂèòÂæóÊ∏ÖÊô∞„ÄÇÂõ†Ê≠§ÔºåËÆ©Êàë‰ª¨Áî®Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÈáçÊûÑÂÆåÊï¥ÁöÑÂΩ¢Áä∂ÁªòÂà∂Á§∫‰æã„ÄÇ</p>
<p><strong>ÂÖ∑‰Ωì‰ª£Á†ÅÁ§∫‰æã</strong></p>
<p>È¶ñÂÖàÔºåÊàë‰ª¨ÈúÄË¶ÅÂÆö‰πâ <code>ShapeConcept</code> Âíå <code>ShapeModel</code> Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;ShapeConcept.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeConcept</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">ShapeConcept</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;ShapeModel.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ShapeConcept.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeType</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeModel</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ShapeConcept</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">ShapeModel</span><span class="p">(</span><span class="n">ShapeType</span> <span class="n">shape</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">shape_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">shape</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// ËøôÈáåË∞ÉÁî®ÂÆûÈôÖÁöÑÁªòÂà∂ÈÄªËæë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">shape_</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">ShapeType</span> <span class="n">shape_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÔºåÊàë‰ª¨‰øÆÊîπ <code>Circle</code> Á±ªÔºå‰ΩøÂÖ∂‰∏çÁªßÊâøËá™ <code>Shape</code>ÔºåÂπ∂‰∏îÂè™ÂåÖÂê´ÁªòÂà∂ÈÄªËæëÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑÂçäÂæÑÊòØÂê¶ÊúâÊïà */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// ÁªòÂà∂ÈÄªËæë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Drawing a circle with radius &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">radius_</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúÄÂêéÔºåÂú®‰∏ªÁ®ãÂ∫è‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÂàõÂª∫ <code>ShapeModel</code> ÁöÑÂÆû‰æãÂπ∂‰ΩøÁî®ÂÆÉÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;ShapeModel.h&#34;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;Circle.h&#34;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ShapeConcept</span><span class="o">&gt;&gt;</span> <span class="n">shapes</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ Circle ÂØπË±°Âπ∂Â∞ÜÂÖ∂ÂåÖË£ÖÂú® ShapeModel ‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Circle</span> <span class="n">circle</span><span class="p">(</span><span class="mf">10.0</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">circleModel</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ShapeModel</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">circle</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">circleModel</span><span class="p">));</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Ë∞ÉÁî®ÁªòÂà∂ÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">shape</span> <span class="p">:</span> <span class="n">shapes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">shape</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáËøôÁßçÊñπÂºèÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÁªòÂà∂ÈÄªËæë‰∏éÂΩ¢Áä∂ÁöÑÂÖ∑‰ΩìÂÆûÁé∞Ëß£ËÄ¶ÔºåÂπ∂ÂÖÅËÆ∏ÁÅµÊ¥ªÂú∞Ê∑ªÂä†Êñ∞ÁöÑÂΩ¢Áä∂Á±ªÂûãÔºåËÄåÊó†ÈúÄ‰øÆÊîπÁé∞ÊúâÁöÑ‰ª£Á†Å„ÄÇ</p>
<p><strong>ÂΩ¢Áä∂ÁªòÂà∂ÂÜçÊé¢ËÆ®</strong></p>
<p>ËÆ©Êàë‰ª¨‰ªé <code>Circle</code> Âíå <code>Square</code> Á±ªÂºÄÂßãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑÂçäÂæÑÊòØÂê¶ÊúâÊïà */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* Êõ¥Â§öËé∑ÂèñÂô®Âíå‰∏éÂúÜÁõ∏ÂÖ≥ÁöÑÂÆûÁî®ÂáΩÊï∞ */</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* Êõ¥Â§öÊï∞ÊçÆÊàêÂëò */</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Square</span><span class="p">(</span><span class="kt">double</span> <span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">side_</span><span class="p">(</span><span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑËæπÈïøÊòØÂê¶ÊúâÊïà */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">side</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">side_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* Êõ¥Â§öËé∑ÂèñÂô®Âíå‰∏éÊ≠£ÊñπÂΩ¢Áõ∏ÂÖ≥ÁöÑÂÆûÁî®ÂáΩÊï∞ */</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">side_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* Êõ¥Â§öÊï∞ÊçÆÊàêÂëò */</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏§‰∏™Á±ªÂ∑≤ÁªèË¢´ÁÆÄÂåñ‰∏∫Âü∫Êú¨ÁöÑÂá†‰ΩïÂÆû‰Ωì„ÄÇÂÆÉ‰ª¨ÂÆåÂÖ®ÊòØÈùûÂ§öÊÄÅÁöÑÔºåÂç≥‰∏çÂÜçÊúâÂü∫Á±ª‰∏îÊ≤°ÊúâËôöÊãüÂáΩÊï∞„ÄÇÊúÄÈáçË¶ÅÁöÑÊòØÔºåËøô‰∏§‰∏™Á±ªÂÆåÂÖ®‰∏çÁü•ÈÅì‰ªª‰ΩïÂèØËÉΩÂºïÂÖ•‰∫∫Â∑•‰æùËµñÁöÑÊìç‰ΩúÔºåÂ¶ÇÁªòÂà∂„ÄÅÊóãËΩ¨„ÄÅÂ∫èÂàóÂåñÁ≠â„ÄÇ</p>
<p>Áõ∏ÂèçÔºåÊâÄÊúâËøô‰∫õÂäüËÉΩÈÉΩÂú® <code>ShapeConcept</code> Âü∫Á±ª‰∏≠ÂºïÂÖ•ÔºåÂπ∂Áî± <code>ShapeModel</code> Á±ªÊ®°ÊùøÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdexcept&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeConcept</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">ShapeConcept</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂèØËÉΩÊõ¥Â§öÁöÑÂ§öÊÄÅÊìç‰Ωú 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeModel</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ShapeConcept</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">DrawStrategy</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="n">ShapeT</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="nf">ShapeModel</span><span class="p">(</span><span class="n">ShapeT</span> <span class="n">shape</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">shape_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">shape</span><span class="p">)},</span> 
</span></span><span class="line"><span class="cl">          <span class="n">drawer_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">)}</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="cm">/* Ê£ÄÊü•ÁªôÂÆöÁöÑ &#39;std::function&#39; ‰∏ç‰∏∫Á©∫ */</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">shape_</span><span class="p">);</span> <span class="p">}</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂèØËÉΩÊõ¥Â§öÁöÑÂ§öÊÄÅÊìç‰Ωú 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">ShapeT</span> <span class="n">shape_</span><span class="p">;</span>   <span class="c1">// ÁªÑÂêàËÄåÈùûÁªßÊâøÔºàËÆ∞‰Ωè‚ÄúÊåáÂçó 20Ôºö‰ºòÂÖà‰ΩøÁî®ÁªÑÂêàËÄåÈùûÁªßÊâø‚ÄùÔºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">DrawStrategy</span> <span class="n">drawer_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>ShapeConcept</code> Á±ªÂºïÂÖ•‰∫Ü‰∏Ä‰∏™Á∫ØËôöÂáΩÊï∞ <code>draw()</code>„ÄÇ</p>
<p>Âú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠ÔºåËøô‰∏™ÂîØ‰∏ÄÁöÑËôöÂáΩÊï∞‰ª£Ë°®‰∫ÜÂΩ¢Áä∂ÁöÑÊâÄÊúâË¶ÅÊ±ÇÈõÜ„ÄÇÂ∞ΩÁÆ°ÈõÜÂêàÂæàÂ∞èÔºå‰ΩÜ <code>ShapeConcept</code> Á±ª‰ª£Ë°®‰∫Ü‰∏ÄÁßçÁªèÂÖ∏ÁöÑÊäΩË±°ÔºåÁ¨¶ÂêàÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºàLSPÔºâÔºàËßÅ‚ÄúÊåáÂçó 6ÔºöÈÅµÂÆàÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫‚ÄùÔºâ„ÄÇËøôÁßçÊäΩË±°Âú® <code>ShapeModel</code> Á±ªÊ®°Êùø‰∏≠ÂÆûÁé∞„ÄÇ</p>
<p>ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºå<code>ShapeModel</code> ÁöÑÂÆû‰æãÊòØÂîØ‰∏ÄÁªßÊâøËá™ <code>ShapeConcept</code> ÁöÑÁ±ªÔºõ‰∏çÊúüÊúõÂÖ∂‰ªñÁ±ªËøõÂÖ•ËøôÁßçÂÖ≥Á≥ª„ÄÇ<code>ShapeModel</code> Á±ªÊ®°ÊùøÂ∞Ü‰∏∫ÊØèÁßçÊâÄÈúÄÁöÑÂΩ¢Áä∂Á±ªÂûãÂÆû‰æãÂåñÔºåÂç≥ <code>ShapeT</code> Ê®°ÊùøÂèÇÊï∞ÂèØ‰ª•ÊòØ <code>Circle</code>„ÄÅ<code>Square</code> Á≠âÁ±ªÂûã„ÄÇËØ∑Ê≥®ÊÑèÔºå<code>ShapeModel</code> Â≠òÂÇ®‰∫ÜÁõ∏Â∫îÂΩ¢Áä∂ÁöÑ‰∏Ä‰∏™ÂÆû‰æãÔºåÂÆÉ‰Ωú‰∏∫‰∏Ä‰∏™ÂåÖË£ÖÂô®ÔºåÈÄöËøáÊâÄÈúÄÁöÑÂ§öÊÄÅË°å‰∏∫ÔºàÂú®Êàë‰ª¨ÁöÑÊÉÖÂÜµ‰∏ãÊòØ <code>draw()</code> ÂáΩÊï∞ÔºâÂ¢ûÂº∫ÁâπÂÆöÂΩ¢Áä∂Á±ªÂûã„ÄÇ</p>
<p>Áî±‰∫é <code>ShapeModel</code> ÂÆûÁé∞‰∫Ü <code>ShapeConcept</code> ÊäΩË±°ÔºåÂõ†Ê≠§ÈúÄË¶ÅÊèê‰æõ <code>draw()</code> ÂáΩÊï∞ÁöÑÂÆûÁé∞„ÄÇÁÑ∂ËÄåÔºåÂÆûÁé∞ <code>draw()</code> ÁªÜËäÇÁöÑË¥£‰ªªÂπ∂‰∏çÂú®‰∫é <code>ShapeModel</code> Ëá™Ë∫´„ÄÇÁõ∏ÂèçÔºåÂÆÉÂ∫îËØ•Â∞ÜÁªòÂà∂ËØ∑Ê±ÇËΩ¨ÂèëÂà∞ÂÆûÈôÖÁöÑÂÆûÁé∞„ÄÇ‰∏∫Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•ÂÜçÊ¨°‰ΩøÁî®Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂíå <code>std::function</code> ÁöÑÊäΩË±°ËÉΩÂäõ„ÄÇ</p>
<p>Ëøô‰∏ÄÈÄâÊã©ÂæàÂ•ΩÂú∞Ëß£ËÄ¶‰∫ÜÁªòÂà∂ÁöÑÂÆûÁé∞ÁªÜËäÇÂíåÊâÄÊúâÂøÖË¶ÅÁöÑÁªòÂà∂Êï∞ÊçÆÔºàÈ¢úËâ≤„ÄÅÁ∫πÁêÜ„ÄÅÈÄèÊòéÂ∫¶Á≠âÔºâÔºåËøô‰∫õÊï∞ÊçÆÂèØ‰ª•Â≠òÂÇ®Âú®ÂèØË∞ÉÁî®ÂØπË±°‰∏≠„ÄÇÂõ†Ê≠§Ôºå<code>ShapeModel</code> Â≠òÂÇ®‰∫Ü‰∏Ä‰∏™ <code>DrawStrategy</code> ÂÆû‰æãÔºåÂπ∂Âú®Ëß¶Âèë <code>draw()</code> ÂáΩÊï∞Êó∂‰ΩøÁî®ËØ•Á≠ñÁï•„ÄÇ</p>
<p>Â∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂíå <code>std::function</code> Âπ∂‰∏çÊòØÂîØ‰∏ÄÁöÑÈÄâÊã©„ÄÇÂú® <code>ShapeModel</code> Á±ªÊ®°ÊùøÂÜÖÔºå‰Ω†ÂèØ‰ª•ÂÆåÂÖ®ÁÅµÊ¥ªÂú∞ÊåâËá™Â∑±ÁöÑÊñπÂºèÂÆûÁé∞ÁªòÂà∂„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂú® <code>ShapeModel::draw()</code> ÂáΩÊï∞‰∏≠Ôºå‰Ω†ÂÆö‰πâ‰∫ÜÁâπÂÆöÂΩ¢Áä∂Á±ªÂûãÁöÑÁúüÊ≠£ÈúÄÊ±Ç„ÄÇ‰æãÂ¶ÇÔºå‰Ω†ÂèØ‰ª•ÈÄâÊã©ËΩ¨ÂèëÂà∞ <code>ShapeT</code> ÂΩ¢Áä∂ÁöÑÊàêÂëòÂáΩÊï∞Ôºà‰∏çÂøÖÂëΩÂêç‰∏∫ <code>draw()</code>ÔºÅÔºâÔºåÊàñËÄÖËΩ¨ÂèëÂà∞ÂΩ¢Áä∂ÁöÑËá™Áî±ÂáΩÊï∞„ÄÇÂè™ÈúÄÁ°Æ‰øù‰∏çË¶ÅÂØπ <code>ShapeModel</code> Êàñ <code>ShapeConcept</code> ÊäΩË±°ÊñΩÂä†‰∫∫‰∏∫ÁöÑË¶ÅÊ±Ç„ÄÇÊó†ËÆ∫Âì™ÁßçÊñπÂºèÔºåÁî®‰∫éÂÆû‰æãÂåñ <code>ShapeModel</code> ÁöÑ‰ªª‰ΩïÁ±ªÂûãÈÉΩÂøÖÈ°ªÊª°Ë∂≥Ëøô‰∫õË¶ÅÊ±ÇÊâçËÉΩ‰Ωø‰ª£Á†ÅÁºñËØë„ÄÇ</p>
<p>‚Äú<code>ShapeModel</code> ÊòØÂê¶ÊòØÂØπÊúÄÂàùÁöÑ <code>Circle</code> Âíå <code>Square</code> Á±ªÁöÑ‰∏ÄÁßçÊ≥õÂåñÔºüÈÇ£‰∫õ‰πüÊåÅÊúâ <code>std::function</code> ÂÆû‰æãÁöÑÁ±ªÔºü‚Äù ÊòØÁöÑÔºåËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑËÆ§ËØÜ„ÄÇ</p>
<p>ÂÆûÈôÖ‰∏äÔºåÂèØ‰ª•ËØ¥ <code>ShapeModel</code> ÊòØÂàùÂßãÂΩ¢Áä∂Á±ªÁöÑÊ®°ÊùøÁâàÊú¨„ÄÇÂõ†Ê≠§ÔºåÂÆÉÊúâÂä©‰∫éÂáèÂ∞ëÂºïÂÖ•Á≠ñÁï•Ë°å‰∏∫ÊâÄÈúÄÁöÑÊ†∑Êùø‰ª£Á†ÅÔºåÂπ∂Ê†πÊçÆ DRY ÂéüÂàôÊîπËøõÂÆûÁé∞ÔºàËßÅ‚ÄúÊåáÂçó 2ÔºöËÆæËÆ°ÂèòÂåñ‚ÄùÔºâ„ÄÇÁÑ∂ËÄåÔºå‰Ω†Ëé∑ÂæóÁöÑÂ•ΩÂ§ÑÊõ¥Â§öÔºö‰æãÂ¶ÇÔºåÁî±‰∫é <code>ShapeModel</code> Â∑≤ÁªèÊòØ‰∏Ä‰∏™Á±ªÊ®°ÊùøÔºå‰Ω†ÂèØ‰ª•ËΩªÊùæÂú∞‰ªéÂΩìÂâçÁöÑËøêË°åÊó∂Á≠ñÁï•ÂÆûÁé∞ÂàáÊç¢Âà∞ÁºñËØëÊó∂Á≠ñÁï•ÂÆûÁé∞ÔºàÂç≥Âü∫‰∫éÁ≠ñÁï•ÁöÑËÆæËÆ°ÔºõËßÅ‚ÄúÊåáÂçó 19Ôºö‰ΩøÁî®Á≠ñÁï•ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÊâßË°åÊñπÂºè‚ÄùÔºâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span> <span class="o">&gt;</span>   
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeModel</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ShapeConcept</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">ShapeModel</span><span class="p">(</span><span class="n">ShapeT</span> <span class="n">shape</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">shape_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">shape</span><span class="p">)},</span> 
</span></span><span class="line"><span class="cl">          <span class="n">drawer_</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">)}</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">shape_</span><span class="p">);</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">ShapeT</span> <span class="n">shape_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">DrawStrategy</span> <span class="n">drawer_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Èô§‰∫ÜÂü∫‰∫é <code>std::function</code>Ôºå‰Ω†ËøòÂèØ‰ª•Âêë <code>ShapeModel</code> Á±ªÊ®°Êùø‰º†ÈÄí‰∏Ä‰∏™È¢ùÂ§ñÁöÑÊ®°ÊùøÂèÇÊï∞ÔºåË°®Á§∫ÁªòÂà∂Á≠ñÁï•ÔºàÔºâ„ÄÇËøô‰∏™Ê®°ÊùøÂèÇÊï∞ÁîöËá≥ÂèØ‰ª•Êúâ‰∏Ä‰∏™ÈªòËÆ§ÂÄºÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DefaultDrawer</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="k">operator</span><span class="p">()(</span> <span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">obj</span> <span class="p">)</span> <span class="k">const</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">draw</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span> <span class="o">=</span> <span class="n">DefaultDrawer</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeModel</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ShapeConcept</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">ShapeModel</span><span class="p">(</span><span class="n">ShapeT</span> <span class="n">shape</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span> <span class="o">=</span> <span class="n">DefaultDrawer</span><span class="p">{})</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Â¶ÇÂâçÊâÄËø∞ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏éÁõ¥Êé•ÂØπ <code>Circle</code> Âíå <code>Square</code> Á±ªÂ∫îÁî®Âü∫‰∫éÁ≠ñÁï•ÁöÑËÆæËÆ°Áõ∏ÊØîÔºåËøôÁßçÁºñËØëÊó∂ÊñπÊ≥ïÂú®Ê≠§‰∏ä‰∏ãÊñá‰∏≠Âè™ÊúâÂ•ΩÂ§ÑËÄåÊ≤°ÊúâÁº∫ÁÇπ„ÄÇÈ¶ñÂÖàÔºåÁî±‰∫éÂáèÂ∞ë‰∫ÜËøêË°åÊó∂Èó¥Êé•Ë∞ÉÁî®Ôºà<code>std::function</code> ÁöÑÈ¢ÑÊúüÊÄßËÉΩÂä£ÂäøÔºâÔºå‰Ω†Ëé∑Âæó‰∫ÜÊÄßËÉΩÊèêÂçá„ÄÇÂÖ∂Ê¨°Ôºå‰Ω†‰∏çÈúÄË¶ÅÈÄöËøáÊ∑ªÂä†Ê®°ÊùøÂèÇÊï∞Êù•‰∫∫‰∏∫Âú∞Êâ©ÂÖÖ <code>Circle</code>„ÄÅ<code>Square</code> ÂíåÊâÄÊúâÂÖ∂‰ªñÂΩ¢Áä∂Á±ª‰ª•ÈÖçÁΩÆÁªòÂà∂Ë°å‰∏∫„ÄÇ‰Ω†Áé∞Âú®Âè™ÈúÄË¶Å‰∏∫ÂåÖË£ÖÂô®ËøôÊ†∑ÂÅöÔºåËøô‰ºöÂ¢ûÂº∫ÁªòÂà∂Ë°å‰∏∫ÔºåÂπ∂‰∏îÂè™Âú®‰∏Ä‰∏™Âú∞ÊñπÂÆåÊàêÔºàËøôÂÜçÊ¨°ÂæàÂ•ΩÂú∞ÈÅµÂæ™‰∫Ü DRY ÂéüÂàôÔºâ„ÄÇÁ¨¨‰∏âÔºå‰Ω†‰∏çÈúÄË¶ÅÈÄöËøáÂ∞ÜÂ∏∏ËßÑÁ±ªËΩ¨Êç¢‰∏∫Á±ªÊ®°ÊùøËÄåÂú®Â§¥Êñá‰ª∂‰∏≠Â¢ûÂä†È¢ùÂ§ñÁöÑ‰ª£Á†Å„ÄÇÂè™ÊúâÂ∑≤Áªè‰Ωú‰∏∫Á±ªÊ®°ÊùøÁöÑÁ≤æÁÆÄÁâà <code>ShapeModel</code> ÈúÄË¶ÅÈ©ªÁïôÂú®Â§¥Êñá‰ª∂‰∏≠„ÄÇÂõ†Ê≠§Ôºå‰Ω†ÈÅøÂÖç‰∫ÜÂàõÂª∫È¢ùÂ§ñÁöÑ‰æùËµñÂÖ≥Á≥ª„ÄÇ</p>
<p>‚ÄúÂìáÔºåËøô‰∏™ËÆæËÆ°Ê®°ÂºèË∂äÊù•Ë∂äÂ•Ω‰∫Ü„ÄÇËøôÁúüÊòØÁªßÊâøÂíåÊ®°ÊùøÁöÑÂº∫Â§ßÁªìÂêàÔºÅ‚Äù ÊòØÁöÑÔºåÊàëÂÆåÂÖ®ÂêåÊÑè„ÄÇËøôÊòØÁªìÂêàËøêË°åÊó∂ÂíåÁºñËØëÊó∂Â§öÊÄÅÁöÑ‰∏Ä‰∏™ËåÉ‰æãÔºö<code>ShapeConcept</code> Âü∫Á±ª‰∏∫ÊâÄÊúâÂèØËÉΩÁöÑÁ±ªÂûãÊèê‰æõ‰∫ÜÊäΩË±°ÔºåËÄåÊ¥æÁîüÁöÑ <code>ShapeModel</code> Á±ªÊ®°Êùø‰∏∫ÁâπÂÆöÂΩ¢Áä∂‰ª£Á†ÅÊèê‰æõ‰∫Ü‰ª£Á†ÅÁîüÊàê„ÄÇÊúÄ‰ª§‰∫∫Âç∞Ë±°Ê∑±ÂàªÁöÑÊòØÔºåËøôÁßçÁªìÂêàÂ∏¶Êù•‰∫ÜÂ∑®Â§ßÁöÑ‰ºòÂäøÔºåÂáèÂ∞ë‰∫Ü‰æùËµñÂÖ≥Á≥ª„ÄÇ</p>
<p>ÁúãÁúãÂõæ7-8ÔºåÂÆÉÂ±ïÁ§∫‰∫ÜÊàë‰ª¨ÂÆûÁé∞Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÁöÑ‰æùËµñÂÖ≥Á≥ªÂõæ„ÄÇÂú®Êû∂ÊûÑÁöÑÊúÄÈ´òÂ±ÇÊ¨°‰∏äÊòØ <code>ShapeConcept</code> Âíå <code>ShapeModel</code> Á±ªÔºåÂÆÉ‰ª¨ÂÖ±Âêå‰ª£Ë°®‰∫ÜÂΩ¢Áä∂ÁöÑÊäΩË±°„ÄÇ<code>Circle</code> Âíå <code>Square</code> ÊòØËøôÁßçÊäΩË±°ÁöÑÂèØËÉΩÂÆûÁé∞Ôºå‰ΩÜ‰ªçÁÑ∂ÂÆåÂÖ®Áã¨Á´ãÔºöÊ≤°ÊúâÁªßÊâøÂÖ≥Á≥ªÔºåÊ≤°ÊúâÁªÑÂêàÔºå‰ªÄ‰πàÈÉΩÊ≤°Êúâ„ÄÇÂè™Êúâ‰∏∫ÁâπÂÆöÁ±ªÂûãÁöÑÂΩ¢Áä∂ÂíåÁâπÂÆöÁöÑ <code>DrawStrategy</code> ÂÆûÁé∞ÂÆû‰æãÂåñ <code>ShapeModel</code> Á±ªÊ®°ÊùøÊó∂ÔºåÊâç‰ºöÂ∞ÜÊâÄÊúâÊñπÈù¢ÁªìÂêàËµ∑Êù•„ÄÇÁÑ∂ËÄåÔºåËØ∑ÁâπÂà´Ê≥®ÊÑèÔºåÊâÄÊúâËøô‰∏ÄÂàáÈÉΩÂèëÁîüÂú®Êàë‰ª¨Êû∂ÊûÑÁöÑÊúÄ‰ΩéÂ±ÇÔºöÊ®°Êùø‰ª£Á†ÅÂú®ÊâÄÊúâ‰æùËµñÂÖ≥Á≥ªÂ∑≤Áü•ÁöÑÂú∞ÊñπÁîüÊàêÔºåÂπ∂‚ÄúÊ≥®ÂÖ•‚ÄùÂà∞Êàë‰ª¨Êû∂ÊûÑÁöÑÊ≠£Á°ÆÂ±ÇÁ∫ß„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Á°ÆÂÆûÊã•Êúâ‰∏Ä‰∏™ÈÄÇÂΩìÁöÑÊû∂ÊûÑÔºöÊâÄÊúâ‰æùËµñÂÖ≥Á≥ªËøûÊé•ÈÉΩÊúùÁùÄÊõ¥È´òÁöÑÂ±ÇÁ∫ßËøêË°åÔºåÂπ∂Âá†‰πéËá™Âä®ÈÅµÂæ™‰æùËµñÂÄíÁΩÆÂéüÂàôÔºàDIPÔºâ„ÄÇ</p>
<p><strong>ÂäüËÉΩÂÆûÁé∞ÂêéÔºåÊàë‰ª¨ÂèØ‰ª•Ëá™Áî±ÂÆûÁé∞‰ªª‰ΩïÊâÄÈúÄÁöÑÁªòÂà∂Ë°å‰∏∫</strong></p>
<p>‰æãÂ¶ÇÔºåÊàë‰ª¨ÂèØ‰ª•ÂÜçÊ¨°‰ΩøÁî®OpenGLÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;OpenGLDrawStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include </span><span class="cm">/* OpenGL ÂõæÂΩ¢Â∫ìÂ§¥Êñá‰ª∂ */</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OpenGLDrawStrategy</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">OpenGLDrawStrategy</span><span class="p">(</span><span class="cm">/* ‰∏éÁªòÂà∂Áõ∏ÂÖ≥ÁöÑÂèÇÊï∞ */</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">circle</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">square</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* ‰∏éÁªòÂà∂Áõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÊàêÂëòÔºåÂ¶ÇÈ¢úËâ≤„ÄÅÁ∫πÁêÜÁ≠â */</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫é <code>OpenGLDrawStrategy</code> ‰∏çÈúÄË¶ÅÁªßÊâøËá™‰ªª‰ΩïÂü∫Á±ªÔºå‰Ω†ÂèØ‰ª•Ëá™Áî±Âú∞ÊåâÈúÄÂÆûÁé∞ÂÆÉ„ÄÇÂ¶ÇÊûúÊÑøÊÑèÔºå‰Ω†ÂèØ‰ª•Â∞ÜÁªòÂà∂ÂúÜÂíåÁªòÂà∂Ê≠£ÊñπÂΩ¢ÁöÑÂÆûÁé∞ÂêàÂπ∂Âà∞‰∏Ä‰∏™Á±ª‰∏≠„ÄÇËøô‰∏ç‰ºöÂàõÂª∫‰ªª‰Ωï‰∫∫‰∏∫ÁöÑ‰æùËµñÂÖ≥Á≥ªÔºåÁ±ª‰ºº‰∫éÊàë‰ª¨Âú®‚ÄúÊåáÂçó 19Ôºö‰ΩøÁî®Á≠ñÁï•ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÊâßË°åÊñπÂºè‚Äù‰∏≠ÊâÄÁªèÂéÜÁöÑÔºåÊàë‰ª¨Â∞ÜËøô‰∫õÂäüËÉΩÂêàÂπ∂Âà∞‰∫ÜÂü∫Á±ª‰∏≠„ÄÇ</p>
<p><strong>Ê≥®ÊÑè</strong></p>
<p>Â∞ÜÁªòÂà∂ÂúÜÂíåÊ≠£ÊñπÂΩ¢ÁªìÂêàÂú®‰∏Ä‰∏™Á±ª‰∏≠Ë°®Á§∫ÁöÑÂÜÖÂÆπ‰∏é‰ªé‰∏§‰∏™Á≠ñÁï•Âü∫Á±ªÁªßÊâøÁ±ªÊòØÁõ∏ÂêåÁöÑ„ÄÇÂú®Êû∂ÊûÑÁöÑËøô‰∏ÄÂ±ÇÈù¢‰∏äÔºåËøô‰∏ç‰ºöÂàõÂª∫‰ªª‰Ωï‰∫∫‰∏∫ÁöÑ‰æùËµñÂÖ≥Á≥ªÔºå‰ªÖÊòØ‰∏Ä‰∏™ÂÆûÁé∞ÁªÜËäÇ„ÄÇÂîØ‰∏ÄÈúÄË¶ÅÈÅµÂæ™ÁöÑÁ∫¶ÂÆöÊòØ‰∏∫ <code>Circle</code> Âíå <code>Square</code> Êèê‰æõÂáΩÊï∞Ë∞ÉÁî®ËøêÁÆóÁ¨¶ÔºàÔºâÔºåÂõ†‰∏∫ËøôÊòØ <code>ShapeModel</code> Á±ªÊ®°Êùø‰∏≠ÂÆö‰πâÁöÑË∞ÉÁî®Á∫¶ÂÆö„ÄÇ</p>
<p>Âú® <code>main()</code> ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨Â∞ÜÊâÄÊúâÁªÜËäÇÁªÑÂêàÂú®‰∏ÄËµ∑Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;OpenGLDrawStrategy.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">Shapes</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ShapeConcept</span><span class="o">&gt;&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">CircleModel</span> <span class="o">=</span> <span class="n">ShapeModel</span><span class="o">&lt;</span><span class="n">Circle</span><span class="p">,</span> <span class="n">OpenGLDrawStrategy</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">SquareModel</span> <span class="o">=</span> <span class="n">ShapeModel</span><span class="o">&lt;</span><span class="n">Square</span><span class="p">,</span> <span class="n">OpenGLDrawStrategy</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Shapes</span> <span class="n">shapes</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∫õÂΩ¢Áä∂ÔºåÊØè‰∏™ÈÉΩÈÖçÂ§á‰∫ÜOpenGLÁªòÂà∂Á≠ñÁï• 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">CircleModel</span><span class="o">&gt;</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">            <span class="n">Circle</span><span class="p">{</span><span class="mf">2.3</span><span class="p">},</span> <span class="n">OpenGLDrawStrategy</span><span class="p">(</span><span class="cm">/*...Á∫¢Ëâ≤...*/</span><span class="p">)</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">SquareModel</span><span class="o">&gt;</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">            <span class="n">Square</span><span class="p">{</span><span class="mf">1.2</span><span class="p">},</span> <span class="n">OpenGLDrawStrategy</span><span class="p">(</span><span class="cm">/*...ÁªøËâ≤...*/</span><span class="p">)</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">shapes</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">CircleModel</span><span class="o">&gt;</span><span class="p">(</span> 
</span></span><span class="line"><span class="cl">            <span class="n">Circle</span><span class="p">{</span><span class="mf">4.1</span><span class="p">},</span> <span class="n">OpenGLDrawStrategy</span><span class="p">(</span><span class="cm">/*...ËìùËâ≤...*/</span><span class="p">)</span> <span class="p">)</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁªòÂà∂ÊâÄÊúâÂΩ¢Áä∂ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="nl">shape</span> <span class="p">:</span> <span class="n">shapes</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">shape</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂêåÊ†∑ÔºåÊàë‰ª¨È¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™Á©∫ÁöÑÂΩ¢Áä∂ÂêëÈáèÔºàËøôÊ¨°ÊòØ <code>std::unique_ptr&lt;ShapeConcept&gt;</code> ÁöÑÂêëÈáèÔºâÔºàÔºâÔºåÁÑ∂ÂêéÊ∑ªÂä†‰∏â‰∏™ÂΩ¢Áä∂„ÄÇÂú®Ë∞ÉÁî® <code>std::make_unique()</code> Êó∂ÔºåÊàë‰ª¨ÂÆû‰æãÂåñ‰∫Ü <code>ShapeModel</code> Á±ªÁî®‰∫é <code>Circle</code> Âíå <code>Square</code>ÔºàÁß∞‰∏∫ <code>CircleModel</code> Âíå <code>SquareModel</code> ‰ª•ÊèêÈ´òÂèØËØªÊÄßÔºâÔºåÂπ∂‰º†ÈÄí‰∫ÜÂøÖË¶ÅÁöÑÁªÜËäÇÔºàÂÖ∑‰ΩìÁöÑÂΩ¢Áä∂ÂíåÁõ∏Â∫îÁöÑ <code>OpenGLDrawStrategy</code>Ôºâ„ÄÇ‰πãÂêéÔºåÊàë‰ª¨ËÉΩÂ§ü‰ª•ÊâÄÈúÄÁöÑÊñπÂºèÁªòÂà∂ÊâÄÊúâÂΩ¢Áä∂„ÄÇ</p>
<p>ÊÄª‰ΩìËÄåË®ÄÔºåËøôÁßçÊñπÊ≥ïÊèê‰æõ‰∫ÜËÆ∏Â§öÊòæËëóÁöÑ‰ºòÁÇπÔºö</p>
<ul>
<li><strong>ÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªÂíå‰ªéÂΩ¢Áä∂Á±ªÂûã‰∏≠ÊèêÂèñÂ§öÊÄÅË°å‰∏∫</strong>ÔºöÊ∂àÈô§‰∫ÜÂØπÂõæÂΩ¢Â∫ìÁ≠âÁöÑÊâÄÊúâ‰æùËµñÔºåÂàõÂª∫‰∫ÜÈùûÂ∏∏ÊùæÊï£ÁöÑËÄ¶ÂêàÔºåÂπ∂‰∏îÂæàÂ•ΩÂú∞ÈÅµÂæ™‰∫ÜÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâ„ÄÇ</li>
<li><strong>ÂΩ¢Áä∂Á±ªÂûãÂèòÂæóÊõ¥ÁÆÄÂçï‰∏îÈùûÂ§öÊÄÅ</strong>ÔºöÂèØ‰ª•ËΩªÊùæÊ∑ªÂä†Êñ∞ÁöÑÂΩ¢Áä∂Á±ªÂûãÔºåÁîöËá≥ÂèØËÉΩÊòØÁ¨¨‰∏âÊñπÁ±ªÂûãÔºåÂõ†‰∏∫‰Ω†‰∏çÂÜçÈúÄË¶Å‰æµÂÖ•ÂºèÂú∞ÁªßÊâøËá™ <code>Shape</code> Âü∫Á±ªÊàñÂàõÂª∫ÈÄÇÈÖçÂô®ÔºàËßÅ‚ÄúÊåáÂçó 24Ôºö‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£‚ÄùÔºâ„ÄÇÂõ†Ê≠§ÔºåÂÆåÁæéÂú∞ÈÅµÂæ™‰∫ÜÂºÄÈó≠ÂéüÂàôÔºàOCPÔºâ„ÄÇ</li>
<li><strong>ÊòæËëóÂáèÂ∞ëÈÄöÂ∏∏‰∏éÁªßÊâøÁõ∏ÂÖ≥ÁöÑÊ†∑Êùø‰ª£Á†Å</strong>ÔºöÂè™ÈúÄÂú®‰∏Ä‰∏™Âú∞ÊñπÂÆûÁé∞ÔºåËøôÂæàÂ•ΩÂú∞ÈÅµÂæ™‰∫ÜDRYÂéüÂàô„ÄÇ</li>
<li><strong>Áî±‰∫é <code>ShapeConcept</code> Âíå <code>ShapeModel</code> Á±ªÂ±û‰∫é‰∏ÄËµ∑Âπ∂‰∏îÂÖ±ÂêåÂΩ¢ÊàêÊäΩË±°</strong>ÔºåÊõ¥ÂÆπÊòìÈÅµÂæ™‰æùËµñÂÄíÁΩÆÂéüÂàôÔºàDIPÔºâ„ÄÇ</li>
<li><strong>ÈÄöËøáÂà©Áî®ÂèØÁî®ÁöÑÁ±ªÊ®°ÊùøÂáèÂ∞ëÈó¥Êé•Ë∞ÉÁî®ÁöÑÊï∞Èáè</strong>ÔºåÂèØ‰ª•ÊèêÈ´òÊÄßËÉΩ„ÄÇ</li>
</ul>
<p>Ê≠§Â§ñÔºåÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèËøòÊúâ‰∏Ä‰∏™Êõ¥‰∏∫‰ª§‰∫∫Âç∞Ë±°Ê∑±ÂàªÁöÑ‰ºòÂäøÔºö‰Ω†ÂèØ‰ª•Èùû‰æµÂÖ•ÂºèÂú∞‰∏∫‰ªª‰ΩïÁ±ªÂûãÈÖçÂ§áÂ§öÊÄÅË°å‰∏∫„ÄÇÁúüÁöÑÔºå‰ªª‰ΩïÁ±ªÂûãÔºåÁîöËá≥ÊòØÂÉè <code>int</code> ËøôÊ†∑ÁÆÄÂçïÁöÑÁ±ªÂûã„ÄÇ‰∏∫‰∫ÜÊºîÁ§∫Ëøô‰∏ÄÁÇπÔºåËÆ©Êàë‰ª¨Áúã‰∏Ä‰∏ã‰ª•‰∏ã‰ª£Á†ÅÁâáÊÆµÔºåÂÅáËÆæ <code>ShapeModel</code> ÈÖçÂ§á‰∫Ü‰∏Ä‰∏™ÈªòËÆ§ÁªòÂà∂Âô®ÔºàDefaultDrawerÔºâÔºåËØ•ÁªòÂà∂Âô®ÊúüÊúõË¢´ÂåÖË£ÖÁöÑÁ±ªÂûãÊèê‰æõ‰∏Ä‰∏™Ëá™Áî±ÁöÑ <code>draw()</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">draw</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÁªòÂà∂‰∏Ä‰∏™Êï¥Êï∞Ôºå‰æãÂ¶ÇÂ∞ÜÂÖ∂ÊâìÂç∞Âà∞ÂëΩ‰ª§Ë°å 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ShapeModel</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="n">shape</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">();</span>  <span class="c1">// ÁªòÂà∂Êï¥Êï∞   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>È¶ñÂÖàÔºåÊàë‰ª¨‰∏∫ <code>int</code> Êèê‰æõ‰∫Ü‰∏Ä‰∏™Ëá™Áî±ÁöÑ <code>draw()</code> ÂáΩÊï∞ÔºàÔºâ„ÄÇÂú® <code>main()</code> ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨Áé∞Âú®ÂÆû‰æãÂåñ‰∫Ü‰∏Ä‰∏™ <code>ShapeModel</code> Áî®‰∫é <code>int</code>„ÄÇËøô‰∏ÄË°å‰ºöÁºñËØëÔºåÂõ†‰∏∫ <code>int</code> Êª°Ë∂≥ÊâÄÊúâË¶ÅÊ±ÇÔºöÂÆÉÊèê‰æõ‰∫Ü‰∏Ä‰∏™Ëá™Áî±ÁöÑ <code>draw()</code> ÂáΩÊï∞„ÄÇÂõ†Ê≠§ÔºåÂú®‰∏ã‰∏ÄË°åÊàë‰ª¨ÂèØ‰ª•‚ÄúÁªòÂà∂‚ÄùËøô‰∏™Êï¥Êï∞„ÄÇ</p>
<p>‚Äú‰Ω†ÁúüÁöÑÂ∏åÊúõÊàëËøôÊ†∑ÂÅöÂêóÔºü‚Äù‰Ω†Áö±ÁùÄÁúâÂ§¥ÈóÆÈÅì„ÄÇ‰∏çÔºåÊàë‰∏çÂª∫ËÆÆ‰Ω†Âú®ÂÆûÈôÖÈ°πÁõÆ‰∏≠ËøôÊ†∑ÂÅö„ÄÇËØ∑Â∞ÜÊ≠§ËßÜ‰∏∫ÊäÄÊúØÊºîÁ§∫ÔºåËÄå‰∏çÊòØÊé®ËçêÂÅöÊ≥ï„ÄÇ‰ΩÜÊòØÂ∞ΩÁÆ°Â¶ÇÊ≠§ÔºåËøôÁ°ÆÂÆû‰ª§‰∫∫Âç∞Ë±°Ê∑±ÂàªÔºöÊàë‰ª¨ÂàöÂàöÈùû‰æµÂÖ•ÂºèÂú∞‰∏∫‰∏Ä‰∏™ <code>int</code> ÈÖçÂ§á‰∫ÜÂ§öÊÄÅË°å‰∏∫„ÄÇÁ°ÆÂÆû‰ª§‰∫∫Âç∞Ë±°Ê∑±ÂàªÔºÅ</p>
<p><strong>Â§ñÈÉ®Â§öÊÄÅ‰∏éÈÄÇÈÖçÂô®ÁöÑÊØîËæÉ</strong></p>
<p>‚ÄúÊó¢ÁÑ∂‰Ω†ÊèêÂà∞ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÔºåÊàëËßâÂæóÂÆÉ‰∏éÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÈùûÂ∏∏Áõ∏‰ºº„ÄÇËøô‰∏§ËÄÖ‰πãÈó¥Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü‚Äù ÂæàÂ•ΩÁöÑÈóÆÈ¢òÔºÅ‰Ω†ÊèêÂá∫‰∫ÜÂéüÂßãËÆ∫Êñá‰∏≠Cleeland„ÄÅSchmidtÂíåHarrison‰πüËÆ®ËÆ∫ËøáÁöÑÈóÆÈ¢ò„ÄÇÊòØÁöÑÔºåËøô‰∏§ÁßçËÆæËÆ°Ê®°ÂºèÁ°ÆÂÆûÈùûÂ∏∏Áõ∏‰ººÔºå‰ΩÜÊúâ‰∏Ä‰∏™ÈùûÂ∏∏ÊòéÊòæÁöÑÂå∫Âà´ÔºöËôΩÁÑ∂ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°Âºè‰∏ìÊ≥®‰∫éÊ†áÂáÜÂåñÊé•Âè£ÔºåÂπ∂‰ΩøÁ±ªÂûãÊàñÂáΩÊï∞ÈÄÇÂ∫îÁé∞ÊúâÁöÑÊé•Âè£Ôºå‰ΩÜÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂ§ñÈÉ®Â±ÇÊ¨°ÁªìÊûÑÔºå‰ªé‰∏ÄÁªÑÁõ∏ÂÖ≥ÁöÑÈùûÂ§öÊÄÅÁ±ªÂûã‰∏≠ËøõË°åÊäΩË±°„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇÊûú‰Ω†Â∞ÜÊüê‰∫õ‰∏úË•øÈÄÇÂ∫îÁé∞ÊúâÊé•Âè£ÔºåÂàôÔºàÂæàÂèØËÉΩÔºâÂ∫îÁî®ÁöÑÊòØÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°Âºè„ÄÇÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰Ω†‰∏∫‰∫Ü‰ª•Â§öÊÄÅÊñπÂºèÂ§ÑÁêÜ‰∏ÄÁªÑÁé∞ÊúâÁ±ªÂûãËÄåÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊäΩË±°ÔºåÂàôÔºàÊúÄÊúâÂèØËÉΩÔºâÂ∫îÁî®ÁöÑÊòØÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p><strong>ÂàÜÊûêÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥</strong></p>
<p>‚ÄúÊàëÊÑüËßâ‰Ω†ÈùûÂ∏∏ÂñúÊ¨¢Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÔºåÂØπÂêóÔºü‚Äù‰Ω†ÂèØËÉΩ‰ºöËøô‰πàÊÉ≥„ÄÇÊòØÁöÑÔºåÁ°ÆÂÆûÂ¶ÇÊ≠§ÔºåÊàëÂØπËøôÁßçËÆæËÆ°Ê®°ÂºèÊÑüÂà∞ÈùûÂ∏∏ÊÉäËÆ∂„ÄÇÂú®ÊàëÁúãÊù•ÔºåËøôÁßçËÆæËÆ°Ê®°ÂºèÊòØÂÆûÁé∞ÊùæËÄ¶ÂêàÁöÑÂÖ≥ÈîÆÔºåÈÅóÊÜæÁöÑÊòØÂÆÉÂπ∂‰∏çÂπø‰∏∫‰∫∫Áü•„ÄÇ‰πüËÆ∏ÊòØÂõ†‰∏∫ËÆ∏Â§öÂºÄÂèëËÄÖÂπ∂Ê≤°ÊúâÂÆåÂÖ®Êé•ÂèóÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªÁöÑÂéüÂàôÔºåÂπ∂ÂÄæÂêë‰∫éÂ∞ÜÊâÄÊúâÂÜÖÂÆπÈÉΩÊîæÂÖ•Â∞ëÊï∞Âá†‰∏™Á±ª‰∏≠„ÄÇÂ∞ΩÁÆ°ÊàëÂØπÂ§ñÈÉ®Â§öÊÄÅÂÖÖÊª°ÁÉ≠ÊÉÖÔºå‰ΩÜÊàë‰∏çÊÉ≥Áªô‰∫∫Áïô‰∏ãËøôÁßçËÆæËÆ°Ê®°ÂºèÂÆåÁæéÊó†Áº∫ÁöÑÂç∞Ë±°„ÄÇ‰∏çÔºåÊ≠£Â¶ÇÂ§öÊ¨°ÊèêÂà∞ÁöÑÔºåÊØè‰∏™ËÆæËÆ°ÈÉΩÊúâÂÖ∂‰ºòÁÇπÂíåÁº∫ÁÇπÔºåÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè‰πü‰∏ç‰æãÂ§ñ„ÄÇ</p>
<p>Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÁöÑ‰∏ªË¶Å‰∏çË∂≥Âú®‰∫éÂÆÉÂπ∂Ê≤°ÊúâÁúüÊ≠£Êª°Ë∂≥ÁÆÄÊ¥ÅÂíåÁÆÄÂçïËß£ÂÜ≥ÊñπÊ°àÁöÑÊúüÊúõÔºåÂ∞§ÂÖ∂ÊòØÂü∫‰∫éÂÄºËØ≠‰πâÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇÂÆÉ‰∏ç‰ºöÂáèÂ∞ëÊåáÈíàÁöÑ‰ΩøÁî®Ôºå‰∏ç‰ºöÂáèÂ∞ëÊâãÂä®ÂàÜÈÖçÁöÑÊï∞ÈáèÔºå‰πü‰∏ç‰ºöÈôç‰ΩéÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÁöÑÊï∞ÈáèÔºåÊõ¥‰∏ç‰ºöÁÆÄÂåñÁî®Êà∑‰ª£Á†Å„ÄÇÁõ∏ÂèçÔºåÁî±‰∫éÈúÄË¶ÅÊòæÂºèÂú∞ÂÆû‰æãÂåñ <code>ShapeModel</code> Á±ªÔºåÁî®Êà∑‰ª£Á†Å‰ºöÊòæÂæóÁ®çÂæÆÂ§çÊùÇ‰∏Ä‰∫õ„ÄÇÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰Ω†ËÆ§‰∏∫ËøôÊòØ‰∏Ä‰∏™‰∏•ÈáçÁöÑÁº∫ÁÇπÔºåÊàñËÄÖ‰Ω†Âú®ÊÉ≥‚ÄúËøôÂ∫îËØ•‰ª•ÊüêÁßçÊñπÂºèËá™Âä®Âåñ‚ÄùÔºåÈÇ£‰πàÊàëÊúâ‰∏Ä‰∏™Â•ΩÊ∂àÊÅØÔºöÂú®‚ÄúÊåáÂçó 32ÔºöËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§Êõø‰ª£ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‚Äù‰∏≠ÔºåÊàë‰ª¨Â∞ÜÊé¢ËÆ®‰∏ÄÁßçÁé∞‰ª£ C++ Ëß£ÂÜ≥ÊñπÊ°àÔºåÂÆÉÂèØ‰ª•‰ºòÈõÖÂú∞Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p>Èô§Ê≠§‰πãÂ§ñÔºåÊàëËøòÊÉ≥ÊèêÈÜí‰∏§ÁÇπÈúÄË¶ÅÊ≥®ÊÑèÁöÑÂú∞ÊñπÔºö</p>
<p><strong>ÈÄÇÂΩìÁöÑÊäΩË±°</strong>ÔºöÂ§ñÈÉ®Â§öÊÄÅÁöÑÂ∫îÁî®Âπ∂‰∏ç‰ºöÂÖçÈô§‰Ω†ÊÄùËÄÉÈÄÇÂΩìÊäΩË±°ÁöÑË¥£‰ªª„ÄÇ<code>ShapeConcept</code> Âü∫Á±ªÂêåÊ†∑Ë¶ÅÈÅµÂæ™Êé•Âè£ÈöîÁ¶ªÂéüÂàôÔºàISPÔºâ„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÊàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÂú∞Â∞ÜÂ§ñÈÉ®Â§öÊÄÅÂ∫îÁî®Âà∞‚ÄúÊåáÂçó 3ÔºöÈÄöËøáÂàÜÁ¶ªÊé•Âè£ÈÅøÂÖç‰∫∫‰∏∫ËÄ¶Âêà‚Äù‰∏≠ÁöÑ <code>Document</code> Á§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DocumentConcept</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Document</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">DocumentT</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DocumentModel</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">DocumentT</span> <span class="n">document_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>DocumentConcept</code> Á±ªÊâÆÊºî‰∫Ü <code>ShapeConcept</code> Âü∫Á±ªÁöÑËßíËâ≤ÔºåËÄå <code>DocumentModel</code> Á±ªÊ®°ÊùøÂàôÊâÆÊºî‰∫Ü <code>ShapeModel</code> Á±ªÊ®°ÊùøÁöÑËßíËâ≤„ÄÇÁÑ∂ËÄåÔºåËøô‰∏™Â§ñÈÉ®ÂåñÁöÑÂ±ÇÊ¨°ÁªìÊûÑ‰∏éÂéüÂßãÂ±ÇÊ¨°ÁªìÊûÑÂ≠òÂú®ÂêåÊ†∑ÁöÑÈóÆÈ¢òÔºöÂØπ‰∫éÂè™ÈúÄË¶Å <code>exportToJSON()</code> ÂäüËÉΩÁöÑÊâÄÊúâ‰ª£Á†ÅÊù•ËØ¥ÔºåÂÆÉÂºïÂÖ•‰∫ÜÂØπ <code>ByteStream</code> ÁöÑ‰∫∫‰∏∫‰æùËµñ„ÄÇÊ≠£Á°ÆÁöÑÂÅöÊ≥ïÊòØÈÄöËøáÂ∞ÜÊé•Âè£ÂàÜÁ¶ª‰∏∫ JSON ÂØºÂá∫ÂíåÂ∫èÂàóÂåñËøô‰∏§‰∏™Ê≠£‰∫§ÊñπÈù¢Êù•ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ„ÄÇ</p>
<p><strong>ËØ≠‰πâ‰∏ÄËá¥ÊÄß</strong>Ôºö</p>
<p>Â§ñÈÉ®Â§öÊÄÅÔºåÂ∞±ÂÉèÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°Âºè‰∏ÄÊ†∑Ôºå‰ΩøÂæóÂåÖË£ÖÈÇ£‰∫õ‰∏çÁ¨¶ÂêàËØ≠‰πâÈ¢ÑÊúüÁöÑÁ±ªÂûãÂèòÂæóÈùûÂ∏∏ÂÆπÊòì„ÄÇÁ±ª‰ºº‰∫é‚ÄúÊåáÂçó 24Ôºö‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£‚Äù‰∏≠ÁöÑÈ∏≠Â≠êÁ±ªÂûãÁ§∫‰æãÔºåÊàë‰ª¨ÂÅáË£ÖÁÅ´È∏°ÊòØ‰∏ÄÂè™È∏≠Â≠êÔºåÊàë‰ª¨‰πüÂÅáË£Ö <code>int</code> ÊòØ‰∏Ä‰∏™ÂΩ¢Áä∂„ÄÇ‰∏∫‰∫ÜÊª°Ë∂≥Ë¶ÅÊ±ÇÔºåÊàë‰ª¨ÊâÄË¶ÅÂÅöÁöÑÂ∞±ÊòØÊèê‰æõ‰∏Ä‰∏™Ëá™Áî±ÁöÑ <code>draw()</code> ÂáΩÊï∞„ÄÇËôΩÁÑ∂ËøôÂæàÁÆÄÂçïÔºå‰ΩÜÂèØËÉΩËøá‰∫éÁÆÄÂçï„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËØ∑ËÆ∞‰ΩèÁî®‰∫éÂÆû‰æãÂåñ <code>ShapeModel</code> Á±ªÊ®°ÊùøÁöÑÁ±ªÔºàÂ¶Ç <code>Circle</code>„ÄÅ<code>Square</code> Á≠âÔºâÂøÖÈ°ªÈÅµÂÆàÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºàLSPÔºâ„ÄÇÊØïÁ´üÔºå<code>ShapeModel</code> Á±ªÂè™ÊòØ‰∏Ä‰∏™ÂåÖË£ÖÂô®ÔºåÂπ∂Â∞Ü <code>ShapeConcept</code> Á±ªÂÆö‰πâÁöÑË¶ÅÊ±Ç‰º†ÈÄíÁªôÂÖ∑‰ΩìÁöÑÂΩ¢Áä∂„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂÖ∑‰ΩìÁöÑÂΩ¢Áä∂Ë¥üË¥£Ê≠£Á°ÆÂÆûÁé∞È¢ÑÊúüÁöÑË°å‰∏∫„ÄÇ‰ªª‰ΩïÊú™ËÉΩÂÆåÂÖ®Êª°Ë∂≥Ëøô‰∫õÊúüÊúõÁöÑÊÉÖÂÜµÈÉΩÂèØËÉΩÂØºËá¥ÔºàÊΩúÂú®ÁöÑÂæÆÂ¶ôÔºâË°å‰∏∫ÂºÇÂ∏∏„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÁî±‰∫éËøô‰∫õË¶ÅÊ±ÇÂ∑≤ÁªèË¢´Â§ñÈÉ®ÂåñÔºåÊ≤üÈÄöÈ¢ÑÊúüË°å‰∏∫ÂèòÂæóÊõ¥Âä†Âõ∞Èöæ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂú® <code>int</code> Á§∫‰æã‰∏≠ÔºåÂèØËÉΩÊòØÊàë‰ª¨Ëá™Â∑±ÈÄâÊã©ÁöÑÊäΩË±°ÊúâÈóÆÈ¢ò„ÄÇÊàñËÆ∏ <code>ShapeConcept</code> Âü∫Á±ªÂπ∂‰∏çËÉΩÂæàÂ•ΩÂú∞‰ª£Ë°®ÂΩ¢Áä∂ÁöÑÊäΩË±°„ÄÇÂêàÁêÜÂú∞ËØ¥ÔºåÂΩ¢Áä∂‰∏ç‰ªÖ‰ªÖÊòØÁªòÂà∂„ÄÇ‰πüËÆ∏Êàë‰ª¨Â∫îËØ•Â∞ÜÊäΩË±°ÂëΩÂêç‰∏∫ <code>Drawable</code>ÔºåËøôÊ†∑ LSP Â∞±‰ºöË¢´Êª°Ë∂≥„ÄÇ‰πüËÆ∏‰∏çÊòØ„ÄÇÊúÄÁªàÔºå‰∏ÄÂàáÈÉΩÂΩíÁªì‰∫éÊäΩË±°ÁöÑÈÄâÊã©„ÄÇËøôËÆ©Êàë‰ª¨ÂõûÂà∞Á¨¨ 2 Á´†ÁöÑ‰∏ªÈ¢òÔºö‚ÄúÊûÑÂª∫ÊäΩË±°ÁöÑËâ∫ÊúØ‚Äù„ÄÇËøôÂπ∂‰∏çÂÆπÊòìÔºå‰ΩÜ‰πüËÆ∏Ëøô‰∫õ‰æãÂ≠êË°®ÊòéÂÆÉÊòØÈáçË¶ÅÁöÑÔºåÈùûÂ∏∏ÈáçË¶Å„ÄÇËøôÂèØËÉΩÊòØËΩØ‰ª∂ËÆæËÆ°ÁöÑÊú¨Ë¥®„ÄÇ</p>
<p>ÊÄª‰πãÔºåÂ∞ΩÁÆ°Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÂèØËÉΩÊó†Ê≥ïÊª°Ë∂≥‰Ω†ÂØπÁÆÄÂçïÊàñÂü∫‰∫éÂÄºÁöÑËß£ÂÜ≥ÊñπÊ°àÁöÑÊúüÊúõÔºå‰ΩÜÂÆÉ‰ªçÁÑ∂ÊòØÂÆûÁé∞ËΩØ‰ª∂ÂÆû‰ΩìËß£ËÄ¶ÁöÑÈáçË¶Å‰∏ÄÊ≠•„ÄÇ‰ªéÂáèÂ∞ë‰æùËµñÁöÑËßíÂ∫¶Êù•ÁúãÔºåËøôÁßçËÆæËÆ°Ê®°Âºè‰ºº‰πéÊòØÊùæËÄ¶ÂêàÁöÑÂÖ≥ÈîÆÊàêÂàÜÔºåÂπ∂‰∏îÊòØÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªÂäõÈáèÁöÑ‰∏Ä‰∏™Áªù‰Ω≥Á§∫‰æã„ÄÇ</p>
<p>ÂÆÉËøòÁªôÊàë‰ª¨‰∏Ä‰∏™ÈáçË¶ÅÂêØÁ§∫Ôºö‰ΩøÁî®ËøôÁßçËÆæËÆ°Ê®°ÂºèÔºå‰Ω†ÂèØ‰ª•Èùû‰æµÂÖ•ÂºèÂú∞‰∏∫‰ªª‰ΩïÁ±ªÂûãÈÖçÂ§áÂ§öÊÄÅË°å‰∏∫Ôºà‰æãÂ¶ÇËôöÊãüÂáΩÊï∞ÔºâÔºå‰ªéËÄå‰Ωø‰ªª‰ΩïÁ±ªÂûãÈÉΩÂèØ‰ª•Ë°®Áé∞ÂæóÂ§öÊÄÅÔºåÁîöËá≥ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂÄºÁ±ªÂûãÂ¶Ç <code>int</code>„ÄÇËøô‰∏ÄËÆ§ËØÜÂºÄÂêØ‰∫Ü‰∏Ä‰∏™ÂÖ®Êñ∞ÁöÑ„ÄÅ‰ª§‰∫∫ÂÖ¥Â•ãÁöÑËÆæËÆ°Á©∫Èó¥ÔºåÊàë‰ª¨Â∞ÜÂú®‰∏ã‰∏ÄÁ´†ÁªßÁª≠Êé¢Á¥¢„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Â∫îÁî®Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑÊòØÊîØÊåÅÂØπÈùûÂ§öÊÄÅÁ±ªÂûãÁöÑÂ§öÊÄÅÂ§ÑÁêÜ„ÄÇ</li>
<li>Â∞ÜÂ§ñÈÉ®Â§öÊÄÅÊÄßËÆæËÆ°Ê®°ÂºèËßÜ‰∏∫ÂÆûÁé∞ÊùæËÄ¶ÂêàÁöÑÂÖ≥ÈîÆ„ÄÇ</li>
<li>Âà©Áî®Â§ñÈÉ®ÂåñÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÁöÑËÆæËÆ°ÁÅµÊ¥ªÊÄß„ÄÇ</li>
<li>ÁêÜËß£Â§ñÈÉ®Â§öÊÄÅÂíåÈÄÇÈÖçÂô®‰πãÈó¥ÁöÑÂå∫Âà´„ÄÇ</li>
<li>ÈÄâÊã©Èùû‰æµÂÖ•ÊÄßËß£ÂÜ≥ÊñπÊ°àËÄå‰∏çÊòØ‰æµÂÖ•ÊÄßËß£ÂÜ≥ÊñπÊ°à„ÄÇ</li>
</ul>
<h2 id="Á¨¨ÂÖ´Á´†-Á±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°Âºè">Á¨¨ÂÖ´Á´† Á±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°Âºè
</h2><p>ÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ªÂíåÂÄºËØ≠‰πâÊòØÊàëÂú®Êú¨‰π¶‰∏≠Â§öÊ¨°ÊèêÂà∞ÁöÑ‰∏§‰∏™Ê†∏ÂøÉË¶ÅÁÇπ„ÄÇ</p>
<p>Âú®Êú¨Á´†‰∏≠ÔºåËøô‰∏§ËÄÖË¢´Â∑ßÂ¶ôÂú∞ÁªìÂêàËøõ‰∫Ü‰∏Ä‰∏™ÊúÄÊúâË∂£ÁöÑÁé∞‰ª£C++ËÆæËÆ°Ê®°Âºè‰πã‰∏ÄÔºöÁ±ªÂûãÊì¶Èô§„ÄÇ</p>
<p>Èâ¥‰∫éËøô‰∏ÄÊ®°ÂºèÂèØË¢´ËßÜ‰∏∫ÂΩìÂâçÊúÄ‰∏∫ÁÉ≠Èó®ÁöÑËØùÈ¢ò‰πã‰∏ÄÔºåÂú®Êú¨Á´†‰∏≠ÊàëÂ∞Ü‰∏∫‰Ω†Êèê‰æõ‰∏Ä‰∏™ÈùûÂ∏∏ÂÖ®Èù¢„ÄÅÊ∑±ÂÖ•ÁöÑ‰ªãÁªçÔºåÊ∂µÁõñÁ±ªÂûãÊì¶Èô§ÁöÑÊâÄÊúâÊñπÈù¢„ÄÇÂΩìÁÑ∂ÔºåËøôÂåÖÊã¨ÊâÄÊúâ‰∏éËÆæËÆ°Áõ∏ÂÖ≥ÁöÑÊñπÈù¢‰ª•ÂèäÂ§ßÈáèÂÖ≥‰∫éÂÆûÁé∞ÁªÜËäÇÁöÑÂÖ∑‰Ωì‰ø°ÊÅØ„ÄÇ</p>
<p>Âú® <strong>‚ÄúÂáÜÂàô32ÔºöËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§Êõø‰ª£ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ</strong>‚Äù‰∏≠ÔºåÊàë‰ºöÂêë‰Ω†‰ªãÁªçÁ±ªÂûãÊì¶Èô§ÔºåÂπ∂ËÆ©‰Ω†‰∫ÜËß£‰∏∫‰ΩïËøôÁßçËÆæËÆ°Ê®°ÂºèÊòØ‰æùËµñÊÄßÂáèÂ∞ëÂíåÂÄºËØ≠‰πâÂ¶ÇÊ≠§Âá∫Ëâ≤ÁöÑÁªìÂêà„ÄÇÊàëËøò‰ºöÂ∏¶‰Ω†Ëµ∞Ëøá‰∏Ä‰∏™Âü∫Êú¨ÁöÑÊã•ÊúâÁ±ªÂûãÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞ËøáÁ®ã„ÄÇ</p>
<p>‚Äú<strong>ÂáÜÂàô33ÔºöÊ≥®ÊÑèÁ±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ</strong>‚ÄùÊòØ‰∏Ä‰∏™‰æãÂ§ñÔºöÂ∞ΩÁÆ°Âú®ËøôÊú¨‰π¶‰∏≠Êàë‰∏ªË¶ÅÂÖ≥Ê≥®ÁöÑÊòØ‰æùËµñÊÄßÂíåËÆæËÆ°ÊñπÈù¢Ôºå‰ΩÜÂú®Ëøô‰∏ÄÊù°ÊåáÂçó‰∏≠ÔºåÊàëÂ∞ÜÂÆåÂÖ®‰∏ìÊ≥®‰∫é‰∏éÊÄßËÉΩÁõ∏ÂÖ≥ÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇÊàë‰ºöÂ±ïÁ§∫Â¶Ç‰ΩïÂ∫îÁî®Â∞èÁºìÂÜ≤Âå∫‰ºòÂåñ(SBO)‰ª•ÂèäÂ¶Ç‰ΩïÂÆûÁé∞ÊâãÂä®ËôöÊãüÂàÜÊ¥æÊù•Âä†ÈÄü‰Ω†ÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞„ÄÇ</p>
<p>Âú®‚Äú<strong>ÂáÜÂàô34ÔºöÊ≥®ÊÑèÊã•ÊúâÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®ÁöÑËÆæÁΩÆÊàêÊú¨</strong>‚ÄùÈÉ®ÂàÜÔºåÊàë‰ª¨Â∞ÜÊé¢ËÆ®Êã•ÊúâÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞ÁöÑËÆæÁΩÆÊàêÊú¨„ÄÇÊàë‰ª¨‰ºöÂèëÁé∞ÔºåÂÄºËØ≠‰πâ‰º¥ÈöèÊúâ‰∏Ä‰∏™ÊàêÊú¨ÔºåÊúâÊó∂Êàë‰ª¨ÂèØËÉΩ‰∏çÊÑøÊÑèÊîØ‰ªòËøô‰∏™ÊàêÊú¨„ÄÇ</p>
<p>Âü∫‰∫éÊ≠§ÂéüÂõ†ÔºåÊàë‰ª¨Êï¢‰∫éË∏èÂÖ•ÂºïÁî®ËØ≠‰πâÈ¢ÜÂüüÔºåÂÆûÁé∞‰∏ÄÁßçÈùûÊã•ÊúâÁöÑÁ±ªÂûãÊì¶Èô§ÂΩ¢Âºè„ÄÇÈÄöËøáËøô‰∫õËÆ®ËÆ∫ÔºåÊàë‰ª¨ÂèØ‰ª•Êõ¥Ê∑±ÂàªÂú∞ÁêÜËß£Á±ªÂûãÊì¶Èô§Ê®°ÂºèÂú®Áé∞‰ª£C++ÁºñÁ®ã‰∏≠ÁöÑÈáçË¶ÅÊÄßÂíåÂÆûÈôÖÂ∫îÁî®‰ª∑ÂÄº„ÄÇ</p>
<h3 id="ÂáÜÂàô32ËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§Êõø‰ª£ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ">ÂáÜÂàô32ÔºöËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§Êõø‰ª£ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ
</h3><p>Êú¨‰π¶‰∏≠ÂèçÂ§çÊèêÂà∞ÁöÑÂá†Êù°Âª∫ËÆÆÂåÖÊã¨Ôºö</p>
<ul>
<li>ÊúÄÂ∞èÂåñ‰æùËµñ„ÄÇ</li>
<li>ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ„ÄÇ</li>
<li>‰ºòÂÖàÁªÑÂêàËÄåÈùûÁªßÊâø„ÄÇ</li>
<li>‰ºòÂÖàÈùû‰æµÂÖ•ÂºèËß£ÂÜ≥ÊñπÊ°à„ÄÇ</li>
<li>‰ºòÂÖàÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ„ÄÇ</li>
</ul>
<p>ÂçïÁã¨‰ΩøÁî®Ëøô‰∫õÊåáÂØºÂéüÂàôÔºåÂÆÉ‰ª¨ÂØπ‰ª£Á†ÅË¥®ÈáèÊúâÈùûÂ∏∏ÁßØÊûÅÁöÑÂΩ±Âìç„ÄÇÁÑ∂ËÄåÔºåÁªìÂêàËµ∑Êù•‰ΩøÁî®ÔºåËøô‰∫õÊåáÂçóËØÅÊòéÊõ¥Âä†ÊúâÊïà„ÄÇ</p>
<p>Âú®ËÆ®ËÆ∫‚Äú<strong>ÂáÜÂàô31Ôºö‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÂÆûÁé∞Èùû‰æµÂÖ•ÂºèËøêË°åÊó∂Â§öÊÄÅÊÄß</strong>‚Äù‰∏≠ÁöÑÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÊó∂Ôºå‰Ω†Â∑≤Áªè‰ΩìÈ™åËøáËøô‰∏ÄÁÇπ„ÄÇ</p>
<p>ÊèêÂèñÂ§öÊÄÅË°å‰∏∫Ë¢´ËØÅÊòéÊòØÈùûÂ∏∏Âº∫Â§ßÁöÑÔºåÂπ∂Ëß£ÈîÅ‰∫ÜÂâçÊâÄÊú™ÊúâÁöÑÊùæËÄ¶ÂêàÊ∞¥Âπ≥„ÄÇÁÑ∂ËÄåÔºå‰ª§‰∫∫Â§±ÊúõÁöÑÊòØÔºåÊºîÁ§∫ÁöÑÂ§ñÈÉ®Â§öÊÄÅÂÆûÁé∞Âπ∂Ê≤°ÊúâÁªô‰Ω†‰∏ÄÁßçÈùûÂ∏∏Áé∞‰ª£ÁöÑËß£ÂÜ≥ÈóÆÈ¢òÁöÑÊñπÂºè„ÄÇ</p>
<p>ËØ•ÂÆûÁé∞Âü∫‰∫éÂºïÁî®ËØ≠‰πâÔºàËÆ∏Â§öÊåáÈíà„ÄÅÊâãÂä®ÂàÜÈÖçÂíåÊâãÂä®ÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜÔºâÔºåËÄå‰∏çÊòØÈÅµÂæ™ÂÅèÂ•ΩÂÄºËØ≠‰πâÁöÑÂª∫ËÆÆ„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå‰Ω†ÊúüÂæÖÁöÑÁº∫Â§±ÁªÜËäÇÊòØÂü∫‰∫éÂÄºËØ≠‰πâÁöÑÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÂÆûÁé∞„ÄÇËÄåËøô‰∏™Ëß£ÂÜ≥ÊñπÊ°àÈÄöÂ∏∏Ë¢´Áß∞‰∏∫Á±ªÂûãÊì¶Èô§„ÄÇ</p>
<p><strong>Á±ªÂûãÊì¶Èô§ÁöÑÂéÜÂè≤</strong></p>
<p>Âú®ËØ¶ÁªÜ‰ªãÁªç‰πãÂâçÔºåËÆ©Êàë‰ª¨Âø´ÈÄüÂõûÈ°æ‰∏Ä‰∏ãÁ±ªÂûãÊì¶Èô§ÁöÑÂéÜÂè≤„ÄÇ‚ÄúÂæó‰∫ÜÂêß‚ÄùÔºå‰Ω†ÂèØËÉΩ‰ºöËØ¥Ôºå‚ÄúËøôÁúüÁöÑÊúâÂøÖË¶ÅÂêóÔºüÊàëËø´‰∏çÂèäÂæÖÂú∞ÊÉ≥ÁúãÂà∞ÂÆÉÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑ„ÄÇ‚Äù</p>
<p>Â•ΩÂêßÔºåÊàë‰øùËØÅÁÆÄÁü≠ËØ¥Êòé„ÄÇ‰ΩÜÁ°ÆÂÆûÔºåÊàëËÆ§‰∏∫ËøôÊòØËÆ®ËÆ∫‰∏≠ÂøÖË¶ÅÁöÑÁªÜËäÇÔºåÊúâ‰∏§‰∏™ÂéüÂõ†ÔºöÈ¶ñÂÖàÔºåÂ±ïÁ§∫Êàë‰ª¨‰Ωú‰∏∫Á§æÂå∫ÔºåÈô§‰∫ÜÊúÄÊúâÁªèÈ™åÁöÑC++‰∏ìÂÆ∂‰πãÂ§ñÔºåÂèØËÉΩÂøΩËßÜ‰∫ÜËøôÈ°πÊäÄÊúØÂ§™‰πÖÔºõÂÖ∂Ê¨°ÔºåÁªô‰∫àËøôÈ°πÊäÄÊúØÂèëÊòéËÄÖÂ∫îÊúâÁöÑËÆ§ÂèØ„ÄÇ</p>
<p>Á±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°ÂºèÂ∏∏ÂΩíÂäü‰∫éÊúÄÊó©‰πüÊòØÊúÄËëóÂêçÁöÑ‰ªãÁªçËøô‰∏ÄÊäÄÊúØ‰πã‰∏ÄÁöÑÊºîËÆ≤Ôºå</p>
<p>Âú®2013Âπ¥ÁöÑ<strong>GoingNative</strong>Â§ß‰ºö‰∏äÔºå<strong>Sean Parent</strong>ÂÅö‰∫ÜÈ¢ò‰∏∫„ÄäÁªßÊâøÊòØÈÇ™ÊÅ∂ÁöÑÂü∫Á°ÄÁ±ª„ÄãÁöÑÊºîËÆ≤Ôºå‰ªñÂõûÈ°æ‰∫Ü<strong>Photoshop</strong>ÂºÄÂèëÁöÑÁªèÈ™åÔºåÂπ∂ËÆ®ËÆ∫‰∫ÜÂü∫‰∫éÁªßÊâøÂÆûÁé∞ÁöÑÂç±Èô©ÊÄßÂíåÁº∫ÁÇπ„ÄÇ</p>
<p>‰ªñËøòÊèêÂá∫‰∫Ü‰∏ÄÁßçËß£ÂÜ≥ÁªßÊâøÈóÆÈ¢òÁöÑÊñπÊ≥ïÔºåÂêéÊù•Ë¢´Áß∞‰∏∫Á±ªÂûãÊì¶Èô§„ÄÇ</p>
<p>Â∞ΩÁÆ°SeanÁöÑÊºîËÆ≤ÂèØËÉΩÊòØÊúÄÊó©ÁöÑËÆ∞ÂΩï‰πã‰∏ÄÔºå‰πüÂõ†Ê≠§ÂèØËÉΩÊòØÂÖ≥‰∫éÁ±ªÂûãÊì¶Èô§ÊúÄÁü•ÂêçÁöÑËµÑÊ∫êÔºå‰ΩÜÂú®ÈÇ£‰πãÂâçËøôÁßçÊäÄÊúØÂ∑≤ÁªèË¢´‰ΩøÁî®‰∫ÜÂæàÈïøÊó∂Èó¥„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå<strong>Á±ªÂûãÊì¶Èô§</strong>Ë¢´Áî®‰∫é<strong>Boost</strong>Â∫ì‰∏≠ÁöÑÂ§ö‰∏™Âú∞ÊñπÔºåÊØîÂ¶Ç<strong>Douglas Gregor</strong>‰∏∫<strong>boost::function</strong>ÊâÄÂÅöÁöÑÂ∑•‰Ωú„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÊçÆÊàëÊâÄÁü•ÔºåËøôÈ°πÊäÄÊúØÊúÄÊó©ÊòØÂú®<strong>Kevlin Henney</strong>‰∫é2000Âπ¥7ÊúàËá≥8ÊúàÁâàÁöÑ„ÄäC++ Report„Äã‰∏äÂèëË°®ÁöÑ‰∏ÄÁØáËÆ∫Êñá‰∏≠ËÆ®ËÆ∫ÁöÑ„ÄÇ</p>
<p>Âú®ËøôÁØáËÆ∫Êñá‰∏≠Ôºå<strong>Kevlin</strong>ÈÄöËøá‰∏Ä‰∏™‰ª£Á†ÅÁ§∫‰æãÂ±ïÁ§∫‰∫Ü<strong>Á±ªÂûãÊì¶Èô§</strong>ÔºåËØ•Á§∫‰æãÂêéÊù•ÊºîÂèòÊàê‰∫ÜÊàë‰ª¨Áé∞Âú®ÊâÄÁü•ÁöÑC++17ÁöÑ<strong>std::any</strong>„ÄÇ</p>
<p>ÊúÄÈáçË¶ÅÁöÑÊòØÔºå‰ªñÊòØÁ¨¨‰∏Ä‰∏™‰ºòÈõÖÂú∞ÁªìÂêàÂá†ÁßçËÆæËÆ°Ê®°ÂºèÊù•Âõ¥Áªï‰∏ÄÁªÑÊó†ÂÖ≥ÁöÑ„ÄÅÈùûÂ§öÊÄÅÁ±ªÂûãÂΩ¢ÊàêÂü∫‰∫éÂÄºËØ≠‰πâÂÆûÁé∞ÁöÑ‰∫∫„ÄÇ</p>
<p>Ëá™ÈÇ£Êó∂‰ª•Êù•ÔºåËÆ∏Â§öÂ∏∏ËßÅÁöÑÁ±ªÂûãÈááÁî®‰∫ÜËøôÁßçÊäÄÊúØÔºå‰∏∫ÂêÑÁßçÂ∫îÁî®Êèê‰æõ‰∫ÜÂÄºÁ±ªÂûã„ÄÇÂÖ∂‰∏≠‰∏Ä‰∫õÁ±ªÂûãÁîöËá≥ËøõÂÖ•‰∫ÜÊ†áÂáÜÂ∫ì„ÄÇ‰æãÂ¶ÇÔºåÊàë‰ª¨Â∑≤ÁªèÁúãÂà∞‰∫Ü‰ª£Ë°®ÂèØË∞ÉÁî®ÂØπË±°ÂÄºÊäΩË±°ÁöÑ<strong>std::function</strong>Ôºå‰ª•ÂèäÊàëÊèêÂà∞ËøáÁöÑ‰ª£Ë°®Âá†‰πé‰ªª‰Ωï‰∏úË•øÁöÑÊäΩË±°ÂÆπÂô®ÂÄºÔºàÂõ†Ê≠§ÂæóÂêçÔºâ‰ΩÜ‰∏çÊö¥Èú≤‰ªª‰ΩïÂäüËÉΩÁöÑ<strong>std::any</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;any&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">string_literals</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="n">std</span><span class="o">::</span><span class="n">any</span> <span class="n">a</span><span class="p">;</span>          <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™Á©∫ÁöÑ &#39;any&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>               <span class="c1">// Â≠òÂÇ®‰∏Ä‰∏™&#39;int&#39;Âà∞ &#39;any&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">a</span> <span class="o">=</span> <span class="s">&#34;some string&#34;</span><span class="n">s</span><span class="p">;</span>  <span class="c1">// Â∞Ü &#39;int&#39; ÊõøÊç¢‰∏∫ &#39;std::string&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">   <span class="c1">// Êàë‰ª¨ËÉΩÂÅöÁöÑÂè™ÊòØ‰ªé &#39;any&#39; ‰∏≠ÂèñÂõûÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">any_cast</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøòÊúâ‰ΩøÁî®Á±ªÂûãÊì¶Èô§Â≠òÂÇ®ÂàÜÈÖçÂà†Èô§Âô®ÁöÑ<strong>std::shared_ptr</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ÂàõÂª∫Â∏¶ÊúâËá™ÂÆö‰πâÂà†Èô§Âô®ÁöÑ&#39;std::shared_ptr&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// Ê≥®ÊÑèÂà†Èô§Âô®‰∏çÊòØÁ±ªÂûãÁöÑ‰∏ÄÈÉ®ÂàÜÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">s</span><span class="p">{</span><span class="k">new</span> <span class="kt">int</span><span class="p">{</span><span class="mi">42</span><span class="p">},</span> <span class="p">[](</span><span class="kt">int</span><span class="o">*</span> <span class="n">ptr</span><span class="p">){</span> <span class="k">delete</span> <span class="n">ptr</span><span class="p">;</span> <span class="p">}};</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="c1">// &#39;std::shared_ptr&#39; Âú®‰ΩúÁî®ÂüüÁªìÊùüÊó∂ÈîÄÊØÅÔºå
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">// ÈÄöËøáËá™ÂÆö‰πâÂà†Èô§Âô®Âà†Èô§&#39;int&#39;„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚ÄúÁúãËµ∑Êù•Âè™ÈúÄË¶Å‰∏∫Âà†Èô§Âô®Êèê‰æõÁ¨¨‰∫å‰∏™Ê®°ÊùøÂèÇÊï∞‰ºöÊõ¥ÁÆÄÂçïÔºåÂ∞±ÂÉè<strong>std::unique_ptr</strong>ÈÇ£Ê†∑„ÄÇ‰∏∫‰ªÄ‰πà<strong>std::shared_ptr</strong>‰∏ç‰ª•Áõ∏ÂêåÊñπÂºèÂÆûÁé∞Âë¢Ôºü‚Äù</p>
<p>ÂÖ∂ÂÆûÔºå<strong>std::shared_ptr</strong>Âíå<strong>std::unique_ptr</strong>ÁöÑËÆæËÆ°‰∏çÂêåÊòØÊúâÂÖÖÂàÜÁêÜÁî±ÁöÑ„ÄÇ</p>
<p><strong>std::unique_ptr</strong>ÁöÑÁêÜÂøµÊòØÊúÄÁÆÄÂçïÁöÑÂéüÂßãÊåáÈíàÂåÖË£ÖÔºåÂÆÉÂ∫îÂÉèÂéüÂßãÊåáÈíà‰∏ÄÊ†∑Âø´ÔºåÂπ∂‰∏îÂ§ßÂ∞è‰πüÁõ∏Âêå„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå‰∏çÂ∏åÊúõÂ∞ÜÂà†Èô§Âô®‰∏éÊâòÁÆ°ÊåáÈíà‰∏ÄËµ∑Â≠òÂÇ®„ÄÇÂõ†Ê≠§ÔºåÂØπ‰∫éÊó†Áä∂ÊÄÅÂà†Èô§Âô®Ôºå<strong>std::unique_ptr</strong>ÁöÑËÆæËÆ°ÂèØ‰ª•ÈÅøÂÖç‰ªª‰ΩïÂ∞∫ÂØ∏ÂºÄÈîÄ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºå‰∏çÂπ∏ÁöÑÊòØÔºåËøô‰∏™Á¨¨‰∫å‰∏™Ê®°ÊùøÂèÇÊï∞ÂæàÂÆπÊòìË¢´ÂøΩÁï•ÔºåÂØºËá¥‰∫∫‰∏∫ÁöÑÈôêÂà∂„ÄÇÁõ∏ÊØî‰πã‰∏ãÔºå<strong>std::shared_ptr</strong>ÁöÑËÆæËÆ°ÈÅøÂÖç‰∫ÜËøôÁßçËÄ¶ÂêàÔºåÂõ†‰∏∫ÂÆÉÊúâÊú∫‰ºö‰ΩøÁî®Á±ªÂûãÊì¶Èô§ÂÆûÈôÖ‰∏äÊì¶Èô§Âà†Èô§Âô®ÁöÑÁ±ªÂûãÔºåÁßªÈô§‰ªª‰ΩïÂΩ¢ÂºèÁöÑÂèØËÉΩ‰æùËµñ„ÄÇ</p>
<p><strong>Á±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°ÂºèËß£Êûê</strong></p>
<p>‚ÄúÂìáÔºåËøôÂê¨Ëµ∑Êù•Á°ÆÂÆûÂæàÊúâË∂£„ÄÇËøôËÆ©ÊàëÂØπÂ≠¶‰π†Á±ªÂûãÊì¶Èô§Êõ¥Âä†ÂÖ¥Â•ã‰∫Ü„ÄÇ‚Äù</p>
<p>Â•ΩÂêßÔºåÈÇ£Êàë‰ª¨ÂºÄÂßãÂêß„ÄÇÁÑ∂ËÄåÔºåËØ∑‰∏çË¶ÅÊúüÂæÖ‰ªª‰ΩïÈ≠îÊ≥ïÊàñÈù©ÂëΩÊÄßÁöÑÊñ∞ÊÉ≥Ê≥ï„ÄÇ</p>
<p>Á±ªÂûãÊì¶Èô§Âè™‰∏çËøáÊòØ‰∏Ä‰∏™Â§çÂêàËÆæËÆ°Ê®°ÂºèÔºåÊÑèÂë≥ÁùÄÂÆÉÊòØÂÖ∂‰ªñ‰∏âÁßçËÆæËÆ°Ê®°ÂºèÁöÑÈùûÂ∏∏ËÅ™Êòé‰∏î‰ºòÈõÖÁöÑÁªÑÂêàÔºå</p>
<p>Ëøô‰∏âÁßçËÆæËÆ°Ê®°ÂºèÂàÜÂà´ÊòØ <strong>Â§ñÈÉ®Â§öÊÄÅ</strong>ÔºàÂÆûÁé∞Ëß£ËÄ¶ÊïàÊûúÂíåÁ±ªÂûãÊì¶Èô§Èùû‰æµÂÖ•ÊÄßÊú¨Ë¥®ÁöÑÂÖ≥ÈîÆÊàêÂàÜÔºõÂèÇËßÅ‚ÄúÂáÜÂàô31Ôºö‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÂÆûÁé∞Èùû‰æµÂÖ•ÂºèËøêË°åÊó∂Â§öÊÄÅÊÄß‚ÄùÔºâ„ÄÅ</p>
<p><strong>Ê°•Êé•Ê®°Âºè</strong>ÔºàÂàõÂª∫Âü∫‰∫éÂÄºËØ≠‰πâÂÆûÁé∞ÁöÑÂÖ≥ÈîÆÔºõÂèÇËßÅ‚ÄúÂáÜÂàô28ÔºöÊûÑÂª∫Ê°•Ê¢Å‰ª•Ê∂àÈô§Áâ©ÁêÜ‰æùËµñ‚ÄùÔºâ‰ª•ÂèäÔºàÂèØÈÄâÁöÑÔºâ</p>
<p><strong>ÂéüÂûãÊ®°Âºè</strong>ÔºàÂ§ÑÁêÜÁªìÊûúÂÄºÁöÑÂ§çÂà∂ËØ≠‰πâÊâÄÈúÄÔºõÂèÇËßÅ‚ÄúÂáÜÂàô30ÔºöÂ∫îÁî®ÂéüÂûãËøõË°åÊäΩË±°Â§çÂà∂Êìç‰Ωú‚ÄùÔºâ„ÄÇ</p>
<p>Ëøô‰∏â‰∏™ËÆæËÆ°Ê®°ÂºèÊûÑÊàê‰∫ÜÁ±ªÂûãÊì¶Èô§ÁöÑÊ†∏ÂøÉÔºåÂΩìÁÑ∂ÔºåË¶ÅËÆ∞‰ΩèÁöÑÊòØÔºåÂ≠òÂú®‰∏çÂêåÁöÑËß£ÈáäÂíåÂÆûÁé∞Ôºå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÈÄÇÂ∫îÁâπÂÆö‰∏ä‰∏ãÊñá„ÄÇÁªìÂêàËøô‰∏â‰∏™ËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑÊòØÂàõÂª∫‰∏Ä‰∏™ÂåÖË£ÖÁ±ªÂûãÔºåÂÆÉ‰ª£Ë°®‰∫Ü‰∏ÄÁßçÊùæÊï£ËÄ¶Âêà„ÄÅÈùû‰æµÂÖ•ÂºèÁöÑÊäΩË±°„ÄÇ</p>
<p><strong>Á±ªÂûãÊì¶Èô§Â§çÂêàËÆæËÆ°Ê®°Âºè</strong></p>
<p><strong>ÊÑèÂõæ</strong>Ôºö‚Äú‰∏∫‰∏ÄÁªÑÊâ©Â±ïÁöÑ„ÄÅ‰∏çÁõ∏ÂÖ≥ÁöÑ„ÄÅÂèØËÉΩÈùûÂ§öÊÄÅ‰ΩÜÂÖ∑ÊúâÁõ∏ÂêåËØ≠‰πâË°å‰∏∫ÁöÑÁ±ªÂûãÊèê‰æõÂü∫‰∫éÂÄºÁöÑ„ÄÅÈùû‰æµÂÖ•ÂºèÁöÑÊäΩË±°„ÄÇ‚Äù</p>
<p>Ëøô‰∏™Ë°®Ëø∞Êó®Âú®Â∞ΩÂèØËÉΩÁÆÄÊ¥Å‰∏îÂøÖË¶ÅÂú∞Á≤æÁ°Æ„ÄÇÁÑ∂ËÄåÔºåËøô‰∏™ÊÑèÂõæÁöÑÊØè‰∏Ä‰∏™ÁªÜËäÇÈÉΩÂ∏¶ÊúâÊÑè‰πâ„ÄÇÂõ†Ê≠§ÔºåËØ¶ÁªÜÈòêËø∞ÂèØËÉΩÊòØÊúâÂ∏ÆÂä©ÁöÑÔºö</p>
<ul>
<li><strong>Âü∫‰∫éÂÄºÁöÑ</strong>Ôºö Á±ªÂûãÊì¶Èô§ÁöÑÊÑèÂõæÊòØÂàõÂª∫ÂèØ‰ª•Â§çÂà∂„ÄÅÁßªÂä®ÔºåÂπ∂‰∏îÊúÄÈáçË¶ÅÁöÑÊòØÊòì‰∫éÊé®ÁêÜÁöÑÂÄºÁ±ªÂûã„ÄÇÁÑ∂ËÄåÔºåËøôÊ†∑ÁöÑÂÄºÁ±ªÂûãÂπ∂‰∏çÂÖ∑Â§áÂ∏∏ËßÑÂÄºÁ±ªÂûãÁöÑÂêåÁ≠âË¥®ÈáèÔºõÂ≠òÂú®‰∏Ä‰∫õÈôêÂà∂„ÄÇÁâπÂà´ÊòØÔºåÁ±ªÂûãÊì¶Èô§ÊúÄÈÄÇÂêà‰∫é‰∏ÄÂÖÉÊìç‰ΩúÔºå‰ΩÜÂØπ‰∫é‰∫åÂÖÉÊìç‰ΩúÊúâ‰∏ÄÂÆöÁöÑÂ±ÄÈôêÊÄß„ÄÇ</li>
<li><strong>Èùû‰æµÂÖ•ÂºèÁöÑ</strong>Ôºö Á±ªÂûãÊì¶Èô§ÁöÑÊÑèÂõæÊòØÂü∫‰∫éÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÁöÑ‰æãÂ≠êÂàõÂª∫‰∏ÄÁßçÂ§ñÈÉ®„ÄÅÈùû‰æµÂÖ•ÂºèÁöÑÊäΩË±°„ÄÇÊâÄÊúâÊèê‰æõÊäΩË±°ÊâÄÊúüÊúõË°å‰∏∫ÁöÑÁ±ªÂûãÈÉΩ‰ºöËá™Âä®ÂæóÂà∞ÊîØÊåÅÔºåËÄåÊó†ÈúÄÂØπÂÆÉ‰ª¨ËøõË°å‰ªª‰Ωï‰øÆÊîπ„ÄÇ</li>
<li><strong>ÂèØÊâ©Â±ïÁöÑ„ÄÅ‰∏çÁõ∏ÂÖ≥ÁöÑÁ±ªÂûãÈõÜÂêà</strong>Ôºö Á±ªÂûãÊì¶Èô§Áâ¢Âõ∫Âú∞Âü∫‰∫éÈù¢ÂêëÂØπË±°ÁöÑÂéüÂàôÔºåÂç≥ËÉΩÂ§üËΩªÊùæÊ∑ªÂä†Á±ªÂûã„ÄÇÁÑ∂ËÄåÔºåËøô‰∫õÁ±ªÂûã‰∏çÂ∫îÊúâ‰ªª‰ΩïËøûÊé•„ÄÇÂÆÉ‰ª¨‰∏çÂøÖÈÄöËøáÊüê‰∫õÂü∫Á±ªÂÖ±‰∫´ÂÖ±ÂêåÁöÑË°å‰∏∫„ÄÇÁõ∏ÂèçÔºåÂ∫îËØ•ËÉΩÂ§üÂ∞Ü‰ªª‰ΩïÂêàÈÄÇÁöÑÁ±ªÂûãËΩªÊùæÊ∑ªÂä†Âà∞ËØ•Á±ªÂûãÈõÜÂêà‰∏≠ÔºåÊó†ÈúÄ‰ªª‰Ωï‰æµÂÖ•Êé™ÊñΩ„ÄÇ</li>
<li><strong>ÂèØËÉΩÁöÑÈùûÂ§öÊÄÅÁ±ªÂûã</strong>Ôºö Ê≠£Â¶ÇÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÊâÄÂ±ïÁ§∫ÁöÑÔºåÁ±ªÂûã‰∏çÂ∫îËØ•ÈÄöËøáÁªßÊâøÂä†ÂÖ•ÈõÜÂêà„ÄÇÂÆÉ‰ª¨‰πü‰∏çÂøÖËá™Ë°åÊèê‰æõËôöÊãüÂäüËÉΩÔºåËÄåÊòØÂ∫î‰∏éÂÖ∂Â§öÊÄÅË°å‰∏∫Ëß£ËÄ¶„ÄÇÁÑ∂ËÄåÔºåÂåÖÂê´Âü∫Á±ªÊàñËôöÂáΩÊï∞ÁöÑÁ±ªÂûãÂπ∂Êú™Ë¢´ÊéíÈô§Âú®Â§ñ„ÄÇ</li>
<li><strong>Áõ∏ÂêåÁöÑËØ≠‰πâË°å‰∏∫</strong>Ôºö ÁõÆÊ†á‰∏çÊòØ‰∏∫ÊâÄÊúâÂèØËÉΩÁöÑÁ±ªÂûãÊèê‰æõÊäΩË±°ÔºåËÄåÊòØ‰∏∫‰∏ÄÁªÑÊèê‰æõÁõ∏ÂêåÊìç‰ΩúÔºàÂåÖÊã¨Áõ∏ÂêåÁöÑËØ≠Ê≥ïÔºâÂπ∂ÈÅµÂæ™È¢ÑÊúüË°å‰∏∫ÔºàÊ†πÊçÆLSPÔºåÂèÇËßÅ‚ÄúÊåáÂçó6ÔºöÈÅµÂÆàÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫‚ÄùÔºâÁöÑÁ±ªÂûãÊèê‰æõËØ≠‰πâÊäΩË±°„ÄÇÂ¶ÇÊûúÂèØËÉΩÁöÑËØùÔºåÂØπ‰∫é‰ªª‰ΩïÊú™Êèê‰æõÈ¢ÑÊúüÂäüËÉΩÁöÑÁ±ªÂûãÔºåÂ∫îÁîüÊàêÁºñËØëÊó∂ÈîôËØØ„ÄÇ</li>
</ul>
<p>ËÄÉËôëÂà∞ËøôÁßçÊÑèÂõæÁöÑË°®Ëø∞ÔºåÂõ†‰∏∫Ê®°ÂºèÁöÑÁªìÊûÑ‰∏ªË¶ÅÁî±Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÁöÑÂõ∫ÊúâÁªìÊûÑ‰∏ªÂØºÔºåÊúÄÈáçË¶ÅÁöÑÂå∫Âà´ÂíåË°•ÂÖÖÊòØÂú®Êû∂ÊûÑÁöÑÊúÄÈ´òÂ±ÇÊ¨°‰∏äÁöÑShapeÁ±ª„ÄÇ</p>
<p>Ëøô‰∏™Á±ª‰Ωú‰∏∫Â§ñÈÉ®Â§öÊÄÅÂºïÂÖ•ÁöÑÂ§ñÈÉ®Â±ÇÊ¨°ÁªìÊûÑÁöÑÂåÖË£ÖÂô®„ÄÇ‰∏ªË¶ÅÊòØÂõ†‰∏∫Ëøô‰∏™Â§ñÈÉ®Â±ÇÊ¨°ÁªìÊûÑ‰∏ç‰ºöÂÜçÁõ¥Êé•‰ΩøÁî®ÔºåÂêåÊó∂‰πüÂèçÊò†‰∫ÜShapeModelÂ≠òÂÇ®Êàñ‚ÄúÊã•Êúâ‚ÄùÂÖ∑‰ΩìÁ±ªÂûãÁöÑ‰∫ãÂÆûÔºåÂõ†Ê≠§Á±ªÊ®°ÊùøÂêçÁß∞Â∑≤Êõ¥Êîπ‰∏∫OwningShapeModel„ÄÇ</p>
<p>ÈÄöËøáËøôÁßçÊñπÂºèÔºåÁ±ªÂûãÊì¶Èô§‰∏ç‰ªÖÊèê‰æõ‰∫Ü‰∏ÄÁßçÂº∫Â§ßÁöÑÂ∑•ÂÖ∑Êù•ÁÆ°ÁêÜ‰∏çÂêåÁ±ªÂûã‰πãÈó¥ÁöÑÂ§çÊùÇÂÖ≥Á≥ªÔºåËøòÁ°Æ‰øù‰∫Ü‰ª£Á†ÅÁöÑÁÆÄÊ¥ÅÊÄßÂíåÁÅµÊ¥ªÊÄßÔºå‰ΩøÂÖ∂Êàê‰∏∫Áé∞‰ª£C++ÁºñÁ®ã‰∏≠ÁöÑÈáçË¶ÅËÆæËÆ°Ê®°Âºè‰πã‰∏Ä„ÄÇ</p>
<p><strong>Êã•ÊúâÁ±ªÂûãÊì¶Èô§ÁöÑÂÆûÁé∞</strong>
Â•ΩÁöÑÔºåÁé∞Âú®ËÆ©Êàë‰ª¨Âú®ÂõûÈ°æÁ±ªÂûãÊì¶Èô§ÁöÑÁªìÊûÑÊó∂ÔºåÊù•ÁúãÁúãÂÆÉÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÁªÜËäÇ„ÄÇ</p>
<p>Â∞ΩÁÆ°‰Ω†‰πãÂâçÂ∑≤ÁªèËßÅËøáÊâÄÊúâËøô‰∫õÊàêÂàÜÁöÑÂÆûÈôÖÂ∫îÁî®Ôºå‰ΩÜÂÆûÁé∞ÁªÜËäÇÂØπ‰∫éÂàùÂ≠¶ËÄÖÊù•ËØ¥Âπ∂‰∏çÂèãÂ•ΩÔºåÁîöËá≥ÂèØ‰ª•ËØ¥Êúâ‰∫õ‰ª§‰∫∫ÁîüÁïè„ÄÇ</p>
<p>Â∞ΩÁÆ°ÊàëÈÄâÊã©‰∫ÜÊàëËá™Â∑±Áü•ÈÅìÁöÑÊúÄÁÆÄÂçïÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞ÔºåÊÉÖÂÜµ‰æùÁÑ∂Â¶ÇÊ≠§ÔºåÂõ†Ê≠§ÔºåÊàë‰ºöÂ∞ΩÈáè‰øùÊåÅ‰∏ÄÂàáÂú®ÂêàÁêÜÁöÑÊ∞¥Âπ≥‰∏äÔºå‰∏ç‰ºöËøáÂ§öÂú∞Ê∑±ÂÖ•Âà∞ÂÆûÁé∞ÁªÜËäÇ‰∏≠„ÄÇ</p>
<p>ËøôÂåÖÊã¨Ôºå‰æãÂ¶ÇÔºåÊàë‰∏çÊâìÁÆóÊå§Âá∫ÊØè‰∏Ä‰∏™ÂæÆÂ∞èÁöÑÊÄßËÉΩÊèêÂçáÔºåÊàë‰∏ç‰ºö‰ΩøÁî®ËΩ¨ÂèëÂºïÁî®ÊàñÈÅøÂÖçÂä®ÊÄÅÂÜÖÂ≠òÂàÜÈÖçÔºå</p>
<p>ÂêåÊó∂ÔºåÊàë‰ºö‰ºòÂÖàËÄÉËôë‰ª£Á†ÅÁöÑÂèØËØªÊÄßÂíåÊ∏ÖÊô∞Â∫¶„ÄÇËôΩÁÑ∂ËøôÂØπÊÇ®Êù•ËØ¥ÂèØËÉΩÊúâ‰∫õÂ§±ÊúõÔºå‰ΩÜÊàëÁõ∏‰ø°Ëøô‰ºöÁúÅÂéªÊàë‰ª¨ÂæàÂ§öÈ∫ªÁÉ¶„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ¶ÇÊûúÊÇ®ÊÉ≥Ê∑±ÂÖ•‰∫ÜËß£ÂÆûÁé∞ÁªÜËäÇÂíå‰ºòÂåñÈÄâÈ°πÔºåÊàëÂª∫ËÆÆÊÇ®ÂèÇËÄÉ‚Äú<strong>ÂáÜÂàô33Ôºö‰∫ÜËß£Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ</strong>‚Äù„ÄÇ</p>
<p>Êàë‰ª¨ÂÜçÊ¨°‰ªé<strong>Circle</strong>Âíå<strong>Square</strong>Á±ªÂºÄÂßãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Circle</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">radius_</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">radius</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">radius_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* Êõ¥Â§öËé∑ÂèñÂô®ÂíåÂúÜÁâπÂÆöÁöÑÂÆûÁî®ÂáΩÊï∞ */</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">radius_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* Êõ¥Â§öÊï∞ÊçÆÊàêÂëò */</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Square</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Square</span><span class="p">(</span><span class="kt">double</span> <span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">side_</span><span class="p">(</span><span class="n">side</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="nf">side</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">side_</span><span class="p">;</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* Êõ¥Â§öËé∑ÂèñÂô®ÂíåÊ≠£ÊñπÂΩ¢ÁâπÂÆöÁöÑÂÆûÁî®ÂáΩÊï∞ */</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">side_</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="cm">/* Êõ¥Â§öÊï∞ÊçÆÊàêÂëò */</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏§‰∏™Á±ªËá™‰ªéÊàë‰ª¨Âú®ËÆ®ËÆ∫Â§ñÈÉ®Â§öÊÄÅÊó∂ÈÅáÂà∞ÂÆÉ‰ª¨‰ª•Êù•Ê≤°ÊúâÂèòÂåñ„ÄÇ</p>
<p>‰ΩÜÊòØÔºåÂÜçÊ¨°Âº∫Ë∞ÉËøô‰∏§ËÄÖÊòØÂÆåÂÖ®Êó†ÂÖ≥ÁöÑ„ÄÅ‰∫í‰∏çÁõ∏ËØÜÔºåÂπ∂‰∏îÊúÄÈáçË¶ÅÁöÑÊòØÈùûÂ§öÊÄÅÁöÑÔºåÊÑèÂë≥ÁùÄÂÆÉ‰ª¨‰∏çÁªßÊâø‰ªª‰ΩïÂü∫Á±ªÊàñËá™Ë°åÂºïÂÖ•ËôöÂáΩÊï∞„ÄÇ</p>
<p>Êàë‰ª¨ËøòÁúãÂà∞‰∫Ü<strong>ShapeConcept</strong>Âíå<strong>OwningShapeModel</strong>Á±ªÔºåÂêéËÄÖ‰ª•ÂâçÁß∞‰∏∫<strong>ShapeModel</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">namespace</span> <span class="n">detail</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeConcept</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">ShapeConcept</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ShapeConcept</span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OwningShapeModel</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ShapeConcept</span>   
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">OwningShapeModel</span><span class="p">(</span><span class="n">ShapeT</span> <span class="n">shape</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">shape_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">shape</span><span class="p">)),</span> 
</span></span><span class="line"><span class="cl">          <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">shape_</span><span class="p">);</span> <span class="p">}</span>   
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ShapeConcept</span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">OwningShapeModel</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">ShapeT</span> <span class="n">shape_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="n">DrawStrategy</span> <span class="n">drawer_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace detail 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Èô§‰∫ÜÂêçÁß∞Êõ¥ÊîπÂ§ñÔºåËøòÊúâÂá†‰∏™ÈáçË¶ÅÁöÑ‰∏çÂêåÁÇπÔºå‰æãÂ¶ÇÔºåËøô‰∏§‰∏™Á±ªÂ∑≤Ë¢´ÁßªÂà∞detailÂëΩÂêçÁ©∫Èó¥ÔºåËØ•ÂëΩÂêçÁ©∫Èó¥ÁöÑÂêçÁß∞Ë°®ÊòéÔºåËøô‰∏§‰∏™Á±ªÁé∞Âú®Êàê‰∏∫ÂÆûÁé∞ÁªÜËäÇÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂç≥‰∏çÂÜçÁõ¥Êé•‰ΩøÁî®„ÄÇ</p>
<p><strong>ShapeConcept</strong>Á±ª‰ªçÁÑ∂ÂºïÂÖ•Á∫ØËôöÂáΩÊï∞ <strong>draw()</strong> Êù•Ë°®Á§∫ÁªòÂà∂ÂΩ¢Áä∂ÁöÑË¶ÅÊ±Ç„ÄÇ</p>
<p>Ê≠§Â§ñÔºå<strong>ShapeConcept</strong>Áé∞Âú®ËøòÂºïÂÖ•‰∫Ü Á∫ØËôö <strong>clone()</strong> ÂáΩÊï∞„ÄÇ</p>
<p>&ldquo;ÊàëÁü•ÈÅìËøôÊòØ‰ªÄ‰πàÔºåËøôÊòØÂéüÂûãËÆæËÆ°Ê®°ÂºèÔºÅ&rdquo; ÊòØÁöÑÔºåÊ≠£Á°Æ„ÄÇ <strong>clone()</strong> Ëøô‰∏™ÂêçÂ≠ó‰∏éÂéüÂûãÊ®°ÂºèÂØÜÂàáÁõ∏ÂÖ≥ÔºåÂπ∂Âº∫ÁÉàÊöóÁ§∫‰∫ÜËøôÁßçËÆæËÆ°Ê®°ÂºèÔºà‰ΩÜ‰∏çÊòØ‰øùËØÅÔºâ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ∞ΩÁÆ°ÈÄâÊã©Ëøô‰∏™ÂáΩÊï∞ÂêçÈùûÂ∏∏ÂêàÁêÜÂíåÊ†áÂáÜÔºå‰ΩÜÈúÄË¶ÅÊòéÁ°ÆÊåáÂá∫ÁöÑÊòØÔºå<strong>clone()</strong> Âíå <strong>draw()</strong> ÂáΩÊï∞ÂêçÁöÑÈÄâÊã©ÊòØÊàë‰ª¨Ëá™Â∑±ÁöÑÔºöËøô‰∫õÂêçÂ≠óÁé∞Âú®ÊòØÂÆûÁé∞ÁªÜËäÇÔºå‰∏éÊàë‰ª¨ÂØπShapeTÁ±ªÂûãÁöÑÊúüÊúõÂêçÁß∞Ê≤°Êúâ‰ªª‰ΩïÂÖ≥Á≥ª„ÄÇ</p>
<p>Êàë‰ª¨ÂèØ‰ª•ÂêåÊ†∑ÂëΩÂêç‰∏∫<strong>do_draw()<strong>Âíå</strong>do_clone()</strong>ÔºåËøô‰∏ç‰ºöÂØπShapeTÁ±ªÂûã‰∫ßÁîü‰ªª‰ΩïÂΩ±Âìç„ÄÇ</p>
<p>ÂØπShapeTÁ±ªÂûãÁöÑÁúüÂÆûË¶ÅÊ±ÇÊòØÁî± <strong>draw()</strong> Âíå <strong>clone()</strong> ÂáΩÊï∞ÁöÑÂÆûÁé∞ÂÆö‰πâÁöÑ„ÄÇ</p>
<p>‰Ωú‰∏∫Â§ñÈÉ®Â±ÇÊ¨°ÁªìÊûÑÁöÑÂü∫Á±ªÔºå<strong>ShapeConcept</strong>ÁöÑ <strong>draw()</strong> ÂáΩÊï∞„ÄÅ<strong>clone()</strong> ÂáΩÊï∞ÂíåÊûêÊûÑÂáΩÊï∞‰ª£Ë°®‰∫ÜÊâÄÊúâÂΩ¢Áä∂ÁöÑË¶ÅÊ±ÇÈõÜ„ÄÇ</p>
<p>ËøôÊÑèÂë≥ÁùÄÊâÄÊúâÂΩ¢Áä∂ÂøÖÈ°ªÊèê‰æõÊüêÁßçÁªòÂõæË°å‰∏∫‚Äî‚ÄîÂÆÉ‰ª¨ÂøÖÈ°ªÊòØÂèØÂ§çÂà∂ÂíåÂèØÈîÄÊØÅÁöÑ„ÄÇËØ∑Ê≥®ÊÑèÔºåËøô‰∏â‰∏™ÂáΩÊï∞‰ªÖ‰∏∫Ê≠§Á§∫‰æãÁöÑË¶ÅÊ±ÇÈÄâÊã©„ÄÇÁâπÂà´ÊòØÔºåÂèØÂ§çÂà∂ÊÄßÂπ∂‰∏çÊòØÊâÄÊúâÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞ÁöÑ‰∏ÄËà¨Ë¶ÅÊ±Ç„ÄÇ</p>
<p><strong>OwningShapeModel</strong>Á±ªÂÜçÊ¨°‰ª£Ë°®‰∫Ü<strong>ShapeConcept</strong>Á±ªÁöÑÂîØ‰∏ÄÂÆûÁé∞„ÄÇÂ¶ÇÂêå‰πãÂâçÔºå<strong>OwningShapeModel</strong>Âú®ÂÖ∂ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Êé•Âèó‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÂΩ¢Áä∂Á±ªÂûãÂíåÁªòÂà∂Á≠ñÁï•ÔºåÂπ∂‰ΩøÁî®Ëøô‰∫õÊù•ÂàùÂßãÂåñÂÖ∂‰∏§‰∏™Êï∞ÊçÆÊàêÂëò„ÄÇ</p>
<p>Áî±‰∫é<strong>OwningShapeModel</strong>ÁªßÊâøËá™<strong>ShapeConcept</strong>ÔºåÂÆÉÂøÖÈ°ªÂÆûÁé∞‰∏§‰∏™Á∫ØËôöÂáΩÊï∞„ÄÇ<strong>draw()<strong>ÂáΩÊï∞ÈÄöËøáÂ∫îÁî®ÁªôÂÆöÁöÑÁªòÂà∂Á≠ñÁï•Êù•ÂÆûÁé∞ÔºåËÄå</strong>clone()<strong>ÂáΩÊï∞ÂàôË¢´ÂÆûÁé∞‰∏∫ËøîÂõûÁõ∏Â∫î</strong>OwningShapeModel</strong>ÁöÑÁ≤æÁ°ÆÂâØÊú¨„ÄÇ</p>
<p>Ê≥®ÊÑèÔºö Â¶ÇÊûúÊÇ®Áé∞Âú®Âú®ÊÉ≥Ôºå‚ÄúÂì¶‰∏çÔºå <strong>std::make_unique()</strong> „ÄÇËøôÊÑèÂë≥ÁùÄÂä®ÊÄÅÂÜÖÂ≠ò„ÄÇÁÑ∂ÂêéÊàëÂ∞±‰∏çËÉΩÂú®ÊàëÁöÑ‰ª£Á†Å‰∏≠‰ΩøÁî®ÂÆÉ‰∫ÜÔºÅ‚Äù‚Äî‚ÄîÂà´ÊãÖÂøÉ„ÄÇ<strong>std::make_unique()</strong> Âè™ÊòØÂÆûÁé∞ÁªÜËäÇÔºå‰∏ÄÁßç‰øùÊåÅÁ§∫‰æãÁÆÄÂçïÁöÑÈÄâÊã©„ÄÇÂú®‚ÄúÂáÜÂàô33Ôºö‰∫ÜËß£Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ‚Äù‰∏≠ÔºåÊÇ®Â∞ÜÁúãÂà∞Â¶Ç‰ΩïÈÄöËøáSBOÈÅøÂÖçÂä®ÊÄÅÂÜÖÂ≠ò„ÄÇ</p>
<p>‚ÄúÁõÆÂâç‰∏∫Ê≠¢ÔºåÊàëÂπ∂‰∏çÊÄé‰πàÂç∞Ë±°Ê∑±Âàª„ÄÇÊàë‰ª¨Âá†‰πéÊ≤°Ë∂ÖËøáÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÁöÑÂÆûÁé∞„ÄÇ‚Äù ÊàëÂÆåÂÖ®ÁêÜËß£ÊÇ®ÁöÑÊâπËØÑ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÊàë‰ª¨Ë∑ùÁ¶ªÂ∞ÜÂ§ñÈÉ®Â§öÊÄÅËΩ¨Âèò‰∏∫Á±ªÂûãÊì¶Èô§Âè™Â∑Æ‰∏ÄÊ≠•ÔºåÂç≥‰ªéÂºïÁî®ËØ≠‰πâÂàáÊç¢Âà∞ÂÄºËØ≠‰πâ„ÄÇ</p>
<p>Êàë‰ª¨Âè™ÈúÄË¶Å‰∏Ä‰∏™ÂÄºÁ±ªÂûãÔºå‰∏Ä‰∏™Âõ¥Áªï<strong>ShapeConcept</strong>Âíå<strong>OwningShapeModel</strong>ÂºïÂÖ•ÁöÑÂ§ñÈÉ®Â±ÇÊ¨°ÁªìÊûÑÁöÑÂåÖË£ÖÂô®ÔºåÂ§ÑÁêÜÊâÄÊúâÊàë‰ª¨‰∏çÊÉ≥ÊâãÂä®ÊâßË°åÁöÑÁªÜËäÇÔºö<strong>OwningShapeModel</strong>Á±ªÊ®°ÊùøÁöÑÂÆû‰æãÂåñ„ÄÅÁÆ°ÁêÜÊåáÈíà„ÄÅÊâßË°åÂàÜÈÖç‰ª•ÂèäÂ§ÑÁêÜÁîüÂëΩÂë®Êúü„ÄÇËøô‰∏™ÂåÖË£ÖÂô®‰ª•<strong>Shape</strong>Á±ªÁöÑÂΩ¢ÂºèÁªôÂá∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="p">(</span><span class="n">ShapeT</span> <span class="n">shape</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="k">using</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">detail</span><span class="o">::</span><span class="n">OwningShapeModel</span><span class="o">&lt;</span><span class="n">ShapeT</span><span class="p">,</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">        <span class="n">pimpl_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">shape</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">));</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">detail</span><span class="o">::</span><span class="n">ShapeConcept</span><span class="o">&gt;</span> <span class="n">pimpl_</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Shape</strong>Á±ªÁöÑÁ¨¨‰∏Ä‰∏™Ôºå‰πüÊòØÊúÄÈáçË¶ÅÁöÑÁªÜËäÇÊòØÊ®°ÊùøÂåñÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇÊ≠§ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÂèØ‰ª•Êé•Âèó‰ªª‰ΩïÂΩ¢Áä∂ÔºàÁß∞‰∏∫ShapeTÔºâÔºå</p>
<p>Á¨¨‰∫å‰∏™ÂèÇÊï∞ÂàôÊòØÊâÄÈúÄÁöÑ <strong>DrawStrategy</strong> ,‰∏∫‰∫ÜÁÆÄÂåñÁõ∏Â∫îÁöÑ <strong>detail::OwningShapeModel</strong> Á±ªÊ®°ÊùøÁöÑÂÆû‰æãÂåñÔºå‰ΩøÁî®Êñπ‰æøÁöÑÁ±ªÂûãÂà´ÂêçËØÅÊòéÊòØÊúâÂ∏ÆÂä©ÁöÑ„ÄÇËØ•Âà´ÂêçÁî®‰∫éÈÄöËøá <strong>std::make_unique()</strong> ÂÆû‰æãÂåñÊâÄÈúÄÁöÑÊ®°Âûã„ÄÇÂΩ¢Áä∂ÂíåÁªòÂà∂Á≠ñÁï•ÈÉΩ‰º†ÈÄíÁªôÊñ∞Ê®°Âûã„ÄÇ</p>
<p>Êñ∞ÂàõÂª∫ÁöÑÊ®°ÂûãÁî®‰∫éÂàùÂßãÂåñShapeÁ±ªÁöÑ‰∏Ä‰∏™Êï∞ÊçÆÊàêÂëòÔºö<strong>pimpl_</strong>„ÄÇ‚ÄúÊàë‰πüËÆ§Âá∫‰∫ÜËøô‰∏™ÔºåËøôÊòØÊ°•Êé•Ê®°ÂºèÔºÅ‚Äù ÊÇ®È´òÂÖ¥Âú∞ÂÆ£Â∏É„ÄÇ</p>
<p>ÊòØÁöÑÔºåÂèàÂØπ‰∫Ü„ÄÇËøôÊòØÊ°•Êé•ËÆæËÆ°Ê®°ÂºèÁöÑÂ∫îÁî®„ÄÇÂú®ÊûÑÈÄ†ËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨Âü∫‰∫éÂÆûÈôÖÁªôÂÆöÁöÑ<strong>ShapeT</strong>Âíå<strong>DrawStrategy</strong>Á±ªÂûãÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑ<strong>OwningShapeModel</strong>Ôºå‰ΩÜÊàë‰ª¨Â∞ÜÂÖ∂Â≠òÂÇ®‰∏∫ÊåáÂêë<strong>ShapeConcept</strong>ÁöÑÊåáÈíà„ÄÇ</p>
<p>ÈÄöËøáËøôÊ†∑ÂÅöÔºåÊÇ®ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÈÄöÂæÄÂÆûÁé∞ÁªÜËäÇÁöÑÊ°•Ê¢ÅÔºå‰∏Ä‰∏™ÈÄöÂæÄÁúüÂÆûÂΩ¢Áä∂Á±ªÂûãÁöÑÊ°•Ê¢Å„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂú®ÂàùÂßãÂåñ <strong>pimpl_</strong> ‰πãÂêéÔºåÂú®ÊûÑÈÄ†ÂáΩÊï∞ÂÆåÊàêÂêéÔºå<strong>Shape</strong> ‰∏çÂÜçËÆ∞‰ΩèÂÆûÈôÖÁ±ªÂûã„ÄÇ</p>
<p><strong>Shape</strong>Ê≤°ÊúâÊ®°ÊùøÂèÇÊï∞Êàñ‰ªª‰ΩïÊàêÂëòÂáΩÊï∞‰ºöÊè≠Á§∫ÂÆÉÂ≠òÂÇ®ÁöÑÂÖ∑‰ΩìÁ±ªÂûãÔºå‰πüÊ≤°ÊúâÊï∞ÊçÆÊàêÂëòËÆ∞‰ΩèÁªôÂÆöÁ±ªÂûã„ÄÇÂÆÉÊåÅÊúâÁöÑÂè™ÊòØ‰∏Ä‰∏™ÊåáÂêëShapeConceptÂü∫Á±ªÁöÑÊåáÈíà„ÄÇÂõ†Ê≠§ÔºåÂÖ∂ÂÆûÁé∞ÁöÑÁúüÂÆûÂΩ¢Áä∂Á±ªÂûãÂ∑≤ÁªèË¢´Êì¶Èô§„ÄÇÂõ†Ê≠§ÂæóÂêçËÆæËÆ°Ê®°ÂºèÔºö<strong>Á±ªÂûãÊì¶Èô§</strong>„ÄÇ</p>
<p>Êàë‰ª¨ÁöÑ<strong>Shape</strong>Á±ªÁº∫Â∞ëÁöÑÂîØ‰∏ÄÂäüËÉΩÊòØ‰∏Ä‰∏™ÁúüÊ≠£ÁöÑÂÄºÁ±ªÂûãÊâÄÈúÄÁöÑÂ§çÂà∂ÂíåÁßªÂä®Êìç‰Ωú„ÄÇÂπ∏ËøêÁöÑÊòØÔºåÁî±‰∫éÂ∫îÁî®‰∫Ü<strong>std::unique_ptr</strong>ÔºåÊàë‰ª¨ÁöÑÂ∑•‰ΩúÈáèÁõ∏ÂΩìÊúâÈôê„ÄÇÁî±‰∫éÁºñËØëÂô®ÁîüÊàêÁöÑÊûêÊûÑÂáΩÊï∞Âíå‰∏§‰∏™ÁßªÂä®Êìç‰ΩúÈÉΩ‰ºöËµ∑‰ΩúÁî®ÔºåÊàë‰ª¨Âè™ÈúÄÂ§ÑÁêÜ‰∏§‰∏™Â§çÂà∂Êìç‰ΩúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Shape</span><span class="p">(</span><span class="k">const</span> <span class="n">Shape</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">pimpl_</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">pimpl_</span><span class="o">-&gt;</span><span class="n">clone</span><span class="p">())</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Shape</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// Â§çÂà∂Âπ∂‰∫§Êç¢ÊÉØÁî®Ê≥ï 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Shape</span> <span class="nf">copy</span><span class="p">(</span><span class="n">other</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">        <span class="n">pimpl_</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">copy</span><span class="p">.</span><span class="n">pimpl_</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="p">(</span><span class="n">Shape</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Shape</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="kt">void</span> <span class="n">draw</span><span class="p">(</span><span class="k">const</span> <span class="n">Shape</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">shape</span><span class="p">.</span><span class="n">pimpl_</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Â§çÂà∂ÊûÑÈÄ†ÂáΩÊï∞</strong>ÂèØËÉΩÊòØÈöæ‰ª•ÂÆûÁé∞ÁöÑÂáΩÊï∞‰πã‰∏ÄÔºåÂõ†‰∏∫Êàë‰ª¨‰∏çÁü•ÈÅìÂ≠òÂÇ®Âú®ÂÖ∂‰ªñ<strong>Shape</strong>‰∏≠ÁöÑÂÖ∑‰ΩìÂΩ¢Áä∂Á±ªÂûã„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÈÄöËøáÂú® <strong>ShapeConcept</strong> Âü∫Á±ª‰∏≠Êèê‰æõ <strong>clone()</strong> ÂáΩÊï∞ÔºåÊàë‰ª¨ÂèØ‰ª•Âú®‰∏çÈúÄË¶ÅÁü•ÈÅìÂÖ∑‰ΩìÁ±ªÂûãÁöÑÊÉÖÂÜµ‰∏ãËØ∑Ê±Ç‰∏Ä‰∏™Á≤æÁ°ÆÁöÑÂâØÊú¨„ÄÇÂÆûÁé∞ Â§çÂà∂ËµãÂÄºËøêÁÆóÁ¨¶ÊúÄÁü≠„ÄÅÊúÄÊó†Áóõ‰∏îÊúÄÊñπ‰æø ÁöÑÊñπÊ≥ïÊòØÂü∫‰∫éÂ§çÂà∂Âπ∂‰∫§Êç¢ÊÉØÁî®Ê≥ïÊûÑÂª∫„ÄÇ</p>
<p>Ê≠§Â§ñÔºå<strong>Shape</strong> Á±ªÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÊâÄË∞ìÁöÑÈöêËóèÂèãÂÖÉÂáΩÊï∞ <strong>draw()</strong> ÔºåËøô‰∏™ÂèãÂÖÉÂáΩÊï∞Ë¢´Áß∞‰∏∫ÈöêËóèÂèãÂÖÉÔºåÂõ†‰∏∫ÂÆÉËôΩÁÑ∂ÊòØ‰∏Ä‰∏™Ëá™Áî±ÂáΩÊï∞Ôºå‰ΩÜÂú® <strong>Shape</strong> Á±ªÁöÑ‰∏ª‰ΩìÂÜÖÂÆö‰πâ„ÄÇ</p>
<p>‰Ωú‰∏∫ÂèãÂÖÉÔºåÂÆÉË¢´Êéà‰∫àÂØπÁßÅÊúâÊï∞ÊçÆÊàêÂëòÁöÑÂÆåÂÖ®ËÆøÈóÆÊùÉÈôêÔºåÂπ∂‰ºöË¢´Ê≥®ÂÖ•Âà∞ÂåÖÂõ¥ÁöÑÂëΩÂêçÁ©∫Èó¥‰∏≠„ÄÇ</p>
<p>‚Äú‰Ω†ËØ¥ËøáÊúãÂèã‰∏çÂ•ΩÔºü‚Äù ÊÇ®ÈóÆÈÅì„ÄÇÊàëÊâøËÆ§ÔºåÈÇ£ÊòØÊàëËØ¥ËøáÁöÑÔºàÂèÇËßÅ‚ÄúÂáÜÂàô4ÔºöËÆæËÆ°ÂèØÊµãËØïÊÄß‚ÄùÔºâ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÊàë‰πüÊòéÁ°ÆÊåáÂá∫ÈöêËóèÂèãÂÖÉÊòØÂèØ‰ª•ÁöÑ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå<strong>draw()</strong> ÂáΩÊï∞ÊòØ <strong>Shape</strong> Á±ª‰∏çÂèØÂàÜÂâ≤ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁ°ÆÂÆûÊòØÁúüÊ≠£ÁöÑÊúãÂèãÔºàÂá†‰πéÊòØÂÆ∂Â∫≠ÁöÑ‰∏ÄÂëòÔºâ„ÄÇ</p>
<p>‚Äú‰ΩÜÂÆÉÂ∫îËØ•ÊòØ‰∏Ä‰∏™ÊàêÂëòÂáΩÊï∞ÔºåÂØπÂêßÔºü‚Äù ÊÇ®‰∫âËÆ∫ÈÅì„ÄÇÁ°ÆÂÆûÔºåÈÇ£‰πüÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑÊõø‰ª£ÊñπÊ°à„ÄÇÂ¶ÇÊûúÊÇ®Êõ¥ÂñúÊ¨¢ËøôÁßçÊñπÂºèÔºåËØ∑ÁªßÁª≠„ÄÇ</p>
<p>Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊàëÁöÑÂÅèÂ•ΩÊòØ‰ΩøÁî®Ëá™Áî±ÂáΩÊï∞ÔºåÂõ†‰∏∫Êàë‰ª¨ÁöÑÁõÆÊ†á‰πã‰∏ÄÊòØÈÄöËøáÊèêÂèñ <strong>draw()</strong> Êìç‰ΩúÊù•ÂáèÂ∞ë‰æùËµñÂÖ≥Á≥ª„ÄÇËøô‰∏ÄÁõÆÊ†á‰πüÂ∫îÂú®ShapeÂÆûÁé∞‰∏≠ÂèçÊò†Âá∫Êù•„ÄÇÁÑ∂ËÄåÔºåÁî±‰∫éËØ•ÂáΩÊï∞ÈúÄË¶ÅËÆøÈóÆ <strong>pimpl_</strong> Êï∞ÊçÆÊàêÂëòÔºåÂπ∂‰∏î‰∏∫‰∫Ü‰∏çÂ¢ûÂä† <strong>draw()</strong> ÂáΩÊï∞ÁöÑÈáçËΩΩÈõÜÂêàÔºåÊàëÂ∞ÜÂÖ∂ÂÆûÁé∞‰∏∫ÈöêËóèÂèãÂÖÉ„ÄÇ</p>
<p>Â∞±ÊòØËøôÊ†∑ÔºåÂÖ®ÈÉ®ÂÜÖÂÆπ„ÄÇËÆ©Êàë‰ª¨ÁúãÁúãÊñ∞ÁöÑÂäüËÉΩÂ¶Ç‰Ωï‰ºòÈõÖÂú∞Â∑•‰ΩúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Main.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ÂúÜ‰Ωú‰∏∫ÂÖ∑‰ΩìÂΩ¢Áä∂Á±ªÂûãÁöÑ‰ª£Ë°® 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Circle</span> <span class="n">circle</span><span class="p">{</span><span class="mf">3.14</span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ÁªòÂà∂Á≠ñÁï•ÂΩ¢ÂºèÁöÑlambdaË°®ËææÂºè 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">auto</span> <span class="n">drawer</span> <span class="o">=</span> <span class="p">[](</span><span class="k">const</span> <span class="n">Circle</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∞ÜÂΩ¢Áä∂ÂíåÁªòÂà∂Á≠ñÁï•ÁªìÂêàÂú®‰∏Ä‰∏™&#39;Shape&#39;ÊäΩË±°‰∏≠ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Ëøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®Â∞ÜÂÆû‰æãÂåñ‰∏Ä‰∏™ÈíàÂØπÁªôÂÆö&#39;Circle&#39;ÂíålambdaÁ±ªÂûãÁöÑ&#39;detail::OwningShapeModel&#39; 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Shape</span> <span class="n">shape1</span><span class="p">(</span><span class="n">circle</span><span class="p">,</span> <span class="n">drawer</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁªòÂà∂ÂΩ¢Áä∂ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">draw</span><span class="p">(</span><span class="n">shape1</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÄöËøáÂ§çÂà∂ÊûÑÈÄ†ÂáΩÊï∞ÂàõÂª∫ÂΩ¢Áä∂ÁöÑÂâØÊú¨ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Shape</span> <span class="n">shape2</span><span class="p">(</span><span class="n">shape1</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁªòÂà∂ÂâØÊú¨‰ºö‰∫ßÁîüÁõ∏ÂêåÁöÑÁªìÊûú 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">draw</span><span class="p">(</span><span class="n">shape2</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>È¶ñÂÖàÔºåÊàë‰ª¨ÂàõÂª∫‰∏Ä‰∏™ÂΩ¢Áä∂‰Ωú‰∏∫ÂÖ∑‰ΩìÂΩ¢Áä∂Á±ªÂûãÁöÑ‰ª£Ë°®ÔºåËøôÊÑüËßâÂæàÁÆÄÂçïÔºåÂØπÂêßÔºüÊó†ÈúÄÊâãÂä®ÂàÜÈÖçÔºå‰πü‰∏çÈúÄË¶ÅÂ§ÑÁêÜÊåáÈíà„ÄÇ</p>
<p>ÈÄöËøá <strong>draw()</strong> ÂáΩÊï∞ÔºåÊàë‰ª¨ËÉΩÂ§üÁªòÂà∂Ëøô‰∏™ <strong>Shape</strong>„ÄÇ</p>
<p>Á¥ßÊé•ÁùÄÔºåÊàë‰ª¨ÂàõÂª∫ÂΩ¢Áä∂ÁöÑÂâØÊú¨ÔºåËøôÊòØ‰∏Ä‰∏™ÁúüÂÆûÁöÑÂâØÊú¨Ôºå‰∏çÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊåáÈíàÂâØÊú¨„ÄÇÈÄöËøá <strong>draw()</strong> ÂáΩÊï∞ÁªòÂà∂ÂâØÊú¨‰ºö‰∫ßÁîüÁõ∏ÂêåÁöÑÁªìÊûú„ÄÇËøôÊÑüËßâÂæàÂ•ΩÔºöÊÇ®ÂèØ‰ª•‰æùËµñÂÄºÁ±ªÂûãÁöÑÂ§çÂà∂Êìç‰ΩúÔºàÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊòØÂ§çÂà∂ÊûÑÈÄ†ÂáΩÊï∞ÔºâÔºåÂπ∂‰∏î‰∏çÈúÄË¶ÅÊâãÂä®ÂÖãÈöÜ„ÄÇÈùûÂ∏∏Ê£íÔºåÂØπÂêßÔºüËÄå‰∏îÁªùÂØπÊØîÊâãÂä®‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅË¶ÅÂ•ΩÂæóÂ§ö„ÄÇ</p>
<p>Â∞ΩÁÆ°Âú®‰ªãÁªç‰∫ÜÊâÄÊúâËøô‰∫õÂÆûÁé∞ÁªÜËäÇÂêéÔºåÂèØËÉΩ‰∏ÄÂºÄÂßã‰∏çÂÆπÊòìÁúãÂá∫Ëøô‰∏ÄÁÇπÔºå‰ΩÜÂ¶ÇÊûúÊÇ®‰ªîÁªÜÂàÜÊûêÂÆûÁé∞ÁªÜËäÇÁöÑ‰∏õÊûóÔºåÊàëÂ∏åÊúõÊÇ®ËÉΩ‰Ωì‰ºöÂà∞ËøôÁßçÊñπÊ≥ïÁöÑÁæéÂ¶ô‰πãÂ§ÑÔºöÊÇ®‰∏çÂÜçÈúÄË¶ÅÂ§ÑÁêÜÊåáÈíàÔºåÊ≤°ÊúâÊâãÂä®ÂàÜÈÖçÔºå‰πü‰∏çÈúÄË¶ÅÂÜçÂ§ÑÁêÜÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ„ÄÇÊâÄÊúâËøô‰∫õÁªÜËäÇÈÉΩÂú®ÈÇ£ÈáåÔºåÊòØÁöÑÔºå‰ΩÜÊâÄÊúâËØÅÊçÆÈÉΩË¢´ÂæàÂ•ΩÂú∞Â∞ÅË£ÖÂú® <strong>Shape</strong> Á±ª‰∏≠„ÄÇ</p>
<p>Â∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÊÇ®Âπ∂Ê≤°ÊúâÂ§±ÂéªËß£ËÄ¶ÁöÑÂ•ΩÂ§ÑÔºöÊÇ®‰ªçÁÑ∂ËÉΩÂ§üËΩªÊùæÊ∑ªÂä†Êñ∞Á±ªÂûãÔºåÂπ∂‰∏îÂÖ∑‰ΩìÂΩ¢Áä∂Á±ªÂûã‰ªçÁÑ∂ÂØπÁªòÂà∂Ë°å‰∏∫‰∏ÄÊó†ÊâÄÁü•„ÄÇÂÆÉ‰ª¨‰ªÖÈÄöËøá <strong>Shape</strong> ÊûÑÈÄ†ÂáΩÊï∞ËøûÊé•Âà∞ÊâÄÈúÄÁöÑÂäüËÉΩ„ÄÇ</p>
<p>‚ÄúÊàëÂú®ÊÉ≥Ôºå‚ÄùÊÇ®ÂºÄÂßãÈóÆÔºå‚ÄúÈöæÈÅìÊàë‰ª¨‰∏çËÉΩËÆ©ÂÆÉÂèòÂæóÊõ¥ÁÆÄÂçïÂêóÔºüÊàëËÆæÊÉ≥‰∏Ä‰∏™ <strong>main()</strong> ÂáΩÊï∞Â¶Ç‰∏ãÊâÄÁ§∫‚ÄùÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;YourMain.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ÂúÜ‰Ωú‰∏∫ÂÖ∑‰ΩìÂΩ¢Áä∂Á±ªÂûãÁöÑ‰ª£Ë°® 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Circle</span> <span class="n">circle</span><span class="p">{</span><span class="mf">3.14</span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∞ÜÂúÜÁªëÂÆöÂà∞Êüê‰∫õÁªòÂà∂ÂäüËÉΩ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">auto</span> <span class="n">drawingCircle</span> <span class="o">=</span> <span class="p">[</span><span class="o">=</span><span class="p">]()</span> <span class="p">{</span> <span class="n">myCircleDrawer</span><span class="p">(</span><span class="n">circle</span><span class="p">);</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂØπÂ∏¶ÊúâÁªòÂà∂Ë°å‰∏∫ÁöÑÂúÜËøõË°åÁ±ªÂûãÊì¶Èô§ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Shape</span> <span class="n">shape</span><span class="p">(</span><span class="n">drawingCircle</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁªòÂà∂ÂΩ¢Áä∂ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">draw</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊòØ‰∏™ÂæàÊ£íÁöÑÊÉ≥Ê≥ï„ÄÇËÆ∞‰ΩèÔºåÊÇ®Ë¥üË¥£Á±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®ÁöÑÊâÄÊúâÂÆûÁé∞ÁªÜËäÇ‰ª•ÂèäÂ¶Ç‰ΩïÂ∞ÜÁ±ªÂûãÂíåÊìç‰ΩúÂÆûÁé∞ÁªìÂêàËµ∑Êù•„ÄÇ</p>
<p>Â¶ÇÊûúÊÇ®Êõ¥ÂñúÊ¨¢ËøôÁßçÂΩ¢ÂºèÔºåËØ∑ÁªßÁª≠„ÄÇ‰ΩÜÊòØËØ∑‰∏çË¶ÅÂøòËÆ∞ÔºåÂú®Êàë‰ª¨ÁöÑShapeÁ§∫‰æã‰∏≠Ôºå‰∏∫‰∫ÜÁÆÄÂçïÂíå‰ª£Á†ÅÁÆÄÊ¥ÅÔºåÊàëÁâπÊÑè‰ªÖ‰ΩøÁî®‰∫ÜÂÖ∑ÊúâÂ§ñÈÉ®‰æùËµñÊÄßÁöÑÂçï‰∏ÄÂäüËÉΩÔºàÁªòÂà∂Ôºâ„ÄÇ</p>
<p>ÂèØËÉΩ‰ºöÊúâÊõ¥Â§öÁöÑÂáΩÊï∞ÂºïÂÖ•‰æùËµñÂÖ≥Á≥ªÔºå‰æãÂ¶ÇÂΩ¢Áä∂ÁöÑÂ∫èÂàóÂåñ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå<strong>lambda</strong> ÊñπÊ≥ïÂ∞Ü‰∏çËµ∑‰ΩúÁî®ÔºåÂõ†‰∏∫ÊÇ®ÈúÄË¶ÅÂ§ö‰∏™ÂëΩÂêçÂáΩÊï∞Ôºà‰æãÂ¶ÇÔºå<strong>draw()</strong> Âíå <strong>serialize()</strong> Ôºâ„ÄÇÂõ†Ê≠§ÔºåÊúÄÁªàÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÊÉÖÂÜµÔºåÂèñÂÜ≥‰∫éÊÇ®ÁöÑÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®‰ª£Ë°®‰ªÄ‰πàÊ†∑ÁöÑÊäΩË±°„ÄÇ</p>
<p>‰ΩÜÊó†ËÆ∫ÊÇ®ÈÄâÊã©Âì™ÁßçÂÆûÁé∞ÊñπÂºèÔºåËØ∑Á°Æ‰øù‰∏çË¶ÅÂºïÂÖ•ÂäüËÉΩ‰πãÈó¥ÁöÑ‰º™‰æùËµñÊàñ‰ª£Á†ÅÈáçÂ§ç„ÄÇ</p>
<p>Êç¢Âè•ËØùËØ¥ÔºåËØ∑ËÆ∞‰Ωè‚ÄúÂáÜÂàô2ÔºöËÆæËÆ°ÈÄÇÂ∫îÂèòÂåñ‚ÄùÔºÅËøôÂ∞±ÊòØÊàëÂÅèÁà±Âü∫‰∫éÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑËß£ÂÜ≥ÊñπÊ°àÁöÑÂéüÂõ†ÔºåÂ∞ΩÁÆ°ÊÇ®‰∏çÂ∫îÂ∞ÜÂÖ∂ËßÜ‰∏∫ÂîØ‰∏ÄÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇÁõ∏ÂèçÔºåÊÇ®Â∫îÂä™ÂäõÂÖÖÂàÜÂà©Áî®Á±ªÂûãÊì¶Èô§ÁöÑÊùæÊï£ËÄ¶ÂêàÊΩúÂäõ„ÄÇ</p>
<p><strong>ÂàÜÊûêÁ±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥</strong></p>
<p>Â∞ΩÁÆ°Á±ªÂûãÊì¶Èô§ÂÖ∑ÊúâÂÖ∂Áæé‰∏Ω‰πãÂ§ÑÔºåÂπ∂‰∏î‰ªéËÆæËÆ°ËßíÂ∫¶Êù•ÁúãÂ∏¶Êù•‰∫ÜËÆ∏Â§öÂ•ΩÂ§ÑÔºå‰ΩÜÊàë‰∏ç‰ºöÂÅáË£ÖËøô‰∏™ËÆæËÆ°Ê®°ÂºèÊ≤°Êúâ‰ªª‰ΩïÁº∫ÁÇπ„ÄÇ‰∏çÔºå‰∏çÂÖ¨Âπ≥ÁöÑÊòØÈöêÁûíÂèØËÉΩÂ≠òÂú®ÁöÑÂä£Âäø„ÄÇ</p>
<p>È¶ñÂÖàÔºå‰πüÊòØÊúÄÊòéÊòæÁöÑÔºåÂØπ‰Ω†Êù•ËØ¥ÂèØËÉΩÊòØËøô‰∏™Ê®°ÂºèÂÆûÁé∞ÁöÑÂ§çÊùÇÊÄßÔºåÊ≠£Â¶ÇÂâçÈù¢ÊâÄËø∞ÔºåÊàëÁâπÊÑèÂ∞ÜÂÆûÁé∞ÁªÜËäÇ‰øùÊåÅÂú®‰∏Ä‰∏™ÂêàÁêÜÁöÑÊ∞¥Âπ≥‰∏äÔºåÂ∏åÊúõËøôËÉΩÂ∏ÆÂä©‰Ω†ÁêÜËß£ÂÖ∂Ê†∏ÂøÉÊÄùÊÉ≥„ÄÇ</p>
<p>ÊàëÂ∏åÊúõ‰πüÁªô‰∫Ü‰Ω†ËøôÊ†∑ÁöÑÂç∞Ë±°ÔºöÂÆÉÂÆûÈôÖ‰∏äÂπ∂‰∏çÊòØÈÇ£‰πàÂõ∞Èöæ‚Äî‚ÄîÁ±ªÂûãÊì¶Èô§ÁöÑÂü∫Êú¨ÂÆûÁé∞ÂèØ‰ª•Âú®Â§ßÁ∫¶30Ë°å‰ª£Á†ÅÂÜÖÂÆåÊàê„ÄÇÁÑ∂ËÄåÔºå‰Ω†ÂèØËÉΩ‰ºöËßâÂæóÂÆÉ‰ªçÁÑ∂Ëøá‰∫éÂ§çÊùÇ„ÄÇ</p>
<p>Ê≠§Â§ñÔºå‰∏ÄÊó¶‰Ω†ÂºÄÂßãË∂ÖË∂äÂü∫Êú¨ÂÆûÁé∞Âπ∂ËÄÉËôëÊÄßËÉΩ„ÄÅÂºÇÂ∏∏ÂÆâÂÖ®ÊÄßÁ≠âÊñπÈù¢Êó∂ÔºåÂÆûÁé∞ÁªÜËäÇÁ°ÆÂÆû‰ºöÂèòÂæóÁõ∏ÂΩìÊ£òÊâãÔºå</p>
<p>Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰ΩøÁî®Á¨¨‰∏âÊñπÂ∫ìÔºàÂ¶ÇLouis DionneÁöÑdynoÂ∫ì„ÄÅEduardo MadridÁöÑzooÂ∫ì„ÄÅGa≈°per A≈æmanÁöÑerasureÂ∫ìÊàñSteven WatanabeÁöÑBoost Type ErasureÂ∫ìÔºâ</p>
<p>ÊòØ‰Ω†ÁöÑÊúÄ‰Ω≥ÂíåÊúÄÊñπ‰æøÁöÑÈÄâÊã©ÔºåËÄå‰∏çÊòØËá™Â∑±Â§ÑÁêÜÊâÄÊúâËøô‰∫õÁªÜËäÇ„ÄÇ</p>
<p>Âú®Ëß£Èáä <strong>Á±ªÂûãÊì¶Èô§ÊÑèÂõæ</strong> Êó∂ÔºåÊàëËøòÊèêÂà∞‰∫ÜÁ¨¨‰∫å‰∏™Êõ¥ÈáçË¶ÅÁöÑÈôêÂà∂ÔºöÂ∞ΩÁÆ°Êàë‰ª¨Áé∞Âú®Â§ÑÁêÜÁöÑÊòØÂèØ‰ª•Â§çÂà∂ÂíåÁßªÂä®ÁöÑÂÄºÔºå‰ΩÜ‰ΩøÁî®Á±ªÂûãÊì¶Èô§ËøõË°å‰∫åÂÖÉÊìç‰ΩúÂπ∂‰∏çÁõ¥Êé•„ÄÇ‰æãÂ¶ÇÔºåÂØπËøô‰∫õÂÄºËøõË°åÁõ∏Á≠âÊØîËæÉÂπ∂‰∏çÂÆπÊòìÔºåÂ∞±ÂÉè‰Ω†ÊúüÊúõ‰ªéÂ∏∏ËßÑÂÄº‰∏≠ÂæóÂà∞ÁöÑ‰∏ÄÊ†∑Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span> <span class="n">shape1</span> <span class="o">==</span> <span class="n">shape2</span> <span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span>  <span class="c1">// ‰∏çÁºñËØëÔºÅ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂéüÂõ†ÊòØ <strong>Shape</strong> ÊúÄÁªàÂè™ÊòØ‰∏Ä‰∏™ÂÖ∑‰ΩìÂΩ¢Áä∂Á±ªÂûãÁöÑÊäΩË±°ÔºåÂè™Â≠òÂÇ®‰∏Ä‰∏™ÊåáÂêëÂü∫Á±ªÁöÑÊåáÈíà„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†Áõ¥Êé•‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÔºå‰πü‰ºöÈÅáÂà∞ÂÆåÂÖ®Áõ∏ÂêåÁöÑÈóÆÈ¢òÔºåÂõ†Ê≠§ËøôÁªùÂØπ‰∏çÊòØ <strong>Á±ªÂûãÊì¶Èô§</strong> ‰∏≠ÁöÑÊñ∞ÈóÆÈ¢òÔºåÁîöËá≥‰Ω†ÂèØËÉΩ‰∏ç‰ºöÂ∞ÜÂÖ∂ËßÜ‰∏∫ÁúüÊ≠£ÁöÑÁº∫ÁÇπ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËôΩÁÑ∂Áõ∏Á≠âÊØîËæÉ‰∏çÊòØÂΩì‰Ω†Â§ÑÁêÜÂü∫Á±ªÊåáÈíàÊó∂ÁöÑÈ¢ÑÊúüÊìç‰ΩúÔºå‰ΩÜÂÆÉÈÄöÂ∏∏ÊòØÂØπÂÄºÁöÑÈ¢ÑÊúüÊìç‰Ωú„ÄÇ</p>
<p><strong>ÊØîËæÉ‰∏§‰∏™Á±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®</strong></p>
<p>‚ÄúËøô‰∏çÊòØÂè™ÈúÄÂú® <strong>Shapes</strong> Êé•Âè£‰∏≠Êö¥Èú≤ÂøÖË¶ÅÁöÑÂäüËÉΩÂ∞±ÂèØ‰ª•Ëß£ÂÜ≥ÁöÑÈóÆÈ¢òÂêóÔºü‚Äù‰Ω†ÂèØËÉΩ‰ºöÈóÆ„ÄÇ‚Äú‰æãÂ¶ÇÔºåÊàë‰ª¨ÂèØ‰ª•ÁÆÄÂçïÂú∞ÂêëÂΩ¢Áä∂ÁöÑÂÖ¨ÂÖ±Êé•Âè£Ê∑ªÂä†‰∏Ä‰∏™ <strong>area()</strong> ÂáΩÊï∞ÔºåÂπ∂Áî®ÂÆÉÊù•ÊØîËæÉ‰∏§‰∏™ÂØπË±°‚ÄùÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span> <span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">rhs</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">lhs</span><span class="p">.</span><span class="n">area</span><span class="p">()</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="n">area</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚ÄúËøôÂæàÂÆπÊòìÂÅöÂà∞„ÄÇÈÇ£‰πàÊàëÈÅóÊºè‰∫Ü‰ªÄ‰πàÔºü‚Äù ÊàëÂêåÊÑèËøôÂèØËÉΩÊòØ‰Ω†ÈúÄË¶ÅÁöÑÂÖ®ÈÉ®ÔºöÂ¶ÇÊûú‰∏§‰∏™ÂØπË±°Âú®Êüê‰∫õÂÖ¨ÂÖ±Â±ûÊÄßÁõ∏Á≠âÊó∂Âç≥ËÆ§‰∏∫ÂÆÉ‰ª¨Áõ∏Á≠âÔºåÈÇ£‰πàËøô‰∏™Êìç‰ΩúÁ¨¶Â∞ÜÈÄÇÁî®‰∫é‰Ω†„ÄÇ‰∏ÄËà¨ËÄåË®ÄÔºåÁ≠îÊ°àÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÊÉÖÂÜµ„ÄÇ</p>
<p>Âú®Ëøô‰∏™ÁâπÂÆöÁöÑ‰æãÂ≠ê‰∏≠ÔºåÂÆÉÂèñÂÜ≥‰∫é <strong>Shape</strong> Á±ªÊâÄ‰ª£Ë°®ÁöÑÊäΩË±°ÁöÑËØ≠‰πâ„ÄÇÈóÆÈ¢òÊòØÔºö‰ªÄ‰πàÊó∂ÂÄô‰∏§‰∏™ <strong>Shapes</strong> Áõ∏Á≠âÔºüËÄÉËôë‰ª•‰∏ãÂ∏¶Êúâ <strong>Circle</strong> Âíå <strong>Square</strong> ÁöÑ‰æãÂ≠êÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Square.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span> <span class="n">shape1</span><span class="p">(</span> <span class="n">Circle</span><span class="p">{</span><span class="mf">3.14</span><span class="p">}</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span> <span class="n">shape2</span><span class="p">(</span> <span class="n">Square</span><span class="p">{</span><span class="mf">2.71</span><span class="p">}</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span> <span class="n">shape1</span> <span class="o">==</span> <span class="n">shape2</span> <span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏§‰∏™Shapes‰ΩïÊó∂Áõ∏Á≠âÔºüÂÆÉ‰ª¨ÊòØÂê¶Âú®Èù¢ÁßØÁõ∏Á≠âÊó∂Áõ∏Á≠âÔºåËøòÊòØÂè™ÊúâÂú®ÊäΩË±°ËÉåÂêéÁöÑÂÆû‰æãÁõ∏Á≠âÊó∂ÊâçÁõ∏Á≠âÔºåÂç≥‰∏§ËÄÖÈÉΩÊòØÂêå‰∏ÄÁ±ªÂûã‰∏îÂÖ∑ÊúâÁõ∏ÂêåÁöÑÂ±ûÊÄßÔºüËøôÂèñÂÜ≥‰∫éÊÉÖÂÜµ„ÄÇ</p>
<p>ÂêåÊ†∑ÔºåÊàëÂèØ‰ª•ÈóÆÔºå‰∏§‰∏™‰∫∫Âú®‰ªÄ‰πàÊó∂ÂÄôÁõ∏Á≠âÔºü‰ªñ‰ª¨ÁöÑÂêçÂ≠óÁõ∏ÂêåÊó∂Áõ∏Á≠âÂêóÔºüËøòÊòØÂΩì‰ªñ‰ª¨ÊâÄÊúâÁöÑÁâπÂæÅÈÉΩÁõ∏ÂêåÊó∂ÊâçÁõ∏Á≠âÔºüËøôÂèñÂÜ≥‰∫éÊâÄÈúÄÁöÑËØ≠‰πâ„ÄÇ</p>
<p>ËôΩÁÑ∂Á¨¨‰∏Ä‰∏™ÊØîËæÉÂæàÂÆπÊòìÂÆûÁé∞Ôºå‰ΩÜÁ¨¨‰∫å‰∏™Âàô‰∏çÁÑ∂„ÄÇÂú®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÊàëËÆ§‰∏∫Á¨¨‰∫åÁßçÊÉÖÂÜµÊõ¥ÂèØËÉΩÊòØÊâÄÈúÄÁöÑËØ≠‰πâÔºåÂõ†Ê≠§ÊàëËÆ§‰∏∫‰ΩøÁî® <strong>Á±ªÂûãÊì¶Èô§</strong> ËøõË°åÁõ∏Á≠âÊØîËæÉ‰ª•ÂèäÊõ¥ÂπøÊ≥õÁöÑ <strong>‰∫åÂÖÉÊìç‰Ωú</strong> Âπ∂‰∏çÁõ¥Êé•„ÄÇ</p>
<p>ËØ∑Ê≥®ÊÑèÔºåÊàëÊ≤°ÊúâËØ¥Áõ∏Á≠âÊØîËæÉÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇ</p>
<p>ÊäÄÊúØ‰∏äÔºå‰Ω†ÂèØ‰ª•ËÆ©ÂÆÉÂ∑•‰ΩúÔºåÂ∞ΩÁÆ°ÁªìÊûúÂæÄÂæÄÊòØ‰∏Ä‰∏™Áõ∏ÂΩì‰∏ëÈôãÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå‰Ω†ÂøÖÈ°ªÊâøËØ∫‰∏ç‰ºöÂëäËØâ‰ªª‰Ωï‰∫∫‰Ω†ÊòØ‰ªéÊàëËøôÈáåÂæóÂà∞Ëøô‰∏™ÊÉ≥Ê≥ïÁöÑ„ÄÇ‚Äú‰Ω†ËÆ©ÊàëÊõ¥Âä†Â•ΩÂ•á‰∫ÜÔºå‚Äù‰Ω†Â∏¶ÁùÄÈ°ΩÁöÆÁöÑÁ¨ëÂÆπËØ¥ÈÅì„ÄÇÂ•ΩÂêßÔºåËøôÂ∞±ÊòØËß£ÂÜ≥ÊñπÊ°àÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">detail</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeConcept</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">isEqual</span><span class="p">(</span> <span class="n">ShapeConcept</span> <span class="k">const</span><span class="o">*</span> <span class="n">c</span> <span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span> <span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OwningShapeModel</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ShapeConcept</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="n">isEqual</span><span class="p">(</span> <span class="n">ShapeConcept</span> <span class="k">const</span><span class="o">*</span> <span class="n">c</span> <span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="k">using</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">OwningShapeModel</span><span class="o">&lt;</span><span class="n">ShapeT</span><span class="p">,</span><span class="n">DrawStrategy</span><span class="o">&gt;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="k">const</span><span class="o">*</span> <span class="n">model</span> <span class="o">=</span> <span class="k">dynamic_cast</span><span class="o">&lt;</span><span class="n">Model</span> <span class="k">const</span><span class="o">*&gt;</span><span class="p">(</span> <span class="n">c</span> <span class="p">);</span>   
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">(</span> <span class="n">model</span> <span class="o">&amp;&amp;</span> <span class="n">shape_</span> <span class="o">==</span> <span class="n">model</span><span class="o">-&gt;</span><span class="n">shape_</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace detail 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span> <span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">rhs</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">lhs</span><span class="p">.</span><span class="n">pimpl_</span><span class="o">-&gt;</span><span class="n">isEqual</span><span class="p">(</span> <span class="n">rhs</span><span class="p">.</span><span class="n">pimpl_</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">!=</span><span class="p">(</span> <span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">rhs</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">!</span><span class="p">(</span> <span class="n">lhs</span> <span class="o">==</span> <span class="n">rhs</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Circle.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span> <span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">rhs</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">lhs</span><span class="p">.</span><span class="n">radius</span><span class="p">()</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="n">radius</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Square.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span> <span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Square</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">rhs</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">lhs</span><span class="p">.</span><span class="n">side</span><span class="p">()</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="n">side</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏∫‰∫Ü‰ΩøÁõ∏Á≠âÊØîËæÉËµ∑‰ΩúÁî®Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®<code>dynamic_cast</code>„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËøôÁßçÁõ∏Á≠âÊØîËæÉÁöÑÂÆûÁé∞Êúâ‰∏§‰∏™‰∏•ÈáçÁöÑÁº∫ÁÇπ„ÄÇ</p>
<p>È¶ñÂÖàÔºåÊ≠£Â¶Ç‰Ω†Âú®‚ÄúÂáÜÂàô18ÔºöÊ≥®ÊÑèÊó†ÁéØËÆøÈóÆËÄÖÁöÑÊÄßËÉΩ‚Äù‰∏≠ÁúãÂà∞ÁöÑÔºå<code>dynamic_cast</code>ËÇØÂÆö‰∏çËÉΩÁÆó‰ΩúÂø´ÈÄüÊìç‰Ωú„ÄÇÂõ†Ê≠§ÔºåÊØèÊ¨°ÊØîËæÉ‰Ω†ÈÉΩÈúÄË¶Å‰ªòÂá∫Áõ∏ÂΩìÂ§ßÁöÑËøêË°åÊó∂Èó¥ÊàêÊú¨„ÄÇ</p>
<p>ÂÖ∂Ê¨°ÔºåÂú®ËøôÁßçÂÆûÁé∞‰∏≠ÔºåÂè™ÊúâÂΩì‰∏§‰∏™ <strong>Shapes</strong> ÈÖçÂ§á‰∫ÜÁõ∏ÂêåÁöÑ <strong>DrawStrategy</strong> Êó∂ÊâçËÉΩÊàêÂäüÊØîËæÉ„ÄÇ</p>
<p>ËôΩÁÑ∂ËøôÂú®‰∏Ä‰∏™‰∏ä‰∏ãÊñá‰∏≠ÂèØËÉΩÊòØÂêàÁêÜÁöÑÔºå‰ΩÜÂú®Âè¶‰∏Ä‰∏™‰∏ä‰∏ãÊñá‰∏≠‰πüÂèØËÉΩË¢´ËßÜ‰∏∫‰∏çÂπ∏ÁöÑÈôêÂà∂„ÄÇ</p>
<p>ÊàëÁü•ÈÅìÁöÑÂîØ‰∏ÄËß£ÂÜ≥ÊñπÊ°àÊòØËøîÂõûÂà∞<code>std::function</code>Êù•Â≠òÂÇ®ÁªòÂà∂Á≠ñÁï•Ôºå‰ΩÜËøô‰ºöÂØºËá¥Âè¶‰∏Ä‰∏™ÊÄßËÉΩÊçüÂ§±„ÄÇÊÄª‰πãÔºåÊ†πÊçÆ‰∏ä‰∏ãÊñáÁöÑ‰∏çÂêåÔºåÁõ∏Á≠âÊØîËæÉÂèØËÉΩÊòØÂèØËÉΩÁöÑÔºå‰ΩÜÂÆÉÈÄöÂ∏∏Êó¢‰∏çÂÆπÊòì‰πü‰∏ç‰æøÂÆú„ÄÇËøôËØÅÊòé‰∫ÜÊàë‰πãÂâçÁöÑÂ£∞ÊòéÔºåÂç≥<strong>Á±ªÂûãÊì¶Èô§‰∏çÊîØÊåÅ‰∫åÂÖÉÊìç‰Ωú</strong>„ÄÇ</p>
<p><strong>Á±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®ÁöÑÊé•Âè£ÂàÜÁ¶ª</strong></p>
<p>‚ÄúÊé•Âè£ÂàÜÁ¶ªÂéüÂàôÔºàISPÔºâÂë¢Ôºü‚Äù‰Ω†ÈóÆ„ÄÇ‚ÄúÂú®‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÊó∂ÔºåÂæàÂÆπÊòìÂú®Âü∫Á±ª‰∏≠ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ„ÄÇÁúãËµ∑Êù•Êàë‰ª¨Â∑≤ÁªèÂ§±Âéª‰∫ÜËøôÁßçËÉΩÂäõÔºåÂØπÂêóÔºü‚Äù</p>
<p>ËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÈóÆÈ¢ò„ÄÇ‰Ω†ËøòËÆ∞ÂæóÊàëÂú® ‚ÄúÂáÜÂàô31Ôºö‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÂÆûÁé∞Èùû‰æµÂÖ•ÂºèËøêË°åÊó∂Â§öÊÄÅÊÄß‚Äù ‰∏≠ÁöÑ‰æãÂ≠êÔºåÂÖ∂‰∏≠‰ΩøÁî®‰∫Ü<code>JSONExportable</code>Âíå<code>Serializable</code>Âü∫Á±ª„ÄÇ</p>
<p>Á°ÆÂÆûÔºå‰ΩøÁî®Á±ªÂûãÊì¶Èô§ÂêéÔºåÊàë‰ª¨‰∏çËÉΩÂÜç‰ΩøÁî®ÈöêËóèÁöÑÂü∫Á±ªÔºåÂè™ËÉΩ‰ΩøÁî®ÊäΩË±°ÂÄºÁ±ªÂûã„ÄÇÂõ†Ê≠§ÔºåÁúãËµ∑Êù•Â•ΩÂÉèISPÊó†Ê≥ïÂÆûÁé∞‰∫ÜÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Document</span>  <span class="c1">// Á±ªÂûãÊì¶Èô§ÂêéÁöÑ&#39;Document&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">ByteStream</span><span class="o">&amp;</span> <span class="n">bs</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Â∞ΩÁÆ°Âè™ÈúÄË¶ÅJSONÂØºÂá∫Ôºå‰ΩÜËøôÈáåÂº∫Âà∂ËÄ¶ÂêàÂà∞&#39;ByteStream&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">exportDocument</span><span class="p">(</span><span class="n">Document</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">doc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">doc</span><span class="p">.</span><span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/* ‰º†ÈÄíÂøÖË¶ÅÁöÑÂèÇÊï∞ */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ËÄåÔºåÂπ∏ËøêÁöÑÊòØÔºåËøôÁßçÂç∞Ë±°ÊòØÈîôËØØÁöÑ„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáÊèê‰æõÂ§ö‰∏™Á±ªÂûãÊì¶Èô§ÊäΩË±°ËΩªÊùæÈÅµÂÆàISPÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">Document</span> <span class="n">doc</span> <span class="o">=</span> <span class="cm">/*...*/</span><span class="p">;</span>  <span class="c1">// Á±ªÂûãÊì¶Èô§ÂêéÁöÑ&#39;Document&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">doc</span><span class="p">.</span><span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/* ‰º†ÈÄíÂøÖË¶ÅÁöÑÂèÇÊï∞ */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">doc</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="cm">/* ‰º†ÈÄíÂøÖË¶ÅÁöÑÂèÇÊï∞ */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">JSONExportable</span> <span class="n">jdoc</span> <span class="o">=</span> <span class="n">doc</span><span class="p">;</span>  <span class="c1">// Á±ªÂûãÊì¶Èô§ÂêéÁöÑ&#39;JSONExportable&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">jdoc</span><span class="p">.</span><span class="n">exportToJSON</span><span class="p">(</span><span class="cm">/* ‰º†ÈÄíÂøÖË¶ÅÁöÑÂèÇÊï∞ */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Serializable</span> <span class="n">sdoc</span> <span class="o">=</span> <span class="n">doc</span><span class="p">;</span>  <span class="c1">// Á±ªÂûãÊì¶Èô§ÂêéÁöÑ&#39;Serializable&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">sdoc</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="cm">/* ‰º†ÈÄíÂøÖË¶ÅÁöÑÂèÇÊï∞ */</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ËÄÉËôëËøô‰∏ÄÁÇπ‰πãÂâçÔºåËØ∑ÂèÇÈòÖ‚ÄúÊåáÂçó34ÔºöÊ≥®ÊÑèÊã•ÊúâÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®ÁöÑËÆæÁΩÆÊàêÊú¨‚Äù„ÄÇ</p>
<p>‚ÄúÈô§‰∫ÜÂÆûÁé∞Â§çÊùÇÊÄßÂíåÂØπ‰∏ÄÂÖÉÊìç‰ΩúÁöÑÈôêÂà∂Â§ñÔºå‰ºº‰πéÊ≤°ÊúâÂÖ∂‰ªñÁº∫ÁÇπ„ÄÇÈÇ£‰πàÔºåÊàë‰∏çÂæó‰∏çËØ¥ËøôÁ°ÆÂÆûÊòØÈùûÂ∏∏Ê£íÁöÑ‰∏úË•øÔºÅ‰ºòÁÇπÊòéÊòæË∂ÖËøá‰∫ÜÁº∫ÁÇπ„ÄÇ‚Äù</p>
<p>ÂΩìÁÑ∂ÔºåÂÖ∑‰ΩìÊÉÖÂÜµÊÄªÊòØ‰∏çÂêåÁöÑÔºåÊÑèÂë≥ÁùÄÂú®ÁâπÂÆö‰∏ä‰∏ãÊñá‰∏≠ÔºåËøô‰∫õÈóÆÈ¢òÂèØËÉΩ‰ºöÂºïËµ∑‰∏Ä‰∫õÈ∫ªÁÉ¶„ÄÇ‰ΩÜÊàëÂêåÊÑèÔºåÊÄªÁöÑÊù•ËØ¥ÔºåÁ±ªÂûãÊì¶Èô§Ë¢´ËØÅÊòéÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Êúâ‰ª∑ÂÄºÁöÑËÆæËÆ°Ê®°Âºè„ÄÇ‰ªéËÆæËÆ°ËßíÂ∫¶Êù•ÁúãÔºå‰Ω†Ëé∑Âæó‰∫ÜÂº∫Â§ßÁöÑËß£ËÄ¶Ê∞¥Âπ≥ÔºåËøôÂ∞ÜÊòæËëóÂáèÂ∞ëÂú®Êõ¥ÊîπÊàñÊâ©Â±ïËΩØ‰ª∂Êó∂ÁöÑÁóõËã¶„ÄÇÂ∞ΩÁÆ°ËøôÂ∑≤ÁªèÂæàÂê∏Âºï‰∫∫‰∫ÜÔºå‰ΩÜËøòÊúâÊõ¥Â§öÂÜÖÂÆπ„ÄÇÊàëÂ∑≤ÁªèÂ§öÊ¨°ÊèêÂà∞ÊÄßËÉΩÔºå‰ΩÜËøòÊ≤°ÊúâÂ±ïÁ§∫‰ªª‰ΩïÊÄßËÉΩÊï∞ÊçÆ„ÄÇÊâÄ‰ª•ËÆ©Êàë‰ª¨Êù•ÁúãÁúãÊÄßËÉΩÁªìÊûú„ÄÇ</p>
<p><strong>ÊÄßËÉΩÂü∫ÂáÜÊµãËØï</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÂÆûÁé∞Á±ªÂûã</th>
<th>GCC 11.1</th>
<th>Clang 11.1</th>
</tr>
</thead>
<tbody>
<tr>
<td>Èù¢ÂêëÂØπË±°ÁöÑËß£ÂÜ≥ÊñπÊ°à</td>
<td>1.5205 Áßí</td>
<td>1.1480 Áßí</td>
</tr>
<tr>
<td>std::function</td>
<td>2.1782 Áßí</td>
<td>1.4884 Áßí</td>
</tr>
<tr>
<td>ÊâãÂä®ÂÆûÁé∞ÁöÑstd::function</td>
<td>1.6354 Áßí</td>
<td>1.4465 Áßí</td>
</tr>
<tr>
<td>ÁªèÂÖ∏Á≠ñÁï•</td>
<td>1.6372 Áßí</td>
<td>1.4046 Áßí</td>
</tr>
<tr>
<td>Á±ªÂûãÊì¶Èô§</td>
<td>1.5298 Áßí</td>
<td>1.1561 Áßí</td>
</tr>
</tbody>
</table></div>
<p>‚ÄúÁúãËµ∑Êù•ÈùûÂ∏∏ÊúâË∂£„ÄÇÁ±ªÂûãÊì¶Èô§‰ºº‰πéÁõ∏ÂΩìÂø´„ÄÇÊòæÁÑ∂Âè™ÊúâÈù¢ÂêëÂØπË±°ÁöÑËß£ÂÜ≥ÊñπÊ°àÁ®çÂæÆÂø´‰∏ÄÁÇπ„ÄÇ‚Äù</p>
<p>ÊòØÁöÑÔºåÂØπ‰∫éClangÊù•ËØ¥ÔºåÈù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°àÁöÑÊÄßËÉΩÁ®çÂ•Ω‰∏Ä‰∫õÔºå‰ΩÜÊòØÂè™Êúâ‰∏ÄÁÇπÁÇπ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËØ∑ËÆ∞‰ΩèÔºåÈù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°àÂπ∂Ê≤°ÊúâËß£ËÄ¶‰ªª‰Ωï‰∏úË•øÔºö<code>draw()</code>ÂáΩÊï∞‰Ωú‰∏∫ <strong>Shape</strong> Â±ÇÊ¨°ÁªìÊûÑ‰∏≠ÁöÑËôöÂáΩÊï∞ÂÆûÁé∞ÔºåÂõ†Ê≠§‰Ω†‰ΩìÈ™åÂà∞‰∫Ü‰∏éÁªòÂõæÂäüËÉΩÁöÑÁ¥ßÂØÜËÄ¶Âêà„ÄÇËôΩÁÑ∂ËøôÂèØËÉΩÂ∏¶Êù•ÂæàÂ∞ëÁöÑÊÄßËÉΩÂºÄÈîÄÔºå‰ΩÜ‰ªéËÆæËÆ°ËßíÂ∫¶Êù•ÁúãÔºåËøôÊòØ‰∏Ä‰∏™ÊúÄÁ≥üÁ≥ïÁöÑÊÉÖÂÜµ„ÄÇ</p>
<p>ËÄÉËôëÂà∞Ëøô‰∏ÄÁÇπÔºåÁ±ªÂûãÊì¶Èô§ÁöÑÊÄßËÉΩÊï∞Â≠óÁ°ÆÂÆû‰ª§‰∫∫ÊÉäÂèπÔºöÂÆÉÁöÑÊÄßËÉΩÊØî‰ªª‰ΩïÁ≠ñÁï•ÂÆûÁé∞È´òÂá∫6%Âà∞20%„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÁ±ªÂûãÊì¶Èô§‰∏ç‰ªÖÊèê‰æõ‰∫ÜÊúÄÂº∫ÁöÑËß£ËÄ¶ÔºåËÄå‰∏îÂÖ∂ÊÄßËÉΩ‰πü‰ºò‰∫éÊâÄÊúâÂÖ∂‰ªñÂáèÂ∞ëËÄ¶ÂêàÁöÑÂ∞ùËØï„ÄÇ</p>
<p><strong>ÂÖ≥‰∫éÊúØËØ≠ÁöÑ‰∏ÄÁÇπËØ¥Êòé</strong></p>
<p>ÊÄªÁöÑÊù•ËØ¥ÔºåÁ±ªÂûãÊì¶Èô§ÊòØ‰∏ÄÁßçÂÆûÁé∞È´òÊïà‰∏îÊùæËÄ¶Âêà‰ª£Á†ÅÁöÑÂá∫Ëâ≤ÊñπÊ≥ï„ÄÇÂ∞ΩÁÆ°ÂÆÉÊúâ‰∏Ä‰∫õÂ±ÄÈôêÊÄßÂíåÁº∫ÁÇπÔºå‰ΩÜ‰Ω†ÂèØËÉΩÊó†Ê≥ïËΩªÊòìÂøΩËßÜÁöÑÊòØÂÖ∂ÂÆûÁé∞ÁªÜËäÇÁöÑÂ§çÊùÇÊÄß„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂåÖÊã¨ÊàëÂíåEric NieblerÂú®ÂÜÖÁöÑËÆ∏Â§ö‰∫∫ËÆ§‰∏∫ÔºåÁ±ªÂûãÊì¶Èô§Â∫îËØ•Êàê‰∏∫‰∏Ä‰∏™ËØ≠Ë®ÄÁâπÊÄßÔºö</p>
<p>‚ÄúÂ¶ÇÊûúÊàëËÉΩÂõûÂà∞ËøáÂéªÔºåÂπ∂‰∏îÊúâËÉΩÂäõÊîπÂèòC++ÔºåËÄå‰∏çÊòØÊ∑ªÂä†ËôöÂáΩÊï∞ÔºåÊàë‰ºöÊ∑ªÂä†ÂØπÁ±ªÂûãÊì¶Èô§ÂíåÊ¶ÇÂøµÁöÑËØ≠Ë®ÄÊîØÊåÅÔºöÂÆö‰πâ‰∏Ä‰∏™Âçï‰∏ÄÁ±ªÂûãÁöÑÊ¶ÇÂøµÔºåÂπ∂Ëá™Âä®ÁîüÊàê‰∏Ä‰∏™Á±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®„ÄÇ‚Äù</p>
<p>ÁÑ∂ËÄåÔºåË¶ÅÂ∞ÜÁ±ªÂûãÊì¶Èô§Á°ÆÁ´ã‰∏∫‰∏ÄÁßçÁúüÊ≠£ÁöÑËÆæËÆ°Ê®°ÂºèÔºåËøòÊúâÊõ¥Â§öÁöÑÂ∑•‰ΩúË¶ÅÂÅö„ÄÇ</p>
<p>Êàë‰ªãÁªç‰∫ÜÁ±ªÂûãÊì¶Èô§‰Ωú‰∏∫‰∏ÄÁßçÁî±Â§ñÈÉ®Â§öÊÄÅ„ÄÅÊ°•Êé•ÂíåÂéüÂûãÁªÑÊàêÁöÑÂ§çÂêàËÆæËÆ°Ê®°ÂºèÔºåÂÆÉË¢´ÂºïÂÖ•‰Ωú‰∏∫‰∏ÄÁßçÂü∫‰∫éÂÄºÁöÑÊäÄÊúØÔºåÁî®‰∫éÊèê‰æõ‰∏ÄÁªÑÁ±ªÂûã‰∏éÂÖ∂Áõ∏ÂÖ≥Êìç‰Ωú‰πãÈó¥ÁöÑÂº∫Ëß£ËÄ¶„ÄÇ</p>
<p>‰∏çÂπ∏ÁöÑÊòØÔºå‰Ω†ÂèØËÉΩ‰ºöÁúãÂà∞ÂÖ∂‰ªñ‚ÄúÂΩ¢Âºè‚ÄùÁöÑÁ±ªÂûãÊì¶Èô§ÔºöÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºå‚ÄúÁ±ªÂûãÊì¶Èô§‚ÄùËøô‰∏™ÊúØËØ≠Ë¢´ËØØÁî®ÂíåÊª•Áî®Âú®ÂêÑÁßçÊäÄÊúØÂíåÊ¶ÇÂøµ‰∏≠„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÊúâÊó∂‰∫∫‰ª¨Â∞Ü<code>void*</code>Áß∞‰∏∫Á±ªÂûãÊì¶Èô§„ÄÇÂÅ∂Â∞îÔºå‰Ω†‰πüÂèØËÉΩÂê¨Âà∞Âú®ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÊàñÊõ¥ÂÖ∑‰ΩìÂú∞ÊåáÂêëÂü∫Á±ªÁöÑ‰∏ä‰∏ãÊñá‰∏≠ÊèêÂà∞Á±ªÂûãÊì¶Èô§„ÄÇ</p>
<p>ÊúÄÂêéÔºåÂú®<code>std::variant</code>ÁöÑ‰∏ä‰∏ãÊñá‰∏≠‰πüÂèØËÉΩÂê¨Âà∞Á±ªÂûãÊì¶Èô§„ÄÇ</p>
<p>ÁâπÂà´ÊòØ<code>std::variant</code>ÁöÑ‰æãÂ≠êÂ±ïÁ§∫‰∫ÜËøôÁßçÊúØËØ≠Êª•Áî®ÊòØÂ§ö‰πà‰∏•Èáç„ÄÇËôΩÁÑ∂Â§ñÈÉ®Â§öÊÄÅÔºàÁ±ªÂûãÊì¶Èô§ËÉåÂêéÁöÑ‰∏ªË¶ÅËÆæËÆ°Ê®°ÂºèÔºâÊòØÂÖ≥‰∫é‰Ωø‰Ω†ËÉΩÂ§üÊ∑ªÂä†Êñ∞Á±ªÂûãÁöÑÔºå‰ΩÜËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÂèäÂÖ∂Áé∞‰ª£ÂÆûÁé∞<code>std::variant</code>ÊòØÂÖ≥‰∫éÊ∑ªÂä†Êñ∞Êìç‰ΩúÁöÑÔºàÂèÇËßÅ‚ÄúÂáÜÂàô15ÔºöËÆæËÆ°‰ª•Ê∑ªÂä†Á±ªÂûãÊàñÊìç‰Ωú‰∏∫ÁõÆÊ†á‚ÄùÔºâ„ÄÇ</p>
<p>‰ªéËΩØ‰ª∂ËÆæËÆ°ÁöÑËßíÂ∫¶Êù•ÁúãÔºåËøô‰∏§ÁßçËß£ÂÜ≥ÊñπÊ°àÂÆåÂÖ®Ê≠£‰∫§ÔºöÁ±ªÂûãÊì¶Èô§ÁúüÊ≠£Ëß£ËÄ¶‰∫ÜÂÖ∑‰ΩìÁöÑÁ±ªÂûãÂπ∂Êì¶Èô§‰∫ÜÁ±ªÂûã‰ø°ÊÅØÔºåËÄå<code>std::variant</code>ÁöÑÊ®°ÊùøÂèÇÊï∞Êè≠Á§∫‰∫ÜÊâÄÊúâÂèØËÉΩÁöÑÈÄâÊã©ÔºåÂõ†Ê≠§ËÆ©‰Ω†‰æùËµñËøô‰∫õÁ±ªÂûã„ÄÇ</p>
<p>‰ΩøÁî®Áõ∏ÂêåÁöÑÊúØËØ≠Êù•ÊèèËø∞‰∏§ËÄÖ‰ºöÂØºËá¥Âú®‰ΩøÁî®‚ÄúÁ±ªÂûãÊì¶Èô§‚ÄùËøô‰∏™ËØçÊó∂ÂÆåÂÖ®Ê≤°Êúâ‰º†Ëææ‰ªª‰Ωï‰ø°ÊÅØÔºåÂπ∂‰∫ßÁîüËøôÊ†∑ÁöÑËØÑËÆ∫Ôºö‚ÄúÊàëÂª∫ËÆÆÊàë‰ª¨‰ΩøÁî®Á±ªÂûãÊì¶Èô§Êù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ‚Äù ‚Äú‰Ω†ËÉΩÊõ¥ÂÖ∑‰Ωì‰∏ÄÁÇπÂêóÔºü‰Ω†ÊÉ≥Ê∑ªÂä†Á±ªÂûãËøòÊòØÊìç‰ΩúÔºü‚Äù</p>
<p>Âõ†Ê≠§ÔºåËøô‰∏™ÊúØËØ≠‰∏ç‰ºöÂÖ∑Â§áËÆæËÆ°Ê®°ÂºèÂ∫îÊúâÁöÑÁâπË¥®ÔºõÂÆÉ‰∏ç‰ºö‰º†Ëææ‰ªª‰ΩïÊÑèÂõæ„ÄÇÂõ†Ê≠§ÔºåÂÆÉÂ∞ÜÊòØÊó†Áî®ÁöÑ„ÄÇ</p>
<p>‰∏∫‰∫ÜÁªôÁ±ªÂûãÊì¶Èô§Âú®ÂÖ∂Â∫îÊúâÁöÑËÆæËÆ°Ê®°ÂºèÊÆøÂ†Ç‰∏≠Ëµ¢Âæó‰∏ÄÂ∏≠‰πãÂú∞ÔºåÂπ∂Ëµã‰∫àÂÖ∂ÊÑè‰πâÔºåËØ∑‰ªÖÂú®ËÆ®ËÆ∫Êú¨ÊåáÂçó‰∏≠ÁöÑÊÑèÂõæÊó∂‰ΩøÁî®ËØ•ÊúØËØ≠„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<p>Â∫îÁî®Á±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑÊòØ‰∏∫‰∏ÄÁªÑÂèØÊâ©Â±ïÁöÑ„ÄÅÊó†ÂÖ≥ÁöÑ„ÄÅÂèØËÉΩÊòØÈùûÂ§öÊÄÅÁöÑÁ±ªÂûãÊèê‰æõÂü∫‰∫éÂÄºÁöÑ„ÄÅÈùû‰æµÂÖ•ÂºèÁöÑÊäΩË±°ÔºåËøô‰∫õÁ±ªÂûãÂÖ∑ÊúâÁõ∏ÂêåÁöÑËØ≠‰πâË°å‰∏∫„ÄÇ</p>
<ul>
<li><strong>ËÄÉËôëÁ±ªÂûãÊì¶Èô§</strong>‰Ωú‰∏∫Áî±Â§ñÈÉ®Â§öÊÄÅ„ÄÅÊ°•Êé•ÂíåÂéüÂûãËÆæËÆ°Ê®°ÂºèÁªÑÊàêÁöÑÂ§çÂêàËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li><strong>ÁêÜËß£Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂäø</strong>Ôºå‰ΩÜ‰πüËÆ∞‰ΩèÂÖ∂Â±ÄÈôêÊÄß„ÄÇ</li>
<li><strong>‰ªÖÂú®Ê≤üÈÄöÂÖ∂ÊÑèÂõæÊó∂‰ΩøÁî®Á±ªÂûãÊì¶Èô§</strong>Ëøô‰∏ÄÊúØËØ≠ÔºåÂç≥‰Ωú‰∏∫‰∏ÄÁßçÂÖÅËÆ∏ËΩªÊùæÊ∑ªÂä†ÊîØÊåÅÂõ∫ÂÆöÊìç‰ΩúÈõÜÁöÑÁ±ªÂûãÁöÑËÆæËÆ°Ê®°Âºè„ÄÇ</li>
</ul>
<p>ÈÄöËøáËøôÁßçÊñπÂºèÔºå‰Ω†ÂèØ‰ª•Á°Æ‰øùÂú®‰ΩøÁî®‚ÄúÁ±ªÂûãÊì¶Èô§‚ÄùËøô‰∏™ÊúØËØ≠Êó∂ÔºåÂÆÉÊòØÊúâÊÑè‰πâ‰∏îÊ∏ÖÊô∞ÁöÑÔºåÈÅøÂÖçÊ∑∑Ê∑ÜÂíåËØØËß£„ÄÇËøô‰∏ç‰ªÖÊúâÂä©‰∫éÊæÑÊ∏ÖËÆæËÆ°ÊÑèÂõæÔºåËøòËÉΩÂ∏ÆÂä©Âõ¢ÈòüÊàêÂëòÊõ¥Â•ΩÂú∞ÁêÜËß£ÂíåÂ∫îÁî®Ëøô‰∏ÄÂº∫Â§ßÁöÑËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<h3 id="ÂáÜÂàô33‰∫ÜËß£Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ">ÂáÜÂàô33Ôºö‰∫ÜËß£Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ
</h3><p>Êú¨‰π¶ÁöÑ‰∏ªË¶ÅÂÖ≥Ê≥®ÁÇπÊòØËΩØ‰ª∂ËÆæËÆ°„ÄÇÂõ†Ê≠§ÔºåÊâÄÊúâÂÖ≥‰∫éÁªìÊûÑÂåñËΩØ‰ª∂„ÄÅËÆæËÆ°ÂéüÂàô„ÄÅÁÆ°ÁêÜ‰æùËµñÂíåÊäΩË±°ÁöÑÂ∑•ÂÖ∑ÔºåÂΩìÁÑ∂ËøòÊúâËÆæËÆ°Ê®°ÂºèÁöÑ‰ø°ÊÅØÈÉΩÊòØÊ†∏ÂøÉÂÜÖÂÆπ„ÄÇ</p>
<p>Â∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÊàëÂ∑≤ÁªèÂ§öÊ¨°ÊèêÂà∞ÊÄßËÉΩÈùûÂ∏∏ÈáçË¶ÅÔºåÈùûÂ∏∏ÈáçË¶ÅÔºÅÊØïÁ´üÔºåC++ÊòØ‰∏ÄÁßç‰ª•ÊÄßËÉΩ‰∏∫‰∏≠ÂøÉÁöÑÁºñÁ®ãËØ≠Ë®Ä„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÊàëÁé∞Âú®ÂÅö‰∏Ä‰∏™‰æãÂ§ñÔºöÊú¨ÊåáÂçó‰∏ìÈó®ËÆ®ËÆ∫ÊÄßËÉΩ„ÄÇÊòØÁöÑÔºåÊàëÊòØËÆ§ÁúüÁöÑÔºö‰∏çË∞à‰æùËµñÂÖ≥Á≥ªÔºåÔºàÂá†‰πéÔºâÊ≤°ÊúâÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÁöÑ‰æãÂ≠êÔºå‰πüÊ≤°ÊúâÂÄºËØ≠‰πâÔºåÂè™ÊúâÊÄßËÉΩ„ÄÇ</p>
<p>‚ÄúÁªà‰∫éÊúâ‰∏Ä‰∫õÊÄßËÉΩÁõ∏ÂÖ≥ÁöÑÁü•ËØÜ‰∫Ü‚Äî‚ÄîÂ§™Â•Ω‰∫ÜÔºÅ‚Äù‰Ω†Ê¨¢ÂëºÈÅì„ÄÇÁÑ∂ËÄåÔºåËØ∑Ê≥®ÊÑèÂÖ∂ÂêéÊûúÔºöÊú¨ÊåáÂçóÈùûÂ∏∏Ê≥®ÈáçÂÆûÁé∞ÁªÜËäÇÔºåËÄåÂú®C++‰∏≠ÔºåÊèêÂèä‰∏Ä‰∏™ÁªÜËäÇÈÄöÂ∏∏ÈúÄË¶ÅÂ§ÑÁêÜÂè¶Â§ñ‰∏§‰∏™ÁªÜËäÇÔºåÂõ†Ê≠§‰Ω†ÂæàÂø´Â∞±‰ºöÈô∑ÂÖ•ÂÆûÁé∞ÁªÜËäÇÁöÑÊ≥•ÊΩ≠„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçËøôÁßçÊÉÖÂÜµÔºàÂπ∂ËÆ©ÊàëÁöÑÂá∫ÁâàÂïÜÊª°ÊÑèÔºâÔºåÊàë‰∏ç‰ºöËØ¶ÁªÜËß£ÈáäÊØè‰∏Ä‰∏™ÂÆûÁé∞ÁªÜËäÇÊàñÊºîÁ§∫ÊâÄÊúâÊõø‰ª£ÊñπÊ°à„ÄÇ‰ΩÜÊòØÔºåÊàë‰ºöÊèê‰æõ‰∏Ä‰∫õÂèÇËÄÉËµÑÊñôÔºåÂ∏ÆÂä©‰Ω†Ê∑±ÂÖ•Á†îÁ©∂„ÄÇ</p>
<p>Âú®‚ÄúÂáÜÂàô32ÔºöËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§ÊõøÊç¢ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‚Äù‰∏≠Ôºå‰Ω†ÁúãÂà∞‰∫ÜÊàë‰ª¨Âü∫Êú¨Êú™‰ºòÂåñÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞ÁöÑÂá∫Ëâ≤ÊÄßËÉΩÊï∞ÊçÆ„ÄÇÁÑ∂ËÄåÔºåÁî±‰∫éÊàë‰ª¨Áé∞Âú®Êã•Êúâ‰∏Ä‰∏™ÂÄºÁ±ªÂûãÂíåÂåÖË£ÖÁ±ªÔºåËÄå‰∏ç‰ªÖ‰ªÖÊòØ‰∏Ä‰∏™ÊåáÈíàÔºåÊàë‰ª¨Ëé∑Âæó‰∫ÜËÆ∏Â§öÊèêÈ´òÊÄßËÉΩÁöÑÊú∫‰ºö„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Â∞ÜÊé¢ËÆ®‰∏§ÁßçÊîπËøõÊÄßËÉΩÁöÑÊñπÊ≥ïÔºöÂ∞èÁºìÂÜ≤Âå∫‰ºòÂåñÔºàSBOÔºâÂíåÊâãÂä®ËôöÊãüË∞ÉÂ∫¶„ÄÇ</p>
<p><strong>Â∞èÁºìÂÜ≤Âå∫‰ºòÂåñÔºàSBOÔºâ</strong></p>
<p>ËÆ©Êàë‰ª¨ÂºÄÂßãÊèêÂçáÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞ÊÄßËÉΩÁöÑÊé¢Á¥¢„ÄÇÂΩìË∞àÂà∞ÊÄßËÉΩÊó∂ÔºåÈÄöÂ∏∏È¶ñÂÖàÊÉ≥Âà∞ÁöÑÊòØ‰ºòÂåñÂÜÖÂ≠òÂàÜÈÖç„ÄÇËøôÊòØÂõ†‰∏∫Ëé∑ÂèñÂíåÈáäÊîæÂä®ÊÄÅÂÜÖÂ≠òÂèØËÉΩ‰ºöÈùûÂ∏∏ÊÖ¢‰∏î‰∏çÂèØÈ¢ÑÊµã„ÄÇÂÆûÈôÖ‰∏äÔºå‰ºòÂåñÂÜÖÂ≠òÂàÜÈÖçÂèØ‰ª•ÂÜ≥ÂÆöÁ®ãÂ∫èÊòØÊÖ¢ËøòÊòØÂø´Â¶ÇÈó™Áîµ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËøòÊúâÁ¨¨‰∫å‰∏™ÂéüÂõ†ÈúÄË¶ÅÂÖ≥Ê≥®ÂÜÖÂ≠ò„ÄÇÂú®‚ÄúÊåáÂçó32ÔºöËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§ÊõøÊç¢ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‚Äù‰∏≠ÔºåÊàëÂèØËÉΩÊó†ÊÑè‰∏≠Áªô‰Ω†Áïô‰∏ã‰∫ÜÊàë‰ª¨ÈúÄË¶ÅÂä®ÊÄÅÂÜÖÂ≠òÊù•ÂÆûÁé∞Á±ªÂûãÊì¶Èô§ÁöÑÂç∞Ë±°„ÄÇÁ°ÆÂÆûÔºåÂú®Êàë‰ª¨ÁöÑÁ¨¨‰∏Ä‰∏™ShapeÁ±ªÁöÑÂàùÂßãÂÆûÁé∞‰∏≠ÔºåÊó†ËÆ∫ÂØπË±°Â§ßÂ∞èÂ¶Ç‰ΩïÔºåÊûÑÈÄ†ÂáΩÊï∞Âíåclone()ÂáΩÊï∞ÊÄªÊòØÊó†Êù°‰ª∂Âú∞ËøõË°åÂä®ÊÄÅÂÜÖÂ≠òÂàÜÈÖçÔºåÂØπ‰∫éÂ∞èÂØπË±°ÂíåÂ§ßÂØπË±°ÈÉΩ‰ºöÊâßË°åstd::make_unique()„ÄÇËøôÁßçÈÄâÊã©‰∏ç‰ªÖÂõ†‰∏∫ÊÄßËÉΩÈóÆÈ¢òÔºàÁâπÂà´ÊòØÂØπ‰∫éÂ∞èÂØπË±°ÔºâÂèóÂà∞ÈôêÂà∂ÔºåËøòÂõ†‰∏∫Âú®Êüê‰∫õÁéØÂ¢É‰∏≠Êó†Ê≥ï‰ΩøÁî®Âä®ÊÄÅÂÜÖÂ≠ò„ÄÇÂõ†Ê≠§ÔºåÊàëÂ∫îËØ•Âêë‰Ω†Â±ïÁ§∫‰Ω†ÂèØ‰ª•ÂØπÂÜÖÂ≠òÂÅöÂæàÂ§ö‰∫ãÊÉÖ„ÄÇÂÆûÈôÖ‰∏äÔºå‰Ω†ÂÆåÂÖ®ÊéßÂà∂ÁùÄÂÜÖÂ≠òÁÆ°ÁêÜÔºÅÂõ†‰∏∫‰Ω†‰ΩøÁî®ÁöÑÊòØÂÄºÁ±ªÂûãÂíåÂåÖË£ÖÂô®ÔºåÊâÄ‰ª•‰Ω†ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÈúÄÊ±ÇÂ§ÑÁêÜÂÜÖÂ≠ò„ÄÇÂÖ∂‰∏≠‰∏Ä‰∏™ÈÄâÈ°πÊòØÂÆåÂÖ®‰æùËµñ‰∫éÁ±ªÂÜÖÁöÑÂÜÖÂ≠òÔºåÂπ∂Âú®ÂØπË±°ËøáÂ§ßÊó∂ÂèëÂá∫ÁºñËØëÊó∂ÈîôËØØ„ÄÇÊàñËÄÖÔºå‰Ω†ÂèØ‰ª•Ê†πÊçÆÂ≠òÂÇ®ÂØπË±°ÁöÑÂ§ßÂ∞èÂú®Á±ªÂÜÖÂÜÖÂ≠òÂíåÂä®ÊÄÅÂÜÖÂ≠ò‰πãÈó¥ÂàáÊç¢„ÄÇËøô‰∏§ÁßçÊñπÊ≥ïÈÉΩÂèØ‰ª•ÈÄöËøáSBOÂÆûÁé∞„ÄÇ</p>
<p>‰∏∫‰∫ÜËÆ©‰Ω†‰∫ÜËß£SBOÁöÑÂ∑•‰ΩúÂéüÁêÜÔºåËÆ©Êàë‰ª¨Áúã‰∏Ä‰∏ã‰∏Ä‰∏™‰ªé‰∏çÂú®Shape‰∏≠Âä®ÊÄÅÂàÜÈÖçÂÜÖÂ≠òÔºåËÄåÊòØÂè™‰ΩøÁî®Á±ªÂÜÖÂÜÖÂ≠òÁöÑÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="n">size_t</span> <span class="n">Capacity</span> <span class="o">=</span> <span class="mi">32U</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">Alignment</span> <span class="o">=</span> <span class="k">alignof</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Concept</span><span class="o">*</span> <span class="n">pimpl</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">Concept</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">buffer_</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">Concept</span> <span class="k">const</span><span class="o">*</span> <span class="nf">pimpl</span><span class="p">()</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">Concept</span> <span class="k">const</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">buffer_</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">alignas</span><span class="p">(</span><span class="n">Alignment</span><span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="p">,</span> <span class="n">Capacity</span><span class="o">&gt;</span> <span class="n">buffer_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™ShapeÁ±ª‰∏çÂÜçÂ≠òÂÇ®std::unique_ptrÔºåËÄåÊòØÊã•Êúâ‰∏ÄÁªÑÈÄÇÂΩìÂØπÈΩêÁöÑÂ≠óËäÇÊï∞ÁªÑÔºàÔºâ„ÄÇ‰∏∫‰∫ÜÁªôShapeÁöÑÁî®Êà∑Êèê‰æõË∞ÉÊï¥Êï∞ÁªÑÂÆπÈáèÂíåÂØπÈΩêÊñπÂºèÁöÑÁÅµÊ¥ªÊÄßÔºå‰Ω†ÂèØ‰ª•‰∏∫ShapeÁ±ªÊèê‰æõ‰∏§‰∏™ÈùûÁ±ªÂûãÊ®°ÊùøÂèÇÊï∞CapacityÂíåAlignmentÔºàÔºâ„ÄÇËôΩÁÑ∂ËøôÊèêÈ´ò‰∫ÜÈÄÇÂ∫î‰∏çÂêåÊÉÖÂÜµÁöÑÁÅµÊ¥ªÊÄßÔºå‰ΩÜÁº∫ÁÇπÊòØÂ∞ÜShapeÁ±ªÂèòÊàê‰∫Ü‰∏Ä‰∏™Á±ªÊ®°Êùø„ÄÇÁªìÊûúÔºåÊâÄÊúâ‰ΩøÁî®Ëøô‰∏™ÊäΩË±°ÁöÑÂáΩÊï∞ÈÉΩÂèØËÉΩÂèòÊàêÂáΩÊï∞Ê®°Êùø„ÄÇËøôÂèØËÉΩÊòØ‰∏çÂ∏åÊúõÁöÑÔºå‰æãÂ¶ÇÔºå‰Ω†ÂèØËÉΩÈúÄË¶ÅÂ∞Ü‰ª£Á†Å‰ªéÊ∫êÊñá‰ª∂ÁßªÂä®Âà∞Â§¥Êñá‰ª∂„ÄÇÁÑ∂ËÄåÔºåËØ∑ËÆ∞‰ΩèËøôÂè™ÊòØËÆ∏Â§öÂèØËÉΩÊÄß‰πã‰∏Ä„ÄÇÊ≠£Â¶ÇÂâçÈù¢ÊâÄËø∞Ôºå‰Ω†ÂÆåÂÖ®ÊéßÂà∂ÁùÄÂÜÖÂ≠òÁÆ°ÁêÜ„ÄÇ</p>
<p>‰∏∫‰∫ÜÊñπ‰æøÊìç‰Ωústd::byteÊï∞ÁªÑÔºåÊàë‰ª¨Ê∑ªÂä†‰∫Ü‰∏ÄÂØπpimpl()ÂáΩÊï∞ÔºàÂü∫‰∫éÂÆÉ‰ª¨‰ªçÁÑ∂ÂÆûÁé∞Ê°•Êé•ËÆæËÆ°Ê®°ÂºèÁöÑ‰∫ãÂÆûÔºåÂè™ÊòØ‰ΩøÁî®Á±ªÂÜÖÂÜÖÂ≠òÔºâÔºàÂíåÔºâ„ÄÇ‰Ω†ÂèØËÉΩ‰ºöËØ¥Ôºö‚ÄúÂì¶‰∏çÔºåreinterpret_castÔºÅËøô‰∏çÊòØË∂ÖÁ∫ßÂç±Èô©ÂêóÔºü‚Äù ‰Ω†ÊòØÊ≠£Á°ÆÁöÑÔºõ‰∏ÄËà¨Êù•ËØ¥Ôºåreinterpret_castÂ∫îË¢´ËßÜ‰∏∫ÊΩúÂú®Âç±Èô©„ÄÇÁÑ∂ËÄåÔºåÂú®ËøôÁßçÁâπÂÆöÊÉÖÂÜµ‰∏ãÔºåC++Ê†áÂáÜÊîØÊåÅÊàë‰ª¨Âú®ËøôÈáåÊâÄÂÅöÁöÑÊìç‰ΩúÔºåËØ¥ÊòéÂÆÉÊòØÂÆåÂÖ®ÂÆâÂÖ®ÁöÑ„ÄÇ</p>
<p>Â¶Ç‰Ω†ÊâÄÊñôÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÂºïÂÖ•‰∏Ä‰∏™Â§ñÈÉ®ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÔºåÂü∫‰∫éÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè„ÄÇËøôÊ¨°Êàë‰ª¨Âú®ShapeÁ±ªÁöÑÁßÅÊúâÈÉ®ÂàÜÂÆûÁé∞Ëøô‰∏™Â±ÇÊ¨°ÁªìÊûÑ„ÄÇ‰∏çÊòØÂõ†‰∏∫ÂÆÉÊõ¥ÈÄÇÂêàËøô‰∏™ShapeÂÆûÁé∞ÔºåËÄåÊòØ‰∏∫‰∫ÜÂ±ïÁ§∫Âè¶‰∏ÄÁßçÈÄâÊã©Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="n">size_t</span> <span class="n">Capacity</span> <span class="o">=</span> <span class="mi">32U</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">Alignment</span> <span class="o">=</span> <span class="k">alignof</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">Concept</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">virtual</span> <span class="o">~</span><span class="n">Concept</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">clone</span><span class="p">(</span><span class="n">Concept</span><span class="o">*</span> <span class="n">memory</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">move</span><span class="p">(</span><span class="n">Concept</span><span class="o">*</span> <span class="n">memory</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">OwningModel</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Concept</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">OwningModel</span><span class="p">(</span><span class="n">ShapeT</span> <span class="n">shape</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">:</span> <span class="n">shape_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">shape</span><span class="p">)),</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">        <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">drawer_</span><span class="p">(</span><span class="n">shape_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">void</span> <span class="nf">clone</span><span class="p">(</span><span class="n">Concept</span><span class="o">*</span> <span class="n">memory</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">std</span><span class="o">::</span><span class="n">construct_at</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">OwningModel</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">memory</span><span class="p">),</span> <span class="o">*</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// ÊàñËÄÖÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// auto* ptr = 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//    const_cast&lt;void*&gt;(static_cast&lt;void const volatile*&gt;(memory));
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// ::new (ptr) OwningModel(*this);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">void</span> <span class="nf">move</span><span class="p">(</span><span class="n">Concept</span><span class="o">*</span> <span class="n">memory</span><span class="p">)</span> <span class="k">override</span> 
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">std</span><span class="o">::</span><span class="n">construct_at</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">OwningModel</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">memory</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// ÊàñËÄÖÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// auto* ptr = 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//    const_cast&lt;void*&gt;(static_cast&lt;void const volatile*&gt;(memory));
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// ::new (ptr) OwningModel(std::move(*this));
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">ShapeT</span> <span class="n">shape_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">DrawStrategy</span> <span class="n">drawer_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">alignas</span><span class="p">(</span><span class="n">Alignment</span><span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="p">,</span> <span class="n">Capacity</span><span class="o">&gt;</span> <span class="n">buffer_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™‰∏ä‰∏ãÊñá‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™ÊúâË∂£ÁöÑÁªÜËäÇÊòØclone()ÂáΩÊï∞ÔºàÔºâ„ÄÇÂõ†‰∏∫clone()Ë¥üË¥£ÂàõÂª∫ÂâØÊú¨ÔºåÂÆÉÈúÄË¶ÅÈÄÇÂ∫îÁ±ªÂÜÖÂÜÖÂ≠ò„ÄÇÂõ†Ê≠§ÔºåÂÆÉ‰∏çÊòØÈÄöËøástd::make_unique()ÂàõÂª∫Êñ∞Ê®°ÂûãÔºåËÄåÊòØÈÄöËøástd::construct_at()ÂéüÂú∞ÂàõÂª∫Êñ∞Ê®°Âûã„ÄÇÊàñËÄÖÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®placement newÂú®ÁªôÂÆöÁöÑÂÜÖÂ≠ò‰ΩçÁΩÆÂàõÂª∫ÂâØÊú¨„ÄÇ</p>
<p>‚ÄúÁ≠âÁ≠âÔºÅËøôÊÆµ‰ª£Á†ÅÊúâÁÇπÈöæÁêÜËß£„ÄÇ‰∏∫‰ªÄ‰πàÈúÄË¶ÅËøô‰πàÂ§öËΩ¨Êç¢ÔºüÂÆÉ‰ª¨ÁúüÁöÑÂøÖË¶ÅÂêóÔºü‚Äù ÊàëÊâøËÆ§ÔºåËøô‰∫õË°åÊúâÁÇπÊåëÊàòÊÄß„ÄÇÂõ†Ê≠§ÔºåÊàëÂ∫îËØ•ËØ¶ÁªÜËß£Èáä‰∏Ä‰∏ã„ÄÇÂàõÂª∫ÂÆû‰æãÁöÑ‰º†ÁªüÊñπÊ≥ïÊòØÈÄöËøáplacement new„ÄÇÁÑ∂ËÄåÔºå‰ΩøÁî®newÊÄªÊòØÂ∏¶ÊúâÈ£éÈô©ÔºåÂç≥Êúâ‰∫∫ÔºàÊó†ËÆ∫ÊòØÊó†ÊÑèËøòÊòØÊÅ∂ÊÑèÔºâÂèØËÉΩ‰ºöÊèê‰æõ‰∏Ä‰∏™Á±ªÁâπÂÆöÁöÑnewÊìç‰ΩúÁ¨¶ÁöÑÊõø‰ª£ÂÆûÁé∞„ÄÇ‰∏∫‰∫ÜÈÅøÂÖç‰ªª‰ΩïÈóÆÈ¢òÂπ∂ÂèØÈù†Âú∞Âú®ÊåáÂÆöÂú∞ÂùÄÊûÑÈÄ†ÂØπË±°ÔºåÁªôÂÆöÂú∞ÂùÄÈ¶ñÂÖàÈÄöËøástatic_castËΩ¨Êç¢‰∏∫void const volatile*ÔºåÁÑ∂ÂêéÈÄöËøáconst_castËΩ¨Êç¢‰∏∫void*„ÄÇÂæóÂà∞ÁöÑÂú∞ÂùÄ‰º†ÈÄíÁªôÂÖ®Â±Äplacement newÊìç‰ΩúÁ¨¶„ÄÇÁ°ÆÂÆûÔºåËøô‰∏çÊòØÊúÄÊòéÊòæÁöÑ‰ª£Á†Å„ÄÇÂõ†Ê≠§ÔºåÂª∫ËÆÆ‰ΩøÁî®C++20ÁÆóÊ≥ïstd::construct_at()ÔºöÂÆÉÊèê‰æõ‰∫ÜÂÆåÂÖ®Áõ∏ÂêåÁöÑÂäüËÉΩÔºå‰ΩÜËØ≠Ê≥ïÊõ¥Âä†ÁÆÄÊ¥Å„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÂè¶‰∏Ä‰∏™ÂáΩÊï∞Ôºöclone()Âè™Â§ÑÁêÜÂ§çÂà∂Êìç‰Ωú„ÄÇÂÆÉ‰∏çÈÄÇÁî®‰∫éÁßªÂä®Êìç‰Ωú„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Â∞ÜÁ∫ØËôömove()ÂáΩÊï∞Êâ©Â±ïÂà∞Concept‰∏≠ÔºåÂπ∂Áõ∏Â∫îÂú∞Âú®OwningModelÁ±ªÊ®°Êùø‰∏≠ÂÆûÁé∞ÂÆÉ„ÄÇ</p>
<p>‚ÄúËøôÁúüÁöÑÊúâÂøÖË¶ÅÂêóÔºüÊàë‰ª¨‰ΩøÁî®ÁöÑÊòØÁ±ªÂÜÖÂÜÖÂ≠òÔºå‰∏çËÉΩ‰ªé‰∏Ä‰∏™ShapeÂÆû‰æãÁßªÂä®Âà∞Âè¶‰∏Ä‰∏™„ÄÇËøôÊ†∑ÂÅöÊúâ‰ªÄ‰πàÊÑè‰πâÔºü‚Äù ‰Ω†Ê≠£Á°ÆÂú∞ÊåáÂá∫Êàë‰ª¨‰∏çËÉΩÂ∞ÜÂÜÖÂ≠ò‰ªé‰∏Ä‰∏™ÂØπË±°ÁßªÂä®Âà∞Âè¶‰∏Ä‰∏™Ôºå‰ΩÜÊàë‰ª¨‰ªçÁÑ∂ÂèØ‰ª•ÁßªÂä®Â≠òÂÇ®Âú®ÂÖ∂‰∏≠ÁöÑÂΩ¢Áä∂„ÄÇÂõ†Ê≠§Ôºåmove()ÂáΩÊï∞Â∞ÜOwningModel‰ªé‰∏Ä‰∏™ÁºìÂÜ≤Âå∫ÁßªÂä®Âà∞Âè¶‰∏Ä‰∏™ÁºìÂÜ≤Âå∫ÔºåËÄå‰∏çÊòØÂ§çÂà∂ÂÆÉ„ÄÇ</p>
<p>clone()Âíåmove()ÂáΩÊï∞Áî®‰∫éShapeÁöÑÂ§çÂà∂ÊûÑÈÄ†ÂáΩÊï∞„ÄÅÂ§çÂà∂ËµãÂÄºËøêÁÆóÁ¨¶„ÄÅÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ Âíå ÁßªÂä®ËµãÂÄºËøêÁÆóÁ¨¶‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="n">size_t</span> <span class="n">Capacity</span> <span class="o">=</span> <span class="mi">32U</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">Alignment</span> <span class="o">=</span> <span class="k">alignof</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="p">(</span><span class="k">const</span> <span class="n">Shape</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">other</span><span class="p">.</span><span class="n">pimpl</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">clone</span><span class="p">(</span><span class="n">pimpl</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Shape</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Â§çÂà∂Âπ∂‰∫§Êç¢ÊÉØÁî®Ê≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Shape</span> <span class="nf">copy</span><span class="p">(</span><span class="n">other</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">buffer_</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">copy</span><span class="p">.</span><span class="n">buffer_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="p">(</span><span class="n">Shape</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">noexcept</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">other</span><span class="p">.</span><span class="n">pimpl</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">move</span><span class="p">(</span><span class="n">pimpl</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Shape</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">noexcept</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Â§çÂà∂Âπ∂‰∫§Êç¢ÊÉØÁî®Ê≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Shape</span> <span class="nf">copy</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">other</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">buffer_</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">copy</span><span class="p">.</span><span class="n">buffer_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">destroy_at</span><span class="p">(</span><span class="n">pimpl</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÊàñËÄÖÔºöpimpl()-&gt;~Concept();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">alignas</span><span class="p">(</span><span class="n">Alignment</span><span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="p">,</span> <span class="n">Capacity</span><span class="o">&gt;</span> <span class="n">buffer_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®‰∏ÄÂØπÁºñËØëÊó∂Ê£ÄÊü•Á°Æ‰øùÊâÄÈúÄÁöÑOwningModelÈÄÇÂêàÁ±ªÂÜÖÁºìÂÜ≤Âå∫Âπ∂Á¨¶ÂêàÂØπÈΩêË¶ÅÊ±Ç‰πãÂêéÔºåÈÄöËøástd::construct_at()Âú®Á±ªÂÜÖÁºìÂÜ≤Âå∫‰∏≠ÂÆû‰æãÂåñ‰∏Ä‰∏™OwningModel„ÄÇ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Á±ªÂûãÊì¶Èô§ÂÆûÁé∞</th>
<th>GCC 11.1</th>
<th>Clang 11.1</th>
</tr>
</thead>
<tbody>
<tr>
<td>Èù¢ÂêëÂØπË±°ÁöÑËß£ÂÜ≥ÊñπÊ°à</td>
<td>1.5205 Áßí</td>
<td>1.1480 Áßí</td>
</tr>
<tr>
<td>std::function</td>
<td>2.1782 Áßí</td>
<td>1.4884 Áßí</td>
</tr>
<tr>
<td>ÊâãÂä®ÂÆûÁé∞ÁöÑstd::function</td>
<td>1.6354 Áßí</td>
<td>1.4465 Áßí</td>
</tr>
<tr>
<td>ÁªèÂÖ∏Á≠ñÁï•</td>
<td>1.6372 Áßí</td>
<td>1.4046 Áßí</td>
</tr>
<tr>
<td>Á±ªÂûãÊì¶Èô§</td>
<td>1.5298 Áßí</td>
<td>1.1561 Áßí</td>
</tr>
<tr>
<td>Á±ªÂûãÊì¶Èô§ÔºàSBOÔºâ</td>
<td>1.3591 Áßí</td>
<td>1.0348 Áßí</td>
</tr>
</tbody>
</table></div>
<p>‚ÄúÂìáÔºåËøôÁúüÂø´„ÄÇËøôÊòØ‚Ä¶‚Ä¶ËÆ©ÊàëÁÆó‰∏Ä‰∏ã‚Ä¶‚Ä¶Â§ßÁ∫¶Âø´20%ÊØîÊúÄÂø´ÁöÑÁ≠ñÁï•ÂÆûÁé∞ÔºåÁîöËá≥ÊØîÈù¢ÂêëÂØπË±°ÁöÑËß£ÂÜ≥ÊñπÊ°àÊõ¥Âø´„ÄÇ‚Äù ÁöÑÁ°ÆÂ¶ÇÊ≠§„ÄÇÈùûÂ∏∏‰ª§‰∫∫Âç∞Ë±°Ê∑±ÂàªÔºåÂØπÂêßÔºüÂ∞ΩÁÆ°Â¶ÇÊ≠§Ôºå‰Ω†Â∫îËØ•ËÆ∞‰ΩèËøô‰∫õÊòØÊàëÁ≥ªÁªü‰∏äÁöÑÊï∞Â≠ó„ÄÇ‰Ω†ÁöÑÊï∞Â≠ó‰ºöÊúâÊâÄ‰∏çÂêåÔºåÂá†‰πéËÇØÂÆö„ÄÇ‰ΩÜÂç≥‰Ωø‰Ω†ÁöÑÊï∞Â≠ó‰∏ç‰∏ÄÊ†∑ÔºåÊÄª‰ΩìÁªìËÆ∫ÊòØÈÄöËøáÂ§ÑÁêÜÂÜÖÂ≠òÂàÜÈÖçÊúâÂæàÂ§ö‰ºòÂåñÊÄßËÉΩÁöÑÊΩúÂäõ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ∞ΩÁÆ°ÊÄßËÉΩÂá∫Ëâ≤ÔºåÊàë‰ª¨Â§±Âéª‰∫ÜÂæàÂ§öÁÅµÊ¥ªÊÄßÔºöÂè™ËÉΩÂ≠òÂÇ®Â∞è‰∫éÊàñÁ≠â‰∫éÊåáÂÆöCapacityÁöÑOwningModelÂÆû‰æã„ÄÇÊõ¥Â§ßÁöÑÊ®°ÂûãË¢´ÊéíÈô§Âú®Â§ñ„ÄÇËøôËÆ©ÊàëÂõûÂà∞ÂèØ‰ª•Âú®Á±ªÂÜÖÂíåÂä®ÊÄÅÂÜÖÂ≠ò‰πãÈó¥ÂàáÊç¢ÁöÑÊÉ≥Ê≥ïÔºåÂÖ∑‰ΩìÂèñÂÜ≥‰∫éÁªôÂÆöÂΩ¢Áä∂ÁöÑÂ§ßÂ∞èÔºöÂ∞èÂΩ¢Áä∂Â≠òÂÇ®Âú®Á±ªÂÜÖÁºìÂÜ≤Âå∫‰∏≠ÔºåËÄåÂ§ßÂΩ¢Áä∂ÂàôÂä®ÊÄÅÂàÜÈÖç„ÄÇ‰Ω†Áé∞Âú®ÂèØ‰ª•ÁªßÁª≠Êõ¥Êñ∞ShapeÁöÑÂÆûÁé∞‰ª•‰ΩøÁî®Ëøô‰∏§ÁßçÁ±ªÂûãÁöÑÂÜÖÂ≠ò„ÄÇÁÑ∂ËÄåÔºåÂú®Ëøô‰∏ÄÁÇπ‰∏äÔºåÊúÄÂ•ΩÂÜçÊ¨°Âº∫Ë∞ÉÊàë‰ª¨ÊúÄÈáçË¶ÅÁöÑËÆæËÆ°ÂéüÂàô‰πã‰∏ÄÔºöÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ª„ÄÇ‰∏éÂÖ∂Â∞ÜÊâÄÊúâÈÄªËæëÂíåÂäüËÉΩÊå§ËøõShapeÁ±ª‰∏≠Ôºå‰∏çÂ¶ÇÊõ¥ÂÆπÊòì‰∏îÊõ¥ÁÅµÊ¥ªÂú∞ÂàÜÁ¶ªÂÆûÁé∞ÁªÜËäÇÔºåÂπ∂‰ΩøÁî®Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂÆûÁé∞ShapeÔºàÂèÇËßÅ‚ÄúÊåáÂçó19Ôºö‰ΩøÁî®Á≠ñÁï•ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÊâßË°åÊñπÂºè‚ÄùÔºâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">StoragePolicy</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ShapeÁ±ªÊ®°ÊùøË¢´ÈáçÂÜô‰ª•Êé•Âèó‰∏Ä‰∏™StoragePolicy„ÄÇÈÄöËøáËøô‰∏™Á≠ñÁï•Ôºå‰Ω†ÂèØ‰ª•‰ªéÂ§ñÈÉ®ÊåáÂÆöÁ±ªÂ∫îËØ•Â¶Ç‰ΩïËé∑ÂèñÂÜÖÂ≠ò„ÄÇÂΩìÁÑ∂ÔºåËøôÊ†∑‰Ω†‰πüËÉΩÂÆåÁæéÂú∞ÈÅµÂæ™Âçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÂíåÂºÄÈó≠ÂéüÂàôÔºàOCPÔºâ„ÄÇÂÖ∂‰∏≠‰∏Ä‰∏™ËøôÊ†∑ÁöÑÂ≠òÂÇ®Á≠ñÁï•ÂèØ‰ª•ÊòØDynamicStorageÁ≠ñÁï•Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DynamicStorage</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">T</span><span class="o">*</span> <span class="n">create</span><span class="p">(</span><span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">new</span> <span class="nf">T</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)...);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">destroy</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">ptr</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">delete</span> <span class="n">ptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>È°æÂêçÊÄù‰πâÔºåDynamicStorage‰ºöÈÄöËøánewÁ≠âÊñπÊ≥ïÂä®ÊÄÅËé∑ÂèñÂÜÖÂ≠ò„ÄÇÂ¶ÇÊûú‰Ω†ÊúâÊõ¥Âº∫ÁöÑË¶ÅÊ±ÇÔºåÂèØ‰ª•Âü∫‰∫é<code>std::aligned_alloc()</code>ÊàñÂÖ∂‰ªñÁ±ª‰ººÂäüËÉΩÊù•Êèê‰æõÂÖ∑ÊúâÊåáÂÆöÂØπÈΩêÊñπÂºèÁöÑÂä®ÊÄÅÂÜÖÂ≠ò„ÄÇ</p>
<p>Á±ª‰ºº‰∫éDynamicStorageÔºå‰Ω†ËøòÂèØ‰ª•Êèê‰æõ‰∏Ä‰∏™InClassStorageÁ≠ñÁï•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstddef&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="n">size_t</span> <span class="n">Capacity</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">Alignment</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">InClassStorage</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">T</span><span class="o">*</span> <span class="n">create</span><span class="p">(</span><span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static_assert</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">Capacity</span><span class="p">,</span> <span class="s">&#34;The given type is too large&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">static_assert</span><span class="p">(</span><span class="k">alignof</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">Alignment</span><span class="p">,</span> <span class="s">&#34;The given type is misaligned&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">T</span><span class="o">*</span> <span class="n">memory</span> <span class="o">=</span> <span class="k">const_cast</span><span class="o">&lt;</span><span class="n">T</span><span class="o">*&gt;</span><span class="p">(</span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">T</span> <span class="k">const</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">buffer_</span><span class="p">.</span><span class="n">data</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">construct_at</span><span class="p">(</span><span class="n">memory</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)...);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// ÊàñËÄÖÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// void* const memory = static_cast&lt;void*&gt;(buffer_.data());
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// return ::new (memory) T(std::forward&lt;Args&gt;(args)...);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">destroy</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">ptr</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">destroy_at</span><span class="p">(</span><span class="n">ptr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÊàñËÄÖÔºöptr-&gt;~T();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">alignas</span><span class="p">(</span><span class="n">Alignment</span><span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="p">,</span> <span class="n">Capacity</span><span class="o">&gt;</span> <span class="n">buffer_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâÄÊúâËøô‰∫õÁ≠ñÁï•Á±ªÈÉΩÊèê‰æõÁõ∏ÂêåÁöÑÊé•Âè£Ôºö‰∏Ä‰∏™Áî®‰∫éÂÆû‰æãÂåñÁ±ªÂûãTÂØπË±°ÁöÑcreate()ÂáΩÊï∞Âíå‰∏Ä‰∏™Áî®‰∫éÊ∏ÖÁêÜÊâÄÈúÄÊìç‰ΩúÁöÑdestroy()ÂáΩÊï∞„ÄÇËøô‰∏™Êé•Âè£Áî±ShapeÁ±ªÁî®Êù•Ëß¶ÂèëÊûÑÈÄ†ÂíåÊûêÊûÑÔºå‰æãÂ¶ÇÂú®ÂÖ∂Ê®°ÊùøÊûÑÈÄ†ÂáΩÊï∞ÂíåÊûêÊûÑÂáΩÊï∞‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">StoragePolicy</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="p">(</span><span class="n">ShapeT</span> <span class="n">shape</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">using</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">OwningModel</span><span class="o">&lt;</span><span class="n">ShapeT</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">pimpl_</span> <span class="o">=</span> <span class="n">policy_</span><span class="p">.</span><span class="k">template</span> <span class="n">create</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">shape</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="p">{</span> <span class="n">policy_</span><span class="p">.</span><span class="n">destroy</span><span class="p">(</span><span class="n">pimpl_</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂÖ∂‰ªñÊàêÂëòÂáΩÊï∞ÔºåÁâπÂà´ÊòØÁâπÊÆäÊàêÂëòÂáΩÊï∞Êú™ÊòæÁ§∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="na">[[no_unique_address]]</span> <span class="n">StoragePolicy</span> <span class="n">policy_</span><span class="p">{};</span>
</span></span><span class="line"><span class="cl">    <span class="n">Concept</span><span class="o">*</span> <span class="n">pimpl_</span><span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúÄÂêé‰∏Ä‰∏™‰∏çÂ∫îÂøΩËßÜÁöÑÁªÜËäÇÊòØÊï∞ÊçÆÊàêÂëòÔºöShapeÁ±ªÁé∞Âú®Â≠òÂÇ®‰∫Ü‰∏Ä‰∏™ÁªôÂÆöStoragePolicyÁöÑÂÆû‰æãÔºåÂπ∂‰∏îÔºå‰∏çË¶ÅÊÉäÊÖåÔºåËøòÊúâ‰∏Ä‰∏™ÊåáÂêëÂÖ∂ConceptÁöÑÂéüÂßãÊåáÈíà„ÄÇÁ°ÆÂÆûÔºåÊ≤°ÊúâÂøÖË¶ÅÂÜçÂ≠òÂÇ®<code>std::unique_ptr</code>ÔºåÂõ†‰∏∫Êàë‰ª¨ÊâãÂä®Âú®Ëá™Â∑±ÁöÑÊûêÊûÑÂáΩÊï∞‰∏≠ÈîÄÊØÅÂØπË±°„ÄÇ‰Ω†ÂèØËÉΩËøò‰ºöÊ≥®ÊÑèÂà∞storage policy‰∏äÁöÑ[[no_unique_address]]Â±ûÊÄß„ÄÇËøô‰∏™C++20ÁâπÊÄßÁªô‰Ω†Êú∫‰ºöËäÇÁúÅÂ≠òÂÇ®Á≠ñÁï•ÁöÑÂÜÖÂ≠ò„ÄÇÂ¶ÇÊûúÁ≠ñÁï•‰∏∫Á©∫ÔºåÁºñËØëÂô®Áé∞Âú®ÂÖÅËÆ∏‰∏ç‰∏∫ËØ•Êï∞ÊçÆÊàêÂëò‰øùÁïô‰ªª‰ΩïÂÜÖÂ≠ò„ÄÇÂ¶ÇÊûúÊ≤°ÊúâËøô‰∏™Â±ûÊÄßÔºåÂàôÈúÄË¶ÅËá≥Â∞ë‰∏∫policy_‰øùÁïô‰∏Ä‰∏™Â≠óËäÇÔºå‰ΩÜÁî±‰∫éÂØπÈΩêÈôêÂà∂ÔºåÂèØËÉΩ‰ºöÊõ¥Â§öÂ≠óËäÇ„ÄÇ</p>
<p>ÊÄªÁöÑÊù•ËØ¥ÔºåSBOÔºàÂ∞èÁºìÂÜ≤Âå∫‰ºòÂåñÔºâÊòØ‰∏ÄÁßçÊúâÊïà‰∏îÊúÄÊúâË∂£ÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞‰ºòÂåñ‰πã‰∏Ä„ÄÇÂõ†Ê≠§ÔºåËÆ∏Â§öÊ†áÂáÜÁ±ªÂûãÔºåÂ¶Ç<code>std::function</code>Âíå<code>std::any</code>Ôºå‰ΩøÁî®ÊüêÁßçÂΩ¢ÂºèÁöÑSBO„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåC++Ê†áÂáÜÂ∫ìËßÑËåÉÂπ∂‰∏çË¶ÅÊ±Ç‰ΩøÁî®SBO„ÄÇÂõ†Ê≠§Ôºå‰Ω†Âè™ËÉΩÂ∏åÊúõSBOË¢´‰ΩøÁî®Ôºõ‰∏çËÉΩ‰æùËµñÂÆÉ„ÄÇÁÑ∂ËÄåÔºåÁî±‰∫éÊÄßËÉΩÂ¶ÇÊ≠§ÈáçË¶ÅÔºåSBOÊâÆÊºî‰∫ÜÂ¶ÇÊ≠§ÂÖ≥ÈîÆÁöÑËßíËâ≤ÔºåÂ∑≤ÁªèÊúâ‰∏Ä‰∫õÊèêÊ°àÂª∫ËÆÆÊ†áÂáÜÂåñinplace_functionÂíåinplace_anyÁ±ªÂûã„ÄÇÊó∂Èó¥‰ºöÂëäËØâÊàë‰ª¨Ëøô‰∫õÊòØÂê¶‰ºöË¢´Á∫≥ÂÖ•Ê†áÂáÜÂ∫ì„ÄÇ</p>
<p><strong>ÊâãÂä®ÂÆûÁé∞ÂáΩÊï∞Ë∞ÉÂ∫¶</strong>
‚ÄúÂìáÔºåËøôÂ∞ÜË¢´ËØÅÊòéÊòØÊúâÁî®ÁöÑ„ÄÇÊàëËøòËÉΩÂÅö‰∫õ‰ªÄ‰πàÊù•ÊèêÈ´òÊàëÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞ÁöÑÊÄßËÉΩÂêóÔºü‚Äù‰Ω†ÈóÆÈÅì„ÄÇÂì¶ÔºåÊòØÁöÑÔºå‰Ω†ÂèØ‰ª•ÂÅöÊõ¥Â§ö„ÄÇËøôÈáåÊúâÁ¨¨‰∫å‰∏™ÊΩúÂú®ÁöÑÊÄßËÉΩ‰ºòÂåñÁÇπ„ÄÇËøôÊ¨°Êàë‰ª¨Â∞ùËØïÊèêÈ´òËôöÊãüÂáΩÊï∞ÁöÑÊÄßËÉΩ„ÄÇÊòØÁöÑÔºåÊàëÊåáÁöÑÊòØÁî±Â§ñÈÉ®ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÔºàÂç≥Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÔºâÂºïÂÖ•ÁöÑËôöÊãüÂáΩÊï∞„ÄÇ</p>
<p>‚ÄúÊàë‰ª¨Â∫îËØ•Â¶Ç‰Ωï‰ºòÂåñËôöÊãüÂáΩÊï∞ÁöÑÊÄßËÉΩÔºüËøô‰∏çÊòØÂÆåÂÖ®ÂèñÂÜ≥‰∫éÁºñËØëÂô®ÁöÑ‰∫ãÊÉÖÂêóÔºü‚ÄùÁ°ÆÂÆûÔºå‰Ω†ÊòØÂØπÁöÑ„ÄÇÁÑ∂ËÄåÔºåÊàë‰∏çÊòØÂú®Ë∞àËÆ∫Ë∞ÉÊï¥ÂêéÁ´Ø„ÄÅÁâπÂÆö‰∫éÁºñËØëÂô®ÁöÑÂÆûÁé∞ÁªÜËäÇÔºåËÄåÊòØËÆ®ËÆ∫Áî®Êõ¥È´òÊïàÁöÑ‰∏úË•øÊõøÊç¢ËôöÊãüÂáΩÊï∞„ÄÇËÄåËøôÁ°ÆÂÆûÊòØÂèØËÉΩÁöÑ„ÄÇ</p>
<p>ËÆ∞‰ΩèÔºåËôöÊãüÂáΩÊï∞Âè™‰∏çËøáÊòØ‰∏Ä‰∏™Â≠òÂÇ®Âú®ËôöÊãüÂáΩÊï∞Ë°®‰∏≠ÁöÑÂáΩÊï∞ÊåáÈíà„ÄÇÊØè‰∏™Ëá≥Â∞ëÊúâ‰∏Ä‰∏™ËôöÊãüÂáΩÊï∞ÁöÑÁ±ªÂûãÈÉΩÊúâËøôÊ†∑‰∏Ä‰∏™ËôöÊãüÂáΩÊï∞Ë°®„ÄÇÁÑ∂ËÄåÔºåÊØèÁßçÁ±ªÂûãÂè™Êúâ‰∏Ä‰∏™ËôöÊãüÂáΩÊï∞Ë°®„ÄÇÊç¢Âè•ËØùËØ¥ÔºåËøô‰∏™Ë°®Âπ∂‰∏çÂ≠òÂÇ®Âú®ÊØè‰∏™ÂÆû‰æã‰∏≠„ÄÇÂõ†Ê≠§Ôºå‰∏∫‰∫ÜÂ∞ÜËôöÊãüÂáΩÊï∞Ë°®‰∏éËØ•Á±ªÂûãÁöÑÊØè‰∏™ÂÆû‰æãËøûÊé•Ëµ∑Êù•ÔºåÁ±ª‰ºöÂ≠òÂÇ®‰∏Ä‰∏™È¢ùÂ§ñÁöÑÈöêËóèÊï∞ÊçÆÊàêÂëòÔºåÊàë‰ª¨ÈÄöÂ∏∏Áß∞‰πã‰∏∫vptrÔºåÂÆÉÊòØÊåáÂêëËôöÊãüÂáΩÊï∞Ë°®ÁöÑÂéüÂßãÊåáÈíà„ÄÇ</p>
<p>ÂΩì‰Ω†Ë∞ÉÁî®‰∏Ä‰∏™ËôöÊãüÂáΩÊï∞Êó∂ÔºåÈ¶ñÂÖàÈÄöËøávptrËé∑ÂèñËôöÊãüÂáΩÊï∞Ë°®„ÄÇ‰∏ÄÊó¶Âà∞ËææÈÇ£ÈáåÔºå‰Ω†ÂèØ‰ª•‰ªéËôöÊãüÂáΩÊï∞Ë°®‰∏≠ÊäìÂèñÁõ∏Â∫îÁöÑÂáΩÊï∞ÊåáÈíàÂπ∂Ë∞ÉÁî®ÂÆÉ„ÄÇÂõ†Ê≠§ÔºåÊÄªÂÖ±Êù•ËØ¥Ôºå‰∏ÄÊ¨°ËôöÊãüÂáΩÊï∞Ë∞ÉÁî®Ê∂âÂèä‰∏§Ê¨°Èó¥Êé•ÂØªÂùÄÔºövptrÂíåÊåáÂêëÂÆûÈôÖÂáΩÊï∞ÁöÑÊåáÈíà„ÄÇÂõ†Ê≠§ÔºåÁ≤óÁï•Âú∞ËØ¥ÔºåËôöÊãüÂáΩÊï∞Ë∞ÉÁî®ÁöÑÊàêÊú¨Â§ßÁ∫¶ÊòØÈùûÂÜÖËÅîÊôÆÈÄöÂáΩÊï∞Ë∞ÉÁî®ÁöÑ‰∏§ÂÄç„ÄÇ</p>
<p>Ëøô‰∏§‰∏™Èó¥Êé•ÂØªÂùÄ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰ºòÂåñÁöÑÊú∫‰ºöÔºöÂÆûÈôÖ‰∏äÊàë‰ª¨ÂèØ‰ª•Â∞ÜÈó¥Êé•ÂØªÂùÄÁöÑÊï∞ÈáèÂáèÂ∞ëÂà∞‰ªÖ‰∏ÄÊ¨°„ÄÇ‰∏∫‰∫ÜÂÆûÁé∞Ëøô‰∏ÄÁÇπÔºåÊàë‰ª¨Â∞ÜÈááÁî®‰∏ÄÁßçÁªèÂ∏∏ÊúâÊïàÁöÑ‰ºòÂåñÁ≠ñÁï•ÔºöÁî®Á©∫Èó¥Êç¢ÂèñÈÄüÂ∫¶„ÄÇÊàë‰ª¨Â∞ÜÈÄöËøáÂú®ShapeÁ±ª‰∏≠Â≠òÂÇ®ËôöÊãüÂáΩÊï∞ÊåáÈíàÊù•ÊâãÂä®ÂÆûÁé∞ËôöÊãüË∞ÉÂ∫¶„ÄÇ‰ª•‰∏ã‰ª£Á†ÅÁâáÊÆµÂ∑≤Áªè‰∏∫‰Ω†Êèê‰æõ‰∫ÜÁõ∏ÂΩìËØ¶ÁªÜÁöÑÊÄùË∑ØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstddef&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">OwningModel</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">OwningModel</span><span class="p">(</span><span class="n">ShapeT</span> <span class="n">value</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">:</span> <span class="n">shape_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">,</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">ShapeT</span> <span class="n">shape_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">DrawStrategy</span> <span class="n">drawer_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">DestroyOperation</span> <span class="o">=</span> <span class="kt">void</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">DrawOperation</span> <span class="o">=</span> <span class="kt">void</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">CloneOperation</span> <span class="o">=</span> <span class="kt">void</span><span class="o">*</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">,</span> <span class="n">DestroyOperation</span><span class="o">*&gt;</span> <span class="n">pimpl_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">DrawOperation</span><span class="o">*</span> <span class="n">draw_</span><span class="p">{</span> <span class="k">nullptr</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="n">CloneOperation</span><span class="o">*</span> <span class="n">clone_</span><span class="p">{</span> <span class="k">nullptr</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫éÊàë‰ª¨ÊõøÊç¢‰∫ÜÊâÄÊúâËôöÊãüÂáΩÊï∞ÔºåÁîöËá≥ÂåÖÊã¨ËôöÊãüÊûêÊûÑÂáΩÊï∞ÔºåÂõ†Ê≠§‰∏çÂÜçÈúÄË¶ÅÊ¶ÇÂøµÂü∫Á±ª„ÄÇÂõ†Ê≠§ÔºåÂ§ñÈÉ®Â±ÇÊ¨°ÁªìÊûÑÁÆÄÂåñ‰∏∫‰ªÖÂåÖÂê´OwningModelÁ±ªÊ®°ÊùøÔºåÂÆÉ‰ªçÁÑ∂‰Ωú‰∏∫ÁâπÂÆöÂΩ¢Áä∂ÔºàShapeTÔºâÂíåDrawStrategyÁöÑÂ≠òÂÇ®„ÄÇÂ∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÂÆÉ‰πüÈÅáÂà∞‰∫ÜÂêåÊ†∑ÁöÑÂëΩËøêÔºöÊâÄÊúâÁöÑËôöÊãüÂáΩÊï∞ÈÉΩË¢´ÁßªÈô§‰∫Ü„ÄÇÂîØ‰∏ÄÂâ©‰∏ãÁöÑÁªÜËäÇÊòØÊûÑÈÄ†ÂáΩÊï∞ÂíåÊï∞ÊçÆÊàêÂëò„ÄÇ</p>
<p>ËôöÊãüÂáΩÊï∞Ë¢´ÊâãÂä®ÂáΩÊï∞ÊåáÈíàÊâÄÊõø‰ª£„ÄÇÁî±‰∫éÂáΩÊï∞ÊåáÈíàÁöÑËØ≠Ê≥ï‰∏çÂ§™ÂèãÂ•ΩÔºåÊàë‰ª¨Ê∑ªÂä†‰∫Ü‰∏Ä‰∫õÊñπ‰æø‰ΩøÁî®ÁöÑÂáΩÊï∞Á±ªÂûãÂà´ÂêçÔºöDestroyOperation‰ª£Ë°®‰ª•ÂâçÁöÑËôöÊãüÊûêÊûÑÂáΩÊï∞ÔºåDrawOperation‰ª£Ë°®‰ª•ÂâçÁöÑËôöÊãüdraw()ÂáΩÊï∞ÔºåCloneOperation‰ª£Ë°®‰ª•ÂâçÁöÑËôöÊãüclone()ÂáΩÊï∞„ÄÇDestroyOperationÁî®‰∫éÈÖçÁΩÆ pimpl_ Êï∞ÊçÆÊàêÂëòÁöÑÂà†Èô§Âô®ÔºàÂπ∂‰∏îÔºåÂÆÉÂÖÖÂΩì‰∫Ü‰∏ÄÁßçÁ≠ñÁï•Ôºâ„ÄÇÂè¶Â§ñ‰∏§‰∏™ÔºåDrawOperationÂíåCloneOperationÔºåÁî®‰∫é‰∏§‰∏™È¢ùÂ§ñÁöÑÂáΩÊï∞ÊåáÈíàÊï∞ÊçÆÊàêÂëò draw_ Âíå clone_ „ÄÇ</p>
<p><em><em>‚ÄúÂì¶‰∏çÔºåvoid</em>ÔºÅËøô‰∏çÊòØ‰∏ÄÁßçÂè§ËÄÅ‰∏îË∂ÖÁ∫ßÂç±Èô©ÁöÑÂÅöÊ≥ïÂêóÔºü‚Äù‰Ω†ÊÉäÂëº„ÄÇ</em>*</p>
<p>Â•ΩÁöÑÔºåÊàëÊâøËÆ§Ê≤°ÊúâËß£ÈáäÁöÑËØùÁúãËµ∑Êù•Á°ÆÂÆûÈùûÂ∏∏ÂèØÁñë„ÄÇÁÑ∂ËÄåÔºåËØ∑Ë∑üÈöèÊàëÁöÑÊÄùË∑ØÔºåÊàë‰øùËØÅ‰∏ÄÂàáÈÉΩ‰ºöÂÆåÁæé‰∏îÁ±ªÂûãÂÆâÂÖ®„ÄÇÁé∞Âú®‰ΩøËøô‰∏ÄÂàáÂ∑•‰ΩúÁöÑÂÖ≥ÈîÆÂú®‰∫éËøô‰∫õÂáΩÊï∞ÊåáÈíàÁöÑÂàùÂßãÂåñ„ÄÇÂÆÉ‰ª¨Âú®ShapeÁ±ªÁöÑÊ®°ÊùøÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ë¢´ÂàùÂßãÂåñÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="p">(</span><span class="n">ShapeT</span> <span class="n">shape</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="n">drawer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">pimpl_</span><span class="p">(</span><span class="k">new</span> <span class="n">OwningModel</span><span class="o">&lt;</span><span class="n">ShapeT</span><span class="p">,</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">shape</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">drawer</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">                 <span class="p">[](</span><span class="kt">void</span><span class="o">*</span> <span class="n">shapeBytes</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                     <span class="k">using</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">OwningModel</span><span class="o">&lt;</span><span class="n">ShapeT</span><span class="p">,</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                     <span class="k">auto</span><span class="o">*</span> <span class="k">const</span> <span class="n">model</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">shapeBytes</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                     <span class="k">delete</span> <span class="n">model</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                 <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">draw_</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">[](</span><span class="kt">void</span><span class="o">*</span> <span class="n">shapeBytes</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">using</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">OwningModel</span><span class="o">&lt;</span><span class="n">ShapeT</span><span class="p">,</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">auto</span><span class="o">*</span> <span class="k">const</span> <span class="n">model</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">shapeBytes</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">(</span><span class="o">*</span><span class="n">model</span><span class="o">-&gt;</span><span class="n">drawer_</span><span class="p">)(</span><span class="n">model</span><span class="o">-&gt;</span><span class="n">shape_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">clone_</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">[](</span><span class="kt">void</span><span class="o">*</span> <span class="n">shapeBytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">void</span><span class="o">*</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">using</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">OwningModel</span><span class="o">&lt;</span><span class="n">ShapeT</span><span class="p">,</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">auto</span><span class="o">*</span> <span class="k">const</span> <span class="n">model</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">shapeBytes</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="k">new</span> <span class="nf">Model</span><span class="p">(</span><span class="o">*</span><span class="n">model</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËÆ©Êàë‰ª¨ÂÖ≥Ê≥®<code>pimpl_</code>Êï∞ÊçÆÊàêÂëò„ÄÇÂÆÉÈÄöËøáÊåáÂêëÊñ∞ÂÆû‰æãÂåñÁöÑOwningModelÁöÑÊåáÈíàÂíå‰∏Ä‰∏™Êó†Áä∂ÊÄÅlambdaË°®ËææÂºèËøõË°åÂàùÂßãÂåñ„ÄÇ‰Ω†ÂèØËÉΩËÆ∞ÂæóÊó†Áä∂ÊÄÅlambdaÈöêÂºèÂèØËΩ¨Êç¢‰∏∫ÂáΩÊï∞ÊåáÈíà„ÄÇÊàë‰ª¨Âà©Áî®Ëøô‰∏™ËØ≠Ë®ÄÁâπÊÄßÂ∞ÜlambdaÁõ¥Êé•‰º†ÈÄíÁªô<code>unique_ptr</code>ÊûÑÈÄ†ÂáΩÊï∞ÁöÑdeleterÂèÇÊï∞ÔºåÂº∫Âà∂ÁºñËØëÂô®Â∫îÁî®ÈöêÂºèËΩ¨Êç¢‰∏∫<code>DestroyOperation*</code>Ôºå‰ªéËÄåÂ∞ÜlambdaÂáΩÊï∞ÁªëÂÆöÂà∞<code>std::unique_ptr</code>„ÄÇ</p>
<p>‚ÄúÂ•ΩÁöÑÔºåÊàëÊòéÁôΩ‰∫ÜÔºölambdaÂèØ‰ª•Áî®Êù•ÂàùÂßãÂåñÂáΩÊï∞ÊåáÈíà„ÄÇ‰ΩÜËøôÂà∞Â∫ïÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÔºüÂÆÉÂÅö‰∫Ü‰ªÄ‰πàÔºü‚ÄùÂêåÊ†∑Ë¶ÅËÆ∞‰ΩèÁöÑÊòØÔºåÊàë‰ª¨Âú®Ê®°ÊùøÊûÑÈÄ†ÂáΩÊï∞ÂÜÖÈÉ®ÂàõÂª∫‰∫ÜËøô‰∏™lambda„ÄÇËøôÊÑèÂë≥ÁùÄÂú®Ê≠§Êó∂Êàë‰ª¨Áü•ÈÅì‰º†ÈÄíÁöÑShapeTÂíåDrawStrategyÁöÑÂÆûÈôÖÁ±ªÂûã„ÄÇÂõ†Ê≠§ÔºåÁîüÊàêÁöÑlambdaÂÖ∑ÊúâÂÖ≥‰∫éÂÆû‰æãÂåñÂπ∂Â≠òÂÇ®Âú®<code>pimpl_</code>‰∏≠ÁöÑOwningModelÁ±ªÂûãÁöÑÂÖ®ÈÉ®Áü•ËØÜ„ÄÇÊúÄÁªàÔºåÂÆÉ‰ºöË¢´Ë∞ÉÁî®Êó∂Êé•Êî∂‰∏Ä‰∏™<code>void*</code>ÔºåÂç≥Êüê‰∏™OwningModelÁöÑÂú∞ÂùÄ„ÄÇ‰ΩÜÊòØÔºåÂü∫‰∫éÂÖ∂ÂØπOwningModelÂÆûÈôÖÁ±ªÂûãÁöÑ‰∫ÜËß£ÔºåÂÆÉÂèØ‰ª•È¶ñÂÖàÊâßË°å‰ªé<code>void*</code>Âà∞<code>OwningModel&lt;ShapeT, DrawStrategy&gt;*</code>ÁöÑ<code>static_cast</code>„ÄÇËôΩÁÑ∂Âú®Â§ßÂ§öÊï∞ÂÖ∂‰ªñ‰∏ä‰∏ãÊñá‰∏≠ËøôÁßçËΩ¨Êç¢‰ºöÊòæÂæóÂèØÁñë‰∏îÂèØËÉΩÊòØÁåúÊµãÔºå‰ΩÜÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÂÆÉÊòØÂÆåÂÖ®Á±ªÂûãÂÆâÂÖ®ÁöÑÔºöÊàë‰ª¨ÂèØ‰ª•Á°ÆÂÆöOwningModelÁöÑÊ≠£Á°ÆÁ±ªÂûã„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ÂæóÂà∞ÁöÑÊåáÈíàËß¶ÂèëÊ≠£Á°ÆÁöÑÊ∏ÖÁêÜË°å‰∏∫„ÄÇ</p>
<p><code>draw_</code>Âíå<code>clone_</code>Êï∞ÊçÆÊàêÂëòÁöÑÂàùÂßãÂåñÈùûÂ∏∏Áõ∏‰ºº„ÄÇÂîØ‰∏ÄÁöÑÂå∫Âà´ÊòØlambdaÊâßË°åÁöÑÊìç‰Ωú‰∏çÂêåÔºöÂÆÉ‰ª¨ÂàÜÂà´ÊâßË°åÁªòÂà∂ÂΩ¢Áä∂ÂíåÂàõÂª∫Ê®°ÂûãÂâØÊú¨ÁöÑÊ≠£Á°ÆÊìç‰Ωú„ÄÇ</p>
<p>ÊàëÁü•ÈÅìËøôÂèØËÉΩÈúÄË¶Å‰∏Ä‰∫õÊó∂Èó¥Êù•Ê∂àÂåñ„ÄÇ‰ΩÜÊàë‰ª¨Âá†‰πéÂÆåÊàê‰∫ÜÔºõÂîØ‰∏ÄÁº∫Â∞ëÁöÑÁªÜËäÇÊòØÁâπÊÆäÊàêÂëòÂáΩÊï∞„ÄÇÂØπ‰∫éÊûêÊûÑÂáΩÊï∞Âíå‰∏§‰∏™ÁßªÂä®Êìç‰ΩúÔºåÊàë‰ª¨ÂèØ‰ª•ÂÜçÊ¨°ËØ∑Ê±ÇÁºñËØëÂô®ÁîüÊàêÈªòËÆ§ÂÆûÁé∞„ÄÇÁÑ∂ËÄåÔºåÊàë‰ª¨ÂøÖÈ°ªËá™Â∑±Â§ÑÁêÜÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÂíåÊã∑Ë¥ùËµãÂÄºËøêÁÆóÁ¨¶Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="p">(</span><span class="k">const</span> <span class="n">Shape</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">pimpl_</span><span class="p">(</span><span class="n">clone_</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">pimpl_</span><span class="p">.</span><span class="n">get</span><span class="p">()),</span> <span class="n">other</span><span class="p">.</span><span class="n">pimpl_</span><span class="p">.</span><span class="n">get_deleter</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">draw_</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">draw_</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">clone_</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">clone_</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Shape</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Copy-and-Swap Idiom
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Shape</span> <span class="nf">copy</span><span class="p">(</span><span class="n">other</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">swap</span><span class="p">(</span><span class="n">pimpl_</span><span class="p">,</span> <span class="n">copy</span><span class="p">.</span><span class="n">pimpl_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">swap</span><span class="p">(</span><span class="n">draw_</span><span class="p">,</span> <span class="n">copy</span><span class="p">.</span><span class="n">draw_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">swap</span><span class="p">(</span><span class="n">clone_</span><span class="p">,</span> <span class="n">copy</span><span class="p">.</span><span class="n">clone_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="p">(</span><span class="n">Shape</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Shape</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÂ∞±ÊòØÊàë‰ª¨ÈúÄË¶ÅÂÅöÁöÑÊâÄÊúâÂ∑•‰ΩúÔºåÁé∞Âú®ÂáÜÂ§áÂ•ΩÊµãËØïËøô‰∏™ÂÆûÁé∞„ÄÇËÆ©Êàë‰ª¨ÂÜçÊ¨°Êõ¥Êñ∞‚ÄúÊåáÂçó32ÔºöËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§ÊõøÊç¢ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‚Äù‰∏≠ÁöÑÂü∫ÂáÜÊµãËØïÔºåÂπ∂‰ΩøÁî®Êàë‰ª¨ÁöÑÊâãÂä®ËôöÊãüË∞ÉÂ∫¶ÂÆûÁé∞ËøêË°åÂÆÉ„ÄÇÊàëÁîöËá≥Â∞ÜÊâãÂä®ËôöÊãüË∞ÉÂ∫¶‰∏é‰πãÂâçËÆ®ËÆ∫ÁöÑÂ∞èÁºìÂÜ≤Âå∫‰ºòÂåñÔºàSBOÔºâÁªìÂêà‰∫ÜËµ∑Êù•„ÄÇ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Á±ªÂûãÊì¶Èô§ÂÆûÁé∞</th>
<th>GCC 11.1</th>
<th>Clang 11.1</th>
</tr>
</thead>
<tbody>
<tr>
<td>Èù¢ÂêëÂØπË±°Ëß£ÂÜ≥ÊñπÊ°à</td>
<td>1.5205 s</td>
<td>1.1480 s</td>
</tr>
<tr>
<td>std::function</td>
<td>2.1782 s</td>
<td>1.4884 s</td>
</tr>
<tr>
<td>ÊâãÂä®ÂÆûÁé∞ÁöÑstd::function</td>
<td>1.6354 s</td>
<td>1.4465 s</td>
</tr>
<tr>
<td>ÁªèÂÖ∏Á≠ñÁï•</td>
<td>1.6372 s</td>
<td>1.4046 s</td>
</tr>
<tr>
<td>Á±ªÂûãÊì¶Èô§</td>
<td>1.5298 s</td>
<td>1.1561 s</td>
</tr>
<tr>
<td>Á±ªÂûãÊì¶Èô§ÔºàSBOÔºâ</td>
<td>1.3591 s</td>
<td>1.0348 s</td>
</tr>
<tr>
<td>Á±ªÂûãÊì¶Èô§ÔºàÊâãÂä®ËôöÊãüË∞ÉÂ∫¶Ôºâ</td>
<td>1.1476 s</td>
<td>1.1599 s</td>
</tr>
<tr>
<td>Á±ªÂûãÊì¶Èô§ÔºàSBO + ÊâãÂä®ËôöÊãüË∞ÉÂ∫¶Ôºâ</td>
<td>1.2538 s</td>
<td>1.2212 s</td>
</tr>
</tbody>
</table></div>
<p>ÂØπ‰∫éGCCÔºåÊâãÂä®ËôöÊãüË∞ÉÂ∫¶ÁöÑÊÄßËÉΩÊèêÂçáÊòØÈùûÂ∏∏ÊòæËëóÁöÑ„ÄÇÂú®ÊàëÁöÑÁ≥ªÁªü‰∏äÔºåËøêË°åÊó∂Èó¥Áº©Áü≠Âà∞‰∫Ü1.1476ÁßíÔºåÁõ∏ÊØîÊú™‰ºòÂåñÁöÑÂü∫Êú¨Á±ªÂûãÊì¶Èô§ÂÆûÁé∞ÊèêÈ´ò‰∫ÜÁ∫¶25%„ÄÇÁÑ∂ËÄåÔºåClangÂú®ËøôÊñπÈù¢Âπ∂Ê≤°ÊúâÊòæÁ§∫Âá∫‰ªª‰ΩïÊîπËøõ„ÄÇÂ∞ΩÁÆ°ËøôÂèØËÉΩÊúâ‰∫õ‰ª§‰∫∫Â§±ÊúõÔºå‰ΩÜËøêË°åÊó∂Èó¥‰ªçÁÑ∂ÈùûÂ∏∏Âá∫Ëâ≤„ÄÇ</p>
<p>‰∏çÂπ∏ÁöÑÊòØÔºåSBOÂíåÊâãÂä®ËôöÊãüË∞ÉÂ∫¶ÁöÑÁªÑÂêàÂπ∂Ê≤°ÊúâÂ∏¶Êù•Êõ¥Â•ΩÁöÑÊÄßËÉΩ„ÄÇËôΩÁÑ∂GCCÂú®Á∫ØSBOÊñπÊ≥ïÁöÑÂü∫Á°Ä‰∏äÊúâÂ∞èÂπÖÊîπËøõÔºàËøôÂØπ‰∫éÊ≤°ÊúâÂä®ÊÄÅÂÜÖÂ≠òÁöÑÁéØÂ¢ÉÂèØËÉΩÂæàÊúâË∂£ÔºâÔºå‰ΩÜÂú®Clang‰∏äËøôÁßçÁªÑÂêàÁöÑÊïàÊûúÂπ∂‰∏çÂ¶ÇÈ¢ÑÊúü„ÄÇ</p>
<p>ÊÄªÁªìÊù•ËØ¥ÔºåÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞ÊúâÂæàÂ§ö‰ºòÂåñÊΩúÂäõ„ÄÇÂ¶ÇÊûú‰Ω†‰πãÂâçÂØπÁ±ªÂûãÊì¶Èô§ÊåÅÊÄÄÁñëÊÄÅÂ∫¶ÔºåËøôÊ¨°ÁöÑÊÄßËÉΩÊèêÂçáÂ∫îËØ•Áªô‰Ω†Ë∂≥Â§üÁöÑÂä®ÂäõÂéªËá™Ë°åÊé¢Á¥¢„ÄÇËôΩÁÑ∂ËøôÊòØ‰ª§‰∫∫ÂÖ¥Â•ãÁöÑÔºå‰ΩÜÈáçË¶ÅÁöÑÊòØË¶ÅËÆ∞‰ΩèËøô‰∫õ‰ºòÂåñÊú∫‰ºöÊù•Ëá™‰ΩïÂ§ÑÔºöÂè™ÊúâÈÄöËøáÂàÜÁ¶ªËôöÊãüË°å‰∏∫ÁöÑÂÖ≥Ê≥®ÁÇπÂπ∂Â∞ÜË°å‰∏∫Â∞ÅË£ÖÂà∞ÂÄºÁ±ªÂûã‰∏≠ÔºåÊàë‰ª¨ÊâçËÉΩËé∑ÂæóËøô‰∫õ‰ºòÂåñÊú∫‰ºö„ÄÇÂ¶ÇÊûúÊàë‰ª¨Âè™Êúâ‰∏Ä‰∏™ÊåáÂêëÂü∫Á±ªÁöÑÊåáÈíàÔºåÂ∞±Êó†Ê≥ïÂÆûÁé∞Ëøô‰∏ÄÁÇπ„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>‰ΩøÁî®SBOÈÅøÂÖçÂ∞èÂØπË±°ÊòÇË¥µÁöÑÂ§çÂà∂Êìç‰Ωú„ÄÇ</li>
<li>ÈÄöËøáÊâãÂä®ÂÆûÁé∞ËôöÊãüË∞ÉÂ∫¶ÂáèÂ∞ëÈó¥Êé•ÂØªÂùÄÊ¨°Êï∞„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô34Ê≥®ÊÑèÊã•ÊúâÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®ÁöÑËÆæÁΩÆÊàêÊú¨">ÂáÜÂàô34ÔºöÊ≥®ÊÑèÊã•ÊúâÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®ÁöÑËÆæÁΩÆÊàêÊú¨
</h3><p>Âú®‚ÄúÂáÜÂàô32ÔºöËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§ÊõøÊç¢ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‚ÄùÂíå‚ÄúÂáÜÂàô33ÔºöÊÑèËØÜÂà∞Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ‚Äù‰∏≠ÔºåÊàëÂºïÂØº‰Ω†ÈÄöËøá‰∫ÜÂü∫Êú¨Á±ªÂûãÊì¶Èô§ÂÆûÁé∞ÁöÑÂ§çÊùÇÂÆûÁé∞ÁªÜËäÇ„ÄÇÊòØÁöÑÔºåËøôÂæàËâ∞ÈöæÔºå‰ΩÜÁªùÂØπÂÄºÂæóÂä™ÂäõÔºö‰Ω†Áé∞Âú®ÂèòÂæóÊõ¥Âº∫Â§ß„ÄÅÊõ¥ËÅ™ÊòéÔºåÂπ∂‰∏îÂ∑•ÂÖ∑ÁÆ±‰∏≠Â§ö‰∫Ü‰∏Ä‰∏™È´òÊïà‰∏îÂº∫Ëß£ËÄ¶ÁöÑËÆæËÆ°Ê®°Âºè„ÄÇÂ§™Ê£í‰∫ÜÔºÅ</p>
<p>ÁÑ∂ËÄåÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÂõûÂà∞Ëøô‰∫õÁªÜËäÇ‰∏≠„ÄÇÊàëÁü•ÈÅì‰Ω†Âú®ÁøªÁôΩÁúºÔºå‰ΩÜËøòÊúâÊõ¥Â§öÂÜÖÂÆπ„ÄÇËÄå‰∏îÊàëÂøÖÈ°ªÊâøËÆ§ÔºöÊàëÊíí‰∫Ü‰∏ÄÁÇπÂ∞èË∞é„ÄÇÂπ∂‰∏çÊòØÂëäËØâ‰Ω†ÈîôËØØÁöÑ‰ø°ÊÅØÔºåËÄåÊòØÊúâÊâÄÈÅóÊºè„ÄÇÁ±ªÂûãÊì¶Èô§ËøòÊúâ‰∏Ä‰∏™‰Ω†Â∫îËØ•Áü•ÈÅìÁöÑÁº∫ÁÇπ„ÄÇ‰∏Ä‰∏™ÂæàÂ§ßÁöÑÁº∫ÁÇπ„ÄÇ‰∏Ä‰∏™‰Ω†ÂèØËÉΩÂÆåÂÖ®‰∏çÂñúÊ¨¢ÁöÑÁº∫ÁÇπ„ÄÇÂîâ„ÄÇ</p>
<p>Êã•ÊúâÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®ÁöÑËÆæÁΩÆÊàêÊú¨
ÂÅáËÆæShapeÂÜçÊ¨°Êàê‰∏∫Âü∫Á±ªÔºåËÄåCircleÊòØËÆ∏Â§öÊ¥æÁîüÁ±ª‰πã‰∏Ä„ÄÇÈÇ£‰πàÂ∞Ü‰∏Ä‰∏™Circle‰º†ÈÄíÁªôÊúüÊúõShape const&amp;ÁöÑÂáΩÊï∞Â∞ÜÊòØÁÆÄÂçï‰∏îÂªâ‰ª∑ÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span>  <span class="c1">// ÁªèÂÖ∏Âü∫Á±ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span>  <span class="c1">// Ê¥æÁîüÁ±ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">useShape</span><span class="p">(</span><span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">shape</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Circle</span> <span class="n">circle</span><span class="p">{</span><span class="mf">3.14</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ëá™Âä®‰∏îÂªâ‰ª∑Âú∞‰ªé &#39;Circle const&amp;&#39; ËΩ¨Êç¢‰∏∫ &#39;Shape const&amp;&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">useShape</span><span class="p">(</span><span class="n">circle</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â∞ΩÁÆ°Á±ªÂûãÊì¶Èô§ShapeÊäΩË±°Áï•Êúâ‰∏çÂêåÔºà‰æãÂ¶ÇÔºåÂÆÉÊÄªÊòØÈúÄË¶Å‰∏Ä‰∏™ÁªòÂà∂Á≠ñÁï•ÔºâÔºåËøôÁßçËΩ¨Êç¢‰ªçÁÑ∂ÊòØÂèØËÉΩÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Circle</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span>  <span class="c1">// ÈùûÂ§öÊÄÅÂá†‰ΩïÂéüËØ≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span>  <span class="c1">// Á±ªÂûãÊì¶Èô§ÂåÖË£ÖÁ±ªÔºåÂ¶ÇÂâçÊâÄÁ§∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">useShape</span><span class="p">(</span><span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">draw</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Circle</span> <span class="n">circle</span><span class="p">{</span><span class="mf">3.14</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">drawStrategy</span> <span class="o">=</span> <span class="p">[](</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™‰∏¥Êó∂ÁöÑ &#39;Shape&#39; ÂØπË±°ÔºåÊ∂âÂèäÂ§çÂà∂Êìç‰ΩúÂíåÂÜÖÂ≠òÂàÜÈÖç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">useShape</span><span class="p">({</span><span class="n">circle</span><span class="p">,</span> <span class="n">drawStrategy</span><span class="p">});</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏çÂπ∏ÁöÑÊòØÔºåËøô‰∏çÂÜç‰æøÂÆú„ÄÇÁõ∏ÂèçÔºåÂü∫‰∫éÊàë‰ª¨‰πãÂâçÁöÑÂÆûÁé∞ÔºàÂåÖÊã¨Âü∫Êú¨ÂÆûÁé∞Âíå‰ºòÂåñÂÆûÁé∞ÔºâÔºåË∞ÉÁî®<code>useShape()</code>ÂáΩÊï∞‰ºöÊ∂âÂèäÂá†‰∏™ÊΩúÂú®ÊòÇË¥µÁöÑÊìç‰ΩúÔºö</p>
<ol>
<li><strong>ÂàõÂª∫‰∏¥Êó∂ShapeÂØπË±°</strong>ÔºöÁºñËØëÂô®‰ΩøÁî®ÈùûÊòæÂºèÁöÑÊ®°ÊùøÂåñShapeÊûÑÈÄ†ÂáΩÊï∞ÂàõÂª∫‰∏Ä‰∏™‰∏¥Êó∂Shape„ÄÇ</li>
<li><strong>ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®</strong>ÔºöÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®‰ºöÂØºËá¥ÁªôÂÆöÂΩ¢Áä∂ÁöÑÂ§çÂà∂Êìç‰ΩúÔºàÂØπ‰∫éCircleÊù•ËØ¥‰∏çË¥µÔºå‰ΩÜÂØπ‰∫éÂÖ∂‰ªñÂΩ¢Áä∂ÂèØËÉΩÂæàÊòÇË¥µÔºâ‰ª•ÂèäÁªôÂÆöÁªòÂà∂Á≠ñÁï•ÁöÑÂ§çÂà∂Êìç‰ΩúÔºàÂ¶ÇÊûúÁ≠ñÁï•ÊòØÊó†Áä∂ÊÄÅÁöÑÔºåÂü∫Êú¨‰∏äÊòØÂÖçË¥πÁöÑÔºå‰ΩÜÂèñÂÜ≥‰∫éÂ≠òÂÇ®Âú®ÂØπË±°‰∏≠ÁöÑÂÜÖÂÆπÔºåÂèØËÉΩ‰ºöÂæàÊòÇË¥µÔºâ„ÄÇ</li>
<li><strong>ShapeÊûÑÈÄ†ÂáΩÊï∞ÂÜÖÈÉ®</strong>ÔºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂΩ¢Áä∂Ê®°ÂûãÔºåÊ∂âÂèäÂÜÖÂ≠òÂàÜÈÖçÔºàÈöêËóèÂú®ShapeÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂØπ<code>std::make_unique()</code>ÁöÑË∞ÉÁî®‰∏≠ÔºåËÇØÂÆöÊòØÊòÇË¥µÁöÑÔºâ„ÄÇ</li>
<li><strong>‰∏¥Êó∂ÔºàÂè≥ÂÄºÔºâShape</strong>ÔºöÈÄöËøáÂ∏∏ÈáèÂºïÁî®‰º†ÈÄíÁªô<code>useShape()</code>ÂáΩÊï∞„ÄÇ</li>
</ol>
<p>ÈáçË¶ÅÁöÑÊòØË¶ÅÊåáÂá∫ÔºåËøô‰∏çÊòØÊàë‰ª¨ShapeÂÆûÁé∞ÁöÑÂÖ∑‰ΩìÈóÆÈ¢ò„ÄÇÂ¶ÇÊûú‰Ω†‰ΩøÁî®<code>std::function</code>‰Ωú‰∏∫ÂáΩÊï∞ÂèÇÊï∞ÔºåÂêåÊ†∑ÁöÑÈóÆÈ¢ò‰πü‰ºöÂõ∞Êâ∞‰Ω†Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">compute</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">op</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">op</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="k">const</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">17</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="k">const</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="k">const</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">compute</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="p">[</span><span class="n">offset</span><span class="o">=</span><span class="mi">15</span><span class="p">](</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">offset</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÁªôÂÆöÁöÑlambdaË¢´ËΩ¨Êç¢‰∏∫<code>std::function</code>ÂÆû‰æã„ÄÇËøôÁßçËΩ¨Êç¢‰ºöÊ∂âÂèäÂ§çÂà∂Êìç‰ΩúÔºåÂπ∂ÂèØËÉΩÊ∂âÂèäÂÜÖÂ≠òÂàÜÈÖç„ÄÇËøôÂÆåÂÖ®ÂèñÂÜ≥‰∫éÁªôÂÆöÂèØË∞ÉÁî®ÂØπË±°ÁöÑÂ§ßÂ∞è‰ª•Âèä<code>std::function</code>ÁöÑÂÆûÁé∞„ÄÇÂõ†Ê≠§Ôºå<code>std::function</code>ÊòØ‰∏ÄÁßç‰∏çÂêå‰∫é<code>std::string_view</code>Âíå<code>std::span</code>ÁöÑÊäΩË±°Á±ªÂûã„ÄÇ<code>std::string_view</code>Âíå<code>std::span</code>ÊòØÈùûÊã•ÊúâÁöÑÊäΩË±°Á±ªÂûãÔºåÂõ†‰∏∫ÂÆÉ‰ª¨Âè™ÂåÖÂê´ÊåáÂêëÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊåáÈíàÂíåÂ§ßÂ∞èÔºåÊâÄ‰ª•ÂÆÉ‰ª¨ÁöÑÂ§çÂà∂ÊàêÊú¨Âæà‰Ωé„ÄÇÁî±‰∫éËøô‰∏§ÁßçÁ±ªÂûãÊâßË°åÊµÖÊã∑Ë¥ùÔºåÂõ†Ê≠§ÈùûÂ∏∏ÈÄÇÂêàÁî®‰ΩúÂáΩÊï∞ÂèÇÊï∞„ÄÇÂè¶‰∏ÄÊñπÈù¢Ôºå<code>std::function</code>ÊòØ‰∏Ä‰∏™Êã•ÊúâÊäΩË±°Á±ªÂûãÔºåÊâßË°åÊ∑±Êã∑Ë¥ù„ÄÇÂõ†Ê≠§ÔºåÂÆÉÂπ∂‰∏çÂÆåÁæéÈÄÇÂêà‰Ωú‰∏∫ÂáΩÊï∞ÂèÇÊï∞„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÊàë‰ª¨ÁöÑShapeÂÆûÁé∞‰πüÊòØÂ¶ÇÊ≠§„ÄÇ</p>
<p>‚ÄúÂì¶Â§©Âì™ÔºåÊàë‰∏çÂñúÊ¨¢Ëøô‰∏™„ÄÇ‰∏ÄÁÇπ‰πü‰∏çÂñúÊ¨¢„ÄÇËøôÂ§™Á≥üÁ≥ï‰∫ÜÔºÅÊàëË¶ÅÈÄÄÊ¨æÔºÅ‚Äù‰Ω†ÊÉäÂëºÈÅì„ÄÇÊàë‰∏çÂæó‰∏çÂêåÊÑèËøôÂèØËÉΩÊòØ‰ª£Á†ÅÂ∫ì‰∏≠ÁöÑ‰∏Ä‰∏™‰∏•ÈáçÈóÆÈ¢ò„ÄÇÁÑ∂ËÄåÔºå‰Ω†ÈúÄË¶ÅÁêÜËß£Â∫ïÂ±ÇÈóÆÈ¢òÊòØShapeÁ±ªÁöÑÊâÄÊúâÊùÉËØ≠‰πâÔºöÂü∫‰∫éÂÖ∂ÂÄºËØ≠‰πâËÉåÊôØÔºåÊàë‰ª¨ÂΩìÂâçÁöÑShapeÂÆûÁé∞ÊÄªÊòØ‰ºöÂàõÂª∫ÁªôÂÆöÂΩ¢Áä∂ÁöÑÂâØÊú¨Âπ∂ÂßãÁªàÊã•ÊúâËØ•ÂâØÊú¨„ÄÇËôΩÁÑ∂Ëøô‰∏é‚ÄúÊåáÂçó22Ôºö‰ºòÂÖàÈÄâÊã©ÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ‚ÄùËÆ®ËÆ∫ÁöÑÊâÄÊúâÂ•ΩÂ§ÑÂÆåÂÖ®‰∏ÄËá¥Ôºå‰ΩÜÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂÆÉÂØºËá¥‰∫ÜÁõ∏ÂΩì‰∏çÂπ∏ÁöÑÊÄßËÉΩÊçüÂ§±„ÄÇ‰∏çËøáÔºåÂà´ÊÖå‚Äî‚ÄîÊàë‰ª¨ÂèØ‰ª•‰∏∫Ê≠§Êèê‰æõ‰∏ÄÁßçËß£ÂÜ≥ÊñπÊ°àÔºöÂú®ËøôÁßç‰∏ä‰∏ãÊñá‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•Êèê‰æõ‰∏Ä‰∏™ÈùûÊã•ÊúâÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞„ÄÇ</p>
<p><strong>ÁÆÄÂçïÁöÑÈùûÊã•ÊúâÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞</strong></p>
<p>‰∏ÄËà¨Êù•ËØ¥ÔºåÂü∫‰∫éÂÄºËØ≠‰πâÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞ÊòØ‰ºòÁæé‰∏îÂÆåÂÖ®Á¨¶ÂêàÁé∞‰ª£C++Á≤æÁ•ûÁöÑ„ÄÇÁÑ∂ËÄåÔºåÊÄßËÉΩÂêåÊ†∑ÈáçË¶Å„ÄÇÊúâÊó∂ÔºåÊÄßËÉΩÁöÑÈáçË¶ÅÊÄßÂèØËÉΩËÆ©‰Ω†‰∏çÈÇ£‰πàÂÖ≥ÂøÉÂÄºËØ≠‰πâÈÉ®ÂàÜÔºåËÄåÂè™ÂÖ≥ÂøÉÁ±ªÂûãÊì¶Èô§ÊâÄÊèê‰æõÁöÑÊäΩË±°„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÂèØËÉΩ‰ºöÈÄâÊã©‰∏Ä‰∏™ÈùûÊã•ÊúâÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞ÔºåÂ∞ΩÁÆ°Ëøô‰ºöÂ∞Ü‰Ω†Â∏¶ÂõûÂºïÁî®ËØ≠‰πâÁöÑÈ¢ÜÂüü„ÄÇ</p>
<p>Â•ΩÊ∂àÊÅØÊòØÔºåÂ¶ÇÊûú‰Ω†Âè™ÈúÄË¶Å‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®Ôºå‰∏Ä‰∏™‰ª£Ë°®ÂØπÂü∫Á±ªÂºïÁî®ÁöÑ„ÄÅÈùûÊã•ÊúâÁöÑ‰∏îÂèØÁÆÄÂçïÂ§çÂà∂ÁöÑÂåÖË£ÖÂô®ÔºåÈÇ£‰πàÊâÄÈúÄÁöÑ‰ª£Á†ÅÁõ∏ÂΩìÁÆÄÂçï„ÄÇÁâπÂà´ÊòØÂõ†‰∏∫‰Ω†Â∑≤ÁªèÂú®‚ÄúÊåáÂçó33ÔºöÊÑèËØÜÂà∞Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ‚Äù‰∏≠ÁúãÂà∞‰∫ÜÂ¶Ç‰ΩïÊâãÂä®ÂÆûÁé∞ËôöÊãüË∞ÉÂ∫¶„ÄÇÊúâ‰∫ÜËøôÈ°πÊäÄÊúØÔºåÁÆÄÂçïÁöÑÈùûÊã•ÊúâÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞Âè™ÈúÄÂá†Ë°å‰ª£Á†ÅÂç≥ÂèØÂÆåÊàêÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeConstRef</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">ShapeConstRef</span><span class="p">(</span><span class="n">ShapeT</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">,</span> <span class="n">DrawStrategy</span><span class="o">&amp;</span> <span class="n">drawer</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">shape_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">addressof</span><span class="p">(</span><span class="n">shape</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">addressof</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">draw_</span><span class="p">([](</span><span class="kt">void</span> <span class="k">const</span><span class="o">*</span> <span class="n">shapeBytes</span><span class="p">,</span> <span class="kt">void</span> <span class="k">const</span><span class="o">*</span> <span class="n">drawerBytes</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="k">const</span><span class="o">*</span> <span class="n">shape</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">ShapeT</span> <span class="k">const</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">shapeBytes</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="k">const</span><span class="o">*</span> <span class="n">drawer</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">DrawStrategy</span> <span class="k">const</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">drawerBytes</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="o">*</span><span class="n">drawer</span><span class="p">)(</span><span class="o">*</span><span class="n">shape</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="kt">void</span> <span class="n">draw</span><span class="p">(</span><span class="n">ShapeConstRef</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">shape</span><span class="p">.</span><span class="n">draw_</span><span class="p">(</span><span class="n">shape</span><span class="p">.</span><span class="n">shape_</span><span class="p">,</span> <span class="n">shape</span><span class="p">.</span><span class="n">drawer_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">DrawOperation</span> <span class="o">=</span> <span class="kt">void</span><span class="p">(</span><span class="kt">void</span> <span class="k">const</span><span class="o">*</span><span class="p">,</span> <span class="kt">void</span> <span class="k">const</span><span class="o">*</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="k">const</span><span class="o">*</span> <span class="n">shape_</span><span class="p">{</span> <span class="k">nullptr</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="k">const</span><span class="o">*</span> <span class="n">drawer_</span><span class="p">{</span> <span class="k">nullptr</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="n">DrawOperation</span><span class="o">*</span> <span class="n">draw_</span><span class="p">{</span> <span class="k">nullptr</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠£Â¶ÇÂêçÂ≠óÊâÄÁ§∫Ôºå<code>ShapeConstRef</code>Á±ªË°®Á§∫ÂØπÂ∏∏ÈáèÂΩ¢Áä∂Á±ªÂûãÁöÑÂºïÁî®„ÄÇÂÆÉÂπ∂Ê≤°ÊúâÂ≠òÂÇ®ÁªôÂÆöÂΩ¢Áä∂ÁöÑÂâØÊú¨ÔºåËÄåÊòØ‰ªÖ‰ª•<code>void*</code>ÁöÑÂΩ¢Âºè‰øùÂ≠òÊåáÂêëËØ•ÂΩ¢Áä∂ÁöÑÊåáÈíà„ÄÇÊ≠§Â§ñÔºåÂÆÉËøò‰øùÂ≠ò‰∏Ä‰∏™ÊåáÂêëÂÖ≥ËÅîÁªòÂà∂Á≠ñÁï•ÁöÑ<code>void*</code>Ôºå‰ª•ÂèäÁ¨¨‰∏â‰∏™Êï∞ÊçÆÊàêÂëò‚Äî‚ÄîÊåáÂêëÊâãÂä®ÂÆûÁé∞ÁöÑËôöÊãü<code>draw()</code>ÂáΩÊï∞ÁöÑÂáΩÊï∞ÊåáÈíàÔºàÂèÇËßÅ‚ÄúÊåáÂçó33ÔºöÊÑèËØÜÂà∞Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ‚ÄùÔºâ„ÄÇ</p>
<p><code>ShapeConstRef</code>ÈÄöËøáÂºïÁî®ÈùûconstÁöÑÊñπÂºèÊé•ÂèóÂÖ∂‰∏§‰∏™ÂèÇÊï∞ÔºöÂΩ¢Áä∂ÂíåÁªòÂà∂Á≠ñÁï•ÔºàÂèØËÉΩÂ∏¶ÊúâcvÈôêÂÆöÁ¨¶Ôºâ„ÄÇËøôÁßçÂΩ¢Âºè‰∏çÂÖÅËÆ∏Â∞ÜÂè≥ÂÄº‰º†ÈÄíÁªôÊûÑÈÄ†ÂáΩÊï∞Ôºå‰ªéËÄåÈò≤Ê≠¢‰∫Ü‰∏é‰∏¥Êó∂ÂÄºÁõ∏ÂÖ≥ÁöÑ‰ªª‰ΩïÁîüÂëΩÂë®ÊúüÈóÆÈ¢ò„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåËøôÂπ∂‰∏çËÉΩ‰øùÊä§‰Ω†ÂÖçÂèóÊâÄÊúâÂèØËÉΩÁöÑÂ∑¶ÂÄºÁîüÂëΩÂë®ÊúüÈóÆÈ¢òÁöÑÂΩ±ÂìçÔºå‰ΩÜ‰ªçÁÑ∂Êèê‰æõ‰∫ÜÈùûÂ∏∏ÂêàÁêÜÁöÑ‰øùÊä§„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥ÂÖÅËÆ∏Âè≥ÂÄº‰º†ÈÄíÔºå‰Ω†Â∫îËØ•ÈáçÊñ∞ËÄÉËôë„ÄÇÂ¶ÇÊûú‰Ω†ÁúüÁöÑÊÑøÊÑèÂÜíÈô©Â§ÑÁêÜ‰∏¥Êó∂ÂÄºÁöÑÁîüÂëΩÂë®ÊúüÈóÆÈ¢òÔºåÈÇ£‰πà‰Ω†ÂèØ‰ª•ÁÆÄÂçïÂú∞ÈÄöËøáconstÂºïÁî®Êé•ÂèóÂèÇÊï∞„ÄÇÂè™ÊòØËÆ∞‰ΩèÔºåËøô‰∏çÊòØÊàëÁªô‰Ω†ÁöÑÂª∫ËÆÆÔºÅ</p>
<p>ËøôÂ∞±ÊòØÂÆåÊï¥ÁöÑÈùûÊã•ÊúâÁöÑÂÆûÁé∞„ÄÇÂÆÉÊòØÈ´òÊïàÁöÑ„ÄÅÁÆÄÁü≠ÁöÑ„ÄÅÁÆÄÂçïÁöÑÔºåÂπ∂‰∏îÂ¶ÇÊûú‰∏çÈúÄË¶ÅÂ≠òÂÇ®‰ªª‰ΩïÂÖ≥ËÅîÁöÑÊï∞ÊçÆÊàñÁ≠ñÁï•ÂØπË±°ÔºåËøòÂèØ‰ª•Êõ¥Áü≠Êõ¥ÁÆÄÂçï„ÄÇÊúâ‰∫ÜËøô‰∏™ÂäüËÉΩÔºå‰Ω†Áé∞Âú®ËÉΩÂ§üÂàõÂª∫Âªâ‰ª∑ÁöÑÂΩ¢Áä∂ÊäΩË±°„ÄÇ‰ª•‰∏ã‰ª£Á†ÅÁ§∫‰æãÈÄöËøá<code>useShapeConstRef()</code>ÂáΩÊï∞Â±ïÁ§∫‰∫ÜËøô‰∏ÄÁÇπ„ÄÇËØ•ÂáΩÊï∞‰Ωø‰Ω†ËÉΩÂ§üÈÄöËøáÁÆÄÂçïÂú∞‰ΩøÁî®<code>ShapeConstRef</code>‰Ωú‰∏∫ÂáΩÊï∞ÂèÇÊï∞Êù•ÁªòÂà∂‰ªª‰ΩïÁ±ªÂûãÁöÑÂΩ¢Áä∂ÔºàÂúÜÂΩ¢„ÄÅÊñπÂΩ¢Á≠âÔºâÔºåÂπ∂‰ΩøÁî®‰ªª‰ΩïÂèØËÉΩÁöÑÁªòÂà∂ÂÆûÁé∞„ÄÇÂú®<code>main()</code>ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨ÈÄöËøáÂÖ∑‰ΩìÁöÑÂΩ¢Áä∂ÂíåÂÖ∑‰ΩìÁöÑÁªòÂà∂Á≠ñÁï•ÔºàÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÊòØ‰∏Ä‰∏™lambdaÔºâË∞ÉÁî®<code>useShapeConstRef()</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Main.cpp&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">useShapeConstRef</span><span class="p">(</span><span class="n">ShapeConstRef</span> <span class="n">shape</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">draw</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ÂúÜ‰Ωú‰∏∫ÂÖ∑‰ΩìÂΩ¢Áä∂Á±ªÂûãÁöÑ‰ª£Ë°®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Circle</span> <span class="n">circle</span><span class="p">{</span><span class="mf">3.14</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ÁªòÂà∂Á≠ñÁï•ÔºåÂΩ¢Âºè‰∏∫lambda
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">auto</span> <span class="n">drawer</span> <span class="o">=</span> <span class="p">[](</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÄöËøá&#39;ShapeConstRef&#39;ÊäΩË±°Áõ¥Êé•ÁªòÂà∂ÂúÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">useShapeConstRef</span><span class="p">({</span><span class="n">circle</span><span class="p">,</span> <span class="n">drawer</span><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏ÄË∞ÉÁî®Ëß¶Âèë‰∫ÜÊúüÊúõÁöÑÊïàÊûúÔºåÁâπÂà´‰πãÂ§ÑÂú®‰∫éÊ≤°Êúâ‰ªª‰ΩïÂÜÖÂ≠òÂàÜÈÖçÊàñÊòÇË¥µÁöÑÂ§çÂà∂Êìç‰ΩúÔºåËÄåÂè™ÊòØÈÄöËøá‰∏ÄÁªÑÊåáÂêëÁªôÂÆöÂΩ¢Áä∂ÂíåÁªòÂà∂Á≠ñÁï•ÁöÑÊåáÈíàÊù•Â∞ÅË£ÖÂ§öÊÄÅË°å‰∏∫„ÄÇËøôÁßçÊñπÂºè‰∏ç‰ªÖÈ´òÊïàÔºåËÄå‰∏îÈÅøÂÖç‰∫ÜËÆ∏Â§öÊΩúÂú®ÁöÑÊÄßËÉΩÁì∂È¢à„ÄÇ</p>
<p><strong>Êõ¥Âº∫Â§ßÁöÑÈùûÊã•ÊúâÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞</strong></p>
<p>Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÁÆÄÂçïÁöÑÈùûÊã•ÊúâÁöÑÁ±ªÂûãÊì¶Èô§ÂÆûÁé∞Â∫îËØ•Ë∂≥‰ª•Êª°Ë∂≥‰Ω†ÁöÑÊâÄÊúâÈúÄÊ±Ç„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÊúâÊó∂ÂÆÉÂèØËÉΩËøò‰∏çÂ§ü„ÄÇÊúâÊó∂ÂÄôÔºå‰Ω†ÂèØËÉΩÈúÄË¶Å‰∏ÄÁßçÁ®çÂæÆ‰∏çÂêåÁöÑÂΩ¢Áä∂ÂºïÁî®ÂΩ¢ÂºèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Circle.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Shape.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ÂúÜ‰Ωú‰∏∫ÂÖ∑‰ΩìÂΩ¢Áä∂Á±ªÂûãÁöÑ‰ª£Ë°®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Circle</span> <span class="n">circle</span><span class="p">{</span><span class="mf">3.14</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ÁªòÂà∂Á≠ñÁï•ÔºåÂΩ¢Âºè‰∏∫lambda
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">auto</span> <span class="n">drawer</span> <span class="o">=</span> <span class="p">[](</span><span class="n">Circle</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∞ÜÂΩ¢Áä∂ÂíåÁªòÂà∂Á≠ñÁï•ÁªÑÂêàÂú®‰∏Ä‰∏™&#39;Shape&#39;ÊäΩË±°‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Shape</span> <span class="n">shape1</span><span class="p">(</span><span class="n">circle</span><span class="p">,</span> <span class="n">drawer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁªòÂà∂ÂΩ¢Áä∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">draw</span><span class="p">(</span><span class="n">shape1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫ÂØπÂΩ¢Áä∂ÁöÑÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Â∑≤ÁªèÂèØ‰ª•Â∑•‰ΩúÔºå‰ΩÜÂΩ¢Áä∂ÂºïÁî®Â∞ÜÂ≠òÂÇ®ÊåáÂêë&#39;shape1&#39;ÂÆû‰æãÁöÑÊåáÈíàËÄå‰∏çÊòØ&#39;circle&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">ShapeConstRef</span> <span class="n">shaperef</span><span class="p">(</span><span class="n">shape1</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÄöËøáÂΩ¢Áä∂ÂºïÁî®ËøõË°åÁªòÂà∂ÔºåÁªìÊûúÁõ∏Âêå
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ËøôÁßçÊñπÂºèÊúâÊïàÔºå‰ΩÜÊ∂âÂèä‰∏§Ê¨°Èó¥Êé•ÂºïÁî®ÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">draw</span><span class="p">(</span><span class="n">shaperef</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÄöËøáÂΩ¢Áä∂ÂºïÁî®ÂàõÂª∫ÂΩ¢Áä∂ÁöÑÊ∑±Êã∑Ë¥ù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ‰ΩøÁî®ÁÆÄÂçïÈùûÊã•ÊúâÁöÑÂÆûÁé∞ËøôÊòØ‰∏çÂèØËÉΩÁöÑÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ‰ΩøÁî®ÁÆÄÂçïÂÆûÁé∞Êó∂ÔºåËøô‰ºöÂàõÂª∫&#39;shaperef&#39;ÂÆû‰æãÁöÑÂâØÊú¨„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// &#39;shape2&#39;Êú¨Ë∫´Â∞ÜÂÖÖÂΩìÂºïÁî®ÔºåÂπ∂‰ºöÊúâ‰∏âÊ¨°Èó¥Êé•ÂºïÁî®...Âîâ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Shape</span> <span class="n">shape2</span><span class="p">(</span><span class="n">shaperef</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁªòÂà∂ÂâØÊú¨‰πü‰ºö‰∫ßÁîüÁõ∏ÂêåÁöÑÁªìÊûú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">draw</span><span class="p">(</span><span class="n">shape2</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÅáËÆæ‰Ω†Êúâ‰∏Ä‰∏™Âêç‰∏∫<code>shape1</code>ÁöÑÁ±ªÂûãÊì¶Èô§ÂúÜÂΩ¢Ôºå‰Ω†ÂèØËÉΩÂ∏åÊúõÂ∞ÜËøô‰∏™<code>Shape</code>ÂÆû‰æãËΩ¨Êç¢‰∏∫<code>ShapeConstRef</code>„ÄÇ‰ΩøÁî®ÂΩìÂâçÂÆûÁé∞ÔºåËøôÂèØ‰ª•Â∑•‰ΩúÔºå‰ΩÜ<code>shaperef</code>ÂÆû‰æã‰ºöÊåÅÊúâÊåáÂêë<code>shape1</code>ÂÆû‰æãÁöÑÊåáÈíàÔºåËÄå‰∏çÊòØÊåáÂêë<code>circle</code>ÁöÑÊåáÈíà„ÄÇÂõ†Ê≠§Ôºå‰ªª‰Ωï‰ΩøÁî®<code>shaperef</code>ÁöÑÊìç‰ΩúÈÉΩ‰ºöÂØºËá¥‰∏§Ê¨°Èó¥Êé•ÂºïÁî®Ôºà‰∏ÄÊ¨°ÈÄöËøá<code>ShapeConstRef</code>ÔºåÂè¶‰∏ÄÊ¨°ÈÄöËøá<code>Shape</code>ÊäΩË±°Ôºâ„ÄÇÊ≠§Â§ñÔºå‰Ω†ÂèØËÉΩËøòÂ∏åÊúõÂ∞Ü<code>ShapeConstRef</code>ÂÆû‰æãËΩ¨Êç¢‰∏∫<code>Shape</code>ÂÆû‰æã„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÂèØËÉΩ‰ºöÊúüÊúõÂàõÂª∫Â∫ïÂ±Ç<code>Circle</code>ÁöÑÂÆåÊï¥ÂâØÊú¨ÔºåÂπ∂‰∏îÁîüÊàêÁöÑ<code>Shape</code>ÊäΩË±°ÂåÖÂê´Âπ∂Ë°®Á§∫ËØ•ÂâØÊú¨„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºå‰ΩøÁî®ÂΩìÂâçÂÆûÁé∞Ôºå<code>Shape</code>‰ºöÂàõÂª∫<code>ShapeConstRef</code>ÂÆû‰æãÁöÑÂâØÊú¨Ôºå‰ªéËÄåÂºïÂÖ•Á¨¨‰∏âÊ¨°Èó¥Êé•ÂºïÁî®„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÈúÄË¶ÅÂú®Êã•ÊúâÂíåÈùûÊã•ÊúâÁöÑÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®‰πãÈó¥Êõ¥È´òÊïàÁöÑ‰∫§‰∫íÔºåÂπ∂‰∏îÂú®Â∞ÜÈùûÊã•ÊúâÁöÑÂåÖË£ÖÂô®Â§çÂà∂Âà∞Êã•ÊúâÁöÑÂåÖË£ÖÂô®Êó∂ÈúÄË¶ÅÂÆûÈôÖÁöÑÂâØÊú¨ÔºåÊàëÂèØ‰ª•‰∏∫‰Ω†Êèê‰æõ‰∏Ä‰∏™Ëß£ÂÜ≥ÊñπÊ°à„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÂÆÉÊØî‰πãÂâçÁöÑÂÆûÁé∞Â§çÊùÇ‰∏Ä‰∫õÔºå‰ΩÜÂπ∏ËøêÁöÑÊòØÂπ∂‰∏çËøá‰∫éÂ§çÊùÇ„ÄÇËØ•Ëß£ÂÜ≥ÊñπÊ°àÂü∫‰∫é‚ÄúÊåáÂçó32ÔºöËÄÉËôëÁî®Á±ªÂûãÊì¶Èô§ÊõøÊç¢ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ‚Äù‰∏≠ÁöÑÂü∫Êú¨Á±ªÂûãÊì¶Èô§ÂÆûÁé∞ÔºåÂåÖÊã¨<code>ShapeConcept</code>Âíå<code>OwningShapeModel</code>Á±ªÔºå‰Ωç‰∫é<code>detail</code>ÂëΩÂêçÁ©∫Èó¥‰∏≠Ôºå‰ª•Âèä<code>Shape</code>Á±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®„ÄÇ‰Ω†‰ºöÁúãÂà∞ÔºåÂè™ÈúÄËøõË°å‰∏Ä‰∫õÊ∑ªÂä†ÔºåËøô‰∫õ‰Ω†‰πãÂâçÈÉΩËßÅËøá„ÄÇ</p>
<p>Á¨¨‰∏Ä‰∏™Ê∑ªÂä†ÂèëÁîüÂú®<code>ShapeConcept</code>Âü∫Á±ª‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">detail</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeConcept</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">clone</span><span class="p">(</span><span class="n">ShapeConcept</span><span class="o">*</span> <span class="n">memory</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace detail
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>ShapeConcept</code>Á±ªÊâ©Â±ï‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑ<code>clone()</code>ÂáΩÊï∞„ÄÇ‰∏éËøîÂõûÊñ∞ÂÆû‰æãÂåñÊ®°ÂûãÂâØÊú¨‰∏çÂêåÔºåÊ≠§ÂáΩÊï∞‰º†ÈÄí‰∫ÜÈúÄË¶ÅÂàõÂª∫Êñ∞Ê®°ÂûãÁöÑÂÜÖÂ≠òÂú∞ÂùÄ„ÄÇ</p>
<p>Á¨¨‰∫å‰∏™Ê∑ªÂä†ÊòØ‰∏Ä‰∏™Êñ∞ÁöÑÊ®°ÂûãÁ±ªÔºåÂç≥<code>NonOwningShapeModel</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">detail</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">NonOwningShapeModel</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ShapeConcept</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">NonOwningShapeModel</span><span class="p">(</span><span class="n">ShapeT</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">,</span> <span class="n">DrawStrategy</span><span class="o">&amp;</span> <span class="n">drawer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">shape_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">addressof</span><span class="p">(</span><span class="n">shape</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">,</span> <span class="n">drawer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">addressof</span><span class="p">(</span><span class="n">drawer</span><span class="p">))</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="p">(</span><span class="o">*</span><span class="n">drawer_</span><span class="p">)(</span><span class="o">*</span><span class="n">shape_</span><span class="p">);</span> <span class="p">}</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ShapeConcept</span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">using</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">OwningShapeModel</span><span class="o">&lt;</span><span class="n">ShapeT</span><span class="p">,</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">shape_</span><span class="p">,</span> <span class="o">*</span><span class="n">drawer_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">clone</span><span class="p">(</span><span class="n">ShapeConcept</span><span class="o">*</span> <span class="n">memory</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">construct_at</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">NonOwningShapeModel</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">memory</span><span class="p">),</span> <span class="o">*</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// ÊàñËÄÖÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// auto* ptr = 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//     const_cast&lt;void*&gt;(static_cast&lt;void const volatile*&gt;(memory));
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// ::new (ptr) NonOwningShapeModel(*this);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">ShapeT</span><span class="o">*</span> <span class="n">shape_</span><span class="p">{</span> <span class="k">nullptr</span> <span class="p">};</span>   
</span></span><span class="line"><span class="cl">    <span class="n">DrawStrategy</span><span class="o">*</span> <span class="n">drawer_</span><span class="p">{</span> <span class="k">nullptr</span> <span class="p">};</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> <span class="c1">// namespace detail
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>NonOwningShapeModel</code>ÈùûÂ∏∏Á±ª‰ºº‰∫é<code>OwningShapeModel</code>ÂÆûÁé∞Ôºå‰ΩÜÊ≠£Â¶ÇÂÖ∂ÂêçÁß∞ÊâÄÁ§∫ÔºåÂÆÉ‰∏çÂ≠òÂÇ®ÁªôÂÆöÂΩ¢Áä∂ÂíåÁ≠ñÁï•ÁöÑÂâØÊú¨ÔºåËÄåÊòØ‰ªÖÂ≠òÂÇ®ÊåáÈíà„ÄÇÂõ†Ê≠§ÔºåËøô‰∏™Á±ª‰ª£Ë°®‰∫Ü<code>OwningShapeModel</code>Á±ªÁöÑÂºïÁî®ËØ≠‰πâÁâàÊú¨„ÄÇÊ≠§Â§ñÔºå<code>NonOwningShapeModel</code>ÈúÄË¶ÅË¶ÜÁõñ<code>ShapeConcept</code>Á±ªÁöÑÁ∫ØËôöÂáΩÊï∞Ôºö<code>draw()</code>ÂÜçÊ¨°Â∞ÜÁªòÂà∂ËØ∑Ê±ÇËΩ¨ÂèëÁªôÁªôÂÆöÁöÑÁªòÂà∂Á≠ñÁï•ÔºåËÄå<code>clone()</code>ÂáΩÊï∞ÊâßË°åÂ§çÂà∂Êìç‰Ωú„ÄÇÁ¨¨‰∏Ä‰∏™<code>clone()</code>ÂáΩÊï∞ÈÄöËøáÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ<code>OwningShapeModel</code>Âπ∂Â§çÂà∂Â≠òÂÇ®ÁöÑÂΩ¢Áä∂ÂíåÁªòÂà∂Á≠ñÁï•Êù•ÂÆûÁé∞„ÄÇÁ¨¨‰∫å‰∏™<code>clone()</code>ÂáΩÊï∞ÈÄöËøá<code>std::construct_at()</code>Âú®ÊåáÂÆöÂú∞ÂùÄÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ<code>NonOwningShapeModel</code>Êù•ÂÆûÁé∞„ÄÇ</p>
<p><strong>Â¢ûÂº∫ÁöÑÊã•ÊúâÂûãÂΩ¢Áä∂Ê®°ÂûãÂÆûÁé∞</strong></p>
<p>Ê≠§Â§ñÔºå<code>OwningShapeModel</code>Á±ªÈúÄË¶ÅÊèê‰æõÊñ∞ÁöÑ<code>clone()</code>ÂáΩÊï∞ÁöÑÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">detail</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OwningShapeModel</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ShapeConcept</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">clone</span><span class="p">(</span><span class="n">ShapeConcept</span><span class="o">*</span> <span class="n">memory</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">using</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">NonOwningShapeModel</span><span class="o">&lt;</span><span class="n">ShapeT</span> <span class="k">const</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="k">const</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">construct_at</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">memory</span><span class="p">),</span> <span class="n">shape_</span><span class="p">,</span> <span class="n">drawer_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// ÊàñËÄÖÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// auto* ptr = 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//     const_cast&lt;void*&gt;(static_cast&lt;void const volatile*&gt;(memory));
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// ::new (ptr) Model(shape_, drawer_);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace detail
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>OwningShapeModel</code>‰∏≠ÁöÑ<code>clone()</code>ÂáΩÊï∞ÂÆûÁé∞Á±ª‰ºº‰∫é<code>NonOwningShapeModel</code>Á±ªÁöÑÂÆûÁé∞ÔºåÈÄöËøá<code>std::construct_at()</code>ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ<code>NonOwningShapeModel</code>ÂÆû‰æã„ÄÇ</p>
<p>Êé•‰∏ãÊù•ÁöÑÊ∑ªÂä†ÊòØÁõ∏Â∫îÁöÑÂåÖË£ÖÁ±ªÔºåÂÆÉ‰Ωú‰∏∫Â§ñÈÉ®Â±ÇÊ¨°ÁªìÊûÑ<code>ShapeConcept</code>Âíå<code>NonOwningShapeModel</code>ÁöÑÂåÖË£ÖÂô®„ÄÇËøô‰∏™ÂåÖË£ÖÂô®Â∫îÊâøÊãÖ‰∏é<code>Shape</code>Á±ªÁõ∏ÂêåÁöÑË¥£‰ªªÔºàÂç≥ÔºåÂÆû‰æãÂåñ<code>NonOwningShapeModel</code>Á±ªÊ®°ÊùøÂπ∂Â∞ÅË£ÖÊâÄÊúâÊåáÈíàÂ§ÑÁêÜÔºâÔºå‰ΩÜ‰ªÖË°®Á§∫ÂØπÂ∏∏ÈáèÂÖ∑‰ΩìÂΩ¢Áä∂ÁöÑÂºïÁî®ÔºåËÄå‰∏çÊòØÂâØÊú¨„ÄÇËøô‰∏™ÂåÖË£ÖÂô®ÂÜçÊ¨°‰ª•<code>ShapeConstRef</code>Á±ªÁöÑÂΩ¢ÂºèÁªôÂá∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstddef&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeConstRef</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// È¢ÑÊúüÊ®°ÂûãÂÆû‰æãÂåñÁöÑÂ§ßÂ∞èÔºösizeof(ShapeT*) + sizeof(DrawStrategy*) + sizeof(vptr)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">size_t</span> <span class="n">MODEL_SIZE</span> <span class="o">=</span> <span class="mi">3U</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">alignas</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="p">,</span> <span class="n">MODEL_SIZE</span><span class="o">&gt;</span> <span class="n">raw_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠£Â¶Ç‰Ω†ÊâÄËßÅÔºå<code>ShapeConstRef</code>Á±ªÈùûÂ∏∏Á±ª‰ºº‰∫é<code>Shape</code>Á±ªÔºå‰ΩÜÊúâÂá†‰∏™ÈáçË¶ÅÁöÑÂå∫Âà´„ÄÇÁ¨¨‰∏Ä‰∏™ÂÄºÂæóÊ≥®ÊÑèÁöÑÁªÜËäÇÊòØ‰ΩøÁî®‰∫ÜÈÄÇÂΩìÂØπÈΩêÁöÑ<code>std::byte</code>Êï∞ÁªÑÂΩ¢ÂºèÁöÑ<code>raw_</code>Â≠òÂÇ®ÔºàÔºâ„ÄÇËøôË°®Êòé<code>ShapeConstRef</code>‰∏çËøõË°åÂä®ÊÄÅÂàÜÈÖçÔºåËÄåÊòØÁâ¢Âõ∫Âú∞‰æùËµñ‰∫éÁ±ªÂÜÖÂÜÖÂ≠ò„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåËøôÊòØÂæàÂÆπÊòìÂÆûÁé∞ÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨ÂèØ‰ª•È¢ÑÊµãÊâÄÈúÄÁöÑ<code>NonOwningShapeModel</code>ÁöÑÂ§ßÂ∞èÁ≠â‰∫é‰∏â‰∏™ÊåáÈíàÁöÑÂ§ßÂ∞èÔºàÂÅáËÆæÊåáÂêëËôöÂáΩÊï∞Ë°®ÁöÑÊåáÈíà<code>vptr</code>‰∏éÂÖ∂‰ªñÊåáÈíàÂÖ∑ÊúâÁõ∏ÂêåÁöÑÂ§ßÂ∞èÔºâ„ÄÇ</p>
<p><code>ShapeConstRef</code>ÁöÑÁßÅÊúâÈÉ®ÂàÜËøòÂåÖÂê´Âá†‰∏™ÊàêÂëòÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeConstRef</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="kt">void</span> <span class="n">draw</span><span class="p">(</span><span class="n">ShapeConstRef</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">shape</span><span class="p">.</span><span class="n">pimpl</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ShapeConcept</span><span class="o">*</span> <span class="nf">pimpl</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">ShapeConcept</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">raw_</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ShapeConcept</span> <span class="k">const</span><span class="o">*</span> <span class="nf">pimpl</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">ShapeConcept</span> <span class="k">const</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">raw_</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨ËøòÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ÈöêËóèÁöÑÊúãÂèã<code>draw()</code>ÂáΩÊï∞ÔºåÂπ∂‰∏îÂ∞±ÂÉèÂú®‚ÄúÊåáÂçó33ÔºöÊÑèËØÜÂà∞Á±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ‚Äù‰∏≠ÁöÑSBOÂÆûÁé∞‰∏ÄÊ†∑ÔºåÊàë‰ª¨Ê∑ªÂä†‰∫Ü‰∏ÄÂØπ<code>pimpl()</code>ÂáΩÊï∞ÔºàÔºâ„ÄÇËøôÂ∞Ü‰ΩøÊàë‰ª¨ËÉΩÂ§üÊñπ‰æøÂú∞‰ΩøÁî®Á±ªÂÜÖÁöÑ<code>std::byte</code>Êï∞ÁªÑ„ÄÇ</p>
<p>Á¨¨‰∫å‰∏™ÂÄºÂæóÊ≥®ÊÑèÁöÑÁªÜËäÇÊòØÊØè‰∏™Á±ªÂûãÊì¶Èô§ÂÆûÁé∞ÁöÑÁ≠æÂêçÂáΩÊï∞‚Äî‚ÄîÊ®°ÊùøÊûÑÈÄ†ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeConstRef</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Á±ªÂûã&#39;ShapeT&#39;Âíå&#39;DrawStrategy&#39;ÂèØËÉΩÊòØcvÈôêÂÆöÁöÑÔºõÂ∑¶ÂÄºÂºïÁî®Èò≤Ê≠¢‰∏¥Êó∂ÂÄºÁöÑÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">ShapeT</span><span class="p">,</span> <span class="k">typename</span> <span class="n">DrawStrategy</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">ShapeConstRef</span><span class="p">(</span><span class="n">ShapeT</span><span class="o">&amp;</span> <span class="n">shape</span><span class="p">,</span> <span class="n">DrawStrategy</span><span class="o">&amp;</span> <span class="n">drawer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">using</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">detail</span><span class="o">::</span><span class="n">NonOwningShapeModel</span><span class="o">&lt;</span><span class="n">ShapeT</span> <span class="k">const</span><span class="p">,</span> <span class="n">DrawStrategy</span> <span class="k">const</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">static_assert</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">Model</span><span class="p">)</span> <span class="o">==</span> <span class="n">MODEL_SIZE</span><span class="p">,</span> <span class="s">&#34;Invalid size detected&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static_assert</span><span class="p">(</span><span class="k">alignof</span><span class="p">(</span><span class="n">Model</span><span class="p">)</span> <span class="o">==</span> <span class="k">alignof</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">),</span> <span class="s">&#34;Misaligned detected&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">construct_at</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">pimpl</span><span class="p">()),</span> <span class="n">shape</span><span class="p">,</span> <span class="n">drawer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// ÊàñËÄÖÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// auto* ptr = 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//     const_cast&lt;void*&gt;(static_cast&lt;void const volatile*&gt;(pimpl()));
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// ::new (ptr) Model(shape, drawer);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂêåÊ†∑Ôºå‰Ω†ÂèØ‰ª•ÈÄâÊã©Êé•ÂèóÈùûconstÂºïÁî®ÂèÇÊï∞Êù•Èò≤Ê≠¢‰∏¥Êó∂ÂÄºÁöÑÁîüÂëΩÂë®ÊúüÈóÆÈ¢òÔºàÈùûÂ∏∏Êé®ËçêÔºÅÔºâ„ÄÇÊàñËÄÖÔºåÊé•ÂèóconstÂºïÁî®ÂèÇÊï∞ÔºåËøôÊ†∑ÂÖÅËÆ∏‰º†ÈÄíÂè≥ÂÄºÔºå‰ΩÜ‰ºö‰Ωø‰Ω†Èù¢‰∏¥‰∏¥Êó∂ÂÄºÁîüÂëΩÂë®ÊúüÈóÆÈ¢òÁöÑÈ£éÈô©„ÄÇÂú®ÊûÑÈÄ†ÂáΩÊï∞ÂÜÖÈÉ®ÔºåÊàë‰ª¨È¶ñÂÖà‰∏∫ÊâÄÈúÄÁöÑÊ®°ÂûãÁ±ªÂûã‰ΩøÁî®‰∏Ä‰∏™Êñπ‰æøÁöÑÁ±ªÂûãÂà´ÂêçÔºàÔºâÔºåÁÑ∂ÂêéÊ£ÄÊü•Ê®°ÂûãÁöÑÂÆûÈôÖÂ§ßÂ∞èÂíåÂØπÈΩêÊñπÂºèÔºàÔºâ„ÄÇÂ¶ÇÊûú‰∏çÁ¨¶È¢ÑÊúüÁöÑ<code>MODEL_SIZE</code>ÊàñÊåáÈíàÂØπÈΩêÔºåÊàë‰ª¨Â∞ÜÂàõÂª∫‰∏Ä‰∏™ÁºñËØëÊó∂ÈîôËØØ„ÄÇÁÑ∂ÂêéÈÄöËøá<code>std::construct_at()</code>Âú®Á±ªÂÜÖÂÜÖÂ≠ò‰∏≠ÊûÑÂª∫Êñ∞Ê®°ÂûãÔºàÔºâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ShapeConstRef</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">ShapeConstRef</span><span class="p">(</span><span class="n">Shape</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span> <span class="n">other</span><span class="p">.</span><span class="n">pimpl_</span><span class="o">-&gt;</span><span class="n">clone</span><span class="p">(</span><span class="n">pimpl</span><span class="p">());</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">ShapeConstRef</span><span class="p">(</span><span class="n">Shape</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span> <span class="n">other</span><span class="p">.</span><span class="n">pimpl_</span><span class="o">-&gt;</span><span class="n">clone</span><span class="p">(</span><span class="n">pimpl</span><span class="p">());</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ShapeConstRef</span><span class="p">(</span><span class="n">ShapeConstRef</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">other</span><span class="p">.</span><span class="n">pimpl</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">clone</span><span class="p">(</span><span class="n">pimpl</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ShapeConstRef</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">ShapeConstRef</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Â§çÂà∂Âπ∂‰∫§Êç¢ÊÉØÁî®Ê≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ShapeConstRef</span> <span class="nf">copy</span><span class="p">(</span><span class="n">other</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">raw_</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">copy</span><span class="p">.</span><span class="n">raw_</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">ShapeConstRef</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">destroy_at</span><span class="p">(</span><span class="n">pimpl</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÊàñËÄÖÔºöpimpl()-&gt;~ShapeConcept();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÊòæÂºèÊú™Â£∞ÊòéÁßªÂä®Êìç‰Ωú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Èô§‰∫ÜÊ®°Êùø<code>ShapeConstRef</code>ÊûÑÈÄ†ÂáΩÊï∞Â§ñÔºå<code>ShapeConstRef</code>ËøòÊèê‰æõ‰∫Ü‰∏§‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ôºå‰ª•ÂêØÁî®‰ªé<code>Shape</code>ÂÆû‰æãÁöÑËΩ¨Êç¢„ÄÇËôΩÁÑ∂Ëøô‰∫õ‰∏çÊòØ‰∏•Ê†ºÂøÖÈúÄÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨ÂèØ‰ª•‰∏∫<code>Shape</code>ÂàõÂª∫‰∏Ä‰∏™<code>NonOwningShapeModel</code>ÂÆû‰æãÔºå‰ΩÜËøô‰∫õÊûÑÈÄ†ÂáΩÊï∞Áõ¥Êé•‰∏∫Áõ∏Â∫îÁöÑÂ∫ïÂ±ÇÂΩ¢Áä∂Á±ªÂûãÂàõÂª∫‰∏Ä‰∏™<code>NonOwningShapeModel</code>Ôºå‰ªéËÄåÂáèÂ∞ë‰∏ÄÊ¨°Èó¥Êé•ÂºïÁî®ÔºåÊúâÂä©‰∫éÊèêÈ´òÊÄßËÉΩ„ÄÇÊ≥®ÊÑèÔºå‰∏∫‰∫Ü‰ΩøËøô‰∫õÊûÑÈÄ†ÂáΩÊï∞Â∑•‰ΩúÔºå<code>ShapeConstRef</code>ÈúÄË¶ÅÊàê‰∏∫<code>Shape</code>Á±ªÁöÑÊúãÂèã„ÄÇ‰∏çËøá‰∏çÁî®ÊãÖÂøÉÔºåËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÂèãÂÖÉÁ§∫‰æãÔºö<code>Shape</code>Âíå<code>ShapeConstRef</code>Á°ÆÂÆûÂ∫îËØ•Âú®‰∏ÄËµ∑Â∑•‰ΩúÔºåÁîöËá≥ÂèØ‰ª•Âú®Âêå‰∏Ä‰∏™Â§¥Êñá‰ª∂‰∏≠Êèê‰æõ„ÄÇ</p>
<p>ÊúÄÂêé‰∏Ä‰∏™ÂÄºÂæóÊ≥®ÊÑèÁöÑÁªÜËäÇÊòØ‰∏§‰∏™ÁßªÂä®Êìç‰ΩúÊó¢Ê≤°ÊúâÊòæÂºèÂ£∞Êòé‰πüÊ≤°ÊúâÂà†Èô§„ÄÇÁî±‰∫éÊàë‰ª¨ÊòéÁ°ÆÂú∞ÂÆö‰πâ‰∫Ü‰∏§‰∏™Â§çÂà∂Êìç‰ΩúÔºåÁºñËØëÂô®Êó¢‰∏ç‰ºöÂàõÂª∫‰πü‰∏ç‰ºöÂà†Èô§Ëøô‰∏§‰∏™ÁßªÂä®Êìç‰ΩúÔºåÂõ†Ê≠§ÂÆÉ‰ª¨ÂÆåÂÖ®Ê∂àÂ§±‰∫Ü„ÄÇËøôÊÑèÂë≥ÁùÄËøô‰∏§‰∏™ÂáΩÊï∞Ê∞∏Ëøú‰∏ç‰ºöÂèÇ‰∏éÈáçËΩΩËß£Êûê„ÄÇËÄå‰∏îÔºåËøô‰∏éÊòæÂºèÂà†Èô§ÂÆÉ‰ª¨‰∏çÂêåÔºöÂ¶ÇÊûúÂÆÉ‰ª¨Ë¢´Âà†Èô§ÔºåÂàô‰ºöÂèÇ‰∏éÈáçËΩΩËß£ÊûêÔºåÂ¶ÇÊûúË¢´ÈÄâ‰∏≠ÔºåÂàô‰ºöÂØºËá¥ÁºñËØëÈîôËØØ„ÄÇ‰ΩÜÁî±‰∫éËøô‰∏§‰∏™ÂáΩÊï∞Â∑≤ÁªèÊ∂àÂ§±ÔºåÂΩì‰Ω†Â∞ùËØïÁßªÂä®‰∏Ä‰∏™<code>ShapeConstRef</code>Êó∂ÔºåÂ§çÂà∂Êìç‰Ωú‰ºöË¢´‰ΩøÁî®ÔºåËøô‰∫õÊìç‰ΩúÊó¢‰æøÂÆúÂèàÈ´òÊïàÔºåÂõ†‰∏∫<code>ShapeConstRef</code>‰ªÖË°®Á§∫‰∏Ä‰∏™ÂºïÁî®„ÄÇÂõ†Ê≠§ÔºåËøô‰∏™Á±ªÊïÖÊÑèÂÆûÁé∞‰∫Ü‚ÄúËßÑÂàô‰∏â‚Äù„ÄÇ</p>
<p>Êàë‰ª¨Âá†‰πéÂÆåÊàê‰∫Ü„ÄÇÊúÄÂêéÁöÑÁªÜËäÇÊòØÂú®<code>Shape</code>Á±ª‰∏≠Ê∑ªÂä†Âè¶‰∏Ä‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Shape.h&gt; ----------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span><span class="p">(</span><span class="n">ShapeConstRef</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="o">:</span> <span class="n">pimpl_</span><span class="p">{</span><span class="n">other</span><span class="p">.</span><span class="n">pimpl</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">clone</span><span class="p">()}</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáËøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ôºå<code>Shape</code>ÁöÑ‰∏Ä‰∏™ÂÆû‰æã‰ºöÂàõÂª∫‰∏Ä‰∏™Â≠òÂÇ®Âú®‰º†ÂÖ•ÁöÑ<code>ShapeConstRef</code>ÂÆû‰æã‰∏≠ÁöÑÂΩ¢Áä∂ÁöÑÊ∑±Êã∑Ë¥ù„ÄÇÂ¶ÇÊûúÊ≤°ÊúâËøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ôºå<code>Shape</code>Â∞ÜÂ≠òÂÇ®‰∏Ä‰∏™<code>ShapeConstRef</code>ÂÆû‰æãÁöÑÂâØÊú¨Ôºå‰ªéËÄåÊú¨Ë∫´ÂÖÖÂΩìÂºïÁî®„ÄÇ</p>
<h2 id="Á¨¨‰πùÁ´†-Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè">Á¨¨‰πùÁ´† Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè
</h2><p>Êú¨Á´†Â∞Ü‰∏ìÈó®‰ªãÁªçÂè¶‰∏Ä‰∏™ÁªèÂÖ∏ËÆæËÆ°Ê®°ÂºèÔºöË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>Â§öÂπ¥Êù•ÔºåË£ÖÈ•∞Âô®Â∑≤Ë¢´ËØÅÊòéÂú®ÁªÑÂêàÂíåÂ§çÁî®‰∏çÂêåÂÆûÁé∞ÊñπÊ°àÊó∂ÊòØÊúÄÊúâÁî®ÁöÑËÆæËÆ°Ê®°Âºè‰πã‰∏Ä„ÄÇÂõ†Ê≠§ÔºåÂÆÉË¢´ÂπøÊ≥õ‰ΩøÁî®Âπ∂‰∏ç‰ª§‰∫∫ÊÑèÂ§ñ‚Äî‚ÄîÁîöËá≥Ë¢´Â∫îÁî®‰∫éC++Ê†áÂáÜÂ∫ìÂäüËÉΩ‰∏≠ÊúÄ‰ª§‰∫∫Âç∞Ë±°Ê∑±ÂàªÁöÑÈáçÊûÑ‰πã‰∏Ä„ÄÇÊàëÂú®Êú¨Á´†ÁöÑ‰∏ªË¶ÅÁõÆÊ†áÊòØËÆ©ÊÇ®ÂÖÖÂàÜÁêÜËß£‰∏∫‰ΩïÂèä‰ΩïÊó∂Ë£ÖÈ•∞Âô®ÊòØËΩØ‰ª∂ËÆæËÆ°ÁöÑÁªù‰Ω≥ÈÄâÊã©„ÄÇÊ≠§Â§ñÔºåÊàëÂ∞ÜÂêëÊÇ®Â±ïÁ§∫Ë£ÖÈ•∞Âô®Áé∞‰ª£Âåñ„ÄÅÊõ¥Âü∫‰∫éÂÄºËØ≠‰πâÁöÑÂÆûÁé∞ÂΩ¢Âºè„ÄÇ</p>
<p>Âú®&quot;ÂáÜÂàô35Ôºö‰ΩøÁî®Ë£ÖÈ•∞Âô®ÂàÜÂ±ÇÊ∑ªÂä†ÂÆöÂà∂ÂäüËÉΩ&quot;‰∏≠ÔºåÊàë‰ª¨Â∞ÜÊ∑±ÂÖ•Êé¢ËÆ®Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÁöÑËÆæËÆ°Áª¥Â∫¶„ÄÇÊÇ®Â∞Ü‰∫ÜËß£‰ΩïÊó∂ËøôÊòØÊ≠£Á°ÆÁöÑËÆæËÆ°ÈÄâÊã©Ôºå‰ª•Âèä‰ΩøÁî®ÂÆÉËÉΩÂ∏¶Êù•Âì™‰∫õ‰ºòÂäø„ÄÇÂêåÊó∂ÔºåÊÇ®ËøòÂ∞ÜÂ≠¶‰π†ËØ•Ê®°Âºè‰∏éÂÖ∂‰ªñËÆæËÆ°Ê®°ÂºèÁöÑÂå∫Âà´ÂèäÂÖ∂ÊΩúÂú®Áº∫ÁÇπ„ÄÇ</p>
<p>Âú®&quot;ÂáÜÂàô36ÔºöÁêÜËß£ËøêË°åÊó∂‰∏éÁºñËØëÊó∂ÊäΩË±°ÁöÑÊùÉË°°&quot;‰∏≠ÔºåÊàë‰ª¨Â∞ÜÁªßÁª≠Á†îÁ©∂Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏§ÁßçÂÆûÁé∞ÊñπÊ°à„ÄÇËôΩÁÑ∂Ëøô‰∏§ÁßçÂÆûÁé∞ÈÉΩÊ†πÊ§ç‰∫éÂÄºËØ≠‰πâÈ¢ÜÂüüÔºå‰ΩÜÁ¨¨‰∏ÄÁßçÂü∫‰∫éÈùôÊÄÅÂ§öÊÄÅÔºåËÄåÁ¨¨‰∫åÁßçÂü∫‰∫éÂä®ÊÄÅÂ§öÊÄÅ„ÄÇÂ∞ΩÁÆ°‰∏§ËÄÖÂÖ∑ÊúâÁõ∏ÂêåÁöÑËÆæËÆ°ÊÑèÂõæÂõ†ËÄåÈÉΩÂÆûÁé∞‰∫ÜË£ÖÈ•∞Âô®Ê®°ÂºèÔºå‰ΩÜÂÆÉ‰ª¨ÁöÑÂØπÊØîÂ∞ÜËÆ©ÊÇ®‰Ωì‰ºöÂà∞ËÆæËÆ°Ê®°ÂºèÂÆûÁé∞ÊñπÊ°àÂú®ËÆæËÆ°Á©∫Èó¥‰∏≠ÁöÑÂπøÈòîÂèØËÉΩÊÄß„ÄÇ</p>
<h3 id="ÂáÜÂàô35‰ΩøÁî®Ë£ÖÈ•∞Âô®Â±ÇÊ¨°ÂåñÂú∞Ê∑ªÂä†ÂÆöÂà∂">ÂáÜÂàô35Ôºö‰ΩøÁî®Ë£ÖÈ•∞Âô®Â±ÇÊ¨°ÂåñÂú∞Ê∑ªÂä†ÂÆöÂà∂
</h3><p>Ëá™‰ªé‰Ω†ÈÄöËøáÊèêÂá∫Âü∫‰∫éÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÁöÑËß£ÂÜ≥ÊñπÊ°àÔºàËøòËÆ∞Âæó‚ÄúÊåáÂçó19Ôºö‰ΩøÁî®Á≠ñÁï•ÈöîÁ¶ª‰∫ãÁâ©ÁöÑÂÆûÁé∞ÊñπÂºè‚ÄùÔºâËß£ÂÜ≥‰∫ÜÂõ¢Èòü2DÂõæÂΩ¢Â∑•ÂÖ∑ÁöÑËÆæËÆ°ÈóÆÈ¢òÂêéÔºå‰Ω†Âú®ÂÖ¨Âè∏ÂÜÖÁöÑËÆæËÆ°Ê®°Âºè‰∏ìÂÆ∂Â£∞Ë™âÂ∑≤ÁªèÂπø‰∏∫‰º†Êí≠„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂÖ∂‰ªñÂõ¢ÈòüÊù•Êâæ‰Ω†ÂØªÊ±ÇÊåáÂØºÂπ∂‰∏ç‰ª§‰∫∫ÊÑèÂ§ñ„ÄÇÊúâ‰∏ÄÂ§©ÔºåÂÖ¨Âè∏ÂïÜÂìÅÁÆ°ÁêÜÁ≥ªÁªü‰∏≠ÁöÑ‰∏§‰ΩçÂºÄÂèë‰∫∫ÂëòÊù•Âà∞‰Ω†ÁöÑÂäûÂÖ¨ÂÆ§ËØ∑Ê±ÇÂ∏ÆÂä©„ÄÇ</p>
<p><strong>‰Ω†ÁöÑÂêå‰∫ãÁöÑËÆæËÆ°ÈóÆÈ¢ò</strong></p>
<p>Ëøô‰∏§‰∏™ÂºÄÂèë‰∫∫ÂëòÊâÄÂú®ÁöÑÂõ¢ÈòüÂ§ÑÁêÜËÆ∏Â§ö‰∏çÂêåÁöÑÈ°πÁõÆÔºàËßÅÂõæ9-1Ôºâ„ÄÇÊâÄÊúâËøô‰∫õÈ°πÁõÆÈÉΩÊúâ‰∏Ä‰∏™ÂÖ±ÂêåÁÇπÔºöÂÆÉ‰ª¨ÈÉΩÊúâ‰∏Ä‰∏™‰ª∑Ê†ºÊ†áÁ≠æ„ÄÇ</p>
<p>‰∏∫‰∫ÜËØ¥Êòé‰ªñ‰ª¨ÁöÑÈóÆÈ¢òÔºå‰ªñ‰ª¨ÈÄâÊã©‰∫Ü‰∏§‰∏™Êù•Ëá™C++ÂïÜÂìÅÂïÜÂ∫óÁöÑ‰æãÂ≠êÔºö‰∏Ä‰∏™‰ª£Ë°®C++‰π¶Á±çÁöÑÁ±ªÔºà<code>CppBook</code>Á±ªÔºâÂíå‰∏Ä‰∏™C++‰ºöËÆÆÈó®Á•®ÁöÑÁ±ªÔºà<code>ConferenceTicket</code>Á±ªÔºâ„ÄÇ</p>
<p>ÂΩìÂºÄÂèë‰∫∫ÂëòÊèèËø∞‰ªñ‰ª¨ÁöÑËÆæËÆ°ÈóÆÈ¢òÊó∂Ôºå‰Ω†ÂºÄÂßãÁêÜËß£Âà∞‰ªñ‰ª¨ÁöÑÈóÆÈ¢òÂú®‰∫éÊúâÂ§öÁßç‰∏çÂêåÁöÑÊñπÂºèÊù•‰øÆÊîπ‰ª∑Ê†º„ÄÇÊúÄÂàùÔºå‰ªñ‰ª¨Âè™ÈúÄË¶ÅËÄÉËôëÁ®éË¥π„ÄÇÂõ†Ê≠§Ôºå<code>Item</code>Âü∫Á±ªÈÖçÂ§á‰∫Ü‰∏Ä‰∏™Âèó‰øùÊä§ÁöÑÊï∞ÊçÆÊàêÂëòÊù•Ë°®Á§∫Á®éÁéáÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Money.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Money</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl"><span class="n">Money</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">Money</span> <span class="n">money</span><span class="p">,</span> <span class="kt">double</span> <span class="n">factor</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="n">Money</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">Money</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Money</span> <span class="n">rhs</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Item.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Item</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">taxRate_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÊñπÊ≥ïÂú®‰∏ÄÊÆµÊó∂Èó¥ÂÜÖ‰ºº‰πéËøêË°åËâØÂ•ΩÔºåÁõ¥Âà∞Êúâ‰∏ÄÂ§©Ôºå‰ªñ‰ª¨Ë¢´Ë¶ÅÊ±ÇËøòË¶ÅËÄÉËôë‰∏çÂêåÁöÑÊäòÊâ£Áéá„ÄÇËøôÊòæÁÑ∂ÈúÄË¶ÅÂ§ßÈáèÁöÑÂ∑•‰ΩúÊù•ÈáçÊûÑÁé∞ÊúâÁöÑÂ§ßÈáèÁ±ªÔºåÂõ†‰∏∫ÊúâËÆ∏Â§ö‰∏çÂêåÁöÑÈ°πÁõÆ„ÄÇ</p>
<p>‰Ω†ÂèØ‰ª•ÂæàÂÆπÊòìÂú∞ÊÉ≥Ë±°ËøôÊòØÂøÖË¶ÅÁöÑÔºåÂõ†‰∏∫ÊâÄÊúâÊ¥æÁîüÁ±ªÈÉΩÂú®ËÆøÈóÆÂèó‰øùÊä§ÁöÑÊï∞ÊçÆÊàêÂëò„ÄÇ‚ÄúÊòØÁöÑÔºå‰Ω†Â∫îËØ•ÊÄªÊòØ‰∏∫ÂèòÂåñËÄåËÆæËÆ°‚Ä¶‚Ä¶‚Äù‰Ω†ÂøÉÈáåÊÉ≥ÈÅì„ÄÇ</p>
<p>‰ªñ‰ª¨ÊâøËÆ§Ôºå‰ªñ‰ª¨Âú®<code>Item</code>Âü∫Á±ª‰∏≠Â∞ÅË£ÖÁ®éÁéáÁöÑÊñπÂºèÂπ∂‰∏çÁêÜÊÉ≥„ÄÇÁÑ∂ËÄåÔºåÈöèÁùÄËøô‰∏ÄËÆ§ËØÜËÄåÊù•ÁöÑÊòØÁêÜËß£Âà∞ÔºåÂΩìÈÄöËøáÂü∫Á±ª‰∏≠ÁöÑÊï∞ÊçÆÊàêÂëòË°®Á§∫‰ª∑Ê†ºË∞ÉÊï¥Êó∂Ôºå‰ªª‰ΩïÊñ∞ÁöÑ‰ª∑Ê†ºË∞ÉÊï¥ÊñπÂºèÈÉΩ‰ºöÊòØ‰∏ÄÁßç‰æµÂÖ•ÊÄßÁöÑÊìç‰ΩúÔºåÂπ∂‰∏îÊÄªÊòØÁõ¥Êé•ÂΩ±Âìç<code>Item</code>Á±ª„ÄÇÂõ†Ê≠§Ôºå‰ªñ‰ª¨ÂºÄÂßãÊÄùËÄÉÂ¶Ç‰ΩïÈÅøÂÖçÊú™Êù•ËøôÁßçÂ§ßËßÑÊ®°ÁöÑÈáçÊûÑÔºåÂπ∂‰ΩøÊ∑ªÂä†Êñ∞ÁöÑË∞ÉÊï¥Âô®ÂèòÂæóÂÆπÊòì„ÄÇ‚ÄúËøôÂ∞±ÊòØÊ≠£Á°ÆÁöÑÊñπÂêëÔºÅ‚Äù‰Ω†ÂøÉÈáåÊÉ≥ÈÅì„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºå‰ªñ‰ª¨È¶ñÂÖàÊÉ≥Âà∞ÁöÑÊñπÊ≥ïÊòØÈÄöËøáÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÊù•ÂàÜÁ¶ª‰∏çÂêåÁßçÁ±ªÁöÑ‰ª∑Ê†ºË∞ÉÊï¥Âô®ÔºàËßÅÂõæ9-2Ôºâ„ÄÇ</p>
<p>‰ªñ‰ª¨Ê≤°ÊúâÂ∞ÜÁ®éÂíåÊäòÊâ£ÂÄºÂ∞ÅË£ÖÂú®Âü∫Á±ªÂÜÖÈÉ®ÔºåËÄåÊòØÊääËøô‰∫õË∞ÉÊï¥Âô®ÊèêÂèñÂà∞Ê¥æÁîüÁ±ª‰∏≠ÔºåËøô‰∫õÊ¥æÁîüÁ±ªÊâßË°åÊâÄÈúÄÁöÑ‰ª∑Ê†ºË∞ÉÊï¥„ÄÇ‚ÄúÂóØ‚Ä¶‚Äù‰Ω†ÂºÄÂßãÊÄùËÄÉ„ÄÇÊòæÁÑ∂‰Ω†ÁöÑË°®ÊÉÖÂ∑≤ÁªèÈÄèÈú≤Âá∫‰Ω†ÂØπËøô‰∏™ÊÉ≥Ê≥ï‰∏çÂ§™Êª°ÊÑèÔºåÊâÄ‰ª•‰ªñ‰ª¨ÂæàÂø´ÂëäËØâ‰Ω†‰ªñ‰ª¨Â∑≤ÁªèÊîæÂºÉ‰∫ÜËøô‰∏™ÊÉ≥Ê≥ï„ÄÇÊòæÁÑ∂Ôºå‰ªñ‰ª¨Ëá™Â∑±‰πüÊÑèËØÜÂà∞Ëøô‰ºöÂØºËá¥Êõ¥Â§öÁöÑÈóÆÈ¢òÔºöËøôÁßçËß£ÂÜ≥ÊñπÊ°à‰ºöËøÖÈÄüÂØºËá¥Á±ªÂûãÁàÜÁÇ∏ÔºåÂπ∂‰∏îÂè™ËÉΩÊèê‰æõËæÉÂ∑ÆÁöÑÂäüËÉΩÈáçÁî®„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÂ§ßÈáèÁöÑ‰ª£Á†Å‰ºöË¢´ÈáçÂ§çÔºåÂõ†‰∏∫ÂØπ‰∫éÊØè‰∏™ÁâπÂÆöÁöÑÈ°πÁõÆÔºåÁ®éÊî∂ÂíåÊäòÊâ£ÁöÑ‰ª£Á†ÅÂøÖÈ°ªË¢´Â§çÂà∂„ÄÇÊúÄÈ∫ªÁÉ¶ÁöÑÊòØÂ§ÑÁêÜÂêåÊó∂ÂèóÁ®éÊî∂ÂíåÊüêÁßçÊäòÊâ£ÂΩ±ÂìçÁöÑÈ°πÁõÆÔºö‰ªñ‰ª¨Êó¢‰∏çÂñúÊ¨¢Êèê‰æõ‰∏§‰∏™ÂäüËÉΩÁöÑÁ±ªÔºå‰πü‰∏çÊÉ≥Âú®ÁªßÊâøÂ±ÇÊ¨°‰∏≠ÂºïÂÖ•Âè¶‰∏ÄÂ±ÇÔºàËßÅÂõæ9-3Ôºâ„ÄÇ</p>
<p>ÊòæÁÑ∂ÔºåËÆ©‰ªñ‰ª¨ÊÑüÂà∞ÊÉäËÆ∂ÁöÑÊòØÔºå‰ªñ‰ª¨Êó†Ê≥ïÈÄöËøáÁõ¥Êé•ÁªßÊâøÂú®Âü∫Á±ªÊàñÊ¥æÁîüÁ±ª‰∏≠Â§ÑÁêÜ‰ª∑Ê†ºË∞ÉÊï¥Âô®„ÄÇÁÑ∂ËÄåÔºåÂú®‰Ω†ÊúâÊú∫‰ºöÂØπÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÂèëË°®‰ªª‰ΩïËØÑËÆ∫‰πãÂâçÔºå‰ªñ‰ª¨Ëß£ÈáäËØ¥‰ªñ‰ª¨ÊúÄËøëÂê¨ËØ¥‰∫Ü‰Ω†ÁöÑÁ≠ñÁï•Ëß£ÂÜ≥ÊñπÊ°à„ÄÇËøôÊúÄÁªàÁªô‰∫Ü‰ªñ‰ª¨‰∏Ä‰∏™Ê≠£Á°ÆÈáçÊûÑÈóÆÈ¢òÁöÑÊÉ≥Ê≥ïÔºàËßÅÂõæ9-4Ôºâ„ÄÇ</p>
<p>ÈÄöËøáÂ∞Ü‰ª∑Ê†ºË∞ÉÊï¥Âô®ÊèêÂèñÂà∞‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠ÔºåÂπ∂ÈÄöËøáÂú®ÊûÑÈÄ†Êó∂‰ΩøÁî®<code>PriceStrategy</code>ÈÖçÁΩÆ<code>Item</code>Ôºå‰ªñ‰ª¨Áªà‰∫éÊâæÂà∞‰∫Ü‰∏ÄÁßçÈùû‰æµÂÖ•ÊÄßÂú∞Ê∑ªÂä†Êñ∞‰ª∑Ê†ºË∞ÉÊï¥Âô®ÁöÑÂ∑•‰ΩúÊñπÊ°àÔºåËøôÂ∞Ü‰∏∫‰ªñ‰ª¨ËäÇÁúÅÂ§ßÈáèÁöÑÈáçÊûÑÂ∑•‰Ωú„ÄÇ‚ÄúÂ•ΩÂêßÔºåËøôÂ∞±ÊòØÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÂíåÊîØÊåÅÁªÑÂêàËÄåÈùûÁªßÊâøÁöÑÂ•ΩÂ§Ñ„ÄÇ‚Äù‰Ω†ÂøÉÈáåÊÉ≥ÈÅì„ÄÇÁÑ∂Âêé‰Ω†Â§ßÂ£∞ÈóÆÈÅìÔºö‚ÄúËøôÂ§™Ê£í‰∫ÜÔºåÊàëÁúüÁöÑ‰∏∫‰Ω†È´òÂÖ¥„ÄÇÁé∞Âú®‰∏ÄÂàáÈÉΩÁúãËµ∑Êù•ÂæàÂ•ΩÔºå‰Ω†‰ª¨Ëá™Â∑±Ëß£ÂÜ≥‰∫ÜËøô‰∏™ÈóÆÈ¢òÔºÅÈÇ£‰Ω†‰ª¨‰∏∫‰ªÄ‰πàËøòÊù•ÊâæÊàëÔºü‚Äù</p>
<p>‰ªñ‰ª¨ÂëäËØâ‰Ω†Ôºå‰Ω†ÁöÑÁ≠ñÁï•Ëß£ÂÜ≥ÊñπÊ°àÊòØËøÑ‰ªä‰∏∫Ê≠¢‰ªñ‰ª¨ËÉΩÊâæÂà∞ÁöÑÊúÄ‰Ω≥ÊñπÊ≥ïÔºàÂåÖÂê´ÊÑüÊøÄÁöÑË°®ÊÉÖÔºâ„ÄÇÁÑ∂ËÄåÔºå‰ªñ‰ª¨ÊâøËÆ§‰ªñ‰ª¨Âπ∂‰∏çÊòØÂÆåÂÖ®Êª°ÊÑèËøôÁßçÊñπÊ≥ï„ÄÇ‰ªé‰ªñ‰ª¨ÁöÑËßíÂ∫¶Êù•ÁúãÔºå‰ªçÁÑ∂Êúâ‰∏§‰∏™ÈóÆÈ¢òÂ≠òÂú®ÔºåÂΩìÁÑ∂Ôºå‰ªñ‰ª¨Â∏åÊúõ‰Ω†ËÉΩÊúâ‰∏Ä‰∏™Ëß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢òÁöÑÊÉ≥Ê≥ï„ÄÇÁ¨¨‰∏Ä‰∏™ÈóÆÈ¢òÊòØÊØè‰∏™<code>Item</code>ÂÆû‰æãÈÉΩÈúÄË¶Å‰∏Ä‰∏™Á≠ñÁï•Á±ªÔºåÂç≥‰ΩøÊ≤°Êúâ‰ªª‰Ωï‰ª∑Ê†ºË∞ÉÊï¥Âô®Â∫îÁî®„ÄÇËôΩÁÑ∂‰ªñ‰ª¨ÂêåÊÑèÂèØ‰ª•ÈÄöËøáÊüêÁßçÁ©∫ÂØπË±°Êù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºå‰ΩÜ‰ªñ‰ª¨ËßâÂæóÂ∫îËØ•Êúâ‰∏Ä‰∏™Êõ¥ÁÆÄÂçïÁöÑËß£ÂÜ≥ÊñπÊ°àÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PriceStrategy</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">PriceStrategy</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">Money</span> <span class="nf">update</span><span class="p">(</span><span class="n">Money</span> <span class="n">price</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">NullPriceStrategy</span> <span class="o">:</span> <span class="k">public</span> <span class="n">PriceStrategy</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="n">update</span><span class="p">(</span><span class="n">Money</span> <span class="n">price</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">price</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Á¨¨‰∫å‰∏™ÈóÆÈ¢ò‰ºº‰πéÊõ¥ÈöæËß£ÂÜ≥„ÄÇÊòæÁÑ∂Ôºå‰ªñ‰ª¨ÊúâÂÖ¥Ë∂£ÁªìÂêà‰∏çÂêåÁöÑË∞ÉÊï¥Âô®Ôºà‰æãÂ¶ÇÔºåÊäòÊâ£ÂíåÁ®éÊî∂ÁªìÂêàÊàêÊäòÊâ£‰∏éÁ®éÊî∂Ôºâ„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºå‰ªñ‰ª¨Âú®ÂΩìÂâçÂÆûÁé∞‰∏≠ÈÅáÂà∞‰∫Ü‰∏Ä‰∫õ‰ª£Á†ÅÈáçÂ§ç„ÄÇ‰æãÂ¶ÇÔºå<code>Tax</code>Á±ªÂíå<code>DiscountAndTax</code>Á±ªÈÉΩÂåÖÂê´‰∫Ü‰∏éÁ®éÊî∂Áõ∏ÂÖ≥ÁöÑËÆ°ÁÆó„ÄÇËôΩÁÑ∂ÁõÆÂâçÂè™ÊúâËøô‰∏§‰∏™Ë∞ÉÊï¥Âô®ÔºåÊúâÂêàÁêÜÁöÑËß£ÂÜ≥ÊñπÊ°àÂèØ‰ª•Â∫îÂØπÈáçÂ§çÈóÆÈ¢òÔºå‰ΩÜ‰ªñ‰ª¨È¢ÑËÆ°Âú®Ê∑ªÂä†Êõ¥Â§öË∞ÉÊï¥Âô®Âíå‰ªªÊÑèÁªÑÂêàÊó∂‰ºöÂá∫Áé∞ÈóÆÈ¢ò„ÄÇÂõ†Ê≠§Ôºå‰ªñ‰ª¨ÊÉ≥Áü•ÈÅìÊòØÂê¶ÊúâÂè¶‰∏ÄÁßçÊõ¥Â•ΩÁöÑËß£ÂÜ≥ÊñπÊ°àÊù•Â§ÑÁêÜ‰∏çÂêåÁßçÁ±ªÁöÑ‰ª∑Ê†ºË∞ÉÊï¥Âô®„ÄÇ</p>
<p>ËøôÁ°ÆÂÆûÊòØ‰∏Ä‰∏™ÊúâË∂£ÁöÑÈóÆÈ¢òÔºå‰Ω†ÂæàÈ´òÂÖ¥Ëä±Êó∂Èó¥Â∏ÆÂä©‰ªñ‰ª¨„ÄÇ‰ªñ‰ª¨ÂÆåÂÖ®Ê≠£Á°ÆÔºöÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂπ∂‰∏çÊòØËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÁöÑÊ≠£Á°ÆÊñπÊ≥ï„ÄÇÂ∞ΩÁÆ°Á≠ñÁï•Ê®°ÂºèÊòØÂéªÈô§ÂØπÂáΩÊï∞ÂÆåÊï¥ÂÆûÁé∞ÁªÜËäÇ‰æùËµñÂπ∂‰ºòÈõÖÂ§ÑÁêÜ‰∏çÂêåÂÆûÁé∞ÁöÑÂ•ΩÊñπÊ≥ïÔºå‰ΩÜÂÆÉÂπ∂‰∏çËÉΩËΩªÊùæÂú∞ÁªÑÂêàÂíåÈáçÁî®‰∏çÂêåÁöÑÂÆûÁé∞„ÄÇÂ∞ùËØïËøôÊ†∑ÂÅö‰ºöËøÖÈÄüÂØºËá¥‰∏çÁêÜÊÉ≥ÁöÑÂ§çÊùÇÁ≠ñÁï•ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑ„ÄÇ</p>
<p>ÂØπ‰ªñ‰ª¨ÁöÑÈóÆÈ¢òÊù•ËØ¥Ôºå‰ºº‰πéÈúÄË¶Å‰∏ÄÁßçÊõ¥Á±ª‰ºº‰∫éÂàÜÂ±ÇÂΩ¢ÂºèÁöÑÁ≠ñÁï•Ôºå‰∏ÄÁßçËß£ËÄ¶‰∏çÂêå‰ª∑Ê†ºË∞ÉÊï¥Âô®‰ΩÜ‰πüËÉΩÁÅµÊ¥ªÁªÑÂêàÂÆÉ‰ª¨ÁöÑÂΩ¢Âºè„ÄÇÂõ†Ê≠§ÔºåÊàêÂäüÁöÑÂÖ≥ÈîÆÂú®‰∫é‰∏ÄËá¥ÁöÑÂ∫îÁî®ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÂéüÂàôÔºö‰ªª‰ΩïÁ±ª‰ºº<code>DiscountAndTax</code>Á±ªÁöÑÊâãÂä®ÁºñÁ†ÅÁªÑÂêàÈÉΩÊòØ‰∏çÂèØÂèñÁöÑ„ÄÇÊ≠§Â§ñÔºåËß£ÂÜ≥ÊñπÊ°àÂ∫îËØ•ÊòØÈùû‰æµÂÖ•ÊÄßÁöÑÔºå‰ª•‰æø‰ªñ‰ª¨ËÉΩÂ§üÈöèÊó∂ÂÆûÁé∞Êñ∞ÊÉ≥Ê≥ïËÄåÊó†ÈúÄ‰øÆÊîπÁé∞Êúâ‰ª£Á†Å„ÄÇÊúÄÂêéÔºå‰∏çÈúÄË¶ÅÈÄöËøáÊüê‰∫õ‰∫∫Â∑•ÁöÑÁ©∫ÂØπË±°Êù•Â§ÑÁêÜÈªòËÆ§ÊÉÖÂÜµ„ÄÇÁõ∏ÂèçÔºåÂü∫‰∫éÁªÑÂêàËÄå‰∏çÊòØÁªßÊâøÊù•ÊûÑÂª∫ÔºåÂπ∂‰ª•ÂåÖË£ÖÂô®ÁöÑÂΩ¢ÂºèÂÆûÁé∞‰ª∑Ê†ºË∞ÉÊï¥Âô®Â∞ÜÊòØÊõ¥ÂêàÁêÜÁöÑÈÄâÊã©„ÄÇÊúâ‰∫ÜËøô‰∏™ËÆ§ËØÜÔºå‰Ω†ÂºÄÂßãÂæÆÁ¨ë„ÄÇÊòØÁöÑÔºåÊúâ‰∏ÄÁßçÊÅ∞Â•ΩÂêàÈÄÇÁöÑËÆæËÆ°Ê®°ÂºèÂèØ‰ª•Êª°Ë∂≥Ëøô‰∏ÄÈúÄÊ±ÇÔºö‰Ω†ÁöÑ‰∏§‰ΩçÂÆ¢‰∫∫ÈúÄË¶ÅÁöÑÊòØË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÁöÑÂÆûÁé∞„ÄÇ</p>
<p><strong>Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèËß£Èáä</strong></p>
<p>Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÂêåÊ†∑Ê∫êËá™GoFÔºàËÆæËÆ°Ê®°ÂºèÔºöÂèØÂ§çÁî®Èù¢ÂêëÂØπË±°ËΩØ‰ª∂ÁöÑÂü∫Á°ÄÔºâ‰∏Ä‰π¶„ÄÇÂÖ∂‰∏ªË¶ÅÂÖ≥Ê≥®ÁÇπÊòØÈÄöËøáÁªÑÂêàÁÅµÊ¥ªÂú∞ÁªìÂêà‰∏çÂêåÁöÑÂäüËÉΩÔºö</p>
<p><strong>Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè</strong></p>
<p><strong>ÊÑèÂõæ</strong>Ôºö‚ÄúÂä®ÊÄÅÂú∞ÁªôÂØπË±°ÈôÑÂä†È¢ùÂ§ñÁöÑËÅåË¥£„ÄÇË£ÖÈ•∞Âô®Êèê‰æõ‰∫Ü‰∏ÄÁßçÊØîÁªßÊâøÊõ¥ÁÅµÊ¥ªÁöÑÊâ©Â±ïÂäüËÉΩÁöÑÊñπÂºè„ÄÇ‚Äù</p>
<p>Âõæ9-5Â±ïÁ§∫‰∫ÜÁªôÂÆö<code>Item</code>ÈóÆÈ¢òÁöÑUMLÂõæ„ÄÇ</p>
<p>Â¶ÇÂâçÊâÄËø∞Ôºå<code>Item</code>Âü∫Á±ª‰ª£Ë°®ÊâÄÊúâÂèØËÉΩÈ°πÁõÆÁöÑÊäΩË±°ÔºåÂè¶‰∏ÄÊñπÈù¢ÔºåÊ¥æÁîüÁöÑ<code>CppBook</code>Á±ª‰Ωú‰∏∫<code>Item</code>‰∏çÂêåÂÆûÁé∞ÁöÑ‰ª£Ë°®„ÄÇ</p>
<p>Âú®Ëøô‰∏™Â±ÇÊ¨°ÁªìÊûÑ‰∏≠ÁöÑÈóÆÈ¢òÊòØÈöæ‰ª•ÂêëÁé∞ÊúâÁöÑ<code>price()</code>ÂáΩÊï∞Ê∑ªÂä†Êñ∞ÁöÑË∞ÉÊï¥Âô®„ÄÇ</p>
<p>Âú®Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè‰∏≠ÔºåËøôÁßçÊñ∞‚ÄúËÅåË¥£‚ÄùÁöÑÊ∑ªÂä†Ë¢´ËØÜÂà´‰∏∫‰∏Ä‰∏™ÂèòÂåñÁÇπÔºåÂπ∂‰ª•<code>DecoratedItem</code>Á±ªÁöÑÂΩ¢ÂºèÊèêÂèñÂá∫Êù•„ÄÇËøô‰∏™Á±ªÊòØ‰∏Ä‰∏™Áã¨Á´ãÁöÑ„ÄÅÁâπÊÆäÁöÑ<code>Item</code>Âü∫Á±ªÂÆûÁé∞ÔºåË°®Á§∫‰ªª‰ΩïÁªôÂÆöÈ°πÁõÆÂ¢ûÂä†ÁöÑË¥£‰ªª„ÄÇ</p>
<p>‰∏ÄÊñπÈù¢Ôºå<code>DecoratedItem</code>‰ªé<code>Item</code>Ê¥æÁîüÔºåÂõ†Ê≠§ÂøÖÈ°ªÈÅµÂÆà<code>Item</code>ÊäΩË±°ÁöÑÊâÄÊúâÈ¢ÑÊúüË°å‰∏∫ÔºàÂèÇËßÅ‚ÄúÊåáÂçó6ÔºöÈÅµÂæ™ÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫‚ÄùÔºâÂè¶‰∏ÄÊñπÈù¢ÔºåÂÆÉËøòÂåÖÂê´‰∏Ä‰∏™<code>Item</code>ÔºàÈÄöËøáÁªÑÂêàÊàñËÅöÂêàÔºâ„ÄÇ</p>
<p>Âõ†Ê≠§Ôºå<code>DecoratedItem</code>‰Ωú‰∏∫‰∏Ä‰∏™ÂåÖË£ÖÂô®Âõ¥ÁªïÊØè‰∏™È°πÁõÆÔºåÂèØËÉΩËá™Ë∫´‰πüËÉΩÊâ©Â±ïÂäüËÉΩ„ÄÇÊ≠£Âõ†‰∏∫Â¶ÇÊ≠§ÔºåÂÆÉ‰∏∫Â±ÇÁ∫ßÂ∫îÁî®Ë∞ÉÊï¥Âô®Êèê‰æõ‰∫ÜÂü∫Á°Ä„ÄÇ‰∏§‰∏™ÂèØËÉΩÁöÑË∞ÉÊï¥Âô®Áî±<code>Discounted</code>Á±ªË°®Á§∫ÔºåÂÆÉ‰ª£Ë°®ÁâπÂÆöÈ°πÁõÆÁöÑÊäòÊâ£Ôºå‰ª•Âèä<code>Taxed</code>Á±ªÔºåÂÆÉ‰ª£Ë°®ÊüêÁßçÁ®éÊî∂„ÄÇ</p>
<p>ÈÄöËøáÂºïÂÖ•<code>DecoratedItem</code>Á±ªÂπ∂ÂàÜÁ¶ªÈúÄË¶ÅÊîπÂèòÁöÑÈÉ®ÂàÜÔºå‰Ω†ÈÅµÂæ™‰∫ÜÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâ„ÄÇÈÄöËøáÂàÜÁ¶ªËøô‰∏ÄÂÖ≥Ê≥®ÁÇπÔºå‰ªéËÄåÂÖÅËÆ∏ËΩªÊùæÊ∑ªÂä†Êñ∞ÁöÑ‰ª∑Ê†ºË∞ÉÊï¥Âô®Ôºå‰Ω†‰πüÈÅµÂæ™‰∫ÜÂºÄÈó≠ÂéüÂàôÔºàOCPÔºâ„ÄÇÁî±‰∫é<code>DecoratedItem</code>Á±ªÁöÑÂ±ÇÁ∫ßÈÄíÂΩíÊÄßË¥®Ôºå‰ª•ÂèäËé∑ÂæóÁöÑÊòì‰∫éÈáçÁî®ÂíåÁªÑÂêà‰∏çÂêåË∞ÉÊï¥Âô®ÁöÑËÉΩÂäõÔºå‰Ω†‰πüÈÅµÂæ™‰∫Ü‰∏çË¶ÅÈáçÂ§çËá™Â∑±ÔºàDRYÔºâÂéüÂàô„ÄÇÊúÄÂêé‰ΩÜÂπ∂ÈùûÊúÄ‰∏çÈáçË¶ÅÁöÑÊòØÔºåÁî±‰∫éË£ÖÈ•∞Âô®ÁöÑÂåÖË£ÖÂô®ÊñπÊ≥ïÔºå‰∏çÈúÄË¶Å‰ª•Á©∫ÂØπË±°ÁöÑÂΩ¢ÂºèÂÆö‰πâ‰ªª‰ΩïÈªòËÆ§Ë°å‰∏∫„ÄÇ‰ªª‰Ωï‰∏çÈúÄË¶ÅË∞ÉÊï¥Âô®ÁöÑ<code>Item</code>ÈÉΩÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®„ÄÇ</p>
<p>Âõæ9-6ËØ¥Êòé‰∫ÜË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÁöÑ‰æùËµñÂÖ≥Á≥ªÂõæ„ÄÇÂú®ËøôÂº†Âõæ‰∏≠Ôºå<code>Item</code>Á±ª‰Ωç‰∫éÊû∂ÊûÑÁöÑÊúÄÈ´òÂ±Ç„ÄÇÊâÄÊúâÂÖ∂‰ªñÁ±ªÈÉΩ‰æùËµñ‰∫éÂÆÉÔºåÂåÖÊã¨‰Ωç‰∫é‰∏ã‰∏ÄÂ±ÇÁöÑ<code>DecoratedItem</code>Á±ª„ÄÇÂΩìÁÑ∂ÔºåËøô‰∏çÊòØÂøÖÈ°ªÁöÑÔºöÂ¶ÇÊûú<code>Item</code>Âíå<code>DecoratedItem</code>Âú®Âêå‰∏ÄÊû∂ÊûÑÂ±ÇÂºïÂÖ•‰πüÊòØÂÆåÂÖ®ÂèØ‰ª•Êé•ÂèóÁöÑ„ÄÇÁÑ∂ËÄåÔºåËøô‰∏™‰æãÂ≠êÂ±ïÁ§∫‰∫ÜÊÄªÊòØÂèØ‰ª•Âú®‰ªª‰ΩïÊó∂ÂÄô„ÄÅ‰ªª‰ΩïÂú∞ÊñπÂºïÂÖ•‰∏Ä‰∏™Êñ∞ÁöÑË£ÖÈ•∞Âô®ËÄåÊó†ÈúÄ‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÁöÑÂèØËÉΩÊÄß„ÄÇÂÖ∑‰ΩìÁöÑ<code>Item</code>Á±ªÂûãÂÆûÁé∞Âú®Êû∂ÊûÑÁöÑÊúÄ‰ΩéÂ±Ç„ÄÇËØ∑Ê≥®ÊÑèÔºåËøô‰∫õÈ°πÁõÆ‰πãÈó¥Ê≤°Êúâ‰æùËµñÂÖ≥Á≥ªÔºöÊâÄÊúâÁöÑÈ°πÁõÆÔºåÂåÖÊã¨ÂÉè<code>Discounted</code>ËøôÊ†∑ÁöÑË∞ÉÊï¥Âô®ÔºåÂèØ‰ª•Áî±‰ªª‰Ωï‰∫∫ÈöèÊó∂Áã¨Á´ãÂºïÂÖ•ÔºåÂπ∂‰∏îÁî±‰∫éË£ÖÈ•∞Âô®ÁöÑÁªìÊûÑÔºåËÉΩÂ§üÁÅµÊ¥ª‰∏î‰ªªÊÑèÂú∞ÁªÑÂêà„ÄÇ</p>
<p><strong>Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÁöÑÁªèÂÖ∏ÂÆûÁé∞</strong></p>
<p>ËÆ©Êàë‰ª¨ÈÄöËøáÁªôÂÆöÁöÑ<code>Item</code>Á§∫‰æãÔºåÊù•Áúã‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ„ÄÅGoFÈ£éÊ†ºÁöÑË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÂÆûÁé∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Item.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Item</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Item</code>Âü∫Á±ª‰ª£Ë°®ÊâÄÊúâÂèØËÉΩÈ°πÁõÆÁöÑÊäΩË±°„ÄÇÂîØ‰∏ÄÁöÑË¶ÅÊ±ÇÊòØÁî±Á∫ØËôöÂáΩÊï∞<code>price()</code>ÂÆö‰πâÔºåËØ•ÂáΩÊï∞ÂèØÁî®‰∫éÊü•ËØ¢ÁªôÂÆöÈ°πÁõÆÁöÑ‰ª∑Ê†º„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;DecoratedItem.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Item.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdexcept&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DecoratedItem</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">DecoratedItem</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">item_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">item</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">item_</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">invalid_argument</span><span class="p">(</span><span class="s">&#34;Invalid item&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Item</span><span class="o">&amp;</span> <span class="n">item</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="n">item_</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">Item</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">item</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="n">item_</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">item_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>DecoratedItem</code>Á±ª‰ªé<code>Item</code>Á±ªÊ¥æÁîüÔºå‰ΩÜ‰πüÂåÖÂê´‰∏Ä‰∏™<code>item_</code>ÊàêÂëòÔºàÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞ÊåáÂÆöÔºâ„ÄÇËøô‰∏™<code>item_</code>ÊòØ‰∏Ä‰∏™ÊåáÂêëÂè¶‰∏Ä‰∏™<code>Item</code>ÁöÑ<code>std::unique_ptr</code>ÔºåÂπ∂‰∏î‰∏çËÉΩ‰∏∫<code>nullptr</code>„ÄÇÊ≥®ÊÑèÔºåËøô‰∏™<code>DecoratedItem</code>Á±ª‰ªçÁÑ∂ÊòØÊäΩË±°ÁöÑÔºåÂõ†‰∏∫Á∫ØËôöÂáΩÊï∞<code>price()</code>Â∞öÊú™ÂÆö‰πâ„ÄÇ<code>DecoratedItem</code>Âè™Êèê‰æõ‰∫ÜÂ≠òÂÇ®ÂíåËÆøÈóÆ<code>Item</code>ÁöÑÂü∫Êú¨ÂäüËÉΩ„ÄÇ</p>
<p><strong>ÂÖ∑‰ΩìÈ°πÁõÆÁ±ªÂÆûÁé∞</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;CppBook.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Item.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CppBook</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">CppBook</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">title</span><span class="p">,</span> <span class="n">Money</span> <span class="n">price</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">title_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">title</span><span class="p">)),</span> <span class="n">price_</span><span class="p">(</span><span class="n">price</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">title</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">title_</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">price_</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">title_</span><span class="p">{};</span>
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="n">price_</span><span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;ConferenceTicket.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Item.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ConferenceTicket</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">ConferenceTicket</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">,</span> <span class="n">Money</span> <span class="n">price</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">name_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">name</span><span class="p">)),</span> <span class="n">price_</span><span class="p">(</span><span class="n">price</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">name_</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">price_</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name_</span><span class="p">{};</span>
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="n">price_</span><span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>CppBook</code>Âíå<code>ConferenceTicket</code>Á±ªÊòØÂÖ∑‰ΩìÁöÑ<code>Item</code>ÂÆûÁé∞„ÄÇËôΩÁÑ∂C++‰π¶Á±çÁî±‰π¶ÂêçË°®Á§∫ÔºåËÄåC++‰ºöËÆÆÁî±‰ºöËÆÆÂêçÁß∞Ë°®Á§∫Ôºå‰ΩÜÊúÄÈáçË¶ÅÁöÑÊòØÔºåËøô‰∏§‰∏™Á±ªÈÉΩÈáçÂÜô‰∫Ü<code>price()</code>ÂáΩÊï∞ÔºåËøîÂõûÊåáÂÆöÁöÑ‰ª∑Ê†º<code>price_</code>„ÄÇ</p>
<p><strong>‰ª∑Ê†ºË∞ÉÊï¥Âô®Á±ªÂÆûÁé∞</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Discounted.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;DecoratedItem.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Discounted</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DecoratedItem</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Discounted</span><span class="p">(</span><span class="kt">double</span> <span class="n">discount</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">DecoratedItem</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">item</span><span class="p">)),</span> <span class="n">factor_</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">discount</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">isfinite</span><span class="p">(</span><span class="n">discount</span><span class="p">)</span> <span class="o">||</span> <span class="n">discount</span> <span class="o">&lt;</span> <span class="mf">0.0</span> <span class="o">||</span> <span class="n">discount</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">invalid_argument</span><span class="p">(</span><span class="s">&#34;Invalid discount&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">item</span><span class="p">().</span><span class="n">price</span><span class="p">()</span> <span class="o">*</span> <span class="n">factor_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">factor_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Taxed.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;DecoratedItem.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Taxed</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DecoratedItem</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Taxed</span><span class="p">(</span><span class="kt">double</span> <span class="n">taxRate</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">DecoratedItem</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">item</span><span class="p">)),</span> <span class="n">factor_</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">taxRate</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">isfinite</span><span class="p">(</span><span class="n">taxRate</span><span class="p">)</span> <span class="o">||</span> <span class="n">taxRate</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">invalid_argument</span><span class="p">(</span><span class="s">&#34;Invalid tax&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">item</span><span class="p">().</span><span class="n">price</span><span class="p">()</span> <span class="o">*</span> <span class="n">factor_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">factor_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Discounted</code>Âíå<code>Taxed</code>Á±ªÂÆûÁé∞‰∫Ü‰ª∑Ê†ºË∞ÉÊï¥Âô®„ÄÇ<code>Discounted</code>Á±ªÊé•Âèó‰∏Ä‰∏™ÊäòÊâ£ÂÄºÔºåÂπ∂ËÆ°ÁÆó‰∏Ä‰∏™ÊäòÊâ£Âõ†Â≠ê<code>factor_</code>ÔºåËØ•Âõ†Â≠êÂú®<code>price()</code>ÂáΩÊï∞‰∏≠Áî®‰∫é‰øÆÊîπÁªôÂÆöÈ°πÁõÆÁöÑÊúÄÁªà‰ª∑Ê†º„ÄÇÂêåÊ†∑Âú∞Ôºå<code>Taxed</code>Á±ªÊé•Âèó‰∏Ä‰∏™Á®éÁéáÂÄºÔºåÂπ∂ËÆ°ÁÆó‰∏Ä‰∏™Á®éÂõ†Â≠ê<code>factor_</code>ÔºåËØ•Âõ†Â≠ê‰πüÁî®‰∫é‰øÆÊîπ‰ª∑Ê†º„ÄÇ</p>
<p><strong>‰∏ªÂáΩÊï∞Á§∫‰æã</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ConferenceTicket.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;CppBook.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Discounted.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Taxed.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 7% tax: 19*1.07 = 20.33
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">item1</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Taxed</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">0.07</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">CppBook</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;Effective C++&#34;</span><span class="p">,</span> <span class="mf">19.0</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 20% discount, 19% tax: (999*0.8)*1.19 = 951.05
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">item2</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Taxed</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">0.19</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Discounted</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ConferenceTicket</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;CppCon&#34;</span><span class="p">,</span> <span class="mf">999.0</span><span class="p">))));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="k">const</span> <span class="n">totalPrice1</span> <span class="o">=</span> <span class="n">item1</span><span class="o">-&gt;</span><span class="n">price</span><span class="p">();</span>  <span class="c1">// ÁªìÊûú‰∏∫ 20.33
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Money</span> <span class="k">const</span> <span class="n">totalPrice2</span> <span class="o">=</span> <span class="n">item2</span><span class="o">-&gt;</span><span class="n">price</span><span class="p">();</span>  <span class="c1">// ÁªìÊûú‰∏∫ 951.05
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™‰∏ªÂáΩÊï∞Á§∫‰æã‰∏≠ÔºåÊàë‰ª¨ÂàõÂª∫‰∫Ü‰∏§‰∏™ÂÖ∑‰ΩìÈ°πÁõÆÔºö</p>
<ol>
<li><strong>C++‰π¶Á±ç</strong>ÔºöÂÅáËÆæËøôÊú¨‰π¶ÈúÄË¶ÅÁº¥Á∫≥7%ÁöÑÁ®éË¥πÔºåÂõ†Ê≠§Êàë‰ª¨‰ΩøÁî®<code>Taxed</code>Ë£ÖÈ•∞Âô®ÂåÖË£πÂÆÉ„ÄÇÊúÄÁªàÁöÑ<code>item1</code>‰ª£Ë°®‰∏Ä‰∏™Âê´Á®éÁöÑC++‰π¶Á±ç„ÄÇ</li>
<li><strong>C++‰ºöËÆÆÈó®Á•®</strong>ÔºöÂÅáËÆæÊàë‰ª¨Ëé∑Âæó‰∫ÜÊó©ÊúüÈ∏üÁ•®Ôºå‰∫´Êúâ20%ÁöÑÊäòÊâ£„ÄÇËøô‰∏™ÊäòÊâ£ÈÄöËøá<code>Discounted</code>Á±ªÂ∫îÁî®Âà∞<code>ConferenceTicket</code>ÂÆû‰æã‰∏ä„ÄÇÊ≠§Â§ñÔºåÈó®Á•®ËøòÈúÄË¶ÅÁº¥Á∫≥19%ÁöÑÁ®éË¥πÔºåËøôÈÄöËøá<code>Taxed</code>Ë£ÖÈ•∞Âô®ÂÜçÊ¨°Â∫îÁî®„ÄÇÊúÄÁªàÁöÑ<code>item2</code>‰ª£Ë°®‰∏Ä‰∏™ÊâìÊäòÂπ∂Âê´Á®éÁöÑC++‰ºöËÆÆÈó®Á•®„ÄÇ</li>
</ol>
<p>ÈÄöËøáËøôÁßçÊñπÂºèÔºåÊàë‰ª¨ÂèØ‰ª•ËΩªÊùæÂú∞ÁªÑÂêà‰∏çÂêåÁöÑ‰ª∑Ê†ºË∞ÉÊï¥Âô®ÔºåËÄåÊó†ÈúÄ‰øÆÊîπÂéüÂßãÈ°πÁõÆÁ±ªÁöÑ‰ª£Á†Å„ÄÇË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè‰∏ç‰ªÖÊèêÈ´ò‰∫Ü‰ª£Á†ÅÁöÑÁÅµÊ¥ªÊÄßÔºåËøòÂáèÂ∞ë‰∫ÜÁª¥Êä§ÁöÑÂ∑•‰ΩúÈáè„ÄÇËøôÁßçÊñπÊ≥ï‰ΩøÂæóÁ≥ªÁªüÂèØ‰ª•ÁÅµÊ¥ªÂ∫îÂØπÊú™Êù•ÁöÑÈúÄÊ±ÇÂèòÂåñÔºåËÄå‰∏çÈúÄË¶ÅËøõË°åÂ§ßËßÑÊ®°ÁöÑÈáçÊûÑ„ÄÇ</p>
<p><strong>Á¨¨‰∫å‰∏™Ë£ÖÈ•∞Âô®Á§∫‰æã</strong></p>
<p>Âè¶‰∏Ä‰∏™Â±ïÁ§∫Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè‰ºòÂäøÁöÑ‰ª§‰∫∫Âç∞Ë±°Ê∑±ÂàªÁöÑ‰æãÂ≠êÂèØ‰ª•Âú®C++17ÂØπSTLÂàÜÈÖçÂô®ÁöÑÈáçÂ∑•‰Ωú‰∏≠ÊâæÂà∞„ÄÇÁî±‰∫éÂàÜÈÖçÂô®ÁöÑÂÆûÁé∞Âü∫‰∫éË£ÖÈ•∞Âô®ÔºåÂõ†Ê≠§ÂèØ‰ª•ÂàõÂª∫‰ªªÊÑèÂ§çÊùÇÁöÑÂàÜÈÖçÂô®Â±ÇÊ¨°ÁªìÊûÑÔºå‰ª•Êª°Ë∂≥ÊúÄÁâπÊÆäÁöÑÂÜÖÂ≠òÈúÄÊ±Ç„ÄÇ‰æãÂ¶ÇÔºåËÄÉËôë‰ª•‰∏ã‰ΩøÁî®<code>std::pmr::monotonic_buffer_resource</code>ÁöÑÁ§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstddef&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory_resource&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="p">,</span> <span class="mi">1000</span><span class="o">&gt;</span> <span class="n">raw</span><span class="p">;</span>  <span class="c1">// Ê≥®ÊÑèÔºöÊú™ÂàùÂßãÂåñÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">monotonic_buffer_resource</span> <span class="n">buffer</span><span class="p">{</span><span class="n">raw</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="n">raw</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">null_memory_resource</span><span class="p">()};</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">strings</span><span class="p">{</span><span class="o">&amp;</span><span class="n">buffer</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="n">strings</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&#34;String longer than what SSO can handle&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">strings</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&#34;Another long string that goes beyond SSO&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">strings</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&#34;A third long string that cannot be handled by SSO&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>std::pmr::monotonic_buffer_resource</code>ÊòØ<code>std::pmr</code>ÂëΩÂêçÁ©∫Èó¥‰∏≠ÁöÑÂá†‰∏™ÂèØÁî®ÂàÜÈÖçÂô®‰πã‰∏Ä„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÂÆÉË¢´ÈÖçÁΩÆ‰∏∫ÊØèÂΩì<code>strings</code>ÂêëÈáèËØ∑Ê±ÇÂÜÖÂ≠òÊó∂ÔºåÂè™ÂàÜÈÖçÁªôÂÆöÂ≠óËäÇÊï∞ÁªÑ<code>raw</code>ÁöÑÂùó„ÄÇÂ¶ÇÊûúÂÜÖÂ≠òËØ∑Ê±ÇÊó†Ê≥ïÂ§ÑÁêÜÔºà‰æãÂ¶ÇÂõ†‰∏∫ÁºìÂÜ≤Âå∫Â∑≤Êó†ÂÜÖÂ≠òÔºâÔºåÂàôÈÄöËøáÊäõÂá∫<code>std::bad_alloc</code>ÂºÇÂ∏∏Êù•Â§ÑÁêÜ„ÄÇËøôÁßçË°å‰∏∫ÈÄöËøáÂú®ÊûÑÈÄ†Êó∂‰º†ÈÄí<code>std::pmr::null_memory_resource</code>Êù•ÊåáÂÆö„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºå<code>std::pmr::monotonic_buffer_resource</code>ËøòÊúâËÆ∏Â§öÂÖ∂‰ªñÂèØËÉΩÁöÑÂ∫îÁî®„ÄÇ‰æãÂ¶ÇÔºå‰πüÂèØ‰ª•Âü∫‰∫éÂä®ÊÄÅÂÜÖÂ≠òÊûÑÂª∫ÔºåÂπ∂ÈÄöËøá<code>new</code>Âíå<code>delete</code>ÈáçÊñ∞ÂàÜÈÖçÈ¢ùÂ§ñÁöÑÂÜÖÂ≠òÂùóÔºå‰ΩøÁî®<code>std::pmr::new_delete_resource()</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">monotonic_buffer_resource</span> <span class="n">buffer</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">new_delete_resource</span><span class="p">()};</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÁÅµÊ¥ªÊÄßÂíåÂàÜÂ±ÇÈÖçÁΩÆÁî±Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÂÆûÁé∞„ÄÇ<code>std::pmr::monotonic_buffer_resource</code>Ê¥æÁîüËá™<code>std::pmr::memory_resource</code>Âü∫Á±ªÔºå‰ΩÜÂêåÊó∂‰πüÊòØ‰∏Ä‰∏™ÂåÖË£ÖÂô®ÔºåÂõ¥ÁªïÂè¶‰∏Ä‰∏™Ê¥æÁîüËá™<code>std::pmr::memory_resource</code>ÁöÑÂàÜÈÖçÂô®„ÄÇ‰∏äÊ∏∏ÂàÜÈÖçÂô®Âú®ÁºìÂÜ≤Âå∫ËÄóÂ∞ΩÂÜÖÂ≠òÊó∂‰ΩøÁî®ÔºåÂú®<code>std::pmr::monotonic_buffer_resource</code>ÁöÑÊûÑÈÄ†‰∏≠ÊåáÂÆö„ÄÇ</p>
<p>ÊúÄ‰ª§‰∫∫Âç∞Ë±°Ê∑±ÂàªÁöÑÊòØÔºå‰Ω†ÂèØ‰ª•ËΩªÊùæ‰∏îÈùû‰æµÂÖ•Âú∞Ëá™ÂÆö‰πâÂàÜÈÖçÁ≠ñÁï•„ÄÇ‰æãÂ¶ÇÔºåËøôÂèØËÉΩ‰Ωø‰Ω†ËÉΩÂ§ü‰ª•‰∏çÂêåÁöÑÊñπÂºèÂ§ÑÁêÜÂ§ßÂùóÂÜÖÂ≠òËØ∑Ê±ÇÂíåÂ∞èÂùóÂÜÖÂ≠òËØ∑Ê±Ç„ÄÇÂè™ÈúÄÊèê‰æõËá™Â∑±ÁöÑËá™ÂÆö‰πâÂàÜÈÖçÂô®Âç≥ÂèØ„ÄÇËÄÉËôë‰ª•‰∏ãËá™ÂÆö‰πâÂàÜÈÖçÂô®ÁöÑËçâÂõæÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;CustomAllocator.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory_resource&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CustomAllocator</span> <span class="o">:</span> <span class="k">public</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">memory_resource</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">CustomAllocator</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">memory_resource</span><span class="o">*</span> <span class="n">upstream</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">upstream_</span><span class="p">{</span><span class="n">upstream</span><span class="p">}</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span><span class="o">*</span> <span class="n">do_allocate</span><span class="p">(</span><span class="n">size_t</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">alignment</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">do_deallocate</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">ptr</span><span class="p">,</span> <span class="na">[[maybe_unused]] size_t bytes, [[maybe_unused]]</span> <span class="n">size_t</span> <span class="n">alignment</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">do_is_equal</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">memory_resource</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">memory_resource</span><span class="o">*</span> <span class="n">upstream_</span><span class="p">{};</span>   
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏∫‰∫ÜË¢´ËØÜÂà´‰∏∫C++17ÂàÜÈÖçÂô®Ôºå<code>CustomAllocator</code>Á±ªÊ¥æÁîüËá™<code>std::pmr::memory_resource</code>Á±ªÔºåÂêéËÄÖ‰ª£Ë°®‰∫ÜÊâÄÊúâC++17ÂàÜÈÖçÂô®ÁöÑË¶ÅÊ±ÇÈõÜ„ÄÇÂ∑ßÂêàÁöÑÊòØÔºå<code>CustomAllocator</code>‰πüÊã•Êúâ‰∏Ä‰∏™ÊåáÂêë<code>std::pmr::memory_resource</code>ÁöÑÊåáÈíàÔºåÈÄöËøáÂÖ∂ÊûÑÈÄ†ÂáΩÊï∞ÂàùÂßãÂåñ„ÄÇ</p>
<p>C++17ÂàÜÈÖçÂô®ÁöÑË¶ÅÊ±ÇÈõÜÂåÖÊã¨ËôöÊãüÂáΩÊï∞<code>do_allocate()</code>„ÄÅ<code>do_deallocate()</code>Âíå<code>do_is_equal()</code>„ÄÇ<code>do_allocate()</code>ÂáΩÊï∞Ë¥üË¥£Ëé∑ÂèñÂÜÖÂ≠òÔºåÂèØËÉΩÊòØÈÄöËøáÂÖ∂‰∏äÊ∏∏ÂàÜÈÖçÂô®ÔºåËÄå<code>do_deallocate()</code>ÂáΩÊï∞Âú®ÈúÄË¶ÅÈáäÊîæÂÜÖÂ≠òÊó∂Ë∞ÉÁî®„ÄÇÊúÄÂêéÔºå<code>do_is_equal()</code>ÂáΩÊï∞Âú®ÈúÄË¶ÅÊ£ÄÊü•‰∏§‰∏™ÂàÜÈÖçÂô®ÊòØÂê¶Áõ∏Á≠âÊó∂Ë∞ÉÁî®„ÄÇ</p>
<p>Âè™ÈúÄÂºïÂÖ•<code>CustomAllocator</code>ËÄåÊó†ÈúÄÊõ¥Êîπ‰ªª‰ΩïÂÖ∂‰ªñ‰ª£Á†ÅÔºåÁâπÂà´ÊòØÊ†áÂáÜÂ∫ì‰∏≠ÁöÑ‰ª£Á†ÅÔºåÊñ∞ÁöÑÂàÜÈÖçÂô®Á±ªÂûãÂèØ‰ª•ËΩªÊùæÊèíÂÖ•Âà∞<code>std::pmr::monotonic_buffer_resource</code>Âíå<code>std::pmr::new_delete_resource()</code>‰πãÈó¥Ôºå‰ªéËÄåÂÖÅËÆ∏‰Ω†Èùû‰æµÂÖ•Âú∞Êâ©Â±ïÂàÜÈÖçË°å‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;CustomAllocator.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">CustomAllocator</span> <span class="n">custom_allocator</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">new_delete_resource</span><span class="p">()};</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">monotonic_buffer_resource</span> <span class="n">buffer</span><span class="p">{</span><span class="o">&amp;</span><span class="n">custom_allocator</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Ë£ÖÈ•∞Âô®„ÄÅÈÄÇÈÖçÂô®ÂíåÁ≠ñÁï•Ê®°ÂºèÁöÑÊØîËæÉ</strong></p>
<p>Â∞ΩÁÆ°Ë£ÖÈ•∞Âô®ÂíåÈÄÇÈÖçÂô®Ëøô‰∏§ÁßçËÆæËÆ°Ê®°ÂºèÂê¨Ëµ∑Êù•ÊúâÁõ∏‰ººÁöÑÁõÆÁöÑÔºå‰ΩÜÂú®‰ªîÁªÜÊ£ÄÊü•ÂêéÔºåÂÆÉ‰ª¨ÈùûÂ∏∏‰∏çÂêå‰∏îÂá†‰πé‰∏çÁõ∏ÂÖ≥„ÄÇÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæÊòØÈÄÇÂ∫îÂíåÊîπÂèòÁªôÂÆöÊé•Âè£‰ª•ÂåπÈÖçÈ¢ÑÊúüÊé•Âè£„ÄÇÂÆÉ‰∏çÂÖ≥ÂøÉÊ∑ªÂä†‰ªª‰ΩïÂäüËÉΩÔºåÂè™ÂÖ≥ÂøÉÂ∞Ü‰∏ÄÁªÑÂáΩÊï∞Êò†Â∞ÑÂà∞Âè¶‰∏ÄÁªÑÂáΩÊï∞„ÄÇÁõ∏ÂèçÔºåË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè‰øùÁïôÁªôÂÆöÊé•Âè£ÔºåÂÆåÂÖ®‰∏çÂÖ≥ÂøÉÊîπÂèòÂÆÉ„ÄÇÁõ∏ÂèçÔºåÂÆÉÊèê‰æõ‰∫ÜÊ∑ªÂä†ËÅåË¥£ÂíåÊâ©Â±ïÂèäËá™ÂÆö‰πâÁé∞ÊúâÂäüËÉΩÈõÜÁöÑËÉΩÂäõ„ÄÇ</p>
<p>Á≠ñÁï•ËÆæËÆ°Ê®°Âºè‰∏éË£ÖÈ•∞Âô®Êõ¥Áõ∏‰ºº„ÄÇ‰∏§ÁßçÊ®°ÂºèÈÉΩÊèê‰æõ‰∫ÜËá™ÂÆö‰πâÂäüËÉΩÁöÑËÉΩÂäõ„ÄÇÁÑ∂ËÄåÔºåÂÆÉ‰ª¨ÈíàÂØπ‰∏çÂêåÁöÑÂ∫îÁî®Âú∫ÊôØÔºåÂõ†Ê≠§Êèê‰æõ‰∫Ü‰∏çÂêåÁöÑÂ•ΩÂ§Ñ„ÄÇÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰æßÈáç‰∫éÊ∂àÈô§ÂØπÁâπÂÆöÂäüËÉΩÂÆûÁé∞ÁªÜËäÇÁöÑ‰æùËµñÔºåÂπ∂ÂÖÅËÆ∏‰ªéÂ§ñÈÉ®ÂÆö‰πâËøô‰∫õÁªÜËäÇ„ÄÇÂõ†Ê≠§Ôºå‰ªéËøô‰∏™ËßíÂ∫¶Êù•ÁúãÔºåÂÆÉ‰ª£Ë°®‰∫ÜËØ•ÂäüËÉΩÁöÑÊ†∏ÂøÉ‚Äî‚Äî‚ÄúÊ†∏ÂøÉ‚Äù„ÄÇËøôÁßçÂΩ¢ÂºèÁâπÂà´ÈÄÇÂêàË°®Á§∫‰∏çÂêåÁöÑÂÆûÁé∞Âπ∂Âú®Ëøô‰πãÈó¥ÂàáÊç¢„ÄÇÁõ∏ÊØî‰πã‰∏ãÔºåË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè‰æßÈáç‰∫éÊ∂àÈô§ÂèØÈôÑÂä†ÂÆûÁé∞ÈÉ®ÂàÜ‰πãÈó¥ÁöÑ‰æùËµñÂÖ≥Á≥ª„ÄÇÁî±‰∫éÂÖ∂ÂåÖË£ÖÂô®ÂΩ¢ÂºèÔºåË£ÖÈ•∞Âô®‰ª£Ë°®‰∫ÜÂäüËÉΩÁöÑ‚ÄúÁöÆËÇ§‚Äù„ÄÇÂú®ËøôÁßçÂΩ¢Âºè‰∏ãÔºåÂÆÉÁâπÂà´ÈÄÇÂêàÁªÑÂêà‰∏çÂêåÁöÑÂÆûÁé∞Ôºå‰ªéËÄåÂ¢ûÂº∫ÂíåÊâ©Â±ïÂäüËÉΩÔºåËÄå‰∏çÊòØÊõøÊç¢ÂÆÉÊàñÂú®ÂÆûÁé∞‰πãÈó¥ÂàáÊç¢„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PriceStrategy</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">PriceStrategy</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">Money</span> <span class="nf">update</span><span class="p">(</span><span class="n">Money</span> <span class="n">price</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DecoratedPriceStrategy</span> <span class="o">:</span> <span class="k">public</span> <span class="n">PriceStrategy</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">PriceStrategy</span><span class="o">&gt;</span> <span class="n">priceModifier_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DiscountedPriceStrategy</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DecoratedPriceStrategy</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="n">update</span><span class="p">(</span><span class="n">Money</span> <span class="n">price</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçËÆæËÆ°Ê®°ÂºèÁöÑÁªÑÂêàÂú®Â∑≤ÁªèÊúâ‰∏Ä‰∏™Á≠ñÁï•ÂÆûÁé∞ÁöÑÊÉÖÂÜµ‰∏ãÁâπÂà´ÊúâË∂£ÔºöËôΩÁÑ∂Á≠ñÁï•ÊòØ‰æµÂÖ•ÊÄßÁöÑÂπ∂Ë¶ÅÊ±Ç‰øÆÊîπÁ±ªÔºå‰ΩÜÊÄªÊòØÂèØ‰ª•ÈÄöËøáÊ∑ªÂä†Ë£ÖÈ•∞Âô®Â¶Ç<code>DecoratedPriceStrategy</code>Á±ªÊù•Èùû‰æµÂÖ•ÊÄßÂú∞Êâ©Â±ï„ÄÇÂΩìÁÑ∂ÔºåËøôÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÊÉÖÂÜµÔºöÊòØÂê¶ËøôÊòØÊ≠£Á°ÆÁöÑËß£ÂÜ≥ÊñπÊ°àÈúÄË¶ÅÈÄêÊ°àÂÜ≥ÂÆö„ÄÇ</p>
<p><strong>ÂàÜÊûêË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÁöÑ‰∏çË∂≥</strong></p>
<p>Â∞ΩÁÆ°Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèËÉΩÂ§üÂ±ÇÊ¨°ÂåñÂú∞Êâ©Â±ïÂíåÂÆöÂà∂Ë°å‰∏∫ÔºåÊó†ÁñëÊòØËÆæËÆ°Ê®°ÂºèÁõÆÂΩï‰∏≠ÊúÄÊúâ‰ª∑ÂÄºÂíåÊúÄÁÅµÊ¥ªÁöÑÊ®°Âºè‰πã‰∏ÄÔºå‰ΩÜÂÆÉ‰πüÊúâ‰∏Ä‰∫õÁº∫ÁÇπ„ÄÇÈ¶ñÂÖàÔºåË£ÖÈ•∞Âô®ÁöÑÁÅµÊ¥ªÊÄßÊòØÊúâ‰ª£‰ª∑ÁöÑÔºöÁªôÂÆöÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠ÁöÑÊØè‰∏ÄÂ±ÇÈÉΩ‰ºöÂ¢ûÂä†‰∏ÄÂ±ÇÈó¥Êé•ÊÄß„ÄÇ‰æãÂ¶ÇÔºåÂú®<code>Item</code>Â±ÇÊ¨°ÁªìÊûÑÁöÑÂØπË±°ÂØºÂêëÂÆûÁé∞‰∏≠ÔºåËøôÁßçÈó¥Êé•ÊÄßË°®Áé∞‰∏∫ÊØè‰∏™Ë£ÖÈ•∞Âô®ÁöÑ‰∏Ä‰∏™ËôöÂáΩÊï∞Ë∞ÉÁî®„ÄÇÂõ†Ê≠§ÔºåÂπøÊ≥õ‰ΩøÁî®Ë£ÖÈ•∞Âô®ÂèØËÉΩ‰ºöÂ∏¶Êù•ÊΩúÂú®ÁöÑÊòæËëóÊÄßËÉΩÂºÄÈîÄ„ÄÇËøôÁßçÂèØËÉΩÁöÑÊÄßËÉΩÊçüÂ§±ÊòØÂê¶Êàê‰∏∫ÈóÆÈ¢òÂèñÂÜ≥‰∫éÂÖ∑‰Ωì‰∏ä‰∏ãÊñá„ÄÇ‰Ω†ÈúÄË¶ÅÈÄöËøáÂü∫ÂáÜÊµãËØïÈÄêÊ°àÂÜ≥ÂÆöË£ÖÈ•∞Âô®ÁöÑÁÅµÊ¥ªÊÄßÂíåÁªìÊûÑÊÄßÊòØÂê¶Ë∂ÖËøá‰∫ÜÊÄßËÉΩÈóÆÈ¢ò„ÄÇ</p>
<p>Âè¶‰∏Ä‰∏™‰∏çË∂≥ÊòØÈîôËØØÁªÑÂêàË£ÖÈ•∞Âô®ÁöÑÊΩúÂú®Âç±Èô©„ÄÇ‰æãÂ¶ÇÔºåÂæàÂÆπÊòìÂ∞Ü‰∏Ä‰∏™<code>Taxed</code>Ë£ÖÈ•∞Âô®ÂåÖË£πÂú®Âè¶‰∏Ä‰∏™<code>Taxed</code>Ë£ÖÈ•∞Âô®Âë®Âõ¥ÔºåÊàñËÄÖÂú®‰∏Ä‰∏™Â∑≤ÁªèÂæÅÁ®éÁöÑÈ°πÁõÆ‰∏äÂ∫îÁî®<code>Discounted</code>„ÄÇËøô‰∏§ÁßçÊÉÖÂÜµËôΩÁÑ∂‰ºöËÆ©‰Ω†ÁöÑÊîøÂ∫úÈ´òÂÖ¥Ôºå‰ΩÜ‰∏çÂ∫îËØ•ÂèëÁîüÔºåÂõ†Ê≠§Â∫îÂú®ËÆæËÆ°Êó∂ÈÅøÂÖç„ÄÇScott Meyers ÁöÑÈÄöÁî®ËÆæËÆ°ÂéüÂàôÂæàÂ•ΩÂú∞Ë°®Ëææ‰∫ÜËøô‰∏ÄÁêÜÊÄßÔºö</p>
<p><strong>‰ΩøÊé•Âè£Êòì‰∫éÊ≠£Á°Æ‰ΩøÁî®‰∏îÈöæ‰ª•ÈîôËØØ‰ΩøÁî®„ÄÇ</strong></p>
<p>Âõ†Ê≠§ÔºåË£ÖÈ•∞Âô®ÁöÑÂ∑®Â§ßÁÅµÊ¥ªÊÄßÊòØÂçìË∂äÁöÑÔºå‰ΩÜ‰πüÂèØËÉΩÊòØÂç±Èô©ÁöÑÔºàÂΩìÁÑ∂ÔºåËøôÂèñÂÜ≥‰∫éÂú∫ÊôØÔºâ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÁ®éÊî∂‰ºº‰πéÊâÆÊºî‰∫Ü‰∏Ä‰∏™ÁâπÊÆäÁöÑËßíËâ≤ÔºåÂõ†Ê≠§‰∏çÂ∞ÜÂÖ∂‰Ωú‰∏∫Ë£ÖÈ•∞Âô®Â§ÑÁêÜËÄåÈááÁî®ÂÖ∂‰ªñÊñπÂºè‰ºº‰πéÊòØÂêàÁêÜÁöÑ„ÄÇÁî±‰∫éÁé∞ÂÆû‰∏≠ÁöÑÁ®éÊî∂ÊòØ‰∏Ä‰∏™Áõ∏ÂΩìÂ§çÊùÇÁöÑËØùÈ¢òÔºåÈÄöËøáÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂàÜÁ¶ªËøô‰∏ÄÂÖ≥Ê≥®ÁÇπ‰ºº‰πéÊòØÂêàÁêÜÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;TaxStrategy.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TaxStrategy</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">TaxStrategy</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">Money</span> <span class="nf">applyTax</span><span class="p">(</span><span class="n">Money</span> <span class="n">price</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;TaxedItem.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;TaxStrategy.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TaxedItem</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">TaxedItem</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">item</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">TaxStrategy</span><span class="o">&gt;</span> <span class="n">taxer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">item_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">item</span><span class="p">)),</span> <span class="n">taxer_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">taxer</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Ê£ÄÊü•ÊúâÊïàÁöÑÈ°πÁõÆÂíåÁ®éÊî∂Á≠ñÁï•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">netPrice</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>  <span class="c1">// ‰∏çÂê´Á®éÁöÑ‰ª∑Ê†º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="n">item_</span><span class="o">-&gt;</span><span class="n">price</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">grossPrice</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>  <span class="c1">// ÂåÖÂê´Á®éÁöÑ‰ª∑Ê†º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="n">taxer_</span><span class="o">-&gt;</span><span class="n">applyTax</span><span class="p">(</span><span class="n">item_</span><span class="o">-&gt;</span><span class="n">price</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">item_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">TaxStrategy</span><span class="o">&gt;</span> <span class="n">taxer_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>TaxStrategy</code>Á±ª‰ª£Ë°®ÂØπ<code>Item</code>Â∫îÁî®Á®éÊî∂ÁöÑÂ§öÁßç‰∏çÂêåÊñπÂºè„ÄÇËøôÊ†∑ÁöÑ<code>TaxStrategy</code>‰∏é<code>Item</code>Âú®<code>TaxedItem</code>Á±ª‰∏≠ÁªìÂêà„ÄÇÊ≥®ÊÑèÔºå<code>TaxedItem</code>Êú¨Ë∫´Âπ∂‰∏çÊòØ‰∏Ä‰∏™<code>Item</code>ÔºåÂõ†Ê≠§‰∏çËÉΩÈÄöËøáÂè¶‰∏Ä‰∏™<code>Item</code>Êù•Ë£ÖÈ•∞ÂÆÉ„ÄÇÂõ†Ê≠§ÔºåÂÆÉÂÖÖÂΩì‰∏ÄÁßçÁªàÊ≠¢Ë£ÖÈ•∞Âô®ÔºåÂè™ËÉΩ‰Ωú‰∏∫ÊúÄÂêé‰∏Ä‰∏™Ë£ÖÈ•∞Âô®Â∫îÁî®„ÄÇÂÆÉ‰πü‰∏çÊèê‰æõ<code>price()</code>ÂáΩÊï∞ÔºåËÄåÊòØÊèê‰æõ<code>netPrice()</code>Âíå<code>grossPrice()</code>ÂáΩÊï∞Ôºå‰ª•‰æøÊü•ËØ¢ÂåÖÂê´Á®éÂíåÂéüÂßãÈ°πÁõÆÁöÑ‰∏çÂê´Á®é‰ª∑Ê†º„ÄÇ</p>
<p>ÂîØ‰∏ÄÂèØËÉΩÁúãÂà∞ÁöÑÂè¶‰∏Ä‰∏™ÈóÆÈ¢òÊòØÂü∫‰∫éÂºïÁî®ËØ≠‰πâÁöÑË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÂÆûÁé∞ÔºöÂ§ßÈáèÁöÑÊåáÈíà„ÄÅÂåÖÊã¨<code>nullptr</code>Ê£ÄÊü•ÂíåÊÇ¨Á©∫ÊåáÈíàÁöÑÈ£éÈô©„ÄÅÈÄöËøá<code>std::unique_ptr</code>Âíå<code>std::make_unique()</code>ËøõË°åÊòæÂºèÁöÑÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ‰ª•ÂèäËÆ∏Â§öÂ∞èÁöÑÊâãÂä®ÂÜÖÂ≠òÂàÜÈÖç„ÄÇÁÑ∂ËÄåÔºåÂπ∏ËøêÁöÑÊòØÔºå‰Ω†ËøòÊúâ‰∏Ä‰∏™ÁéãÁâåÂèØ‰ª•Â±ïÁ§∫Â¶Ç‰ΩïÂü∫‰∫éÂÄºËØ≠‰πâÂÆûÁé∞Ë£ÖÈ•∞Âô®ÔºàËßÅÂêéÁª≠ÊåáÂçóÔºâ„ÄÇ</p>
<p>ÊÄªÁªìÊù•ËØ¥ÔºåË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÊòØÂü∫Êú¨ÁöÑËÆæËÆ°Ê®°Âºè‰πã‰∏ÄÔºåÂ∞ΩÁÆ°Êúâ‰∏Ä‰∫õÁº∫ÁÇπÔºå‰ΩÜÂÆÉ‰ªçÁÑ∂ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Êúâ‰ª∑ÂÄºÁöÑÂ∑•ÂÖ∑ÁÆ±Ë°•ÂÖÖ„ÄÇÂè™ÈúÄÁ°Æ‰øù‰∏çË¶ÅËøá‰∫éÁÉ≠Ë°∑‰∫éË£ÖÈ•∞Âô®Âπ∂ÂºÄÂßãÂ∞ÜÂÖ∂Áî®‰∫é‰∏ÄÂàá„ÄÇÊØïÁ´üÔºåÂØπ‰∫éÊØèÁßçÊ®°ÂºèÔºåÈÉΩÊúâ‰∏Ä‰∏™ÂêàÁêÜ‰ΩøÁî®ÂíåËøáÂ∫¶‰ΩøÁî®ÁöÑÁïåÈôê„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li><strong>ÁêÜËß£ÁªßÊâøÂæàÂ∞ëÊòØÁ≠îÊ°à</strong>„ÄÇ</li>
<li><strong>Â∫îÁî®Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÁöÑÊÑèÂõæÊòØÈùû‰æµÂÖ•ÂºèÂú∞„ÄÅÂ±ÇÊ¨°ÂåñÂú∞Êâ©Â±ïÂíåÂÆöÂà∂Ë°å‰∏∫</strong>„ÄÇ</li>
<li><strong>ËÄÉËôëË£ÖÈ•∞Âô®Áî®‰∫éÁªÑÂêàÂíåÈáçÁî®Áã¨Á´ãÁöÑË°å‰∏∫ÁâáÊÆµ</strong>„ÄÇ</li>
<li><strong>ÁêÜËß£Ë£ÖÈ•∞Âô®„ÄÅÈÄÇÈÖçÂô®ÂíåÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè‰πãÈó¥ÁöÑÂ∑ÆÂºÇ</strong>„ÄÇ</li>
<li><strong>Âà©Áî®Ë£ÖÈ•∞Âô®ÁöÑÊûÅÁ´ØÁÅµÊ¥ªÊÄßÔºå‰ΩÜ‰∫ÜËß£ÂÖ∂‰∏çË∂≥‰πãÂ§Ñ</strong>„ÄÇ</li>
<li><strong>ÈÅøÂÖçÊó†ÊÑè‰πâÁöÑË£ÖÈ•∞Âô®Ôºå‰ΩÜÊõ¥ÂÄæÂêë‰∫éÊòì‰∫éÊ≠£Á°Æ‰ΩøÁî®ÁöÑËâØÂ•ΩËÆæËÆ°</strong>„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô36ÁêÜËß£ËøêË°åÊó∂‰∏éÁºñËØëÊó∂ÊäΩË±°‰πãÈó¥ÁöÑÊùÉË°°">ÂáÜÂàô36ÔºöÁêÜËß£ËøêË°åÊó∂‰∏éÁºñËØëÊó∂ÊäΩË±°‰πãÈó¥ÁöÑÊùÉË°°
</h3><p>Âú®‚ÄúÂáÜÂàô5Ôºö‰ΩøÁî®Ë£ÖÈ•∞Âô®Â±ÇÊ¨°ÂåñÂú∞Ê∑ªÂä†Ëá™ÂÆö‰πâ‚Äù‰∏≠ÔºåÊàëÂêëÊÇ®‰ªãÁªç‰∫ÜË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÔºåÂπ∂Â∏åÊúõÁªô‰∫ÜÊÇ®‰∏Ä‰∏™Âº∫ÁÉàÁöÑÂä®Êú∫Â∞ÜÂÖ∂Ê∑ªÂä†Âà∞ÊÇ®ÁöÑÂ∑•ÂÖ∑ÁÆ±‰∏≠„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåÊàëÂè™ÊòØÈÄöËøáÁªèÂÖ∏ÁöÑÈù¢ÂêëÂØπË±°ÂÆûÁé∞Â±ïÁ§∫‰∫ÜË£ÖÈ•∞Âô®ÔºåÂπ∂Ê≤°ÊúâÈÅµÂæ™‚ÄúÂáÜÂàô22Ôºö‰ºòÂÖàÈÄâÊã©ÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ‚ÄùÁöÑÂª∫ËÆÆ„ÄÇ</p>
<p>Áî±‰∫éÊàëÂÅáËÆæÊÇ®ÊÄ•ÂàáÂú∞ÊÉ≥ÁúãÂà∞Â¶Ç‰ΩïÂü∫‰∫éÂÄºËØ≠‰πâÂÆûÁé∞Ë£ÖÈ•∞Âô®ÔºåÁé∞Âú®ÊòØÊó∂ÂÄôÂêëÊÇ®Â±ïÁ§∫‰∏§ÁßçÂèØËÉΩÁöÑÊñπÊ≥ï‰∫Ü„ÄÇ</p>
<p>ÊòØÁöÑÔºå‰∏§ÁßçÊñπÊ≥ïÔºöÊàëÂ∞ÜÈÄöËøáÊºîÁ§∫‰∏§‰∏™ÈùûÂ∏∏‰∏çÂêåÁöÑÂÆûÁé∞Êù•Âº•Ë°•Ëøô‰∏ÄÂª∂Ëøü„ÄÇËøô‰∏§ÁßçÂÆûÁé∞ÈÉΩÁâ¢Âõ∫Âú∞Âü∫‰∫éÂÄºËØ≠‰πâÔºå‰ΩÜÂú®ÊØîËæÉÊó∂ÔºåÂÆÉ‰ª¨Âá†‰πé‰Ωç‰∫éËÆæËÆ°Á©∫Èó¥ÁöÑÂØπÁ´ãÈù¢„ÄÇ</p>
<p>Á¨¨‰∏Ä‰∏™ÊñπÊ≥ïÂ∞ÜÂü∫‰∫éÈùôÊÄÅÂ§öÊÄÅÊÄßÂÆûÁé∞Ôºå‰ΩøÊÇ®ËÉΩÂ§üÂà©Áî®ÊâÄÊúâÂèØÁî®ÁöÑÁºñËØëÊó∂‰ø°ÊÅØÔºõ</p>
<p>ËÄåÁ¨¨‰∫å‰∏™ÊñπÊ≥ïÂàô‰ºöÂà©Áî®Âä®ÊÄÅÂ§öÊÄÅÊÄßÁöÑÊâÄÊúâËøêË°åÊó∂‰ºòÂäø„ÄÇËøô‰∏§ÁßçÊñπÊ≥ïÈÉΩÊúâÂÖ∂‰ºòÁÇπÔºåÂΩìÁÑ∂‰πüÊúâÂÖ∂Áã¨ÁâπÁöÑÁº∫ÁÇπ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåËøô‰∫õÁ§∫‰æãÂæàÂ•ΩÂú∞Â±ïÁ§∫‰∫ÜÊÇ®ÂèØ‰ª•ÈÄâÊã©ÁöÑËÆæËÆ°ÂπøÂ∫¶„ÄÇ</p>
<p><strong>Âü∫‰∫éÂÄºÁöÑÁºñËØëÊó∂Ë£ÖÈ•∞Âô®</strong></p>
<p>ËÆ©Êàë‰ª¨‰ªéÂü∫‰∫éÈùôÊÄÅÂ§öÊÄÅÊÄßÁöÑË£ÖÈ•∞Âô®ÂÆûÁé∞ÂºÄÂßã„ÄÇ‚ÄúÊàëÁåúËøôÂèà‰ºöÂ§ßÈáè‰ΩøÁî®Ê®°ÊùøÔºåÂØπÂêßÔºü‚ÄùÊÇ®ÈóÆ„ÄÇ</p>
<p>ÊòØÁöÑÔºåÊàë‰ºö‰ΩøÁî®Ê®°Êùø‰Ωú‰∏∫‰∏ªË¶ÅÁöÑÊäΩË±°Êú∫Âà∂ÔºåÂπ∂‰∏î‰ºö‰ΩøÁî®C++20ÁöÑÊ¶ÇÂøµÂíåËΩ¨ÂèëÂºïÁî®„ÄÇ‰ΩÜÊòØÔºå‰∏ç‰ºöËÆ©ÂÆÉÁâπÂà´‰æùËµñÊ®°Êùø„ÄÇÁõ∏ÂèçÔºå‰∏ªË¶ÅÂÖ≥Ê≥®ÁÇπ‰ªçÁÑ∂ÊòØË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÁöÑËÆæËÆ°ÊñπÈù¢‰ª•Âèä‰ΩøÂÖ∂Êòì‰∫éÊ∑ªÂä†Êñ∞Á±ªÂûãÁöÑË£ÖÈ•∞Âô®ÂíåÊñ∞ÁöÑÂ∏∏ËßÑÈ°πÁõÆÁöÑÁõÆÊ†á„ÄÇÂÖ∂‰∏≠‰∏Ä‰∏™È°πÁõÆÂ∞±ÊòØ<code>ConferenceTicket</code>Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;ConferenceTicket.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ConferenceTicket</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">ConferenceTicket</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">,</span> <span class="n">Money</span> <span class="n">price</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">name_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">name</span><span class="p">)),</span> <span class="n">price_</span><span class="p">(</span><span class="n">price</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">name_</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">price_</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="n">price_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>ConferenceTicket</code>ÂÆåÁæéÁ¨¶ÂêàÂÄºÁ±ªÂûãÁöÑÊúüÊúõÔºöÊ≤°ÊúâÂü∫Á±ªÂèÇ‰∏éÔºå‰πüÊ≤°ÊúâËôöÂáΩÊï∞„ÄÇËøôÊÑèÂë≥ÁùÄ‰∏çÂÜçÈÄöËøáÊåáÂêëÂü∫Á±ªÁöÑÊåáÈíàË£ÖÈ•∞È°πÁõÆÔºåËÄåÊòØÈÄöËøáÁªÑÂêàÊàñÁõ¥Êé•ÈùûÂÖ¨ÂºÄÁªßÊâøÁöÑÊñπÂºèËøõË°åË£ÖÈ•∞„ÄÇ‰ª•‰∏ãÊòØËøôÁßçÂÆûÁé∞ÁöÑ‰∏§‰∏™‰æãÂ≠êÔºåÂàÜÂà´ÊòØ<code>Discounted</code>Âíå<code>Taxed</code>Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;PricedItem.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">concept</span> <span class="n">PricedItem</span> <span class="o">=</span> <span class="k">requires</span><span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">item</span><span class="p">.</span><span class="n">price</span><span class="p">()</span> <span class="p">}</span> <span class="o">-&gt;</span> <span class="n">std</span><span class="o">::</span><span class="n">same_as</span><span class="o">&lt;</span><span class="n">Money</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Discounted.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;PricedItem.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="kt">double</span> <span class="n">discount</span><span class="p">,</span> <span class="n">PricedItem</span> <span class="n">Item</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Discounted</span> <span class="p">{</span>  <span class="c1">// ‰ΩøÁî®ÁªÑÂêà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Discounted</span><span class="p">(</span><span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">item_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)...)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">item_</span><span class="p">.</span><span class="n">price</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">discount</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Item</span> <span class="n">item_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Taxed.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;PricedItem.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="kt">double</span> <span class="n">taxRate</span><span class="p">,</span> <span class="n">PricedItem</span> <span class="n">Item</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Taxed</span> <span class="o">:</span> <span class="k">private</span> <span class="n">Item</span> <span class="p">{</span>  <span class="c1">// ‰ΩøÁî®ÁªßÊâø
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Taxed</span><span class="p">(</span><span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">Item</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)...)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Item</span><span class="o">::</span><span class="n">price</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">taxRate</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Discounted</code>Âíå<code>Taxed</code>ÈÉΩ‰Ωú‰∏∫ÂÖ∂‰ªñÁ±ªÂûãÈ°πÁõÆÁöÑË£ÖÈ•∞Âô®Ôºö<code>Discounted</code>Á±ªË°®Á§∫ÁªôÂÆöÈ°πÁõÆÁöÑÊäòÊâ£ÔºåËÄå<code>Taxed</code>Á±ªË°®Á§∫ÊüêÁßçÁ®éÊî∂„ÄÇËøôÊ¨°Ôºå‰∏§ËÄÖÈÉΩÊòØ‰ª•Á±ªÊ®°ÊùøÁöÑÂΩ¢ÂºèÂÆûÁé∞ÁöÑ„ÄÇÁ¨¨‰∏Ä‰∏™Ê®°ÊùøÂèÇÊï∞ÂàÜÂà´ÊåáÂÆöÊäòÊâ£ÂíåÁ®éÁéáÔºåÁ¨¨‰∫å‰∏™Ê®°ÊùøÂèÇÊï∞ÊåáÂÆöË¢´Ë£ÖÈ•∞È°πÁõÆÁöÑÁ±ªÂûã„ÄÇ</p>
<p>ÊúÄÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÁ¨¨‰∫å‰∏™Ê®°ÊùøÂèÇÊï∞‰∏äÁöÑ<code>PricedItem</code>Á∫¶Êùü„ÄÇËøô‰∏™Á∫¶Êùü‰ª£Ë°®‰∫Ü‰∏ÄÁªÑËØ≠‰πâË¶ÅÊ±ÇÔºåÂç≥È¢ÑÊúüÁöÑË°å‰∏∫„ÄÇÁî±‰∫éÊ≠§Á∫¶ÊùüÔºåÊÇ®Âè™ËÉΩÊèê‰æõÂÖ∑Êúâ<code>price()</code>ÊàêÂëòÂáΩÊï∞ÁöÑÁ±ªÂûã„ÄÇ‰ΩøÁî®‰ªª‰ΩïÂÖ∂‰ªñÁ±ªÂûãÈÉΩ‰ºöÁ´ãÂç≥ÂØºËá¥ÁºñËØëÈîôËØØ„ÄÇÂõ†Ê≠§Ôºå<code>PricedItem</code>ÊâÆÊºî‰∫ÜÁªèÂÖ∏Ë£ÖÈ•∞Âô®ÂÆûÁé∞‰∏≠<code>Item</code>Âü∫Á±ªÁöÑËßíËâ≤„ÄÇÂêåÊ†∑ÔºåËøô‰πü‰ΩìÁé∞‰∫ÜÂü∫‰∫éÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºàSRPÔºâÁöÑÂÖ≥Ê≥®ÂàÜÁ¶ª„ÄÇÊ≠§Â§ñÔºåÂ¶ÇÊûúËØ•Á∫¶ÊùüÁî±Êû∂ÊûÑ‰∏≠ÁöÑÈ´òÂ±ÇÊã•ÊúâÔºåÂàôÊÇ®ÂíåÂÖ∂‰ªñ‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•Âú®‰ªª‰ΩïËæÉ‰ΩéÂ±ÇÊ∑ªÂä†Êñ∞ÁöÑÈ°πÁõÆÁ±ªÂûãÂíåÊñ∞ÁöÑË£ÖÈ•∞Âô®„ÄÇËøô‰∏ÄÁâπÊÄßÂÆåÁæéÂú∞Êª°Ë∂≥‰∫ÜÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâÔºåÂπ∂‰∏îÁî±‰∫éÈÄÇÂΩìÁöÑÊäΩË±°ÊâÄÊúâÊùÉÔºå‰πüÊª°Ë∂≥‰∫Ü‰æùËµñÂÄíÁΩÆÂéüÂàôÔºàDIPÔºâ„ÄÇ</p>
<p>‰∏ãÈù¢ÁöÑ‰∏â‰∏™Á±ªÂà∞‰ΩçÂêéÔºåÊÇ®Â∞±ÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™Â∏¶Êúâ20%ÊäòÊâ£Âíå15%Á®éÁöÑ<code>ConferenceTicket</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ConferenceTicket.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Discounted.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Taxed.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 20%ÊäòÊâ£Ôºå15%Á®éÔºö(499*0.8)*1.15 = 459.08
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Taxed</span><span class="o">&lt;</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">Discounted</span><span class="o">&lt;</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">ConferenceTicket</span><span class="o">&gt;&gt;</span> <span class="n">item</span><span class="p">{</span> <span class="s">&#34;Core C++&#34;</span><span class="p">,</span> <span class="mf">499.0</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="k">const</span> <span class="n">totalPrice</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">price</span><span class="p">();</span>  <span class="c1">// ÁªìÊûú‰∏∫459.08
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÁºñËØëÊó∂ÊñπÊ≥ïÁöÑÊúÄÂ§ß‰ºòÂäøÊòØÊòæËëóÁöÑÊÄßËÉΩÊèêÂçáÔºöÁî±‰∫éÊ≤°ÊúâÊåáÈíàÈó¥Êé•ÂØªÂùÄÔºåÂπ∂‰∏îÁî±‰∫éÂèØ‰ª•ÂÜÖËÅîÔºåÁºñËØëÂô®ËÉΩÂ§üÊúÄÂ§ßÈôêÂ∫¶Âú∞‰ºòÂåñÁîüÊàêÁöÑ‰ª£Á†Å„ÄÇÊ≠§Â§ñÔºåÁîüÊàêÁöÑ‰ª£Á†ÅÊòéÊòæÊõ¥Áü≠Ôºå‰∏çÂåÖÂê´‰ªª‰ΩïÊ†∑Êùø‰ª£Á†ÅÔºåÂõ†Ê≠§Êõ¥ÂÆπÊòìÈòÖËØª„ÄÇ</p>
<p>‚Äú‰Ω†ËÉΩÂÖ∑‰Ωì‰∏ÄÁÇπËØ¥ÊòéÊÄßËÉΩÁªìÊûúÂêóÔºüÂú®C++‰∏≠ÔºåÂºÄÂèëËÄÖ‰ª¨‰ºöÂØπ1%ÁöÑÊÄßËÉΩÂ∑ÆÂºÇ‰∫âËÆ∫‰∏ç‰ºëÂπ∂Áß∞‰πã‰∏∫ÊòæËëó„ÄÇÊâÄ‰ª•ÔºåËÆ§ÁúüÂú∞ËØ¥ÔºöÁºñËØëÊó∂ÊñπÊ≥ïÂø´Â§öÂ∞ëÔºü‚ÄùÊàëÊòéÁôΩÔºåÊÇ®‰ºº‰πéÁÜüÊÇâC++Á§æÂå∫ÂØπÊÄßËÉΩÁöÑÁÉ≠ÊÉÖ„ÄÇÂ•ΩÂêßÔºåÂè™Ë¶ÅÊÇ®ÂÜçÊ¨°Á≠îÂ∫îÊàëÔºå‰∏çË¶ÅËÆ§‰∏∫ÊàëÁöÑÁªìÊûúÊòØÊúÄÁªàÁ≠îÊ°àÔºåËÄåÂè™ÊòØ‰∏Ä‰∏™Á§∫‰æãÔºåÂπ∂‰∏îÂ¶ÇÊûúÊàë‰ª¨ÂêåÊÑèËøô‰∏™ÊØîËæÉ‰∏ç‰ºöÊºîÂèòÊàêÊÄßËÉΩÁ†îÁ©∂ÔºåÊàëÂèØ‰ª•ÁªôÊÇ®Áúã‰∏Ä‰∫õÊï∞ÊçÆ„ÄÇ‰ΩÜÊòØÂú®Â±ïÁ§∫‰πãÂâçÔºåËÆ©ÊàëÂø´ÈÄüÊ¶ÇËø∞‰∏Ä‰∏ãÊàë‰ΩøÁî®ÁöÑÂü∫ÂáÜÔºöÊàëÊØîËæÉ‰∫Ü‚ÄúÊåáÂçó35Ôºö‰ΩøÁî®Ë£ÖÈ•∞Âô®Â±ÇÊ¨°ÂåñÂú∞Ê∑ªÂä†Ëá™ÂÆö‰πâ‚Äù‰∏≠ÁöÑÁªèÂÖ∏Èù¢ÂêëÂØπË±°ÂÆûÁé∞ÂíåÊâÄÊèèËø∞ÁöÑÁºñËØëÊó∂ÁâàÊú¨„ÄÇÂΩìÁÑ∂ÔºåÊúâ‰ªªÊÑèÊï∞ÈáèÁöÑË£ÖÈ•∞Âô®ÁªÑÂêàÔºå‰ΩÜÊàëÂ∞ÜËá™Â∑±ÈôêÂà∂Âú®ËøôÂõõ‰∏™È°πÁõÆÁ±ªÂûã‰∏äÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">using</span> <span class="n">DiscountedConferenceTicket</span> <span class="o">=</span> <span class="n">Discounted</span><span class="o">&lt;</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">ConferenceTicket</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">TaxedConferenceTicket</span> <span class="o">=</span> <span class="n">Taxed</span><span class="o">&lt;</span><span class="mf">0.19</span><span class="p">,</span> <span class="n">ConferenceTicket</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">TaxedDiscountedConferenceTicket</span> <span class="o">=</span> <span class="n">Taxed</span><span class="o">&lt;</span><span class="mf">0.19</span><span class="p">,</span> <span class="n">Discounted</span><span class="o">&lt;</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">ConferenceTicket</span><span class="o">&gt;&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">DiscountedTaxedConferenceTicket</span> <span class="o">=</span> <span class="n">Discounted</span><span class="o">&lt;</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">Taxed</span><span class="o">&lt;</span><span class="mf">0.19</span><span class="p">,</span> <span class="n">ConferenceTicket</span><span class="o">&gt;&gt;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áî±‰∫éÂú®ÁºñËØëÊó∂Ëß£ÂÜ≥ÊñπÊ°à‰∏≠ËøôÂõõÁßçÁ±ªÂûãÊ≤°ÊúâÂÖ±ÂêåÁöÑÂü∫Á±ªÔºåÊàëÁî®Âõõ‰∏™ÁâπÂÆöÁöÑ<code>std::vector</code>Â°´ÂÖÖÂÆÉ‰ª¨„ÄÇÁõ∏ÊØî‰πã‰∏ãÔºåÂØπ‰∫éÁªèÂÖ∏ÁöÑËøêË°åÊó∂Ëß£ÂÜ≥ÊñπÊ°àÔºåÊàë‰ΩøÁî®‰∫Ü‰∏Ä‰∏™<code>std::vector&lt;std::unique_ptr&lt;Item&gt;&gt;</code>„ÄÇÊÄªÂÖ±ÔºåÊàë‰∏∫‰∏§ÁßçÊñπÊ°àÂêÑÂàõÂª∫‰∫Ü10,000‰∏™È°πÁõÆÔºåÂπ∂Ë∞ÉÁî®‰∫Ü5,000Ê¨°<code>std::accumulate()</code>Êù•ËÆ°ÁÆóÊâÄÊúâÈ°πÁõÆÁöÑÊÄª‰ª∑„ÄÇ</p>
<p>Êúâ‰∫ÜËøô‰∫õËÉåÊôØ‰ø°ÊÅØÔºåËÆ©Êàë‰ª¨ÁúãÁúãÊÄßËÉΩÁªìÊûúÔºàË°®9-1Ôºâ„ÄÇÂÜçÊ¨°ÔºåÊàëÂØπÁªìÊûúËøõË°å‰∫ÜÂΩí‰∏ÄÂåñÂ§ÑÁêÜÔºåËøôÊ¨°ÊòØÁõ∏ÂØπ‰∫éËøêË°åÊó∂ÂÆûÁé∞ÁöÑÊÄßËÉΩ„ÄÇ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÁºñËØëÂô®</th>
<th>ÁªèÂÖ∏Ë£ÖÈ•∞Âô®</th>
<th>ÁºñËØëÊó∂Ë£ÖÈ•∞Âô®</th>
</tr>
</thead>
<tbody>
<tr>
<td>GCC 11.1</td>
<td>1.0</td>
<td>0.078067</td>
</tr>
<tr>
<td>Clang 11.1</td>
<td>1.0</td>
<td>0.080313</td>
</tr>
</tbody>
</table></div>
<p>Â¶ÇÂâçÊâÄËø∞ÔºåÁºñËØëÊó∂Ëß£ÂÜ≥ÊñπÊ°àÁöÑÊÄßËÉΩÊØîËøêË°åÊó∂Ëß£ÂÜ≥ÊñπÊ°àÊòæËëóÊõ¥Âø´ÔºöÂØπ‰∫éGCCÂíåClangÊù•ËØ¥ÔºåÂÆÉÂè™ÈúÄË¶ÅËøêË°åÊó∂Ëß£ÂÜ≥ÊñπÊ°àÂ§ßÁ∫¶8%ÁöÑÊó∂Èó¥ÔºåÂõ†Ê≠§Âø´‰∫Ü‰∏Ä‰∏™Êï∞ÈáèÁ∫ß‰ª•‰∏ä„ÄÇÊàëÁü•ÈÅìÔºåËøôÂê¨Ëµ∑Êù•ÂæàÊ£í„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ∞ΩÁÆ°ÁºñËØëÊó∂Ëß£ÂÜ≥ÊñπÊ°àÁöÑÊÄßËÉΩÈùûÂá°Ôºå‰ΩÜÂÆÉ‰πüÊúâ‰∏Ä‰∫õÊΩúÂú®ÁöÑ‰∏•ÈáçÂ±ÄÈôêÊÄßÔºöÁî±‰∫éÂÆåÂÖ®‰æùËµñÊ®°ÊùøÔºåÊ≤°Êúâ‰ªª‰ΩïËøêË°åÊó∂ÁÅµÊ¥ªÊÄß„ÄÇ</p>
<p>Áî±‰∫éÁîöËá≥ÊäòÊâ£ÂíåÁ®éÁéá‰πüÊòØÈÄöËøáÊ®°ÊùøÂèÇÊï∞ÂÆûÁé∞ÁöÑÔºåÊØèÁßç‰∏çÂêåÁöÑÊØîÁéáÈÉΩÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÂûã„ÄÇËøôÂèØËÉΩÂØºËá¥ÁºñËØëÊó∂Èó¥Êõ¥ÈïøÔºåÂπ∂ÁîüÊàêÊõ¥Â§ö‰ª£Á†ÅÔºàÂç≥Êõ¥Â§ßÁöÑÂèØÊâßË°åÊñá‰ª∂Ôºâ„ÄÇ</p>
<p>Ê≠§Â§ñÔºåÊúâÁêÜÁî±ËÆ§‰∏∫ÊâÄÊúâÁ±ªÊ®°ÊùøÈÉΩÈ©ªÁïôÂú®Â§¥Êñá‰ª∂‰∏≠ÔºåËøôÂÜçÊ¨°Â¢ûÂä†‰∫ÜÁºñËØëÊó∂Èó¥ÔºåÂπ∂ÂèØËÉΩÊö¥Èú≤ÊØîÊúüÊúõÊõ¥Â§öÁöÑÂÆûÁé∞ÁªÜËäÇ„ÄÇÊõ¥ÈáçË¶ÅÁöÑÊòØÔºåÂØπÂÆûÁé∞ÁªÜËäÇÁöÑÊõ¥ÊîπÂπøÊ≥õÂèØËßÅÔºåÂèØËÉΩ‰ºöÂØºËá¥Â§ßËßÑÊ®°ÈáçÊñ∞ÁºñËØë„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÊúÄÈôêÂà∂Âõ†Á¥†‰ºº‰πéÊòØÂè™ÊúâÂú®ÁºñËØëÊó∂ÊâÄÊúâ‰ø°ÊÅØÈÉΩÂèØÁî®ÁöÑÊÉÖÂÜµ‰∏ãÊâçËÉΩ‰ΩøÁî®Ê≠§Ëß£ÂÜ≥ÊñπÊ°à„ÄÇÂõ†Ê≠§ÔºåÊÇ®ÂèØËÉΩÂè™Âú®Â∞ëÊï∞ÁâπÊÆäÊÉÖÂÜµ‰∏ãËÉΩËææÂà∞ËøôÁßçÊÄßËÉΩÊ∞¥Âπ≥„ÄÇ</p>
<p><strong>Âü∫‰∫éÂÄºÁöÑËøêË°åÊó∂Ë£ÖÈ•∞Âô®</strong></p>
<p>Áî±‰∫éÁºñËØëÊó∂Ë£ÖÈ•∞Âô®ËôΩÁÑ∂ÈÄüÂ∫¶Âø´‰ΩÜËøêË°åÊó∂ÁÅµÊ¥ªÊÄßÈùûÂ∏∏ÊúâÈôêÔºåÁé∞Âú®Êàë‰ª¨Â∞ÜÊ≥®ÊÑèÂäõËΩ¨ÂêëÁ¨¨‰∫åÁßçÂü∫‰∫éÂÄºÁöÑË£ÖÈ•∞Âô®ÂÆûÁé∞„ÄÇÈÄöËøáËøôÁßçÂÆûÁé∞ÔºåÊàë‰ª¨Â∞ÜÂõûÂà∞Âä®ÊÄÅÂ§öÊÄÅÊÄßÁöÑÈ¢ÜÂüüÔºå‰∫´ÂèóÂÖ∂ÊâÄÊúâÁöÑËøêË°åÊó∂ÁÅµÊ¥ªÊÄß„ÄÇ</p>
<p>Êó¢ÁÑ∂ÊÇ®Â∑≤Áªè‰∫ÜËß£‰∫ÜË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÔºåÊÇ®‰ºöÊÑèËØÜÂà∞Êàë‰ª¨ÈúÄË¶ÅËÉΩÂ§üËΩªÊùæÊ∑ªÂä†Êñ∞Á±ªÂûãÔºöÊñ∞ÁöÑÈ°πÁõÆÁ±ªÂûã‰ª•ÂèäÊñ∞ÁöÑ‰ª∑Ê†º‰øÆÈ•∞Á¨¶„ÄÇÂõ†Ê≠§ÔºåÂ∞Ü‚ÄúÂáÜÂàô35Ôºö‰ΩøÁî®Ë£ÖÈ•∞Âô®Â±ÇÊ¨°ÂåñÂú∞Ê∑ªÂä†Ëá™ÂÆö‰πâ‚Äù‰∏≠ÁöÑË£ÖÈ•∞Âô®ÂÆûÁé∞ËΩ¨Êç¢‰∏∫Âü∫‰∫éÂÄºËØ≠‰πâÁöÑÂÆûÁé∞ÊâÄÈÄâÊã©ÁöÑËÆæËÆ°Ê®°ÂºèÊòØÁ±ªÂûãÊì¶Èô§„ÄÇ‰ª•‰∏ã<code>Item</code>Á±ªÂÆûÁé∞‰∫ÜÊàë‰ª¨ÂÆö‰ª∑È°πÁõÆÁöÑÊã•ÊúâÁ±ªÂûãÊì¶Èô§ÂåÖË£ÖÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Item.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Money.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">Concept</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">virtual</span> <span class="o">~</span><span class="n">Concept</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">virtual</span> <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">virtual</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Concept</span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">Model</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Concept</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">explicit</span> <span class="nf">Model</span><span class="p">(</span><span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">item</span><span class="p">)</span> <span class="o">:</span> <span class="n">item_</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">        <span class="k">explicit</span> <span class="nf">Model</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span> <span class="n">item</span><span class="p">)</span> <span class="o">:</span> <span class="n">item_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">item</span><span class="p">))</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">item_</span><span class="p">.</span><span class="n">price</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Concept</span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">T</span> <span class="n">item_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Concept</span><span class="o">&gt;</span> <span class="n">pimpl_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™ÂÆûÁé∞‰∏≠Ôºå<code>Item</code>Á±ªÂú®ÂÖ∂ÁßÅÊúâÈÉ®ÂàÜÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂµåÂ•óÁöÑÂü∫Á°Ä<code>Concept</code>Á±ª„ÄÇÈÄöÂ∏∏Ôºå<code>Concept</code>Âü∫Á°ÄÁ±ª‰ª£Ë°®Ë¢´Â∞ÅË£ÖÁ±ªÂûãÁöÑÈ¢ÑÊúüË°å‰∏∫Ë¶ÅÊ±ÇÔºåËøô‰∫õË¶ÅÊ±ÇÈÄöËøá<code>price()</code>Âíå<code>clone()</code>ÊàêÂëòÂáΩÊï∞Ë°®Ëææ„ÄÇËøô‰∫õË¶ÅÊ±ÇÁî±ÂµåÂ•óÁöÑ<code>Model</code>Á±ªÊ®°ÊùøÂÆûÁé∞„ÄÇ<code>Model</code>ÈÄöËøáËΩ¨ÂèëË∞ÉÁî®Â≠òÂÇ®ÁöÑ<code>item_</code>Êï∞ÊçÆÊàêÂëòÁöÑ<code>price()</code>ÊàêÂëòÂáΩÊï∞Êù•ÂÆûÁé∞<code>price()</code>ÂáΩÊï∞ÔºåÂπ∂ÈÄöËøáÂàõÂª∫Â≠òÂÇ®È°πÁöÑÂâØÊú¨Êù•ÂÆûÁé∞<code>clone()</code>ÂáΩÊï∞„ÄÇ</p>
<p><code>Item</code>Á±ªÁöÑÂÖ¨ÂÖ±ÈÉ®ÂàÜÂ∫îËØ•ÁúãËµ∑Êù•ÂæàÁÜüÊÇâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Item.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Item</span><span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">pimpl_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">item</span><span class="p">)))</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Item</span><span class="p">(</span><span class="n">Item</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">item</span><span class="p">)</span> <span class="o">:</span> <span class="n">pimpl_</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">pimpl_</span><span class="o">-&gt;</span><span class="n">clone</span><span class="p">())</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Item</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Item</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">item</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">pimpl_</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">pimpl_</span><span class="o">-&gt;</span><span class="n">clone</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Item</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Item</span><span class="p">(</span><span class="n">Item</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Item</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Item</span><span class="o">&amp;&amp;</span> <span class="n">item</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">pimpl_</span><span class="o">-&gt;</span><span class="n">price</span><span class="p">();</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Èô§‰∫ÜÈÄöÂ∏∏ÁöÑRule of 5ÂÆûÁé∞Â§ñÔºåËØ•Á±ªËøòÈÖçÂ§á‰∫Ü‰∏Ä‰∏™Êé•ÂèóÂêÑÁßçÈ°πÁõÆÁöÑÊ®°ÊùøÊûÑÈÄ†ÂáΩÊï∞„ÄÇÊúÄÂêé‰ΩÜÂêåÊ†∑ÈáçË¶ÅÁöÑÊòØÔºåËØ•Á±ªÊèê‰æõ‰∫Ü‰∏Ä‰∏™<code>price()</code>ÊàêÂëòÂáΩÊï∞ÔºåÊ®°‰ªøÊâÄÊúâÈ°πÁõÆÁöÑÈ¢ÑÊúüÊé•Âè£„ÄÇ</p>
<p>Êúâ‰∫ÜËøô‰∏™ÂåÖË£ÖÁ±ªÔºåÊÇ®ÂèØ‰ª•ËΩªÊùæÊ∑ªÂä†Êñ∞È°πÁõÆÔºöÊó¢‰∏çÈúÄË¶Å‰æµÂÖ•ÊÄß‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÔºå‰πü‰∏çÈúÄË¶Å‰ΩøÁî®Âü∫Á±ª„ÄÇ‰ªª‰ΩïÊèê‰æõ<code>price()</code>ÊàêÂëòÂáΩÊï∞Âπ∂ÂèØÂ§çÂà∂ÁöÑÁ±ªÈÉΩÂèØ‰ª•Â∑•‰Ωú„ÄÇÂπ∏ËøêÁöÑÊòØÔºåËøôÂåÖÊã¨Êàë‰ª¨ÁöÑÁºñËØëÊó∂Ë£ÖÈ•∞Âô®ÂÆûÁé∞‰∏≠ÁöÑ<code>ConferenceTicket</code>Á±ªÔºåÂÆÉÊèê‰æõ‰∫ÜÊàë‰ª¨ÈúÄË¶ÅÁöÑ‰∏ÄÂàáÂπ∂‰∏îÂü∫‰∫éÂÄºËØ≠‰πâ„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåÂØπ‰∫é<code>Discounted</code>Âíå<code>Taxed</code>Á±ªÊù•ËØ¥Âπ∂ÈùûÂ¶ÇÊ≠§ÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÊúüÊúõ‰ª•Ê®°ÊùøÂèÇÊï∞ÁöÑÂΩ¢ÂºèÊé•Êî∂Ë£ÖÈ•∞È°πÁõÆ„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Âú®Á±ªÂûãÊì¶Èô§‰∏ä‰∏ãÊñá‰∏≠ÈáçÊñ∞ÂÆûÁé∞‰∫Ü<code>Discounted</code>Âíå<code>Taxed</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Discounted.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Item.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Discounted</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Discounted</span><span class="p">(</span><span class="kt">double</span> <span class="n">discount</span><span class="p">,</span> <span class="n">Item</span> <span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">item_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">item</span><span class="p">)),</span> <span class="n">factor_</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">discount</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">item_</span><span class="p">.</span><span class="n">price</span><span class="p">()</span> <span class="o">*</span> <span class="n">factor_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Item</span> <span class="n">item_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">factor_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Taxed.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Item.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Taxed</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Taxed</span><span class="p">(</span><span class="kt">double</span> <span class="n">taxRate</span><span class="p">,</span> <span class="n">Item</span> <span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">item_</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">item</span><span class="p">)),</span> <span class="n">factor_</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">taxRate</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="nf">price</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">item_</span><span class="p">.</span><span class="n">price</span><span class="p">()</span> <span class="o">*</span> <span class="n">factor_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Item</span> <span class="n">item_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">factor_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåËøô‰∏§‰∏™Á±ªÈÉΩÊ≤°ÊúâÊ¥æÁîüËá™‰ªª‰ΩïÂü∫Á±ªÔºå‰ΩÜÂÆÉ‰ª¨ÈÉΩÂÆåÁæéÂÆûÁé∞‰∫ÜË£ÖÈ•∞Âô®ËÆæËÆ°Ê®°Âºè„ÄÇ‰∏ÄÊñπÈù¢ÔºåÂÆÉ‰ª¨ÂÆûÁé∞‰∫Ü<code>Item</code>ÂåÖË£ÖÂô®ÊâÄÈúÄÁöÑÊìç‰ΩúÔºàÁâπÂà´ÊòØ<code>price()</code>ÊàêÂëòÂáΩÊï∞ÂíåÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÔºâÔºåÂè¶‰∏ÄÊñπÈù¢ÔºåÂÆÉ‰ª¨Êã•Êúâ‰∏Ä‰∏™<code>Item</code>„ÄÇÂõ†Ê≠§Ôºå‰∏§ËÄÖÈÉΩÂÖÅËÆ∏ÊÇ®‰ªªÊÑèÁªÑÂêàË£ÖÈ•∞Âô®ÔºåÂ¶Ç‰∏ã<code>main()</code>ÂáΩÊï∞ÊâÄÁ§∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ConferenceTicket.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Discounted.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Taxed.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 20%ÊäòÊâ£Ôºå15%Á®éÔºö(499*0.8)*1.15 = 459.08 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Item</span> <span class="n">item</span><span class="p">(</span><span class="n">Taxed</span><span class="p">(</span><span class="mf">0.19</span><span class="p">,</span> <span class="n">Discounted</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">ConferenceTicket</span><span class="p">{</span><span class="s">&#34;Core C++&#34;</span><span class="p">,</span> <span class="mf">499.0</span><span class="p">})));</span>
</span></span><span class="line"><span class="cl">    <span class="n">Money</span> <span class="k">const</span> <span class="n">totalPrice</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">price</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚ÄúÂìáÔºåËøôÂ§™Ê£í‰∫ÜÔºöÊ≤°ÊúâÊåáÈíàÔºåÊ≤°ÊúâÊâãÂä®ÂàÜÈÖçÔºåÊÑüËßâÈùûÂ∏∏Ëá™ÁÑ∂Áõ¥ËßÇ„ÄÇ‰ΩÜÂêåÊó∂ÔºåÂÆÉ‰πüÈùûÂ∏∏ÁÅµÊ¥ª„ÄÇËøôÂ•ΩÂæó‰∏çÂÉèÁúüÁöÑ‚Äî‚ÄîËÇØÂÆöÊúâÈô∑Èò±„ÄÇÊÄßËÉΩÊÄé‰πàÊ†∑Ôºü‚ÄùÊÇ®ËØ¥„ÄÇÂ•ΩÂêßÔºåÂê¨Ëµ∑Êù•ÊÇ®È¢ÑÊúü‰ºöÊúâÂÆåÂÖ®ÁöÑÊÄßËÉΩÂ¥©Ê∫É„ÄÇËÆ©Êàë‰ª¨ÂØπËøô‰∏™Ëß£ÂÜ≥ÊñπÊ°àËøõË°åÂü∫ÂáÜÊµãËØï„ÄÇÂΩìÁÑ∂ÔºåÊàë‰ΩøÁî®‰∏éÁºñËØëÊó∂ÁâàÊú¨Áõ∏ÂêåÁöÑÂü∫ÂáÜÊµãËØïÔºåÂπ∂Ê∑ªÂä†Âü∫‰∫éÁ±ªÂûãÊì¶Èô§ÁöÑÁ¨¨‰∏â‰∏™Ëß£ÂÜ≥ÊñπÊ°à„ÄÇÊÄßËÉΩÁªìÊûúÂ¶ÇË°®9-2ÊâÄÁ§∫„ÄÇ</p>
<p><strong>Ë°®9-2. Á±ªÂûãÊì¶Èô§Ë£ÖÈ•∞Âô®ÂÆûÁé∞ÁöÑÊÄßËÉΩÁªìÊûúÔºàÂΩí‰∏ÄÂåñÊÄßËÉΩÔºâ</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÁºñËØëÂô®</th>
<th>ÁªèÂÖ∏Ë£ÖÈ•∞Âô®</th>
<th>ÁºñËØëÊó∂Ë£ÖÈ•∞Âô®</th>
<th>Á±ªÂûãÊì¶Èô§Ë£ÖÈ•∞Âô®</th>
</tr>
</thead>
<tbody>
<tr>
<td>GCC 11.1</td>
<td>1.0</td>
<td>0.078067</td>
<td>0.997510</td>
</tr>
<tr>
<td>Clang 11.1</td>
<td>1.0</td>
<td>0.080313</td>
<td>0.971875</td>
</tr>
</tbody>
</table></div>
<p>Â¶ÇÊÇ®ÊâÄËßÅÔºåÊÄßËÉΩÂπ∂‰∏çÊØîÂÖ∂‰ªñÁªèÂÖ∏ËøêË°åÊó∂Ëß£ÂÜ≥ÊñπÊ°àÂ∑Æ„ÄÇÂÆûÈôÖ‰∏äÔºåÊÄßËÉΩÁîöËá≥ÁúãËµ∑Êù•Á®çÂ•Ω‰∏Ä‰∫õÔºå‰ΩÜËøôÂè™ÊòØ‰∏Ä‰∏™Â§öÊ¨°ËøêË°åÁöÑÂπ≥ÂùáÂÄºÔºå‰∏çÂ∫îËøá‰∫éÂº∫Ë∞É„ÄÇÁÑ∂ËÄåÔºåËØ∑ËÆ∞‰ΩèÔºåÊ≠£Â¶Ç‚ÄúÊåáÂçó33ÔºöÊ≥®ÊÑèÁ±ªÂûãÊì¶Èô§ÁöÑ‰ºòÂåñÊΩúÂäõ‚ÄùÊâÄÂ±ïÁ§∫ÁöÑÈÇ£Ê†∑ÔºåÊúâÂ§öÁßçÊñπÊ≥ïÂèØ‰ª•ÊèêÈ´òÁ±ªÂûãÊì¶Èô§Ëß£ÂÜ≥ÊñπÊ°àÁöÑÊÄßËÉΩ„ÄÇ</p>
<p>ËôΩÁÑ∂ÊÄßËÉΩÂèØËÉΩ‰∏çÊòØËøêË°åÊó∂Ëß£ÂÜ≥ÊñπÊ°àÁöÑ‰∏ªË¶Å‰ºòÂäøÔºàËá≥Â∞ë‰∏éÁºñËØëÊó∂Ëß£ÂÜ≥ÊñπÊ°àÁõ∏ÊØîÔºâÔºå‰ΩÜÂú®ËøêË°åÊó∂ÁÅµÊ¥ªÊÄßÊñπÈù¢Á°ÆÂÆûË°®Áé∞Âá∫Ëâ≤„ÄÇ‰æãÂ¶ÇÔºåÂèØ‰ª•Ê†πÊçÆÁî®Êà∑ËæìÂÖ•ÊàñËÆ°ÁÆóÁªìÊûúÂú®ËøêË°åÊó∂ÂÜ≥ÂÆöÊòØÂê¶Â∞Ü‰ªª‰Ωï<code>Item</code>ÂåÖË£πÂú®Âè¶‰∏Ä‰∏™Ë£ÖÈ•∞Âô®‰∏≠„ÄÇÂΩìÁÑ∂ÔºåËøôÂ∞ÜÂÜçÊ¨°ÁîüÊàê‰∏Ä‰∏™<code>Item</code>ÔºåÂÆÉÂèØ‰ª•‰∏éÂÖ∂‰ªñËÆ∏Â§ö<code>Item</code>‰∏ÄËµ∑Â≠òÂÇ®Âú®‰∏Ä‰∏™ÂÆπÂô®‰∏≠„ÄÇËøôÁ°ÆÂÆû‰∏∫ÊÇ®Êèê‰æõ‰∫ÜÂ∑®Â§ßÁöÑËøêË°åÊó∂ÁÅµÊ¥ªÊÄß„ÄÇ</p>
<p>Âè¶‰∏Ä‰∏™‰ºòÁÇπÊòØÂèØ‰ª•Êõ¥ËΩªÊùæÂú∞Âú®Ê∫êÊñá‰ª∂‰∏≠ÈöêËóèÂÆûÁé∞ÁªÜËäÇ„ÄÇËôΩÁÑ∂ËøôÂèØËÉΩÂØºËá¥ËøêË°åÊó∂ÊÄßËÉΩÁöÑÊçüÂ§±Ôºå‰ΩÜÂÆÉÂèØËÉΩ‰ºöÂ∏¶Êù•Êõ¥Â•ΩÁöÑÁºñËØëÊó∂Èó¥„ÄÇÊúÄÈáçË¶ÅÁöÑÊòØÔºöÂØπÈöêËóè‰ª£Á†ÅÁöÑ‰ªª‰Ωï‰øÆÊîπÈÉΩ‰∏ç‰ºöÂΩ±ÂìçÂÖ∂‰ªñ‰ª£Á†ÅÔºå‰ªéËÄåËäÇÁúÅÂ§ßÈáèÁöÑÈáçÊñ∞ÁºñËØëÔºåÂõ†‰∏∫ÂÆûÁé∞ÁªÜËäÇÂæóÂà∞‰∫ÜÊõ¥Âº∫ÁöÑÂ∞ÅË£Ö„ÄÇ</p>
<p>ÊÄªÁªìÊù•ËØ¥ÔºåÊó†ËÆ∫ÊòØÁºñËØëÊó∂ËøòÊòØËøêË°åÊó∂Ëß£ÂÜ≥ÊñπÊ°àÈÉΩÊòØÂü∫‰∫éÂÄºÁöÑÔºåÂπ∂ÂØºËá¥Áî®Êà∑‰ª£Á†ÅÊõ¥ÁÆÄÂçï„ÄÅÊõ¥ÊòìÁêÜËß£„ÄÇÁÑ∂ËÄåÔºåÂÆÉ‰ª¨‰πüÊúâÂêÑËá™ÁöÑ‰ºòÁº∫ÁÇπÔºöÂ∞ΩÁÆ°ËøêË°åÊó∂ÊñπÊ≥ïÊèê‰æõ‰∫ÜÊõ¥Â§ßÁöÑÁÅµÊ¥ªÊÄßÔºåËÄåÁºñËØëÊó∂ÊñπÊ≥ïÂú®ÊÄßËÉΩÊñπÈù¢Âç†ÊçÆ‰∏ªÂØºÂú∞‰Ωç„ÄÇÂÆûÈôÖ‰∏äÔºåÊÇ®ÂæàÂ∞ë‰ºöÂæóÂà∞Á∫ØÁ≤πÁöÑÁºñËØëÊó∂ÊàñËøêË°åÊó∂ÊñπÊ≥ïÔºåËÄåÊòØÁªèÂ∏∏ÂèëÁé∞Ëá™Â∑±Â§Ñ‰∫éËøô‰∏§ÁßçÊûÅÁ´Ø‰πãÈó¥ÁöÑÊüê‰∏™‰ΩçÁΩÆ„ÄÇÁ°Æ‰øùÊÇ®‰∫ÜËß£Ëá™Â∑±ÁöÑÈÄâÈ°πÔºöÊùÉË°°ÂÆÉ‰ª¨ÔºåÊâæÂà∞‰∏Ä‰∏™ÂÆåÁæéÁöÑÁªìÂêà‰∏§ÂÖ®ÂÖ∂ÁæéÁöÑÂ¶•ÂçèÊñπÊ°àÔºåÈÄÇÂêàÊÇ®ÁöÑÂÖ∑‰ΩìÊÉÖÂÜµ„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Ê≥®ÊÑèDecoratorËÆæËÆ°Ê®°ÂºèÁöÑËøêË°åÊó∂ÂíåÁºñËØëÊó∂ÂÆûÁé∞„ÄÇ</li>
<li>ÁêÜËß£ÁºñËØëÊó∂Ëß£ÂÜ≥ÊñπÊ°àÈÄöÂ∏∏ÊÄßËÉΩÊõ¥Â•ΩÔºå‰ΩÜ‰ºöÈôêÂà∂ËøêË°åÊó∂ÁÅµÊ¥ªÊÄßÂíåÂ∞ÅË£Ö„ÄÇ</li>
<li>Ë¶ÅÊòéÁôΩÔºåËøêË°åÊó∂Ëß£ÂÜ≥ÊñπÊ°àÊõ¥ÁÅµÊ¥ªÔºåÊõ¥ÂñÑ‰∫éÈöêËóèÁªÜËäÇÔºå‰ΩÜÊÄßËÉΩÊõ¥Â∑Æ„ÄÇ</li>
<li>ÈÄâÊã©ÂÄºËØ≠‰πâËß£ÂÜ≥ÊñπÊ°àËÄå‰∏çÊòØÂºïÁî®ËØ≠‰πâËß£ÂÜ≥ÊñπÊ°à„ÄÇ</li>
</ul>
<h2 id="Á¨¨ÂçÅÁ´†-Âçï‰æãÊ®°Âºè">Á¨¨ÂçÅÁ´† Âçï‰æãÊ®°Âºè
</h2><p>Âú®Êú¨Á´†‰∏≠ÔºåÊàë‰ª¨Â∞ÜÊé¢ËÆ®ÔºàËá≠ÂêçÊò≠ËëóÁöÑÔºâÂçï‰æãÊ®°Âºè„ÄÇÊàëÁü•ÈÅìÔºåÊÇ®ÂèØËÉΩÂ∑≤ÁªèÁÜüÊÇâÂçï‰æãÊ®°ÂºèÔºåÂπ∂‰∏îÂèØËÉΩÂ∑≤ÁªèÊúâ‰∫ÜÂº∫ÁÉàÁöÑÁúãÊ≥ïÔºåÁîöËá≥ÊúâÂèØËÉΩÊÇ®ËÆ§‰∏∫Âçï‰æãÊòØ‰∏ÄÁßçÂèçÊ®°ÂºèÔºåÂõ†Ê≠§‰ºöÈóÆËá™Â∑±ÊàëÊòØÂ¶Ç‰ΩïÈºìËµ∑ÂãáÊ∞îÂ∞ÜÂÆÉÂåÖÂê´Âú®ËøôÊú¨‰π¶‰∏≠ÁöÑ„ÄÇ</p>
<p>ÂÖ∂ÂÆûÔºåÊàëÊ∏ÖÊ•öÂçï‰æãÂπ∂‰∏çÁâπÂà´ÂèóÊ¨¢ËøéÔºåÂú®ËÆ∏Â§öÂúàÂ≠êÈáåÊúâÁõ∏ÂΩì‰∏çÂ•ΩÁöÑÂêçÂ£∞ÔºåÂ∞§ÂÖ∂ÊòØÂõ†‰∏∫Âçï‰æãÁöÑÂÖ®Â±ÄÊÄßË¥®„ÄÇÁÑ∂ËÄåÔºå‰ªéËøô‰∏™ËßíÂ∫¶Êù•ÁúãÔºå‰∫ÜËß£Âà∞C++Ê†áÂáÜÂ∫ì‰∏≠Â≠òÂú®‰∏Ä‰∫õ‚ÄúÂçï‰æã‚ÄùÂÆû‰æãÂèØËÉΩ‰ºöËÆ©ÊÇ®ÈùûÂ∏∏ÊÉäËÆ∂„ÄÇÁ°ÆÂÆûÂ¶ÇÊ≠§ÔºÅËÄå‰∏îÔºåÂù¶ÁéáÂú∞ËØ¥ÔºåÂÆÉ‰ª¨Â∑•‰ΩúÂæóÈùûÂ∏∏Â•ΩÔºÅÂõ†Ê≠§ÔºåÊàë‰ª¨Â∫îËØ•ËÆ§ÁúüËÆ®ËÆ∫‰ªÄ‰πàÊòØÂçï‰æãÊ®°ÂºèÔºå‰ΩïÊó∂‰ΩøÁî®Âçï‰æãÊ®°ÂºèÔºå‰ª•ÂèäÂ¶Ç‰ΩïÊ≠£Á°ÆÂ§ÑÁêÜÂçï‰æãÊ®°Âºè„ÄÇ</p>
<p><strong>ÊåáÂçó37ÔºöÂ∞ÜÂçï‰æãËßÜ‰∏∫ÂÆûÁé∞Ê®°ÂºèËÄåÈùûËÆæËÆ°Ê®°Âºè</strong></p>
<p>Âú®Êú¨ËäÇ‰∏≠ÔºåÊàëÂ∞ÜËß£ÈáäÂçï‰æãÊ®°ÂºèÔºåÂπ∂ÈÄöËøá‰∏Ä‰∏™ÈùûÂ∏∏Â∏∏Áî®ÁöÑÂÆûÁé∞‚Äî‚ÄîÊâÄË∞ìÁöÑMeyers&rsquo; SingletonÊù•ÊºîÁ§∫ÂÆÉÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑ„ÄÇÁÑ∂ËÄåÔºåÊàë‰πü‰ºöÂº∫ÁÉàÂª∫ËÆÆ‰∏çË¶ÅÂ∞ÜÂçï‰æãËßÜ‰∏∫ËÆæËÆ°Ê®°ÂºèÔºåËÄåÂ∫îÂ∞ÜÂÖ∂ËßÜ‰∏∫ÂÆûÁé∞Ê®°Âºè„ÄÇ</p>
<p><strong>ÊåáÂçó38Ôºö‰∏∫ÂèòÂåñÂíåÂèØÊµãËØïÊÄßËÆæËÆ°Âçï‰æã</strong></p>
<p>Êàë‰ª¨Êé•ÂèóËøôÊ†∑‰∏Ä‰∏™‰∫ãÂÆûÔºöÊúâÊó∂Êàë‰ª¨ÈúÄË¶Å‰∏ÄÁßçËß£ÂÜ≥ÊñπÊ°àÊù•Ë°®Á§∫‰ª£Á†Å‰∏≠ÁöÑÂ∞ëÊï∞ÂÖ®Â±ÄÊñπÈù¢„ÄÇËøôÊ≠£ÊòØÂçï‰æãÊ®°ÂºèÂ∏∏Ë¢´‰ΩøÁî®ÁöÑÂú∞Êñπ„ÄÇËøô‰πüÊÑèÂë≥ÁùÄÊàë‰ª¨‰ºöÈÅáÂà∞Âçï‰æãÈÄöÂ∏∏Â∏¶Êù•ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÔºöÂÖ®Â±ÄÁä∂ÊÄÅ„ÄÅËÆ∏Â§öÂº∫ËÄ¶ÂêàÁöÑ‰∫∫Â∑•‰æùËµñÂÖ≥Á≥ª‰ª•ÂèäÂèóÈôêÁöÑÂèØÂèòÊÄßÂíåÂèØÊµãËØïÊÄß„ÄÇËôΩÁÑ∂Ëøô‰∫õÂê¨Ëµ∑Êù•ÂÉèÊòØÈÅøÂÖç‰ΩøÁî®Âçï‰æãÁöÑÁªù‰Ω≥ÁêÜÁî±Ôºå‰ΩÜÊàë‰ºöÂêëÊÇ®Â±ïÁ§∫ÔºåÈÄöËøáÂêàÁêÜÁöÑËΩØ‰ª∂ËÆæËÆ°ÔºåÊÇ®ÂèØ‰ª•ÁªìÂêàÂçï‰æãÁöÑ‰ºòÁÇπ‰∏éÂá∫Ëâ≤ÁöÑÂèØÂèòÊÄßÂíåÂèØÊµãËØïÊÄß„ÄÇ</p>
<h3 id="ÂáÜÂàô37Â∞ÜÂçï‰æãËßÜ‰∏∫ÂÆûÁé∞Ê®°ÂºèËÄåÈùûËÆæËÆ°Ê®°Âºè">ÂáÜÂàô37ÔºöÂ∞ÜÂçï‰æãËßÜ‰∏∫ÂÆûÁé∞Ê®°ÂºèËÄåÈùûËÆæËÆ°Ê®°Âºè
</h3><p>ËÆ©Êàë‰ª¨È¶ñÂÖàËß£ÂÜ≥ÊàøÈó¥ÈáåÁöÑÂ§ßË±°ÈóÆÈ¢òÔºö <strong>Âçï‰æãÂπ∂‰∏çÊòØ‰∏ÄÁßçËÆæËÆ°Ê®°Âºè„ÄÇ</strong></p>
<p>Â¶ÇÊûúÊÇ®‰πãÂâçÊ≤°ÊúâÂê¨ËØ¥ËøáÂçï‰æãÔºåÈÇ£‰πàËøôÂèØËÉΩÂÆåÂÖ®Ê≤°Êúâ‰ªª‰ΩïÊÑè‰πâÔºå‰ΩÜËØ∑ËÄêÂøÉÂê¨ÊàëËß£Èáä„ÄÇÊàë‰ºöÂæàÂø´Ëß£Èáä‰ªÄ‰πàÊòØÂçï‰æãÊ®°Âºè„ÄÇÂ¶ÇÊûúÊÇ®Â∑≤ÁªèÂê¨ËØ¥ËøáÂçï‰æãÔºåÈÇ£‰πàÊÇ®Ë¶Å‰πàÁÇπÂ§¥Ë°®Á§∫ÂêåÊÑèÔºåÂπ∂Èú≤Âá∫ÂêåÊÉÖÁöÑ‚ÄúÊàëÁü•ÈÅì‚ÄùÁöÑË°®ÊÉÖÔºåË¶Å‰πà‰ºöÊÑüÂà∞ÈúáÊÉäÔºåÊúÄÂàù‰∏çÁü•ÈÅìËØ•ËØ¥‰ªÄ‰πà„ÄÇ‚Äú‰ΩÜÊòØ‰∏∫‰ªÄ‰πà‰∏çÊòØÂë¢Ôºü‚ÄùÊÇ®ÊúÄÁªàÂèØËÉΩ‰ºöÈóÆ„ÄÇ‚ÄúÂÆÉ‰∏çÊòØÂõõ‰∫∫ÁªÑÔºàGang of FourÔºâ‰π¶‰∏≠ÂéüÂßãËÆæËÆ°Ê®°Âºè‰πã‰∏ÄÂêóÔºü‚ÄùÊòØÁöÑÔºåÊÇ®ËØ¥ÂæóÂØπÔºöÂçï‰æãÊòØGoF‰π¶‰∏≠ËÆ∞ÂΩïÁöÑ23‰∏™ÂéüÂßãÊ®°Âºè‰πã‰∏Ä„ÄÇÂú®Êí∞ÂÜôÊú¨ÊñáÊó∂ÔºåÁª¥Âü∫ÁôæÁßëÁß∞ÂÖ∂‰∏∫ËÆæËÆ°Ê®°ÂºèÔºåÁîöËá≥Âú®Steve McConnellÁöÑÁïÖÈîÄ‰π¶„Ää‰ª£Á†ÅÂ§ßÂÖ®„Äã‰∏≠‰πüË¢´Âàó‰∏∫ËÆæËÆ°Ê®°Âºè„ÄÇÁÑ∂ËÄåÔºåÂÆÉ‰ªçÁÑ∂‰∏çÊòØ‰∏Ä‰∏™ËÆæËÆ°Ê®°ÂºèÔºåÂõ†‰∏∫ÂÆÉ‰∏çÂÖ∑Â§áËÆæËÆ°Ê®°ÂºèÁöÑÁâπÊÄß„ÄÇËÆ©ÊàëÊù•Ëß£Èáä‰∏Ä‰∏ã„ÄÇ</p>
<p><strong>1. Âçï‰æãÊ®°ÂºèËß£Èáä</strong></p>
<p>ÊúâÊó∂ÔºåÊÇ®ÂèØËÉΩÂ∏åÊúõÁ°Æ‰øùÊüê‰∏™ÁâπÂÆöÁ±ªÂè™Êúâ‰∏Ä‰∏™‰∏î‰ªÖÊúâ‰∏Ä‰∏™ÂÆû‰æã„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÊÇ®Êúâ‰∏Ä‰∏™‚Äú Highlander‚ÄùÊÉÖÂÜµÔºö‚ÄúÂè™ËÉΩÊúâ‰∏Ä‰∏™„ÄÇ‚ÄùËøôÂèØËÉΩÈÄÇÁî®‰∫éÁ≥ªÁªüËåÉÂõ¥ÁöÑÊï∞ÊçÆÂ∫ì„ÄÅÂîØ‰∏ÄÁöÑÊó•ÂøóËÆ∞ÂΩïÂô®„ÄÅÁ≥ªÁªüÊó∂Èíü„ÄÅÁ≥ªÁªüÈÖçÁΩÆÁ≠âÔºåÁÆÄËÄåË®Ä‰πãÔºå‰ªª‰Ωï‰∏çÂ∫îË¢´Â§öÊ¨°ÂÆû‰æãÂåñÁöÑÁ±ªÔºåÂõ†‰∏∫ÂÆÉ‰ª£Ë°®ÁöÑÊòØÂîØ‰∏ÄÂ≠òÂú®ÁöÑ‰∫ãÁâ©„ÄÇËøôÂ∞±ÊòØÂçï‰æãÊ®°ÂºèÁöÑÊÑèÂõæ„ÄÇ</p>
<p><strong>Âçï‰æãÊ®°Âºè</strong></p>
<p><strong>ÊÑèÂõæÔºö</strong> ‚ÄúÁ°Æ‰øù‰∏Ä‰∏™Á±ªÂè™Êúâ‰∏Ä‰∏™ÂÆû‰æãÔºåÂπ∂Êèê‰æõ‰∏Ä‰∏™ÂÖ®Â±ÄËÆøÈóÆÁÇπ„ÄÇ‚Äù</p>
<p>Ëøô‰∏™ÊÑèÂõæÁî±Âõõ‰∫∫ÁªÑÁî®Âõæ10-1‰∏≠ÁöÑUMLÂõæËøõË°å‰∫ÜÂèØËßÜÂåñÂ±ïÁ§∫ÔºåËØ•ÂõæÂºïÂÖ•‰∫Ü<code>instance()</code>ÂáΩÊï∞‰Ωú‰∏∫ÂîØ‰∏ÄÂÆû‰æãÁöÑÂÖ®Â±ÄËÆøÈóÆÁÇπ„ÄÇ</p>
<p><strong>Âõæ10-1. Âçï‰æãÊ®°ÂºèÁöÑUMLË°®Á§∫</strong></p>
<p>ÊúâÂ§öÁßçÊñπÊ≥ïÂèØ‰ª•ÈôêÂà∂ÂÆû‰æãÊï∞Èáè‰∏∫‰∏Ä‰∏™„ÄÇÂÖ∂‰∏≠ÊúÄÂÆûÁî®ÂíåÊúÄÂ∏∏ËßÅÁöÑÂçï‰æãÂΩ¢Âºè‰πã‰∏ÄÊòØMeyers&rsquo; Singleton„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∏™ÂÆûÁé∞‰∏∫Meyers&rsquo; SingletonÁöÑ<code>Database</code>Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Database.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Database</span> <span class="k">final</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">Database</span><span class="o">&amp;</span> <span class="n">instance</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="n">Database</span> <span class="n">db</span><span class="p">;</span>  <span class="c1">// The one, unique instance
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="n">db</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">write</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">read</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§ö‰∏éÊï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥ÁöÑÂäüËÉΩ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂèØËÉΩÂåÖÊã¨ÂØπÊï∞ÊçÆÊàêÂëòÁöÑËÆøÈóÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Database</span><span class="p">()</span> <span class="p">{}</span>  <span class="c1">// ÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Database</span><span class="p">(</span><span class="n">Database</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>  <span class="c1">// Á¶ÅÊ≠¢Êã∑Ë¥ùÊûÑÈÄ†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Database</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Database</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>  <span class="c1">// Á¶ÅÊ≠¢ËµãÂÄºÊìç‰Ωú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Database</span><span class="p">(</span><span class="n">Database</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>  <span class="c1">// Á¶ÅÊ≠¢ÁßªÂä®ÊûÑÈÄ†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Database</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Database</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>  <span class="c1">// Á¶ÅÊ≠¢ÁßªÂä®ËµãÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂèØËÉΩÂåÖÂê´‰∏Ä‰∫õÊï∞ÊçÆÊàêÂëò
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Meyers&rsquo; SingletonÁöÑÊ†∏ÂøÉÂú®‰∫éÔºåÊÇ®Âè™ËÉΩÈÄöËøáÂÖ¨ÂÖ±ÈùôÊÄÅ<code>instance()</code>ÂáΩÊï∞ËÆøÈóÆ<code>Database</code>Á±ªÁöÑÂçï‰∏ÄÂÆû‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Database.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Á¨¨‰∏ÄÊ¨°ËÆøÈóÆÔºåÂàõÂª∫Êï∞ÊçÆÂ∫ìÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Database</span><span class="o">&amp;</span> <span class="n">db1</span> <span class="o">=</span> <span class="n">Database</span><span class="o">::</span><span class="n">instance</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Á¨¨‰∫åÊ¨°ËÆøÈóÆÔºåËøîÂõûÂêå‰∏Ä‰∏™ÂØπË±°ÁöÑÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Database</span><span class="o">&amp;</span> <span class="n">db2</span> <span class="o">=</span> <span class="n">Database</span><span class="o">::</span><span class="n">instance</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">assert</span><span class="p">(</span><span class="o">&amp;</span><span class="n">db1</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">db2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆûÈôÖ‰∏äÔºåËøô‰∏™ÂáΩÊï∞ÊòØËé∑Âèñ<code>Database</code>ÁöÑÂîØ‰∏ÄÈÄîÂæÑÔºöÊâÄÊúâÂèØËÉΩÁî®‰∫éÂàõÂª∫„ÄÅÊã∑Ë¥ùÊàñÁßªÂä®ÂÆû‰æãÁöÑÂäüËÉΩÈÉΩË¢´Â£∞Êòé‰∏∫ÁßÅÊúâÊàñÊòæÂºèÂà†Èô§„ÄÇËôΩÁÑ∂ËøôÁúãËµ∑Êù•Áõ∏ÂΩìÁÆÄÂçïÔºå‰ΩÜÊúâ‰∏Ä‰∏™ÂÆûÁé∞ÁªÜËäÇÁâπÂà´ÂÄºÂæóÊ≥®ÊÑèÔºöËØ∑Ê≥®ÊÑèÔºåÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÊòØÊòæÂºèÂÆö‰πâËÄå‰∏çÊòØÈªòËÆ§ÁîüÊàêÁöÑ„ÄÇÂéüÂõ†ÊòØÂ¶ÇÊûúÂÆÉÊòØÈªòËÆ§ÁîüÊàêÁöÑÔºåÂú®C++17‰πãÂâçÔºåÂèØ‰ª•ÈÄöËøáÁ©∫ÁöÑÂ§ßÊã¨Âè∑ÂàùÂßãÂåñ‰∏Ä‰∏™<code>Database</code>ÂÆû‰æãÔºåÂç≥ÈÄöËøáÂÄºÂàùÂßãÂåñÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Database</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Â¶ÇÂâçÊâÄËø∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Database</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>  <span class="c1">// ÁºñËØëÂô®ÁîüÊàêÁöÑÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Â¶ÇÂâçÊâÄËø∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Database</span> <span class="n">db</span><span class="p">;</span>    <span class="c1">// ‰∏çÁºñËØëÔºöÈªòËÆ§ÂàùÂßãÂåñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Database</span> <span class="n">db</span><span class="p">{};</span>  <span class="c1">// Â∑•‰ΩúÊ≠£Â∏∏ÔºåÂõ†‰∏∫ÂÄºÂàùÂßãÂåñÂØºËá¥ËÅöÂêàÂàùÂßãÂåñÔºå
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="c1">// Âõ†‰∏∫DatabaseÊòØ‰∏Ä‰∏™ËÅöÂêàÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®C++17‰πãÂâçÔºå<code>Database</code>Á±ªË¢´ËßÜ‰∏∫ËÅöÂêàÁ±ªÂûãÔºåËøôÊÑèÂë≥ÁùÄÂÄºÂàùÂßãÂåñÂ∞ÜÈÄöËøáËÅöÂêàÂàùÂßãÂåñËøõË°å„ÄÇËÅöÂêàÂàùÂßãÂåñ‰ºöÂøΩÁï•ÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂåÖÊã¨ÂÖ∂ÁßÅÊúâÂ±ûÊÄßÔºåÂπ∂ÁÆÄÂçïÂú∞ÊâßË°åÂØπË±°ÁöÑÈõ∂ÂàùÂßãÂåñ„ÄÇÂõ†Ê≠§ÔºåÂÄºÂàùÂßãÂåñÂÖÅËÆ∏ÊÇ®‰ªçÁÑ∂ÂàõÂª∫‰∏Ä‰∏™ÂÆû‰æã„ÄÇÁÑ∂ËÄåÔºåÂ¶ÇÊûúÊÇ®Êèê‰æõ‰∫ÜÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂàôËØ•Á±ª‰∏çÂÜçË¢´ËßÜ‰∏∫ËÅöÂêàÁ±ªÂûãÔºå‰ªéËÄåÈò≤Ê≠¢‰∫ÜËÅöÂêàÂàùÂßãÂåñ„ÄÇ</p>
<p><code>instance()</code>ÂáΩÊï∞ÊòØÂü∫‰∫éÈùôÊÄÅÂ±ÄÈÉ®ÂèòÈáèÂÆûÁé∞ÁöÑ„ÄÇËøôÊÑèÂë≥ÁùÄÁ¨¨‰∏ÄÊ¨°ÊéßÂà∂ÊµÅÁªèËøáÂ£∞ÊòéÊó∂ÔºåÂèòÈáè‰ºöÂú®Á∫øÁ®ãÂÆâÂÖ®ÁöÑÊñπÂºè‰∏ãÂàùÂßãÂåñÔºåÂπ∂Âú®ÂêéÁª≠Ë∞ÉÁî®‰∏≠Ë∑≥ËøáÂàùÂßãÂåñ„ÄÇÊØèÊ¨°Ë∞ÉÁî®ÔºåÊó†ËÆ∫ÊòØÁ¨¨‰∏ÄÊ¨°ËøòÊòØ‰πãÂêéÁöÑË∞ÉÁî®ÔºåÂáΩÊï∞ÈÉΩ‰ºöËøîÂõûÂØπÈùôÊÄÅÂ±ÄÈÉ®ÂèòÈáèÁöÑÂºïÁî®„ÄÇ</p>
<p>ÂÖ∂‰ΩôÁöÑ<code>Database</code>Á±ªÂü∫Êú¨‰∏äÂ∞±ÊòØÊÇ®ÊúüÊúõ‰ªéË°®Á§∫Êï∞ÊçÆÂ∫ìÁöÑÁ±ª‰∏≠ÁúãÂà∞ÁöÑÂÜÖÂÆπÔºöÊúâ‰∏Ä‰∫õÂÖ¨ÂÖ±ÁöÑ„ÄÅ‰∏éÊï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥ÁöÑÂáΩÊï∞Ôºà‰æãÂ¶Ç<code>write()</code>Âíå<code>read()</code>ÔºâÔºåÂπ∂‰∏îÂèØËÉΩÊúâ‰∏Ä‰∫õÊï∞ÊçÆÊàêÂëòÂèäÂÖ∂ËÆøÈóÆÂáΩÊï∞„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÈô§‰∫Ü<code>instance()</code>ÊàêÂëòÂáΩÊï∞ÂíåÁâπÊÆäÁöÑÊàêÂëòÂáΩÊï∞Â§ñÔºå<code>Database</code>Âè™ÊòØ‰∏Ä‰∏™ÊôÆÈÄöÁöÑÁ±ª„ÄÇ</p>
<p>ÈÄöËøáËøôÁßçÊñπÂºèÔºåMeyers&rsquo; Singleton‰∏ç‰ªÖ‰øùËØÅ‰∫ÜÂçï‰æãÁöÑÂîØ‰∏ÄÊÄßÔºåËøòÈÅøÂÖç‰∫ÜËÆ∏Â§öÂÖ∂‰ªñÂçï‰æãÂÆûÁé∞‰∏≠Â∏∏ËßÅÁöÑÂ§çÊùÇÊÄßÂíåÊΩúÂú®ÈóÆÈ¢ò„ÄÇËøôÁßçÂÆûÁé∞ÊñπÂºèÁÆÄÂçï„ÄÅÈ´òÊïà‰∏îÁ∫øÁ®ãÂÆâÂÖ®Ôºå‰ΩøÂÖ∂Êàê‰∏∫ËÆ∏Â§öÂú∫ÊôØ‰∏ãÁöÑÈ¶ñÈÄâÊñπÊ°à„ÄÇ</p>
<p><strong>Âçï‰æãÊ®°ÂºèÂπ∂‰∏çÁÆ°ÁêÜÊàñÂáèÂ∞ë‰æùËµñÂÖ≥Á≥ª</strong></p>
<p>Áé∞Âú®ÔºåËÄÉËôëÂà∞Âçï‰æãÁöÑ‰∏ÄÁßçÂèØËÉΩÂÆûÁé∞ÔºåËÆ©Êàë‰ª¨ÂõûÂà∞ÊàëÁöÑ‰∏ªÂº†ÔºöÂçï‰æãÂπ∂‰∏çÊòØ‰∏ÄÁßçËÆæËÆ°Ê®°Âºè„ÄÇÈ¶ñÂÖàÔºåËÆ©Êàë‰ª¨ÂõûÈ°æ‰∏Ä‰∏ãÊàëÂú®‚ÄúÂáÜÂàô11ÔºöÁêÜËß£ËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑ‚Äù‰∏≠ÂÆö‰πâÁöÑËÆæËÆ°Ê®°ÂºèÁöÑÁâπÊÄßÔºö</p>
<p><strong>ËÆæËÆ°Ê®°ÂºèÔºö</strong></p>
<ul>
<li>Êúâ‰∏Ä‰∏™ÂêçÁß∞</li>
<li>Êê∫Â∏¶ÊÑèÂõæ</li>
<li>ÂºïÂÖ•ÊäΩË±°</li>
<li>Â∑≤Ë¢´ËØÅÊòéÊúâÊïà</li>
</ul>
<p>Âçï‰æãÊ®°ÂºèÁ°ÆÂÆûÊúâ‰∏Ä‰∏™ÂêçÁß∞ÔºåÂπ∂‰∏îÁ°ÆÂÆûÊúâÂÖ∂ÊÑèÂõæ„ÄÇËøô‰∏ÄÁÇπÊØ´Êó†ÁñëÈóÆ„ÄÇÊàë‰πü‰ºöÂ£∞Áß∞ÂÆÉÂ§öÂπ¥Êù•Â∑≤ÁªèË¢´ËØÅÊòéÊúâÊïàÔºàÂ∞ΩÁÆ°ÂèØËÉΩÊúâ‰∏Ä‰∫õÊÄÄÁñëÁöÑÂ£∞Èü≥ÊåáÂá∫Âçï‰æãÊ®°ÂºèÁõ∏ÂΩìËá≠ÂêçÊò≠ËëóÔºâ„ÄÇÁÑ∂ËÄåÔºåÂÆÉÂπ∂Ê≤°ÊúâÂºïÂÖ•‰ªª‰ΩïÊäΩË±°ÔºöÊ≤°ÊúâÂü∫Á±ªÔºåÊ≤°ÊúâÊ®°ÊùøÂèÇÊï∞Ôºå‰ªÄ‰πàÈÉΩÊ≤°Êúâ„ÄÇÂçï‰æãÊú¨Ë∫´‰∏ç‰ª£Ë°®ÊäΩË±°Ôºå‰πü‰∏çÂºïÂÖ•ÊäΩË±°„ÄÇÂÆûÈôÖ‰∏äÔºåÂÆÉÂπ∂‰∏çÂÖ≥ÂøÉ‰ª£Á†ÅÁöÑÁªìÊûÑÊàñÂÆû‰Ωì‰πãÈó¥ÁöÑ‰∫§‰∫íÂíå‰æùËµñÂÖ≥Á≥ªÔºåÂõ†Ê≠§ÂÆÉÂπ∂‰∏çÊó®Âú®ÁÆ°ÁêÜÂíåÂáèÂ∞ë‰æùËµñ„ÄÇÁÑ∂ËÄåÔºåËøôÊòØÊàëÂÆö‰πâ‰∏∫ËΩØ‰ª∂ËÆæËÆ°‰∏çÂèØÂàÜÂâ≤ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ</p>
<p>Áõ∏ÂèçÔºåÂçï‰æãÁöÑÈáçÁÇπÊòØÂ∞ÜÂÆû‰æãÁöÑÊï∞ÈáèÈôêÂà∂‰∏∫ÊÅ∞Â•Ω‰∏Ä‰∏™„ÄÇÂõ†Ê≠§ÔºåÂçï‰æã‰∏çÊòØËÆæËÆ°Ê®°ÂºèÔºåËÄåÂè™ÊòØ‰∏Ä‰∏™ÂÆûÁé∞Ê®°Âºè„ÄÇ</p>
<p><strong>ÈÇ£‰πà‰∏∫‰ªÄ‰πàÂú®ËÆ∏Â§öÈáçË¶ÅËµÑÊñô‰∏≠ÂÆÉË¢´Âàó‰∏∫ËÆæËÆ°Ê®°ÂºèÂë¢Ôºü</strong></p>
<p>ËøôÊòØ‰∏Ä‰∏™ÂÖ¨Âπ≥‰∏îÂ•ΩÁöÑÈóÆÈ¢ò„ÄÇÂØπÊ≠§ÂèØËÉΩÊúâ‰∏â‰∏™Á≠îÊ°àÔºö</p>
<ol>
<li><strong>Âú®ÂÖ∂‰ªñÁºñÁ®ãËØ≠Ë®Ä‰∏≠ÔºåÁâπÂà´ÊòØÈÇ£‰∫õÊØè‰∏™Á±ªÈÉΩÂèØ‰ª•Ëá™Âä®‰ª£Ë°®ÊäΩË±°ÁöÑËØ≠Ë®ÄÔºåÊÉÖÂÜµÂèØËÉΩ‰∏çÂêå„ÄÇ</strong> ËôΩÁÑ∂ÊàëÊâøËÆ§Ëøô‰∏ÄÁÇπÔºå‰ΩÜÊàë‰ªçÁÑ∂ËÆ§‰∏∫Âçï‰æãÊ®°ÂºèÁöÑ‰∏ªË¶ÅÁõÆÊ†áÊòØÈíàÂØπÂÆûÁé∞ÁªÜËäÇÔºåËÄå‰∏çÊòØ‰æùËµñÊÄßÂíåËß£ËÄ¶„ÄÇÂ∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÂú®Êüê‰∫õÁºñÁ®ãËØ≠Ë®Ä‰∏≠ÔºåÂçï‰æãÊ®°ÂºèÂèØËÉΩ‰ºöÊúâ‰∏çÂêåÁöÑË°®Áé∞ÂΩ¢ÂºèÂíåÁî®ÈÄî„ÄÇ</li>
<li><strong>Âçï‰æãÈùûÂ∏∏Â∏∏Áî®ÔºàÂ∞ΩÁÆ°ÁªèÂ∏∏‰πüË¢´ËØØÁî®ÔºâÔºåÂõ†Ê≠§ÂÆÉÁ°ÆÂÆûÊòØ‰∏ÄÁßçÊ®°Âºè„ÄÇ</strong> Áî±‰∫éËÆ∏Â§ö‰∏çÂêåÁöÑÁºñÁ®ãËØ≠Ë®Ä‰∏≠ÈÉΩÊúâÂçï‰æãÔºåÂÆÉÁúãËµ∑Êù•‰∏ç‰ªÖ‰ªÖÊòØC++ÁºñÁ®ãËØ≠Ë®Ä‰∏≠ÁöÑ‰∏Ä‰∏™ÊÉØÁî®Ê≥ï„ÄÇÂõ†Ê≠§ÔºåÂ∞ÜÂÖ∂Áß∞‰∏∫ËÆæËÆ°Ê®°Âºè‰ºº‰πéÊòØÂêàÁêÜÁöÑ„ÄÇËøô‰∏ÄÁ≥ªÂàóËÆ∫ÁÇπÂê¨Ëµ∑Êù•ÂèØËÉΩÊòØÊúâÈÅìÁêÜÁöÑÔºå‰ΩÜÊàëËÆ§‰∏∫ÂÆÉÊú™ËÉΩÂå∫ÂàÜËΩØ‰ª∂ËÆæËÆ°ÂíåÂÆûÁé∞ÁªÜËäÇ„ÄÇËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàÂú®‚ÄúÊåáÂçó11ÔºöÁêÜËß£ËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑ‚Äù‰∏≠ÔºåÊàëÂºïÂÖ•‰∫Ü‚ÄúÂÆûÁé∞Ê®°Âºè‚ÄùËøô‰∏™ÊúØËØ≠Ôºå‰ª•Âå∫ÂàÜÂÉèÂçï‰æãËøôÊ†∑ÁöÑËØ≠Ë®ÄÊó†ÂÖ≥ÁöÑÊ®°ÂºèÁ±ªÂûã„ÄÇ</li>
<li><strong>ÊàëÁõ∏‰ø°Êàë‰ª¨‰ªçÂú®ÈÄêÊ≠•ÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÂíåËÆæËÆ°Ê®°Âºè„ÄÇ</strong> ÂØπËΩØ‰ª∂ËÆæËÆ°Ê≤°Êúâ‰∏Ä‰∏™ÂÖ±ÂêåÁöÑÂÆö‰πâ„ÄÇÊ≠£Âõ†‰∏∫Â¶ÇÊ≠§ÔºåÊàëÂú®‚ÄúÊåáÂçó1ÔºöÁêÜËß£ËΩØ‰ª∂ËÆæËÆ°ÁöÑÈáçË¶ÅÊÄß‚Äù‰∏≠ÊèêÂá∫‰∫Ü‰∏Ä‰∏™ÂÆö‰πâ„ÄÇÂØπËÆæËÆ°Ê®°Âºè‰πüÊ≤°Êúâ‰∏Ä‰∏™ÂÖ±ÂêåÁöÑÂÆö‰πâ„ÄÇËøô‰πüÊòØ‰∏∫‰ªÄ‰πàÊàëÂú®‚ÄúÊåáÂçó11ÔºöÁêÜËß£ËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑ‚Äù‰∏≠ÊèêÂá∫‰∏Ä‰∏™ÂÆö‰πâÁöÑÂéüÂõ†„ÄÇÊàëÂùö‰ø°Êàë‰ª¨ÂøÖÈ°ªÊõ¥Â§öÂú∞ËÆ®ËÆ∫ËΩØ‰ª∂ËÆæËÆ°ÂíåÊ®°ÂºèÔºå‰ª•‰æøËææÊàêÂØπÂøÖË¶ÅÊúØËØ≠ÁöÑÂÖ±ÂêåÁêÜËß£ÔºåÁâπÂà´ÊòØÂú®C++‰∏≠„ÄÇ</li>
</ol>
<p><strong>ÊÄªÁªì</strong></p>
<p>ÊÇ®‰∏ç‰ºö‰ΩøÁî®Âçï‰æãÊù•Ëß£ËÄ¶ËΩØ‰ª∂ÂÆû‰Ωì„ÄÇÂõ†Ê≠§ÔºåÂ∞ΩÁÆ°ÂÆÉÂú®ËëóÂêçÁöÑGoF‰π¶‰∏≠Ë¢´ÊèèËø∞ÔºåÊàñËÄÖÂú®„Ää‰ª£Á†ÅÂ§ßÂÖ®„Äã‰∏≠ÊèêÂèäÔºåÁîöËá≥Âú®Áª¥Âü∫ÁôæÁßë‰∏äË¢´Âàó‰∏∫ËÆæËÆ°Ê®°ÂºèÔºå‰ΩÜÂÆÉÂπ∂‰∏çÁ¨¶ÂêàËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑ„ÄÇÂçï‰æãÂè™ÊòØÂ§ÑÁêÜÂÆûÁé∞ÁªÜËäÇÔºåÂõ†Ê≠§ÊÇ®Â∫îÂ∞ÜÂÖ∂ËßÜ‰∏∫ÂÆûÁé∞Ê®°Âºè„ÄÇ</p>
<ul>
<li><strong>Âçï‰æãÁöÑÁõÆÊ†á‰∏çÊòØËß£ËÄ¶ÊàñÁÆ°ÁêÜ‰æùËµñÔºåÂõ†Ê≠§ÂÆÉ‰∏çÁ¨¶ÂêàËÆæËÆ°Ê®°ÂºèÁöÑÊúüÊúõ„ÄÇ</strong></li>
<li>Â∫îÁî®Âçï‰æãÊ®°ÂºèÊó∂ÔºåËØ∑ËÆ∞‰ΩèÂÖ∂ÁõÆÁöÑÊòØÂ∞ÜÊüê‰∏™ÁâπÂÆöÁ±ªÁöÑÂÆû‰æãÊï∞ÈáèÈôêÂà∂‰∏∫ÊÅ∞Â•Ω‰∏Ä‰∏™„ÄÇ</li>
</ul>
<h3 id="ÂáÜÂàô38‰∏∫ÂèòÂåñÂíåÂèØÊµãËØïÊÄßËÆæËÆ°Âçï‰æã">ÂáÜÂàô38Ôºö‰∏∫ÂèòÂåñÂíåÂèØÊµãËØïÊÄßËÆæËÆ°Âçï‰æã
</h3><p><strong>Âçï‰æãÊ®°ÂºèÁ°ÆÂÆûÊòØ‰∏Ä‰∏™Áõ∏ÂΩìËá≠ÂêçÊò≠ËëóÁöÑÊ®°ÂºèÔºö</strong> ËÆ∏Â§ö‰∫∫ËÆ§‰∏∫Âçï‰æãÊòØ‰ª£Á†Å‰∏≠ÁöÑÊôÆÈÅçÈóÆÈ¢òÔºåÊòØ‰∏ÄÁßçÂèçÊ®°ÂºèÔºåÁîöËá≥ÊòØÂç±Èô©ÊàñÈÇ™ÊÅ∂ÁöÑ„ÄÇÂõ†Ê≠§ÔºåÊúâÂæàÂ§öÂª∫ËÆÆÈÅøÂÖç‰ΩøÁî®ËøôÁßçÊ®°ÂºèÔºåÂÖ∂‰∏≠ÂåÖÊã¨Ê†∏ÂøÉÊåáÂçóI.3Ôºö</p>
<p><strong>ÈÅøÂÖçÂçï‰æã„ÄÇ</strong></p>
<p>‰∫∫‰ª¨‰∏çÂñúÊ¨¢Âçï‰æãÁöÑ‰∏Ä‰∏™‰∏ªË¶ÅÂéüÂõ†ÊòØÂõ†‰∏∫ÂÆÉÁªèÂ∏∏ÂØºËá¥‰∫∫‰∏∫ÁöÑ‰æùËµñÂÖ≥Á≥ªÂπ∂ÈòªÁ¢çÂèØÊµãËØïÊÄß„ÄÇÂõ†Ê≠§ÔºåÂÆÉ‰∏éÊú¨‰π¶‰∏≠‰∏§‰∏™ÊúÄÈáçË¶ÅÂíåÊúÄÈÄöÁî®ÁöÑÊåáÂçóÁõ∏ÊÇñÔºö‚ÄúÊåáÂçó2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°‚ÄùÂíå‚ÄúÊåáÂçó4Ôºö‰∏∫ÂèØÊµãËØïÊÄßËÄåËÆæËÆ°‚Äù„ÄÇ‰ªéËøô‰∏™ËßíÂ∫¶Êù•ÁúãÔºåÂçï‰æãÁ°ÆÂÆûÁúãËµ∑Êù•ÂÉèÊòØ‰ª£Á†Å‰∏≠ÁöÑ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∫îËØ•ÈÅøÂÖç„ÄÇÁÑ∂ËÄåÔºåÂ∞ΩÁÆ°ÊúâËøô‰∫õÂñÑÊÑèÁöÑË≠¶ÂëäÔºåËÆ∏Â§öÂºÄÂèëËÄÖ‰ªçÁÑ∂ÊåÅÁª≠‰ΩøÁî®ËØ•Ê®°Âºè„ÄÇÂéüÂõ†Â§öÁßçÂ§öÊ†∑Ôºå‰ΩÜÂèØËÉΩ‰∏ªË¶Å‰∏é‰ª•‰∏ã‰∏§‰∏™‰∫ãÂÆûÊúâÂÖ≥ÔºöÈ¶ñÂÖàÔºåÊúâÊó∂ÔºàÊàë‰ª¨ÂêåÊÑèÊúâÊó∂ÔºâË°®ËææÊüê‰∫ãÁâ©Âè™Â≠òÂú®‰∏ÄÊ¨°Âπ∂‰∏îÂ∫îÂèØ‰æõ‰ª£Á†Å‰∏≠ÁöÑËÆ∏Â§öÂÆû‰Ωì‰ΩøÁî®ÊòØÊúâÂøÖË¶ÅÁöÑ„ÄÇÂÖ∂Ê¨°ÔºåÊúâÊó∂Âçï‰æã‰ºº‰πéÊòØÈÄÇÂΩìÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÂõ†‰∏∫ÈúÄË¶ÅË°®Á§∫ÂÖ®Â±ÄÊñπÈù¢„ÄÇ</p>
<p><strong>Âçï‰æã‰ª£Ë°®ÂÖ®Â±ÄÁä∂ÊÄÅ</strong></p>
<p>Âçï‰æã‰∏ªË¶ÅÁî®‰∫éË°®Á§∫Âú®Á®ãÂ∫è‰∏≠ÈÄªËæë‰∏äÂíå/ÊàñÁâ©ÁêÜ‰∏ä‰ªÖÂ≠òÂú®‰∏ÄÊ¨°‰∏îÂ∫îË¢´ËÆ∏Â§öÂÖ∂‰ªñÁ±ªÂíåÂáΩÊï∞‰ΩøÁî®ÁöÑÂÆû‰Ωì„ÄÇÂ∏∏ËßÅÁöÑ‰æãÂ≠êÂåÖÊã¨Á≥ªÁªüËåÉÂõ¥ÁöÑÊï∞ÊçÆÂ∫ì„ÄÅÊó•ÂøóËÆ∞ÂΩïÂô®„ÄÅÊó∂ÈíüÊàñÈÖçÁΩÆ„ÄÇËøô‰∫õ‰æãÂ≠êÔºåÂåÖÊã¨‚ÄúÁ≥ªÁªüËåÉÂõ¥‚ÄùËøô‰∏™ËØçÔºåË°®Êòé‰∫ÜËøô‰∫õÂÆû‰ΩìÁöÑÊú¨Ë¥®ÔºöÂÆÉ‰ª¨ÈÄöÂ∏∏‰ª£Ë°®ÂÖ®Â±ÄÂèØÁî®ÁöÑÂäüËÉΩÊàñÊï∞ÊçÆÔºåÂç≥ÂÖ®Â±ÄÁä∂ÊÄÅ„ÄÇ‰ªéËøô‰∏™ËßíÂ∫¶Êù•ÁúãÔºåÂçï‰æãÊ®°Âºè‰ºº‰πéÊòØÊúâÊÑè‰πâÁöÑÔºöÈÄöËøáÈò≤Ê≠¢ÊØè‰∏™‰∫∫ÂàõÂª∫Êñ∞ÁöÑÂÆû‰æãÔºåÂπ∂Âº∫Âà∂ÊØè‰∏™‰∫∫ÈÉΩ‰ΩøÁî®ÂîØ‰∏ÄÁöÑÂÆû‰æãÔºåÊÇ®ÂèØ‰ª•‰øùËØÅÊâÄÊúâ‰ΩøÁî®ÂÆû‰ΩìÂØπËøô‰∏ÄÂÖ®Â±ÄÁä∂ÊÄÅÁöÑ‰∏ÄËá¥ËÆøÈóÆ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËøôÁßçÂÖ®Â±ÄÁä∂ÊÄÅÁöÑË°®Á§∫ÂíåÂºïÂÖ•Ëß£Èáä‰∫Ü‰∏∫‰ªÄ‰πàÂçï‰æãÈÄöÂ∏∏Ë¢´ËÆ§‰∏∫ÊòØ‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇÊ≠£Â¶ÇMichael FeathersÊâÄË°®ËææÁöÑÔºö</p>
<p><strong>Âçï‰æãÊ®°ÂºèÊòØ‰∫∫‰ª¨Áî®Êù•ÂàõÂª∫ÂÖ®Â±ÄÂèòÈáèÁöÑÊú∫Âà∂‰πã‰∏Ä„ÄÇ</strong> ‰∏ÄËà¨Êù•ËØ¥ÔºåÂÖ®Â±ÄÂèòÈáèÊúâÂá†‰∏™ÂùèÂ§Ñ„ÄÇÂÖ∂‰∏≠‰∏Ä‰∏™ÂéüÂõ†ÊòØ‰∏çÈÄèÊòéÊÄß„ÄÇ</p>
<p>ÂÖ®Â±ÄÂèòÈáèÁ°ÆÂÆûÊòØ‰∏çÂ•ΩÁöÑÔºåÁâπÂà´ÊòØÂõ†‰∏∫‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂéüÂõ†ÔºöÊúØËØ≠‚ÄúÂèòÈáè‚ÄùÊöóÁ§∫Êàë‰ª¨Âú®ËÆ®ËÆ∫ÂèØÂèòÁöÑÂÖ®Â±ÄÁä∂ÊÄÅ„ÄÇËøôÁßçÁä∂ÊÄÅÁ°ÆÂÆû‰ºöÂºïËµ∑ÂæàÂ§öÈ∫ªÁÉ¶„ÄÇÊòéÁ°ÆÂú∞ËØ¥ÔºåÂèØÂèòÁöÑÂÖ®Â±ÄÁä∂ÊÄÅÔºàÂ∞§ÂÖ∂ÊòØÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏≠ÔºâÊòØ‰ª§‰∫∫ÂèçÊÑüÁöÑÔºåÂõ†‰∏∫ÂÆÉÈöæ‰ª•ÊéßÂà∂ËÆøÈóÆÂπ∂Á°Æ‰øùÊ≠£Á°ÆÊÄß„ÄÇÊ≠§Â§ñÔºåÂÖ®Â±ÄÔºàÂèØÂèòÔºâÁä∂ÊÄÅÂæàÈöæÊé®ÁêÜÔºåÂõ†‰∏∫ÂØπËØ•Áä∂ÊÄÅÁöÑËØªÂÜôËÆøÈóÆÈÄöÂ∏∏Âú®Êüê‰∫õÂáΩÊï∞ÂÜÖÈÉ®‰∏çÂèØËßÅÔºåÂü∫‰∫éÂÖ∂Êé•Âè£Ôºå‰∏ç‰ºöÊè≠Á§∫ÂÆÉ‰ΩøÁî®‰∫ÜÂÖ®Â±ÄÁä∂ÊÄÅÁöÑ‰∫ãÂÆû„ÄÇÊúÄÂêé‰ΩÜÂπ∂ÈùûÊúÄ‰∏çÈáçË¶ÅÁöÑÊòØÔºåÂ¶ÇÊûúÊÇ®ÊúâÂ§ö‰∏™ÂÖ®Â±ÄÂèòÈáèÔºåÂÆÉ‰ª¨ÁöÑÁîüÂëΩÂë®ÊúüÁõ∏‰∫í‰æùËµñÂπ∂‰∏îÂàÜÂ∏ÉÂú®Â§ö‰∏™ÁºñËØëÂçïÂÖÉ‰∏≠ÔºåÊÇ®ÂèØËÉΩ‰ºöÈù¢‰∏¥ÈùôÊÄÅÂàùÂßãÂåñÈ°∫Â∫èÁÅæÈöæÔºàSIOFÔºâ„ÄÇÊòæÁÑ∂ÔºåÂ∞ΩÈáèÈÅøÂÖçÂÖ®Â±ÄÁä∂ÊÄÅÊòØÊúâÁõäÁöÑ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂÖ®Â±ÄÁä∂ÊÄÅÁöÑÈóÆÈ¢òÂπ∂‰∏çÊòØÈÄöËøáÈÅøÂÖçÂçï‰æãÂ∞±ËÉΩËß£ÂÜ≥ÁöÑ„ÄÇËøôÊòØ‰∏Ä‰∏™ÊôÆÈÅçÂ≠òÂú®ÁöÑÈóÆÈ¢òÔºå‰∏é‰ªª‰ΩïÁâπÂÆöÊ®°ÂºèÊó†ÂÖ≥„ÄÇ‰æãÂ¶ÇÔºåÂêåÊ†∑ÁöÑÈóÆÈ¢ò‰πüÂ≠òÂú®‰∫éMonostateÊ®°Âºè‰∏≠ÔºåÂÆÉÂº∫Âà∂Âçï‰∏ÄÁöÑÂÖ®Â±ÄÁä∂ÊÄÅ‰ΩÜÂÖÅËÆ∏‰ªªÊÑèÊï∞ÈáèÁöÑÂÆû‰æãÂåñ„ÄÇÁõ∏ÂèçÔºåÂçï‰æãÂèØ‰ª•ÈÄöËøáÈôêÂà∂ÂØπÂÖ∂ÁöÑËÆøÈóÆÊù•Â∏ÆÂä©Â§ÑÁêÜÂÖ®Â±ÄÁä∂ÊÄÅ„ÄÇ‰æãÂ¶ÇÔºåÊ≠£Â¶ÇMi≈°ko HeveryÂú®‰ªñÁöÑ2008Âπ¥ÊñáÁ´†‰∏≠Ëß£ÈáäÁöÑÔºåÊèê‰æõÂçïÂêëÊï∞ÊçÆÊµÅÂà∞Êüê‰∫õÂÖ®Â±ÄÁä∂ÊÄÅÁöÑÂçï‰æãÊòØÂèØ‰ª•Êé•ÂèóÁöÑÔºöÂÆûÁé∞Êó•ÂøóËÆ∞ÂΩïÂô®ÁöÑÂçï‰æãÂè™‰ºöÂÖÅËÆ∏ÊÇ®ÂÜôÂÖ•Êï∞ÊçÆ‰ΩÜ‰∏çÂÖÅËÆ∏ËØªÂèñ„ÄÇË°®Á§∫Á≥ªÁªüËåÉÂõ¥ÈÖçÁΩÆÊàñÊó∂ÈíüÁöÑÂçï‰æãÂè™‰ºöÂÖÅËÆ∏ÊÇ®ËØªÂèñÊï∞ÊçÆ‰ΩÜ‰∏çÂÖÅËÆ∏ÂÜôÂÖ•Ôºå‰ªéËÄåË°®Á§∫ÂÖ®Â±ÄÂ∏∏Èáè„ÄÇÈôêÂà∂ÂçïÂêëÊï∞ÊçÆÊµÅÊúâÂä©‰∫éÈÅøÂÖçËÆ∏Â§ö‰∏éÂÖ®Â±ÄÁä∂ÊÄÅÁõ∏ÂÖ≥ÁöÑÈóÆÈ¢ò„ÄÇÁî®Mi≈°ko HeveryÁöÑËØùÊù•ËØ¥ÔºàÂº∫Ë∞ÉÈÉ®ÂàÜÊòØÊàëÁöÑÔºâÔºö</p>
<p><strong>ÈÄÇÂΩì‰ΩøÁî®‚ÄúÂÖ®Â±Ä‚ÄùÊàñÂçäÂÖ®Â±ÄÁä∂ÊÄÅÂèØ‰ª•Â§ßÂ§ßÁÆÄÂåñÂ∫îÁî®Á®ãÂ∫èÁöÑËÆæËÆ°[&hellip;]„ÄÇ</strong></p>
<p><strong>Âçï‰æãÈòªÁ¢çÂèòÂåñÊÄßÂíåÂèØÊµãËØïÊÄß</strong></p>
<p>ÂÖ®Â±ÄÁä∂ÊÄÅÊòØÂçï‰æãÂõ∫ÊúâÁöÑÈóÆÈ¢ò„ÄÇÁÑ∂ËÄåÔºåÂç≥‰ΩøÊàë‰ª¨ÂØπ‰ΩøÁî®Âçï‰æãË°®Á§∫ÂÖ®Â±ÄÁä∂ÊÄÅÊÑüÂà∞Êª°ÊÑèÔºå‰πü‰ºöÊúâ‰∏•ÈáçÁöÑÂêéÊûúÔºö‰ΩøÁî®Âçï‰æãÁöÑÂáΩÊï∞‰æùËµñ‰∫éË°®Á§∫ÁöÑÂÖ®Â±ÄÊï∞ÊçÆÔºåÂõ†Ê≠§ÂèòÂæóÊõ¥ÈöæÊîπÂèòÂíåÊõ¥ÈöæÊµãËØï„ÄÇ‰∏∫‰∫ÜÊõ¥Â•ΩÂú∞ÁêÜËß£Ëøô‰∏ÄÁÇπÔºåËÆ©Êàë‰ª¨ÈáçÊñ∞ÂÆ°ËßÜ‚ÄúÊåáÂçó37ÔºöÂ∞ÜÂçï‰æãËßÜ‰∏∫ÂÆûÁé∞Ê®°ÂºèËÄåÈùûËÆæËÆ°Ê®°Âºè‚Äù‰∏≠ÁöÑ<code>Database</code>Âçï‰æãÔºåÁé∞Âú®ÂÆÉË¢´Âá†‰∏™‰ªªÊÑèÁ±ªÔºàÂç≥<code>Widget</code>Âíå<code>Gadget</code>ÔºâÁßØÊûÅ‰ΩøÁî®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Widget.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Database.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Widget</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">doSomething</span><span class="p">(</span> <span class="cm">/*some arguments*/</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Database</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">read</span><span class="p">(</span> <span class="cm">/*some arguments*/</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---- &lt;Gadget.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Database.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Gadget</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">doSomething</span><span class="p">(</span> <span class="cm">/*some arguments*/</span> <span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Database</span><span class="o">::</span><span class="n">instance</span><span class="p">().</span><span class="n">write</span><span class="p">(</span> <span class="cm">/*some arguments*/</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Widget</code>Âíå<code>Gadget</code>ÈÉΩÈúÄË¶ÅËÆøÈóÆÁ≥ªÁªüËåÉÂõ¥ÁöÑ<code>Database</code>„ÄÇÂõ†Ê≠§ÔºåÂÆÉ‰ª¨Ë∞ÉÁî®‰∫Ü<code>Database::instance()</code>ÂáΩÊï∞ÔºåÁÑ∂ÂêéË∞ÉÁî®‰∫Ü<code>read()</code>Âíå<code>write()</code>ÂáΩÊï∞„ÄÇ</p>
<p>Áî±‰∫éÂÆÉ‰ª¨‰ΩøÁî®‰∫Ü<code>Database</code>Âπ∂Âõ†Ê≠§‰æùËµñ‰∫éÂÆÉÔºåÊàë‰ª¨Â∏åÊúõÂÆÉ‰ª¨‰Ωç‰∫éÊû∂ÊûÑÂ±ÇÊ¨°‰∏≠‰Ωé‰∫é<code>Database</code>Âçï‰æãÁöÑÂ±ÇÊ¨°„ÄÇËøôÊòØÂõ†‰∏∫ÔºåÊ≠£Â¶ÇÊÇ®Âú®‚ÄúÊåáÂçó2Ôºö‰∏∫ÂèòÂåñËÄåËÆæËÆ°‚Äù‰∏≠ËÆ∞ÂæóÁöÑÈÇ£Ê†∑ÔºåÂè™ÊúâÂΩìÊâÄÊúâ‰æùËµñÁÆ≠Â§¥ÈÉΩÊåáÂêëÈ´òÂ±ÇÊ¨°Êó∂ÔºåÊàë‰ª¨ÊâçËÉΩÁß∞‰πã‰∏∫Ê≠£Á°ÆÁöÑÊû∂ÊûÑÔºàÂèÇËßÅÂõæ10-2Ôºâ„ÄÇ</p>
<p><strong>Âõæ10-2. ÂÆûÁé∞‰∏∫Âçï‰æãÁöÑDatabaseÁöÑÊúüÊúõ‰æùËµñÂõæ</strong></p>
<p>Â∞ΩÁÆ°ËøôÁßç‰æùËµñÁªìÊûÑÂèØËÉΩÊòØÁêÜÊÉ≥ÁöÑÔºå‰ΩÜ‰∏çÂπ∏ÁöÑÊòØÂÆÉÂè™ÊòØ‰∏Ä‰∏™ÂπªË±°Ôºö<code>Database</code>Á±ª‰∏çÊòØÊäΩË±°ËÄåÊòØÂÖ∑‰ΩìÂÆûÁé∞Ôºå‰ª£Ë°®‰∫ÜÂØπÈùûÂ∏∏ÂÖ∑‰ΩìÁöÑÊï∞ÊçÆÂ∫ìÁöÑ‰æùËµñÔºÅÂõ†Ê≠§ÔºåÂÆûÈôÖÁöÑ‰æùËµñÁªìÊûÑÊòØÂÄíÁΩÆÁöÑÔºåÁúãËµ∑Êù•ÂÉèÂõæ10-3„ÄÇ</p>
<p>ÂÆûÈôÖÁöÑ‰æùËµñÁªìÊûÑÂÆåÂÖ®ËøùËÉå‰∫Ü‰æùËµñÂÄíÁΩÆÂéüÂàôÔºàDIPÔºâÔºàÂèÇËßÅ‚ÄúÊåáÂçó9ÔºöÊ≥®ÊÑèÊäΩË±°ÁöÑÊâÄÊúâÊùÉ‚ÄùÔºâÔºöÊâÄÊúâ‰æùËµñÁÆ≠Â§¥ÈÉΩÊåáÂêë‰ΩéÂ±ÇÊ¨°„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÁõÆÂâçÊ†πÊú¨Ê≤°ÊúâËΩØ‰ª∂Êû∂ÊûÑÔºÅ</p>
<p><strong>Âõæ10-3. ÂÆûÁé∞‰∏∫Âçï‰æãÁöÑDatabaseÁöÑÂÆûÈôÖ‰æùËµñÂõæ</strong></p>
<p>Áî±‰∫é<code>Database</code>ÊòØ‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÁ±ªËÄå‰∏çÊòØÊäΩË±°ÔºåÊï¥‰∏™‰ª£Á†Å‰∏≠ÊúâÂº∫ÁîöËá≥‰∏çÂèØËßÅÁöÑ‰æùËµñÂÖ≥Á≥ªÔºåÂÖ∑‰ΩìÂà∞<code>Database</code>Á±ªÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÁªÜËäÇÂíåËÆæËÆ°ÈÄâÊã©„ÄÇËøôÂèØËÉΩ‚Äî‚ÄîÂú®ÊúÄÂùèÁöÑÊÉÖÂÜµ‰∏ã‚Äî‚ÄîÂåÖÊã¨ÂØπ‰æõÂ∫îÂïÜÁâπÂÆöÁªÜËäÇÁöÑ‰æùËµñÔºåËøô‰∫õÁªÜËäÇÂú®Êï¥‰∏™‰ª£Á†Å‰∏≠ÂèØËßÅÔºåÂá∫Áé∞Âú®ËÆ∏Â§ö‰∏çÂêåÁöÑÂú∞ÊñπÔºåÂêéÊù•‰ΩøÂæóÊõ¥ÊîπÂèòÂæóÊûÅÂÖ∂Âõ∞ÈöæÁîöËá≥‰∏çÂèØËÉΩ„ÄÇÂõ†Ê≠§Ôºå‰ª£Á†ÅÂèòÂæóÊõ¥Âä†Èöæ‰ª•Êõ¥Êîπ„ÄÇ</p>
<p>ËÄÉËôëËøôÁßç‰æùËµñÂÖ≥Á≥ªÂ¶Ç‰Ωï‰∏•ÈáçÂΩ±ÂìçÊµãËØï„ÄÇÊâÄÊúâ‰ΩøÁî®‰æùËµñ‰∫é<code>Database</code>Âçï‰æãÁöÑÂáΩÊï∞ÁöÑÊµãËØïÊú¨Ë∫´‰πü‰æùËµñ‰∫éÂçï‰æã„ÄÇËøôÊÑèÂë≥ÁùÄÔºå‰æãÂ¶ÇÔºåÂØπ‰∫éÊØè‰∏™‰ΩøÁî®<code>Widget::doSomething()</code>ÂáΩÊï∞ÁöÑÊµãËØïÔºåÊÇ®ÊÄªÊòØÂøÖÈ°ªÊèê‰æõÂîØ‰∏ÄÁöÑ<code>Database</code>Á±ª„ÄÇ‰∏çÂπ∏ÁöÑÂéüÂõ†‰πüÂæàÁÆÄÂçïÔºöËøô‰∫õÂáΩÊï∞Ê≤°Êúâ‰∏∫ÊÇ®Êèê‰æõÊõøÊç¢<code>Database</code>ÁöÑÊñπÊ≥ïÔºö‰ªª‰ΩïÂΩ¢ÂºèÁöÑÊ°©„ÄÅÊ®°ÊãüÊàñ‰º™ÈÄ†„ÄÇÂÆÉ‰ª¨ÈÉΩÂ∞Ü<code>Database</code>Âçï‰æãËßÜ‰∏∫ÂÆÉ‰ª¨ÁèçË¥µÁöÑÁßòÂØÜ„ÄÇÂõ†Ê≠§ÔºåÂèØÊµãËØïÊÄßÂèóÂà∞‰∏•ÈáçÈòªÁ¢çÔºåÁºñÂÜôÊµãËØïÂèòÂæóÂ¶ÇÊ≠§Âõ∞ÈöæÔºå‰ª•Ëá≥‰∫éÊÇ®ÂèØËÉΩ‰ºöÂÆåÂÖ®ÊîæÂºÉÁºñÂÜôÊµãËØï„ÄÇ</p>
<p>Ëøô‰∏™‰æãÂ≠êÁ°ÆÂÆûÂ±ïÁ§∫‰∫ÜÂçï‰æãÁöÑÂ∏∏ËßÅÈóÆÈ¢ò‰ª•ÂèäÂÆÉ‰ª¨ÂºïÂÖ•ÁöÑ‰∏çÂπ∏ÁöÑ‰∫∫‰∏∫‰æùËµñÂÖ≥Á≥ª„ÄÇËøô‰∫õ‰æùËµñÂÖ≥Á≥ª‰ΩøÁ≥ªÁªüÊõ¥Âä†ÂÉµÁ°¨ÔºåÊõ¥Èöæ‰ª•ÊîπÂèòÂíåÊµãËØï„ÄÇÂΩìÁÑ∂ÔºåËøô‰∏çÂ∫îËØ•ÂèëÁîü„ÄÇÁõ∏ÂèçÔºåÂ∫îËØ•ÂæàÂÆπÊòìÊõøÊç¢‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂÆûÁé∞ÔºåÂπ∂‰∏îÂ∫îËØ•ÂæàÂÆπÊòìÊµãËØï‰ΩøÁî®Êï∞ÊçÆÂ∫ìÁöÑÂäüËÉΩ„ÄÇÊ≠£ÊòØÂá∫‰∫éËøô‰∫õÂéüÂõ†ÔºåÊàë‰ª¨ÂøÖÈ°ªÁ°Æ‰øù<code>Database</code>Êàê‰∏∫ÈÄÇÂΩìÊû∂ÊûÑ‰ΩéÂ±ÇÊ¨°‰∏äÁöÑÁúüÊ≠£ÂÆûÁé∞ÁªÜËäÇ„ÄÇ</p>
<p>‚Äú‰ΩÜÊòØÁ≠â‰∏Ä‰∏ãÔºåÊÇ®ÂàöÊâçËØ¥Â¶ÇÊûú<code>Database</code>ÊòØ‰∏Ä‰∏™ÂÆûÁé∞ÁªÜËäÇÔºåÂ∞±Ê≤°ÊúâÊû∂ÊûÑÔºåÂØπÂêóÔºü‚Äù ÊòØÁöÑÔºåÊàëÁ°ÆÂÆûÊòØËøô‰πàËØ¥ÁöÑ„ÄÇËÄå‰∏îÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÊàë‰ª¨Êó†ËÉΩ‰∏∫ÂäõÔºö<code>Database</code>Âçï‰æã‰∏ç‰ª£Ë°®‰ªª‰ΩïÊäΩË±°Ôºå‰πüÊó†Ê≥ïÂ∏ÆÂä©Êàë‰ª¨Â§ÑÁêÜ‰æùËµñÂÖ≥Á≥ª„ÄÇÂçï‰æãÊ†πÊú¨‰∏çÊòØ‰∏Ä‰∏™ËÆæËÆ°Ê®°Âºè„ÄÇÂõ†Ê≠§Ôºå‰∏∫‰∫ÜÊ∂àÈô§ÂØπ<code>Database</code>Á±ªÁöÑ‰æùËµñÂπ∂‰ΩøÊû∂ÊûÑËµ∑‰ΩúÁî®ÔºåÊàë‰ª¨ÂøÖÈ°ªÈÄöËøáÂºïÂÖ•ÊäΩË±°Âπ∂‰ΩøÁî®ÁúüÊ≠£ÁöÑËÆæËÆ°Ê®°ÂºèÊù•‰∏∫ÂèòÂåñÂíåÂèØÊµãËØïÊÄßËøõË°åËÆæËÆ°„ÄÇ‰∏∫Ê≠§ÔºåËÆ©Êàë‰ª¨Áúã‰∏Ä‰∏ã‰∏Ä‰∏™‰ΩøÁî®C++Ê†áÂáÜÂ∫ì‰∏≠ÁöÑÂçï‰æãÂ§ÑÁêÜÂÖ®Â±ÄÊñπÈù¢ÁöÑËâØÂ•ΩÁ§∫‰æã„ÄÇ</p>
<p><strong>ÂèçËΩ¨Âçï‰æã‰∏äÁöÑ‰æùËµñÂÖ≥Á≥ª</strong></p>
<p>ÊàëÂõûÂà∞‰∫Ü‰∏Ä‰∏™ÁúüÊ≠£ÁöÑËÆæËÆ°Ê®°ÂºèÂÆùËóèÔºåÊàëÂ∑≤ÁªèÂ§öÊ¨°‰ΩøÁî®ÂÆÉÊù•ÊºîÁ§∫‰∏çÂêåÁöÑËÆæËÆ°Ê®°ÂºèÔºöC++17ÁöÑÂ§öÊÄÅÂÜÖÂ≠òËµÑÊ∫êÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstddef&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory_resource&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="p">,</span> <span class="mi">1000</span><span class="o">&gt;</span> <span class="n">raw</span><span class="p">;</span>  <span class="c1">// Ê≥®ÊÑèÔºöÊú™ÂàùÂßãÂåñÔºÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">monotonic_buffer_resource</span> <span class="n">buffer</span><span class="p">{</span> <span class="n">raw</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="n">raw</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">null_memory_resource</span><span class="p">()</span> <span class="p">};</span>  
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">strings</span><span class="p">{</span> <span class="o">&amp;</span><span class="n">buffer</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨ÈÖçÁΩÆ‰∫Ü<code>std::pmr::monotonic_buffer_resource</code>ÔºàÁß∞‰∏∫<code>buffer</code>ÔºâÔºå‰ΩøÂÖ∂‰ªÖ‰∏éÁªôÂÆöÁöÑ<code>std::array raw</code>‰∏≠ÁöÑÈùôÊÄÅÂÜÖÂ≠ò‰∏ÄËµ∑Â∑•‰Ωú„ÄÇÂ¶ÇÊûúËøô‰∫õÂÜÖÂ≠òËÄóÂ∞ΩÔºå<code>buffer</code>Â∞ÜÂ∞ùËØïÈÄöËøáÂÖ∂‰∏äÊ∏∏ÂàÜÈÖçÂô®Ëé∑ÂèñÊñ∞ÂÜÖÂ≠òÔºåÊàë‰ª¨ÊåáÂÆöËØ•ÂàÜÈÖçÂô®‰∏∫<code>std::pmr::null_memory_resource()</code>„ÄÇÈÄöËøáËøô‰∏™ÂàÜÈÖçÂô®ÂàÜÈÖçÂÜÖÂ≠òÊ∞∏Ëøú‰∏ç‰ºöËøîÂõû‰ªª‰ΩïÂÜÖÂ≠òÔºåËÄåÊÄªÊòØÊäõÂá∫<code>std::bad_alloc()</code>ÂºÇÂ∏∏„ÄÇÂõ†Ê≠§Ôºå<code>buffer</code>Ë¢´ÈôêÂà∂Âú®Áî±<code>raw</code>Êèê‰æõÁöÑ1000Â≠óËäÇÂÜÖ„ÄÇ</p>
<p>ËôΩÁÑ∂ÊÇ®Â∫îËØ•Á´ãÂç≥ËÆ∞‰ΩèÂπ∂ËØÜÂà´ËøôÊòØ‰∏Ä‰∏™Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÁöÑ‰æãÂ≠êÔºå‰ΩÜËøô‰πüÂèØ‰ª•‰Ωú‰∏∫Âçï‰æãÊ®°ÂºèÁöÑ‰∏Ä‰∏™Á§∫‰æãÔºöÊØèÊ¨°Ë∞ÉÁî®<code>std::pmr::null_memory_resource()</code>ÂáΩÊï∞Êó∂ÔºåÂÆÉÈÉΩ‰ºöËøîÂõûÂêå‰∏Ä‰∏™ÂàÜÈÖçÂô®ÁöÑÊåáÈíàÔºåÂπ∂Âõ†Ê≠§ÂÖÖÂΩìËÆøÈóÆÂîØ‰∏ÄÂÆû‰æãÁöÑÂçï‰∏ÄÂÖ•Âè£ÁÇπ„ÄÇÂõ†Ê≠§ÔºåËøîÂõûÁöÑÂàÜÈÖçÂô®Â∞±ÂÉè‰∏Ä‰∏™Âçï‰æã„ÄÇÂ∞ΩÁÆ°Ëøô‰∏™Âçï‰æã‰∏çÊèê‰æõÂçïÂêëÊï∞ÊçÆÊµÅÔºàÊØïÁ´üÊàë‰ª¨ÂèØ‰ª•ÂàÜÈÖçÂÜÖÂ≠òÂπ∂ÂΩíËøòÂÆÉÔºâÔºå‰ΩÜÂçï‰æãÂú®ËøôÁßçÊÉÖÂÜµ‰∏ã‰ªçÁÑ∂ÊÑüËßâÊòØ‰∏Ä‰∏™ÂêàÁêÜÁöÑÈÄâÊã©ÔºåÂõ†‰∏∫ÂÆÉ‰ª£Ë°®‰∫Ü‰∏ÄÁßçÂÖ®Â±ÄÁä∂ÊÄÅÔºöÂÜÖÂ≠ò„ÄÇ</p>
<p>ÁâπÂà´ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåËøô‰∏™Âçï‰æã‰∏ç‰ºöËÆ©‰Ω†‰æùËµñ‰∫éÂàÜÈÖçÂô®ÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÁªÜËäÇ„ÄÇÊÅ∞ÊÅ∞Áõ∏ÂèçÔºö<code>std::pmr::null_memory_resource()</code>ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™ÊåáÂêë<code>std::pmr::memory_resource</code>ÁöÑÊåáÈíà„ÄÇËøô‰∏™Á±ªÊòØÊâÄÊúâÁ±ªÂûãÂàÜÈÖçÂô®ÁöÑÂü∫Á±ªÔºàËá≥Â∞ëÂú®C++17ËåÉÂõ¥ÂÜÖÔºâÔºåÂõ†Ê≠§ÂÆÉ‰Ωú‰∏∫‰∏Ä‰∏™ÊäΩË±°Â±Ç„ÄÇÁÑ∂ËÄåÔºå<code>std::pmr::null_memory_resource()</code>‰ª£Ë°®‰∫Ü‰∏Ä‰∏™ÁâπÂÆöÁöÑÂàÜÈÖçÂô®Ôºå‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÈÄâÊã©ÔºåÊàë‰ª¨Áé∞Âú®‰æùËµñ‰∫éÂÆÉ„ÄÇÁî±‰∫éËøô‰∏™ÂäüËÉΩÂú®Ê†áÂáÜÂ∫ì‰∏≠ÔºåÊàë‰ª¨ÂæÄÂæÄ‰∏ç‰ºöÂ∞ÜÂÖ∂ËßÜ‰∏∫‰æùËµñÈ°πÔºå‰ΩÜ‰ªé‰∏ÄËà¨ÊÑè‰πâ‰∏äËÆ≤ÔºåÂÆÉÁ°ÆÂÆûÊòØÔºöÊàë‰ª¨Ê≤°ÊúâÊú∫‰ºöÊõøÊç¢Ê†áÂáÜÁâπÂÆöÁöÑÂÆûÁé∞„ÄÇ</p>
<p>Â¶ÇÊûúÊàë‰ª¨Áî®<code>std::pmr::get_default_resource()</code>ÊõøÊç¢ÂØπ<code>std::pmr::null_memory_resource()</code>ÁöÑË∞ÉÁî®ÔºåÊÉÖÂÜµÂ∞±‰ºöÊîπÂèòÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory_resource&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">monotonic_buffer_resource</span> <span class="n">buffer</span><span class="p">{</span> <span class="n">raw</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="n">raw</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">get_default_resource</span><span class="p">()</span> <span class="p">};</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>std::pmr::get_default_resource()</code>ÂáΩÊï∞‰πüËøîÂõû‰∏Ä‰∏™ÊåáÂêë<code>std::pmr::memory_resource</code>ÁöÑÊåáÈíàÔºåÂÆÉ‰ª£Ë°®Á≥ªÁªüËåÉÂõ¥ÈªòËÆ§ÂàÜÈÖçÂô®ÁöÑÊäΩË±°„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËøîÂõûÁöÑÂàÜÈÖçÂô®ÊòØÁî±<code>std::new_delete_resource()</code>ÂáΩÊï∞ËøîÂõûÁöÑ„ÄÇÁÑ∂ËÄåÔºå‰ª§‰∫∫ÊÉäËÆ∂ÁöÑÊòØÔºåËøô‰∏™ÈªòËÆ§ÂÄºÂèØ‰ª•ÈÄöËøá<code>std::pmr::set_default_resource()</code>ÂáΩÊï∞ËøõË°åËá™ÂÆö‰πâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">memory_resource</span><span class="o">*</span> <span class="nf">set_default_resource</span><span class="p">(</span><span class="n">memory_resource</span><span class="o">*</span> <span class="n">r</span><span class="p">)</span> <span class="k">noexcept</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace std::pmr
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩøÁî®Ëøô‰∏™ÂáΩÊï∞ÔºåÊàë‰ª¨ÂèØ‰ª•Â∞Ü<code>std::pmr::null_memory_resource()</code>ÂÆö‰πâ‰∏∫Êñ∞ÁöÑÁ≥ªÁªüËåÉÂõ¥ÈªòËÆ§ÂàÜÈÖçÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">set_default_resource</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">null_memory_resource</span><span class="p">());</span>   
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">monotonic_buffer_resource</span> <span class="n">buffer</span><span class="p">{</span> <span class="n">raw</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="n">raw</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">get_default_resource</span><span class="p">()</span> <span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøá<code>std::pmr::set_default_resource()</code>ÔºåÊÇ®ÂèØ‰ª•Ëá™ÂÆö‰πâÁ≥ªÁªüËåÉÂõ¥ÁöÑÂàÜÈÖçÂô®„ÄÇÊç¢Âè•ËØùËØ¥ÔºåËøô‰∏™ÂáΩÊï∞‰∏∫ÊÇ®Êèê‰æõÊ≥®ÂÖ•ÂØπËØ•ÂàÜÈÖçÂô®‰æùËµñÁöÑËÉΩÂäõ„ÄÇËøôÂê¨Ëµ∑Êù•ÁÜüÊÇâÂêóÔºüÊàëÂ∏åÊúõËøôËÉΩËÆ©ÊÇ®ÊÉ≥Âà∞Âè¶‰∏Ä‰∏™Âü∫Êú¨ÁöÑËÆæËÆ°Ê®°Âºè‚Ä¶‚Ä¶ÈºìÂ£∞ÂìçËµ∑‚Ä¶‚Ä¶ÊòØÁöÑÔºåÊ≠£Á°ÆÁ≠îÊ°àÔºöÁ≠ñÁï•ËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p>Á°ÆÂÆûÔºåËøôÊòØ‰∏Ä‰∏™Á≠ñÁï•„ÄÇ‰ΩøÁî®ËøôÁßçËÆæËÆ°Ê®°ÂºèÊòØ‰∏Ä‰∏™ÊûÅÂ•ΩÁöÑÈÄâÊã©ÔºåÂõ†‰∏∫ÂÆÉÂØπÊû∂ÊûÑ‰∫ßÁîü‰∫ÜÊÉä‰∫∫ÁöÑÂΩ±Âìç„ÄÇËôΩÁÑ∂<code>std::pmr::memory_resource</code>‰ª£Ë°®ÊâÄÊúâÂèØËÉΩÂàÜÈÖçÂô®ÁöÑÊäΩË±°ÔºåÂõ†Ê≠§ÂèØ‰ª•‰Ωç‰∫éÊû∂ÊûÑÁöÑÈ´òÂ±ÇÊ¨°Ôºå‰ΩÜ‰ªª‰ΩïÂÖ∑‰ΩìÁöÑÂàÜÈÖçÂô®ÂÆûÁé∞ÔºåÂåÖÊã¨ÊâÄÊúâÔºà‰æõÂ∫îÂïÜÁâπÂÆöÔºâÂÆûÁé∞ÁªÜËäÇÔºåÈÉΩÂèØ‰ª•‰Ωç‰∫éÊû∂ÊûÑÁöÑÊúÄ‰ΩéÂ±ÇÊ¨°„ÄÇ‰∏∫‰∫ÜËØ¥ÊòéËøô‰∏ÄÁÇπÔºåËÄÉËôë‰ª•‰∏ã<code>CustomAllocator</code>Á±ªÁöÑËçâÂõæÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;CustomAllocator.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory_resource&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CustomAllocator</span> <span class="o">:</span> <span class="k">public</span> <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">memory_resource</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰∏çÈúÄË¶ÅÂº∫Âà∂Âçï‰æã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">CustomAllocator</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê≤°ÊúâÊòæÂºèÂ£∞ÊòéÁöÑÂ§çÂà∂ÊàñÁßªÂä®Êìç‰Ωú 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="kt">void</span><span class="o">*</span> <span class="n">do_allocate</span><span class="p">(</span><span class="n">size_t</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">alignment</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">do_deallocate</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">alignment</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">do_is_equal</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">memory_resource</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="k">override</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ∑Ê≥®ÊÑèÔºå<code>CustomAllocator</code>ÂÖ¨ÂºÄÁªßÊâøËá™<code>std::pmr::memory_resource</code>‰ª•Á¨¶ÂêàC++17ÂàÜÈÖçÂô®ÁöÑË¶ÅÊ±Ç„ÄÇÂõ†Ê≠§ÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®<code>std::pmr::set_default_resource()</code>ÂáΩÊï∞Â∞Ü<code>CustomAllocator</code>ÂÆû‰æãËÆæÁΩÆ‰∏∫Êñ∞ÁöÑÁ≥ªÁªüËåÉÂõ¥ÈªòËÆ§ÂàÜÈÖçÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;CustomAllocator.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">CustomAllocator</span> <span class="n">custom_allocator</span><span class="p">{</span><span class="cm">/*...*/</span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">pmr</span><span class="o">::</span><span class="n">set_default_resource</span><span class="p">(</span><span class="o">&amp;</span><span class="n">custom_allocator</span><span class="p">);</span>   
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËôΩÁÑ∂<code>std::pmr::memory_resource</code>Âü∫Á±ª‰Ωç‰∫éÊû∂ÊûÑÁöÑÊúÄÈ´òÂ±ÇÊ¨°Ôºå‰ΩÜ<code>CustomAllocator</code>ÈÄªËæë‰∏ä‰Ωç‰∫éÊû∂ÊûÑÁöÑÊúÄ‰ΩéÂ±ÇÊ¨°ÔºàÂèÇËßÅÂõæ10-4Ôºâ„ÄÇÂõ†Ê≠§ÔºåÁ≠ñÁï•Ê®°ÂºèÂØºËá¥‰∫Ü‰æùËµñÂÖ≥Á≥ªÁöÑÂèçËΩ¨ÔºàÂèÇËßÅ‚ÄúÊåáÂçó9ÔºöÊ≥®ÊÑèÊäΩË±°ÁöÑÊâÄÊúâÊùÉ‚ÄùÔºâÔºöÂ∞ΩÁÆ°ÂàÜÈÖçÂô®ÂÖ∑ÊúâÂçï‰æãÊÄßÔºåÂ∞ΩÁÆ°ÂÆÉ‰ª¨Ë°®Á§∫ÂÖ®Â±ÄÁä∂ÊÄÅÔºå‰ΩÜÊàë‰ª¨‰æùËµñ‰∫éÊäΩË±°ËÄå‰∏çÊòØÂÖ∑‰ΩìÂÆûÁé∞ÁªÜËäÇ„ÄÇ</p>
<p><strong>Âõæ10-4. ÈÄöËøá<code>std::pmr::memory_resource</code>ÊäΩË±°ÂÆûÁé∞ÁöÑ‰æùËµñÂèçËΩ¨</strong></p>
<p>È°∫‰æøÊèê‰∏Ä‰∏ãÔºåÂÄºÂæóÊåáÂá∫ÁöÑÊòØÔºåÈÄöËøáËøôÁßçÊñπÊ≥ïÔºåÊÇ®ÂèØ‰ª•ËΩªÊùæÈÅøÂÖç‰ªª‰ΩïÂØπÂÖ®Â±ÄÂàùÂßãÂåñÈ°∫Â∫èÁöÑ‰æùËµñÔºàÂç≥SIOFÔºâÔºåÂõ†‰∏∫ÊÇ®ÂèØ‰ª•ÈÄöËøáÂú®Âêå‰∏ÄÁºñËØëÂçïÂÖÉ‰∏≠ÂàõÂª∫ÊâÄÊúâÂçï‰æãÊù•ÊòæÂºèÁÆ°ÁêÜÂàùÂßãÂåñÈ°∫Â∫èÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// Á≥ªÁªüËåÉÂõ¥ÂÜÖÂîØ‰∏ÄÁöÑÊó∂ÈíüÊ≤°ÊúâÁîüÂëΩÂë®Êúü‰æùËµñ„ÄÇÂõ†Ê≠§È¶ñÂÖàÂàõÂª∫ÂÆÉ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">SystemClock</span> <span class="n">clock</span><span class="p">{</span><span class="cm">/*...*/</span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// Á≥ªÁªüËåÉÂõ¥ÂÜÖÂîØ‰∏ÄÁöÑÈÖçÁΩÆ‰æùËµñ‰∫éÊó∂Èíü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">SystemConfiguration</span> <span class="n">config</span><span class="p">{</span><span class="o">&amp;</span><span class="n">clock</span><span class="p">,</span> <span class="cm">/*...*/</span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Â∫îÁî®Á≠ñÁï•ËÆæËÆ°Ê®°Âºè</strong></p>
<p>Âü∫‰∫éÂâçÈù¢ÁöÑ‰æãÂ≠êÔºåÊÇ®Áé∞Âú®Â∫îËØ•Êúâ‰∏Ä‰∏™Â¶Ç‰Ωï‰øÆÂ§çÊàë‰ª¨ÁöÑÊï∞ÊçÆÂ∫ìÁ§∫‰æãÁöÑÊÉ≥Ê≥ï„ÄÇÊèêÈÜí‰∏Ä‰∏ãÔºåÁõÆÊ†áÊòØ‰øùÊåÅ<code>Database</code>Á±ª‰Ωú‰∏∫ÈªòËÆ§Êï∞ÊçÆÂ∫ìÂÆûÁé∞Ôºå‰ΩÜ‰ΩøÂÖ∂Êàê‰∏∫‰∏Ä‰∏™ÂÆûÁé∞ÁªÜËäÇÔºåÂç≥ÁßªÈô§ÂØπÂÖ∑‰ΩìÂÆûÁé∞ÁöÑÊâÄÊúâ‰æùËµñ„ÄÇÊÇ®ÈúÄË¶ÅÂÅöÁöÑÂ∞±ÊòØÂ∫îÁî®Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÔºåÂú®Êû∂ÊûÑÁöÑÈ´òÂ±ÇÊ¨°‰∏äÂºïÂÖ•‰∏Ä‰∏™ÊäΩË±°„ÄÅÂÖ®Â±ÄËÆøÈóÆÁÇπÂíå‰æùËµñÊ≥®ÂÖ•ÁÇπ„ÄÇËøôÂ∞Ü‰Ωø‰ªª‰Ωï‰∫∫ÔºàÊàëÁúüÁöÑÊåá‰ªª‰Ωï‰∫∫ÔºåÂõ†‰∏∫‰Ω†‰πüÈÅµÂæ™ÂºÄÊîæÂ∞ÅÈó≠ÂéüÂàôÔºàOCPÔºâÔºõÂèÇËßÅ‚ÄúÊåáÂçó5Ôºö‰∏∫Êâ©Â±ïËÆæËÆ°‚ÄùÔºâËÉΩÂ§üÂú®ÊúÄ‰ΩéÂ±ÇÊ¨°ÂºïÂÖ•Ëá™ÂÆö‰πâÊï∞ÊçÆÂ∫ìÂÆûÁé∞ÔºàÂåÖÊã¨ÂÖ∑‰ΩìÁöÑÂÆûÁé∞‰ª•ÂèäÊµãËØïÊ°©„ÄÅÊ®°ÊãüÊàñËôöÂÅáÂØπË±°Ôºâ„ÄÇÂõ†Ê≠§ÔºåËÆ©Êàë‰ª¨ÂºïÂÖ•‰ª•‰∏ã<code>PersistenceInterface</code>ÊäΩË±°Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;PersistenceInterface.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PersistenceInterface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">PersistenceInterface</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">read</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">do_read</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">write</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">do_write</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§öÊï∞ÊçÆÂ∫ìÁâπÂÆöÁöÑÂäüËÉΩ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">do_read</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">bool</span> <span class="nf">do_write</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">PersistenceInterface</span><span class="o">*</span> <span class="nf">get_persistence_interface</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">set_persistence_interface</span><span class="p">(</span><span class="n">PersistenceInterface</span><span class="o">*</span> <span class="n">persistence</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Â£∞ÊòéÂîØ‰∏ÄÁöÑÂÆû‰æãÂèòÈáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">extern</span> <span class="n">PersistenceInterface</span><span class="o">*</span> <span class="n">instance</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>PersistenceInterface</code>Âü∫Á±ªÊèê‰æõ‰∫ÜÊâÄÊúâÂèØËÉΩÊï∞ÊçÆÂ∫ìÂÆûÁé∞ÁöÑÊé•Âè£„ÄÇ‰æãÂ¶ÇÔºåÂÆÉÂºïÂÖ•‰∫Ü<code>read()</code>Âíå<code>write()</code>ÂáΩÊï∞ÔºåËøô‰∫õÂáΩÊï∞ÂàÜ‰∏∫ÂÖ¨ÂÖ±Êé•Âè£ÈÉ®ÂàÜÂíåÁßÅÊúâÂÆûÁé∞ÈÉ®ÂàÜÔºåÂü∫‰∫é<code>std::pmr::memory_resource</code>Á±ªÁöÑ‰æãÂ≠ê„ÄÇÂΩìÁÑ∂ÔºåÂú®Áé∞ÂÆû‰∏≠ÂÆÉ‰ºöÂºïÂÖ•‰∏Ä‰∫õÊõ¥Â§öÁöÑÊï∞ÊçÆÂ∫ìÁâπÂÆöÂäüËÉΩÔºå‰ΩÜ‰∏∫‰∫ÜËøô‰∏™‰æãÂ≠êÔºåËÆ©Êàë‰ª¨ÂÅáËÆæ<code>read()</code>Âíå<code>write()</code>Â∑≤ÁªèË∂≥Â§ü„ÄÇ</p>
<p>Èô§‰∫Ü<code>PersistenceInterface</code>‰πãÂ§ñÔºå‰Ω†ËøòÈúÄË¶ÅÂºïÂÖ•‰∏Ä‰∏™Âêç‰∏∫<code>get_persistence_interface()</code>ÁöÑÂÖ®Â±ÄËÆøÈóÆÁÇπÔºàÔºâÂíå‰∏Ä‰∏™Áî®‰∫éÂêØÁî®‰æùËµñÊ≥®ÂÖ•ÁöÑÂáΩÊï∞<code>set_persistence_interface()</code>ÔºàÔºâ„ÄÇËøô‰∏§‰∏™ÂáΩÊï∞ÂÖÅËÆ∏‰Ω†ËÆøÈóÆÂíåËÆæÁΩÆÂÖ®Â±ÄÊåÅ‰πÖÂåñÁ≥ªÁªüÔºàÔºâ„ÄÇ</p>
<p><code>Database</code>Á±ªÁé∞Âú®ÁªßÊâøËá™<code>PersistenceInterface</code>Âü∫Á±ªÂπ∂ÂÆûÁé∞‰∫ÜÊâÄÈúÄÁöÑÊé•Âè£ÔºàÂ∏åÊúõÈÅµÂÆàÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºàLSPÔºâÔºõÂèÇËßÅ‚ÄúÊåáÂçó6ÔºöÈÅµÂÆàÊäΩË±°ÁöÑÈ¢ÑÊúüË°å‰∏∫‚ÄùÔºâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Database.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Database</span> <span class="o">:</span> <span class="k">public</span> <span class="n">PersistenceInterface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... ÂèØËÉΩÁöÑÊï∞ÊçÆÊàêÂëòËÆøÈóÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÄöËøáÂà†Èô§Â§çÂà∂ÂíåÁßªÂä®Êìç‰Ωú‰ΩøÁ±ª‰∏çÂèØÁßªÂä®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Database</span><span class="p">(</span><span class="n">Database</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Database</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Database</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Database</span><span class="p">(</span><span class="n">Database</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Database</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Database</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="n">do_read</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">do_write</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// ... Êõ¥Â§öÊï∞ÊçÆÂ∫ìÁâπÂÆöÁöÑÂäüËÉΩ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ... ÂèØËÉΩÁöÑ‰∏Ä‰∫õÊï∞ÊçÆÊàêÂëò
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Êàë‰ª¨ÁöÑÁâπÊÆäËÆæÁΩÆ‰∏≠Ôºå<code>Database</code>Á±ª‰ª£Ë°®ÈªòËÆ§ÁöÑÊï∞ÊçÆÂ∫ìÂÆûÁé∞„ÄÇÊàë‰ª¨ÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™ÈªòËÆ§ÁöÑÊï∞ÊçÆÂ∫ìÂÆû‰æãÔºå‰ª•Èò≤Ê≤°ÊúâÂÖ∂‰ªñÊåÅ‰πÖÂåñÁ≥ªÁªüÈÄöËøá<code>set_persistence_interface()</code>ÂáΩÊï∞ÊåáÂÆö„ÄÇÁÑ∂ËÄåÔºåÂ¶ÇÊûú‰ªª‰ΩïÂÖ∂‰ªñÊåÅ‰πÖÂåñÁ≥ªÁªüÂú®ÂàõÂª∫<code>Database</code>‰πãÂâçË¢´ËÆæÁΩÆ‰∏∫Á≥ªÁªüËåÉÂõ¥ÁöÑÊï∞ÊçÆÂ∫ìÔºåÊàë‰ª¨Â∞±‰∏çËÉΩÂàõÂª∫ÂÆû‰æãÔºåÂõ†‰∏∫Ëøô‰ºöÂØºËá¥‰∏çÂøÖË¶ÅÁöÑÂºÄÈîÄ„ÄÇËøôÁßçË°å‰∏∫ÈÄöËøá‰ΩøÁî®‰∏§‰∏™ÈùôÊÄÅÂ±ÄÈÉ®ÂèòÈáèÂíåÁ´ãÂç≥Ë∞ÉÁî®ÁöÑlambdaË°®ËææÂºèÔºàIILEÔºâÊù•ÂÆûÁé∞<code>get_persistence_interface()</code>ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;PersistenceInterface.cpp&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Database.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÂÆö‰πâÂîØ‰∏ÄÁöÑ‰∏Ä‰∏™ÂÆû‰æãÂèòÈáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">PersistenceInterface</span><span class="o">*</span> <span class="n">instance</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">PersistenceInterface</span><span class="o">*</span> <span class="nf">get_persistence_interface</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Â±ÄÈÉ®ÂØπË±°ÔºåÁî±‰∏Ä‰∏™&#39;Á´ãÂç≥Ë∞ÉÁî®ÁöÑlambdaË°®ËææÂºè(IILE)&#39;ÂàùÂßãÂåñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">static</span> <span class="kt">bool</span> <span class="n">init</span> <span class="o">=</span> <span class="p">[](){</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">instance</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">static</span> <span class="n">Database</span> <span class="n">db</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">instance</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">db</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>  <span class="c1">// ÊàñËÄÖfalseÔºåÂÆûÈôÖÂÄºÂπ∂‰∏çÈáçË¶Å„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}();</span>  <span class="c1">// Ê≥®ÊÑèlambdaË°®ËææÂºèÂêéÁöÑ&#39;()&#39;ÔºåËøô‰ºöË∞ÉÁî®lambda„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">instance</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">set_persistence_interface</span><span class="p">(</span><span class="n">PersistenceInterface</span><span class="o">*</span> <span class="n">persistence</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">instance</span> <span class="o">=</span> <span class="n">persistence</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Á¨¨‰∏ÄÊ¨°ÊâßË°åÊµÅËøõÂÖ•<code>get_persistence_interface()</code>ÂáΩÊï∞Êó∂ÔºåÈùôÊÄÅÂ±ÄÈÉ®ÂèòÈáè<code>init</code>Ë¢´ÂàùÂßãÂåñ„ÄÇÂ¶ÇÊûúÊ≠§Êó∂<code>instance</code>Â∑≤ÁªèË¢´ËÆæÁΩÆÔºåÂàô‰∏ç‰ºöÂàõÂª∫<code>Database</code>ÂÆû‰æã„ÄÇ‰ΩÜÂ¶ÇÊûúËøòÊ≤°ÊúâÔºå<code>Database</code>ÂÆû‰æãÂ∞ÜÂú®lambdaÂÜÖÈÉ®‰Ωú‰∏∫Âè¶‰∏Ä‰∏™ÈùôÊÄÅÂ±ÄÈÉ®ÂèòÈáèÂàõÂª∫ÔºåÂπ∂ÁªëÂÆöÂà∞<code>instance</code>ÂèòÈáèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;PersistenceInterface.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Á¨¨‰∏ÄÊ¨°ËÆøÈóÆÔºåÂàõÂª∫Êï∞ÊçÆÂ∫ìÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">PersistenceInterface</span><span class="o">*</span> <span class="n">persistence</span> <span class="o">=</span> <span class="n">get_persistence_interface</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÁßçÂÆûÁé∞ËææÂà∞‰∫ÜÈ¢ÑÊúüÁöÑÊïàÊûúÔºö<code>Database</code>Êàê‰∏∫‰∫Ü‰∏Ä‰∏™ÂÆûÁé∞ÁªÜËäÇÔºåÊ≤°Êúâ‰ªª‰ΩïÂÖ∂‰ªñ‰ª£Á†Å‰æùËµñ‰∫éÂÆÉÔºåÂπ∂‰∏îÂèØ‰ª•ÈöèÊó∂Ë¢´Ëá™ÂÆö‰πâÊï∞ÊçÆÂ∫ìÂÆûÁé∞ÊõøÊç¢ÔºàÂèÇËßÅÂõæ10-5Ôºâ„ÄÇÂõ†Ê≠§ÔºåÂ∞ΩÁÆ°<code>Database</code>ÂÖ∑ÊúâÂçï‰æãÊÄßË¥®Ôºå‰ΩÜÂÆÉÂπ∂Ê≤°ÊúâÂºïÂÖ•‰æùËµñÂÖ≥Á≥ªÔºåÂπ∂‰∏îÂèØ‰ª•ÂæàÂÆπÊòìÂú∞Êõ¥ÊîπÂíåÊõøÊç¢‰ª•ËøõË°åÊµãËØï„ÄÇ</p>
<p><strong>Âõæ10-5. ÈáçÊûÑÂêéÁöÑÈùûÂçï‰æãÊï∞ÊçÆÂ∫ìÁöÑ‰æùËµñÂõæ</strong></p>
<p>‚ÄúÂìáÔºåËøôÊòØ‰∏Ä‰∏™ÂæàÊ£íÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇÊàëÊï¢ÊâìËµåÊàëÂèØ‰ª•Âú®Ëá™Â∑±ÁöÑ‰ª£Á†ÅÂ∫ì‰∏≠ÁöÑÂá†‰∏™Âú∞Êñπ‰ΩøÁî®ÂÆÉÔºÅ‚Äù‰Ω†Â∏¶ÁùÄÈí¶‰Ω©ÁöÑË°®ÊÉÖËØ¥„ÄÇ‚Äú‰ΩÜÊòØÊàëÁúãÂá∫‰∫Ü‰∏Ä‰∏™ÊΩúÂú®ÁöÑÈóÆÈ¢òÔºöÁî±‰∫éÊàëÂøÖÈ°ª‰ªé‰∏Ä‰∏™Êé•Âè£Á±ªÁªßÊâøÔºåËøôÊòØ‰∏Ä‰∏™‰æµÂÖ•ÊÄßÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇÂ¶ÇÊûúÊàë‰∏çËÉΩ‰øÆÊîπÁªôÂÆöÁöÑÂçï‰æãÁ±ªÊÄé‰πàÂäûÔºü‚ÄùÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰Ω†Êúâ‰∏§ÁßçÈùû‰æµÂÖ•ÊÄßÁöÑËÆæËÆ°Ê®°ÂºèÂèØ‰ª•ÈÄâÊã©„ÄÇË¶Å‰πà‰Ω†Â∑≤ÁªèÊúâ‰∫Ü‰∏Ä‰∏™ÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÔºåËøôÁßçÊÉÖÂÜµ‰∏ã‰Ω†ÂèØ‰ª•ÂºïÂÖ•‰∏Ä‰∏™ÈÄÇÈÖçÂô®Êù•ÂåÖË£ÖÁªôÂÆöÁöÑÂçï‰æãÔºàÂèÇËßÅ‚ÄúÊåáÂçó24Ôºö‰ΩøÁî®ÈÄÇÈÖçÂô®Ê†áÂáÜÂåñÊé•Âè£‚ÄùÔºâÔºåË¶Å‰πà‰Ω†ËøòÊ≤°ÊúâÂª∫Á´ãÁªßÊâøÂ±ÇÊ¨°ÁªìÊûÑÔºåËøôÁßçÊÉÖÂÜµ‰∏ã‰Ω†ÂèØ‰ª•ÂæàÂ•ΩÂú∞Âà©Áî®Â§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°ÂºèÔºàÂèÇËßÅ‚ÄúÊåáÂçó31Ôºö‰ΩøÁî®Â§ñÈÉ®Â§öÊÄÅÂÆûÁé∞Èùû‰æµÂÖ•ÂºèÁöÑËøêË°åÊó∂Â§öÊÄÅÊÄß‚ÄùÔºâ„ÄÇ</p>
<p>‚ÄúÂ•ΩÁöÑÔºå‰ΩÜÊàëÁúãÂà∞‰∫ÜÂè¶‰∏Ä‰∏™Êõ¥‰∏•ÈáçÁöÑÈóÆÈ¢òÔºöËøôÊÆµ‰ª£Á†ÅÁúüÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÂêóÔºü‚ÄùËÄÅÂÆûËØ¥Ôºå‰∏çÔºåÂÆÉ‰∏çÊòØ„ÄÇ‰∏æ‰∏Ä‰∏™ÂèØËÉΩÂá∫Áé∞ÈóÆÈ¢òÁöÑ‰æãÂ≠êÔºöÂú®È¶ñÊ¨°Ë∞ÉÁî®<code>get_persistence_interface()</code>Êó∂ÔºåÂèØËÉΩ‰ºöÁî±‰∫é<code>Database</code>ÂÆû‰æãÁöÑËÆæÁΩÆËä±Ë¥π‰∏Ä‰∫õÊó∂Èó¥ÔºåËÄåÂú®Ê≠§ÊúüÈó¥<code>set_persistence_interface()</code>Ë¢´Ë∞ÉÁî®„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåË¶Å‰πà<code>Database</code>ÁôΩË¥πÂäõÊ∞îÂàõÂª∫ÔºåË¶Å‰πà<code>set_persistence_interface()</code>ÁöÑË∞ÉÁî®‰∏¢Â§±„ÄÇÁÑ∂ËÄåÔºå‰πüËÆ∏‰ª§‰∫∫ÊÉäËÆ∂ÁöÑÊòØÔºåËøô‰∏çÊòØÊàë‰ª¨ÈúÄË¶ÅËß£ÂÜ≥ÁöÑÈóÆÈ¢ò„ÄÇÂéüÂõ†Â¶Ç‰∏ãÔºöËÆ∞‰Ωè<code>instance</code>Ë°®Á§∫ÂÖ®Â±ÄÁä∂ÊÄÅ„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÂÅáËÆæ<code>set_persistence_interface()</code>ÂèØ‰ª•‰ªé‰ª£Á†Å‰∏≠ÁöÑ‰ªª‰ΩïÂú∞ÊñπÈöèÊó∂Ë∞ÉÁî®Ôºå‰∏ÄËà¨Êù•ËØ¥Êàë‰ª¨‰∏çËÉΩÊúüÊúõÂú®Ë∞ÉÁî®<code>set_persistence_interface()</code>‰πãÂêéÔºåÂØπ<code>get_persistence_interface()</code>ÁöÑË∞ÉÁî®‰ºöËøîÂõûËÆæÂÆöÁöÑÂÄº„ÄÇÂõ†Ê≠§Ôºå‰ªé‰ª£Á†Å‰∏≠ÁöÑ‰ªªÊÑè‰ΩçÁΩÆË∞ÉÁî®<code>set_persistence_interface()</code>ÂáΩÊï∞Â∞±ÂÉèÂú®Âà´‰∫∫ËÑö‰∏ãÊäΩËµ∞Âú∞ÊØØ„ÄÇËøôÁ±ª‰ºº‰∫éÂØπ‰ªª‰ΩïÂ∑¶ÂÄºË∞ÉÁî®<code>std::move()</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">T</span> <span class="n">other</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>  <span class="c1">// ÈùûÂ∏∏Á≥üÁ≥ïÁöÑÊìç‰ΩúÔºàÂ≠óÈù¢ÊÑèÊÄùÔºÅÔºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ªéËøô‰∏™ËßíÂ∫¶Êù•ÁúãÔºå<code>set_persistence_interface()</code>ÂáΩÊï∞Â∫îÂú®Á®ãÂ∫èÂºÄÂßãÊó∂ÊàñÂçï‰∏™ÊµãËØïÂºÄÂßãÊó∂‰ΩøÁî®ÔºåËÄå‰∏çÊòØÈöèÊÑè‰ΩøÁî®„ÄÇ</p>
<p>‚ÄúÊàë‰ª¨‰∏çÂ∫îËØ•Á°Æ‰øù<code>set_persistence_interface()</code>ÂáΩÊï∞Âè™ËÉΩË∞ÉÁî®‰∏ÄÊ¨°ÂêóÔºü‚Äù‰Ω†ÈóÆ„ÄÇÊàë‰ª¨ÂΩìÁÑ∂ÂèØ‰ª•ËøôÊ†∑ÂÅöÔºå‰ΩÜËøô‰ºö‰∫∫‰∏∫Âú∞ÈôêÂà∂ÂÖ∂Âú®ÊµãËØïÁõÆÁöÑ‰∏äÁöÑ‰ΩøÁî®ÔºöÊàë‰ª¨Â∞ÜÊó†Ê≥ïÂú®ÊØè‰∏™ÂçïÁã¨ÁöÑÊµãËØïÂºÄÂßãÊó∂ÈáçÁΩÆÊåÅ‰πÖÂåñÁ≥ªÁªü„ÄÇ</p>
<p><strong>ÂêëÂ±ÄÈÉ®‰æùËµñÊ≥®ÂÖ•ËøàËøõ</strong></p>
<p>‚ÄúÂ•ΩÁöÑÔºåÊàëÊòéÁôΩ‰∫Ü„ÄÇÊúÄÂêé‰∏Ä‰∏™ÈóÆÈ¢òÔºöÁî±‰∫éËøô‰∏™Ëß£ÂÜ≥ÊñπÊ°àÊ∂âÂèäÂèØ‰ª•Êõ¥ÊîπÁöÑÂÖ®Â±ÄÁä∂ÊÄÅÔºå‰ΩøÁî®Êõ¥Áõ¥Êé•ÂíåÊõ¥Â±ÄÈÉ®ÁöÑ‰æùËµñÊ≥®ÂÖ•Âà∞‰ΩéÂ±ÇÁ±ª‰∏≠‰ºö‰∏ç‰ºöÊõ¥Â•ΩÔºüËÄÉËôë‰ª•‰∏ãÂØπ<code>Widget</code>Á±ªÁöÑ‰øÆÊîπÔºåÂÆÉÂú®ÊûÑÈÄ†Êó∂Ë¢´Ëµã‰∫à‰∫ÜÂÖ∂‰æùËµñÔºö‚Äù</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Widget.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;PersistenceInterface.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Widget</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Widget</span><span class="p">(</span><span class="n">PersistenceInterface</span><span class="o">*</span> <span class="n">persistence</span><span class="p">)</span>  <span class="c1">// ‰æùËµñÊ≥®ÂÖ•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="o">:</span> <span class="n">persistence_</span><span class="p">(</span><span class="n">persistence</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">doSomething</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">persistence_</span><span class="o">-&gt;</span><span class="n">read</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">PersistenceInterface</span><span class="o">*</span> <span class="n">persistence_</span><span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàëÂÆåÂÖ®ÂêåÊÑè‰Ω†ÁöÑËßÇÁÇπ„ÄÇËøôÂèØËÉΩÊòØËß£ÂÜ≥ÂÖ®Â±ÄÁä∂ÊÄÅÈóÆÈ¢òÁöÑ‰∏ã‰∏ÄÊ≠•„ÄÇÁÑ∂ËÄåÔºåÂú®Êàë‰ª¨ÂàÜÊûêËøôÁßçÊñπÊ≥ï‰πãÂâçÔºåËØ∑ËÆ∞‰ΩèÔºåËøô‰∏™ÊÉ≥Ê≥ï‰πãÊâÄ‰ª•Êàê‰∏∫ÂèØËÉΩÔºåÊòØÂõ†‰∏∫Êàë‰ª¨Â∑≤ÁªèÂèçËΩ¨‰∫Ü‰æùËµñÂÖ≥Á≥ª„ÄÇÈÄöËøáÂú®Êû∂ÊûÑÁöÑÈ´òÂ±ÇÊ¨°ÂºïÂÖ•ÊäΩË±°ÔºåÊàë‰ª¨Á™ÅÁÑ∂Êúâ‰∫ÜÈÄâÊã©ÔºåÂπ∂ÂèØ‰ª•ËÆ®ËÆ∫Êõø‰ª£ÊñπÊ°à„ÄÇÂõ†Ê≠§ÔºåÁ¨¨‰∏ÄÊ≠•‰πüÊòØÊúÄÈáçË¶ÅÁöÑ‰∏ÄÊ≠•ÊòØÊ≠£Á°ÆÁÆ°ÁêÜ‰æùËµñÂÖ≥Á≥ª„ÄÇ‰ΩÜÂõûÂà∞‰Ω†ÁöÑÂª∫ËÆÆÔºöÊàëÁúüÁöÑÂæàÂñúÊ¨¢ËøôÁßçÊñπÊ≥ï„ÄÇ<code>Widget</code>Á±ªÁöÑÊé•Âè£ÂèòÂæóÊõ¥Âä†‚ÄúËØöÂÆû‚ÄùÔºåÂπ∂Ê∏ÖÊ•öÂú∞ÊòæÁ§∫‰∫ÜÂÆÉÁöÑÊâÄÊúâ‰æùËµñ„ÄÇËÄå‰∏îÔºåÁî±‰∫é‰æùËµñÊòØÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞ÂèÇÊï∞‰º†ÈÄíÁöÑÔºå‰æùËµñÊ≥®ÂÖ•ÂèòÂæóÊõ¥Âä†Áõ¥ËßÇÂíåËá™ÁÑ∂„ÄÇ</p>
<p>Âè¶Â§ñÔºå‰Ω†ÂèØ‰ª•Âú®<code>Widget::doSomething()</code>ÂáΩÊï∞‰∏≠Áõ¥Êé•‰º†ÈÄí‰æùËµñÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Widget.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;PersistenceInterface.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Widget</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">doSomething</span><span class="p">(</span><span class="n">PersistenceInterface</span><span class="o">*</span> <span class="n">persistence</span><span class="p">,</span> <span class="cm">/* some arguments */</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">persistence</span><span class="o">-&gt;</span><span class="n">read</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËôΩÁÑ∂ËøôÁßçÊñπÊ≥ïÂØπ‰∫éÊàêÂëòÂáΩÊï∞Êù•ËØ¥ÂèØËÉΩ‰∏çÊòØÊúÄ‰Ω≥ÈÄâÊã©Ôºå‰ΩÜÂØπ‰∫éËá™Áî±ÂáΩÊï∞Êù•ËØ¥ÔºåËøôÂèØËÉΩÊòØÂîØ‰∏ÄÁöÑÈÄâÊã©„ÄÇÂÜçÊ¨°Âº∫Ë∞ÉÔºåÈÄöËøáÊòæÂºèÂ£∞ÊòéÂÖ∂‰æùËµñÔºåÂáΩÊï∞ÂèòÂæó‚ÄúÊõ¥Âä†ËØöÂÆû‚Äù„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËøôÁßçÁõ¥Êé•‰æùËµñÊ≥®ÂÖ•Êúâ‰∏Ä‰∏™Áº∫ÁÇπÔºöËøôÁßçÊñπÊ≥ïÂú®Â§ßÂûãË∞ÉÁî®Ê†à‰∏≠ÂèØËÉΩ‰ºöËøÖÈÄüÂèòÂæóÈöæ‰ª•Â§ÑÁêÜ„ÄÇÈÄöËøáËΩØ‰ª∂Ê†àÁöÑÂ§ö‰∏™Â±ÇÊ¨°‰º†ÈÄí‰æùËµñ‰ª•‰ΩøÂÖ∂Âú®ÈúÄË¶ÅÁöÑÂú∞ÊñπÂèØÁî®ÔºåÊó¢‰∏çÊñπ‰æø‰πü‰∏çÁõ¥ËßÇ„ÄÇÊ≠§Â§ñÔºåÁâπÂà´ÊòØÂú®Â≠òÂú®Â§ö‰∏™Âçï‰æãÁöÑÊÉÖÂÜµ‰∏ãÔºåËß£ÂÜ≥ÊñπÊ°àÂæàÂø´Â∞±‰ºöÂèòÂæóÁ¨®ÊãôÔºö‰æãÂ¶ÇÔºå‰∏∫‰∫ÜËÉΩÂ§üÂú®ÊúÄ‰ΩéÂ±ÇÊ¨°‰∏ä‰ΩøÁî®ÂÆÉ‰ª¨ÔºåÂøÖÈ°ªÈÄöËøáËÆ∏Â§öÂ±ÇÊ¨°ÁöÑÂáΩÊï∞Ë∞ÉÁî®Êù•‰º†ÈÄí<code>PersistenceInterface</code>„ÄÅÂàÜÈÖçÂô®ÂíåÁ≥ªÁªüËåÉÂõ¥ÁöÑÈÖçÁΩÆÔºåËøôÁ°ÆÂÆû‰∏çÊòØ‰∏Ä‰∏™ÊúÄ‰ºòÈõÖÁöÑÊñπÊ≥ï„ÄÇÂõ†Ê≠§Ôºå‰Ω†ÂèØËÉΩÂ∏åÊúõÁªìÂêàÊèê‰æõÂÖ®Â±ÄËÆøÈóÆÁÇπÂíåÂ±ÄÈÉ®‰æùËµñÊ≥®ÂÖ•ÁöÑÊÉ≥Ê≥ïÔºå‰æãÂ¶ÇÈÄöËøáÂºïÂÖ•‰∏Ä‰∏™ÂåÖË£ÖÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//---- &lt;Widget.h&gt; ---------------- 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;PersistenceInterface.h&gt;</span><span class="cp"> 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Widget</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">doSomething</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">doSomething</span><span class="p">(</span><span class="n">get_persistence_interface</span><span class="p">(),</span> <span class="cm">/* some arguments */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">doSomething</span><span class="p">(</span><span class="n">PersistenceInterface</span><span class="o">*</span> <span class="n">persistence</span><span class="p">,</span> <span class="cm">/* some arguments */</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">persistence</span><span class="o">-&gt;</span><span class="n">read</span><span class="p">(</span><span class="cm">/* some arguments */</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â∞ΩÁÆ°Êàë‰ª¨‰ªçÁÑ∂Êèê‰æõ‰∫Ü‰πãÂâçÁöÑ<code>doSomething()</code>ÂáΩÊï∞Ôºå‰ΩÜÁé∞Âú®ËøòÈ¢ùÂ§ñÊèê‰æõ‰∫Ü‰∏Ä‰∏™Êé•Âèó<code>PersistenceInterface</code>‰Ωú‰∏∫ÂáΩÊï∞ÂèÇÊï∞ÁöÑÈáçËΩΩÁâàÊú¨„ÄÇÁ¨¨‰∫å‰∏™ÂáΩÊï∞ÂÆåÊàêÊâÄÊúâÂ∑•‰ΩúÔºåËÄåÁ¨¨‰∏Ä‰∏™ÂáΩÊï∞Áé∞Âú®‰ªÖÂÖÖÂΩì‰∏Ä‰∏™ÂåÖË£ÖÂô®ÔºåÂÆÉÊ≥®ÂÖ•‰∫ÜÂÖ®Â±ÄËÆæÁΩÆÁöÑ<code>PersistenceInterface</code>„ÄÇÂú®ËøôÁßçÁªÑÂêà‰∏≠ÔºåÂèØ‰ª•Âú®Êú¨Âú∞ÂÅöÂá∫ÂÜ≥Á≠ñÂπ∂Âú®Êú¨Âú∞Ê≥®ÂÖ•ÊâÄÈúÄÁöÑ‰æùËµñÔºåÂêåÊó∂‰∏çÈúÄË¶ÅÈÄöËøáÂ§öÂ±ÇÂáΩÊï∞Ë∞ÉÁî®Êù•‰º†ÈÄí‰æùËµñ„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåËØ¥ÂÆûËØùÔºåÂ∞ΩÁÆ°Ëøô‰∫õËß£ÂÜ≥ÊñπÊ°àÂú®Ëøô‰∏™Êï∞ÊçÆÂ∫ìÁ§∫‰æã‰ª•ÂèäÂÜÖÂ≠òÁÆ°ÁêÜÁöÑ‰∏ä‰∏ãÊñá‰∏≠ÂèØËÉΩÈùûÂ∏∏ÊúâÊïàÔºå‰ΩÜÂÆÉÂπ∂‰∏çÈÄÇÁî®‰∫éÊØè‰∏Ä‰∏™Âçï‰æãÈóÆÈ¢ò„ÄÇÂõ†Ê≠§Ôºå‰∏çË¶ÅËÆ§‰∏∫ËøôÊòØÂîØ‰∏ÄÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇÊØïÁ´üÔºåËøôÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÊÉÖÂÜµ„ÄÇÁÑ∂ËÄåÔºåËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑËΩØ‰ª∂ËÆæËÆ°ÈÄöÁî®ËøáÁ®ãÁöÑ‰æãÂ≠êÔºöËØÜÂà´ÂèòÂåñÊàñÂØºËá¥‰æùËµñÁöÑÈÉ®ÂàÜÔºåÁÑ∂ÂêéÈÄöËøáÊèêÂèñÂêàÈÄÇÁöÑÊäΩË±°Êù•ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ„ÄÇÊ†πÊçÆ‰Ω†ÁöÑÊÑèÂõæÔºå‰Ω†Âè™ÊòØÂ∫îÁî®‰∫Ü‰∏Ä‰∏™ËÆæËÆ°Ê®°Âºè„ÄÇÂõ†Ê≠§ÔºåËÄÉËôëÁõ∏Â∫îÂú∞ÂëΩÂêç‰Ω†ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÂπ∂ÈÄöËøáËøôÁßçÊñπÂºèÁïô‰∏ã‰Ω†ÁöÑÊé®ÁêÜÁóïËøπ‰æõ‰ªñ‰∫∫ÂèÇËÄÉ„ÄÇ</p>
<p>ÊÄªÁªì‰∏Ä‰∏ãÔºåÂçï‰æãÊ®°ÂºèÂΩìÁÑ∂‰∏çÊòØÊúÄÂºï‰∫∫Ê≥®ÁõÆÁöÑÊ®°Âºè‰πã‰∏Ä„ÄÇÂÆÉÂ∏¶ÊúâÂ§™Â§öÁöÑÁº∫ÁÇπÔºåÊúÄÈáçË¶ÅÁöÑÊòØÂÖ®Â±ÄÁä∂ÊÄÅÈÄöÂ∏∏Â≠òÂú®ÁöÑÁº∫Èô∑„ÄÇ‰ΩÜÊòØÔºåÂ∞ΩÁÆ°ÊúâËÆ∏Â§öË¥üÈù¢ÊñπÈù¢ÔºåÂ¶ÇÊûúË∞®ÊÖé‰ΩøÁî®ÔºåÂçï‰æãÂèØ‰ª•ÊòØÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãË°®Á§∫‰ª£Á†Å‰∏≠Â∞ëÊï∞ÂÖ®Â±ÄÊñπÈù¢ÁöÑÊ≠£Á°ÆËß£ÂÜ≥ÊñπÊ°à„ÄÇÂ¶ÇÊûúÊòØËøôÊ†∑ÔºåËØ∑‰ºòÂÖàÈÄâÊã©ÂÖ∑ÊúâÂçïÂêëÊï∞ÊçÆÊµÅÁöÑÂçï‰æãÔºåÂπ∂ÈÄöËøáÂèçËΩ¨‰æùËµñÂÖ≥Á≥ªÂíåÂêØÁî®‰æùËµñÊ≥®ÂÖ•Ôºà‰ΩøÁî®Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÔºâÊù•ËÆæËÆ°Âçï‰æã‰ª•ÊîØÊåÅÂèØÂèòÊÄßÂíåÂèØÊµãËØïÊÄß„ÄÇ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>Ê≥®ÊÑèÂçï‰æã‰ª£Ë°®ÂÖ®Â±ÄÁä∂ÊÄÅÂèäÂÖ∂ÊâÄÊúâÁº∫Èô∑„ÄÇ</li>
<li>Â∞ΩÈáèÈÅøÂÖçÂÖ®Â±ÄÁä∂ÊÄÅ„ÄÇ</li>
<li>Ë∞®ÊÖé‰ΩøÁî®Âçï‰æãÔºå‰ªÖÁî®‰∫é‰ª£Á†Å‰∏≠ÁöÑÂ∞ëÊï∞ÂÖ®Â±ÄÊñπÈù¢„ÄÇ</li>
<li>‰ºòÂÖàÈÄâÊã©ÂÖ∑ÊúâÂçïÂêëÊï∞ÊçÆÊµÅÁöÑÂçï‰æã„ÄÇ</li>
<li>‰ΩøÁî®Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÂèçËΩ¨ÂØπÂçï‰æãÁöÑ‰æùËµñÔºå‰ª•Ê∂àÈô§ÈÄöÂ∏∏ÂØπÂèØÂèòÊÄßÂíåÂèØÊµãËØïÊÄßÁöÑÈòªÁ¢ç„ÄÇ</li>
</ul>
<h2 id="Á¨¨ÂçÅ‰∏ÄÁ´†-ÊúÄÂêéÁöÑÂáÜÂàô">Á¨¨ÂçÅ‰∏ÄÁ´† ÊúÄÂêéÁöÑÂáÜÂàô
</h2><p>Âè™Ââ©‰∏ã‰∏ÄÊù°ÊåáÂçóÔºå‰∏ÄÊù°ÊàëÂèØ‰ª•‰º†ÊéàÁªô‰Ω†ÁöÑÊúÄÂêéÂª∫ËÆÆ„ÄÇËøôÂ∞±ÊòØÂÆÉÔºöÊúÄÂêéÁöÑÊåáÂçó„ÄÇ</p>
<p><strong>ÂáÜÂàô39ÔºöÁªßÁª≠Â≠¶‰π†ËÆæËÆ°Ê®°Âºè</strong></p>
<p>‚ÄúÂ∞±ËøôÊ†∑ÔºüËøôÂ∞±ÊòØ‰Ω†ÊâÄÊúâÁöÑÂÜÖÂÆπÔºüÊãúÊâòÔºåËøòÊúâÂæàÂ§öËÆæËÆ°Ê®°ÂºèÊàë‰ª¨ËøòÊ≤°ÊúâËß¶ÂèäÔºÅ‚Äù‰Ω†ËØ¥„ÄÇÂ•ΩÂêßÔºåËØ¥ÂÆûËØùÔºå‰Ω†ÊòØÂÆåÂÖ®Ê≠£Á°ÆÁöÑÔºõÂØπÊ≠§ÊàëÊ≤°Êúâ‰ªÄ‰πàÂèØ‰ª•Ë°•ÂÖÖÁöÑ„ÄÇ‰ΩÜ‰∏∫‰∫ÜËæ©Êä§Ëá™Â∑±ÔºåÊàëÂéüÊú¨ËÆ°Âàí‰ªãÁªçÊõ¥Â§öÁöÑÊ®°ÂºèÔºåÁõ¥Âà∞Áé∞ÂÆûÁªô‰∫ÜÊàë‰∏ÄÂáªÔºö‰∏ÄÊú¨400È°µÁöÑ‰π¶Âè™ËÉΩÂÆπÁ∫≥Ëøô‰πàÂ§ö‰ø°ÊÅØ„ÄÇ‰∏çËøá‰∏çË¶ÅÊãÖÂøÉÔºöÂú®Ëøô400È°µ‰∏≠ÔºåÊàëÂ∑≤ÁªèÂ∏¶‰Ω†ÁªèÂéÜ‰∫Ü‰∏ÄÊÆµÊóÖÁ®ãÔºåÊ∂µÁõñ‰∫Ü‰Ω†Âú®ËΩØ‰ª∂ÂºÄÂèëËÅå‰∏öÁîüÊ∂Ø‰∏≠‰ªª‰ΩïËÆæËÆ°‰∏≠ÊúÄÈáçË¶Å„ÄÅÈöèÊó∂ÈúÄË¶ÅÁöÑÂª∫ËÆÆÔºö</p>
<p><strong>ÂáèÂ∞ë‰æùËµñ</strong></p>
<p>Â§ÑÁêÜ‰æùËµñÊòØËΩØ‰ª∂ËÆæËÆ°ÁöÑÊ†∏ÂøÉ„ÄÇÊó†ËÆ∫‰Ω†ÁºñÂÜôÂì™ÁßçÁ±ªÂûãÁöÑËΩØ‰ª∂ÔºåÂ¶ÇÊûú‰Ω†ÁúüÁöÑÊÉ≥ËÆ©ÂÆÉÊåÅ‰πÖÂ≠òÂú®Ôºå‰Ω†Â∞±ÂøÖÈ°ªÂ§ÑÁêÜ‰æùËµñÂÖ≥Á≥ªÔºöÂøÖË¶ÅÁöÑ‰æùËµñÂíå‰∏ªË¶ÅÁöÑ‰∫∫‰∏∫‰æùËµñ„ÄÇÂΩìÁÑ∂Ôºå‰Ω†ÁöÑ‰∏ªË¶ÅÁõÆÊ†áÊòØÂáèÂ∞ë‰æùËµñÔºåÁîöËá≥ÊúÄÂ∞èÂåñÂÆÉ‰ª¨„ÄÇ‰∏∫‰∫ÜÂÆûÁé∞Ëøô‰∏™ÁõÆÊ†áÔºå‰Ω†‰∏çÂèØÈÅøÂÖçÂú∞Ë¶Å‰ΩøÁî®ËÆæËÆ°Ê®°Âºè„ÄÇ</p>
<p><strong>ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ</strong></p>
<p>ËøôÂèØËÉΩÊòØ‰Ω†ËÉΩ‰ªéËøôÊú¨‰π¶‰∏≠Â≠¶Âà∞ÁöÑÊúÄÈáçË¶Å„ÄÅÊúÄÊ†∏ÂøÉÁöÑËÆæËÆ°ÊåáÂçó„ÄÇÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÔºå‰Ω†ÁöÑËΩØ‰ª∂ÁªìÊûÑÂ∞ÜÂèòÂæóÊ∏ÖÊô∞ÊòìÊáÇ„ÄÅÊòì‰∫éÊõ¥ÊîπÂíåÊµãËØï„ÄÇÊâÄÊúâËÆæËÆ°Ê®°ÂºèÔºåÊó†‰∏Ä‰æãÂ§ñÔºåÈÉΩ‰∏∫‰Ω†Êèê‰æõ‰∫Ü‰∏ÄÁßçÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÁöÑÊñπÊ≥ï„ÄÇ‰∏çÂêåÊ®°Âºè‰πãÈó¥ÁöÑ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÂÆÉ‰ª¨ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÁöÑÊñπÂºèÂíåÊÑèÂõæ„ÄÇÂ∞ΩÁÆ°ËÆæËÆ°Ê®°ÂºèÂú®ÁªìÊûÑ‰∏äÂèØËÉΩÁõ∏‰ººÔºå‰ΩÜÂÆÉ‰ª¨ÁöÑÊÑèÂõæÊÄªÊòØÁã¨ÁâπÁöÑ„ÄÇ</p>
<p><strong>‰ºòÂÖàÈÄâÊã©ÁªÑÂêàËÄåÈùûÁªßÊâø</strong></p>
<p>ËôΩÁÑ∂ÁªßÊâøÊòØ‰∏Ä‰∏™Âº∫Â§ßÁöÑÁâπÊÄßÔºå‰ΩÜËÆ∏Â§öËÆæËÆ°Ê®°ÂºèÁöÑÁúüÊ≠£ÂäõÈáèÊ∫ê‰∫éÂü∫‰∫éÁªÑÂêàÊûÑÂª∫„ÄÇ‰æãÂ¶ÇÔºåÁ≠ñÁï•ËÆæËÆ°Ê®°ÂºèÔºà‰∏Ä‰∏™Êó†Â§Ñ‰∏çÂú®ÁöÑÊ®°ÂºèÔºåÂπ∂‰∏îÂ∏åÊúõÁé∞Âú®Ëøô‰∏ÄÁÇπÂ∑≤ÁªèÂæàÊòéÊòæ‰∫ÜÔºâ‰∏ªË¶ÅÂü∫‰∫éÁªÑÂêàÊù•ÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÔºå‰ΩÜ‰πü‰∏∫‰Ω†Êèê‰æõ‰∫Ü‰ΩøÁî®ÁªßÊâøÊâ©Â±ïÂäüËÉΩÁöÑÈÄâÊã©„ÄÇÊ°•Êé•Ê®°Âºè„ÄÅÈÄÇÈÖçÂô®Ê®°Âºè„ÄÅË£ÖÈ•∞Âô®Ê®°Âºè„ÄÅÂ§ñÈÉ®Â§öÊÄÅÊ®°ÂºèÂíåÁ±ªÂûãÊì¶Èô§Ê®°Âºè‰πüÊòØÂ¶ÇÊ≠§„ÄÇ</p>
<p><strong>‰ºòÂÖàÈÄâÊã©Èùû‰æµÂÖ•ÂºèËÆæËÆ°</strong></p>
<p>ÁúüÊ≠£ÁöÑÁÅµÊ¥ªÊÄßÂíåÂèØÊâ©Â±ïÊÄßÊù•Ëá™‰∫é‰∏çÂøÖ‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÔºåËÄåÂè™ÈúÄÊ∑ªÂä†Êñ∞‰ª£Á†Å„ÄÇÂõ†Ê≠§Ôºå‰ªª‰ΩïÈùû‰æµÂÖ•ÂºèËÆæËÆ°ÈÉΩ‰ºò‰∫é‰æµÂÖ•Âºè‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÁöÑËÆæËÆ°„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇË£ÖÈ•∞Âô®Ê®°Âºè„ÄÅÈÄÇÈÖçÂô®Ê®°Âºè„ÄÅÂ§ñÈÉ®Â§öÊÄÅÊ®°ÂºèÂíåÁ±ªÂûãÊì¶Èô§Ê®°ÂºèÁ≠âËÆæËÆ°Ê®°ÂºèÊòØ‰Ω†ËÆæËÆ°Ê®°ÂºèÂ∑•ÂÖ∑ÁÆ±‰∏≠ÁöÑÂÆùË¥µË°•ÂÖÖ„ÄÇ</p>
<p><strong>‰ºòÂÖàÈÄâÊã©ÂÄºËØ≠‰πâËÄåÈùûÂºïÁî®ËØ≠‰πâ</strong></p>
<p>‰∏∫‰∫Ü‰øùÊåÅ‰ª£Á†ÅÁÆÄÂçï„ÄÅÊòìÊáÇÔºåÂπ∂ËøúÁ¶ªËØ∏Â¶ÇÁ©∫ÊåáÈíà„ÄÅÊÇ¨ÊåÇÊåáÈíà„ÄÅÁîüÂëΩÂë®Êúü‰æùËµñÁ≠âÈóÆÈ¢òÔºå‰Ω†Â∫îËØ•‰ºòÂÖà‰ΩøÁî®ÂÄºËÄå‰∏çÊòØÊåáÈíàÂíåÂºïÁî®„ÄÇC++ÊòØ‰∏ÄÈó®ÈùûÂ∏∏ÈÄÇÂêàËøô‰∏ÄÁõÆÁöÑÁöÑËØ≠Ë®ÄÔºåÂõ†‰∏∫ÂÆÉËÆ§ÁúüÂØπÂæÖÂÄºËØ≠‰πâ„ÄÇÂÆÉÂÖÅËÆ∏ÂºÄÂèëËÄÖÂú®ÂÄºËØ≠‰πâÁöÑ‰∏ñÁïå‰∏≠Ëøá‰∏äÂπ∏Á¶èÁöÑÁîüÊ¥ª„ÄÇ‰ª§‰∫∫ÊÉäËÆ∂ÁöÑÊòØÔºåÊ≠£Â¶ÇÊàë‰ª¨Âú®<code>std::variant</code>ÂíåÁ±ªÂûãÊì¶Èô§‰∏≠ÁúãÂà∞ÁöÑÔºåËøôÁßçÂì≤Â≠¶Âπ∂‰∏ç‰∏ÄÂÆö‰ºöÂØπÊÄßËÉΩ‰∫ßÁîüË¥üÈù¢ÂΩ±ÂìçÔºåÂèçËÄåÂèØËÉΩ‰ºöÊèêÈ´òÊÄßËÉΩ„ÄÇ</p>
<p>Èô§‰∫ÜËøô‰∫õÂÖ≥‰∫éËΩØ‰ª∂ËÆæËÆ°ÁöÑ‰∏ÄËà¨Âª∫ËÆÆÂ§ñÔºå‰Ω†Ëøò‰∫ÜËß£‰∫ÜËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑ„ÄÇÁé∞Âú®‰Ω†Áü•ÈÅì‰ªÄ‰πàÊòØËÆæËÆ°Ê®°ÂºèÔºö</p>
<ul>
<li><strong>Êúâ‰∏Ä‰∏™ÂêçÁß∞</strong></li>
<li><strong>Â∏¶ÊúâÊÑèÂõæ</strong></li>
<li><strong>ÂºïÂÖ•ÊäΩË±°</strong></li>
<li><strong>ÁªèËøáÈ™åËØÅ</strong></li>
</ul>
<p>Êúâ‰∫ÜËøô‰∫õ‰ø°ÊÅØÔºå‰Ω†Â∞Ü‰∏çÂÜç‰ºöÂõ†‰∏∫Êüê‰∫õÂÆûÁé∞ÁªÜËäÇË¢´ËØØËÆ§‰∏∫ÊòØËÆæËÆ°Ê®°ÂºèÔºàÂú®ÊàëÁöÑËÅå‰∏öÁîüÊ∂Ø‰∏≠Â§öÊ¨°ÈÅáÂà∞ËøôÁßçÊÉÖÂÜµÔºâËÄåÂèóÈ™óÔºå‰æãÂ¶ÇÂ£∞Áß∞Êô∫ËÉΩÊåáÈíàÔºà<code>std::unique_ptr</code>„ÄÅ<code>std::shared_ptr</code>Á≠âÔºâÊàñÂ∑•ÂéÇÂáΩÊï∞ÔºàÂ¶Ç<code>std::make_unique()</code>ÔºâÊòØËÆæËÆ°Ê®°ÂºèÁöÑÂÆûÁé∞„ÄÇÊ≠§Â§ñÔºå‰Ω†Áé∞Âú®ÁÜüÊÇâ‰∫Ü‰∏Ä‰∫õÊúÄÈáçË¶ÅÂíåÊúÄÊúâÁî®ÁöÑËÆæËÆ°Ê®°ÂºèÔºåÂÆÉ‰ª¨Â∞ÜÂú®Êú™Êù•‰∏çÊñ≠ËØÅÊòéÂÖ∂‰ª∑ÂÄºÔºö</p>
<ul>
<li><strong>ËÆøÈóÆËÄÖÊ®°Âºè</strong>Ôºö‰∏∫‰∫ÜÊâ©Â±ïÂØπ‰∏ÄÁªÑÂ∞ÅÈó≠Á±ªÂûãÁöÑÊìç‰ΩúÔºåÈÄâÊã©ËÆøÈóÆËÄÖËÆæËÆ°Ê®°ÂºèÔºàÂèØËÉΩÈÄöËøá<code>std::variant</code>ÂÆûÁé∞Ôºâ„ÄÇ</li>
<li><strong>Á≠ñÁï•Ê®°Âºè</strong>Ôºö‰∏∫‰∫ÜÈÖçÁΩÆË°å‰∏∫Âπ∂‰ªéÂ§ñÈÉ®‚ÄúÊ≥®ÂÖ•‚ÄùÂÆÉÔºåÈÄâÊã©Á≠ñÁï•ËÆæËÆ°Ê®°ÂºèÔºà‰πüÁß∞‰∏∫Âü∫‰∫éÁ≠ñÁï•ÁöÑËÆæËÆ°Ôºâ„ÄÇ</li>
<li><strong>ÂëΩ‰ª§Ê®°Âºè</strong>Ôºö‰∏∫‰∫ÜÊäΩË±°‰∏çÂêåÁ±ªÂûãÁöÑÊìç‰ΩúÔºàÂèØËÉΩÊòØÂèØÊí§ÈîÄÁöÑÊìç‰ΩúÔºâÔºåÂà©Áî®ÂëΩ‰ª§ËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li><strong>ËßÇÂØüËÄÖÊ®°Âºè</strong>Ôºö‰∏∫‰∫ÜËßÇÂØüÊüê‰∫õÂÆû‰ΩìÁöÑÁä∂ÊÄÅÂèòÂåñÔºåÈÄâÊã©ËßÇÂØüËÄÖËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li><strong>ÈÄÇÈÖçÂô®Ê®°Âºè</strong>Ôºö‰∏∫‰∫Ü‰∏ç‰æµÂÖ•Âú∞ÈÄÇÂ∫î‰∏Ä‰∏™Êé•Âè£Âà∞Âè¶‰∏Ä‰∏™Êé•Âè£Ôºå‰ΩøÁî®ÈÄÇÈÖçÂô®ËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li><strong>CRTPÔºàCuriously Recurring Template PatternÔºâ</strong>ÔºöÂØπ‰∫éÈùôÊÄÅÊäΩË±°ÔºåÈÅøÂÖçËôöÊãüÂáΩÊï∞ÔºàÂπ∂‰∏î‰Ω†‰∏çËÉΩ‰ΩøÁî®C++20ÁöÑÊ¶ÇÂøµÔºâÔºåÂ∫îÁî®CRTPËÆæËÆ°Ê®°Âºè„ÄÇCRTP‰πüÂèØ‰ª•Áî®‰∫éÂàõÂª∫ÁºñËØëÊó∂Ê∑∑ÂêàÁ±ª„ÄÇ</li>
<li><strong>Ê°•Êé•Ê®°Âºè</strong>Ôºö‰∏∫‰∫ÜÈöêËóèÂÆûÁé∞ÁªÜËäÇÂπ∂ÂáèÂ∞ëÁâ©ÁêÜ‰æùËµñÔºå‰ΩøÁî®Ê°•Êé•ËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li><strong>ÂéüÂûãÊ®°Âºè</strong>Ôºö‰∏∫‰∫ÜÂàõÂª∫ËôöÊãüÂâØÊú¨ÔºåÈÄâÊã©ÂéüÂûãËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li><strong>Â§ñÈÉ®Â§öÊÄÅÊ®°Âºè</strong>Ôºö‰∏∫‰∫ÜÈÄöËøáÂ§ñÈÉ®Ê∑ªÂä†Â§öÊÄÅË°å‰∏∫‰øÉËøõÊùæËÄ¶ÂêàÔºåËÆ∞‰ΩèÂ§ñÈÉ®Â§öÊÄÅËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li><strong>Á±ªÂûãÊì¶Èô§Ê®°Âºè</strong>Ôºö‰∏∫‰∫ÜÁªìÂêàÂ§ñÈÉ®Â§öÊÄÅÁöÑÂäõÈáè‰∏éÂÄºËØ≠‰πâÁöÑ‰ºòÂäøÔºåËÄÉËôëÁ±ªÂûãÊì¶Èô§ËÆæËÆ°Ê®°Âºè„ÄÇ</li>
<li><strong>Ë£ÖÈ•∞Âô®Ê®°Âºè</strong>Ôºö‰∏∫‰∫ÜÈùû‰æµÂÖ•Âú∞ÂêëÂØπË±°Ê∑ªÂä†ËÅåË¥£ÔºåÈÄâÊã©Ë£ÖÈ•∞Âô®ËÆæËÆ°Ê®°ÂºèÁöÑ‰ºòÁÇπ„ÄÇ</li>
</ul>
<p>ÁÑ∂ËÄåÔºåËøòÊúâÊõ¥Â§öÁöÑËÆæËÆ°Ê®°ÂºèÔºÅËøòÊúâÂæàÂ§öÈáçË¶ÅÂíåÊúâÁî®ÁöÑËÆæËÆ°Ê®°Âºè„ÄÇÂõ†Ê≠§Ôºå‰Ω†Â∫îËØ•ÁªßÁª≠Â≠¶‰π†ËÆæËÆ°Ê®°Âºè„ÄÇÊúâ‰∏§ÁßçÊñπÊ≥ïÂèØ‰ª•ÂÅöÂà∞Ëøô‰∏ÄÁÇπ„ÄÇÈ¶ñÂÖàÔºå‰∫ÜËß£Êõ¥Â§öÊ®°ÂºèÔºö‰∫ÜËß£ÂÆÉ‰ª¨ÁöÑÊÑèÂõæ‰ª•Âèä‰∏éÂÖ∂‰ªñËÆæËÆ°Ê®°ÂºèÁöÑÁõ∏‰ººÊÄßÂíåÂ∑ÆÂºÇ„ÄÇÂêåÊó∂Ôºå‰∏çË¶ÅÂøòËÆ∞ËÆæËÆ°Ê®°ÂºèÊòØÂÖ≥‰∫é‰æùËµñÁªìÊûÑÔºåËÄå‰∏çÊòØÂÆûÁé∞ÁªÜËäÇ„ÄÇÂÖ∂Ê¨°Ôºå‰Ω†‰πüÂ∫îËØ•Êõ¥Â•ΩÂú∞ÁêÜËß£ÊØè‰∏™Ê®°ÂºèÔºåÂπ∂‰ΩìÈ™åÂÆÉ‰ª¨ÁöÑ‰ºòÁÇπÂíåÁº∫ÁÇπ„ÄÇ‰∏∫Ê≠§ÔºåËØ∑Ê≥®ÊÑè‰Ω†Â∑•‰Ωú‰ª£Á†ÅÂ∫ì‰∏≠‰ΩøÁî®ÁöÑÈÇ£‰∫õËÆæËÆ°Ê®°Âºè„ÄÇÊàëÂêë‰Ω†‰øùËØÅÔºå‰Ω†‰ºöÂèëÁé∞ÂæàÂ§öÔºö‰ªª‰ΩïÂ∞ùËØïÁÆ°ÁêÜÂíåÂáèÂ∞ë‰æùËµñÁöÑÂä™ÂäõÂæàÂèØËÉΩÈÉΩÊòØËÆæËÆ°Ê®°ÂºèÁöÑËØÅÊòé„ÄÇÊâÄ‰ª•ÔºåÊòØÁöÑÔºåËÆæËÆ°Ê®°ÂºèÊó†Â§Ñ‰∏çÂú®ÔºÅ</p>
<p><strong>Êú¨ËäÇÊÄªÁªì</strong></p>
<ul>
<li>‰∫ÜËß£Êõ¥Â§öÁöÑËÆæËÆ°Ê®°ÂºèÂπ∂ÁêÜËß£ÂÆÉ‰ª¨ÁöÑÊÑèÂõæ„ÄÇ</li>
<li>Êõ¥Ê∑±ÂÖ•Âú∞‰∫ÜËß£ÊØè‰∏™ËÆæËÆ°Ê®°ÂºèÁöÑ‰ºòÁÇπÂíåÁº∫ÁÇπ„ÄÇ</li>
<li>Âú®ÂÆûÈôÖÂ∑•‰Ωú‰∏≠ÂØªÊâæËÆæËÆ°Ê®°ÂºèÔºå‰∫≤Ë∫´‰ΩìÈ™åÂÆÉ‰ª¨„ÄÇ</li>
</ul>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            ÂõΩÁ™ñ1573 - 
        
        2025 AKaKLya
    </section>
    
    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.0f4e44504cf40ab34cf124bb8fa71a5615b897b6d3841a1d2857b604319620c7.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
