<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="TODO:å±æ€§èœå• æ²¡å†™ï¼Œå¤ªä»–å¦ˆé•¿äº†ï¼Œä»¥åå†å¡«. UIè·å–GEçš„GameplayTagæ¶ˆæ¯ åº”ç”¨GEæ—¶ï¼Œè·å¾—GEçš„AssetTagï¼Œå¹¶ä¸”æ ¹æ®è¿™ä¸ªTag åšç‚¹äº‹æƒ…ï¼Œ ä¾‹å¦‚ï¼šæ¡åˆ°è¡€ç“¶æ—¶ï¼Œå¦‚æœGEé‡Œé¢æœ‰ Message.xx.xx çš„Tagï¼Œå°±é€šçŸ¥UIæ˜¾ç¤ºâ€œæ¡åˆ°ä¸€ä¸ªè¡€ç“¶â€ ä¹‹ç±»çš„æ–‡å­—. æ•´ä½“æ¡†æ¶: OverlayWidgetController.cpp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 void UAuraAbilitySystemComponent::AbilityInfoSet() { OnGameplayEffectAppliedDelegateToSelf.AddUObject(this,&amp;UAuraAbilitySystemComponent::ClientEffectApplied); } void UOverlayWidgetController::BindCallbacksToDependencies() { const UAuraAttributeSet* AuraAttributeSet = Cast&lt;UAuraAttributeSet&gt;(AttributeSet); AbilitySystemComponent-&gt;GetGameplayAttributeValueChangeDelegate(AuraAttributeSet-&gt;GetHealthAttribute()) .">
<title>GAS A - GEã€GAã€è¾“å…¥ç»‘å®š</title>

<link rel='canonical' href='https://akaklya.github.io/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="GAS A - GEã€GAã€è¾“å…¥ç»‘å®š">
<meta property='og:description' content="TODO:å±æ€§èœå• æ²¡å†™ï¼Œå¤ªä»–å¦ˆé•¿äº†ï¼Œä»¥åå†å¡«. UIè·å–GEçš„GameplayTagæ¶ˆæ¯ åº”ç”¨GEæ—¶ï¼Œè·å¾—GEçš„AssetTagï¼Œå¹¶ä¸”æ ¹æ®è¿™ä¸ªTag åšç‚¹äº‹æƒ…ï¼Œ ä¾‹å¦‚ï¼šæ¡åˆ°è¡€ç“¶æ—¶ï¼Œå¦‚æœGEé‡Œé¢æœ‰ Message.xx.xx çš„Tagï¼Œå°±é€šçŸ¥UIæ˜¾ç¤ºâ€œæ¡åˆ°ä¸€ä¸ªè¡€ç“¶â€ ä¹‹ç±»çš„æ–‡å­—. æ•´ä½“æ¡†æ¶: OverlayWidgetController.cpp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 void UAuraAbilitySystemComponent::AbilityInfoSet() { OnGameplayEffectAppliedDelegateToSelf.AddUObject(this,&amp;UAuraAbilitySystemComponent::ClientEffectApplied); } void UOverlayWidgetController::BindCallbacksToDependencies() { const UAuraAttributeSet* AuraAttributeSet = Cast&lt;UAuraAttributeSet&gt;(AttributeSet); AbilitySystemComponent-&gt;GetGameplayAttributeValueChangeDelegate(AuraAttributeSet-&gt;GetHealthAttribute()) .">
<meta property='og:url' content='https://akaklya.github.io/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/'>
<meta property='og:site_name' content='AKaKLya'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-01-11T12:59:56&#43;08:00'/><meta property='article:modified_time' content='2025-01-11T12:59:56&#43;08:00'/>
<meta name="twitter:title" content="GAS A - GEã€GAã€è¾“å…¥ç»‘å®š">
<meta name="twitter:description" content="TODO:å±æ€§èœå• æ²¡å†™ï¼Œå¤ªä»–å¦ˆé•¿äº†ï¼Œä»¥åå†å¡«. UIè·å–GEçš„GameplayTagæ¶ˆæ¯ åº”ç”¨GEæ—¶ï¼Œè·å¾—GEçš„AssetTagï¼Œå¹¶ä¸”æ ¹æ®è¿™ä¸ªTag åšç‚¹äº‹æƒ…ï¼Œ ä¾‹å¦‚ï¼šæ¡åˆ°è¡€ç“¶æ—¶ï¼Œå¦‚æœGEé‡Œé¢æœ‰ Message.xx.xx çš„Tagï¼Œå°±é€šçŸ¥UIæ˜¾ç¤ºâ€œæ¡åˆ°ä¸€ä¸ªè¡€ç“¶â€ ä¹‹ç±»çš„æ–‡å­—. æ•´ä½“æ¡†æ¶: OverlayWidgetController.cpp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 void UAuraAbilitySystemComponent::AbilityInfoSet() { OnGameplayEffectAppliedDelegateToSelf.AddUObject(this,&amp;UAuraAbilitySystemComponent::ClientEffectApplied); } void UOverlayWidgetController::BindCallbacksToDependencies() { const UAuraAttributeSet* AuraAttributeSet = Cast&lt;UAuraAttributeSet&gt;(AttributeSet); AbilitySystemComponent-&gt;GetGameplayAttributeValueChangeDelegate(AuraAttributeSet-&gt;GetHealthAttribute()) .">
  


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/d_hu15622052934649275245.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">AKaKLya</a></h1>
            <h2 class="site-description">ç‚¹å‡»</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#uiè·å–geçš„gameplaytagæ¶ˆæ¯">UIè·å–GEçš„GameplayTagæ¶ˆæ¯</a></li>
    <li><a href="#mmc">MMC</a></li>
    <li><a href="#gameplayability">GameplayAbility</a></li>
    <li><a href="#ç»‘å®šenhancedinput">ç»‘å®šEnhancedInput</a>
      <ol>
        <li><a href="#ç»‘å®šgameplaytagå’Œinputaction">ç»‘å®šGameplayTagå’ŒInputAction</a>
          <ol>
            <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
          </ol>
        </li>
        <li><a href="#æ¿€æ´»æŠ€èƒ½">æ¿€æ´»æŠ€èƒ½</a></li>
      </ol>
    </li>
    <li><a href="#æŠ•å°„ç‰©">æŠ•å°„ç‰©</a>
      <ol>
        <li><a href="#abilitytask">AbilityTask</a></li>
        <li><a href="#gameplayevent">GameplayEvent</a></li>
      </ol>
    </li>
    <li><a href="#ä½¿ç”¨æ•°æ®è¡¨åˆå§‹åŒ–æ•Œäººå±æ€§">ä½¿ç”¨æ•°æ®è¡¨åˆå§‹åŒ–æ•Œäººå±æ€§</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/">GAS A - GEã€GAã€è¾“å…¥ç»‘å®š</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 11, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 11 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>TODO:å±æ€§èœå• æ²¡å†™ï¼Œå¤ªä»–å¦ˆé•¿äº†ï¼Œä»¥åå†å¡«.</p>
<h2 id="uiè·å–geçš„gameplaytagæ¶ˆæ¯">UIè·å–GEçš„GameplayTagæ¶ˆæ¯
</h2><p>åº”ç”¨GEæ—¶ï¼Œè·å¾—GEçš„AssetTagï¼Œå¹¶ä¸”æ ¹æ®è¿™ä¸ªTag åšç‚¹äº‹æƒ…ï¼Œ</p>
<p>ä¾‹å¦‚ï¼šæ¡åˆ°è¡€ç“¶æ—¶ï¼Œå¦‚æœGEé‡Œé¢æœ‰ Message.xx.xx çš„Tagï¼Œå°±é€šçŸ¥UIæ˜¾ç¤ºâ€œæ¡åˆ°ä¸€ä¸ªè¡€ç“¶â€ ä¹‹ç±»çš„æ–‡å­—.</p>
<p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/health_pick.png"
	width="418"
	height="243"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/health_pick_hu1041244963068856528.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/health_pick_hu16651598715226712461.png 1024w"
	loading="lazy"
	
		alt="Pick"
	
	
		class="gallery-image" 
		data-flex-grow="172"
		data-flex-basis="412px"
	
></p>
<p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/health_ge.png"
	width="1364"
	height="824"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/health_ge_hu1397455204367945153.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/health_ge_hu265367971378371179.png 1024w"
	loading="lazy"
	
		alt="GE"
	
	
		class="gallery-image" 
		data-flex-grow="165"
		data-flex-basis="397px"
	
></p>
<hr>
<p>æ•´ä½“æ¡†æ¶:</p>
<p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/UI_GE_1.png"
	width="1840"
	height="857"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/UI_GE_1_hu2576473845438089183.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/UI_GE_1_hu784334285571936130.png 1024w"
	loading="lazy"
	
		alt="GE_UI"
	
	
		class="gallery-image" 
		data-flex-grow="214"
		data-flex-basis="515px"
	
></p>
<hr>
<p>OverlayWidgetController.cpp</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAuraAbilitySystemComponent</span><span class="o">::</span><span class="n">AbilityInfoSet</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">OnGameplayEffectAppliedDelegateToSelf</span><span class="p">.</span><span class="n">AddUObject</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="o">&amp;</span><span class="n">UAuraAbilitySystemComponent</span><span class="o">::</span><span class="n">ClientEffectApplied</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UOverlayWidgetController</span><span class="o">::</span><span class="n">BindCallbacksToDependencies</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="n">UAuraAttributeSet</span><span class="o">*</span> <span class="n">AuraAttributeSet</span> <span class="o">=</span> <span class="n">Cast</span><span class="o">&lt;</span><span class="n">UAuraAttributeSet</span><span class="o">&gt;</span><span class="p">(</span><span class="n">AttributeSet</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">GetGameplayAttributeValueChangeDelegate</span><span class="p">(</span><span class="n">AuraAttributeSet</span><span class="o">-&gt;</span><span class="n">GetHealthAttribute</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">.</span><span class="n">AddLambda</span><span class="p">([</span><span class="k">this</span><span class="p">](</span><span class="k">const</span> <span class="n">FOnAttributeChangeData</span><span class="o">&amp;</span> <span class="n">Data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">OnHealthChanged</span><span class="p">.</span><span class="n">Broadcast</span><span class="p">(</span><span class="n">Data</span><span class="p">.</span><span class="n">NewValue</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">GetGameplayAttributeValueChangeDelegate</span><span class="p">(</span><span class="n">AuraAttributeSet</span><span class="o">-&gt;</span><span class="n">GetMaxHealthAttribute</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">.</span><span class="n">AddLambda</span><span class="p">([</span><span class="k">this</span><span class="p">](</span><span class="k">const</span> <span class="n">FOnAttributeChangeData</span><span class="o">&amp;</span> <span class="n">Data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">OnMaxHealthChanged</span><span class="p">.</span><span class="n">Broadcast</span><span class="p">(</span><span class="n">Data</span><span class="p">.</span><span class="n">NewValue</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">GetGameplayAttributeValueChangeDelegate</span><span class="p">(</span><span class="n">AuraAttributeSet</span><span class="o">-&gt;</span><span class="n">GetManaAttribute</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">.</span><span class="n">AddLambda</span><span class="p">([</span><span class="k">this</span><span class="p">](</span><span class="k">const</span> <span class="n">FOnAttributeChangeData</span><span class="o">&amp;</span> <span class="n">Data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">OnManaChanged</span><span class="p">.</span><span class="n">Broadcast</span><span class="p">(</span><span class="n">Data</span><span class="p">.</span><span class="n">NewValue</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">GetGameplayAttributeValueChangeDelegate</span><span class="p">(</span><span class="n">AuraAttributeSet</span><span class="o">-&gt;</span><span class="n">GetMaxManaAttribute</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">.</span><span class="n">AddLambda</span><span class="p">([</span><span class="k">this</span><span class="p">](</span><span class="k">const</span> <span class="n">FOnAttributeChangeData</span><span class="o">&amp;</span> <span class="n">Data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">OnMaxManaChanged</span><span class="p">.</span><span class="n">Broadcast</span><span class="p">(</span><span class="n">Data</span><span class="p">.</span><span class="n">NewValue</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">Cast</span><span class="o">&lt;</span><span class="n">UAuraAbilitySystemComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">AbilitySystemComponent</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">EffectAssetTags</span><span class="p">.</span><span class="n">AddLambda</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="p">[</span><span class="k">this</span><span class="p">](</span><span class="k">const</span> <span class="n">FGameplayTagContainer</span><span class="o">&amp;</span> <span class="n">AssetTags</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="n">FGameplayTag</span><span class="o">&amp;</span> <span class="nl">Tag</span> <span class="p">:</span> <span class="n">AssetTags</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="k">auto</span> <span class="n">MessageTag</span> <span class="o">=</span> <span class="n">FGameplayTag</span><span class="o">::</span><span class="n">RequestGameplayTag</span><span class="p">(</span><span class="n">FName</span><span class="p">(</span><span class="s">&#34;Message&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="p">(</span><span class="n">Tag</span><span class="p">.</span><span class="n">MatchesTag</span><span class="p">(</span><span class="n">MessageTag</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">				<span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="n">FUIWidgetRow</span><span class="o">*</span> <span class="n">Row</span> <span class="o">=</span> <span class="n">GetDataTableRowByTag</span><span class="o">&lt;</span><span class="n">FUIWidgetRow</span><span class="o">&gt;</span><span class="p">(</span><span class="n">MessageWidgetDataTable</span><span class="p">,</span><span class="n">Tag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">					<span class="n">MessageWidgetRowDelegate</span><span class="p">.</span><span class="n">Broadcast</span><span class="p">(</span><span class="o">*</span><span class="n">Row</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>WidgetControllerç»‘å®šASCçš„ç”Ÿå‘½å€¼ç­‰å±æ€§å˜åŒ–åï¼Œå†è¿½åŠ ä¸€ä¸ªå§”æ‰˜çš„è®¢é˜…ï¼ŒASCåœ¨GEåº”ç”¨æ—¶ èƒ½è·å¾—GEçš„AssetTagï¼Œè¿™é‡Œåªç­›é€‰Messageçš„Tagï¼ŒæŠŠå®ƒå¹¿æ’­å‡ºæ¥ï¼ŒWidgetControllerå°±èƒ½æ”¶åˆ°ASCåº”ç”¨çš„GEçš„æ ‡ç­¾.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam</span><span class="p">(</span><span class="n">FMessageWidgetRowSignature</span><span class="p">,</span><span class="n">FUIWidgetRow</span><span class="p">,</span><span class="n">Row</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">UPROPERTY</span><span class="p">(</span><span class="n">BlueprintAssignable</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;GAS|Messages&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">FMessageWidgetRowSignature</span> <span class="n">MessageWidgetRowDelegate</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>WidgetControlleré‡Œé¢å†æ¥ä¸€ä¸ªå§”æ‰˜ï¼Œè®©UMGåœ¨è“å›¾é‡Œé¢è®¢é˜…ï¼ŒæŠŠæ¥æ”¶åˆ°çš„GEæ ‡ç­¾å¹¿æ’­å‡ºå»ï¼Œè®©UMGè®¢é˜…æ¥æ”¶.</p>
<hr>
<p>OverlayWidgetController.h</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">USTRUCT</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">FUIWidgetRow</span> <span class="o">:</span> <span class="k">public</span> <span class="n">FTableRowBase</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">,</span><span class="n">BlueprintReadOnly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">FGameplayTag</span> <span class="n">AssetTag</span> <span class="o">=</span> <span class="n">FGameplayTag</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">,</span><span class="n">BlueprintReadOnly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">FText</span> <span class="n">Message</span> <span class="o">=</span> <span class="n">FText</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">,</span><span class="n">BlueprintReadOnly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">TSubclassOf</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">UAuraUserWidget</span><span class="o">&gt;</span> <span class="n">MessageWidget</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">,</span><span class="n">BlueprintReadOnly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">UTexture2D</span><span class="o">*</span> <span class="n">Image</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="c1">//-------------------------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">T</span><span class="o">*</span> <span class="n">GetDataTableRowByTag</span><span class="p">(</span><span class="n">UDataTable</span><span class="o">*</span> <span class="n">DataTable</span><span class="p">,</span><span class="k">const</span> <span class="n">FGameplayTag</span><span class="o">&amp;</span> <span class="n">Tag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">T</span><span class="o">*</span> <span class="n">UOverlayWidgetController</span><span class="o">::</span><span class="n">GetDataTableRowByTag</span><span class="p">(</span><span class="n">UDataTable</span><span class="o">*</span> <span class="n">DataTable</span><span class="p">,</span> <span class="k">const</span> <span class="n">FGameplayTag</span><span class="o">&amp;</span> <span class="n">Tag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">DataTable</span><span class="o">-&gt;</span><span class="n">FindRow</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Tag</span><span class="p">.</span><span class="n">GetTagName</span><span class="p">(),</span><span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//---------------------------------------//
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æŸ¥è¡¨ï¼Œé€šè¿‡Tagè·å¾—Messageï¼Œå¹¶å¹¿æ’­ç»™è“å›¾</p>
<p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/UI_DT.png"
	width="1111"
	height="601"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/UI_DT_hu12644675555274464313.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/UI_DT_hu1663540463027378707.png 1024w"
	loading="lazy"
	
		alt="DT"
	
	
		class="gallery-image" 
		data-flex-grow="184"
		data-flex-basis="443px"
	
></p>
<p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/UI_BP_Msg.png"
	width="1919"
	height="995"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/UI_BP_Msg_hu970805159960070925.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/UI_BP_Msg_hu1583330286859285313.png 1024w"
	loading="lazy"
	
		alt="UI_BP_Msg.png"
	
	
		class="gallery-image" 
		data-flex-grow="192"
		data-flex-basis="462px"
	
></p>
<h2 id="mmc">MMC
</h2><p>æ ¹æ®ç­‰çº§è®¾ç½®è¡€é‡</p>
<p>è§’è‰²åŸºç±»AAuraCharacterBaseæ·»åŠ ä¸€ä¸ªICombatInterfaceæ¥å£ï¼ŒEnemyå’ŒAAuraCharacteréƒ½é‡å†™ä¸€ä¸‹GetPlayerLeveå‡½æ•°.<br/>Enemyçš„Levelå°±åœ¨Enemyç±»é‡Œé¢ï¼Œç©å®¶çš„Levelåœ¨PlayerStateé‡Œé¢ï¼Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UINTERFACE</span><span class="p">(</span><span class="n">MinimalAPI</span><span class="p">,</span><span class="n">BlueprintType</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">UCombatInterface</span> <span class="o">:</span> <span class="k">public</span> <span class="n">UInterface</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AURA_API</span> <span class="n">ICombatInterface</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Add interface functions to this class. This is the class that will be inherited to implement this interface.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">int32</span> <span class="n">GetPlayerLeve</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---------------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">AURA_API</span> <span class="nl">AAuraCharacterBase</span> <span class="p">:</span> <span class="k">public</span> <span class="n">ACharacter</span><span class="p">,</span><span class="k">public</span> <span class="n">IAbilitySystemInterface</span><span class="p">,</span><span class="k">public</span> <span class="n">ICombatInterface</span>
</span></span><span class="line"><span class="cl"><span class="c1">//--------------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">int32</span> <span class="n">AAuraEnemy</span><span class="o">::</span><span class="n">GetPlayerLeve</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">Level</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">int32</span> <span class="n">AAuraCharacter</span><span class="o">::</span><span class="n">GetPlayerLeve</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">AAuraPlayerState</span><span class="o">*</span> <span class="n">AuraPlayerState</span> <span class="o">=</span> <span class="n">GetPlayerState</span><span class="o">&lt;</span><span class="n">AAuraPlayerState</span><span class="o">&gt;</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">check</span><span class="p">(</span><span class="n">AuraPlayerState</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">AuraPlayerState</span><span class="o">-&gt;</span><span class="n">GetPlayerLeve</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>MMC è‡ªå®šä¹‰è®¡ç®—</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UCLASS</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AURA_API</span> <span class="nl">UMMC_MaxHealth</span> <span class="p">:</span> <span class="k">public</span> <span class="n">UGameplayModMagnitudeCalculation</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">UMMC_MaxHealth</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">float</span> <span class="nf">CalculateBaseMagnitude_Implementation</span><span class="p">(</span><span class="k">const</span> <span class="n">FGameplayEffectSpec</span><span class="o">&amp;</span> <span class="n">Spec</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">FGameplayEffectAttributeCaptureDefinition</span> <span class="n">VigorDef</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">UMMC_MaxHealth</span><span class="o">::</span><span class="n">UMMC_MaxHealth</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">VigorDef</span><span class="p">.</span><span class="n">AttributeToCapture</span> <span class="o">=</span> <span class="n">UAuraAttributeSet</span><span class="o">::</span><span class="n">GetVigorAttribute</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">VigorDef</span><span class="p">.</span><span class="n">AttributeSource</span> <span class="o">=</span> <span class="n">EGameplayEffectAttributeCaptureSource</span><span class="o">::</span><span class="n">Target</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">VigorDef</span><span class="p">.</span><span class="n">bSnapshot</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">RelevantAttributesToCapture</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">VigorDef</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">UMMC_MaxHealth</span><span class="o">::</span><span class="n">CalculateBaseMagnitude_Implementation</span><span class="p">(</span><span class="k">const</span> <span class="n">FGameplayEffectSpec</span><span class="o">&amp;</span> <span class="n">Spec</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="n">FGameplayTagContainer</span><span class="o">*</span> <span class="n">TargetTags</span> <span class="o">=</span> <span class="n">Spec</span><span class="p">.</span><span class="n">CapturedTargetTags</span><span class="p">.</span><span class="n">GetAggregatedTags</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="n">FGameplayTagContainer</span><span class="o">*</span> <span class="n">SourceTags</span> <span class="o">=</span> <span class="n">Spec</span><span class="p">.</span><span class="n">CapturedSourceTags</span><span class="p">.</span><span class="n">GetAggregatedTags</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">FAggregatorEvaluateParameters</span> <span class="n">EvaluateParameters</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">EvaluateParameters</span><span class="p">.</span><span class="n">SourceTags</span> <span class="o">=</span> <span class="n">SourceTags</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">EvaluateParameters</span><span class="p">.</span><span class="n">TargetTags</span> <span class="o">=</span> <span class="n">TargetTags</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kt">float</span> <span class="n">Vigor</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">GetCapturedAttributeMagnitude</span><span class="p">(</span><span class="n">VigorDef</span><span class="p">,</span><span class="n">Spec</span><span class="p">,</span><span class="n">EvaluateParameters</span><span class="p">,</span><span class="n">Vigor</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">Vigor</span> <span class="o">=</span> <span class="n">FMath</span><span class="o">::</span><span class="n">Max</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Vigor</span><span class="p">,</span><span class="mf">0.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">ICombatInterface</span><span class="o">*</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">Cast</span><span class="o">&lt;</span><span class="n">ICombatInterface</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Spec</span><span class="p">.</span><span class="n">GetContext</span><span class="p">().</span><span class="n">GetSourceObject</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="n">int32</span> <span class="n">PlayerLevel</span> <span class="o">=</span> <span class="n">Interface</span><span class="o">-&gt;</span><span class="n">GetPlayerLeve</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">80</span> <span class="o">+</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">Vigor</span> <span class="o">+</span> <span class="mf">10.0</span> <span class="o">*</span> <span class="n">PlayerLevel</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="gameplayability">GameplayAbility
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UCLASS</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AURA_API</span> <span class="nl">UAuraGameplayAbility</span> <span class="p">:</span> <span class="k">public</span> <span class="n">UGameplayAbility</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;Input&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">FGameplayTag</span> <span class="n">StartupInputTag</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">,</span><span class="n">BlueprintReadOnly</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;Damage&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">FScalableFloat</span> <span class="n">Damage</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>GAé‡Œçš„StartupInputTagæ˜¯ç”¨æ¥ç»‘å®šè¾“å…¥çš„ï¼Œå‚è§åæ–‡çš„ â€œç»‘å®šEnhancedInputâ€œ</p>
<p>ASCç±»é‡Œçš„AddCharacterAbilityå‡½æ•°ï¼Œæ ¹æ®è§’è‰²ç±»ä¼ è¿‡æ¥çš„æŠ€èƒ½Arrayèµ‹äºˆæŠ€èƒ½<br/>ä»StartupAbilityé‡Œé¢åˆ›å»ºFGameplayAbilitySpecï¼Œå¹¶ä¸”ç”¨StartupInputTagä½œä¸ºåŠ¨æ€Tagï¼Œä¼ å…¥Spec.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAuraAbilitySystemComponent</span><span class="o">::</span><span class="n">AddCharacterAbility</span><span class="p">(</span><span class="k">const</span> <span class="n">TArray</span><span class="o">&lt;</span><span class="n">TSubclassOf</span><span class="o">&lt;</span><span class="n">UGameplayAbility</span><span class="o">&gt;&gt;&amp;</span> <span class="n">StartupAbility</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">AbilityClass</span> <span class="p">:</span> <span class="n">StartupAbility</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">FGameplayAbilitySpec</span> <span class="n">AbilitySpec</span> <span class="o">=</span> <span class="n">FGameplayAbilitySpec</span><span class="p">(</span><span class="n">AbilityClass</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="k">auto</span> <span class="n">AuraAbility</span> <span class="o">=</span> <span class="n">Cast</span><span class="o">&lt;</span><span class="n">UAuraGameplayAbility</span><span class="o">&gt;</span><span class="p">(</span><span class="n">AbilitySpec</span><span class="p">.</span><span class="n">Ability</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">AbilitySpec</span><span class="p">.</span><span class="n">GetDynamicSpecSourceTags</span><span class="p">().</span><span class="n">AddTag</span><span class="p">(</span><span class="n">AuraAbility</span><span class="o">-&gt;</span><span class="n">StartupInputTag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="n">GiveAbility</span><span class="p">(</span><span class="n">AbilitySpec</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/*GameplayAbilitySpec*
</span></span><span class="line"><span class="cl"> * An activatable ability spec, hosted on the ability system component. This defines both what the ability is (what class, what level, input binding etc)
</span></span><span class="line"><span class="cl"> * and also holds runtime state that must be kept outside of the ability being instanced/activated.
</span></span><span class="line"><span class="cl"> */
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">* å¯æ¿€æ´»çš„èƒ½åŠ›è§„èŒƒï¼Œæ‰˜ç®¡åœ¨èƒ½åŠ›ç³»ç»Ÿç»„ä»¶ä¸Šã€‚è¿™æ—¢å®šä¹‰äº†èƒ½åŠ›æ˜¯ä»€ä¹ˆï¼ˆä»€ä¹ˆç±»åˆ«ã€ä»€ä¹ˆçº§åˆ«ã€è¾“å…¥ç»‘å®šç­‰ï¼‰
</span></span><span class="line"><span class="cl">* ä¹Ÿä¿å­˜äº†å¿…é¡»ä¿ç•™åœ¨å®ä¾‹åŒ–/æ¿€æ´»çš„èƒ½åŠ›ä¹‹å¤–çš„è¿è¡Œæ—¶çŠ¶æ€ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><p>è§’è‰²åŸºç±»é‡Œç”¨ä¸€ä¸ªTArrayä¿å­˜åˆå§‹æŠ€èƒ½ï¼ŒåŸºç±»AddCharacterAbilityå‡½æ•°èµ‹äºˆæŠ€èƒ½.<br/>åœ¨ç©å®¶ç±»çš„PossessedByå‡½æ•°é‡Œè°ƒç”¨AddCharacterAbility.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;Ability&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="n">TSubclassOf</span><span class="o">&lt;</span><span class="n">UGameplayAbility</span><span class="o">&gt;&gt;</span> <span class="n">StartupAbility</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraCharacterBase</span><span class="o">::</span><span class="n">AddCharacterAbility</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">UAuraAbilitySystemComponent</span><span class="o">*</span> <span class="n">AuraASC</span> <span class="o">=</span> <span class="n">CastChecked</span><span class="o">&lt;</span><span class="n">UAuraAbilitySystemComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">AbilitySystemComponent</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">HasAuthority</span><span class="p">())</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">AuraASC</span><span class="o">-&gt;</span><span class="n">AddCharacterAbility</span><span class="p">(</span><span class="n">StartupAbility</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraCharacter</span><span class="o">::</span><span class="n">PossessedBy</span><span class="p">(</span><span class="n">AController</span><span class="o">*</span> <span class="n">NewController</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">Super</span><span class="o">::</span><span class="n">PossessedBy</span><span class="p">(</span><span class="n">NewController</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Initi Ability Actor info For the Server;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">InitAbilityActorInfo</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">AddCharacterAbility</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="GiveGA.png" alt="image-20250114220913555" style="zoom:80%;" />
<hr>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>GATag</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Activation Owned Tags</td>
<td>å½“æŠ€èƒ½æ¿€æ´»æ—¶ï¼Œå°†è®¾ç½®çš„Tagåº”ç”¨ç»™æŠ€èƒ½æ‰€æœ‰è€…ï¼Œåœ¨ç»“æŸæ—¶åˆ é™¤ã€‚å¦‚æœå°†AbilitySystemGlobalsé‡Œé¢çš„é…ç½®ReplicateActivationOwnedTagså¼€å¯ï¼ŒTagè¿˜å°†ä¼šè¢«å¤åˆ¶ã€‚</td>
</tr>
<tr>
<td>Activation Required Tags</td>
<td>å½“æŠ€èƒ½æ¿€æ´»è€…æ‹¥æœ‰è®¾ç½®çš„æ‰€æœ‰çš„Tagæ—¶ï¼Œæ­¤æŠ€èƒ½æ‰èƒ½å¤Ÿè¢«æ¿€æ´»ã€‚</td>
</tr>
<tr>
<td>Activation Blocked Tags</td>
<td>å½“æŠ€èƒ½æ¿€æ´»è€…æœ‰ä¸€é¡¹è®¾ç½®çš„Tagï¼ŒæŠ€èƒ½å°±æ— æ³•è¢«æ¿€æ´»</td>
</tr>
<tr>
<td>Source Required Tags</td>
<td>å½“æŠ€èƒ½æ‰€æœ‰è€…æ‹¥æœ‰è®¾ç½®çš„æ‰€æœ‰çš„Tagæ—¶ï¼Œæ­¤æŠ€èƒ½æ‰èƒ½å¤Ÿè¢«æ¿€æ´»</td>
</tr>
<tr>
<td>Source Blocked Tags</td>
<td>å½“æŠ€èƒ½æ‰€æœ‰è€…æœ‰ä¸€é¡¹è®¾ç½®çš„Tagï¼ŒæŠ€èƒ½å°±æ— æ³•è¢«æ¿€æ´»</td>
</tr>
<tr>
<td>Target Required Tags</td>
<td>å½“æŠ€èƒ½ç›®æ ‡è€…æ‹¥æœ‰è®¾ç½®çš„æ‰€æœ‰çš„Tagæ—¶ï¼Œæ­¤æŠ€èƒ½æ‰èƒ½å¤Ÿè¢«æ¿€æ´»</td>
</tr>
<tr>
<td>Target Blocked Tags</td>
<td>å½“æŠ€èƒ½ç›®æ ‡è€…æœ‰ä¸€é¡¹è®¾ç½®çš„Tagï¼ŒæŠ€èƒ½å°±æ— æ³•è¢«æ¿€æ´»</td>
</tr>
</tbody>
</table></div>
<hr>
<h2 id="ç»‘å®šenhancedinput">ç»‘å®šEnhancedInput
</h2><p><a class="link" href="https://zhuanlan.zhihu.com/p/563941712"  target="_blank" rel="noopener"
    >å¢å¼ºè¾“å…¥</a></p>
<h3 id="ç»‘å®šgameplaytagå’Œinputaction">ç»‘å®šGameplayTagå’ŒInputAction
</h3><p>è¿™æ˜¯ä¸€ä¸ªç”¨æ¥å…³è” GameplayTag å’Œ InputActionçš„èµ„äº§ UAuraInputConfig</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">USTRUCT</span><span class="p">(</span><span class="n">BlueprintType</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">FAuraInputAction</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">UInputAction</span><span class="o">*</span> <span class="n">InputAction</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">FGameplayTag</span> <span class="n">InputTag</span> <span class="o">=</span> <span class="n">FGameplayTag</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">UCLASS</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AURA_API</span> <span class="nl">UAuraInputConfig</span> <span class="p">:</span> <span class="k">public</span> <span class="n">UDataAsset</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">const</span> <span class="n">UInputAction</span><span class="o">*</span> <span class="n">FindAbilityInputActionForTag</span><span class="p">(</span><span class="k">const</span> <span class="n">FGameplayTag</span><span class="o">&amp;</span> <span class="n">InputTag</span><span class="p">,</span><span class="kt">bool</span> <span class="n">bLogNotFound</span> <span class="o">=</span> <span class="nb">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">,</span><span class="n">BlueprintReadOnly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">TArray</span><span class="o">&lt;</span><span class="n">FAuraInputAction</span><span class="o">&gt;</span> <span class="n">AbilityInputActions</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//------------------------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">const</span> <span class="n">UInputAction</span><span class="o">*</span> <span class="n">UAuraInputConfig</span><span class="o">::</span><span class="n">FindAbilityInputActionForTag</span><span class="p">(</span><span class="k">const</span> <span class="n">FGameplayTag</span><span class="o">&amp;</span> <span class="n">InputTag</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bLogNotFound</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">Action</span> <span class="p">:</span> <span class="n">AbilityInputActions</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span> <span class="o">&amp;&amp;</span> <span class="n">Action</span><span class="p">.</span><span class="n">InputTag</span> <span class="o">==</span> <span class="n">InputTag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">bLogNotFound</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogTemp</span><span class="p">,</span><span class="n">Warning</span><span class="p">,</span><span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;Can Not Found AbilityInputAction for InputTag [%s] on InputConfig [%s]&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">			<span class="o">*</span><span class="n">InputTag</span><span class="p">.</span><span class="n">ToString</span><span class="p">(),</span><span class="o">*</span><span class="n">GetNameSafe</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="Input_1.png" alt="image-20250115154727950" style="zoom:80%;" />
<hr>
<p>åˆ›å»ºå¢å¼ºè¾“å…¥ç»„ä»¶ï¼Œç»§æ‰¿è‡ªUEnhancedInputComponent</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UCLASS</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AURA_API</span> <span class="nl">UAuraInputComponent</span> <span class="p">:</span> <span class="k">public</span> <span class="n">UEnhancedInputComponent</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">UserClass</span><span class="p">,</span><span class="k">typename</span> <span class="n">PressedFuncType</span><span class="p">,</span><span class="k">typename</span> <span class="n">ReleasedFuncType</span><span class="p">,</span><span class="k">typename</span> <span class="n">HeldFuncType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="n">BindAbilityActions</span><span class="p">(</span><span class="k">const</span> <span class="n">UAuraInputConfig</span><span class="o">*</span> <span class="n">InputConfig</span><span class="p">,</span><span class="n">UserClass</span><span class="o">*</span> <span class="n">Object</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">PressedFuncType</span> <span class="n">PressedFunc</span><span class="p">,</span><span class="n">ReleasedFuncType</span> <span class="n">ReleasedFunc</span><span class="p">,</span><span class="n">HeldFuncType</span> <span class="n">HeldFunc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">UserClass</span><span class="p">,</span> <span class="k">typename</span> <span class="n">PressedFuncType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">ReleasedFuncType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">HeldFuncType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAuraInputComponent</span><span class="o">::</span><span class="n">BindAbilityActions</span><span class="p">(</span><span class="k">const</span> <span class="n">UAuraInputConfig</span><span class="o">*</span> <span class="n">InputConfig</span><span class="p">,</span> <span class="n">UserClass</span><span class="o">*</span> <span class="n">Object</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="n">PressedFuncType</span> <span class="n">PressedFunc</span><span class="p">,</span> <span class="n">ReleasedFuncType</span> <span class="n">ReleasedFunc</span><span class="p">,</span> <span class="n">HeldFuncType</span> <span class="n">HeldFunc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">check</span><span class="p">(</span><span class="n">InputConfig</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">Action</span> <span class="p">:</span> <span class="n">InputConfig</span><span class="o">-&gt;</span><span class="n">AbilityInputActions</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span> <span class="o">&amp;&amp;</span> <span class="n">Action</span><span class="p">.</span><span class="n">InputTag</span><span class="p">.</span><span class="n">IsValid</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">(</span><span class="n">PressedFunc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="n">BindAction</span><span class="p">(</span><span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span><span class="p">,</span><span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Started</span><span class="p">,</span><span class="n">Object</span><span class="p">,</span><span class="n">PressedFunc</span><span class="p">,</span><span class="n">Action</span><span class="p">.</span><span class="n">InputTag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">(</span><span class="n">ReleasedFunc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="n">BindAction</span><span class="p">(</span><span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span><span class="p">,</span><span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Completed</span><span class="p">,</span><span class="n">Object</span><span class="p">,</span><span class="n">ReleasedFunc</span><span class="p">,</span><span class="n">Action</span><span class="p">.</span><span class="n">InputTag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">(</span><span class="n">HeldFunc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="n">BindAction</span><span class="p">(</span><span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span><span class="p">,</span><span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Triggered</span><span class="p">,</span><span class="n">Object</span><span class="p">,</span><span class="n">HeldFunc</span><span class="p">,</span><span class="n">Action</span><span class="p">.</span><span class="n">InputTag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>typename PressedFuncType, typename ReleasedFuncType, typename HeldFuncType</p>
<p>è¿™3ä¸ªå‚æ•° ä¼ å…¥å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨å¯¼å…¶ç±»å‹<br/>å¯ä»¥æŠŠ &amp;AAuraPlayerController::AbilityInputTagPressed è¿™æ ·çš„å‚æ•°ä¼ å…¥è¿›å».</p>
<hr>
<p>åœ¨ç©å®¶æ§åˆ¶å™¨é‡Œè°ƒç”¨è¿™ä¸ªBindAbilityActionså‡½æ•°ï¼Œ æ¥ç»‘å®šGameplayTagå’ŒInputAction.</p>
<p>å‡†å¤‡3ä¸ªè¾“å…¥å‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ Pressedã€Releasedã€Held çŠ¶æ€ä¸‹çš„è¾“å…¥ï¼Œ æŒ‰ä¸‹ã€é‡Šæ”¾ã€æŒ‰ä½.</p>
<p>å¹¶ä¸”è¿™3ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶ä¼ æ¥çš„FGameplayTag InputTagï¼Œå› ä¸ºä¸Šé¢çš„å¢å¼ºè¾“å…¥åœ¨ç»‘å®šæ—¶ï¼Œå°±å¯ä»¥æŠŠå‚æ•°ä¼ åˆ°å‡½æ•°é‡Œ.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">BindAction</span><span class="p">(</span><span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span><span class="p">,</span><span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Started</span><span class="p">,</span><span class="n">Object</span><span class="p">,</span><span class="n">PressedFunc</span><span class="p">,</span><span class="n">Action</span><span class="p">.</span><span class="n">InputTag</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>BindActionçš„æœ€åä¸¤ä¸ªå‚æ•° - PressedFuncå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šæŠŠAction.InputTagä¼ ç»™è¿™ä¸ªå‡½æ•°. <br/>æ‰€ä»¥å¯ä»¥ä½¿ç”¨AbilityInputTagPressed(FGameplayTag InputTag) è¿™æ ·çš„å‡½æ•° å»æ¥æ”¶ä¼ æ¥çš„InputTag.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraPlayerController</span><span class="o">::</span><span class="n">AbilityInputTagPressed</span><span class="p">(</span><span class="n">FGameplayTag</span> <span class="n">InputTag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">AddOnScreenDebugMessage</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">3.f</span><span class="p">,</span><span class="n">FColor</span><span class="o">::</span><span class="n">Red</span><span class="p">,</span><span class="o">*</span><span class="n">InputTag</span><span class="p">.</span><span class="n">ToString</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraPlayerController</span><span class="o">::</span><span class="n">AbilityInputTagReleased</span><span class="p">(</span><span class="n">FGameplayTag</span> <span class="n">InputTag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraPlayerController</span><span class="o">::</span><span class="n">AbilityInputTagHeld</span><span class="p">(</span><span class="n">FGameplayTag</span> <span class="n">InputTag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>ä½¿ç”¨å‡†å¤‡å¥½çš„UAuraInputConfigèµ„äº§ ç»‘å®šè¾“å…¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">//AuraPlayerController.h	
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;Input&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">TObjectPtr</span><span class="o">&lt;</span><span class="n">UAuraInputConfig</span><span class="o">&gt;</span> <span class="n">InputConfig</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraPlayerController</span><span class="o">::</span><span class="n">SetupInputComponent</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">Super</span><span class="o">::</span><span class="n">SetupInputComponent</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">UAuraInputComponent</span><span class="o">*</span> <span class="n">AuraInputComponent</span> <span class="o">=</span> <span class="n">CastChecked</span><span class="o">&lt;</span><span class="n">UAuraInputComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">InputComponent</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">AuraInputComponent</span><span class="o">-&gt;</span><span class="n">BindAction</span><span class="p">(</span><span class="n">MoveAction</span><span class="p">,</span><span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Triggered</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="o">&amp;</span><span class="n">AAuraPlayerController</span><span class="o">::</span><span class="n">Move</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">AuraInputComponent</span><span class="o">-&gt;</span><span class="n">BindAbilityActions</span><span class="p">(</span><span class="n">InputConfig</span><span class="p">,</span><span class="k">this</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">AbilityInputTagPressed</span><span class="p">,</span><span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">AbilityInputTagReleased</span><span class="p">,</span><span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">AbilityInputTagHeld</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„æ‰§è¡Œè¾“å…¥çš„å‚æ•°é¡ºåºPress,Released,Held</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAuraInputComponent</span><span class="o">::</span><span class="n">BindAbilityActions</span><span class="p">(</span><span class="k">const</span> <span class="n">UAuraInputConfig</span><span class="o">*</span> <span class="n">InputConfig</span><span class="p">,</span> <span class="n">UserClass</span><span class="o">*</span> <span class="n">Object</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="n">PressedFuncType</span> <span class="n">PressedFunc</span><span class="p">,</span> <span class="n">ReleasedFuncType</span> <span class="n">ReleasedFunc</span><span class="p">,</span> <span class="n">HeldFuncType</span> <span class="n">HeldFunc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">AuraInputComponent</span><span class="o">-&gt;</span><span class="n">BindAbilityActions</span><span class="p">(</span><span class="n">InputConfig</span><span class="p">,</span><span class="k">this</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">AbilityInputTagPressed</span><span class="p">,</span><span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">AbilityInputTagReleased</span><span class="p">,</span><span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">AbilityInputTagHeld</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨å°±æŠŠ GameplayTag å’Œ ç©å®¶æ§åˆ¶å™¨ é‡Œé¢çš„å‡½æ•°ç»‘å®šä¸Šäº†ï¼Œ</p>
<hr>
<h4 id="æ€»ç»“">æ€»ç»“
</h4><p>å›é¡¾æ•´ä¸ªæµç¨‹ï¼Œ</p>
<p>1.é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªèµ„äº§UAuraInputConfigï¼Œè¿™ä¸ªèµ„äº§å®šä¹‰äº† GameplayTag å’Œ InputAction ç»‘å®šå…³ç³»ï¼Œ<br/>2.åœ¨ ç©å®¶æ§åˆ¶å™¨ é‡Œé¢ï¼ŒæŒ‡å®šäº†UAuraInputConfigï¼Œå†è°ƒç”¨ å¢å¼ºè¾“å…¥ çš„å‡½æ•°ï¼Œä½¿ç”¨è¿™ä¸ªèµ„äº§è¿›è¡Œ GameplayTagå’ŒInputActionçš„ç»‘å®š.<br/>3.å¢å¼ºè¾“å…¥ åˆ©ç”¨InputActionç»‘å®šä¸€ä¸ªè¦æ‰§è¡Œçš„å‡½æ•°ï¼ŒæŒ‰ä¸‹æŒ‰é”®æ—¶ æ‰§è¡Œå“ªä¸€ä¸ªå‡½æ•°.<br/>4.ç»‘å®šå®Œäº†å‡½æ•° è¿˜ä¸å¤Ÿï¼Œ æŒ‰ä¸‹æŒ‰é”®æ—¶æ‰§è¡Œå‡½æ•° å¹¶ä¸”å‡½æ•°è¿˜è¦æ¥æ”¶åˆ°å¯¹åº”çš„é‚£ä¸ª GameplayTag.<br/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">BindAction</span><span class="p">(</span><span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span><span class="p">,</span><span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Started</span><span class="p">,</span><span class="n">Object</span><span class="p">,</span><span class="n">PressedFunc</span><span class="p">,</span><span class="n">Action</span><span class="p">.</span><span class="n">InputTag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">BindAction</span><span class="p">(</span><span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span><span class="p">,</span><span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Completed</span><span class="p">,</span><span class="n">Object</span><span class="p">,</span><span class="n">ReleasedFunc</span><span class="p">,</span><span class="n">Action</span><span class="p">.</span><span class="n">InputTag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">BindAction</span><span class="p">(</span><span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span><span class="p">,</span><span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Triggered</span><span class="p">,</span><span class="n">Object</span><span class="p">,</span><span class="n">HeldFunc</span><span class="p">,</span><span class="n">Action</span><span class="p">.</span><span class="n">InputTag</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬4ä¸ªæ¡ä»¶ å°±æ˜¯ç”¨è¿™ä¸ªBindActionç»‘å®šèµ·æ¥çš„ï¼Œ<br/>å½“æŒ‰ä¸‹æŒ‰é”®æ—¶ã€æ¾å¼€æŒ‰é”®æ—¶ã€æŒç»­æŒ‰ä½æŒ‰é”®æ—¶ã€éƒ½ä¼šæŠŠ Action.InputTag ä¼ ç»™å¯¹åº”çš„ å“åº”å‡½æ•°.</p>
<p>è¿™æ ·å°±å®ç°äº† æŒ‰ä¸‹æŒ‰é”®æ—¶ï¼Œè¿˜èƒ½è·å¾—å¯¹åº”æŒ‰é”®çš„GameplayTag.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraPlayerController</span><span class="o">::</span><span class="n">AbilityInputTagPressed</span><span class="p">(</span><span class="n">FGameplayTag</span> <span class="n">InputTag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">AddOnScreenDebugMessage</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">3.f</span><span class="p">,</span><span class="n">FColor</span><span class="o">::</span><span class="n">Red</span><span class="p">,</span><span class="o">*</span><span class="n">InputTag</span><span class="p">.</span><span class="n">ToString</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªå‡½æ•°å°±èƒ½æ¥æ”¶åˆ° GameplayTag çš„å€¼.</p>
<hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">UserClass</span><span class="p">,</span> <span class="k">typename</span><span class="p">...</span> <span class="n">VarTypes</span><span class="o">&gt;</span>																																					\
</span></span><span class="line"><span class="cl">	<span class="n">FEnhancedInputActionEventBinding</span><span class="o">&amp;</span> <span class="n">BindAction</span><span class="p">(</span><span class="k">const</span> <span class="n">UInputAction</span><span class="o">*</span> <span class="n">Action</span><span class="p">,</span> <span class="n">ETriggerEvent</span> <span class="n">TriggerEvent</span><span class="p">,</span> <span class="n">UserClass</span><span class="o">*</span> <span class="n">Object</span><span class="p">,</span> <span class="k">typename</span> <span class="n">HANDLER_SIG</span><span class="o">::</span><span class="k">template</span> <span class="n">TMethodPtr</span><span class="o">&lt;</span> <span class="n">UserClass</span><span class="p">,</span> <span class="n">VarTypes</span><span class="p">...</span> <span class="o">&gt;</span> <span class="n">Func</span><span class="p">,</span> <span class="n">VarTypes</span><span class="p">...</span> <span class="n">Vars</span><span class="p">)</span> \
</span></span><span class="line"><span class="cl">	<span class="p">{</span>																																											\
</span></span><span class="line"><span class="cl">		<span class="n">TUniquePtr</span><span class="o">&lt;</span><span class="n">FEnhancedInputActionEventDelegateBinding</span><span class="o">&lt;</span><span class="n">HANDLER_SIG</span><span class="o">&gt;&gt;</span> <span class="n">AB</span> <span class="o">=</span> <span class="n">MakeUnique</span><span class="o">&lt;</span><span class="n">FEnhancedInputActionEventDelegateBinding</span><span class="o">&lt;</span><span class="n">HANDLER_SIG</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">Action</span><span class="p">,</span> <span class="n">TriggerEvent</span><span class="p">);</span>			\
</span></span><span class="line"><span class="cl">		<span class="n">AB</span><span class="o">-&gt;</span><span class="n">Delegate</span><span class="p">.</span><span class="n">BindDelegate</span><span class="o">&lt;</span><span class="n">UserClass</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Object</span><span class="p">,</span> <span class="n">Func</span><span class="p">,</span> <span class="n">Vars</span><span class="p">...);</span>																														\
</span></span><span class="line"><span class="cl">		<span class="n">AB</span><span class="o">-&gt;</span><span class="n">Delegate</span><span class="p">.</span><span class="n">SetShouldFireWithEditorScriptGuard</span><span class="p">(</span><span class="n">bShouldFireDelegatesInEditor</span><span class="p">);</span>																							\
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="o">*</span><span class="n">EnhancedActionEventBindings</span><span class="p">.</span><span class="n">Add_GetRef</span><span class="p">(</span><span class="n">MoveTemp</span><span class="p">(</span><span class="n">AB</span><span class="p">));</span>																											\
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ˜¯å¢å¼ºè¾“å…¥é‡Œä½¿ç”¨çš„å˜å‚æ¨¡æ¿ï¼Œåº”è¯¥æ˜¯å¯ä»¥è®©æŒ‰ä¸‹æŒ‰é”®æ—¶ è§¦å‘çš„é‚£ä¸ªå“åº”å‡½æ•° æ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°. éšä¾¿æ¥.<br/>ä¾‹å¦‚:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">BindAction</span><span class="p">(</span><span class="n">Action</span><span class="p">.</span><span class="n">InputAction</span><span class="p">,</span><span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Started</span><span class="p">,</span><span class="n">Object</span><span class="p">,</span><span class="n">PressedFunc</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="n">Action</span><span class="p">.</span><span class="n">InputTag</span><span class="p">,</span><span class="n">floatA</span><span class="p">,</span><span class="n">floatB</span><span class="p">,</span><span class="n">floatC</span><span class="p">,</span><span class="n">floatD</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">Pressed</span><span class="p">(</span><span class="n">FGameplayTag</span> <span class="n">InputTag</span><span class="p">,</span><span class="kt">float</span> <span class="n">a</span><span class="p">,</span><span class="kt">float</span> <span class="n">b</span><span class="p">,</span><span class="kt">float</span> <span class="n">c</span><span class="p">,</span><span class="kt">float</span> <span class="n">d</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="æ¿€æ´»æŠ€èƒ½">æ¿€æ´»æŠ€èƒ½
</h3><p>å‰é¢çš„ GameplayAbility ç‰‡æ®µï¼Œåœ¨GAé‡Œé¢å®šä¹‰äº†ä¸€ä¸ªå˜é‡StartupInputTag</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;Input&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">FGameplayTag</span> <span class="n">StartupInputTag</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¹¶ä¸”åœ¨ASCé‡Œé¢GiveAbilityæ—¶ï¼ŒæŠŠè¿™ä¸ªStartupInputTagä¼ ç»™ GameplayAbilitySpec ä½œä¸ºåŠ¨æ€Tag.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAuraAbilitySystemComponent</span><span class="o">::</span><span class="n">AddCharacterAbility</span><span class="p">(</span><span class="k">const</span> <span class="n">TArray</span><span class="o">&lt;</span><span class="n">TSubclassOf</span><span class="o">&lt;</span><span class="n">UGameplayAbility</span><span class="o">&gt;&gt;&amp;</span> <span class="n">StartupAbility</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">AbilityClass</span> <span class="p">:</span> <span class="n">StartupAbility</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">FGameplayAbilitySpec</span> <span class="n">AbilitySpec</span> <span class="o">=</span> <span class="n">FGameplayAbilitySpec</span><span class="p">(</span><span class="n">AbilityClass</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="k">auto</span> <span class="n">AuraAbility</span> <span class="o">=</span> <span class="n">Cast</span><span class="o">&lt;</span><span class="n">UAuraGameplayAbility</span><span class="o">&gt;</span><span class="p">(</span><span class="n">AbilitySpec</span><span class="p">.</span><span class="n">Ability</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">AbilitySpec</span><span class="p">.</span><span class="n">GetDynamicSpecSourceTags</span><span class="p">().</span><span class="n">AddTag</span><span class="p">(</span><span class="n">AuraAbility</span><span class="o">-&gt;</span><span class="n">StartupInputTag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="n">GiveAbility</span><span class="p">(</span><span class="n">AbilitySpec</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨ å°±ä½¿ç”¨è¿™ä¸ªTagæ¡ä»¶ ä½œä¸º <strong>æŒ‰é”®è¾“å…¥</strong> å’Œ <strong>æ¿€æ´»æŠ€èƒ½</strong> ä¹‹é—´çš„æ¡¥æ¢.</p>
<p>åœ¨ASCé‡Œåˆ›å»ºä¸‹é¢ä¸¤ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªGameplayTagï¼ŒæŒ‰ä¸‹æŒ‰é”®æ—¶ å°±è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œæ¿€æ´»æŠ€èƒ½.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAuraAbilitySystemComponent</span><span class="o">::</span><span class="n">AbilityInputHeld</span><span class="p">(</span><span class="k">const</span> <span class="n">FGameplayTag</span><span class="o">&amp;</span> <span class="n">InputTag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">InputTag</span><span class="p">.</span><span class="n">IsValid</span><span class="p">())</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">TArray</span><span class="o">&lt;</span><span class="n">FGameplayAbilitySpec</span><span class="o">&gt;</span> <span class="n">Abilities</span> <span class="o">=</span> <span class="n">GetActivatableAbilities</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">AbilitySpec</span> <span class="p">:</span> <span class="n">Abilities</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">AbilitySpec</span><span class="p">.</span><span class="n">GetDynamicSpecSourceTags</span><span class="p">().</span><span class="n">HasTagExact</span><span class="p">(</span><span class="n">InputTag</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">AbilitySpecInputPressed</span><span class="p">(</span><span class="n">AbilitySpec</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">AbilitySpec</span><span class="p">.</span><span class="n">IsActive</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="n">TryActivateAbility</span><span class="p">(</span><span class="n">AbilitySpec</span><span class="p">.</span><span class="n">Handle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAuraAbilitySystemComponent</span><span class="o">::</span><span class="n">AbilityInputReleased</span><span class="p">(</span><span class="k">const</span> <span class="n">FGameplayTag</span><span class="o">&amp;</span> <span class="n">InputTag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">InputTag</span><span class="p">.</span><span class="n">IsValid</span><span class="p">())</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">TArray</span><span class="o">&lt;</span><span class="n">FGameplayAbilitySpec</span><span class="o">&gt;</span> <span class="n">Abilities</span> <span class="o">=</span> <span class="n">GetActivatableAbilities</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">AbilitySpec</span> <span class="p">:</span> <span class="n">Abilities</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">AbilitySpec</span><span class="p">.</span><span class="n">GetDynamicSpecSourceTags</span><span class="p">().</span><span class="n">HasTagExact</span><span class="p">(</span><span class="n">InputTag</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">AbilitySpecInputReleased</span><span class="p">(</span><span class="n">AbilitySpec</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>ç©å®¶æ§åˆ¶å™¨ ç»‘å®šäº†GameplayTag å’Œ æŒ‰é”®å“åº”çš„å‡½æ•°ï¼Œ åœ¨æŒ‰é”®å“åº”çš„å‡½æ•°é‡Œèƒ½å¤Ÿæ¥æ”¶åˆ° é‚£ä¸ªæŒ‰é”®å¯¹åº”çš„GameplayTagï¼Œ <br/>ç°åœ¨è¦åšçš„æ˜¯: è¿™ä¸ªæ¥æ”¶åˆ°çš„ GameplayTag åªè¦å’ŒæŸä¸ª GA çš„GameplayTag åŒ¹é…æˆåŠŸï¼Œå°±æ¿€æ´»é‚£ä¸ªGA.</p>
<hr>
<p>æŒ‰é”®å“åº”çš„å‡½æ•° åœ¨ç©å®¶æ§åˆ¶å™¨é‡Œï¼Œæ¿€æ´»æŠ€èƒ½éœ€è¦è§’è‰²èº«ä¸Šçš„ASCï¼ŒAbilitySystemComponent<br/>ç©å®¶æ§åˆ¶å™¨ èƒ½å¤Ÿè·å¾—è§’è‰²ï¼Œä»è§’è‰²èº«ä¸Šè·å¾—ASCï¼Œ å¥½äº† è¿™å°±æ˜¯æ€è·¯.</p>
<p>ç©å®¶æ§åˆ¶å™¨é‡Œé¢ç”¨ä¸€ä¸ªæŒ‡é’ˆå­˜æ”¾ ASCï¼Œå¦‚æœASCæœ‰æ•ˆ å°±ä½¿ç”¨å­˜å‚¨çš„ASCï¼Œå¦‚æœæ— æ•ˆ åˆ™é‡æ–°è·å¾—è§’è‰²ä»¥åŠASC.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UPROPERTY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">TObjectPtr</span><span class="o">&lt;</span><span class="n">UAuraAbilitySystemComponent</span><span class="o">&gt;</span> <span class="n">AuraAbilitySystemComponent</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraPlayerController</span><span class="o">::</span><span class="n">AbilityInputTagPressed</span><span class="p">(</span><span class="n">FGameplayTag</span> <span class="n">InputTag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraPlayerController</span><span class="o">::</span><span class="n">AbilityInputTagReleased</span><span class="p">(</span><span class="n">FGameplayTag</span> <span class="n">InputTag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">GetASC</span><span class="p">()</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">)</span> <span class="k">return</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">GetASC</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">AbilityInputReleased</span><span class="p">(</span><span class="n">InputTag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraPlayerController</span><span class="o">::</span><span class="n">AbilityInputTagHeld</span><span class="p">(</span><span class="n">FGameplayTag</span> <span class="n">InputTag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">GetASC</span><span class="p">()</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">)</span> <span class="k">return</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">GetASC</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">AbilityInputHeld</span><span class="p">(</span><span class="n">InputTag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">UAuraAbilitySystemComponent</span><span class="o">*</span> <span class="n">AAuraPlayerController</span><span class="o">::</span><span class="n">GetASC</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">AuraAbilitySystemComponent</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">AuraAbilitySystemComponent</span> <span class="o">=</span><span class="n">Cast</span><span class="o">&lt;</span><span class="n">UAuraAbilitySystemComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">UAbilitySystemBlueprintLibrary</span><span class="o">::</span><span class="n">GetAbilitySystemComponent</span><span class="p">(</span><span class="n">GetPawn</span><span class="o">&lt;</span><span class="n">APawn</span><span class="o">&gt;</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">AuraAbilitySystemComponent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="æŠ•å°„ç‰©">æŠ•å°„ç‰©
</h2><p>ä»äººç‰©æ‰‹ä¸Šå‘å°„ä¸€ä¸ªç«çƒï¼Œæ’åˆ°æ•Œäººé€ æˆä¼¤å®³</p>
<p>å‰é¢åœ¨ GameplayAbility è¿™ä¸€ç‰‡æ®µåˆ›å»ºäº†è‡ªå®šä¹‰çš„GAï¼Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UCLASS</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AURA_API</span> <span class="nl">UAuraGameplayAbility</span> <span class="p">:</span> <span class="k">public</span> <span class="n">UGameplayAbility</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;Input&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">FGameplayTag</span> <span class="n">StartupInputTag</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">,</span><span class="n">BlueprintReadOnly</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;Damage&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">FScalableFloat</span> <span class="n">Damage</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GA_Fire.png"
	width="1824"
	height="950"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GA_Fire_hu11026645957612134284.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GA_Fire_hu18264194492272088373.png 1024w"
	loading="lazy"
	
		alt="GA_Fire"
	
	
		class="gallery-image" 
		data-flex-grow="192"
		data-flex-basis="460px"
	
></p>
<p>ä¸€ä¸ªGAï¼Œä¸€ä¸ªç«çƒActor.<br/>GAæ’­æ”¾è§’è‰²å‘å°„ç«çƒçš„åŠ¨ä½œè’™å¤ªå¥‡ï¼Œ<br/>GAç­‰å¾…GameplayEventï¼Œ å½“Eventè§¦å‘æ—¶ æ‰å‘å°„ç«çƒï¼Œ<br/>åŠ¨ç”»è’™å¤ªå¥‡åœ¨æ‰§è¡Œåˆ°æŒ‡å®šå¸§æ—¶ï¼Œé€šè¿‡åŠ¨ç”»é€šçŸ¥è§¦å‘Eventï¼Œè®©GAå‘å°„ç«çƒ<br/>GAåœ¨ç”Ÿæˆç«çƒActoræ—¶ï¼ŒæŠŠGEä¼ ç»™Actorï¼ŒActoræ’åˆ°æ•Œäººï¼Œå¯¹æ•Œäººåº”ç”¨GE é€ æˆä¼¤å®³ï¼Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAuraProjectileSpell</span><span class="o">::</span><span class="n">ActivateAbility</span><span class="p">(</span><span class="k">const</span> <span class="n">FGameplayAbilitySpecHandle</span> <span class="n">Handle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                           <span class="k">const</span> <span class="n">FGameplayAbilityActorInfo</span><span class="o">*</span> <span class="n">ActorInfo</span><span class="p">,</span> <span class="k">const</span> <span class="n">FGameplayAbilityActivationInfo</span> <span class="n">ActivationInfo</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                           <span class="k">const</span> <span class="n">FGameplayEventData</span><span class="o">*</span> <span class="n">TriggerEventData</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">Super</span><span class="o">::</span><span class="n">ActivateAbility</span><span class="p">(</span><span class="n">Handle</span><span class="p">,</span> <span class="n">ActorInfo</span><span class="p">,</span> <span class="n">ActivationInfo</span><span class="p">,</span> <span class="n">TriggerEventData</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAuraProjectileSpell</span><span class="o">::</span><span class="n">SpawnProjectile</span><span class="p">(</span><span class="k">const</span> <span class="n">FVector</span><span class="o">&amp;</span> <span class="n">TargetLocation</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">AActor</span><span class="o">*</span> <span class="n">AvartarActor</span> <span class="o">=</span> <span class="n">GetAvatarActorFromActorInfo</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="kt">bool</span> <span class="n">bIsServer</span> <span class="o">=</span> <span class="n">AvartarActor</span><span class="o">-&gt;</span><span class="n">HasAuthority</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">bIsServer</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">ICombatInterface</span><span class="o">*</span> <span class="n">CombatInterface</span> <span class="o">=</span> <span class="n">Cast</span><span class="o">&lt;</span><span class="n">ICombatInterface</span><span class="o">&gt;</span><span class="p">(</span><span class="n">AvartarActor</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">CombatInterface</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">const</span> <span class="n">FVector</span> <span class="n">SockLocation</span> <span class="o">=</span> <span class="n">CombatInterface</span><span class="o">-&gt;</span><span class="n">GetCombatSocketLocation</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">FRotator</span> <span class="n">Rotation</span> <span class="o">=</span> <span class="p">(</span><span class="n">TargetLocation</span> <span class="o">-</span> <span class="n">SockLocation</span><span class="p">).</span><span class="n">Rotation</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">Rotation</span><span class="p">.</span><span class="n">Pitch</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		<span class="n">AActor</span><span class="o">*</span> <span class="n">OwningActor</span> <span class="o">=</span> <span class="n">GetOwningActorFromActorInfo</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">FTransform</span> <span class="n">SpawnTransform</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">SpawnTransform</span><span class="p">.</span><span class="n">SetLocation</span><span class="p">(</span><span class="n">SockLocation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">SpawnTransform</span><span class="p">.</span><span class="n">SetRotation</span><span class="p">(</span><span class="n">Rotation</span><span class="p">.</span><span class="n">Quaternion</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">		<span class="n">AAuraProjectile</span><span class="o">*</span> <span class="n">Projectile</span> <span class="o">=</span> <span class="n">GetWorld</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">SpawnActorDeferred</span><span class="o">&lt;</span><span class="n">AAuraProjectile</span><span class="o">&gt;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">			<span class="n">ProjectileClass</span><span class="p">,</span> <span class="n">SpawnTransform</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="n">OwningActor</span><span class="p">,</span> <span class="n">Cast</span><span class="o">&lt;</span><span class="n">APawn</span><span class="o">&gt;</span><span class="p">(</span><span class="n">OwningActor</span><span class="p">),</span> <span class="n">ESpawnActorCollisionHandlingMethod</span><span class="o">::</span><span class="n">AlwaysSpawn</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="n">UAbilitySystemComponent</span><span class="o">*</span> <span class="n">SourceASC</span> <span class="o">=</span> <span class="n">UAbilitySystemBlueprintLibrary</span><span class="o">::</span><span class="n">GetAbilitySystemComponent</span><span class="p">(</span><span class="n">GetAvatarActorFromActorInfo</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">		<span class="n">FGameplayEffectContextHandle</span> <span class="n">Context</span> <span class="o">=</span> <span class="n">SourceASC</span><span class="o">-&gt;</span><span class="n">MakeEffectContext</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">FGameplayEffectSpecHandle</span> <span class="n">SpeceHandle</span> <span class="o">=</span> <span class="n">SourceASC</span><span class="o">-&gt;</span><span class="n">MakeOutgoingSpec</span><span class="p">(</span><span class="n">DamageEffectClass</span><span class="p">,</span> <span class="n">GetAbilityLevel</span><span class="p">(),</span> <span class="n">Context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="n">FAuraGameplayTags</span> <span class="n">GameplayTags</span> <span class="o">=</span> <span class="n">FAuraGameplayTags</span><span class="o">::</span><span class="n">Get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		<span class="k">const</span> <span class="kt">float</span> <span class="n">ScaledDamage</span> <span class="o">=</span> <span class="n">Damage</span><span class="p">.</span><span class="n">GetValueAtLevel</span><span class="p">(</span><span class="n">GetAbilityLevel</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">		<span class="n">UAbilitySystemBlueprintLibrary</span><span class="o">::</span><span class="n">AssignTagSetByCallerMagnitude</span><span class="p">(</span><span class="n">SpeceHandle</span><span class="p">,</span><span class="n">GameplayTags</span><span class="p">.</span><span class="n">Damage</span><span class="p">,</span><span class="n">ScaledDamage</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">Projectile</span><span class="o">-&gt;</span><span class="n">DamaeEffectSpecHandle</span> <span class="o">=</span> <span class="n">SpeceHandle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		<span class="n">Projectile</span><span class="o">-&gt;</span><span class="n">FinishSpawning</span><span class="p">(</span><span class="n">SpawnTransform</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="link" href="https://github.com/BillEliot/GASDocumentation_Chinese?tab=readme-ov-file#4591-setbycaller"  target="_blank" rel="noopener"
    >SetByCaller - AssignTagSetByCallerMagnitude</a></p>
<p>SetByCallerï¼Œåœ¨GAé‡Œè®¾ç½®ä¼¤å®³ï¼ŒGEé‡Œé…ç½®Tagï¼ŒGAé€šè¿‡TagæŠŠæ•°å€¼ä¼ ç»™GE.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UCLASS</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AURA_API</span> <span class="nl">UAuraGameplayAbility</span> <span class="p">:</span> <span class="k">public</span> <span class="n">UGameplayAbility</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;Input&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">FGameplayTag</span> <span class="n">StartupInputTag</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditDefaultsOnly</span><span class="p">,</span><span class="n">BlueprintReadOnly</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;Damage&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">FScalableFloat</span> <span class="n">Damage</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GA.png"
	width="526"
	height="352"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GA_hu5820679436953999280.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GA_hu3206863623386699757.png 1024w"
	loading="lazy"
	
		alt="GA"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="358px"
	
></p>
<p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GE.png"
	width="1308"
	height="823"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GE_hu12171750147926769494.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GE_hu18379896672282579502.png 1024w"
	loading="lazy"
	
		alt="GE"
	
	
		class="gallery-image" 
		data-flex-grow="158"
		data-flex-basis="381px"
	
></p>
<p>GAèƒ½è·å¾—AvatarActorï¼Œè¿™å°±æ˜¯è§’è‰²ï¼Œä½†ä¸ç›´æ¥Caståˆ°ç©å®¶è§’è‰²ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªæ¥å£å»åšï¼Œæ²¡æœ‰ç¡¬ç»‘å®šä¸ºæŸä¸ªå…·ä½“è§’è‰²ç±».<br/>æ¥å£çš„GetCombatSocketLocationå‡½æ•°ï¼Œåªæ˜¯ä¸€ä¸ªè·å–éª¨éª¼æ’æ§½ä½ç½®çš„ï¼Œè¿”å›ä¸€ä¸ªVector. <br/>æœ‰èµ·å§‹ä½ç½®å’Œç›®æ ‡ä½ç½® å°±èƒ½è®¾ç½®ç«çƒActorçš„æœå‘ï¼Œè®©ç«çƒå¯¹å‡†è¿‡å».</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAuraProjectileSpell</span><span class="o">::</span><span class="n">SpawnProjectile</span><span class="p">(</span><span class="k">const</span> <span class="n">FVector</span><span class="o">&amp;</span> <span class="n">TargetLocation</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>TargetLocationæ˜¯åœ¨è“å›¾é‡Œè®¾ç½®çš„</p>
<hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">FVector</span> <span class="n">AAuraCharacterBase</span><span class="o">::</span><span class="n">GetCombatSocketLocation</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">check</span><span class="p">(</span><span class="n">Weapon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">Weapon</span><span class="o">-&gt;</span><span class="n">GetSocketLocation</span><span class="p">(</span><span class="n">WeaponTipSocketName</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>AuraProjectile.h</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UCLASS</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AURA_API</span> <span class="nl">AAuraProjectile</span> <span class="p">:</span> <span class="k">public</span> <span class="n">AActor</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>	
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">AAuraProjectile</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">VisibleAnywhere</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">TObjectPtr</span><span class="o">&lt;</span><span class="n">UProjectileMovementComponent</span><span class="o">&gt;</span> <span class="n">ProjectileMovement</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">BlueprintReadWrite</span><span class="p">,</span><span class="n">meta</span> <span class="o">=</span> <span class="p">(</span><span class="n">ExposeOnSpawn</span> <span class="o">=</span> <span class="nb">true</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="n">FGameplayEffectSpecHandle</span> <span class="n">DamaeEffectSpecHandle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">void</span> <span class="n">BeginPlay</span><span class="p">()</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UFUNCTION</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="n">OnSphereOverlap</span><span class="p">(</span> <span class="n">UPrimitiveComponent</span><span class="o">*</span> <span class="n">OverlappedComponent</span><span class="p">,</span> <span class="n">AActor</span><span class="o">*</span> <span class="n">OtherActor</span><span class="p">,</span> <span class="n">UPrimitiveComponent</span><span class="o">*</span> <span class="n">OtherComp</span><span class="p">,</span> <span class="n">int32</span> <span class="n">OtherBodyIndex</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bFromSweep</span><span class="p">,</span> <span class="k">const</span> <span class="n">FHitResult</span> <span class="o">&amp;</span> <span class="n">SweepResult</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="kt">float</span> <span class="n">LifeSpan</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">VisibleAnywhere</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">TObjectPtr</span><span class="o">&lt;</span><span class="n">USphereComponent</span><span class="o">&gt;</span> <span class="n">Sphere</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">TObjectPtr</span><span class="o">&lt;</span><span class="n">UNiagaraSystem</span><span class="o">&gt;</span> <span class="n">ImpactEffect</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">TObjectPtr</span><span class="o">&lt;</span><span class="n">USoundBase</span><span class="o">&gt;</span> <span class="n">ImpactSound</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">TObjectPtr</span><span class="o">&lt;</span><span class="n">USoundBase</span><span class="o">&gt;</span> <span class="n">LoopingSound</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">EditAnywhere</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">TObjectPtr</span><span class="o">&lt;</span><span class="n">UAudioComponent</span><span class="o">&gt;</span> <span class="n">LoopingSoundComponent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>AuraProjectile.cpp</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">AAuraProjectile</span><span class="o">::</span><span class="n">AAuraProjectile</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">PrimaryActorTick</span><span class="p">.</span><span class="n">bCanEverTick</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">bReplicates</span> <span class="o">=</span><span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">Sphere</span> <span class="o">=</span> <span class="n">CreateDefaultSubobject</span><span class="o">&lt;</span><span class="n">USphereComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;Sphere&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">SetRootComponent</span><span class="p">(</span><span class="n">Sphere</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">Sphere</span><span class="o">-&gt;</span><span class="n">SetCollisionObjectType</span><span class="p">(</span><span class="n">ECC_Projectile</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">Sphere</span><span class="o">-&gt;</span><span class="n">SetCollisionEnabled</span><span class="p">(</span><span class="n">ECollisionEnabled</span><span class="o">::</span><span class="n">QueryOnly</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">Sphere</span><span class="o">-&gt;</span><span class="n">SetCollisionResponseToAllChannels</span><span class="p">(</span><span class="n">ECR_Ignore</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">Sphere</span><span class="o">-&gt;</span><span class="n">SetCollisionResponseToChannel</span><span class="p">(</span><span class="n">ECC_WorldDynamic</span><span class="p">,</span><span class="n">ECR_Overlap</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">Sphere</span><span class="o">-&gt;</span><span class="n">SetCollisionResponseToChannel</span><span class="p">(</span><span class="n">ECC_WorldStatic</span><span class="p">,</span><span class="n">ECR_Overlap</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">Sphere</span><span class="o">-&gt;</span><span class="n">SetCollisionResponseToChannel</span><span class="p">(</span><span class="n">ECC_Pawn</span><span class="p">,</span><span class="n">ECR_Overlap</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">ProjectileMovement</span> <span class="o">=</span> <span class="n">CreateDefaultSubobject</span><span class="o">&lt;</span><span class="n">UProjectileMovementComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;ProjectileMovement&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">ProjectileMovement</span><span class="o">-&gt;</span><span class="n">InitialSpeed</span> <span class="o">=</span> <span class="mi">550</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">ProjectileMovement</span><span class="o">-&gt;</span><span class="n">MaxSpeed</span> <span class="o">=</span> <span class="mi">550</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">ProjectileMovement</span><span class="o">-&gt;</span><span class="n">ProjectileGravityScale</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraProjectile</span><span class="o">::</span><span class="n">BeginPlay</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">Super</span><span class="o">::</span><span class="n">BeginPlay</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">SetLifeSpan</span><span class="p">(</span><span class="n">LifeSpan</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">Sphere</span><span class="o">-&gt;</span><span class="n">OnComponentBeginOverlap</span><span class="p">.</span><span class="n">AddDynamic</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">OnSphereOverlap</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">LoopingSoundComponent</span> <span class="o">=</span> <span class="n">UGameplayStatics</span><span class="o">::</span><span class="n">SpawnSoundAttached</span><span class="p">(</span><span class="n">LoopingSound</span><span class="p">,</span><span class="n">GetRootComponent</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AAuraProjectile</span><span class="o">::</span><span class="n">OnSphereOverlap</span><span class="p">(</span><span class="n">UPrimitiveComponent</span><span class="o">*</span> <span class="n">OverlappedComponent</span><span class="p">,</span> <span class="n">AActor</span><span class="o">*</span> <span class="n">OtherActor</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="n">UPrimitiveComponent</span><span class="o">*</span> <span class="n">OtherComp</span><span class="p">,</span> <span class="n">int32</span> <span class="n">OtherBodyIndex</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bFromSweep</span><span class="p">,</span> <span class="k">const</span> <span class="n">FHitResult</span><span class="o">&amp;</span> <span class="n">SweepResult</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">UGameplayStatics</span><span class="o">::</span><span class="n">PlaySoundAtLocation</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="n">ImpactSound</span><span class="p">,</span><span class="n">GetActorLocation</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">	<span class="n">UNiagaraFunctionLibrary</span><span class="o">::</span><span class="n">SpawnSystemAtLocation</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="n">ImpactEffect</span><span class="p">,</span><span class="n">GetActorLocation</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">	<span class="n">LoopingSoundComponent</span><span class="o">-&gt;</span><span class="n">Stop</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">UAbilitySystemComponent</span><span class="o">*</span> <span class="n">TargetASC</span> <span class="o">=</span> <span class="n">UAbilitySystemBlueprintLibrary</span><span class="o">::</span><span class="n">GetAbilitySystemComponent</span><span class="p">(</span><span class="n">OtherActor</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">TargetASC</span><span class="o">-&gt;</span><span class="n">ApplyGameplayEffectSpecToSelf</span><span class="p">(</span><span class="o">*</span><span class="n">DamaeEffectSpecHandle</span><span class="p">.</span><span class="n">Data</span><span class="p">.</span><span class="n">Get</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">Destroy</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="abilitytask">AbilityTask
</h3><p>æŠ€èƒ½ä»»åŠ¡ï¼ˆC++ç±»&quot;UAbilityTask&quot;ï¼‰æ˜¯æ›´å¸¸è§„çš„æŠ€èƒ½ä»»åŠ¡ç±»çš„ç‰¹æ®Šå½¢å¼ï¼Œæ—¨åœ¨ä½¿ç”¨æ¸¸æˆæ€§æŠ€èƒ½ã€‚<br/>ä½¿ç”¨æ¸¸æˆæ€§æŠ€èƒ½ç³»ç»Ÿçš„æ¸¸æˆé€šå¸¸åŒ…æ‹¬å„ç§è‡ªå®šä¹‰æŠ€èƒ½ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡å®æ–½å…¶ç‹¬ç‰¹çš„æ¸¸æˆåŠŸèƒ½ã€‚<br/>å®ƒä»¬åœ¨æ¸¸æˆæ€§æŠ€èƒ½æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰§è¡Œå¼‚æ­¥å·¥ä½œï¼Œå¹¶ä¸”èƒ½å¤Ÿé€šè¿‡è°ƒç”¨<a class="link" href="https://dev.epicgames.com/documentation/zh-cn/unreal-engine/delegates-and-lamba-functions-in-unreal-engine"  target="_blank" rel="noopener"
    >å§”æ‰˜ï¼ˆDelegateï¼‰</a> ï¼ˆåœ¨æœ¬åœ°C++ä»£ç ä¸­ï¼‰æˆ–ç§»ç»ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºæ‰§è¡Œå¼•è„šï¼ˆåœ¨è“å›¾ä¸­ï¼‰æ¥å½±å“æ‰§è¡Œæµã€‚<br/>è¿™ä½¿æŠ€èƒ½èƒ½å¤Ÿè·¨å¤šä¸ªå¸§æ‰§è¡Œï¼Œå¹¶å¯åœ¨åŒä¸€å¸§å†…æ‰§è¡Œå¤šä¸ªä¸åŒçš„å‡½æ•°ã€‚<br/>å¤§éƒ¨åˆ†æŠ€èƒ½ä»»åŠ¡éƒ½æœ‰ä¸€ä¸ªå³æ—¶è§¦å‘çš„æ‰§è¡Œå¼•è„šï¼Œä½¿è“å›¾èƒ½å¤Ÿåœ¨ä»»åŠ¡å¼€å§‹åç»§ç»­æ‰§è¡Œã€‚<br/>æ­¤å¤–ï¼Œé€šå¸¸è¿˜æœ‰ä¸€äº›ç‰¹å®šäºä»»åŠ¡çš„å¼•è„šï¼Œå®ƒä»¬ä¼šåœ¨å»¶è¿Ÿåæˆ–åœ¨å¯èƒ½å‘ç”Ÿæˆ–ä¸å‘ç”Ÿçš„æŸä¸ªäº‹ä»¶ä¹‹åè§¦å‘ã€‚<br/></p>
<p>æŠ€èƒ½ä»»åŠ¡å¯ä»¥é€šè¿‡è°ƒç”¨&quot;EndTask&quot;å‡½æ•°è‡ªè¡Œç»ˆæ­¢ï¼Œæˆ–è€…ç­‰å¾…è¿è¡Œå®ƒçš„æ¸¸æˆæ€§æŠ€èƒ½ç»“æŸï¼Œæ­¤æ—¶å®ƒä¼šè‡ªåŠ¨ç»ˆæ­¢ã€‚<br/>è¿™å¯ä»¥é˜²æ­¢å¹»å½±æŠ€èƒ½ä»»åŠ¡è¿è¡Œï¼Œæœ‰æ•ˆåœ°æ³„æ¼CPUå‘¨æœŸå’Œå†…å­˜ã€‚<br/>ä¾‹å¦‚ï¼ŒæŸä¸ªæŠ€èƒ½ä»»åŠ¡å¯èƒ½æ’­æ”¾ä¸€ä¸ªæ–½æ³•åŠ¨ç”»ï¼Œè€Œå¦ä¸€ä¸ªä»»åŠ¡åˆ™åœ¨ç©å®¶çš„ç„å‡†ç‚¹å¤„æ”¾ç½®ä¸€ä¸ªé¶å‘æ ‡çº¿ã€‚<br/>å¦‚æœç©å®¶ç‚¹å‡»ç¡®è®¤è¾“å…¥æ¥æ–½æ”¾è¯¥æ³•æœ¯ï¼Œæˆ–è€…ç­‰å¾…åŠ¨ç”»ç»“æŸè€Œæœªç¡®è®¤è¯¥æ³•æœ¯ï¼Œæ¸¸æˆæ€§æŠ€èƒ½å°±ä¼šç»“æŸã€‚<br/>è™½ç„¶å®ƒä»¬å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è‡ªåŠ¨ç»ˆæ­¢ï¼Œä½†æ˜¯æŠ€èƒ½ä»»åŠ¡ä¿è¯æœ€æ™šåœ¨ä¸»è¦æŠ€èƒ½ç»“æŸæ—¶ç»ˆæ­¢ã€‚</p>
<p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/AbilityTask.png"
	width="766"
	height="233"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/AbilityTask_hu14322655802466144313.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/AbilityTask_hu14310963020753680615.png 1024w"
	loading="lazy"
	
		alt="AbilityTask"
	
	
		class="gallery-image" 
		data-flex-grow="328"
		data-flex-basis="789px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam</span><span class="p">(</span><span class="n">FMouseTargetDataSignature</span><span class="p">,</span><span class="k">const</span> <span class="n">FVector</span><span class="o">&amp;</span><span class="p">,</span><span class="n">Data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">UCLASS</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AURA_API</span> <span class="nl">UTargetDataUnderMouse</span> <span class="p">:</span> <span class="k">public</span> <span class="n">UAbilityTask</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GENERATED_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UFUNCTION</span><span class="p">(</span><span class="n">BlueprintCallable</span><span class="p">,</span><span class="n">Category</span><span class="o">=</span><span class="s">&#34;Ability|Tasks&#34;</span><span class="p">,</span><span class="n">meta</span> <span class="o">=</span> <span class="p">(</span><span class="n">DisplayName</span> <span class="o">=</span> <span class="s">&#34;TargetDataUnderMouse&#34;</span><span class="p">,</span><span class="n">HidePin</span><span class="o">=</span><span class="s">&#34;OwningAbility&#34;</span><span class="p">,</span><span class="n">DefaultToSelf</span> <span class="o">=</span> <span class="s">&#34;OwningAbility&#34;</span><span class="p">,</span><span class="n">BlueprintInternalUseOnly</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="k">static</span> <span class="n">UTargetDataUnderMouse</span><span class="o">*</span> <span class="n">CreateTargetDataUnderMouse</span><span class="p">(</span><span class="n">UGameplayAbility</span><span class="o">*</span> <span class="n">OwningAbility</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">UPROPERTY</span><span class="p">(</span><span class="n">BlueprintAssignable</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">FMouseTargetDataSignature</span> <span class="n">ValidData</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">void</span> <span class="n">Activate</span><span class="p">()</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UTargetDataUnderMouse</span><span class="o">*</span> <span class="n">UTargetDataUnderMouse</span><span class="o">::</span><span class="n">CreateTargetDataUnderMouse</span><span class="p">(</span><span class="n">UGameplayAbility</span><span class="o">*</span> <span class="n">OwningAbility</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">UTargetDataUnderMouse</span><span class="o">*</span> <span class="n">Myobj</span> <span class="o">=</span> <span class="n">NewAbilityTask</span><span class="o">&lt;</span><span class="n">UTargetDataUnderMouse</span><span class="o">&gt;</span><span class="p">(</span><span class="n">OwningAbility</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">Myobj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UTargetDataUnderMouse</span><span class="o">::</span><span class="n">Activate</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">APlayerController</span><span class="o">*</span> <span class="n">PC</span> <span class="o">=</span> <span class="n">Ability</span><span class="o">-&gt;</span><span class="n">GetCurrentActorInfo</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">PlayerController</span><span class="p">.</span><span class="n">Get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">FHitResult</span> <span class="n">HitResult</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">PC</span><span class="o">-&gt;</span><span class="n">GetHitResultUnderCursor</span><span class="p">(</span><span class="n">ECC_Visibility</span><span class="p">,</span><span class="nb">false</span><span class="p">,</span><span class="n">HitResult</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">ValidData</span><span class="p">.</span><span class="n">Broadcast</span><span class="p">(</span><span class="n">HitResult</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è“å›¾è°ƒç”¨UTargetDataUnderMouseçš„staticå‡½æ•° åˆ›å»ºUTargetDataUnderMouseï¼Œåˆ›å»ºä¹‹åè°ƒç”¨Activateå‡½æ•°.</p>
<hr>
<p><a class="link" href="https://github.com/fjz13/UnrealSpecifiers/blob/main/Doc/zh/Specifier/UPROPERTY/Blueprint/BlueprintAssignable/BlueprintAssignable.md"  target="_blank" rel="noopener"
    >BlueprintAssignable</a></p>
<p>å†™åœ¨AbilityTask.hé‡Œçš„è¯´æ˜:  ç‚¹å‡»æŸ¥çœ‹å¤§å›¾<br/><a class="link" href="https://github.com/EpicGames/UnrealEngine/tree/release"  target="_blank" rel="noopener"
    >UnrealEngine</a>/<a class="link" href="https://github.com/EpicGames/UnrealEngine/tree/release/Engine"  target="_blank" rel="noopener"
    >Engine</a>/<a class="link" href="https://github.com/EpicGames/UnrealEngine/tree/release/Engine/Plugins"  target="_blank" rel="noopener"
    >Plugins</a>/<a class="link" href="https://github.com/EpicGames/UnrealEngine/tree/release/Engine/Plugins/Runtime"  target="_blank" rel="noopener"
    >Runtime</a>/<a class="link" href="https://github.com/EpicGames/UnrealEngine/tree/release/Engine/Plugins/Runtime/GameplayAbilities"  target="_blank" rel="noopener"
    >GameplayAbilities</a>/<a class="link" href="https://github.com/EpicGames/UnrealEngine/tree/release/Engine/Plugins/Runtime/GameplayAbilities/Source"  target="_blank" rel="noopener"
    >Source</a>/<a class="link" href="https://github.com/EpicGames/UnrealEngine/tree/release/Engine/Plugins/Runtime/GameplayAbilities/Source/GameplayAbilities"  target="_blank" rel="noopener"
    >GameplayAbilities</a>/<a class="link" href="https://github.com/EpicGames/UnrealEngine/tree/release/Engine/Plugins/Runtime/GameplayAbilities/Source/GameplayAbilities/Public"  target="_blank" rel="noopener"
    >Public</a>/<a class="link" href="https://github.com/EpicGames/UnrealEngine/tree/release/Engine/Plugins/Runtime/GameplayAbilities/Source/GameplayAbilities/Public/Abilities"  target="_blank" rel="noopener"
    >Abilities</a>/<a class="link" href="https://github.com/EpicGames/UnrealEngine/tree/release/Engine/Plugins/Runtime/GameplayAbilities/Source/GameplayAbilities/Public/Abilities/Tasks"  target="_blank" rel="noopener"
    >Tasks</a></p>
<p><a class="link" href="https://github.com/EpicGames/UnrealEngine/blob/release/Engine/Plugins/Runtime/GameplayAbilities/Source/GameplayAbilities/Public/Abilities/Tasks/AbilityTask.h"  target="_blank" rel="noopener"
    >Githubä¸Šçš„AbilityTask.h</a></p>
<p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/AbilityTaskEx.png"
	width="1286"
	height="2342"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/AbilityTaskEx_hu10650309447566870172.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/AbilityTaskEx_hu7176852100845023961.png 1024w"
	loading="lazy"
	
		alt="AbilityTaskEx"
	
	
		class="gallery-image" 
		data-flex-grow="54"
		data-flex-basis="131px"
	
></p>
<hr>
<h3 id="gameplayevent">GameplayEvent
</h3><p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GameplayEvent1.png"
	width="1919"
	height="895"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GameplayEvent1_hu651306520914817001.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GameplayEvent1_hu1538136898385810110.png 1024w"
	loading="lazy"
	
		alt="GameplayEvent"
	
	
		class="gallery-image" 
		data-flex-grow="214"
		data-flex-basis="514px"
	
></p>
<p><img src="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GameplayEvent2.png"
	width="1173"
	height="635"
	srcset="/p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GameplayEvent2_hu1325517829148272829.png 480w, /p/gas-a-gega%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A/GameplayEvent2_hu2439690840426415043.png 1024w"
	loading="lazy"
	
		alt="GameplayEvent2"
	
	
		class="gallery-image" 
		data-flex-grow="184"
		data-flex-basis="443px"
	
></p>
<ul>
<li>ç­‰å¾…æŒ‡å®šçš„æ¸¸æˆæ ‡è®°äº‹ä»¶è§¦å‘ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°†æŸ¥çœ‹æ­¤åŠŸèƒ½çš„æ‰€æœ‰è€…ã€‚å¯ä»¥è®¾ç½® OptionalExternalTarget ä»¥ä½¿å…¶æŸ¥çœ‹å¦ä¸€ä¸ªå‚ä¸è€…çš„æ ‡è®°ä»¥è¿›è¡Œæ›´æ”¹</li>
<li>åªè¦ OnlyTriggerOnce = falseï¼Œå®ƒå°±ä¼šç»§ç»­ç›‘å¬</li>
<li>å¦‚æœ OnlyMatchExact = falseï¼Œå®ƒå°†è§¦å‘åµŒå¥—æ ‡è®°</li>
</ul>
<hr>
<p>WaitGameplayEventä¸ASCæœ‰å…³. æˆ–è®¸ ASCå°±æ˜¯è¿æ¥Sendå’ŒWaitä¹‹é—´çš„æ¡¥æ¢. æ‰€ä»¥åœ¨åŠ¨ç”»é€šçŸ¥é‡Œè¦GetOwnerActor ç»™Ownerå‘Event.</p>
<p>SendGameplayEventToActor</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAbilitySystemBlueprintLibrary</span><span class="o">::</span><span class="n">SendGameplayEventToActor</span><span class="p">(</span><span class="n">AActor</span><span class="o">*</span> <span class="n">Actor</span><span class="p">,</span> <span class="n">FGameplayTag</span> <span class="n">EventTag</span><span class="p">,</span> <span class="n">FGameplayEventData</span> <span class="n">Payload</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="o">::</span><span class="n">IsValid</span><span class="p">(</span><span class="n">Actor</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">UAbilitySystemComponent</span><span class="o">*</span> <span class="n">AbilitySystemComponent</span> <span class="o">=</span> <span class="n">GetAbilitySystemComponent</span><span class="p">(</span><span class="n">Actor</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">AbilitySystemComponent</span> <span class="o">!=</span> <span class="k">nullptr</span> <span class="o">&amp;&amp;</span> <span class="n">IsValidChecked</span><span class="p">(</span><span class="n">AbilitySystemComponent</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">using</span> <span class="k">namespace</span> <span class="n">UE</span><span class="o">::</span><span class="n">AbilitySystem</span><span class="o">::</span><span class="n">Private</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">(</span><span class="n">EnumHasAnyFlags</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">EAllowPredictiveGEFlags</span><span class="o">&gt;</span><span class="p">(</span><span class="n">CVarAllowPredictiveGEFlagsValue</span><span class="p">),</span> <span class="n">EAllowPredictiveGEFlags</span><span class="o">::</span><span class="n">AllowGameplayEventToApplyGE</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="n">FScopedPredictionWindow</span> <span class="nf">NewScopedWindow</span><span class="p">(</span><span class="n">AbilitySystemComponent</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">				<span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">HandleGameplayEvent</span><span class="p">(</span><span class="n">EventTag</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Payload</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">HandleGameplayEvent</span><span class="p">(</span><span class="n">EventTag</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Payload</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">else</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">ABILITY_LOG</span><span class="p">(</span><span class="n">Error</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;UAbilitySystemBlueprintLibrary::SendGameplayEventToActor: Invalid ability system component retrieved from Actor %s. EventTag was %s&#34;</span><span class="p">),</span> <span class="o">*</span><span class="n">Actor</span><span class="o">-&gt;</span><span class="n">GetName</span><span class="p">(),</span> <span class="o">*</span><span class="n">EventTag</span><span class="p">.</span><span class="n">ToString</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨HandleGameplayEventé‡Œé¢ å¼•ç”¨åˆ°ä¸€ä¸ªAbilitySystemComponenté‡Œé¢çš„å˜é‡ GenericGameplayEventCallbacks</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">int32</span> <span class="n">UAbilitySystemComponent</span><span class="o">::</span><span class="n">HandleGameplayEvent</span><span class="p">(</span><span class="n">FGameplayTag</span> <span class="n">EventTag</span><span class="p">,</span> <span class="k">const</span> <span class="n">FGameplayEventData</span><span class="o">*</span> <span class="n">Payload</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">int32</span> <span class="n">TriggeredCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">FGameplayTag</span> <span class="n">CurrentTag</span> <span class="o">=</span> <span class="n">EventTag</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">ABILITYLIST_SCOPE_LOCK</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">   <span class="c1">// çœç•¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">FGameplayEventMulticastDelegate</span><span class="o">*</span> <span class="n">Delegate</span> <span class="o">=</span> <span class="n">GenericGameplayEventCallbacks</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="n">EventTag</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="c1">// Make a copy before broadcasting to prevent memory stomping
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="n">FGameplayEventMulticastDelegate</span> <span class="n">DelegateCopy</span> <span class="o">=</span> <span class="o">*</span><span class="n">Delegate</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">DelegateCopy</span><span class="p">.</span><span class="n">Broadcast</span><span class="p">(</span><span class="n">Payload</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="c1">// çœç•¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">TriggeredCount</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>AbilityTask_WaitGameplayEvent</p>
<p>è¿™é‡Œé¢å°±ç”¨åˆ°äº†ä¸Šé¢æåˆ°çš„å˜é‡ GenericGameplayEventCallbacks</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAbilityTask_WaitGameplayEvent</span><span class="o">::</span><span class="n">Activate</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">UAbilitySystemComponent</span><span class="o">*</span> <span class="n">ASC</span> <span class="o">=</span> <span class="n">GetTargetASC</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">ASC</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">OnlyMatchExact</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">MyHandle</span> <span class="o">=</span> <span class="n">ASC</span><span class="o">-&gt;</span><span class="n">GenericGameplayEventCallbacks</span><span class="p">.</span><span class="n">FindOrAdd</span><span class="p">(</span><span class="n">Tag</span><span class="p">).</span><span class="n">AddUObject</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">UAbilityTask_WaitGameplayEvent</span><span class="o">::</span><span class="n">GameplayEventCallback</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">else</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">MyHandle</span> <span class="o">=</span> <span class="n">ASC</span><span class="o">-&gt;</span><span class="n">AddGameplayEventTagContainerDelegate</span><span class="p">(</span><span class="n">FGameplayTagContainer</span><span class="p">(</span><span class="n">Tag</span><span class="p">),</span> <span class="n">FGameplayEventTagMulticastDelegate</span><span class="o">::</span><span class="n">FDelegate</span><span class="o">::</span><span class="n">CreateUObject</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">UAbilityTask_WaitGameplayEvent</span><span class="o">::</span><span class="n">GameplayEventContainerCallback</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>	
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">Super</span><span class="o">::</span><span class="n">Activate</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UAbilityTask_WaitGameplayEvent</span><span class="o">::</span><span class="n">OnDestroy</span><span class="p">(</span><span class="kt">bool</span> <span class="n">AbilityEnding</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">UAbilitySystemComponent</span><span class="o">*</span> <span class="n">ASC</span> <span class="o">=</span> <span class="n">GetTargetASC</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">ASC</span> <span class="o">&amp;&amp;</span> <span class="n">MyHandle</span><span class="p">.</span><span class="n">IsValid</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">OnlyMatchExact</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">ASC</span><span class="o">-&gt;</span><span class="n">GenericGameplayEventCallbacks</span><span class="p">.</span><span class="n">FindOrAdd</span><span class="p">(</span><span class="n">Tag</span><span class="p">).</span><span class="n">Remove</span><span class="p">(</span><span class="n">MyHandle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">else</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">ASC</span><span class="o">-&gt;</span><span class="n">RemoveGameplayEventTagContainerDelegate</span><span class="p">(</span><span class="n">FGameplayTagContainer</span><span class="p">(</span><span class="n">Tag</span><span class="p">),</span> <span class="n">MyHandle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">Super</span><span class="o">::</span><span class="n">OnDestroy</span><span class="p">(</span><span class="n">AbilityEnding</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¤§èƒ†çŒœæƒ³ï¼ŒGamepalyEventå°±æ˜¯ASCè¿ä½œçš„<br/>WaitGameplayEvent æŠŠè¦ç›‘å¬çš„GameplayTagå‘ç»™ASCï¼Œ<br/>å½“SendGameplayEventç»™ASCå‘é€Tagæ—¶ï¼Œå¦‚æœç›‘å¬çš„å’Œæ¥æ”¶åˆ°çš„Tagä¸€æ ·ï¼ŒASCå°±ä¼šæ¿€æ´»è§¦å‘GameplayTagEventï¼Œ</p>
<hr>
<h2 id="ä½¿ç”¨æ•°æ®è¡¨åˆå§‹åŒ–æ•Œäººå±æ€§">ä½¿ç”¨æ•°æ®è¡¨åˆå§‹åŒ–æ•Œäººå±æ€§
</h2><p><a class="link" href="https://blog.csdn.net/qq_30100043/article/details/138304533"  target="_blank" rel="noopener"
    >ä¸æƒ³å†™äº†ï¼Œçœ‹åˆ«äººå†™çš„å§</a></p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            å›½çª–1573 - 
        
        2025 AKaKLya
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
