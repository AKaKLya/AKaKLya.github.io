<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="ÈúÄË¶Å‰ºö‰∏Ä‰∫õÊ®°Êùø. Á±ªÂûãÂà´Âêç Ê®°ÊùøÁ±ªÁâáÊÆµ: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 template&lt;typename InElementType, typename InAllocatorType&gt; class TArray { template &lt;typename OtherInElementType, typename OtherAllocator&gt; friend class TArray; public: using SizeType = typename InAllocatorType::SizeType ; using ElementType = InElementType; using AllocatorType = InAllocatorType; private: using USizeType = typename std::make_unsigned_t&lt;SizeType&gt;; public: using ElementAllocatorType = std::conditional_t&lt; AllocatorType::NeedsElementType, typename AllocatorType::template ForElementType&lt;ElementType&gt;, typename AllocatorType::ForAnyElementType &gt;; static_assert(std::is_signed_v&lt;SizeType&gt;, &#34;TArray only supports signed index types&#34;); } ‰ΩøÁî®TArrayÂ≠òÊîæActorÊó∂ÔºåÈªòËÆ§ÁöÑÂà´ÂêçÁ±ªÂûã:">
<title>TArray</title>

<link rel='canonical' href='http://localhost:1313/p/tarray/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="TArray">
<meta property='og:description' content="ÈúÄË¶Å‰ºö‰∏Ä‰∫õÊ®°Êùø. Á±ªÂûãÂà´Âêç Ê®°ÊùøÁ±ªÁâáÊÆµ: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 template&lt;typename InElementType, typename InAllocatorType&gt; class TArray { template &lt;typename OtherInElementType, typename OtherAllocator&gt; friend class TArray; public: using SizeType = typename InAllocatorType::SizeType ; using ElementType = InElementType; using AllocatorType = InAllocatorType; private: using USizeType = typename std::make_unsigned_t&lt;SizeType&gt;; public: using ElementAllocatorType = std::conditional_t&lt; AllocatorType::NeedsElementType, typename AllocatorType::template ForElementType&lt;ElementType&gt;, typename AllocatorType::ForAnyElementType &gt;; static_assert(std::is_signed_v&lt;SizeType&gt;, &#34;TArray only supports signed index types&#34;); } ‰ΩøÁî®TArrayÂ≠òÊîæActorÊó∂ÔºåÈªòËÆ§ÁöÑÂà´ÂêçÁ±ªÂûã:">
<meta property='og:url' content='http://localhost:1313/p/tarray/'>
<meta property='og:site_name' content='AKaKLya'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2000-01-21T23:31:36&#43;08:00'/><meta property='article:modified_time' content='2000-01-21T23:31:36&#43;08:00'/>
<meta name="twitter:title" content="TArray">
<meta name="twitter:description" content="ÈúÄË¶Å‰ºö‰∏Ä‰∫õÊ®°Êùø. Á±ªÂûãÂà´Âêç Ê®°ÊùøÁ±ªÁâáÊÆµ: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 template&lt;typename InElementType, typename InAllocatorType&gt; class TArray { template &lt;typename OtherInElementType, typename OtherAllocator&gt; friend class TArray; public: using SizeType = typename InAllocatorType::SizeType ; using ElementType = InElementType; using AllocatorType = InAllocatorType; private: using USizeType = typename std::make_unsigned_t&lt;SizeType&gt;; public: using ElementAllocatorType = std::conditional_t&lt; AllocatorType::NeedsElementType, typename AllocatorType::template ForElementType&lt;ElementType&gt;, typename AllocatorType::ForAnyElementType &gt;; static_assert(std::is_signed_v&lt;SizeType&gt;, &#34;TArray only supports signed index types&#34;); } ‰ΩøÁî®TArrayÂ≠òÊîæActorÊó∂ÔºåÈªòËÆ§ÁöÑÂà´ÂêçÁ±ªÂûã:">
  


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/d_hu15622052934649275245.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">AKaKLya</a></h1>
            <h2 class="site-description">ÁÇπÂáª</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#Á±ªÂûãÂà´Âêç">Á±ªÂûãÂà´Âêç</a>
      <ol>
        <li><a href="#allocatortype">AllocatorType</a></li>
        <li><a href="#sizetype">SizeType</a></li>
        <li><a href="#elementtype">ElementType</a></li>
        <li><a href="#usizetype">USizeType</a></li>
        <li><a href="#elementallocatortype">ElementAllocatorType</a></li>
        <li><a href="#static_assert">static_assert</a></li>
        <li><a href="#ÊÄªÁªì">ÊÄªÁªì</a></li>
      </ol>
    </li>
    <li><a href="#ÊûÑÈÄ†ÂáΩÊï∞">ÊûÑÈÄ†ÂáΩÊï∞</a>
      <ol>
        <li><a href="#ÈªòËÆ§ÊûÑÈÄ†">ÈªòËÆ§ÊûÑÈÄ†</a></li>
        <li><a href="#‰ªéÂéüÂßãÊï∞ÁªÑÊûÑÈÄ†">‰ªéÂéüÂßãÊï∞ÁªÑÊûÑÈÄ†</a>
          <ol>
            <li><a href="#copytoempty">CopyToEmpty</a></li>
          </ol>
        </li>
        <li><a href="#‰ªétarrayviewÊûÑÈÄ†">‰ªéTArrayViewÊûÑÈÄ†</a></li>
        <li><a href="#ÂàùÂßãÂåñÂàóË°®">ÂàùÂßãÂåñÂàóË°®</a></li>
        <li><a href="#Ë∑®ÂàÜÈÖçÂô®">Ë∑®ÂàÜÈÖçÂô®</a></li>
        <li><a href="#Êã∑Ë¥ùÊûÑÈÄ†">Êã∑Ë¥ùÊûÑÈÄ†</a></li>
        <li><a href="#Â∏¶È¢ÑÂàÜÈÖçÂÜÖÂ≠òÁöÑÊã∑Ë¥ùÊûÑÈÄ†">Â∏¶È¢ÑÂàÜÈÖçÂÜÖÂ≠òÁöÑÊã∑Ë¥ùÊûÑÈÄ†</a></li>
        <li><a href="#ÁßªÂä®ÊûÑÈÄ†">ÁßªÂä®ÊûÑÈÄ†</a>
          <ol>
            <li><a href="#moveorcpoy">MoveOrCpoy</a></li>
          </ol>
        </li>
        <li><a href="#ÊûêÊûÑ">ÊûêÊûÑ</a></li>
        <li><a href="#ÊÄªÁªì-2">ÊÄªÁªì</a></li>
      </ol>
    </li>
    <li><a href="#Â¢ûÂà†ÊîπÊü•">Â¢ûÂà†ÊîπÊü•</a>
      <ol>
        <li><a href="#pop">Pop</a>
          <ol>
            <li><a href="#movetempifpossible-Âè≥ÂÄºÂºïÁî®"><code>MoveTempIfPossible</code> Âè≥ÂÄºÂºïÁî®</a></li>
            <li><a href="#Â∑¶ÂÄºÂè≥ÂÄº">Â∑¶ÂÄºÂè≥ÂÄº</a></li>
          </ol>
        </li>
        <li><a href="#add">Add</a>
          <ol>
            <li><a href="#emplace"><strong>Emplace</strong></a></li>
            <li><a href="#fprivatetoken">FPrivateToken</a></li>
          </ol>
        </li>
        <li><a href="#remove">Remove</a></li>
        <li><a href="#removeat">RemoveAt</a>
          <ol>
            <li><a href="#destructitem">DestructItem</a></li>
          </ol>
        </li>
        <li><a href="#top">Top</a>
          <ol>
            <li><a href="#last">Last</a></li>
          </ol>
        </li>
        <li><a href="#sort">Sort</a>
          <ol>
            <li><a href="#tdereferencewrapperÁöÑÁâπÂåñ"><code>TDereferenceWrapper</code>ÁöÑÁâπÂåñ</a></li>
          </ol>
        </li>
        <li><a href="#find">Find</a>
          <ol>
            <li><a href="#restrict">RESTRICT</a></li>
          </ol>
        </li>
        <li><a href="#findbypredicate">FindByPredicate</a>
          <ol>
            <li><a href="#invoke">Invoke</a></li>
            <li><a href="#forward">Forward</a></li>
          </ol>
        </li>
        <li><a href="#reserve">Reserve</a></li>
        <li><a href="#init">Init</a></li>
      </ol>
    </li>
    <li><a href="#ÂÖ∂ÂÆÉÂáΩÊï∞">ÂÖ∂ÂÆÉÂáΩÊï∞</a>
      <ol>
        <li><a href="#toptional">TOptional</a></li>
        <li><a href="#getdata">GetData</a></li>
        <li><a href="#gettypesize">GetTypeSize</a></li>
        <li><a href="#getslack">GetSlack</a></li>
        <li><a href="#checkinvariants">CheckInvariants</a></li>
        <li><a href="#rangecheck">RangeCheck</a></li>
        <li><a href="#isvalidindex">IsValidIndex</a></li>
        <li><a href="#numbytes">NumBytes</a></li>
        <li><a href="#getallocatedsize">GetAllocatedSize</a></li>
        <li><a href="#ÈáçËΩΩ">ÈáçËΩΩ[]</a>
          <ol>
            <li><a href="#getdata-1"><strong>GetData</strong></a></li>
            <li><a href="#ue_lifetimebound-ÂÆè"><strong>UE_LIFETIMEBOUND ÂÆè</strong></a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/tarray/">TArray</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 21, 2000</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 34 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p><strong>ÈúÄË¶Å‰ºö‰∏Ä‰∫õÊ®°Êùø.</strong></p>
<h2 id="Á±ªÂûãÂà´Âêç">Á±ªÂûãÂà´Âêç
</h2><p>Ê®°ÊùøÁ±ªÁâáÊÆµ:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InElementType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">InAllocatorType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TArray</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">OtherInElementType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">OtherAllocator</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">friend</span> <span class="k">class</span> <span class="nc">TArray</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">SizeType</span>      <span class="o">=</span> <span class="k">typename</span> <span class="n">InAllocatorType</span><span class="o">::</span><span class="n">SizeType</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">ElementType</span>   <span class="o">=</span> <span class="n">InElementType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">AllocatorType</span> <span class="o">=</span> <span class="n">InAllocatorType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">USizeType</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unsigned_t</span><span class="o">&lt;</span><span class="n">SizeType</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">ElementAllocatorType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">conditional_t</span><span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">		<span class="n">AllocatorType</span><span class="o">::</span><span class="n">NeedsElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="k">typename</span> <span class="n">AllocatorType</span><span class="o">::</span><span class="k">template</span> <span class="n">ForElementType</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="o">&gt;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="k">typename</span> <span class="n">AllocatorType</span><span class="o">::</span><span class="n">ForAnyElementType</span>
</span></span><span class="line"><span class="cl">	<span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">static_assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_signed_v</span><span class="o">&lt;</span><span class="n">SizeType</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">&#34;TArray only supports signed index types&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩøÁî®TArrayÂ≠òÊîæActorÊó∂ÔºåÈªòËÆ§ÁöÑÂà´ÂêçÁ±ªÂûã:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">Array</span> <span class="o">=</span> <span class="n">TArray</span><span class="o">&lt;</span><span class="n">AActor</span><span class="o">*&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//signed int 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">using</span> <span class="n">ArraySizeType</span> <span class="o">=</span> <span class="n">Array</span><span class="o">::</span><span class="n">SizeType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//AActor*
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">using</span> <span class="n">ArrayElementType</span> <span class="o">=</span> <span class="n">Array</span><span class="o">::</span><span class="n">ElementType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// TSizedDefaultAllocator&lt;32&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">using</span> <span class="n">ArrayAllocatorType</span> <span class="o">=</span> <span class="n">Array</span><span class="o">::</span><span class="n">AllocatorType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1">// TSizedHeapAllocator&lt;32&gt;::ForElementType&lt;AActor*&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">using</span> <span class="n">ArrayElementAllocatorType</span> <span class="o">=</span> <span class="n">Array</span><span class="o">::</span><span class="n">ElementAllocatorType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1">// TSizedHeapAllocator&lt;32&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">using</span> <span class="n">ArrayAllocatorTypeTypedef</span> <span class="o">=</span> <span class="n">ArrayAllocatorType</span><span class="o">::</span><span class="n">Typedef</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	 <span class="c1">//signed int 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">using</span> <span class="n">ArrayAllocatorSizeType</span> <span class="o">=</span> <span class="n">ArrayAllocatorType</span><span class="o">::</span><span class="n">SizeType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="allocatortype">AllocatorType
</h3><p>TArray::AllocatorType ÈªòËÆ§ÂàÜÈÖçÂô®ÊòØ TSizedDefaultAllocator&lt;32&gt;</p>
<ul>
<li><strong>‰ΩúÁî®</strong>ÔºöÂÆö‰πâÂÆπÂô®‰ΩøÁî®ÁöÑ <strong>ÂÜÖÂ≠òÂàÜÈÖçÂô®Á±ªÂûã</strong>ÔºàÂ¶Ç <code>FDefaultAllocator</code>„ÄÅ<code>TInlineAllocator</code>Ôºâ„ÄÇ</li>
<li><strong>ËÆæËÆ°ÂéüÂõ†</strong>Ôºö
ÂÖÅËÆ∏Áî®Êà∑Ëá™ÂÆö‰πâÂÜÖÂ≠òÁÆ°ÁêÜÁ≠ñÁï•ÔºàÂ†ÜÂàÜÈÖç„ÄÅÊ†àÂàÜÈÖç„ÄÅÂÜÖÂ≠òÊ±†Á≠âÔºâ„ÄÇ</li>
</ul>
<h3 id="sizetype">SizeType
</h3><ul>
<li><strong>‰ΩúÁî®</strong>ÔºöÂÆö‰πâÂÆπÂô®‰∏≠ <strong>Á¥¢ÂºïÂíåÂ§ßÂ∞è</strong> ÁöÑÁ±ªÂûãÔºàÂ¶Ç <code>int32</code>„ÄÅ<code>int64</code>Ôºâ„ÄÇ</li>
<li><strong>ËÆæËÆ°ÂéüÂõ†</strong>Ôºö
Áî±ÂàÜÈÖçÂô® <code>InAllocatorType</code> ÂÜ≥ÂÆöÔºåÂÖÅËÆ∏‰∏çÂêåÂàÜÈÖçÂô®Ê†πÊçÆÈúÄÊ±ÇÈÄâÊã©‰∏çÂêåÂ§ßÂ∞èÁöÑÊï¥Êï∞Á±ªÂûãÔºà‰æãÂ¶ÇÔºåÂ∞èÂÜÖÂ≠òÂÆπÂô®Áî® <code>int32</code>ÔºåÂ§ßÂÜÖÂ≠òÁî® <code>int64</code>Ôºâ„ÄÇ</li>
<li><strong>Á§∫‰æã</strong>Ôºö
Ëã•ÂàÜÈÖçÂô®ÂÆö‰πâ‰∏∫ <code>TSizedHeapAllocator&lt;32&gt;</code>ÔºåÂàô <code>SizeType</code> ÂèØËÉΩÊòØ <code>int32</code>„ÄÇ</li>
</ul>
<p>SizeTypeÊù•Ëá™‰∫éÂàÜÈÖçÂô®ÁöÑSizeTypeÔºåÂõ†‰∏∫ÈªòËÆ§ÂàÜÈÖçÂô®‰ΩøÁî® TSizedDefaultAllocator&lt;32&gt;ÔºåÊâÄ‰ª•Ë¶ÅÂéªÊâæTSizedDefaultAllocatorÈáåÈù¢ÁöÑSizeTypeÊòØ‰ªÄ‰πà.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">using</span> <span class="n">SizeType</span>      <span class="o">=</span> <span class="k">typename</span> <span class="n">InAllocatorType</span><span class="o">::</span><span class="n">SizeType</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//----------ÂàÜÈÖçÂô®Á±ª-------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span><span class="kt">int</span> <span class="n">IndexSize</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">TSizedDefaultAllocator</span> 
</span></span><span class="line"><span class="cl"><span class="o">:</span> <span class="k">public</span> <span class="n">TSizedHeapAllocator</span><span class="o">&lt;</span><span class="n">IndexSize</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="k">public</span><span class="o">:</span> <span class="k">typedef</span> <span class="n">TSizedHeapAllocator</span><span class="o">&lt;</span><span class="n">IndexSize</span><span class="o">&gt;</span> <span class="n">Typedef</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="kt">int</span> <span class="n">IndexSize</span><span class="p">,</span> <span class="k">typename</span> <span class="n">BaseMallocType</span> <span class="o">=</span> <span class="n">FMemory</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TSizedHeapAllocator</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">SizeType</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">TBitsToSizeType</span><span class="o">&lt;</span><span class="n">IndexSize</span><span class="o">&gt;::</span><span class="n">Type</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span><span class="kt">int</span> <span class="n">IndexSize</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">TBitsToSizeType</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Fabricate a compile-time false result that&#39;s still dependent on the template parameter
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">static_assert</span><span class="p">(</span><span class="n">IndexSize</span> <span class="o">==</span> <span class="n">IndexSize</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;Unsupported allocator index size.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;&gt;</span> <span class="k">struct</span> <span class="nc">TBitsToSizeType</span><span class="o">&lt;</span><span class="mi">8</span><span class="o">&gt;</span>  <span class="p">{</span> <span class="k">using</span> <span class="n">Type</span> <span class="o">=</span> <span class="n">int8</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;&gt;</span> <span class="k">struct</span> <span class="nc">TBitsToSizeType</span><span class="o">&lt;</span><span class="mi">16</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">using</span> <span class="n">Type</span> <span class="o">=</span> <span class="n">int16</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;&gt;</span> <span class="k">struct</span> <span class="nc">TBitsToSizeType</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">using</span> <span class="n">Type</span> <span class="o">=</span> <span class="n">int32</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;&gt;</span> <span class="k">struct</span> <span class="nc">TBitsToSizeType</span><span class="o">&lt;</span><span class="mi">64</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">using</span> <span class="n">Type</span> <span class="o">=</span> <span class="n">int64</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//----------UEÂú®WindowsÁéØÂ¢É‰∏ãÁöÑintÁ±ªÂûã--------------//
</span></span></span><span class="line"><span class="cl"><span class="c1">// 8-bit signed integer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">typedef</span>	<span class="kt">signed</span> <span class="kt">char</span>			<span class="n">int8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 16-bit signed integer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">typedef</span> <span class="kt">signed</span> <span class="kt">short</span> <span class="kt">int</span>	<span class="n">int16</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 32-bit signed integer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">typedef</span> <span class="kt">signed</span> <span class="kt">int</span>	 		<span class="n">int32</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 64-bit signed integer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">typedef</span> <span class="kt">signed</span> <span class="kt">long</span> <span class="kt">long</span>	<span class="n">int64</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>TSizedDefaultAllocator ÁªßÊâøËá™ TSizedHeapAllocatorÔºå TSizedHeapAllocator‰∏≠ÂÆö‰πâ‰∫ÜSizeTypeÔºå</p>
<p>ÈÄöËøáÂÅèÁâπÂåñÔºåÂΩìIndexSizeÊòØ32Êó∂ ÔºåSizeType = int32.</p>
<h3 id="elementtype">ElementType
</h3><ul>
<li><strong>‰ΩúÁî®</strong>ÔºöË°®Á§∫ÂÆπÂô®Â≠òÂÇ®ÁöÑ <strong>ÂÖÉÁ¥†Á±ªÂûã</strong>ÔºàÂ¶Ç <code>int</code>„ÄÅ<code>FString</code>Ôºâ„ÄÇ</li>
<li><strong>ËÆæËÆ°ÂéüÂõ†</strong>Ôºö
Áõ¥Êé•ÈÄè‰º†Ê®°ÊùøÂèÇÊï∞ <code>InElementType</code>ÔºåÁÆÄÂåñ‰ª£Á†Å‰∏≠ÂØπÂÖÉÁ¥†Á±ªÂûãÁöÑÂºïÁî®„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Array</span> <span class="o">=</span> <span class="n">TArray</span><span class="o">&lt;</span><span class="n">AActor</span><span class="o">*&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//AActor*
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">using</span> <span class="n">ArrayElementType</span> <span class="o">=</span> <span class="n">Array</span><span class="o">::</span><span class="n">ElementType</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>TArrayÂ≠òÊîæActor*ÔºåÈÇ£‰πàElementTypeÂ∞±ÊòØAActor*Á±ªÂûã.</p>
<h3 id="usizetype">USizeType
</h3><ul>
<li><strong>‰ΩúÁî®</strong>ÔºöÂ∞Ü <code>SizeType</code> ËΩ¨Êç¢‰∏∫ <strong>Êó†Á¨¶Âè∑Êï¥Êï∞Á±ªÂûã</strong>ÔºàÂ¶Ç <code>uint32</code>„ÄÅ<code>uint64</code>Ôºâ„ÄÇ</li>
<li><strong>ËÆæËÆ°ÂéüÂõ†</strong>Ôºö
Âú®ÈúÄË¶ÅÊó†Á¨¶Âè∑ËøêÁÆóÁöÑÂú∫ÊôØÔºàÂ¶ÇÂÜÖÂ≠òÂùóÂ§ßÂ∞èËÆ°ÁÆóÔºâÈÅøÂÖçË¥üÊï∞Ê∫¢Âá∫ÈóÆÈ¢ò„ÄÇ</li>
</ul>
<h3 id="elementallocatortype">ElementAllocatorType
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">using</span> <span class="n">ElementAllocatorType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">conditional_t</span><span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">AllocatorType</span><span class="o">::</span><span class="n">NeedsElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">typename</span> <span class="n">AllocatorType</span><span class="o">::</span><span class="k">template</span> <span class="n">ForElementType</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="o">&gt;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">typename</span> <span class="n">AllocatorType</span><span class="o">::</span><span class="n">ForAnyElementType</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><strong>‰ΩúÁî®</strong>ÔºöÊ†πÊçÆÂàÜÈÖçÂô®ÊòØÂê¶ÈúÄË¶ÅÂÖÉÁ¥†Á±ªÂûãÔºåÈÄâÊã©ÂÖ∑‰ΩìÁöÑ <strong>ÂÜÖÂ≠òÂàÜÈÖçÂô®ÂÆûÁé∞</strong>„ÄÇ</p>
</li>
<li>
<p><strong>ËÆæËÆ°ÂéüÂõ†</strong>Ôºö</p>
</li>
<li>
<p><code>**NeedsElementType = true**</code>ÔºöÂàÜÈÖçÂô®ÈúÄË¶ÅÁü•ÈÅìÂÖÉÁ¥†Á±ªÂûãÔºà‰æãÂ¶ÇÔºå‰∏∫ÂÖÉÁ¥†ÊûÑÈÄ†/ÊûêÊûÑÊàñÂØπÈΩê‰ºòÂåñÔºâ„ÄÇÊ≠§Êó∂‰ΩøÁî® <code>ForElementType&lt;ElementType&gt;</code>ÔºåÂç≥‰∏éÂÖÉÁ¥†Á±ªÂûãÁªëÂÆöÁöÑÂàÜÈÖçÂô®„ÄÇ</p>
</li>
<li>
<p><code>**NeedsElementType = false**</code>ÔºöÂàÜÈÖçÂô®‰∏ç‰æùËµñÂÖÉÁ¥†Á±ªÂûãÔºà‰æãÂ¶ÇÔºåÂéüÂßãÂÜÖÂ≠òÂùóÁÆ°ÁêÜÔºâ„ÄÇÊ≠§Êó∂‰ΩøÁî® <code>ForAnyElementType</code>ÔºåÂç≥ÈÄöÁî®ÂàÜÈÖçÂô®„ÄÇ</p>
</li>
</ul>
<p><strong>ÈªòËÆ§ÁöÑÂàÜÈÖçÂô®ÂÆö‰πâ‰∫ÜËøô‰∏™NeedsElementTypeÁ±ªÂûãÔºö</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="kt">int</span> <span class="n">IndexSize</span><span class="p">,</span> <span class="k">typename</span> <span class="n">BaseMallocType</span> <span class="o">=</span> <span class="n">FMemory</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TSizedHeapAllocator</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">SizeType</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">TBitsToSizeType</span><span class="o">&lt;</span><span class="n">IndexSize</span><span class="o">&gt;::</span><span class="n">Type</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">USizeType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unsigned_t</span><span class="o">&lt;</span><span class="n">SizeType</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">enum</span> <span class="p">{</span> <span class="n">NeedsElementType</span> <span class="o">=</span> <span class="nb">true</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">	<span class="k">enum</span> <span class="p">{</span> <span class="n">RequireRangeCheck</span> <span class="o">=</span> <span class="nb">true</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âõ†Ê≠§ÈÄöËøástd::conditional_tÁöÑÂåπÈÖçÔºåÈÄâÊã©ForElementType<ElementType></p>
<p>TArrayÂ≠òÊîæAActor<em>Êó∂ÔºåÁ±ªÂûã‰∏∫:TSizedHeapAllocator&lt;32&gt;::ForElementType&lt;AActor</em>&gt;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// TSizedHeapAllocator&lt;32&gt;::ForElementType&lt;AActor*&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">using</span> <span class="n">ArrayElementAllocatorType</span> <span class="o">=</span> <span class="n">Array</span><span class="o">::</span><span class="n">ElementAllocatorType</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">using</span> <span class="n">ElementAllocatorType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">conditional_t</span><span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">AllocatorType</span><span class="o">::</span><span class="n">NeedsElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">typename</span> <span class="n">AllocatorType</span><span class="o">::</span><span class="k">template</span> <span class="n">ForElementType</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="o">&gt;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">typename</span> <span class="n">AllocatorType</span><span class="o">::</span><span class="n">ForAnyElementType</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---------conditionalÁöÑÊ∫êÁ†Å---------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span><span class="kt">bool</span> <span class="n">_Test</span><span class="p">,</span> <span class="k">class</span> <span class="nc">_Ty1</span><span class="p">,</span> <span class="k">class</span> <span class="nc">_Ty2</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">conditional</span> <span class="p">{</span> <span class="c1">// Choose _Ty1 if _Test is true, and _Ty2 otherwise
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">using</span> <span class="n">type</span> <span class="o">=</span> <span class="n">_Ty1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">_Ty1</span><span class="p">,</span> <span class="k">class</span> <span class="nc">_Ty2</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">conditional</span><span class="o">&lt;</span><span class="nb">false</span><span class="p">,</span> <span class="n">_Ty1</span><span class="p">,</span> <span class="n">_Ty2</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">type</span> <span class="o">=</span> <span class="n">_Ty2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="kt">bool</span> <span class="n">_Test</span><span class="p">,</span> <span class="k">class</span> <span class="nc">_Ty1</span><span class="p">,</span> <span class="k">class</span> <span class="nc">_Ty2</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">conditional_t</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">conditional</span><span class="o">&lt;</span><span class="n">_Test</span><span class="p">,</span> <span class="n">_Ty1</span><span class="p">,</span> <span class="n">_Ty2</span><span class="o">&gt;::</span><span class="n">type</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩìÁ¨¨‰∏Ä‰∏™boolÂÄº‰∏∫trueÊó∂ÔºåÂç≥  AllocatorType::NeedsElementType ‰∏∫trueÔºå</p>
<p>ÈÇ£‰πàconditionalÁöÑtypeÈÄâÊã© AllocatorType::template ForElementType<ElementType></p>
<p>Â¶ÇÊûúÊòØfalseÔºåconditionalÁöÑtypeÂ∞Ü‰ºöÈÄâÊã© AllocatorType::ForAnyElementType</p>
<h3 id="static_assert">static_assert
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">static_assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_signed_v</span><span class="o">&lt;</span><span class="n">SizeType</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">&#34;TArray only supports signed index types&#34;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><strong>‰ΩúÁî®</strong>ÔºöÁºñËØëÊó∂Ê£ÄÊü• <code>SizeType</code> ÊòØÂê¶‰∏∫ <strong>ÊúâÁ¨¶Âè∑Êï¥Êï∞Á±ªÂûã</strong>„ÄÇ</p>
</li>
<li>
<p><strong>ËÆæËÆ°ÂéüÂõ†</strong>Ôºö</p>
</li>
<li>
<p><strong>ÂÆâÂÖ®ÊÄß</strong>ÔºöÊúâÁ¨¶Âè∑Êï¥Êï∞ÂèØ‰ª•Ë°®Á§∫Ë¥üÊï∞Ôºå‰æø‰∫éÂ§ÑÁêÜ <code>InvalidIndex</code>ÔºàÂ¶Ç <code>INDEX_NONE = -1</code>Ôºâ„ÄÇ</p>
</li>
<li>
<p><strong>ÂÖºÂÆπÊÄß</strong>ÔºöUE ‰ª£Á†Å‰∏≠ËÆ∏Â§öÊé•Âè£‰æùËµñÊúâÁ¨¶Âè∑Á¥¢ÂºïÔºàÂ¶Ç <code>TArray::Find</code> ËøîÂõû <code>int32</code>Ôºâ„ÄÇ</p>
</li>
<li>
<p><strong>ÈîôËØØÈ¢ÑÈò≤</strong>ÔºöÈÅøÂÖçÁî®Êà∑ËØØÁî®Êó†Á¨¶Âè∑Á±ªÂûãÂØºËá¥Á¥¢ÂºïËÆ°ÁÆóÈîôËØØÔºàÂ¶Ç <code>0u - 1</code> Ê∫¢Âá∫‰∏∫ÊúÄÂ§ßÂÄºÔºâ„ÄÇ</p>
</li>
</ul>
<h3 id="ÊÄªÁªì">ÊÄªÁªì
</h3><div class="table-wrapper"><table>
<thead>
<tr>
<th><strong>ÁªÑ‰ª∂</strong></th>
<th><strong>ÂäüËÉΩ</strong></th>
<th><strong>ËÆæËÆ°ÁõÆÊ†á</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>**SizeType**</code></td>
<td>ÂÆö‰πâÁ¥¢ÂºïÂíåÂÆπÈáèÁ±ªÂûãÔºåÁî±ÂàÜÈÖçÂô®ÂÜ≥ÂÆö</td>
<td>ÊîØÊåÅ‰∏çÂêåÂÜÖÂ≠òËßÑÊ®°ÁöÑÂÆπÂô®</td>
</tr>
<tr>
<td><code>**ElementType**</code></td>
<td>ÂÆπÂô®Â≠òÂÇ®ÁöÑÂÖÉÁ¥†Á±ªÂûã</td>
<td>Ê≥õÂûãÁºñÁ®ãÁöÑÊ†∏ÂøÉ</td>
</tr>
<tr>
<td><code>**AllocatorType**</code></td>
<td>ÂÜÖÂ≠òÂàÜÈÖçÁ≠ñÁï•ÔºàÂ†Ü„ÄÅÊ†à„ÄÅÊ±†Á≠âÔºâ</td>
<td>ÁÅµÊ¥ªÁöÑÂÜÖÂ≠òÁÆ°ÁêÜ</td>
</tr>
<tr>
<td><code>**USizeType**</code></td>
<td>Êó†Á¨¶Âè∑Á±ªÂûãÔºåÁî®‰∫éÂÜÖÂ≠òÂ§ßÂ∞èËÆ°ÁÆó</td>
<td>ÈÅøÂÖçÊó†Á¨¶Âè∑ËøêÁÆóÁöÑÊ∫¢Âá∫ÈóÆÈ¢ò</td>
</tr>
<tr>
<td><code>**ElementAllocatorType**</code></td>
<td>Ê†πÊçÆÂàÜÈÖçÂô®ÈúÄÊ±ÇÈÄâÊã©Á±ªÂûãÁõ∏ÂÖ≥ÊàñÊó†ÂÖ≥ÁöÑÂÆûÁé∞</td>
<td>‰ºòÂåñÂÜÖÂ≠òÊìç‰ΩúÔºàÊûÑÈÄ†/ÊûêÊûÑ„ÄÅÂØπÈΩêÔºâ</td>
</tr>
<tr>
<td><code>**static_assert**</code></td>
<td>Âº∫Âà∂ <code>SizeType</code> ‰∏∫ÊúâÁ¨¶Âè∑Á±ªÂûã</td>
<td>Á°Æ‰øùÁ¥¢ÂºïÈÄªËæëÂÆâÂÖ®</td>
</tr>
</tbody>
</table></div>
<h2 id="ÊûÑÈÄ†ÂáΩÊï∞">ÊûÑÈÄ†ÂáΩÊï∞
</h2><p>TArrayÁöÑÊàêÂëòÂèòÈáè</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">ElementAllocatorType</span> <span class="n">AllocatorInstance</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">SizeType</span>             <span class="n">ArrayNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">SizeType</span>             <span class="n">ArrayMax</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>SizeType = int32 = signed int</p>
<p>ElementAllocatorType = TSizedHeapAllocator&lt;32&gt;::ForElementType&lt;AActor*&gt;</p>
<h3 id="ÈªòËÆ§ÊûÑÈÄ†">ÈªòËÆ§ÊûÑÈÄ†
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Constructor, initializes element number counters.
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="nf">TArray</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="o">:</span> <span class="n">ArrayNum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">,</span> <span class="n">ArrayMax</span><span class="p">(</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">GetInitialCapacity</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">SizeType</span> <span class="nf">GetInitialCapacity</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂàõÂª∫‰∏Ä‰∏™Á©∫ÁöÑ TArrayÔºàÂÖÉÁ¥†Á±ªÂûã‰∏∫ int32Ôºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span> <span class="n">MyArray</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// MyArray ÂàùÂßãÁä∂ÊÄÅÔºöNum() = 0, Max() = Allocator ÁöÑÂàùÂßãÂÆπÈáèÔºà‰æãÂ¶Ç 4Ôºâ
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âè™ÂÆö‰πâ‰∏Ä‰∏™TArray<int> ArrayÔºå‰∏ç‰º†ÂÖ•‰ªª‰ΩïÂèÇÊï∞Êó∂ÔºåNumÂíåMaxÈÉΩËÆæ‰∏∫0.</p>
<h3 id="‰ªéÂéüÂßãÊï∞ÁªÑÊûÑÈÄ†">‰ªéÂéüÂßãÊï∞ÁªÑÊûÑÈÄ†
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Constructor from a raw array of elements.
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param Ptr   A pointer to an array of elements to copy.
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param Count The number of elements to copy from Ptr.
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @see Append
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="nf">TArray</span><span class="p">(</span><span class="k">const</span> <span class="n">ElementType</span><span class="o">*</span> <span class="n">Ptr</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">Count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">Count</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// Cast to USizeType first to prevent sign extension on negative sizes, producing unusually large values.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// È¶ñÂÖàËΩ¨Êç¢‰∏∫ USizeType ‰ª•Èò≤Ê≠¢Ë¥üÊï∞Â§ßÂ∞èÂú®Á¨¶Âè∑Êâ©Â±ïÊó∂‰∫ßÁîüÂºÇÂ∏∏Â§ßÁöÑÂÄº„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">OnInvalidArrayNum</span><span class="p">((</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">)(</span><span class="n">USizeType</span><span class="p">)</span><span class="n">Count</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="n">check</span><span class="p">(</span><span class="n">Ptr</span> <span class="o">!=</span> <span class="k">nullptr</span> <span class="o">||</span> <span class="n">Count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">CopyToEmpty</span><span class="p">(</span><span class="n">Ptr</span><span class="p">,</span> <span class="n">Count</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÂéüÂßã C È£éÊ†ºÊï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">int32</span> <span class="n">RawArray</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ªé RawArray ÊûÑÈÄ† TArrayÔºàÂ§çÂà∂Ââç3‰∏™ÂÖÉÁ¥†Ôºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span> <span class="n">MyArray</span><span class="p">(</span><span class="n">RawArray</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// MyArray ÂÜÖÂÆπÔºö{10, 20, 30}
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="copytoempty">CopyToEmpty
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">OtherElementType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">OtherSizeType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">CopyToEmpty</span><span class="p">(</span><span class="k">const</span> <span class="n">OtherElementType</span><span class="o">*</span> <span class="n">OtherData</span><span class="p">,</span> <span class="n">OtherSizeType</span> <span class="n">OtherNum</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">PrevMax</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Á±ªÂûãËΩ¨Êç¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">SizeType</span> <span class="n">NewNum</span> <span class="o">=</span> <span class="p">(</span><span class="n">SizeType</span><span class="p">)</span><span class="n">OtherNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Ê£ÄÊµã Ê∫¢Âá∫/‰∏¢Â§±Á≤æÂ∫¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">checkf</span><span class="p">((</span><span class="n">OtherSizeType</span><span class="p">)</span><span class="n">NewNum</span> <span class="o">==</span> <span class="n">OtherNum</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;Invalid number of elements to add to this array type: %lld&#34;</span><span class="p">),</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">NewNum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//Êõ¥Êñ∞ÂÖÉÁ¥†Êï∞Èáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">ArrayNum</span> <span class="o">=</span> <span class="n">NewNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//Â¶ÇÊûú OtherNum Êàñ PrevMax ‰∏ç‰∏∫Èõ∂ÔºåÂàôÈúÄË¶ÅË∞ÉÊï¥ÂΩìÂâçÊï∞ÁªÑÁöÑÂ§ßÂ∞è‰ª•ÈÄÇÂ∫îÊñ∞Êï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="p">(</span><span class="n">OtherNum</span> <span class="o">||</span> <span class="n">PrevMax</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Ë∞ÉÊï¥Êï∞ÁªÑÁöÑÂÆπÈáè‰ª•ÈÄÇÂ∫îÊñ∞ÁöÑÂÖÉÁ¥†Êï∞Èáè„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">ResizeForCopy</span><span class="p">(</span><span class="n">NewNum</span><span class="p">,</span> <span class="n">PrevMax</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÊûÑÈÄ†ÂÖÉÁ¥†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">ConstructItems</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="o">&gt;</span><span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">GetData</span><span class="p">(),</span> <span class="n">OtherData</span><span class="p">,</span> <span class="n">OtherNum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ËÆæ‰∏∫0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">ArrayMax</span> <span class="o">=</span> <span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">GetInitialCapacity</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="n">SlackTrackerNumChanged</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="constructitems">ConstructItems
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Constructs a range of items into memory from a set of arguments.  The arguments come from an another array.
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param	Dest		The memory location to start copying into.
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param	Source		A pointer to the first argument to pass to the constructor.
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param	Count		The number of elements to copy.
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">DestinationElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">SourceElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">SizeType</span>
</span></span><span class="line"><span class="cl">	<span class="n">UE_REQUIRES</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">DestinationElementType</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">SourceElementType</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">TIsBitwiseConstructible</span><span class="o">&lt;</span><span class="n">DestinationElementType</span><span class="p">,</span> <span class="n">SourceElementType</span><span class="o">&gt;::</span><span class="n">Value</span><span class="p">)</span> <span class="c1">// the sizeof here should improve the error messages we get when we try to call this function with incomplete types
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">ConstructItems</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">Dest</span><span class="p">,</span> <span class="k">const</span> <span class="n">SourceElementType</span><span class="o">*</span> <span class="n">Source</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">Count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">Count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">FMemory</span><span class="o">::</span><span class="n">Memcpy</span><span class="p">(</span><span class="n">Dest</span><span class="p">,</span> <span class="n">Source</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">SourceElementType</span><span class="p">)</span> <span class="o">*</span> <span class="n">Count</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">DestinationElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">SourceElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">SizeType</span>
</span></span><span class="line"><span class="cl">	<span class="n">UE_REQUIRES</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">DestinationElementType</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">SourceElementType</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">TIsBitwiseConstructible</span><span class="o">&lt;</span><span class="n">DestinationElementType</span><span class="p">,</span> <span class="n">SourceElementType</span><span class="o">&gt;::</span><span class="n">Value</span><span class="p">)</span> <span class="c1">// the sizeof here should improve the error messages we get when we try to call this function with incomplete types
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCENOINLINE</span> <span class="kt">void</span> <span class="n">ConstructItems</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">Dest</span><span class="p">,</span> <span class="k">const</span> <span class="n">SourceElementType</span><span class="o">*</span> <span class="n">Source</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">Count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	 <span class="k">while</span> <span class="p">(</span><span class="n">Count</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">     <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="o">::</span><span class="k">new</span> <span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">Dest</span><span class="p">)</span> <span class="n">DestinationElementType</span><span class="p">(</span><span class="o">*</span><span class="n">Source</span><span class="p">);</span> <span class="c1">// Placement new ÊûÑÈÄ†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="o">++</span><span class="p">(</span><span class="n">DestinationElementType</span><span class="o">*&amp;</span><span class="p">)</span><span class="n">Dest</span><span class="p">;</span> <span class="c1">// ÊåáÈíàÊ≠•Ëøõ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="o">++</span><span class="n">Source</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">--</span><span class="n">Count</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏§‰∏™Ê®°ÊùøÂáΩÊï∞Áî®‰∫éÂ∞ÜÊ∫êÊï∞ÁªÑÂÖÉÁ¥†ÊûÑÈÄ†Âà∞ÁõÆÊ†áÂÜÖÂ≠ò‰∏≠ÔºåÊ†πÊçÆÁ±ªÂûãÊòØÂê¶ÊîØÊåÅ‰ΩçÊã∑Ë¥ùÔºàbitwise copyÔºâÈÄâÊã©‰∏çÂêåÁöÑÊûÑÈÄ†Á≠ñÁï•„ÄÇ</p>
<p>ÈÄöËøáÊ®°ÊùøÁâπÂåñÂíåÁ±ªÂûãÁâπÊÄßÊ£ÄÊü•ÔºåÂú®‰øùËØÅÁ±ªÂûãÂÆâÂÖ®ÁöÑÂâçÊèê‰∏ãÔºå‰∏∫ÁÆÄÂçïÁ±ªÂûãÊèê‰æõÈ´òÊïàÂÜÖÂ≠òÊã∑Ë¥ùÔºå‰∏∫Â§çÊùÇÁ±ªÂûãÊèê‰æõÂÆâÂÖ®ÁöÑÈÄê‰∏™ÊûÑÈÄ†ÈÄªËæëÔºåÊòØ UE ÂÆπÂô®È´òÊÄßËÉΩËÆæËÆ°ÁöÑÊ†∏ÂøÉÊú∫Âà∂‰πã‰∏Ä„ÄÇ</p>
<p>Á¨¨‰∏Ä‰∏™ÁâàÊú¨ Âç≥‰ΩøÁî®MemcpyÔºå ÊòØ ‰ΩçÊã∑Ë¥ù‰ºòÂåñÁâàÊú¨ÔºàÂø´ÈÄüË∑ØÂæÑÔºâ</p>
<p><strong>TIsBitwiseConstructible</strong> Á±ªÂûãÁâπÊÄßÊ£ÄÊü•ÔºåÂà§Êñ≠ SourceElementType ÊòØÂê¶ÂèØ‰ª•Áõ¥Êé•Êåâ‰ΩçÂ§çÂà∂Âà∞ DestinationElementType ÁöÑÂÜÖÂ≠ò‰∏≠ÔºàÂ¶ÇÂü∫Êú¨Á±ªÂûã„ÄÅPOD Á±ªÂûãÔºâ</p>
<p><strong>FMemory::Memcpy</strong> Áõ¥Êé•ÂÜÖÂ≠òÊã∑Ë¥ùÔºåÊïàÁéáÈ´òÔºàO(n) Êó∂Èó¥ÔºåÊó†È¢ùÂ§ñÊûÑÈÄ†/ÊûêÊûÑË∞ÉÁî®Ôºâ</p>
<p><strong>‰ΩøÁî®Âú∫ÊôØ:</strong></p>
<ul>
<li><strong>Âü∫Á°ÄÁ±ªÂûã</strong>Ôºö<code>int32</code>, <code>float</code>, <code>FVector</code> Á≠â„ÄÇ</li>
<li><strong>POD Á±ªÂûã</strong>ÔºöÊó†Ëá™ÂÆö‰πâÊûÑÈÄ†ÂáΩÊï∞/ÊûêÊûÑÂáΩÊï∞ÁöÑÁªìÊûÑ‰Ωì„ÄÇ</li>
<li><strong>ÂÜÖÂ≠òÂ∏ÉÂ±ÄÂÖºÂÆπÁöÑÁ±ªÂûã</strong>Ôºö‰øùËØÅ <code>Source</code> Âíå <code>Dest</code> ÁöÑ‰∫åËøõÂà∂ÂÖºÂÆπÊÄß„ÄÇ</li>
</ul>
<p>Á¨¨‰∫å‰∏™ÁâàÊú¨ Âç≥‰ΩøÁî®whileÂæ™ÁéØÔºåÊòØÈÄê‰∏™ÊûÑÈÄ†ÁâàÊú¨ÔºàÂÆâÂÖ®Ë∑ØÂæÑÔºâ</p>
<p><strong>!TIsBitwiseConstructible</strong> Á±ªÂûã‰∏çÂÖºÂÆπ‰ΩçÊã∑Ë¥ùÊó∂ÂêØÁî®Ê≠§ÁâàÊú¨</p>
<p><strong>Placement new</strong> Âú®ÁõÆÊ†áÂÜÖÂ≠òÂú∞ÂùÄË∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞ÔºàÊîØÊåÅÈùû POD Á±ªÂûãÔºâ</p>
<p><strong>ÊåáÈíàÊ≠•Ëøõ</strong> ÊâãÂä®ÁßªÂä®ÁõÆÊ†áÊåáÈíàÂà∞‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†‰ΩçÁΩÆ</p>
<p><strong>‰ΩøÁî®Âú∫ÊôØ:</strong></p>
<ul>
<li><strong>Èùû POD Á±ªÂûã</strong>ÔºöÂ¶ÇÂåÖÂê´ <code>FString</code>„ÄÅ<code>TSharedPtr</code> Á≠âÈúÄË¶ÅÊûÑÈÄ†/ÊûêÊûÑÁöÑÁ±ªÂûã„ÄÇ</li>
<li><strong>ÊúâËá™ÂÆö‰πâÊûÑÈÄ†ÈÄªËæë</strong>ÔºöÈúÄË¶ÅË∞ÉÁî®Êã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÊàñËΩ¨Êç¢ÊûÑÈÄ†ÂáΩÊï∞„ÄÇ</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th><strong>Êìç‰Ωú</strong></th>
<th><strong>‰ΩçÊã∑Ë¥ùÁâàÊú¨</strong></th>
<th><strong>ÈÄê‰∏™ÊûÑÈÄ†ÁâàÊú¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Êó∂Èó¥Â§çÊùÇÂ∫¶</strong></td>
<td>O(n)ÔºàÂÜÖÂ≠òËøûÁª≠Êã∑Ë¥ùÔºâ</td>
<td>O(n)ÔºàÂæ™ÁéØË∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞Ôºâ</td>
</tr>
<tr>
<td><strong>ÈÄÇÁî®Á±ªÂûã</strong></td>
<td>ÁÆÄÂçïÁ±ªÂûã</td>
<td>Â§çÊùÇÁ±ªÂûã</td>
</tr>
<tr>
<td><strong>ÂÜÖÂ≠òÂÆâÂÖ®ÊÄß</strong></td>
<td>‰æùËµñÁ±ªÂûãÂÖºÂÆπÊÄß</td>
<td>ÂÆâÂÖ®</td>
</tr>
</tbody>
</table></div>
<p><strong>Â∫îÁî®Âú∫ÊôØ:</strong></p>
<ul>
<li><strong>ÂÆπÂô®Êâ©ÂÆπ</strong>Ôºö<code>TArray::Add</code> Êàñ <code>TArray::Append</code> Êó∂ÈÄâÊã©ÊúÄ‰ºòÊûÑÈÄ†ÊñπÂºè„ÄÇ</li>
<li><strong>Â∫èÂàóÂåñ</strong>ÔºöÂèçÂ∫èÂàóÂåñ‰∫åËøõÂà∂Êï∞ÊçÆÂà∞ÂØπË±°„ÄÇ</li>
<li><strong>ÂÜÖÂ≠òÂ§çÁî®</strong>ÔºöÈáçÁî®Â∑≤ÂàÜÈÖçÂÜÖÂ≠òÈÅøÂÖçÈáçÂ§çÊûÑÈÄ†„ÄÇ</li>
</ul>
<h3 id="‰ªétarrayviewÊûÑÈÄ†">‰ªéTArrayViewÊûÑÈÄ†
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">OtherElementType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">OtherSizeType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">explicit</span> <span class="n">TArray</span><span class="p">(</span><span class="k">const</span> <span class="n">TArrayView</span><span class="o">&lt;</span><span class="n">OtherElementType</span><span class="p">,</span> <span class="n">OtherSizeType</span><span class="o">&gt;&amp;</span> <span class="n">Other</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//--------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">InElementType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">InAllocatorType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">OtherElementType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">OtherSizeType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">TArray</span><span class="o">&lt;</span><span class="n">InElementType</span><span class="p">,</span> <span class="n">InAllocatorType</span><span class="o">&gt;::</span><span class="n">TArray</span><span class="p">(</span><span class="k">const</span> <span class="n">TArrayView</span><span class="o">&lt;</span><span class="n">OtherElementType</span><span class="p">,</span> <span class="n">OtherSizeType</span><span class="o">&gt;&amp;</span> <span class="n">Other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">CopyToEmpty</span><span class="p">(</span><span class="n">Other</span><span class="p">.</span><span class="n">GetData</span><span class="p">(),</span> <span class="n">Other</span><span class="p">.</span><span class="n">Num</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂéüÂßã C È£éÊ†ºÊï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">int32</span> <span class="n">RawArray</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂàõÂª∫‰∏Ä‰∏™ TArrayViewÔºàËßÜÂõæÔºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TArrayView</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span> <span class="n">View</span> <span class="o">=</span> <span class="n">MakeArrayView</span><span class="p">(</span><span class="n">RawArray</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ªé View ÊûÑÈÄ† TArrayÔºàÂ§çÂà∂Êï∞ÊçÆÔºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span> <span class="n">MyArray</span><span class="p">(</span><span class="n">View</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// MyArray ÂÜÖÂÆπÔºö{10, 20, 30}
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂàùÂßãÂåñÂàóË°®">ÂàùÂßãÂåñÂàóË°®
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Initializer list constructor
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="n">TArray</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="n">InElementType</span><span class="o">&gt;</span> <span class="n">InitList</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// This is not strictly legal, as std::initializer_list&#39;s iterators are not guaranteed to be pointers, but
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// this appears to be the case on all of our implementations.  Also, if it&#39;s not true on a new implementation,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// it will fail to compile rather than behave badly.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">CopyToEmpty</span><span class="p">(</span><span class="n">InitList</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="p">(</span><span class="n">SizeType</span><span class="p">)</span><span class="n">InitList</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Áõ¥Êé•ÈÄöËøáÂàùÂßãÂåñÂàóË°®ÊûÑÈÄ†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span> <span class="n">MyArray</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;Apple&#34;</span><span class="p">,</span> <span class="s">&#34;Banana&#34;</span><span class="p">,</span> <span class="s">&#34;Cherry&#34;</span><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="c1">// MyArray ÂÜÖÂÆπÔºö{&#34;Apple&#34;, &#34;Banana&#34;, &#34;Cherry&#34;}
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÈáäÈáåÈù¢ÂèΩÈáåÂë±Âï¶ËØ¥Âï•Âë¢Ôºü</p>
<p>// ‰∏•Ê†ºÊù•ËØ¥ÔºåËøôÊòØ‰∏çÂêàÊ≥ïÁöÑÔºåÂõ†‰∏∫ std::initializer_list ÁöÑËø≠‰ª£Âô®Âπ∂‰∏ç‰øùËØÅÊòØÊåáÈíàÔºå</p>
<p>// ‰ΩÜÊòØÂú®Êàë‰ª¨ÊâÄÊúâÁöÑÂÆûÁé∞‰∏≠‰ºº‰πéÈÉΩÊòØËøôÊ†∑ÁöÑÊÉÖÂÜµ„ÄÇÊ≠§Â§ñÔºåÂ¶ÇÊûúÂú®Êñ∞ÁöÑÂÆûÁé∞‰∏≠ÂÆÉ‰∏çÊòØÊåáÈíàÔºå</p>
<p>// ÈÇ£‰πàÂÆÉÂ∞Ü‰ºöÁºñËØëÂ§±Ë¥•ÔºåËÄå‰∏çÊòØË°®Áé∞Á≥üÁ≥ï„ÄÇ</p>
<p>ÂêàÊ≥ïÊÄßÈóÆÈ¢òÔºö‰ªéÊäÄÊúØ‰∏äËÆ≤ÔºåÂÅáËÆæ std::initializer_list ÁöÑËø≠‰ª£Âô®ÊòØÊåáÈíàÊòØ‰∏çÁ¨¶ÂêàÊ†áÂáÜÁöÑÔºåÂõ†‰∏∫Ê†áÂáÜÂπ∂Ê≤°Êúâ‰øùËØÅËøô‰∏ÄÁÇπ„ÄÇ</p>
<p>ÂÆûÈôÖÂÆûÁé∞ÊÉÖÂÜµÔºöÂ∞ΩÁÆ°Ê†áÂáÜÊ≤°Êúâ‰øùËØÅÔºå‰ΩÜÂú®ÂΩìÂâçÁöÑÊâÄÊúâÂÆûÁé∞‰∏≠ÔºåËøô‰∫õËø≠‰ª£Âô®ÂÆûÈôÖ‰∏äÁ°ÆÂÆûÊòØÊåáÈíà„ÄÇ</p>
<p>ÂÆâÂÖ®ÊÄßÔºöÂ¶ÇÊûúÂú®Êú™Êù•Êüê‰∏™Êñ∞ÁöÑÂÆûÁé∞‰∏≠ÔºåËøôÁßçÂÅáËÆæ‰∏çÂÜçÊàêÁ´ãÔºàÂç≥Ëø≠‰ª£Âô®‰∏çÊòØÊåáÈíàÔºâÔºåÈÇ£‰πà‰ª£Á†Å‰ºöÂú®ÁºñËØëÊó∂Â∞±Êä•ÈîôÔºåËÄå‰∏çÊòØÂú®ËøêË°åÊó∂‰∫ßÁîüÈöæ‰ª•Ë∞ÉËØïÁöÑË°å‰∏∫ÈóÆÈ¢ò„ÄÇËøôÊèê‰æõ‰∫Ü‰∏ÄÁßçÊó©ÊúüÊ£ÄÊµãÈîôËØØÁöÑÊñπÂºèÔºåÈÅøÂÖç‰∫ÜÊΩúÂú®ÁöÑËøêË°åÊó∂ÈîôËØØ„ÄÇ</p>
<h3 id="Ë∑®ÂàÜÈÖçÂô®">Ë∑®ÂàÜÈÖçÂô®
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Copy constructor with changed allocator. Use the common routine to perform the copy.
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param Other The source array to copy.
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">OtherElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">OtherAllocator</span>
</span></span><span class="line"><span class="cl">	<span class="n">UE_REQUIRES</span><span class="p">(</span><span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">TArrayElementsAreCompatible_V</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="p">,</span> <span class="k">const</span> <span class="n">OtherElementType</span><span class="o">&amp;&gt;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="k">explicit</span> <span class="n">TArray</span><span class="p">(</span><span class="k">const</span> <span class="n">TArray</span><span class="o">&lt;</span><span class="n">OtherElementType</span><span class="p">,</span> <span class="n">OtherAllocator</span><span class="o">&gt;&amp;</span> <span class="n">Other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">CopyToEmpty</span><span class="p">(</span><span class="n">Other</span><span class="p">.</span><span class="n">GetData</span><span class="p">(),</span> <span class="n">Other</span><span class="p">.</span><span class="n">Num</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Ê∫êÊï∞ÁªÑÔºà‰ΩøÁî®ÈªòËÆ§ÂàÜÈÖçÂô®Ôºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="p">,</span> <span class="n">FDefaultAllocator</span><span class="o">&gt;</span> <span class="n">SourceArray</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÁõÆÊ†áÊï∞ÁªÑÔºà‰ΩøÁî®ÂÖ∂‰ªñÂàÜÈÖçÂô®ÔºåÂ¶ÇÊ†àÂàÜÈÖçÂô®Ôºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="p">,</span> <span class="n">TInlineAllocator</span><span class="o">&lt;</span><span class="mi">16</span><span class="o">&gt;&gt;</span> <span class="n">MyArray</span><span class="p">(</span><span class="n">SourceArray</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// MyArray ÂÜÖÂÆπÔºö{1, 2, 3}ÔºàÂÖÉÁ¥†Á±ªÂûãÂÖºÂÆπÂç≥ÂèØÊã∑Ë¥ùÔºâ
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Êã∑Ë¥ùÊûÑÈÄ†">Êã∑Ë¥ùÊûÑÈÄ†
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Copy constructor. Use the common routine to perform the copy.
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param Other The source array to copy.
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="nf">TArray</span><span class="p">(</span><span class="k">const</span> <span class="n">TArray</span><span class="o">&amp;</span> <span class="n">Other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">CopyToEmpty</span><span class="p">(</span><span class="n">Other</span><span class="p">.</span><span class="n">GetData</span><span class="p">(),</span> <span class="n">Other</span><span class="p">.</span><span class="n">Num</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="n">FVector</span><span class="o">&gt;</span> <span class="n">SourceArray</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">SourceArray</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">FVector</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">2.0f</span><span class="p">,</span> <span class="mf">3.0f</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Êã∑Ë¥ùÊûÑÈÄ†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">FVector</span><span class="o">&gt;</span> <span class="n">MyArray</span><span class="p">(</span><span class="n">SourceArray</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// MyArray ÂÜÖÂÆπÔºö{FVector(1,2,3)}
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Â∏¶È¢ÑÂàÜÈÖçÂÜÖÂ≠òÁöÑÊã∑Ë¥ùÊûÑÈÄ†">Â∏¶È¢ÑÂàÜÈÖçÂÜÖÂ≠òÁöÑÊã∑Ë¥ùÊûÑÈÄ†
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Copy constructor. Use the common routine to perform the copy.
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param Other The source array to copy.
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param ExtraSlack Tells how much extra memory should be preallocated
</span></span></span><span class="line"><span class="cl"><span class="cm"> *                   at the end of the array in the number of elements.
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="nf">TArray</span><span class="p">(</span><span class="k">const</span> <span class="n">TArray</span><span class="o">&amp;</span> <span class="n">Other</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">ExtraSlack</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">CopyToEmptyWithSlack</span><span class="p">(</span><span class="n">Other</span><span class="p">.</span><span class="n">GetData</span><span class="p">(),</span> <span class="n">Other</span><span class="p">.</span><span class="n">Num</span><span class="p">(),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ExtraSlack</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span> <span class="n">SourceArray</span> <span class="o">=</span> <span class="p">{</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Êã∑Ë¥ùÊûÑÈÄ†Âπ∂È¢ÑÁïô 5 ‰∏™È¢ùÂ§ñÁ©∫Èó¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span> <span class="n">MyArray</span><span class="p">(</span><span class="n">SourceArray</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// MyArray ÂÜÖÂÆπÔºö{100, 200}
</span></span></span><span class="line"><span class="cl"><span class="c1">// MyArray ÂÆπÈáèÔºö2ÔºàÂÖÉÁ¥†Êï∞Ôºâ + 5ÔºàÈ¢ùÂ§ñÁ©∫Èó¥Ôºâ = 7
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ExtraSlack Êï∞ÁªÑÊú´Â∞æÊåâÂÖÉÁ¥†ÁöÑÊï∞ÈáèÈ¢ÑÂÖàÂàÜÈÖçÂ§öÂ∞ëÈ¢ùÂ§ñÂÜÖÂ≠ò„ÄÇ</p>
<h3 id="ÁßªÂä®ÊûÑÈÄ†">ÁßªÂä®ÊûÑÈÄ†
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="nf">TArray</span><span class="p">(</span><span class="n">TArray</span><span class="o">&amp;&amp;</span> <span class="n">Other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">MoveOrCopy</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="n">Other</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//-------------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">OtherElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">OtherAllocator</span>
</span></span><span class="line"><span class="cl">	<span class="n">UE_REQUIRES</span><span class="p">(</span><span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">TArrayElementsAreCompatible_V</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="p">,</span> <span class="n">OtherElementType</span><span class="o">&amp;&amp;&gt;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="k">explicit</span> <span class="n">TArray</span><span class="p">(</span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">OtherElementType</span><span class="p">,</span> <span class="n">OtherAllocator</span><span class="o">&gt;&amp;&amp;</span> <span class="n">Other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">MoveOrCopy</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="n">Other</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//---------------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">OtherElementType</span>
</span></span><span class="line"><span class="cl">	<span class="n">UE_REQUIRES</span><span class="p">(</span><span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">TArrayElementsAreCompatible_V</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="p">,</span> <span class="n">OtherElementType</span><span class="o">&amp;&amp;&gt;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">TArray</span><span class="p">(</span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">OtherElementType</span><span class="p">,</span> <span class="n">AllocatorType</span><span class="o">&gt;&amp;&amp;</span> <span class="n">Other</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">ExtraSlack</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">MoveOrCopyWithSlack</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="n">Other</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ExtraSlack</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="moveorcpoy">MoveOrCpoy
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">FromArrayType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">ToArrayType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">MoveOrCopy</span><span class="p">(</span><span class="n">ToArrayType</span><span class="o">&amp;</span> <span class="n">ToArray</span><span class="p">,</span> <span class="n">FromArrayType</span><span class="o">&amp;</span> <span class="n">FromArray</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">PrevMax</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nf">constexpr</span> <span class="p">(</span><span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">CanMoveTArrayPointersBetweenArrayTypes</span><span class="o">&lt;</span><span class="n">FromArrayType</span><span class="p">,</span> <span class="n">ToArrayType</span><span class="o">&gt;</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// Move
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">static_assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_same_v</span><span class="o">&lt;</span><span class="n">TArray</span><span class="p">,</span> <span class="n">ToArrayType</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">&#34;MoveOrCopy is expected to be called with the current array type as the destination&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="k">using</span> <span class="n">FromAllocatorType</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">FromArrayType</span><span class="o">::</span><span class="n">AllocatorType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">using</span> <span class="n">ToAllocatorType</span>   <span class="o">=</span> <span class="k">typename</span> <span class="n">ToArrayType</span><span class="o">::</span><span class="n">AllocatorType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="k">constexpr</span> <span class="p">(</span><span class="n">TCanMoveBetweenAllocators</span><span class="o">&lt;</span><span class="n">FromAllocatorType</span><span class="p">,</span> <span class="n">ToAllocatorType</span><span class="o">&gt;::</span><span class="n">Value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">ToArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="k">template</span> <span class="n">MoveToEmptyFromOtherAllocator</span><span class="o">&lt;</span><span class="n">FromAllocatorType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">else</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">ToArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">MoveToEmpty</span><span class="p">(</span><span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">ToArray</span>  <span class="p">.</span><span class="n">ArrayNum</span> <span class="o">=</span> <span class="p">(</span><span class="n">SizeType</span><span class="p">)</span><span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">ToArray</span>  <span class="p">.</span><span class="n">ArrayMax</span> <span class="o">=</span> <span class="p">(</span><span class="n">SizeType</span><span class="p">)</span><span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayMax</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// Ensure the destination container could hold the source range (when the allocator size types shrink)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">if</span> <span class="k">constexpr</span> <span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">USizeType</span><span class="p">)</span> <span class="o">&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">typename</span> <span class="n">FromArrayType</span><span class="o">::</span><span class="n">USizeType</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">(</span><span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayNum</span> <span class="o">!=</span> <span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayNum</span> <span class="o">||</span> <span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayMax</span> <span class="o">!=</span> <span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayMax</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="c1">// Cast to USizeType first to prevent sign extension on negative sizes, producing unusually large values.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>				<span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">OnInvalidArrayNum</span><span class="p">((</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">)(</span><span class="n">USizeType</span><span class="p">)</span><span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayNum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayMax</span> <span class="o">=</span> <span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">GetInitialCapacity</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">FromArray</span><span class="p">.</span><span class="n">SlackTrackerNumChanged</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">ToArray</span><span class="p">.</span><span class="n">SlackTrackerNumChanged</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// Copy
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">ToArray</span><span class="p">.</span><span class="n">CopyToEmpty</span><span class="p">(</span><span class="n">FromArray</span><span class="p">.</span><span class="n">GetData</span><span class="p">(),</span> <span class="n">FromArray</span><span class="p">.</span><span class="n">Num</span><span class="p">(),</span> <span class="n">PrevMax</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>MoveOrCopy</code> ÊòØÁî®‰∫éÂú®‰∏§‰∏™ <code>TArray</code>ÔºàÊàñÁ±ª‰ººÂÆπÂô®Ôºâ‰πãÈó¥È´òÊïàÂú∞ <strong>ÁßªÂä®ÊàñÊã∑Ë¥ùÊï∞ÊçÆ</strong> ÁöÑÊ®°ÊùøÂáΩÊï∞„ÄÇ</p>
<p>ÂÖ∂Ê†∏ÂøÉÈÄªËæëÊòØÔºö</p>
<ul>
<li><strong>ÁßªÂä®ÔºàMoveÔºâ</strong>ÔºöËã•Ê∫êÊï∞ÁªÑÔºà<code>FromArray</code>ÔºâÂíåÁõÆÊ†áÊï∞ÁªÑÔºà<code>ToArray</code>ÔºâÁöÑ <strong>ÂÜÖÂ≠òÂàÜÈÖçÂô®ÔºàAllocatorÔºâÂíåÂÖÉÁ¥†Á±ªÂûãÂÖºÂÆπ</strong>ÔºåÁõ¥Êé•ËΩ¨ÁßªÂÜÖÂ≠òÊâÄÊúâÊùÉÔºàÈõ∂Êã∑Ë¥ùÔºâ„ÄÇ</li>
<li><strong>Êã∑Ë¥ùÔºàCopyÔºâ</strong>ÔºöËã•Êù°‰ª∂‰∏çÊª°Ë∂≥ÔºåÂàôÊâßË°åÊ∑±Êã∑Ë¥ù„ÄÇ</li>
</ul>
<h5 id="ÁâáÊÆµ1"><strong>ÁâáÊÆµ1</strong>
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">if</span> <span class="nf">constexpr</span> <span class="p">(</span><span class="n">TCanMoveBetweenAllocators</span><span class="o">&lt;</span><span class="n">FromAllocatorType</span><span class="p">,</span> <span class="n">ToAllocatorType</span><span class="o">&gt;::</span><span class="n">Value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">ToArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="k">template</span> <span class="n">MoveToEmptyFromOtherAllocator</span><span class="o">&lt;</span><span class="n">FromAllocatorType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">ToArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">MoveToEmpty</span><span class="p">(</span><span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//------------------------------------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">FromAllocatorType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">ToAllocatorType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">TCanMoveBetweenAllocators</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">enum</span> <span class="p">{</span> <span class="n">Value</span> <span class="o">=</span> <span class="nb">false</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="n">uint8</span> <span class="n">FromIndexSize</span><span class="p">,</span> <span class="n">uint8</span> <span class="n">ToIndexSize</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">TCanMoveBetweenAllocators</span><span class="o">&lt;</span><span class="n">TSizedHeapAllocator</span><span class="o">&lt;</span><span class="n">FromIndexSize</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TSizedHeapAllocator</span><span class="o">&lt;</span><span class="n">ToIndexSize</span><span class="o">&gt;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Allow conversions between different int width versions of the allocator
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">enum</span> <span class="p">{</span> <span class="n">Value</span> <span class="o">=</span> <span class="nb">true</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="n">uint8</span> <span class="n">FromIndexSize</span><span class="p">,</span> <span class="n">uint8</span> <span class="n">ToIndexSize</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">TCanMoveBetweenAllocators</span><span class="o">&lt;</span><span class="n">TSizedDefaultAllocator</span><span class="o">&lt;</span><span class="n">FromIndexSize</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TSizedDefaultAllocator</span><span class="o">&lt;</span><span class="n">ToIndexSize</span><span class="o">&gt;&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="o">:</span> <span class="n">TCanMoveBetweenAllocators</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">TSizedDefaultAllocator</span><span class="o">&lt;</span><span class="n">FromIndexSize</span><span class="o">&gt;::</span><span class="n">Typedef</span><span class="p">,</span> <span class="k">typename</span> <span class="n">TSizedDefaultAllocator</span><span class="o">&lt;</span><span class="n">ToIndexSize</span><span class="o">&gt;::</span><span class="n">Typedef</span><span class="o">&gt;</span> <span class="p">{};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>TCanMoveBetweenAllocators</code> Êé•Âèó‰∏§‰∏™Ê®°ÊùøÂèÇÊï∞</p>
<p>‰º†ÂÖ•ÁöÑ‰∏§‰∏™ÈÉΩ‰∏çÊòØTSizedHeapAllocatorÊàñTSizedDefaultAllocatorÔºåValue‰∏∫falseÔºå</p>
<p>‰º†ÂÖ•ÁöÑÈÉΩÊòØTSizedHeapAllocatorÔºåValue‰∏∫true</p>
<p>‰º†ÂÖ•ÁöÑÈÉΩÊòØTSizedDefaultAllocatorÔºåÂàôÊ†πÊçÆTSizedDefaultAllocatorÂÜÖÈÉ®ÁöÑÂÖºÂÆπÊÄßÂà§Êñ≠trueÂíåfalse.</p>
<p>Value=true Ë∞ÉÁî®MoveToEmptyFromOtherAllocator</p>
<p>Value=false Ë∞ÉÁî®MoveToEmpty</p>
<p><strong>È´òÂÉßËß£Èáä:</strong></p>
<p><code>TCanMoveBetweenAllocators</code> :‰Ω†ÁªôÊàë‰º†ÁöÑÊòØ‰ªÄ‰πà‰∏úË•øÊàëËØ∑ÈóÆ‰∫ÜÔºå</p>
<p>‰º†‰ø©TSizedHeapAllocatorÁªôÊàëÔºåOK ÊàëÂõûÁ≠î‰Ω†true.</p>
<p>‰º†‰ø©TSizedDefaultAllocatorÔºåÊàëÂè™ËÉΩËØ¥ ÂÖ∑‰ΩìÈóÆÈ¢òÂÖ∑‰ΩìÂàÜÊûê.</p>
<p>‰º†Êù•‰∏§‰∏™Êó¢‰∏çÊòØTSizedHeapAllocator ‰πü‰∏çÊòØ TSizedDefaultAllocatorÔºåÈÇ£ÊàëÂè™ËÉΩÂëäËØâ‰Ω† false.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">if</span> <span class="nf">constexpr</span> <span class="p">(</span><span class="n">TCanMoveBetweenAllocators</span><span class="o">&lt;</span><span class="n">FromAllocatorType</span><span class="p">,</span> <span class="n">ToAllocatorType</span><span class="o">&gt;::</span><span class="n">Value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">ToArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="k">template</span> <span class="n">MoveToEmptyFromOtherAllocator</span><span class="o">&lt;</span><span class="n">FromAllocatorType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">ToArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">MoveToEmpty</span><span class="p">(</span><span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//-----------------------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">OtherAllocator</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">MoveToEmptyFromOtherAllocator</span><span class="p">(</span><span class="k">typename</span> <span class="n">OtherAllocator</span><span class="o">::</span><span class="n">ForAnyElementType</span><span class="o">&amp;</span> <span class="n">Other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê£ÄÊü•ÂΩìÂâçÂàÜÈÖçÂô®ÂÆû‰æãÂíå‰º†ÂÖ•ÁöÑÂàÜÈÖçÂô®ÂÆû‰æã‰∏çÊòØÂêå‰∏Ä‰∏™ÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">checkSlow</span><span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="k">this</span> <span class="o">!=</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">Other</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Â¶ÇÊûúÂΩìÂâçÂàÜÈÖçÂô®Â∑≤ÁªèÊúâÂàÜÈÖçÁöÑÊï∞ÊçÆÔºåÂàôÈáäÊîæËøô‰∫õÊï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">Data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">BaseMallocType</span><span class="o">::</span><span class="n">Free</span><span class="p">(</span><span class="n">Data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∞ÜÊ∫êÂàÜÈÖçÂô®ÁöÑÊï∞ÊçÆÊåáÈíàËµãÂÄºÁªôÂΩìÂâçÂàÜÈÖçÂô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Data</span> <span class="o">=</span> <span class="n">Other</span><span class="p">.</span><span class="n">Data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∞ÜÊ∫êÂàÜÈÖçÂô®ÁöÑÊï∞ÊçÆÊåáÈíàËÆæÁΩÆ‰∏∫ nullptrÔºåË°®Á§∫ÂÆÉÁé∞Âú®‰∏∫Á©∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Other</span><span class="p">.</span><span class="n">Data</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="nf">MoveToEmpty</span><span class="p">(</span><span class="n">ForAnyElementType</span><span class="o">&amp;</span> <span class="n">Other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ë∞ÉÁî®Ê®°ÊùøÂáΩÊï∞ÔºåÊåáÂÆö TSizedHeapAllocator ‰Ωú‰∏∫Ê®°ÊùøÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="o">-&gt;</span><span class="n">MoveToEmptyFromOtherAllocator</span><span class="o">&lt;</span><span class="n">TSizedHeapAllocator</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Other</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏§ÊÆµ‰ª£Á†ÅÁöÑÊ†∏ÂøÉÂå∫Âà´Âú®‰∫é <strong>ÂàÜÈÖçÂô®Á±ªÂûãÂÖºÂÆπÊÄßÂ§ÑÁêÜ</strong>ÔºåÂÖ∑‰ΩìÂàÜ‰∏∫‰∏§ÁßçÊÉÖÂÜµÔºö</p>
<p><strong>1. ÂΩìÂàÜÈÖçÂô®Á±ªÂûãÂÖºÂÆπÊó∂ (TCanMoveBetweenAllocators = true)</strong></p>
<ul>
<li><strong>Ê®°ÊùøÂèÇÊï∞</strong>ÔºöÊòæÂºèÊåáÂÆöÊ∫êÂàÜÈÖçÂô®Á±ªÂûã <code>FromAllocatorType</code>„ÄÇ</li>
<li><strong>ÁõÆÁöÑ</strong>Ôºö
ÂΩìÊ∫êÂàÜÈÖçÂô®ÂíåÁõÆÊ†áÂàÜÈÖçÂô® <strong>Á±ªÂûã‰∏çÂêå‰ΩÜÂÖºÂÆπ</strong>ÔºàÂ¶Ç <code>TSizedHeapAllocator&lt;32&gt;</code> Âíå <code>TSizedHeapAllocator&lt;64&gt;</code>ÔºâÔºåÈÄöËøáÊ®°ÊùøÂèÇÊï∞‰º†ÈÄíÊ∫êÂàÜÈÖçÂô®ÁöÑÁ±ªÂûãÔºåÁ°Æ‰øùÊ≠£Á°ÆË∞ÉÁî®ÂÖ∂ÂÜÖÂ≠òÁÆ°ÁêÜÈÄªËæëÔºàÂ¶ÇÈáäÊîæÊóßÂÜÖÂ≠ò„ÄÅÊé•ÁÆ°Êñ∞ÂÜÖÂ≠òÔºâ„ÄÇ</li>
<li><strong>Á§∫‰æãÂú∫ÊôØ</strong>Ôºö
Ê∫êÊï∞ÁªÑ‰ΩøÁî® <code>TSizedHeapAllocator&lt;32&gt;</code>ÔºåÁõÆÊ†áÊï∞ÁªÑ‰ΩøÁî® <code>TSizedHeapAllocator&lt;64&gt;</code>Ôºå‰ΩÜ‰∏§ËÄÖÊîØÊåÅË∑®ÂàÜÈÖçÂô®ÁßªÂä®„ÄÇ</li>
</ul>
<p><strong>2. ÂΩìÂàÜÈÖçÂô®Á±ªÂûã‰∏çÂÖºÂÆπÊó∂ (TCanMoveBetweenAllocators = false)</strong></p>
<ul>
<li><strong>ÂÆûÈôÖË∞ÉÁî®</strong>Ôºö
<code>MoveToEmpty</code> ÂÜÖÈÉ®Ë∞ÉÁî® <code>MoveToEmptyFromOtherAllocator&lt;TSizedHeapAllocator&gt;</code>ÔºåÂç≥Âº∫Âà∂Â∞ÜÊ∫êÂàÜÈÖçÂô®ËßÜ‰∏∫ÈªòËÆ§ÁöÑ <code>TSizedHeapAllocator</code>„ÄÇ</li>
<li><strong>ÁõÆÁöÑ</strong>Ôºö
ÂΩìÂàÜÈÖçÂô®Á±ªÂûã <strong>‰∏çÂÖºÂÆπ</strong> Êó∂ÔºåÂÅáËÆæÊ∫êÂàÜÈÖçÂô®‰∏éÁõÆÊ†áÂàÜÈÖçÂô®ÂÖ±‰∫´Áõ∏ÂêåÁöÑÈªòËÆ§ÂÜÖÂ≠òÁÆ°ÁêÜÁ≠ñÁï•ÔºàÂ¶ÇÂ†ÜÂàÜÈÖçÔºâÔºåÁõ¥Êé•ÈÄöËøáÈªòËÆ§ÈÄªËæëËΩ¨ÁßªÂÜÖÂ≠ò„ÄÇ</li>
<li><strong>È£éÈô©</strong>Ôºö
Ëã•Ê∫êÂàÜÈÖçÂô®ÂÆûÈôÖÁ±ªÂûãÈùû <code>TSizedHeapAllocator</code>ÔºåÂèØËÉΩÂØºËá¥Êú™ÂÆö‰πâË°å‰∏∫ÔºàÂ¶ÇÂÜÖÂ≠òÊ≥ÑÊºèÊàñÂ¥©Ê∫ÉÔºâ„ÄÇÂõ†Ê≠§Ê≠§Ë∑ØÂæÑ‰ªÖÂú®Á±ªÂûã‰∏•Ê†ºÂÖºÂÆπÊó∂ÂÆâÂÖ®„ÄÇ</li>
</ul>
<p><strong>Âú∫ÊôØ 1ÔºöÂêåÁ±ªÂûãÂàÜÈÖçÂô®ÁßªÂä®</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="p">,</span> <span class="n">TSizedHeapAllocator</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;&gt;</span> <span class="n">Source</span><span class="p">,</span> <span class="n">Dest</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">MoveOrCopy</span><span class="p">(</span><span class="n">Dest</span><span class="p">,</span> <span class="n">Source</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>Ë∞ÉÁî®Ë∑ØÂæÑ</strong>Ôºö
<code>MoveToEmptyFromOtherAllocator&lt;TSizedHeapAllocator&lt;32&gt;&gt;</code>„ÄÇ</li>
<li><strong>Ë°å‰∏∫</strong>Ôºö
ÂÆâÂÖ®ËΩ¨ÁßªÂÜÖÂ≠òÔºåÊó†È¢ùÂ§ñÂºÄÈîÄ„ÄÇ</li>
</ul>
<p><strong>Âú∫ÊôØ 2Ôºö‰∏çÂêåÁ±ªÂûãÂàÜÈÖçÂô®ÁßªÂä®Ôºà‰ΩÜÂÖºÂÆπÔºâ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="p">,</span> <span class="n">TSizedHeapAllocator</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;&gt;</span> <span class="n">Source</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="p">,</span> <span class="n">TSizedHeapAllocator</span><span class="o">&lt;</span><span class="mi">64</span><span class="o">&gt;&gt;</span> <span class="n">Dest</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">MoveOrCopy</span><span class="p">(</span><span class="n">Dest</span><span class="p">,</span> <span class="n">Source</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>Ë∞ÉÁî®Ë∑ØÂæÑ</strong>Ôºö
<code>MoveToEmptyFromOtherAllocator&lt;TSizedHeapAllocator&lt;32&gt;&gt;</code>„ÄÇ</li>
<li><strong>Ë°å‰∏∫</strong>Ôºö
Ê†πÊçÆÊ∫êÂàÜÈÖçÂô®Á±ªÂûãÈáäÊîæÊóßÂÜÖÂ≠òÔºåÊ≠£Á°ÆÊé•ÁÆ°Êñ∞ÂÜÖÂ≠ò„ÄÇ</li>
</ul>
<p><strong>Âú∫ÊôØ 3Ôºö‰∏çÂÖºÂÆπÂàÜÈÖçÂô®ÁßªÂä®</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="p">,</span> <span class="n">TInlineAllocator</span><span class="o">&lt;</span><span class="mi">16</span><span class="o">&gt;&gt;</span> <span class="n">Source</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="p">,</span> <span class="n">TSizedHeapAllocator</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;&gt;</span> <span class="n">Dest</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">MoveOrCopy</span><span class="p">(</span><span class="n">Dest</span><span class="p">,</span> <span class="n">Source</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>Ë∞ÉÁî®Ë∑ØÂæÑ</strong>Ôºö
<code>MoveToEmpty</code> ‚Üí <code>MoveToEmptyFromOtherAllocator&lt;TSizedHeapAllocator&gt;</code>„ÄÇ</li>
<li><strong>Ë°å‰∏∫</strong>Ôºö
ÈîôËØØÔºÅ<code>TInlineAllocator</code>ÔºàÊ†àÂàÜÈÖçÔºâ‰∏é <code>TSizedHeapAllocator</code>ÔºàÂ†ÜÂàÜÈÖçÔºâÁ≠ñÁï•‰∏çÂêåÔºåÂº∫Âà∂ËΩ¨Êç¢ÂØºËá¥Êú™ÂÆö‰πâË°å‰∏∫„ÄÇ</li>
</ul>
<div class="table-wrapper"><table>
<thead>
<tr>
<th><strong>Êù°‰ª∂</strong></th>
<th><strong>Ë∞ÉÁî®ÊñπÂºè</strong></th>
<th><strong>ÂÆâÂÖ®ÊÄß</strong></th>
<th><strong>ÈÄÇÁî®Âú∫ÊôØ</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ÂàÜÈÖçÂô®ÂÖºÂÆπ</strong> (<code>TCanMove=true</code>)</td>
<td>ÊòæÂºèÊ®°ÊùøÂèÇÊï∞‰º†ÈÄí (<code>FromAllocatorType</code>)</td>
<td>È´ò</td>
<td>‰∏çÂêåÁ±ªÂûã‰ΩÜÂÜÖÂ≠òÁ≠ñÁï•ÂÖºÂÆπÁöÑÂàÜÈÖçÂô®</td>
</tr>
<tr>
<td><strong>ÂàÜÈÖçÂô®‰∏çÂÖºÂÆπ</strong> (<code>TCanMove=false</code>)</td>
<td>Âº∫Âà∂ÈªòËÆ§ÂàÜÈÖçÂô®Á±ªÂûã (<code>TSizedHeapAllocator</code>)</td>
<td>‰Ωé</td>
<td>‰ªÖÈôêÂêåÁ±ªÂûãÊàñËÆæËÆ°Á°Æ‰øùÂÆâÂÖ®ÁöÑÂàÜÈÖçÂô®</td>
</tr>
</tbody>
</table></div>
<p><strong>ËÆæËÆ°ÂéüÂàôÔºö</strong></p>
<ul>
<li><strong>Èõ∂ÂºÄÈîÄÊäΩË±°</strong>ÔºöÈÄöËøáÁºñËØëÊó∂ÂàÜÊîØÈÄâÊã©ÊúÄ‰ºòË∑ØÂæÑ„ÄÇ</li>
<li><strong>Á±ªÂûãÂÆâÂÖ®</strong>ÔºöÂà©Áî®Ê®°ÊùøÁâπÊÄßÁ°Æ‰øùÂÜÖÂ≠òÊìç‰ΩúÊ≠£Á°ÆÊÄß„ÄÇ</li>
<li><strong>Êâ©Â±ïÊÄß</strong>ÔºöÂÖÅËÆ∏Ëá™ÂÆö‰πâÂàÜÈÖçÂô®ÈÄöËøáÁâπÂåñÂ£∞ÊòéÂÖºÂÆπÊÄß„ÄÇ</li>
</ul>
<p><strong>ÊúÄ‰Ω≥ÂÆûË∑µÔºö</strong></p>
<ul>
<li><strong>Ëá™ÂÆö‰πâÂàÜÈÖçÂô®</strong>ÔºöËã•ÈúÄÊîØÊåÅË∑®Á±ªÂûãÁßªÂä®ÔºåÈúÄÁâπÂåñ <code>TCanMoveBetweenAllocators</code>„ÄÇ</li>
<li><strong>Ë∞®ÊÖé‰ΩøÁî®ÈªòËÆ§Ë∑ØÂæÑ</strong>ÔºöÁ°Æ‰øù‰∏çÂÖºÂÆπÂàÜÈÖçÂô®ÁöÑÁßªÂä®Êìç‰ΩúÂú®ËÆæËÆ°‰∏≠Êó†ÂÆ≥„ÄÇ</li>
</ul>
<h5 id="ÁâáÊÆµ2"><strong>ÁâáÊÆµ2</strong>
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayNum</span> <span class="o">=</span> <span class="p">(</span><span class="n">SizeType</span><span class="p">)</span><span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayMax</span> <span class="o">=</span> <span class="p">(</span><span class="n">SizeType</span><span class="p">)</span><span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayMax</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Á°Æ‰øùÁõÆÊ†áÂÆπÂô®ËÉΩÂ§üÂÆπÁ∫≥Ê∫êÂÆπÂô®‰∏≠ÁöÑÊï∞ÊçÆËåÉÂõ¥ÔºåÁâπÂà´ÊòØÂú®ÂàÜÈÖçÂô®Â§ßÂ∞èÁ±ªÂûãÁº©Â∞èÁöÑÊÉÖÂÜµ‰∏ã„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1">// Ê£ÄÊü•ÁõÆÊ†áÂÆπÂô®ÁöÑÂ§ßÂ∞èÁ±ªÂûã USizeType ÊòØÂê¶ÊØîÊ∫êÂÆπÂô®ÁöÑÂ§ßÂ∞èÁ±ªÂûãÂ∞è„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nf">constexpr</span> <span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">USizeType</span><span class="p">)</span> <span class="o">&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">typename</span> <span class="n">FromArrayType</span><span class="o">::</span><span class="n">USizeType</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Ê£ÄÊü•ÁõÆÊ†áÂÆπÂô®ÁöÑÂΩìÂâçÂÖÉÁ¥†Êï∞Èáè (ArrayNum) ÂíåÊúÄÂ§ßÂÆπÈáè (ArrayMax) ÊòØÂê¶‰∏éÊ∫êÂÆπÂô®Áõ∏ÂåπÈÖç„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="p">(</span><span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayNum</span> <span class="o">!=</span> <span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayNum</span> <span class="o">||</span> <span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayMax</span> <span class="o">!=</span> <span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayMax</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// Cast to USizeType first to prevent sign extension on negative sizes, producing unusually large values.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">OnInvalidArrayNum</span><span class="p">((</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">)(</span><span class="n">USizeType</span><span class="p">)</span><span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayNum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//----------------------------------------------------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">OnInvalidArrayNum</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">NewNum</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogCore</span><span class="p">,</span> <span class="n">Fatal</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;Trying to resize TArray to an invalid size of %llu&#34;</span><span class="p">),</span> <span class="n">NewNum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(;;);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>UE::Core::Private::OnInvalidArrayNum Log‰ΩøÁî®‰∫ÜFatalÔºåÂºïÊìéÂ¥©Ê∫ÉÊä•Èîô.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayMax</span> <span class="o">=</span> <span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">GetInitialCapacity</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">FromArray</span><span class="p">.</span><span class="n">SlackTrackerNumChanged</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">ToArray</span><span class="p">.</span><span class="n">SlackTrackerNumChanged</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>FromArrayÁöÑArrayNum„ÄÅArrayMaxËÆæÁΩÆ‰∏∫0Ôºå</p>
<h5 id="ÊÄªÁªì-1"><strong>ÊÄªÁªì</strong>
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">if</span> <span class="nf">constexpr</span> <span class="p">(</span><span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">CanMoveTArrayPointersBetweenArrayTypes</span><span class="o">&lt;</span><span class="n">FromArrayType</span><span class="p">,</span> <span class="n">ToArrayType</span><span class="o">&gt;</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Move
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">static_assert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_same_v</span><span class="o">&lt;</span><span class="n">TArray</span><span class="p">,</span> <span class="n">ToArrayType</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">&#34;MoveOrCopy is expected to be called with the current array type as the destination&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">FromAllocatorType</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">FromArrayType</span><span class="o">::</span><span class="n">AllocatorType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">using</span> <span class="n">ToAllocatorType</span>   <span class="o">=</span> <span class="k">typename</span> <span class="n">ToArrayType</span><span class="o">::</span><span class="n">AllocatorType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//Âà§Êñ≠‰º†ÂÖ•ÁöÑ‰∏§‰∏™ÂàÜÈÖçÂô®ËÉΩÂê¶ÁßªÂä®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="k">constexpr</span> <span class="p">(</span><span class="n">TCanMoveBetweenAllocators</span><span class="o">&lt;</span><span class="n">FromAllocatorType</span><span class="p">,</span> <span class="n">ToAllocatorType</span><span class="o">&gt;::</span><span class="n">Value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÁßªÂä®ÂàÜÈÖçÂô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">ToArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="k">template</span> <span class="n">MoveToEmptyFromOtherAllocator</span><span class="o">&lt;</span><span class="n">FromAllocatorType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">ToArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">MoveToEmpty</span><span class="p">(</span><span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//ÊãøÊù•Âêß‰Ω†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">ToArray</span>  <span class="p">.</span><span class="n">ArrayNum</span> <span class="o">=</span> <span class="p">(</span><span class="n">SizeType</span><span class="p">)</span><span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">ToArray</span>  <span class="p">.</span><span class="n">ArrayMax</span> <span class="o">=</span> <span class="p">(</span><span class="n">SizeType</span><span class="p">)</span><span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayMax</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">	<span class="c1">// Á°Æ‰øùÁõÆÊ†áÂÆπÂô®ËÉΩÂ§üÂÆπÁ∫≥Ê∫êÂÆπÂô®‰∏≠ÁöÑÊï∞ÊçÆËåÉÂõ¥ÔºåÁâπÂà´ÊòØÂú®ÂàÜÈÖçÂô®Â§ßÂ∞èÁ±ªÂûãÁº©Â∞èÁöÑÊÉÖÂÜµ‰∏ã„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Ê£ÄÊü•ÁõÆÊ†áÂÆπÂô®ÁöÑÂ§ßÂ∞èÁ±ªÂûã USizeType ÊòØÂê¶ÊØîÊ∫êÂÆπÂô®ÁöÑÂ§ßÂ∞èÁ±ªÂûãÂ∞è„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="k">constexpr</span> <span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">USizeType</span><span class="p">)</span> <span class="o">&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">typename</span> <span class="n">FromArrayType</span><span class="o">::</span><span class="n">USizeType</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Ê£ÄÊü•ÁõÆÊ†áÂÆπÂô®ÁöÑÂΩìÂâçÂÖÉÁ¥†Êï∞Èáè (ArrayNum) ÂíåÊúÄÂ§ßÂÆπÈáè (ArrayMax) ÊòØÂê¶‰∏éÊ∫êÂÆπÂô®Áõ∏ÂåπÈÖç„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    	<span class="k">if</span> <span class="p">(</span><span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayNum</span> <span class="o">!=</span> <span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayNum</span> <span class="o">||</span> <span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayMax</span> <span class="o">!=</span> <span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayMax</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    	<span class="p">{</span>
</span></span><span class="line"><span class="cl">    		<span class="c1">// Cast to USizeType first to prevent sign extension on negative sizes, producing unusually large values.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// Ëß¶ÂèëÂ¥©Ê∫É
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    		<span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">OnInvalidArrayNum</span><span class="p">((</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">)(</span><span class="n">USizeType</span><span class="p">)</span><span class="n">ToArray</span><span class="p">.</span><span class="n">ArrayNum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    	<span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//FromArrayÁöÑArrayNum„ÄÅArrayMaxËÆæ‰∏∫0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">FromArray</span><span class="p">.</span><span class="n">ArrayMax</span> <span class="o">=</span> <span class="n">FromArray</span><span class="p">.</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">GetInitialCapacity</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">	<span class="n">FromArray</span><span class="p">.</span><span class="n">SlackTrackerNumChanged</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">ToArray</span><span class="p">.</span><span class="n">SlackTrackerNumChanged</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÊûêÊûÑ">ÊûêÊûÑ
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/** Destructor. */</span>
</span></span><span class="line"><span class="cl"><span class="o">~</span><span class="n">TArray</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">DestructItems</span><span class="p">(</span><span class="n">GetData</span><span class="p">(),</span> <span class="n">ArrayNum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// note ArrayNum, ArrayMax and data pointer are not invalidated
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// they are left unchanged and use-after-destruct will see them the same as before destruct
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//--------------------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">ElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">SizeType</span>
</span></span><span class="line"><span class="cl">	<span class="n">UE_REQUIRES</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">ElementType</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="o">&gt;</span><span class="p">)</span> <span class="c1">// the sizeof here should improve the error messages we get when we try to call this function with incomplete types
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">DestructItems</span><span class="p">(</span><span class="n">ElementType</span><span class="o">*</span> <span class="n">Element</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">Count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">ElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="k">typename</span> <span class="n">SizeType</span>
</span></span><span class="line"><span class="cl">	<span class="n">UE_REQUIRES</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">ElementType</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="o">&gt;</span><span class="p">)</span> <span class="c1">// the sizeof here should improve the error messages we get when we try to call this function with incomplete types
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCENOINLINE</span> <span class="kt">void</span> <span class="n">DestructItems</span><span class="p">(</span><span class="n">ElementType</span><span class="o">*</span> <span class="n">Element</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">Count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span> <span class="p">(</span><span class="n">Count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// We need a typedef here because VC won&#39;t compile the destructor call below if ElementType itself has a member called ElementType
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">typedef</span> <span class="n">ElementType</span> <span class="n">DestructItemsElementTypeTypedef</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="n">Element</span><span class="o">-&gt;</span><span class="n">DestructItemsElementTypeTypedef</span><span class="o">::~</span><span class="n">DestructItemsElementTypeTypedef</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="o">++</span><span class="n">Element</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="o">--</span><span class="n">Count</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>is_trivially_destructible_v</code> Ê£ÄÊü•ÁªôÂÆöÁ±ªÂûãÁöÑÊûêÊûÑÂáΩÊï∞ÊòØÂê¶ÊòØÂπ≥Âá°ÁöÑÔºàtrivialÔºâ„ÄÇ</p>
<ul>
<li>
<p><strong>Âπ≥Âá°ÊûêÊûÑÂáΩÊï∞</strong>ÔºöÁ±ªÂûãÊ≤°ÊúâÁî®Êà∑ÂÆö‰πâÁöÑÊûêÊûÑÂáΩÊï∞ÔºåÊâÄÊúâÈùûÈùôÊÄÅÊàêÂëòÂíåÂü∫Á±ªÈÉΩÊúâÂπ≥Âá°ÊûêÊûÑÂáΩÊï∞„ÄÇ</p>
</li>
<li>
<p>Á§∫‰æãÔºöÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûã„ÄÅÁÆÄÂçïÁöÑPODÔºàPlain Old DataÔºâÁªìÊûÑ‰Ωì„ÄÅÊüê‰∫õÊ†áÂáÜÂ∫ìÁ±ªÂûãÔºàÂ¶Ç <code>std::array</code> ÂΩìÂÖÉÁ¥†Á±ªÂûã‰∏∫Âπ≥Âá°Á±ªÂûãÊó∂Ôºâ„ÄÇ</p>
</li>
<li>
<p><strong>ÈùûÂπ≥Âá°ÊûêÊûÑÂáΩÊï∞</strong>ÔºöÁ±ªÂûãÊúâÁî®Êà∑ÂÆö‰πâÁöÑÊûêÊûÑÂáΩÊï∞ÔºåÊàñËÄÖÂÖ∂ÊàêÂëòÊàñÂü∫Á±ªÊúâÈùûÂπ≥Âá°ÊûêÊûÑÂáΩÊï∞„ÄÇ</p>
</li>
<li>
<p>Á§∫‰æãÔºöÁî®Êà∑ÂÆö‰πâÊûêÊûÑÂáΩÊï∞ÁöÑÁ±ª„ÄÅÂåÖÂê´Ê†áÂáÜÂ∫ìÂÆπÂô®ÔºàÂ¶Ç <code>std::vector</code>ÔºâÁöÑÁ±ª„ÄÅ‰ªéÂÖ∑ÊúâÈùûÂπ≥Âá°ÊûêÊûÑÂáΩÊï∞ÁöÑÂü∫Á±ªÊ¥æÁîüÁöÑÁ±ª„ÄÇ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;type_traits&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;int: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ËæìÂá∫: true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÁÆÄÂçïÁªìÊûÑ‰Ωì
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">struct</span> <span class="nc">Trivial</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Trivial: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="n">Trivial</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ËæìÂá∫: true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Áî®Êà∑ÂÆö‰πâÊûêÊûÑÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">struct</span> <span class="nc">NonTrivial</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">NonTrivial</span><span class="p">()</span> <span class="k">noexcept</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;NonTrivial: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="n">NonTrivial</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ËæìÂá∫: false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÊàêÂëòÁ±ªÂûãÊúâÈùûÂπ≥Âá°ÊûêÊûÑÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">struct</span> <span class="nc">NonTrivialMember</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">str</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;NonTrivialMember: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="n">NonTrivialMember</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ËæìÂá∫: false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Âü∫Á±ªÊúâÈùûÂπ≥Âá°ÊûêÊûÑÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">struct</span> <span class="nc">Base</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">Base</span><span class="p">()</span> <span class="k">noexcept</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Derived</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Base</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Derived: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="n">Derived</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ËæìÂá∫: false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Ê†áÂáÜÂ∫ìÂÆπÂô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">vec</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;std::vector&lt;int&gt;: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="k">decltype</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ËæìÂá∫: false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Ê†áÂáÜÂ∫ìÁ±ªÂûãÔºàÂΩìÂÖÉÁ¥†Á±ªÂûã‰∏∫Âπ≥Âá°Á±ªÂûãÊó∂Ôºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">5</span><span class="o">&gt;</span> <span class="n">arr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;std::array&lt;int, 5&gt;: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="k">decltype</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// ËæìÂá∫: true
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>POD</strong></p>
<p>Ê†πÊçÆC++Ê†áÂáÜÔºåPODÁ±ªÂûãÂøÖÈ°ªÊª°Ë∂≥‰ª•‰∏ãÊù°‰ª∂Ôºö</p>
<ol>
<li><strong>Âπ≥Âá°ÁöÑÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºàTrivial Default ConstructorÔºâ</strong>Ôºö</li>
</ol>
<ul>
<li>Á±ªÂûãÊ≤°ÊúâÁî®Êà∑ÂÆö‰πâÁöÑÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºåÊàñËÄÖÂÆÉÁöÑÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÊòØÂπ≥Âá°ÁöÑÔºàÂç≥ÁºñËØëÂô®ÁîüÊàêÁöÑÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞Ôºâ„ÄÇ</li>
</ul>
<ol>
<li><strong>Âπ≥Âá°ÁöÑÊûêÊûÑÂáΩÊï∞ÔºàTrivial DestructorÔºâ</strong>Ôºö</li>
</ol>
<ul>
<li>Á±ªÂûãÊ≤°ÊúâÁî®Êà∑ÂÆö‰πâÁöÑÊûêÊûÑÂáΩÊï∞ÔºåÊàñËÄÖÂÆÉÁöÑÊûêÊûÑÂáΩÊï∞ÊòØÂπ≥Âá°ÁöÑÔºàÂç≥ÁºñËØëÂô®ÁîüÊàêÁöÑÊûêÊûÑÂáΩÊï∞Ôºâ„ÄÇ</li>
</ul>
<ol>
<li><strong>Âπ≥Âá°ÁöÑÊã∑Ë¥ù/ÁßªÂä®Êìç‰ΩúÔºàTrivial Copy/Move OperationsÔºâ</strong>Ôºö</li>
</ol>
<ul>
<li>Á±ªÂûãÊ≤°ÊúâÁî®Êà∑ÂÆö‰πâÁöÑÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞„ÄÅÊã∑Ë¥ùËµãÂÄºËøêÁÆóÁ¨¶„ÄÅÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÊàñÁßªÂä®ËµãÂÄºËøêÁÆóÁ¨¶ÔºåÊàñËÄÖËøô‰∫õÊìç‰ΩúÊòØÂπ≥Âá°ÁöÑÔºàÂç≥ÁºñËØëÂô®ÁîüÊàêÁöÑÊìç‰ΩúÔºâ„ÄÇ</li>
</ul>
<ol>
<li><strong>Ê†áÂáÜÂ∏ÉÂ±ÄÔºàStandard LayoutÔºâ</strong>Ôºö</li>
</ol>
<ul>
<li>
<p>Á±ªÂûãÁöÑÊâÄÊúâÈùûÈùôÊÄÅÊï∞ÊçÆÊàêÂëòÈÉΩÂÖ∑ÊúâÁõ∏ÂêåÁöÑËÆøÈóÆÊéßÂà∂Ôºàpublic, protected, privateÔºâÔºåÂπ∂‰∏îÂü∫Á±ªÂíåÈùûÈùôÊÄÅÊï∞ÊçÆÊàêÂëò‰∏çËÉΩÊúâËôöÂáΩÊï∞ÊàñËôöÂü∫Á±ª„ÄÇ</p>
</li>
<li>
<p>ÊâÄÊúâÈùûÈùôÊÄÅÊï∞ÊçÆÊàêÂëòÈÉΩÂøÖÈ°ªÂÖ∑ÊúâÊ†áÂáÜÂ∏ÉÂ±ÄÁ±ªÂûãÔºàstandard-layout typeÔºâ„ÄÇ</p>
</li>
<li>
<p>Á±ªÂûãÊ≤°ÊúâËôöÂáΩÊï∞ÊàñËôöÂü∫Á±ª„ÄÇ</p>
</li>
<li>
<p><code>**std::is_trivial**</code>ÔºöÊ£ÄÊü•Á±ªÂûãÊòØÂê¶ÊúâÂπ≥Âá°ÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÅÊûêÊûÑÂáΩÊï∞ÂíåÊã∑Ë¥ù/ÁßªÂä®Êìç‰Ωú„ÄÇ</p>
</li>
<li>
<p><code>**std::is_standard_layout**</code>ÔºöÊ£ÄÊü•Á±ªÂûãÊòØÂê¶ÂÖ∑ÊúâÊ†áÂáÜÂ∏ÉÂ±Ä„ÄÇ</p>
</li>
</ul>
<p>Âπ≥Âá°Á±ªÂûãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;type_traits&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Trivial</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">boolalpha</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê£ÄÊü•ÊòØÂê¶‰∏∫Âπ≥Âá°Á±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Trivial is trivial: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivial_v</span><span class="o">&lt;</span><span class="n">Trivial</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ËæìÂá∫: true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê£ÄÊü•ÊòØÂê¶‰∏∫Ê†áÂáÜÂ∏ÉÂ±ÄÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Trivial is standard layout: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_standard_layout_v</span><span class="o">&lt;</span><span class="n">Trivial</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ËæìÂá∫: true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈùûÂπ≥Âá°Á±ªÂûãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;type_traits&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">NonTrivial</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">~</span><span class="n">NonTrivial</span><span class="p">()</span> <span class="k">noexcept</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">NonStandardLayout</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">NonTrivialMember</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">str</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">boolalpha</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê£ÄÊü•ÊòØÂê¶‰∏∫Âπ≥Âá°Á±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;NonTrivial is trivial: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivial_v</span><span class="o">&lt;</span><span class="n">NonTrivial</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ËæìÂá∫: false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;NonStandardLayout is trivial: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivial_v</span><span class="o">&lt;</span><span class="n">NonStandardLayout</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ËæìÂá∫: false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;NonTrivialMember is trivial: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_trivial_v</span><span class="o">&lt;</span><span class="n">NonTrivialMember</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ËæìÂá∫: false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê£ÄÊü•ÊòØÂê¶‰∏∫Ê†áÂáÜÂ∏ÉÂ±ÄÁ±ªÂûã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;NonStandardLayout is standard layout: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_standard_layout_v</span><span class="o">&lt;</span><span class="n">NonStandardLayout</span><span class="o">&gt;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">// ËæìÂá∫: false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÊÄªÁªì-2">ÊÄªÁªì
</h3><div class="table-wrapper"><table>
<thead>
<tr>
<th><strong>ÊûÑÈÄ†ÂáΩÊï∞</strong></th>
<th><strong>Á§∫‰æãÂú∫ÊôØ</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ÈªòËÆ§ÊûÑÈÄ†</strong></td>
<td>ÂàõÂª∫Á©∫Êï∞ÁªÑ</td>
</tr>
<tr>
<td><strong>ÂéüÂßãÊï∞ÁªÑÊûÑÈÄ†</strong></td>
<td>‰ªé C Êï∞ÁªÑÊàñÂÜÖÂ≠òÂùóÂàùÂßãÂåñ</td>
</tr>
<tr>
<td><strong>TArrayView ÊûÑÈÄ†</strong></td>
<td>‰ªéÊï∞ÊçÆËßÜÂõæÔºàÊó†ÊâÄÊúâÊùÉÔºâÂàùÂßãÂåñ</td>
</tr>
<tr>
<td><strong>ÂàùÂßãÂåñÂàóË°®ÊûÑÈÄ†</strong></td>
<td>Âø´ÈÄüÂàùÂßãÂåñÂ∞èÂûãÊï∞ÁªÑ</td>
</tr>
<tr>
<td><strong>Ë∑®ÂàÜÈÖçÂô®Êã∑Ë¥ù</strong></td>
<td>‰∏çÂêåÂÜÖÂ≠òÁ≠ñÁï•ÁöÑÊï∞ÁªÑÈó¥Â§çÂà∂Êï∞ÊçÆ</td>
</tr>
<tr>
<td><strong>ÊôÆÈÄöÊã∑Ë¥ùÊûÑÈÄ†</strong></td>
<td>ÂêåÁ±ªÂûãÊï∞ÁªÑÁöÑÊ∑±Êã∑Ë¥ù</td>
</tr>
<tr>
<td><strong>Â∏¶È¢ùÂ§ñÂÆπÈáèÁöÑÊã∑Ë¥ùÊûÑÈÄ†</strong></td>
<td>È¢ÑÂàÜÈÖçÁ©∫Èó¥‰ª•ÂáèÂ∞ëÂêéÁª≠Êâ©ÂÆπÂºÄÈîÄ</td>
</tr>
<tr>
<td><strong>ÁßªÂä®ÊûÑÈÄ†</strong></td>
<td><strong>ÂáèÂ∞ë‰∏¥Êó∂ÂØπË±°ÁöÑÂºÄÈîÄ</strong></td>
</tr>
</tbody>
</table></div>
<h2 id="Â¢ûÂà†ÊîπÊü•">Â¢ûÂà†ÊîπÊü•
</h2><div class="table-wrapper"><table>
<thead>
<tr>
<th><strong>ÊñπÊ≥ï</strong></th>
<th><strong>ÂäüËÉΩ</strong></th>
<th><strong>Êó∂Èó¥Â§çÊùÇÂ∫¶</strong></th>
<th><strong>Á§∫‰æã</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Push</code> / <code>Add</code></td>
<td>Âú®Êï∞ÁªÑÊú´Â∞æÊ∑ªÂä†ÂÖÉÁ¥†</td>
<td>ÂùáÊëä O(1)</td>
<td><code>TArray&lt;int&gt; arr; ``arr.Add(1);</code></td>
</tr>
<tr>
<td><code>Pop</code></td>
<td>ÁßªÈô§Âπ∂ËøîÂõûÊï∞ÁªÑÊú´Â∞æÂÖÉÁ¥†</td>
<td>O(1)</td>
<td><code>int val = arr.Pop();</code></td>
</tr>
<tr>
<td><code>Top</code> / <code>Last</code></td>
<td>Ëé∑ÂèñÊï∞ÁªÑÊú´Â∞æÂÖÉÁ¥†Ôºà‰∏çÁßªÈô§Ôºâ</td>
<td>O(1)</td>
<td><code>int val = arr.Last();</code></td>
</tr>
<tr>
<td><code>Emplace</code></td>
<td>Âú®Êú´Â∞æÁõ¥Êé•ÊûÑÈÄ†ÂÖÉÁ¥†ÔºàÈÅøÂÖçÊã∑Ë¥ùÔºâ</td>
<td>ÂùáÊëä O(1)</td>
<td><code>arr.Emplace(42);</code></td>
</tr>
</tbody>
</table></div>
<h3 id="pop">Pop
</h3><p><code>Pop</code> ÂáΩÊï∞ÊòØ <code>TArray</code> Á±ª‰∏≠ÁöÑ‰∏Ä‰∏™ÊàêÂëòÂáΩÊï∞ÔºåÁî®‰∫é‰ªéÊï∞ÁªÑ‰∏≠ÁßªÈô§Âπ∂ËøîÂõûÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ</p>
<p>Ëøô‰∏™ÂáΩÊï∞ËøòÊèê‰æõ‰∫ÜÂèØÈÄâÁöÑÊî∂Áº©ÔºàshrinkÔºâÂäüËÉΩÔºåÂÖÅËÆ∏Âú®ÁßªÈô§ÂÖÉÁ¥†ÂêéË∞ÉÊï¥Êï∞ÁªÑÁöÑÂÆπÈáè‰ª•ËäÇÁúÅÂÜÖÂ≠ò„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// * *
</span></span></span><span class="line"><span class="cl"><span class="c1">// *‰ªéÊï∞ÁªÑ‰∏≠ÂºπÂá∫ÂÖÉÁ¥†„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1">// *
</span></span></span><span class="line"><span class="cl"><span class="c1">// * @param allowshrinkÊòØÂê¶ÂÖÅËÆ∏Âú®Âà†Èô§ÂÖÉÁ¥†ÊúüÈó¥Êî∂Áº©Êï∞ÁªÑ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1">// * @ËøîÂõûÂºπÂá∫ÁöÑÂÖÉÁ¥†„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1">// * 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ElementType</span> <span class="nf">Pop</span><span class="p">(</span><span class="n">EAllowShrinking</span> <span class="n">AllowShrinking</span> <span class="o">=</span> <span class="n">EAllowShrinking</span><span class="o">::</span><span class="n">Yes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Á°Æ‰øùÊï∞ÁªÑËá≥Â∞ëÊúâ‰∏Ä‰∏™ÂÖÉÁ¥†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">RangeCheck</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//Ëé∑ÂèñÊï∞ÁªÑ‰∏≠ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÔºàÁ¥¢Âºï‰∏∫ ArrayNum - 1Ôºâ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//‰ΩøÁî® MoveTempIfPossible Â∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®Ôºå‰ªéËÄåÂêØÁî®ÁßªÂä®ËØ≠‰πâ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//ËøôÂèØ‰ª•ÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÊã∑Ë¥ùÊìç‰ΩúÔºåÊèêÈ´òÊÄßËÉΩ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">ElementType</span> <span class="n">Result</span> <span class="o">=</span> <span class="n">MoveTempIfPossible</span><span class="p">(</span><span class="n">GetData</span><span class="p">()[</span><span class="n">ArrayNum</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//‰ªéÊï∞ÁªÑ‰∏≠ÁßªÈô§ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">RemoveAtImpl</span><span class="p">(</span><span class="n">ArrayNum</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">AllowShrinking</span> <span class="o">==</span> <span class="n">EAllowShrinking</span><span class="o">::</span><span class="n">Yes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÈáäÊîæÊú™‰ΩøÁî®ÁöÑÂÜÖÂ≠ò„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ResizeShrink</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">UE_INTRINSIC_CAST</span> <span class="n">FORCEINLINE</span> <span class="k">constexpr</span> <span class="n">std</span><span class="o">::</span><span class="n">remove_reference_t</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;&amp;</span> <span class="n">MoveTempIfPossible</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span> <span class="n">Obj</span><span class="p">)</span> <span class="k">noexcept</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ÂÆö‰πâ‰∏Ä‰∏™Á±ªÂûãÂà´Âêç CastTypeÔºåÂÆÉÊòØÁßªÈô§‰∫ÜÂºïÁî®Â±ûÊÄßÂêéÁöÑ T Á±ªÂûã„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">using</span> <span class="n">CastType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">remove_reference_t</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//Â∞Ü‰º†ÂÖ•ÁöÑÂØπË±° Obj ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®ÔºåÂπ∂ËøîÂõû„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//ËøôÊ†∑ÂÅöÁöÑÁõÆÁöÑÊòØÂêØÁî®ÁßªÂä®ËØ≠‰πâ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="p">(</span><span class="n">CastType</span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="n">Obj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="movetempifpossible-Âè≥ÂÄºÂºïÁî®"><code>MoveTempIfPossible</code> Âè≥ÂÄºÂºïÁî®
</h4><ul>
<li><strong>ÂèÇÊï∞</strong> <code>**T&amp;&amp; Obj**</code>Ôºö‰ΩøÁî®‰∫ÜÈÄöÁî®ÂºïÁî®Ôºàuniversal referenceÔºâÔºåÂèØ‰ª•Êé•ÂèóÂ∑¶ÂÄºÂºïÁî®ÊàñÂè≥ÂÄºÂºïÁî®„ÄÇ</li>
<li><strong>ËøîÂõûÁ±ªÂûã</strong> <code>**std::remove_reference_t&lt;T&gt;&amp;&amp;**</code>ÔºöÁßªÈô§ <code>T</code> ÁöÑÂºïÁî®Â±ûÊÄßÂêéÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®„ÄÇ</li>
</ul>
<p>Â∞Ü‰∏Ä‰∏™ÂºïÁî®ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®Ôºàrvalue referenceÔºâÔºå ËøôÊòØ UE ‰∏≠ <code>std::move</code> ÁöÑÁ≠â‰ª∑ÂÆûÁé∞„ÄÇ</p>
<p>‰∏é <code>MoveTemp</code> ‰∏çÂêåÔºåÂÆÉ‰∏ç‰ºöËøõË°åÈùôÊÄÅÊñ≠Ë®ÄÔºåÂõ†Ê≠§Âú®Ê®°ÊùøÊàñÂÆè‰∏≠‰ΩøÁî®Êó∂Êõ¥Âä†ÁÅµÊ¥ªÔºå‰∏ç‰ºö‰∏≠Êñ≠ÁºñËØë„ÄÇ</p>
<p>Âõ†‰∏∫Âú®Ê®°ÊùøÊàñÂÆè‰∏≠‰ΩøÁî®Êó∂ÔºåÂèÇÊï∞ÁöÑÂÖ∑‰ΩìÁ±ªÂûãÂèØËÉΩ‰∏çÊòéÁ°ÆÔºå‰ΩÜ‰Ω†‰ªçÁÑ∂Â∏åÊúõÂú®ÂèØ‰ª•ÁöÑÊÉÖÂÜµ‰∏ãÂà©Áî®ÁßªÂä®ËØ≠‰πâÔºåËÄå‰∏ç‰∏≠Êñ≠ÁºñËØë„ÄÇ</p>
<h4 id="Â∑¶ÂÄºÂè≥ÂÄº">Â∑¶ÂÄºÂè≥ÂÄº
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyClass</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyClass</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyClass</span><span class="p">(</span><span class="n">MyClass</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">noexcept</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂÆûÁé∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ΩøÁî® MoveTempIfPossible
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">ProcessObject</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span> <span class="n">Obj</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyClass</span> <span class="n">MovedObj</span> <span class="o">=</span> <span class="n">MoveTempIfPossible</span><span class="p">(</span><span class="n">Obj</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyClass</span> <span class="n">Obj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">ProcessObject</span><span class="p">(</span><span class="n">Obj</span><span class="p">);</span> <span class="c1">// Â∑¶ÂÄºÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">ProcessObject</span><span class="p">(</span><span class="n">MyClass</span><span class="p">());</span> <span class="c1">// Âè≥ÂÄºÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>Obj</code> ÊòØ‰∏Ä‰∏™Â∑¶ÂÄºÂºïÁî®„ÄÇ<code>MoveTempIfPossible</code> ‰ºöÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®Ôºå‰ªéËÄåËß¶ÂèëÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞„ÄÇ</li>
<li><code>MyClass()</code> ÊòØ‰∏Ä‰∏™‰∏¥Êó∂ÂØπË±°ÔºàÂè≥ÂÄºÔºâ„ÄÇ<code>MoveTempIfPossible</code> ‰πü‰ºöÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®Ôºå‰ªéËÄåËß¶ÂèëÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞„ÄÇ</li>
</ul>
<h3 id="add">Add
</h3><p>Âú®Êï∞ÁªÑÊú´Â∞æÊ∑ªÂä†‰∏Ä‰∏™Êñ∞È°πÔºåÂèØËÉΩ‰ºöÈáçÊñ∞ÂàÜÈÖçÊï¥‰∏™Êï∞ÁªÑ‰ª•ÂÆπÁ∫≥ÂÆÉ„ÄÇ</p>
<p>ËøîÂõû‰∏Ä‰∏™Á¥¢Âºï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">SizeType</span> <span class="nf">Add</span><span class="p">(</span><span class="k">const</span> <span class="n">ElementType</span><span class="o">&amp;</span> <span class="n">Item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">CheckAddress</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Emplace</span><span class="p">(</span><span class="n">Item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">SizeType</span> <span class="nf">Add</span><span class="p">(</span><span class="n">ElementType</span><span class="o">&amp;&amp;</span> <span class="n">Item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">CheckAddress</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">Emplace</span><span class="p">(</span><span class="n">MoveTempIfPossible</span><span class="p">(</span><span class="n">Item</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Ê£ÄÊü•ÊåáÂÆöÁöÑÂú∞ÂùÄÊòØÂê¶‰∏çÊòØÂÆπÂô®ÂÜÖÂÖÉÁ¥†ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1">// Áî®‰∫éÂú®ÂÆûÁé∞‰∏≠Ê£ÄÊü•ÂºïÁî®ÂèÇÊï∞ÊòØÂê¶‰ºöÂõ†‰∏∫ÂèØËÉΩÁöÑÈáçÊñ∞ÂàÜÈÖçËÄåÂ§±Êïà„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="nf">CheckAddress</span><span class="p">(</span><span class="k">const</span> <span class="n">ElementType</span><span class="o">*</span> <span class="n">Addr</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">checkf</span><span class="p">(</span><span class="n">Addr</span> <span class="o">&lt;</span> <span class="n">GetData</span><span class="p">()</span> <span class="o">||</span> <span class="n">Addr</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">GetData</span><span class="p">()</span> <span class="o">+</span> <span class="n">ArrayMax</span><span class="p">),</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;Attempting to use a container element (%p) which already comes from the container being modified (%p, ArrayMax: %lld, ArrayNum: %lld, SizeofElement: %d)!&#34;</span><span class="p">),</span> <span class="n">Addr</span><span class="p">,</span> <span class="n">GetData</span><span class="p">(),</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">ArrayMax</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">ArrayNum</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ElementType</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="emplace"><strong>Emplace</strong>
</h4><p>Âú®Êï∞ÁªÑÁöÑÊú´Â∞æÊûÑÈÄ†‰∏Ä‰∏™Êñ∞ÂÖÉÁ¥†ÔºåÂèØËÉΩ‰ºöÈáçÊñ∞ÂàÜÈÖçÊï¥‰∏™Êï∞ÁªÑÊù•ÂÆπÁ∫≥ÂÆÉ„ÄÇ</p>
<p>ËøîÂõû‰∏Ä‰∏™Á¥¢Âºï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Constructs a new item at the end of the array, possibly reallocating the whole array to fit.
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param Args  The arguments to forward to the constructor of the new item.
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @return     Index to the new item
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">ArgsType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">SizeType</span> <span class="n">Emplace</span><span class="p">(</span><span class="n">ArgsType</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">Args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Â¢ûÂä†Êï∞ÁªÑÁöÑÂ§ßÂ∞èÔºåÂπ∂ËøîÂõûÊñ∞ÂÖÉÁ¥†Â∞ÜË¶ÅÊèíÂÖ•ÁöÑ‰ΩçÁΩÆÁ¥¢Âºï„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="n">SizeType</span> <span class="n">Index</span> <span class="o">=</span> <span class="n">AddUninitialized</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//GetData() ËøîÂõûÊåáÂêëÊï∞ÁªÑÊï∞ÊçÆÁöÑÊåáÈíàÔºåGetData() + Index ËÆ°ÁÆóÂá∫Êñ∞ÂÖÉÁ¥†Â∫îÊîæÁΩÆÁöÑ‰ΩçÁΩÆ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//‰ΩøÁî® ::new ËøõË°åÂéü‰ΩçÊûÑÈÄ†Ôºàplacement newÔºâÔºå
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//Áõ¥Êé•Âú®ÊåáÂÆöÂÜÖÂ≠ò‰ΩçÁΩÆÊûÑÈÄ†Êñ∞ÂØπË±°ÔºåÈÅøÂÖçÈ¢ùÂ§ñÁöÑÊã∑Ë¥ùÊàñÁßªÂä®Êìç‰Ωú„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//Forward&lt;ArgsType&gt;(Args)... Â∞ÜÂèÇÊï∞ÂÆåÁæéËΩ¨ÂèëÁªôÊûÑÈÄ†ÂáΩÊï∞„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">::</span><span class="k">new</span><span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)(</span><span class="n">GetData</span><span class="p">()</span> <span class="o">+</span> <span class="n">Index</span><span class="p">))</span> <span class="n">ElementType</span><span class="p">(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">ArgsType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Args</span><span class="p">)...);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Index</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">SizeType</span> <span class="nf">AddUninitialized</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Á°Æ‰øùÊï∞ÁªÑÂÜÖÈÉ®Áä∂ÊÄÅÁöÑ‰∏ÄËá¥ÊÄßÔºåÈò≤Ê≠¢ÈùûÊ≥ïÁä∂ÊÄÅ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//checkSlow((ArrayNum &gt;= 0) &amp; (ArrayMax &gt;= ArrayNum)); 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">CheckInvariants</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ArrayNum = ArrayNum + 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="n">USizeType</span> <span class="n">OldNum</span> <span class="o">=</span> <span class="p">(</span><span class="n">USizeType</span><span class="p">)</span><span class="n">ArrayNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="n">USizeType</span> <span class="n">NewNum</span> <span class="o">=</span> <span class="n">OldNum</span> <span class="o">+</span> <span class="p">(</span><span class="n">USizeType</span><span class="p">)</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">ArrayNum</span> <span class="o">=</span> <span class="p">(</span><span class="n">SizeType</span><span class="p">)</span><span class="n">NewNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">NewNum</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">USizeType</span><span class="p">)</span><span class="n">ArrayMax</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Â¶ÇÊûú NewNum Ë∂ÖËøá‰∫Ü ArrayMaxÔºåÂàôË∞ÉÁî® ResizeGrow Â¢ûÂä†Êï∞ÁªÑÁöÑÂÆπÈáè„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ResizeGrow</span><span class="p">((</span><span class="n">SizeType</span><span class="p">)</span><span class="n">OldNum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Ë∞ÉÁî® SlackTrackerNumChanged Êõ¥Êñ∞ÊùæÂºõÔºàslackÔºâ‰ø°ÊÅØ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">SlackTrackerNumChanged</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//ËøîÂõû OldNumÔºåÂç≥Êñ∞ÂÖÉÁ¥†Â∞ÜË¶ÅÊèíÂÖ•ÁöÑ‰ΩçÁΩÆÁ¥¢Âºï„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">OldNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="fprivatetoken">FPrivateToken
</h4><p>ËÆ©TArrayÂèØ‰ª•Ë∞ÉÁî®ÁßÅÊúâÊûÑÈÄ†ÂáΩÊï∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">FMyType</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">FPrivateToken</span> <span class="p">{</span> <span class="k">explicit</span> <span class="nf">FPrivateToken</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// This has an equivalent access level to a private constructor,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// as only friends of FMyType will have access to FPrivateToken,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// but Emplace can legally call it since it&#39;s public.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">explicit</span> <span class="n">FMyType</span><span class="p">(</span><span class="n">FPrivateToken</span><span class="p">,</span> <span class="n">int32</span> <span class="n">Int</span><span class="p">,</span> <span class="kt">float</span> <span class="n">Real</span><span class="p">,</span> <span class="k">const</span> <span class="n">TCHAR</span><span class="o">*</span> <span class="n">String</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="n">FMyType</span><span class="o">&gt;</span> <span class="n">Arr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Arr</span><span class="p">.</span><span class="n">Emplace</span><span class="p">(</span><span class="n">FMyType</span><span class="o">::</span><span class="n">FPrivateToken</span><span class="p">{},</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">3.14f</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;Banana&#34;</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="remove">Remove
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">SizeType</span> <span class="nf">Remove</span><span class="p">(</span><span class="k">const</span> <span class="n">ElementType</span><span class="o">&amp;</span> <span class="n">Item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê£ÄÊü•ÊåáÂÆöÁöÑÂú∞ÂùÄÊòØÂê¶‰∏çÊòØÂÆπÂô®ÂÜÖÂÖÉÁ¥†ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">CheckAddress</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Element is non-const to preserve compatibility with existing code with a non-const operator==() member function
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ÂÖÉÁ¥†ÊòØÈùû const ÁöÑÔºå‰ª•‰øùÊåÅ‰∏éÁé∞Êúâ‰ª£Á†Å‰∏≠ÂÖ∑ÊúâÈùû const operator==() ÊàêÂëòÂáΩÊï∞ÁöÑÂÖºÂÆπÊÄß
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">RemoveAll</span><span class="p">([</span><span class="o">&amp;</span><span class="n">Item</span><span class="p">](</span><span class="n">ElementType</span><span class="o">&amp;</span> <span class="n">Element</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Element</span> <span class="o">==</span> <span class="n">Item</span><span class="p">;</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">PREDICATE_CLASS</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">SizeType</span> <span class="n">RemoveAll</span><span class="p">(</span><span class="k">const</span> <span class="n">PREDICATE_CLASS</span><span class="o">&amp;</span> <span class="n">Predicate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Â¶ÇÊûú‰∏∫Á©∫ÔºåÂàôÁõ¥Êé•ËøîÂõû 0ÔºåÂõ†‰∏∫Ê≤°ÊúâÂÖÉÁ¥†ÂèØ‰ª•ÁßªÈô§„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//OriginalNum ËÆ∞ÂΩïÊï∞ÁªÑÁöÑÂéüÂßãÂ§ßÂ∞è
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="n">SizeType</span> <span class="n">OriginalNum</span> <span class="o">=</span> <span class="n">ArrayNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">OriginalNum</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// nothing to do, loop assumes one item so need to deal with this edge case here
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//ÊåáÂêëÊï∞ÁªÑÊï∞ÊçÆÁöÑÊåáÈíà„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">ElementType</span><span class="o">*</span> <span class="n">Data</span> <span class="o">=</span> <span class="n">GetData</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//WriteIndex ReadIndexÂàÜÂà´Áî®‰∫éÂÜôÂÖ•ÂíåËØªÂèñÊìç‰ΩúÁöÑÁ¥¢Âºï„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">SizeType</span> <span class="n">WriteIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//‰∏çÊñ≠Â¢ûÂä†ÔºåÁõ¥Âà∞ÈÅáÂà∞‰∏éÂΩìÂâçËøêË°åÁ±ªÂûã‰∏çÂêåÁöÑÂÖÉÁ¥†„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">SizeType</span> <span class="n">ReadIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//Ê†πÊçÆÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØÂê¶Êª°Ë∂≥Ë∞ìËØçÔºåÂàùÂßãÂåñ bNotMatch ÂèòÈáè„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//Â¶ÇÊûúbNotMatch = falseÔºåÂàôËØ¥ÊòéÂåπÈÖçÊàêÂäüÔºåÂú®do-while‰∏≠ÁöÑif-else‰ºöÊâßË°åfalseÂàÜÊîØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//elseÂàÜÊîØË∞ÉÁî®DestructItemsÔºåÈîÄÊØÅÂÖÉÁ¥†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//Â¶ÇÊûúbNotMatch = trueÔºåÂåπÈÖçÂ§±Ë¥•Ôºåif-elseÊâßË°åtrueÂàÜÊîØÔºåÁßªÂä®ÂÖÉÁ¥†ÈáçÊñ∞ÊéíÂ∫è
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">bool</span> <span class="n">bNotMatch</span> <span class="o">=</span> <span class="o">!::</span><span class="n">Invoke</span><span class="p">(</span><span class="n">Predicate</span><span class="p">,</span> <span class="n">Data</span><span class="p">[</span><span class="n">ReadIndex</span><span class="p">]);</span> <span class="c1">// use a ! to guarantee it can&#39;t be anything other than zero or one
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="k">do</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//ËÆ∞ÂΩïÂΩìÂâçËøêË°åÁöÑËµ∑Âßã‰ΩçÁΩÆ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">SizeType</span> <span class="n">RunStartIndex</span> <span class="o">=</span> <span class="n">ReadIndex</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="k">while</span> <span class="p">(</span><span class="n">ReadIndex</span> <span class="o">&lt;</span> <span class="n">OriginalNum</span> <span class="o">&amp;&amp;</span> <span class="n">bNotMatch</span> <span class="o">==</span> <span class="o">!::</span><span class="n">Invoke</span><span class="p">(</span><span class="n">Predicate</span><span class="p">,</span> <span class="n">Data</span><span class="p">[</span><span class="n">ReadIndex</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">ReadIndex</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">//ËÆ°ÁÆóÂΩìÂâçËøêË°åÁöÑÈïøÂ∫¶„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">SizeType</span> <span class="n">RunLength</span> <span class="o">=</span> <span class="n">ReadIndex</span> <span class="o">-</span> <span class="n">RunStartIndex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="n">checkSlow</span><span class="p">(</span><span class="n">RunLength</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">bNotMatch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// this was a non-matching run, we need to move it
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="n">WriteIndex</span> <span class="o">!=</span> <span class="n">RunStartIndex</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//Â∞ÜËøô‰∫õÂÖÉÁ¥†ÁßªÂä®Âà∞ WriteIndex ÊåáÂêëÁöÑ‰ΩçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="n">RelocateConstructItems</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="o">&gt;</span><span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)(</span><span class="n">Data</span> <span class="o">+</span> <span class="n">WriteIndex</span><span class="p">),</span> <span class="n">Data</span> <span class="o">+</span> <span class="n">RunStartIndex</span><span class="p">,</span> <span class="n">RunLength</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//Êõ¥Êñ∞ WriteIndexÔºå‰ΩøÂÖ∂ÊåáÂêë‰∏ã‰∏Ä‰∏™ÈúÄË¶ÅÂÜôÂÖ•Êï∞ÊçÆÁöÑ‰ΩçÁΩÆ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">WriteIndex</span> <span class="o">+=</span> <span class="n">RunLength</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// this was a matching run, delete it
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">//ÈîÄÊØÅËøô‰∫õÂÖÉÁ¥†„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">DestructItems</span><span class="p">(</span><span class="n">Data</span> <span class="o">+</span> <span class="n">RunStartIndex</span><span class="p">,</span> <span class="n">RunLength</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">bNotMatch</span> <span class="o">=</span> <span class="o">!</span><span class="n">bNotMatch</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">ReadIndex</span> <span class="o">&lt;</span> <span class="n">OriginalNum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ArrayNum</span> <span class="o">=</span> <span class="n">WriteIndex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">SlackTrackerNumChanged</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//ËøîÂõûË¢´ÁßªÈô§ÁöÑÂÖÉÁ¥†Êï∞ÈáèÔºåÂç≥ÂéüÂßãÊï∞ÁªÑÂ§ßÂ∞èÂáèÂéªÂΩìÂâçÊï∞ÁªÑÂ§ßÂ∞è„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">OriginalNum</span> <span class="o">-</span> <span class="n">ArrayNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>Ê®°ÊùøÂèÇÊï∞</strong> <code>**PREDICATE_CLASS**</code>ÔºöË∞ìËØçÁ±ªÂÆû‰æãÁöÑÁ±ªÂûã„ÄÇ</li>
<li><strong>ÂèÇÊï∞</strong> <code>**Predicate**</code>Ôºö‰∏Ä‰∏™Ë∞ìËØçÂØπË±°ÔºåÁî®‰∫éÂà§Êñ≠Êüê‰∏™ÂÖÉÁ¥†ÊòØÂê¶ÈúÄË¶ÅË¢´ÁßªÈô§„ÄÇ</li>
<li><strong>ËøîÂõûÂÄº</strong> <code>**SizeType**</code>ÔºöËøîÂõûË¢´ÁßªÈô§ÁöÑÂÖÉÁ¥†Êï∞Èáè„ÄÇ</li>
</ul>
<ol>
<li><strong>Ëé∑ÂèñÂéüÂßãÊï∞ÁªÑÂ§ßÂ∞è</strong>Ôºö</li>
</ol>
<ul>
<li>Â¶ÇÊûúÊï∞ÁªÑ‰∏∫Á©∫ÔºåÁõ¥Êé•ËøîÂõû 0„ÄÇ</li>
</ul>
<ol>
<li><strong>ÂàùÂßãÂåñÂèòÈáè</strong>Ôºö</li>
</ol>
<ul>
<li>Ëé∑ÂèñÊï∞ÁªÑÊï∞ÊçÆÊåáÈíà <code>Data</code>„ÄÇ</li>
<li>ÂàùÂßãÂåñËØªÂèñÁ¥¢Âºï <code>ReadIndex</code> ÂíåÂÜôÂÖ•Á¥¢Âºï <code>WriteIndex</code>„ÄÇ</li>
<li>Ê†πÊçÆÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÁä∂ÊÄÅÂàùÂßãÂåñ <code>bNotMatch</code> ÂèòÈáè„ÄÇ</li>
</ul>
<ol>
<li><strong>ÈÅçÂéÜÊï∞ÁªÑ</strong>Ôºö</li>
</ol>
<ul>
<li>‰ΩøÁî® <code>do...while</code> Âæ™ÁéØÈÅçÂéÜÊï∞ÁªÑÔºåÊØèÊ¨°Â§ÑÁêÜ‰∏ÄÊÆµËøûÁª≠ÁöÑÂåπÈÖçÊàñÈùûÂåπÈÖçÂÖÉÁ¥†ÊÆµÔºàËøêË°åÔºâ„ÄÇ</li>
<li><strong>ÂÜÖÂ±ÇÂæ™ÁéØ</strong>ÔºöÊâæÂà∞‰∏ÄÊÆµËøûÁª≠ÁöÑÂåπÈÖçÊàñÈùûÂåπÈÖçÂÖÉÁ¥†„ÄÇ</li>
<li><strong>Â§ÑÁêÜÈùûÂåπÈÖçËøêË°å</strong>ÔºöÂ∞ÜËøô‰∫õÂÖÉÁ¥†ÁßªÂä®Âà∞ <code>WriteIndex</code> ÊåáÂêëÁöÑ‰ΩçÁΩÆÔºåÂπ∂Êõ¥Êñ∞ <code>WriteIndex</code>„ÄÇ</li>
<li><strong>Â§ÑÁêÜÂåπÈÖçËøêË°å</strong>ÔºöÈîÄÊØÅËøô‰∫õÂÖÉÁ¥†„ÄÇ</li>
<li>ÂàáÊç¢ <code>bNotMatch</code> ÁöÑÂÄºÔºåÂáÜÂ§áÂ§ÑÁêÜ‰∏ã‰∏Ä‰∏™ËøêË°å„ÄÇ</li>
</ul>
<ol>
<li><strong>Êõ¥Êñ∞Êï∞ÁªÑÂ§ßÂ∞è</strong>Ôºö</li>
</ol>
<ul>
<li>Êõ¥Êñ∞Êï∞ÁªÑÁöÑÊúâÊïàÂÖÉÁ¥†Êï∞Èáè <code>ArrayNum</code> ‰∏∫ <code>WriteIndex</code>„ÄÇ</li>
</ul>
<ol>
<li><strong>ËøîÂõûÁªìÊûú</strong>Ôºö</li>
</ol>
<ul>
<li>ËøîÂõûË¢´ÁßªÈô§ÁöÑÂÖÉÁ¥†Êï∞Èáè„ÄÇ</li>
</ul>
<h3 id="removeat">RemoveAt
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">RemoveAt</span><span class="p">(</span><span class="n">SizeType</span> <span class="n">Index</span><span class="p">,</span> <span class="n">EAllowShrinking</span> <span class="n">AllowShrinking</span> <span class="o">=</span> <span class="n">EAllowShrinking</span><span class="o">::</span><span class="n">Yes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">RangeCheck</span><span class="p">(</span><span class="n">Index</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">RemoveAtImpl</span><span class="p">(</span><span class="n">Index</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">AllowShrinking</span> <span class="o">==</span> <span class="n">EAllowShrinking</span><span class="o">::</span><span class="n">Yes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Ê†πÊçÆÈúÄË¶Å Áº©Â∞èÊï∞ÁªÑÂ§ßÂ∞è
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ResizeShrink</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">RemoveAtImpl</span><span class="p">(</span><span class="n">SizeType</span> <span class="n">Index</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ëé∑ÂèñË¶ÅÁßªÈô§ÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">ElementType</span><span class="o">*</span> <span class="n">Dest</span> <span class="o">=</span> <span class="n">GetData</span><span class="p">()</span> <span class="o">+</span> <span class="n">Index</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈîÄÊØÅËØ•‰ΩçÁΩÆÁöÑÂÖÉÁ¥†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">DestructItem</span><span class="p">(</span><span class="n">Dest</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">	<span class="c1">// Skip relocation in the common case that there is nothing to move.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Âú®Ê≤°Êúâ‰∏úË•øÂèØÁßªÂä®ÁöÑÊÉÖÂÜµ‰∏ãÔºåË∑≥ËøáÈáçÂÆö‰Ωç„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">SizeType</span> <span class="n">NumToMove</span> <span class="o">=</span> <span class="p">(</span><span class="n">ArrayNum</span> <span class="o">-</span> <span class="n">Index</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">NumToMove</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">RelocateConstructItems</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="o">&gt;</span><span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">Dest</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">NumToMove</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Â∞Ü‰∏ÄÁªÑÂÖÉÁ¥†‰ªé‰∏Ä‰∏™‰ΩçÁΩÆÁßªÂä®Âà∞Âè¶‰∏Ä‰∏™‰ΩçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//‰º†ÂÖ•ÂèÇÊï∞ÊòØ‰∏§‰∏™ÊåáÈíàÔºåÊâÄ‰ª•TCanBitwiseRelocate_VÈÄöËøáÔºåÂàôË∞ÉÁî®ÁöÑÂáΩÊï∞ÊòØ:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//FMemory::Memmove(Dest, Source, sizeof(SourceElementType) * Count);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂáèÂ∞ëÊï∞ÁªÑÁöÑÊúâÊïàÂÖÉÁ¥†Êï∞Èáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="o">--</span><span class="n">ArrayNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Êõ¥Êñ∞ÊùæÂºõ‰ø°ÊÅØÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">SlackTrackerNumChanged</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">MemoryOps</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">DestinationElementType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">SourceElementType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">constexpr</span> <span class="kr">inline</span> <span class="kt">bool</span> <span class="n">TCanBitwiseRelocate_V</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">is_same_v</span><span class="o">&lt;</span><span class="n">DestinationElementType</span><span class="p">,</span> <span class="n">SourceElementType</span><span class="o">&gt;</span> <span class="o">||</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">TIsBitwiseConstructible</span><span class="o">&lt;</span><span class="n">DestinationElementType</span><span class="p">,</span> <span class="n">SourceElementType</span><span class="o">&gt;::</span><span class="n">Value</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="n">SourceElementType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êù°‰ª∂:</p>
<ol>
<li>Â¶ÇÊûú <code>DestinationElementType</code> Âíå <code>SourceElementType</code> ÊòØÁõ∏ÂêåÁöÑÁ±ªÂûã„ÄÇ</li>
<li><code>DestinationElementType</code> ÂèØ‰ª•‰ªé <code>SourceElementType</code> ÈÄê‰ΩçÊûÑÈÄ†ÔºåÂπ∂‰∏î <code>SourceElementType</code> ÊòØÂπ≥Âá°ÂèØÊûêÊûÑÁöÑÔºàtrivially destructibleÔºâ„ÄÇ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span>
</span></span><span class="line"><span class="cl"><span class="k">typename</span> <span class="n">DestinationElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="k">typename</span> <span class="n">SourceElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="k">typename</span> <span class="n">SizeType</span>
</span></span><span class="line"><span class="cl"><span class="n">UE_REQUIRES</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">DestinationElementType</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">SourceElementType</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">MemoryOps</span><span class="o">::</span><span class="n">TCanBitwiseRelocate_V</span><span class="o">&lt;</span><span class="n">DestinationElementType</span><span class="p">,</span> <span class="n">SourceElementType</span><span class="o">&gt;</span><span class="p">)</span> <span class="c1">// the sizeof here should improve the error messages we get when we try to call this function with incomplete types
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">RelocateConstructItems</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">Dest</span><span class="p">,</span> <span class="n">SourceElementType</span><span class="o">*</span> <span class="n">Source</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">Count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">static_assert</span><span class="p">(</span><span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">is_const_v</span><span class="o">&lt;</span><span class="n">SourceElementType</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">&#34;RelocateConstructItems: Source cannot be const&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* All existing UE containers seem to assume trivial relocatability (i.e. memcpy&#39;able) of their members,
</span></span></span><span class="line"><span class="cl"><span class="cm">     * so we&#39;re going to assume that this is safe here.  However, it&#39;s not generally possible to assume this
</span></span></span><span class="line"><span class="cl"><span class="cm">     * in general as objects which contain pointers/references to themselves are not safe to be trivially
</span></span></span><span class="line"><span class="cl"><span class="cm">     * relocated.
</span></span></span><span class="line"><span class="cl"><span class="cm">     *
</span></span></span><span class="line"><span class="cl"><span class="cm">     * However, it is not yet possible to automatically infer this at compile time, so we can&#39;t enable
</span></span></span><span class="line"><span class="cl"><span class="cm">     * different (i.e. safer) implementations anyway. */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">FMemory</span><span class="o">::</span><span class="n">Memmove</span><span class="p">(</span><span class="n">Dest</span><span class="p">,</span> <span class="n">Source</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">SourceElementType</span><span class="p">)</span> <span class="o">*</span> <span class="n">Count</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span>
</span></span><span class="line"><span class="cl"><span class="k">typename</span> <span class="n">DestinationElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="k">typename</span> <span class="n">SourceElementType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="k">typename</span> <span class="n">SizeType</span>
</span></span><span class="line"><span class="cl"><span class="n">UE_REQUIRES</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">DestinationElementType</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">SourceElementType</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">MemoryOps</span><span class="o">::</span><span class="n">TCanBitwiseRelocate_V</span><span class="o">&lt;</span><span class="n">DestinationElementType</span><span class="p">,</span> <span class="n">SourceElementType</span><span class="o">&gt;</span><span class="p">)</span> <span class="c1">// the sizeof here should improve the error messages we get when we try to call this function with incomplete types
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCENOINLINE</span> <span class="kt">void</span> <span class="n">RelocateConstructItems</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">Dest</span><span class="p">,</span> <span class="n">SourceElementType</span><span class="o">*</span> <span class="n">Source</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">Count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">static_assert</span><span class="p">(</span><span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">is_const_v</span><span class="o">&lt;</span><span class="n">SourceElementType</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">&#34;RelocateConstructItems: Source cannot be const&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//ÈÄê‰∏™ÂÖÉÁ¥†Âú∞Ë∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞ÂíåÊûêÊûÑÂáΩÊï∞ËøõË°åÁßªÂä®„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span><span class="n">Count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// We need a typedef here because VC won&#39;t compile the destructor call below if SourceElementType itself has a member called SourceElementType
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">typedef</span> <span class="n">SourceElementType</span> <span class="n">RelocateConstructItemsElementTypeTypedef</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="o">::</span><span class="k">new</span> <span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">Dest</span><span class="p">)</span> <span class="n">DestinationElementType</span><span class="p">((</span><span class="n">SourceElementType</span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="o">*</span><span class="n">Source</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">++</span><span class="p">(</span><span class="n">DestinationElementType</span><span class="o">*&amp;</span><span class="p">)</span><span class="n">Dest</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="n">Source</span><span class="o">++</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">RelocateConstructItemsElementTypeTypedef</span><span class="o">::~</span><span class="n">RelocateConstructItemsElementTypeTypedef</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">--</span><span class="n">Count</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="destructitem">DestructItem
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">ElementType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">DestructItem</span><span class="p">(</span><span class="n">ElementType</span><span class="o">*</span> <span class="n">Element</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Â¶ÇÊûú ElementType ÁöÑÂ§ßÂ∞è‰∏∫ 0ÔºåËØ¥ÊòéËøôÊòØ‰∏Ä‰∏™‰∏çÂÆåÊï¥ÁöÑÁ±ªÂûã„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//ËôΩÁÑ∂ËøôÁßçÊÉÖÂÜµ‰∏çÂ∫îËØ•ÂèëÁîüÔºå‰ΩÜËøôÊÆµ‰ª£Á†ÅÂèØ‰ª•Â∏ÆÂä©ÁîüÊàêÊõ¥ÊúâÊÑè‰πâÁöÑÁºñËØëÈîôËØØ‰ø°ÊÅØ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="nf">constexpr</span> <span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">ElementType</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Should never get here, but this construct should improve the error messages we get when we try to call this function with incomplete types
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">    <span class="c1">//Ê£ÄÊµã‰∏çÊòØÂπ≥Âá°ÂèØÊûêÊûÑÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">else</span> <span class="k">if</span> <span class="nf">constexpr</span> <span class="p">(</span><span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">is_trivially_destructible_v</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="o">&gt;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// We need a typedef here because VC won&#39;t compile the destructor call below if ElementType itself has a member called ElementType
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ÈÅøÂÖçÁºñËØëÂô®Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºàÂ¶Ç ElementType Ëá™Ë∫´Êúâ‰∏Ä‰∏™ÊàêÂëò‰πüÂè´ ElementTypeÔºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//Êó†Ê≥ïÊ≠£Á°ÆËß£ÊûêÊûêÊûÑÂáΩÊï∞Ë∞ÉÁî®ÁöÑÈóÆÈ¢ò„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">typedef</span> <span class="n">ElementType</span> <span class="n">DestructItemsElementTypeTypedef</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">//ÊòæÂºèË∞ÉÁî®ÂØπË±°ÁöÑÊûêÊûÑÂáΩÊï∞ÔºåÈÄöËøá typedef Á°Æ‰øùÊûêÊûÑÂáΩÊï∞Ë∞ÉÁî®ÁöÑËØ≠Ê≥ïÊ≠£Á°Æ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Element</span><span class="o">-&gt;</span><span class="n">DestructItemsElementTypeTypedef</span><span class="o">::~</span><span class="n">DestructItemsElementTypeTypedef</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ•ÂáΩÊï∞ÈíàÂØπÁ±ªÂûã <code>T</code> ËøõË°å‰∫Ü‰ºòÂåñÔºå‰∏ç‰ºöÂä®ÊÄÅÂàÜÊ¥æÊûêÊûÑÂáΩÊï∞Ë∞ÉÁî®ÔºàÂ¶ÇÊûú <code>T</code> ÁöÑÊûêÊûÑÂáΩÊï∞ÊòØËôöÂáΩÊï∞Ôºâ„ÄÇ</p>
<h3 id="top">Top
</h3><p>ËøîÂõûÈ°∂ÈÉ®ÂÖÉÁ¥†ÔºåÂç≥ÊúÄÂêé‰∏Ä‰∏™„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">ElementType</span><span class="o">&amp;</span> <span class="n">Top</span><span class="p">()</span> <span class="n">UE_LIFETIMEBOUND</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nf">Last</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="k">const</span> <span class="n">ElementType</span><span class="o">&amp;</span> <span class="n">Top</span><span class="p">()</span> <span class="k">const</span> <span class="n">UE_LIFETIMEBOUND</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nf">Last</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="last">Last
</h4><p>ËøîÂõûÊï∞ÁªÑ‰∏≠‰ªéÊú´Â∞æÂºÄÂßãËÆ°Êï∞ÁöÑÁ¨¨ n ‰∏™ÂÖÉÁ¥†.</p>
<p>IndexFromTheEndÔºàÂèØÈÄâÔºâÁ¥¢Âºï‰ªéÊï∞ÁªÑÁöÑÊú´Â∞æÔºàÈªòËÆ§= 0Ôºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">ElementType</span><span class="o">&amp;</span> <span class="n">Last</span><span class="p">(</span><span class="n">SizeType</span> <span class="n">IndexFromTheEnd</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">UE_LIFETIMEBOUND</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">RangeCheck</span><span class="p">(</span><span class="n">ArrayNum</span> <span class="o">-</span> <span class="n">IndexFromTheEnd</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nf">GetData</span><span class="p">()[</span><span class="n">ArrayNum</span> <span class="o">-</span> <span class="n">IndexFromTheEnd</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Ëé∑ÂèñÂÄíÊï∞Á¨¨‰∫å‰∏™ÂÖÉÁ¥†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span><span class="o">&amp;</span> <span class="n">secondLastElement</span> <span class="o">=</span> <span class="n">MyArray</span><span class="p">.</span><span class="n">Last</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="sort">Sort
</h3><p><strong>ÂÅáËÆæÈ°πÁ±ªÂûãÂÆö‰πâ‰∫Ü &lt; ËøêÁÆóÁ¨¶ÔºåÂØπÊï∞ÁªÑËøõË°åÊéíÂ∫è„ÄÇ</strong></p>
<p><strong>Ê≥®ÊÑèÔºö</strong></p>
<ul>
<li>Â¶ÇÊûú‰Ω†ÁöÑÊï∞ÁªÑÂåÖÂê´ÂéüÂßãÊåáÈíàÔºåÂÆÉ‰ª¨Â∞ÜÂú®ÊéíÂ∫èËøáÁ®ã‰∏≠Ëá™Âä®Ëß£ÂºïÁî®„ÄÇ</li>
<li>Âõ†Ê≠§Ôºå‰Ω†ÁöÑÊï∞ÁªÑÂ∞ÜÊ†πÊçÆË¢´ÊåáÂêëÁöÑÂÄºËøõË°åÊéíÂ∫èÔºåËÄå‰∏çÊòØÊåáÈíàÊú¨Ë∫´ÁöÑÂÄº„ÄÇ</li>
<li>Â¶ÇÊûúËøô‰∏çÊòØ‰Ω†ÊÉ≥Ë¶ÅÁöÑË°å‰∏∫ÔºåËØ∑Áõ¥Êé•‰ΩøÁî® Algo::Sort(MyArray)„ÄÇ</li>
<li>Ëá™Âä®Ëß£ÂºïÁî®Ë°å‰∏∫‰∏ç‰ºöÂèëÁîüÂú®Êô∫ËÉΩÊåáÈíà‰∏ä„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">Sort</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Algo</span><span class="o">::</span><span class="n">Sort</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="n">TDereferenceWrapper</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="p">,</span> <span class="n">TLess</span><span class="o">&lt;&gt;&gt;</span><span class="p">(</span><span class="n">TLess</span><span class="o">&lt;&gt;</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Algo::Sort‰º†ÂÖ•‰∫Ü*this Âíå ‰∏Ä‰∏™Ë∞ìËØçTDereferenceWrapper</p>
<p>TDereferenceWrapperÂèà‰º†ÂÖ•‰∫Ü ElementType Âíå TLess&lt;&gt;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">class</span> <span class="nc">PREDICATE_CLASS</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">TDereferenceWrapper</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="n">PREDICATE_CLASS</span><span class="o">&amp;</span> <span class="n">Predicate</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">TDereferenceWrapper</span><span class="p">(</span><span class="k">const</span> <span class="n">PREDICATE_CLASS</span><span class="o">&amp;</span> <span class="n">InPredicate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">Predicate</span><span class="p">(</span><span class="n">InPredicate</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/** Pass through for non-pointer types */</span>
</span></span><span class="line"><span class="cl">    <span class="n">FORCEINLINE</span> <span class="kt">bool</span> <span class="nf">operator</span><span class="p">()(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">A</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">B</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Predicate</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">FORCEINLINE</span> <span class="kt">bool</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">A</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">B</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Predicate</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">class</span> <span class="nc">PREDICATE_CLASS</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">TDereferenceWrapper</span><span class="o">&lt;</span><span class="n">T</span><span class="o">*</span><span class="p">,</span> <span class="n">PREDICATE_CLASS</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="n">PREDICATE_CLASS</span><span class="o">&amp;</span> <span class="n">Predicate</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">TDereferenceWrapper</span><span class="p">(</span><span class="k">const</span> <span class="n">PREDICATE_CLASS</span><span class="o">&amp;</span> <span class="n">InPredicate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">Predicate</span><span class="p">(</span><span class="n">InPredicate</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/** Dereference pointers */</span>
</span></span><span class="line"><span class="cl">    <span class="n">FORCEINLINE</span> <span class="kt">bool</span> <span class="nf">operator</span><span class="p">()(</span><span class="n">T</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="n">T</span><span class="o">*</span> <span class="n">B</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Predicate</span><span class="p">(</span><span class="o">*</span><span class="n">A</span><span class="p">,</span> <span class="o">*</span><span class="n">B</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>TLess&lt;&gt;</code>Âè™ÊòØ‰∏™ÊØîÂ§ßÂ∞èÁöÑ‰ªøÂáΩÊï∞ÔºåÈáçËΩΩ‰∫Ü()ËøêÁÆóÁ¨¶ ËøõË°åÊØîÂ§ßÂ∞è</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">TLess</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">U</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">bool</span> <span class="k">operator</span><span class="p">()(</span><span class="n">T</span><span class="o">&amp;&amp;</span> <span class="n">A</span><span class="p">,</span> <span class="n">U</span><span class="o">&amp;&amp;</span> <span class="n">B</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Forward</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">Forward</span><span class="o">&lt;</span><span class="n">U</span><span class="o">&gt;</span><span class="p">(</span><span class="n">B</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="n">TDereferenceWrapper</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="p">,</span> <span class="n">TLess</span><span class="o">&lt;&gt;&gt;</span><span class="err">`</span>  <span class="err">‰∏ãÈù¢ÁÆÄÁß∞‰∏∫`</span><span class="n">TD</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®TDÈáåÈù¢ÔºåÊ≠§Êó∂ T = ElementTypeÔºåPREDICATE_CLASS = TLess&lt;&gt;</p>
<p>Âπ∂‰∏îÊääTLess&lt;&gt;Â≠òÂà∞‰∏Ä‰∏™PredicateÂèòÈáèÈáåÈù¢„ÄÇ</p>
<p><code>TD</code> ‰πüÈáçËΩΩ‰∫Ü()ËøêÁÆóÁ¨¶ÔºåÂú®ÈáåÈù¢ÊâßË°åPredicateÁöÑ()ËøêÁÆóÁ¨¶Ôºå</p>
<p>Ê≠§Êó∂PredicateÊòØTLess&lt;&gt;Á±ªÂûãÔºåÊâÄ‰ª•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">TD(A,B)`-&gt;`TLess(A,B)`-&gt;`ÊØîÂ§ßÂ∞è
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÇ£‰πàAÂíåBÊòØ‰ªéÂì™Êù•ÁöÑÔºüÂÜçÊ∑±ÂÖ•ÂàÜÊûê‰∏ãÂéªÂ∞±Áúã‰∏çÊáÇ‰∫Ü</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">Sort</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Algo</span><span class="o">::</span><span class="n">Sort</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="n">TDereferenceWrapper</span><span class="o">&lt;</span><span class="n">ElementType</span><span class="p">,</span> <span class="n">TLess</span><span class="o">&lt;&gt;&gt;</span><span class="p">(</span><span class="n">TLess</span><span class="o">&lt;&gt;</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Algo::Sort
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">RangeType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">PredicateType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">Sort</span><span class="p">(</span><span class="n">RangeType</span><span class="o">&amp;&amp;</span> <span class="n">Range</span><span class="p">,</span> <span class="n">PredicateType</span> <span class="n">Pred</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">IntroSort</span><span class="p">(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">RangeType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Range</span><span class="p">),</span> <span class="n">MoveTemp</span><span class="p">(</span><span class="n">Pred</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">RangeType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">PredicateType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="n">IntroSort</span><span class="p">(</span><span class="n">RangeType</span><span class="o">&amp;&amp;</span> <span class="n">Range</span><span class="p">,</span> <span class="n">PredicateType</span> <span class="n">Predicate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">AlgoImpl</span><span class="o">::</span><span class="n">IntroSortInternal</span><span class="p">(</span><span class="n">GetData</span><span class="p">(</span><span class="n">Range</span><span class="p">),</span> <span class="n">GetNum</span><span class="p">(</span><span class="n">Range</span><span class="p">),</span> <span class="n">FIdentityFunctor</span><span class="p">(),</span> <span class="n">MoveTemp</span><span class="p">(</span><span class="n">Predicate</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="tdereferencewrapperÁöÑÁâπÂåñ"><code>TDereferenceWrapper</code>ÁöÑÁâπÂåñ
</h4><p>ÊäõÂºÄA„ÄÅB‰∏çË∞àÔºåËøô‰∏™SortÊòØÊÄé‰πàÂõû‰∫ãÔºå‰∏∫‰ªÄ‰πàË¶ÅÂ¶ÇÊ≠§Â§çÊùÇÁöÑÂ±ÇÂ±ÇÂåÖË£ÖÔºå</p>
<p>‰∏Ä‰∏™Êã¨Âè∑ËøêÁÆóÁ¨¶ÈáçËΩΩ Â•ó‰∫Ü Âè¶‰∏Ä‰∏™Êã¨Âè∑ËøêÁÆóÁ¨¶ÁöÑÈáçËΩΩÔºåÊÄé‰πà‰ºöËøôÊ†∑Ôºü</p>
<p><code>TDereferenceWrapper</code> ÁöÑÊ≥®ÈáäÊòØ:Âú®ÊéíÂ∫èÂáΩÊï∞‰∏≠Ëß£ÂºïÁî®ÊåáÈíàÁ±ªÂûãÁöÑÂ∏ÆÂä©Á±ª</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Algo::Sort(ArrayInt, TLess&lt;&gt;());
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ËøôÈáåÁõ¥Êé•‰ΩøÁî®‰∫ÜÈªòËÆ§ÁöÑ <code>TLess&lt;&gt;</code> ÊØîËæÉÂô®„ÄÇ</li>
<li><code>TLess&lt;&gt;</code> ‰ΩøÁî®Ê†áÂáÜÁöÑ <code>&lt;</code> ËøêÁÆóÁ¨¶ËøõË°åÊØîËæÉ„ÄÇ</li>
<li>ÈÄÇÁî®‰∫éÈùûÊåáÈíàÁ±ªÂûãÔºàÂ¶Ç <code>int</code>, <code>float</code>, Ëá™ÂÆö‰πâÁ±ªÁ≠âÔºâ</li>
<li>ÊàñÊô∫ËÉΩÊåáÈíàÔºàÂ¶Ç <code>std::shared_ptr</code>, <code>std::unique_ptr</code>ÔºâÔºåËøô‰∫õÁ±ªÂûãÁöÑÊØîËæÉ‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑËß£ÂºïÁî®Êìç‰Ωú„ÄÇ</li>
</ul>
<p>Â¶ÇÊûúÂØπ <code>TArray&lt;int*&gt;</code> ËøõË°åTLessÊéíÂ∫èÔºåÊéíÂ∫èÂ∞ÜÂü∫‰∫éÊåáÈíàÊú¨Ë∫´ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºåËÄå‰∏çÊòØÊåáÈíàÊâÄÊåáÂêëÁöÑÊï¥Êï∞ÂÄº„ÄÇ</p>
<p>ËøôÂ∞±ÂíåÊúüÊúõ‰∏çÁ¨¶ÂêàÔºåË¶ÅÁöÑÊòØÂØπintÊéíÂ∫èÔºåÂÆûÈôÖ‰∏äÂç¥ÂØπint*ÊéíÂ∫è‰∫ÜÔºåÊéíÂ∫èÂØπË±°‰∏çÊòØÂÄº ËÄåÊòØÊåáÈíà„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Algo::Sort(ArrayInt, TDereferenceWrapper&lt;ElementType, TLess&lt;&gt;&gt;(TLess&lt;&gt;()));
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>ËøôÈáå‰ΩøÁî®‰∫Ü <code>TDereferenceWrapper</code> Êù•ÂåÖË£π <code>TLess&lt;&gt;</code>„ÄÇ</p>
</li>
<li>
<p><code>TDereferenceWrapper</code> ‰ºöÊ†πÊçÆÂÖÉÁ¥†Á±ªÂûãÁöÑ‰∏çÂêåË°å‰∏∫ÊúâÊâÄ‰∏çÂêåÔºö</p>
</li>
<li>
<p>Â¶ÇÊûúÂÖÉÁ¥†ÊòØÊåáÈíàÁ±ªÂûãÔºàÂ¶Ç <code>int*</code>ÔºâÔºåÂàô‰ºöËá™Âä®Ëß£ÂºïÁî®ÊåáÈíàÔºå‰ΩøÂæóÊéíÂ∫èÂü∫‰∫éÊåáÈíàÊâÄÊåáÂêëÁöÑÂÆûÈôÖÂÄº„ÄÇ</p>
</li>
<li>
<p>Â¶ÇÊûúÂÖÉÁ¥†ÊòØÈùûÊåáÈíàÁ±ªÂûãÔºåÂàôÁõ¥Êé•‰ΩøÁî® <code>&lt;</code> ËøêÁÆóÁ¨¶ËøõË°åÊØîËæÉ„ÄÇ</p>
</li>
<li></li>
</ul>
<p>Êó¢ÁÑ∂ÂÆÉËÉΩÂ§üÊ†πÊçÆ <strong>ÊåáÈíàÁ±ªÂûã</strong> Êàñ <strong>ÈùûÊåáÈíàÁ±ªÂûã</strong> ÈöèÊú∫Â∫îÂèòÔºåÈÇ£‰πàÂÆÉÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü</p>
<p>ÂÆÉ‰ºöÊ†πÊçÆTArrayÂ≠òÊîæÁöÑÂÖÉÁ¥†Á±ªÂûãElementType ËøõË°åÂÅèÁâπÂåñÔºå</p>
<p>Â¶ÇÊûúElementTypeÊòØintÔºåÈÇ£‰πàÂ∞±ÈÄâÂèñ‰∏ãÊñπ‰ª£Á†Å‰∏≠ÁöÑ Á¨¨‰∏Ä‰∏™Ê®°ÊùøÁ±ª.</p>
<p>Â¶ÇÊûúElementTypeÊòØint*ÔºåÈÇ£‰πàÂ∞±ÈÄâÂèñ‰∏ãÊñπ‰ª£Á†Å‰∏≠ÁöÑ Á¨¨‰∫å‰∏™Ê®°ÊùøÁ±ª.</p>
<p>Á¨¨‰∫å‰∏™Ê®°ÊùøÁ±ªÊòØ‰∏Ä‰∏™ÂÅèÁâπÂåñÔºåÂΩì‰º†ÂÖ•ÁöÑTÊòØ‰∏Ä‰∏™T*Ê†∑ÂºèÁöÑÊåáÈíàÊó∂ÔºåÁ¨¨‰∫å‰∏™Ê®°ÊùøÁ±ªÂ∞±‰ºöË¢´ÈÄâÊã©.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">class</span> <span class="nc">PREDICATE_CLASS</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">TDereferenceWrapper</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="n">PREDICATE_CLASS</span><span class="o">&amp;</span> <span class="n">Predicate</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">TDereferenceWrapper</span><span class="p">(</span><span class="k">const</span> <span class="n">PREDICATE_CLASS</span><span class="o">&amp;</span> <span class="n">InPredicate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">Predicate</span><span class="p">(</span><span class="n">InPredicate</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="cm">/** Pass through for non-pointer types */</span>
</span></span><span class="line"><span class="cl">    <span class="n">FORCEINLINE</span> <span class="kt">bool</span> <span class="nf">operator</span><span class="p">()(</span><span class="n">T</span><span class="o">&amp;</span> <span class="n">A</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">B</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Predicate</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="n">FORCEINLINE</span> <span class="kt">bool</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">A</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">B</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Predicate</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span> <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">class</span> <span class="nc">PREDICATE_CLASS</span><span class="o">&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">TDereferenceWrapper</span><span class="o">&lt;</span><span class="n">T</span><span class="o">*</span><span class="p">,</span> <span class="n">PREDICATE_CLASS</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="n">PREDICATE_CLASS</span><span class="o">&amp;</span> <span class="n">Predicate</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">TDereferenceWrapper</span><span class="p">(</span><span class="k">const</span> <span class="n">PREDICATE_CLASS</span><span class="o">&amp;</span> <span class="n">InPredicate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">Predicate</span><span class="p">(</span><span class="n">InPredicate</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="cm">/** Dereference pointers */</span>
</span></span><span class="line"><span class="cl">    <span class="n">FORCEINLINE</span> <span class="kt">bool</span> <span class="nf">operator</span><span class="p">()(</span><span class="n">T</span><span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="n">T</span><span class="o">*</span> <span class="n">B</span><span class="p">)</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Predicate</span><span class="p">(</span><span class="o">*</span><span class="n">A</span><span class="p">,</span> <span class="o">*</span><span class="n">B</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Á¨¨‰∫å‰∏™Ê®°ÊùøÁ±ªÁöÑÊã¨Âè∑ËøêÁÆóÁ¨¶ÈáçËΩΩÔºåÂØπA„ÄÅBËøõË°å‰∫ÜËß£ÂºïÁî®„ÄÇ</p>
<p>Âà∞Ê≠§Â∞±ÁúüÁõ∏Â§ßÁôΩ‰∫ÜÔºåÂéüÊù•ÊòØËøô‰πàËÆæËÆ°ÁöÑÔºå</p>
<p>Âú®ÁºñËØëÊó∂Â∞±Ê†πÊçÆTArrayÂ≠òÊîæÁöÑÊï∞ÊçÆÁ±ªÂûã ÈÄâÊã©ÂêàÈÄÇÁöÑÊ®°ÊùøÁ±ªËøõË°åÊéíÂ∫è„ÄÇ</p>
<p>Ê†πÊçÆ ÊåáÈíàÁ±ªÂûã/ÈùûÊåáÈíàÁ±ªÂûãÔºåTDereferenceWrapper‰ªé‰∏ãÈù¢ÁöÑ‰∏§Êù°Ë∑ØÂæÑÈáåÈÄâÊã©:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">TD(A,B)`-&gt;`TLess(A,B)`-&gt;`ÊØîÂ§ßÂ∞è
</span></span><span class="line"><span class="cl">TD(*A,*B)`-&gt;`TLess(A,B)`-&gt;`ÊØîÂ§ßÂ∞è
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="find">Find
</h3><p>‰∏§‰∏™ÁâàÊú¨Ôºå</p>
<p>1.‰º†ÂÖ•ÂÖÉÁ¥†ÂíåÁ¥¢ÂºïÔºåÂà§Êñ≠ Á¥¢ÂºïÂ§ÑÁöÑÂÖÉÁ¥† = ‰º†ÂÖ•ÁöÑÂÖÉÁ¥†</p>
<p>2.‰º†ÂÖ•ÂÖÉÁ¥†ÔºåÈÅçÂéÜÊü•Êâæ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">bool</span> <span class="nf">Find</span><span class="p">(</span><span class="k">const</span> <span class="n">ElementType</span><span class="o">&amp;</span> <span class="n">Item</span><span class="p">,</span> <span class="n">SizeType</span><span class="o">&amp;</span> <span class="n">Index</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Index</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">Find</span><span class="p">(</span><span class="n">Item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Index</span> <span class="o">!=</span> <span class="n">INDEX_NONE</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">SizeType</span> <span class="nf">Find</span><span class="p">(</span><span class="k">const</span> <span class="n">ElementType</span><span class="o">&amp;</span> <span class="n">Item</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ËøîÂõûÊåáÂêëÁ¨¨‰∏Ä‰∏™Êï∞ÁªÑÊù°ÁõÆÁöÑÊåáÈíà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="n">ElementType</span><span class="o">*</span> <span class="n">RESTRICT</span> <span class="n">Start</span> <span class="o">=</span> <span class="n">GetData</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÅçÂéÜÊï∞ÁªÑÔºåÊü•ÊâæÊåáÂÆöÂÖÉÁ¥†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="n">ElementType</span><span class="o">*</span> <span class="n">RESTRICT</span> <span class="n">Data</span> <span class="o">=</span> <span class="n">Start</span><span class="p">,</span> <span class="o">*</span><span class="n">RESTRICT</span> <span class="n">DataEnd</span> <span class="o">=</span> <span class="n">Data</span> <span class="o">+</span> <span class="n">ArrayNum</span><span class="p">;</span> <span class="n">Data</span> <span class="o">!=</span> <span class="n">DataEnd</span><span class="p">;</span> <span class="o">++</span><span class="n">Data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">Data</span> <span class="o">==</span> <span class="n">Item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SizeType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Data</span> <span class="o">-</span> <span class="n">Start</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">INDEX_NONE</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Engine\Source\Runtime\Core\Public\Misc\CoreMiscDefines.h‰∏≠ ÊúâÂÆö‰πâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">enum</span> <span class="p">{</span><span class="n">INDEX_NONE</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâÄ‰ª•Êü•ÊâæÂ§±Ë¥•Êó∂ ËøîÂõû-1.</p>
<h4 id="restrict">RESTRICT
</h4><p>Engine\Source\Runtime\Core\Public\HAL\Platform.h</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#define RESTRICT __restrict
</span></span></code></pre></td></tr></table>
</div>
</div><p>Á±ªÂûãÈôêÂÆöÁ¨¶ÔºåÁî®‰∫éÊåáÈíàÂ£∞ÊòéÔºåË°®Á§∫ËØ•ÊåáÈíàÊòØÂîØ‰∏ÄÊåáÂêëÂÖ∂ÁõÆÊ†áÂØπË±°ÁöÑÊåáÈíà„ÄÇ</p>
<p>ÂΩìËÉΩÁ°Æ‰øùÊüê‰∏™ÊåáÈíà‰∏ç‰ºö‰∏éÂÖ∂‰ªñÊåáÈíàÊåáÂêëÂêå‰∏ÄÂùóÂÜÖÂ≠òÊó∂Ôºå</p>
<p>ÂèØ‰ª•‰ΩøÁî® <code>__restrict</code> Êù•Â∏ÆÂä©ÁºñËØëÂô®ÁîüÊàêÊõ¥È´òÊïàÁöÑ‰ª£Á†Å„ÄÇËøôÂú®Âæ™ÁéØÂíåÂáΩÊï∞ÂèÇÊï∞‰º†ÈÄí‰∏≠ÁâπÂà´ÊúâÁî®Ôºå</p>
<p>Âõ†‰∏∫Ëøô‰∫õÂú∞ÊñπÈÄöÂ∏∏Ê∂âÂèäÂ§ßÈáèÁöÑÂÜÖÂ≠òËÆøÈóÆÊìç‰Ωú„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">__restrict</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">__restrict</span> <span class="n">q</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="c1">// ÁºñËØëÂô®Áü•ÈÅì p Âíå q ÊåáÂêë‰∏çÂêåÁöÑÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">*</span><span class="n">q</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>__restrict</code> ÂëäËØâÁºñËØëÂô®ÊåáÈíà <code>p</code> Âíå <code>q</code> ‰∏ç‰ºöÊåáÂêëÂêå‰∏ÄÂùóÂÜÖÂ≠òÂå∫Âüü„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÁºñËØëÂô®ÂèØ‰ª•ÂÅáËÆæÂØπ <code>*p</code> Âíå <code>*q</code> ÁöÑ‰øÆÊîπ‰∏ç‰ºöÁõ∏‰∫íÂΩ±ÂìçÔºå‰ªéËÄåËøõË°åÊõ¥Â§öÁöÑ‰ºòÂåñÔºå‰æãÂ¶ÇÈáçÊéíÂ∫èÊåá‰ª§ÊàñÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑÂÜÖÂ≠òÂ±èÈöú„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">processArrays</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">__restrict</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">__restrict</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">__restrict</span> <span class="n">c</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">n</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>__restrict</code> ÂÖ≥ÈîÆÂ≠óÂëäËØâÁºñËØëÂô®Ôºö</p>
<ul>
<li><code>a</code>„ÄÅ<code>b</code> Âíå <code>c</code> ÊåáÂêëÁöÑÂÜÖÂ≠òÂå∫Âüü‰∫í‰∏çÈáçÂè†„ÄÇ</li>
<li>Âõ†Ê≠§ÔºåÁºñËØëÂô®ÂèØ‰ª•ÂÅáËÆæÂØπ <code>a[i]</code>„ÄÅ<code>b[i]</code> Âíå <code>c[i]</code> ÁöÑËÆøÈóÆ‰∏ç‰ºö‰∫íÁõ∏Âπ≤Êâ∞„ÄÇ</li>
</ul>
<p><strong>ÊÄªÁªì:</strong></p>
<ul>
<li><code>**__restrict**</code> <strong>ÂÖ≥ÈîÆÂ≠ó</strong>ÔºöÁî®‰∫éÊåáÁ§∫ÁºñËØëÂô®‰ºòÂåñÂÜÖÂ≠òËÆøÈóÆÔºåÂëäËØâÁºñËØëÂô®ÊåáÈíà‰∏ç‰ºöÊåáÂêëÁõ∏ÂêåÁöÑÂÜÖÂ≠òÂå∫Âüü„ÄÇ</li>
<li><strong>‰ΩúÁî®</strong>ÔºöÂÖÅËÆ∏ÁºñËØëÂô®ËøõË°åÊõ¥Â§öÁöÑ‰ºòÂåñÔºåÂ¶ÇÊåá‰ª§ÈáçÊéíÂíåÂêëÈáèÂåñÔºå‰ªéËÄåÊèêÈ´ò‰ª£Á†ÅÊÄßËÉΩ„ÄÇ</li>
<li><strong>Ê≥®ÊÑè‰∫ãÈ°π</strong>ÔºöÁ°Æ‰øùÊåáÈíàÁ°ÆÂÆû‰∏ç‰ºöÊåáÂêëÁõ∏ÂêåÁöÑÂÜÖÂ≠òÂå∫ÂüüÔºåÂê¶ÂàôÂèØËÉΩÂØºËá¥Êú™ÂÆö‰πâË°å‰∏∫„ÄÇ</li>
</ul>
<h3 id="findbypredicate">FindByPredicate
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TGetValue</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="kt">bool</span> <span class="k">operator</span><span class="p">()(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ArrayInt</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">ArrayInt</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">50</span><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">FindValue</span>  <span class="o">=</span> <span class="o">*</span><span class="n">ArrayInt</span><span class="p">.</span><span class="n">FindByPredicate</span><span class="p">([](</span><span class="kt">int</span> <span class="n">x</span><span class="p">){</span><span class="k">return</span> <span class="n">x</span><span class="o">==</span><span class="mi">2</span><span class="p">;});</span>
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">FindValue2</span>  <span class="o">=</span> <span class="o">*</span><span class="n">ArrayInt</span><span class="p">.</span><span class="n">FindByPredicate</span><span class="p">(</span><span class="n">TGetValue</span><span class="p">());</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëá™ÂÆö‰πâÂåπÈÖçÊñπÊ≥ïÔºåÂèØ‰ª•‰º†ÂÖ•‰ªøÂáΩÊï∞„ÄÅlambdaÂáΩÊï∞ Á≠âÁ≠â..</p>
<p>ÊÄª‰πãÂ∞±ÊòØÈÅçÂéÜTArray‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÊâßË°å‰º†ÂÖ•ÁöÑË∞ìËØçÔºåÂ¶ÇÊûúË∞ìËØçÁöÑÁªìÊûú‰∏∫true Âàôif(true) ËøîÂõûData.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Predicate</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">ElementType</span><span class="o">*</span> <span class="n">FindByPredicate</span><span class="p">(</span><span class="n">Predicate</span> <span class="n">Pred</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="n">ElementType</span><span class="o">*</span> <span class="n">RESTRICT</span> <span class="n">Data</span> <span class="o">=</span> <span class="n">GetData</span><span class="p">(),</span> <span class="o">*</span><span class="n">RESTRICT</span> <span class="n">DataEnd</span> <span class="o">=</span> <span class="n">Data</span> <span class="o">+</span> <span class="n">ArrayNum</span><span class="p">;</span> <span class="n">Data</span> <span class="o">!=</span> <span class="n">DataEnd</span><span class="p">;</span> <span class="o">++</span><span class="n">Data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="o">::</span><span class="n">Invoke</span><span class="p">(</span><span class="n">Pred</span><span class="p">,</span> <span class="o">*</span><span class="n">Data</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">Data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="invoke">Invoke
</h4><p>Áî®‰∫éÁªü‰∏ÄË∞ÉÁî®‰∏çÂêåÁ±ªÂûãÁöÑÂèØË∞ÉÁî®ÂØπË±°ÔºàÂ¶ÇÊôÆÈÄöÂáΩÊï∞ÊåáÈíà„ÄÅlambda Ë°®ËææÂºè„ÄÅÊàêÂëòÂáΩÊï∞ÊåáÈíàÁ≠âÔºâ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//ÈÄöÁî®ÂèØË∞ÉÁî®ÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">FuncType</span><span class="p">,</span> <span class="k">typename</span><span class="p">...</span> <span class="n">ArgTypes</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="k">auto</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">FuncType</span><span class="o">&amp;&amp;</span> <span class="n">Func</span><span class="p">,</span> <span class="n">ArgTypes</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">Args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">-&gt;</span> <span class="k">decltype</span><span class="p">(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">FuncType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Func</span><span class="p">)(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">ArgTypes</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Args</span><span class="p">)...))</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Forward</span><span class="o">&lt;</span><span class="n">FuncType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Func</span><span class="p">)(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">ArgTypes</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Args</span><span class="p">)...);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ÊàêÂëòÂèòÈáèËÆøÈóÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">ReturnType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">ObjType</span><span class="p">,</span> <span class="k">typename</span> <span class="n">TargetType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="k">auto</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">ReturnType</span> <span class="n">ObjType</span><span class="o">::*</span><span class="n">pdm</span><span class="p">,</span> <span class="n">TargetType</span><span class="o">&amp;&amp;</span> <span class="n">Target</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">-&gt;</span> <span class="k">decltype</span><span class="p">(</span><span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">DereferenceIfNecessary</span><span class="o">&lt;</span><span class="n">ObjType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">TargetType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Target</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">Target</span><span class="p">).</span><span class="o">*</span><span class="n">pdm</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">DereferenceIfNecessary</span><span class="o">&lt;</span><span class="n">ObjType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">TargetType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Target</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">Target</span><span class="p">).</span><span class="o">*</span><span class="n">pdm</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ÊàêÂëòÂáΩÊï∞Ë∞ÉÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span>
</span></span><span class="line"><span class="cl"><span class="k">typename</span>    <span class="n">PtrMemFunType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="k">typename</span>    <span class="n">TargetType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="k">typename</span><span class="p">...</span> <span class="n">ArgTypes</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="k">typename</span>    <span class="n">ObjType</span> <span class="o">=</span> <span class="n">TMemberFunctionPtrOuter_T</span><span class="o">&lt;</span><span class="n">PtrMemFunType</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="k">auto</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">PtrMemFunType</span> <span class="n">PtrMemFun</span><span class="p">,</span> <span class="n">TargetType</span><span class="o">&amp;&amp;</span> <span class="n">Target</span><span class="p">,</span> <span class="n">ArgTypes</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">Args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">-&gt;</span> <span class="k">decltype</span><span class="p">((</span><span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">DereferenceIfNecessary</span><span class="o">&lt;</span><span class="n">ObjType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">TargetType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Target</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">Target</span><span class="p">).</span><span class="o">*</span><span class="n">PtrMemFun</span><span class="p">)(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">ArgTypes</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Args</span><span class="p">)...))</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">DereferenceIfNecessary</span><span class="o">&lt;</span><span class="n">ObjType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">TargetType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Target</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">Target</span><span class="p">).</span><span class="o">*</span><span class="n">PtrMemFun</span><span class="p">)(</span><span class="n">Forward</span><span class="o">&lt;</span><span class="n">ArgTypes</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Args</span><span class="p">)...);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏âÁßçÂΩ¢ÊÄÅÔºåÂàÜÂà´ÊòØ <strong>ÈÄöÁî®ÂèØË∞ÉÁî®ÂØπË±°„ÄÅÊàêÂëòÂèòÈáèËÆøÈóÆ„ÄÅÊàêÂëòÂáΩÊï∞Ë∞ÉÁî®</strong></p>
<p>Âú®ÂâçÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå<code>FindByPredicate</code>‰º†ÂÖ•‰∫Ü‰∏Ä‰∏™lambdaË°®ËææÂºè ÔºåÂèàÊµãËØï‰∫ÜÈáçËΩΩ‰∫ÜÊã¨Âè∑ËøêÁÆóÁ¨¶ÁöÑ‰ªøÂáΩÊï∞Á±ª.</p>
<p>Ëøô‰∫õÊÉÖÂÜµÈÉΩÊòØÈÄöËøáÁ¨¨‰∏Ä‰∏™ÁâàÊú¨ <code>ÈÄöÁî®ÂèØË∞ÉÁî®ÂØπË±°</code> ËøõË°åË∞ÉÁî®ÁöÑ.</p>
<h4 id="forward">Forward
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">UE_INTRINSIC_CAST</span> <span class="n">FORCEINLINE</span> <span class="k">constexpr</span> <span class="n">T</span><span class="o">&amp;&amp;</span> <span class="n">Forward</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">remove_reference_t</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">Obj</span><span class="p">)</span> <span class="k">noexcept</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="n">Obj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">UE_INTRINSIC_CAST</span> <span class="n">FORCEINLINE</span> <span class="k">constexpr</span> <span class="n">T</span><span class="o">&amp;&amp;</span> <span class="n">Forward</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">remove_reference_t</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;&amp;</span> <span class="n">Obj</span><span class="p">)</span> <span class="k">noexcept</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="n">Obj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÂÆåÁæéËΩ¨Âèë</strong></p>
<p>Áî®‰∫éÂú®ÂáΩÊï∞Ë∞ÉÁî®ËøáÁ®ã‰∏≠‰øùÁïôÂèÇÊï∞ÁöÑÂÄºÁ±ªÂà´Ôºàvalue categoryÔºâÔºåÂç≥‰øùÊåÅÂèÇÊï∞ÊòØÂ∑¶ÂÄºËøòÊòØÂè≥ÂÄºÁöÑÁâπÊÄß„ÄÇ</p>
<p>Ëøô‰ΩøÂæóÂáΩÊï∞ÂèØ‰ª•Â∞ÜÂèÇÊï∞‚ÄúÂÆåÁæé‚ÄùÂú∞ËΩ¨ÂèëÁªôÂÖ∂‰ªñÂáΩÊï∞ÔºåËÄå‰∏ç‰ºöÂºïÂÖ•‰∏çÂøÖË¶ÅÁöÑÊã∑Ë¥ùÊàñËΩ¨Êç¢„ÄÇ</p>
<ul>
<li><strong>Â∑¶ÂÄºÂºïÁî®</strong>ÔºöÂΩì‰º†ÂÖ•Â∑¶ÂÄºÊó∂Ôºå<code>Forward</code> ËøîÂõûÂ∑¶ÂÄºÂºïÁî®„ÄÇ</li>
<li><strong>Âè≥ÂÄºÂºïÁî®</strong>ÔºöÂΩì‰º†ÂÖ•Âè≥ÂÄºÊó∂Ôºå<code>Forward</code> ËøîÂõûÂè≥ÂÄºÂºïÁî®„ÄÇ</li>
</ul>
<p><strong>‰∏áËÉΩÂºïÁî® T&amp;&amp;</strong></p>
<p>Ê†πÊçÆ‰º†ÂÖ•ÁöÑÂèÇÊï∞Á±ªÂûãÊé®ÂØº‰∏∫Â∑¶ÂÄºÂºïÁî®ÊàñÂè≥ÂÄºÂºïÁî®„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">foo</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span> <span class="n">param</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">process</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Processing: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Func</span><span class="p">,</span> <span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">wrapper</span><span class="p">(</span><span class="n">Func</span><span class="o">&amp;&amp;</span> <span class="n">func</span><span class="p">,</span> <span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰ΩøÁî® std::forward ËøõË°åÂÆåÁæéËΩ¨Âèë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Func</span><span class="o">&gt;</span><span class="p">(</span><span class="n">func</span><span class="p">)(</span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)...);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∑¶ÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//std::forward&lt;int&amp;&gt;(value) Â∞Ü value ‰Ωú‰∏∫Â∑¶ÂÄºÂºïÁî®ËΩ¨ÂèëÁªô process„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">wrapper</span><span class="p">(</span><span class="n">process</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Âè≥ÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//std::forward&lt;int&amp;&amp;&gt;(100) Â∞Ü 100 ‰Ωú‰∏∫Âè≥ÂÄºÂºïÁî®ËΩ¨ÂèëÁªô process„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">wrapper</span><span class="p">(</span><span class="n">process</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyClass</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">MyClass</span><span class="o">&gt;</span> <span class="n">create</span><span class="p">(</span><span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">MyClass</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)...);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyClass</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">)</span> <span class="o">:</span> <span class="n">x_</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">y_</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">y_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">obj1</span> <span class="o">=</span> <span class="n">MyClass</span><span class="o">::</span><span class="n">create</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">);</span>  <span class="c1">// Âè≥ÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">MyClass</span><span class="o">::</span><span class="n">create</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mf">2.71</span><span class="p">);</span>   <span class="c1">// Â∑¶ÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>create</code> ÂáΩÊï∞ÊòØ‰∏Ä‰∏™Â∑•ÂéÇÂáΩÊï∞ÔºåÊé•Âèó‰ªªÊÑèÊï∞ÈáèÁöÑÂèÇÊï∞Âπ∂‰ΩøÁî® <code>std::make_unique</code> ÂàõÂª∫ <code>MyClass</code> ÂØπË±°„ÄÇ</li>
<li>‰ΩøÁî® <code>std::forward&lt;Args&gt;(args)...</code> Êù•ÂÆåÁæéËΩ¨ÂèëÊûÑÈÄ†ÂèÇÊï∞ÔºåÁ°Æ‰øùÂÆÉ‰ª¨ÁöÑÂÄºÁ±ªÂà´Âæó‰ª•‰øùÁïô„ÄÇ</li>
</ul>
<h3 id="reserve">Reserve
</h3><p>‰øùÁïôÂÜÖÂ≠òÔºå‰ΩøÊï∞ÁªÑËá≥Â∞ëÂèØ‰ª•ÂåÖÂê´NumberÂÖÉÁ¥†„ÄÇ</p>
<p>Number-ÂàÜÈÖçÂêéÊï∞ÁªÑÂ∫îËØ•ËÉΩÂ§üÂåÖÂê´ÁöÑÂÖÉÁ¥†Êï∞Èáè„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="nf">Reserve</span><span class="p">(</span><span class="n">SizeType</span> <span class="n">Number</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">checkSlow</span><span class="p">(</span><span class="n">Number</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">Number</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Cast to USizeType first to prevent sign extension on negative sizes, producing unusually large values.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">UE</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Private</span><span class="o">::</span><span class="n">OnInvalidArrayNum</span><span class="p">((</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">)(</span><span class="n">USizeType</span><span class="p">)</span><span class="n">Number</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">Number</span> <span class="o">&gt;</span> <span class="n">ArrayMax</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ResizeTo</span><span class="p">(</span><span class="n">Number</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="init">Init
</h3><p>ËÆæÁΩÆÊï∞ÁªÑÁöÑÂ§ßÂ∞èÔºåÁî®ÁªôÂÆöÁöÑÂÖÉÁ¥†Â°´ÂÖÖÂÆÉ„ÄÇ</p>
<p>Element-Áî®Êù•Â°´ÂÖÖÊï∞ÁªÑÁöÑÂÖÉÁ¥†„ÄÇ</p>
<p>Number-ÂàÜÈÖçÂêéÊï∞ÁªÑÂ∫îËØ•ËÉΩÂ§üÂåÖÂê´ÁöÑÂÖÉÁ¥†Êï∞Èáè„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">Init</span><span class="p">(</span><span class="k">const</span> <span class="n">ElementType</span><span class="o">&amp;</span> <span class="n">Element</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">Number</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Empty</span><span class="p">(</span><span class="n">Number</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="n">SizeType</span> <span class="n">Index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">Index</span> <span class="o">&lt;</span> <span class="n">Number</span><span class="p">;</span> <span class="o">++</span><span class="n">Index</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Add</span><span class="p">(</span><span class="n">Element</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂÖ∂ÂÆÉÂáΩÊï∞">ÂÖ∂ÂÆÉÂáΩÊï∞
</h2><h3 id="toptional">TOptional
</h3><p><a class="link" href="https://benui.ca/unreal/toptional/#doggy-example"  target="_blank" rel="noopener"
    >Why TOptional is my new favourite tool</a></p>
<p><strong>TOptional‰∏ªË¶ÅÂäüËÉΩ:</strong></p>
<p>Ë°®Á§∫Â≠òÂú®Êàñ‰∏çÂ≠òÂú®ÁöÑÂÄº„ÄÇ</p>
<p>Êèê‰æõÁ±ªÂûãÂÆâÂÖ®ÁöÑÊñπÂºèÊù•Â§ÑÁêÜÂèØËÉΩÁº∫Â§±ÁöÑÂÄº„ÄÇ</p>
<p>Êèê‰æõ‰∏∞ÂØåÁöÑÊìç‰ΩúÊé•Âè£Êù•Ê£ÄÊü•ÊòØÂê¶ÊúâÂÄº„ÄÅËé∑ÂèñÂÄº‰ª•ÂèäÂ§ÑÁêÜÊ≤°ÊúâÂÄºÁöÑÊÉÖÂÜµ„ÄÇ</p>
<p>Á±ª‰ºº‰∫éC++Ê†áÂáÜÂ∫ì‰∏≠ÁöÑ std::optional„ÄÇÂÆÉÁî®‰∫éË°®Á§∫‰∏Ä‰∏™ÂÄºÂèØËÉΩÂ≠òÂú®Êàñ‰∏çÂ≠òÂú®ÁöÑÁä∂ÊÄÅ„ÄÇTOptional Êèê‰æõ‰∫Ü‰∏ÄÁßçÂÆâÂÖ®‰∏îÁ±ªÂûãÂÆâÂÖ®ÁöÑÊñπÂºèÊù•Â§ÑÁêÜÂèØÈÄâÂÄºÔºåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÂéüÂßãÊåáÈíàÊàñÁâπÊÆäÊ†áËÆ∞ÂÄºÔºàÂ¶Ç -1 Êàñ nullptrÔºâÊù•Ë°®Á§∫Áº∫Â§±ÂÄºÁöÑÂ∏∏ËßÅÈóÆÈ¢ò„ÄÇ</p>
<p><strong>Èõ∂È¢ùÂ§ñÂÜÖÂ≠òÂºÄÈîÄ:</strong>  	TOptional<TArray> ÁöÑÂ§ßÂ∞è‰∏é TArray Áõ∏ÂêåÔºåÊó†ÈúÄÂ≠òÂÇ®È¢ùÂ§ñÁä∂ÊÄÅÊ†áÂøó„ÄÇ</p>
<p><strong>‰æµÂÖ•ÂºèÊìç‰ΩúÈ´òÊïàÊÄß:</strong>	Áõ¥Êé•ÈÄöËøá TArray ÂÜÖÈÉ®Â≠óÊÆµÊ†áËÆ∞Áä∂ÊÄÅÔºåÊó†ËøêË°åÊó∂ÊÄßËÉΩÊçüÂ§±„ÄÇ</p>
<p><strong>Á±ªÂûãÂÆâÂÖ®:</strong>			‰ªÖÂÖÅËÆ∏ TOptional ÈÄöËøáÂèãÂÖÉËÆøÈóÆ FIntrusiveUnsetOptionalState ÊûÑÈÄ†ÂáΩÊï∞„ÄÇ</p>
<p>TArray ‰∏≠ÁöÑ‰æµÂÖ•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FIntrusiveUnsetOptionalStateÊòØ‰∏Ä‰∏™Áî®‰∫é‰æµÂÖ•ÂºèÊï∞ÊçÆÁªìÊûÑÁöÑËæÖÂä©Â∑•ÂÖ∑Á±ª</span><span class="err">Ôºå‰∏ªË¶ÅÁõÆÁöÑÊòØÁÆ°ÁêÜÊï∞ÊçÆÁªìÊûÑ‰∏≠ÂÖÉÁ¥†ÁöÑÂèØÈÄâÁä∂ÊÄÅÊ†áËÆ∞„ÄÇ</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÈùôÊÄÅÊ†áËÆ∞ÔºåÂëäÁü• TOptional Ê≠§Á±ªÂûãÔºàTArrayÔºâÊîØÊåÅ‰æµÂÖ•ÂºèÊú™ËÆæÁΩÆÁä∂ÊÄÅ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">constexpr</span> <span class="k">static</span> <span class="kt">bool</span> <span class="n">bHasIntrusiveUnsetOptionalState</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ÊåáÂÆöÁî®‰∫éÊ†áËÆ∞ÁöÑÁ±ªÂûãÔºàÊ≠§Â§Ñ‰∏∫ TArray Ëá™Ë∫´Ôºâ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">using</span> <span class="n">IntrusiveUnsetOptionalStateType</span> <span class="o">=</span> <span class="n">TArray</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ÂàõÂª∫‰∏Ä‰∏™ÁâπÊÆäÁä∂ÊÄÅÁöÑ TArrayÔºåÈÄöËøá ArrayMax = -1 Ë°®Á§∫Êú™ÂàùÂßãÂåñ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">explicit</span> <span class="nf">TArray</span><span class="p">(</span><span class="n">FIntrusiveUnsetOptionalState</span> <span class="n">Tag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="o">:</span> <span class="n">ArrayNum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">,</span> <span class="n">ArrayMax</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰ΩøÁî® ArrayMax = -1 Ê†áËÆ∞Êú™ËÆæÁΩÆÁä∂ÊÄÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// Use ArrayMax == -1 as our intrusive state so that the destructor still works without change, as it doesn&#39;t use ArrayMax.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂÖÅËÆ∏ TOptional Ê£ÄÊü• TArray ÊòØÂê¶Â§Ñ‰∫éÊú™ËÆæÁΩÆÁä∂ÊÄÅ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="n">FIntrusiveUnsetOptionalState</span> <span class="n">Tag</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">ArrayMax</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩøÁî®‰∏æ‰æã1:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"> <span class="c1">//Â£∞Êòé‰∏Ä‰∏™Êú™ËÆæÁΩÆÁöÑ TOptional&lt;TArray&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TOptional</span><span class="o">&lt;</span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;&gt;</span> <span class="n">OptionalArray</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Ê£ÄÊü•ÊòØÂê¶Êú™ËÆæÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">OptionalArray</span><span class="p">.</span><span class="n">IsSet</span><span class="p">())</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// ËæìÂá∫ÔºöÊú™ÂàùÂßãÂåñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogTemp</span><span class="p">,</span> <span class="n">Warning</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;OptionalArray is unset.&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ËµãÂÄº‰∏Ä‰∏™ÊúâÊïàÁöÑ TArray
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">OptionalArray</span> <span class="o">=</span> <span class="n">TArray</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Ê£ÄÊü•Áä∂ÊÄÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="n">OptionalArray</span><span class="p">.</span><span class="n">IsSet</span><span class="p">())</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// ËæìÂá∫ÔºöÂÖÉÁ¥†Êï∞Èáè‰∏∫3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogTemp</span><span class="p">,</span> <span class="n">Warning</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;Element count: %d&#34;</span><span class="p">),</span> <span class="n">OptionalArray</span><span class="o">-&gt;</span><span class="n">Num</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰æã2Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;Misc/Optional.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;UObject/ObjectMacros.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">ExampleUsageOfTOptional</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂÆö‰πâ‰∏Ä‰∏™ TOptional&lt;int&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">TOptional</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">optionalInt</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàùÂßãÂåñ‰∏∫ÊúâÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">TOptional</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">optionalIntWithValue</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">optionalIntWithValue</span><span class="p">.</span><span class="n">IsSet</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogTemp</span><span class="p">,</span> <span class="n">Log</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;optionalIntWithValue has a value: %d&#34;</span><span class="p">),</span> <span class="n">optionalIntWithValue</span><span class="p">.</span><span class="n">GetValue</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàùÂßãÂåñ‰∏∫Êó†ÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">TOptional</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">optionalIntWithoutValue</span> <span class="o">=</span> <span class="n">TOptional</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">optionalIntWithoutValue</span><span class="p">.</span><span class="n">IsSet</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogTemp</span><span class="p">,</span> <span class="n">Log</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;optionalIntWithoutValue does not have a value&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰ΩøÁî® GetValueOr Êèê‰æõÈªòËÆ§ÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="n">optionalIntWithoutValue</span><span class="p">.</span><span class="n">GetValueOr</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogTemp</span><span class="p">,</span> <span class="n">Log</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;DefaultValue is: %d&#34;</span><span class="p">),</span> <span class="n">defaultValue</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈáçÁΩÆ‰∏∫Êó†ÂÄºÁä∂ÊÄÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">optionalIntWithValue</span><span class="p">.</span><span class="n">Reset</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">optionalIntWithValue</span><span class="p">.</span><span class="n">IsSet</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogTemp</span><span class="p">,</span> <span class="n">Log</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;optionalIntWithValue has been reset and does not have a value&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ËÆæÁΩÆÊñ∞ÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">optionalIntWithValue</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">optionalIntWithValue</span><span class="p">.</span><span class="n">IsSet</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">UE_LOG</span><span class="p">(</span><span class="n">LogTemp</span><span class="p">,</span> <span class="n">Log</span><span class="p">,</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;optionalIntWithValue now has a new value: %d&#34;</span><span class="p">),</span> <span class="n">optionalIntWithValue</span><span class="p">.</span><span class="n">GetValue</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="getdata">GetData
</h3><p><code>GetData</code> ËøîÂõûÊåáÂêëÁ¨¨‰∏Ä‰∏™Êï∞ÁªÑÊù°ÁõÆÁöÑÊåáÈíàÔºåÂ¶ÇÊûúArrayMax == 0ÔºåÂàôËøîÂõûÊåáÂêënullptrÁöÑÊåáÈíà„ÄÇ</p>
<p>‰ª•‰∏ãÊñáÊú¨‰∏≠ ÂáΩÊï∞ÁöÑËß£ÈáäÈ°∫Â∫è Â∞±ÊòØ ÂáΩÊï∞ÁöÑË∞ÉÁî®È°∫Â∫è.</p>
<p>GetData()-&gt;GetAllocation()-&gt;GetAllocation()</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">ElementType</span><span class="o">*</span> <span class="nf">GetData</span><span class="p">()</span> <span class="n">UE_LIFETIMEBOUND</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">ElementType</span><span class="o">*</span><span class="p">)</span><span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">GetAllocation</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™ÂáΩÊï∞ÈÄöËøáË∞ÉÁî® <code>AllocatorInstance.GetAllocation()</code> Ëé∑ÂèñÂàÜÈÖçÁöÑÂÜÖÂ≠òÂùóÔºå</p>
<p>Âπ∂Â∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫ <code>ElementType*</code> Á±ªÂûãÔºå‰ªéËÄåËøîÂõûÊåáÂêëÊï∞ÁªÑÊï∞ÊçÆÁöÑÊåáÈíà„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">ElementType</span><span class="o">*</span> <span class="nf">GetAllocation</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">ElementType</span><span class="o">*</span><span class="p">)</span><span class="n">ForAnyElementType</span><span class="o">::</span><span class="n">GetAllocation</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>GetAllocation</code> ÂáΩÊï∞ÊòØ <code>AllocatorInstance</code> ÁöÑÊàêÂëòÂáΩÊï∞ÔºåË¥üË¥£ËøîÂõûÂÆûÈôÖÂàÜÈÖçÁöÑÂÜÖÂ≠òÂùó„ÄÇ</p>
<p>Âú®Ëøô‰∏™ÂáΩÊï∞‰∏≠Ôºå<code>ForAnyElementType::GetAllocation()</code> Ë¢´Ë∞ÉÁî®Êù•Ëé∑ÂèñÂÆûÈôÖÁöÑÂÜÖÂ≠òÂùóÔºå</p>
<p>Âπ∂Â∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫ <code>ElementType*</code> Á±ªÂûã„ÄÇ</p>
<p>ÊúÄÁªàÔºå<code>ForAnyElementType::GetAllocation()</code> Ë∞ÉÁî®‰∫ÜÂè¶‰∏Ä‰∏™ <code>GetAllocation</code> ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">FScriptContainerElement</span><span class="o">*</span> <span class="nf">GetAllocation</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//----------------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cm">/** A type which is used to represent a script type that is unknown at compile time. */</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">FScriptContainerElement</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl"><span class="n">FScriptContainerElement</span><span class="o">*</span> <span class="n">Data</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÁöÑ <code>Data</code> ÊòØ‰∏Ä‰∏™ÊåáÂêë <code>FScriptContainerElement</code> Á±ªÂûãÁöÑÊåáÈíà.</p>
<p><code>FScriptContainerElement</code> ÊòØ‰∏Ä‰∏™Á©∫ÁªìÊûÑ‰ΩìÔºå‰∏ªË¶ÅÁî®‰∫éË°®Á§∫‰∏ÄÁßçÂú®ÁºñËØëÊó∂Êú™Áü•ÁöÑÂÖ∑‰ΩìÁ±ªÂûã„ÄÇ</p>
<p><strong>ÊÄªÁªì:</strong> GetData()ÊúÄÁªàËøîÂõûÁöÑÊòØ‰∏Ä‰∏™Data</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">+-------------------+
</span></span><span class="line"><span class="cl">|  MyArray          |
</span></span><span class="line"><span class="cl">+-------------------+
</span></span><span class="line"><span class="cl">|  AllocatorInstance|
</span></span><span class="line"><span class="cl">|  +---------------+|
</span></span><span class="line"><span class="cl">|  |  Data         |---&gt; [10, 20, 30]  (ÊåáÂêëÂÆûÈôÖÂ≠òÂÇ®ÂÖÉÁ¥†ÁöÑÂÜÖÂ≠òÂùó)
</span></span><span class="line"><span class="cl">|  +---------------+|
</span></span><span class="line"><span class="cl">|  ArrayNum: 3      |
</span></span><span class="line"><span class="cl">|  ArrayMax: 4      |
</span></span><span class="line"><span class="cl">+-------------------+
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Data</code> ÊòØ <code>AllocatorInstance</code> ‰∏≠ÁöÑ‰∏Ä‰∏™ÊàêÂëòÂèòÈáèÔºåÊåáÂêëÂÆûÈôÖÂ≠òÂÇ®Êï∞ÁªÑÂÖÉÁ¥†ÁöÑÂÜÖÂ≠òÂùó„ÄÇ</p>
<p>Ëøô‰∏™ÂÜÖÂ≠òÂùóÈÄöÂ∏∏ÊòØÂú®Â†Ü‰∏äÂàÜÈÖçÁöÑÔºåÂπ∂‰∏îÁî± <code>AllocatorInstance</code> ËøõË°åÁÆ°ÁêÜ„ÄÇ</p>
<p><code>GetData()</code> ÂáΩÊï∞‰ºöÈÄöËøá <code>AllocatorInstance.GetAllocation()</code> ËøîÂõû <code>Data</code> ÊåáÈíàÔºå</p>
<p>Âç≥ÊåáÂêë <code>[10, 20, 30]</code> Ëøô‰∏™ÂÜÖÂ≠òÂùóÁöÑÈ¶ñÂú∞ÂùÄ„ÄÇ</p>
<h3 id="gettypesize">GetTypeSize
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="k">static</span> <span class="k">constexpr</span> <span class="n">uint32</span> <span class="nf">GetTypeSize</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ElementType</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ElementTypeÂ∞±ÊòØTArray<int32>‰∏≠ÁöÑint32ÔºåÁõ∏ÂΩì‰∫ésizeof(int32)</p>
<h3 id="getslack">GetSlack
</h3><p>ËøîÂõûÊ≠§Êï∞ÁªÑ‰∏≠ÁöÑÈó≤ÁΩÆÊï∞Èáè„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">SizeType</span> <span class="nf">GetSlack</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">ArrayMax</span> <span class="o">-</span> <span class="n">ArrayNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="checkinvariants">CheckInvariants
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="nf">CheckInvariants</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">checkSlow</span><span class="p">((</span><span class="n">ArrayNum</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">ArrayMax</span> <span class="o">&gt;=</span> <span class="n">ArrayNum</span><span class="p">));</span> <span class="c1">// &amp; for one branch
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩøÁî®‰∫ÜÊåâ‰Ωç‰∏éÊìç‰ΩúÁ¨¶ <code>&amp;</code> ËÄå‰∏çÊòØÈÄªËæë‰∏éÊìç‰ΩúÁ¨¶ <code>&amp;&amp;</code>ÔºåÁõÆÁöÑÊòØ‰∏∫‰∫ÜÁ°Æ‰øù‰∏§‰∏™Êù°‰ª∂ÈÉΩÂú®Âêå‰∏ÄÂàÜÊîØ‰∏≠Ë¢´ËØÑ‰º∞Ôºå</p>
<p>Âç≥‰ΩøÁ¨¨‰∏Ä‰∏™Êù°‰ª∂‰∏∫ÂÅá‰πü‰∏ç‰ºöÁü≠Ë∑ØË∑≥ËøáÁ¨¨‰∫å‰∏™Êù°‰ª∂„ÄÇ</p>
<p>ËôΩÁÑ∂Âú®Ëøô‰∏™‰∏ä‰∏ãÊñá‰∏≠‰∏§ËÄÖÁöÑÊïàÊûúÊòØÁõ∏ÂêåÁöÑÔºå‰ΩÜÊåâ‰Ωç‰∏éÂèØ‰ª•Á°Æ‰øùÊâÄÊúâÊù°‰ª∂ÈÉΩË¢´Ê£ÄÊü•Âà∞„ÄÇ</p>
<p>**CheckInvariants ÂáΩÊï∞Ôºö**Áî®‰∫éÈ™åËØÅ TArray ÁöÑÂÜÖÈÉ®Áä∂ÊÄÅÊòØÂê¶ÂêàÊ≥ïÔºåÁ°Æ‰øù ArrayNum Âíå ArrayMax Êª°Ë∂≥Âü∫Êú¨ÁöÑÁ∫¶ÊùüÊù°‰ª∂„ÄÇ</p>
<p>**ÁõÆÁöÑÔºö**ÈÄöËøáËøô‰∫õÊ£ÄÊü•ÔºåÂèØ‰ª•Âú®ÂºÄÂèëËøáÁ®ã‰∏≠ÊçïËé∑ÊΩúÂú®ÁöÑÈîôËØØÔºåÂ¶ÇÈùûÊ≥ïÁöÑÁä∂ÊÄÅËÆæÁΩÆÊàñÊï∞ÁªÑÁÆ°ÁêÜ‰∏çÂΩìÔºå‰ªéËÄåÊèêÈ´ò‰ª£Á†ÅÁöÑÂÅ•Â£ÆÊÄßÂíåÂèØÈù†ÊÄß„ÄÇ</p>
<p>**ÊÄßËÉΩËÄÉËôëÔºö**‰ΩøÁî® checkSlow ÂÆèÁ°Æ‰øùËøô‰∫õÊ£ÄÊü•Âè™Âú®Ë∞ÉËØïÁâàÊú¨‰∏≠ÁîüÊïàÔºåÂú®ÂèëÂ∏ÉÁâàÊú¨‰∏≠Ë¢´‰ºòÂåñÊéâÔºå‰ª•ÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÊÄßËÉΩÂºÄÈîÄ„ÄÇ</p>
<h3 id="rangecheck">RangeCheck
</h3><p>Ê£ÄÊü•indexÊòØÂê¶Âú®Êï∞ÁªÑËåÉÂõ¥ÂÜÖ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="nf">RangeCheck</span><span class="p">(</span><span class="n">SizeType</span> <span class="n">Index</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">CheckInvariants</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Template property, branch will be optimized out
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="k">constexpr</span> <span class="p">(</span><span class="n">AllocatorType</span><span class="o">::</span><span class="n">RequireRangeCheck</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">checkf</span><span class="p">((</span><span class="n">Index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">Index</span> <span class="o">&lt;</span> <span class="n">ArrayNum</span><span class="p">),</span><span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;Array index out of bounds: %lld into an array of size %lld&#34;</span><span class="p">),(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">Index</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">ArrayNum</span><span class="p">);</span> <span class="c1">// &amp; for one branch
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>AllocatorType::RequireRangeCheck</p>
<p>Âú®ÈªòËÆ§ÁöÑÊÉÖÂÜµ‰∏ãÔºåAllocatorTypeÊòØTSizedHeapAllocator</p>
<p>TSizedHeapAllocator::RequireRangeCheck = true.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="kt">int</span> <span class="n">IndexSize</span><span class="p">,</span> <span class="k">typename</span> <span class="n">BaseMallocType</span> <span class="o">=</span> <span class="n">FMemory</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TSizedHeapAllocator</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">//..............
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">enum</span> <span class="p">{</span> <span class="n">NeedsElementType</span> <span class="o">=</span> <span class="nb">true</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="k">enum</span> <span class="p">{</span> <span class="n">RequireRangeCheck</span> <span class="o">=</span> <span class="nb">true</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="c1">//..............
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//*Ê£ÄÊü•ÊåáÂÆö‰∏ãÊ†áËåÉÂõ¥ÊòØÂê¶Âú®Êï∞ÁªÑËåÉÂõ¥ÂÜÖ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1">//*
</span></span></span><span class="line"><span class="cl"><span class="c1">//* @param IndexË¶ÅÊ£ÄÊü•ÁöÑËåÉÂõ¥Ëµ∑Âßã‰ΩçÁΩÆÁöÑÁ¥¢Âºï„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1">//* @param CountËåÉÂõ¥‰∏≠ÂÖÉÁ¥†ÁöÑÊï∞Èáè„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="nf">RangeCheck</span><span class="p">(</span><span class="n">SizeType</span> <span class="n">Index</span><span class="p">,</span> <span class="n">SizeType</span> <span class="n">Count</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">CheckInvariants</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Template property, branch will be optimized out
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="k">constexpr</span> <span class="p">(</span><span class="n">AllocatorType</span><span class="o">::</span><span class="n">RequireRangeCheck</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">checkf</span><span class="p">((</span><span class="n">Count</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">Index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">Index</span> <span class="o">+</span> <span class="n">Count</span> <span class="o">&lt;=</span> <span class="n">ArrayNum</span><span class="p">),</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;Array range out of bounds: index %lld and length %lld into an array of size %lld&#34;</span><span class="p">),</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">Index</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">Count</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">ArrayNum</span><span class="p">);</span> <span class="c1">// &amp; for one branch
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="isvalidindex">IsValidIndex
</h3><p>ÊµãËØïindexÊòØÂê¶ÊúâÊïàÔºåÂç≥Â§ß‰∫éÊàñÁ≠â‰∫é0ÔºåÂ∞è‰∫éÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†Êï∞Èáè„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">bool</span> <span class="nf">IsValidIndex</span><span class="p">(</span><span class="n">SizeType</span> <span class="n">Index</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Index</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">Index</span> <span class="o">&lt;</span> <span class="n">ArrayNum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="numbytes">NumBytes
</h3><p><code>SIZE_T</code>ÔºåËøôÊòØ‰∏Ä‰∏™Êó†Á¨¶Âè∑Êï¥Êï∞Á±ªÂûãÔºåÈÄöÂ∏∏Áî®‰∫éË°®Á§∫ÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/** @returns Number of bytes used, excluding slack */</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">SIZE_T</span> <span class="nf">NumBytes</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SIZE_T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">ArrayNum</span><span class="p">)</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ElementType</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Â∞Ü ArrayNum ËΩ¨Êç¢‰∏∫ SIZE_T Á±ªÂûãÔºå
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//‰ª•Á°Æ‰øù‰∏é sizeof(ElementType) ÁöÑ‰πòÁßØÁªìÊûúÊòØ SIZE_T Á±ªÂûãÔºåÈÅøÂÖçÊΩúÂú®ÁöÑÊ∫¢Âá∫ÈóÆÈ¢ò„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËÆ°ÁÆóÊï∞ÁªÑÂΩìÂâç‰ΩøÁî®ÁöÑÂ≠óËäÇÊï∞Ôºå‰∏çÂåÖÊã¨Êú™‰ΩøÁî®ÁöÑÈ¢ùÂ§ñÁ©∫Èó¥ÔºàÂç≥ÊâÄË∞ìÁöÑ‚ÄúÊùæÂºõ‚ÄùÊàñ‚Äúslack‚ÄùÔºâ„ÄÇ</p>
<p>Ëøô‰∏™ÂáΩÊï∞ÂØπ‰∫é‰∫ÜËß£Êï∞ÁªÑÁöÑÂÆûÈôÖÂÜÖÂ≠òÂç†Áî®ÈùûÂ∏∏ÊúâÁî®„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">MyArray</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">MyArray</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">MyArray</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">MyArray</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ËÆ°ÁÆóÂΩìÂâç‰ΩøÁî®ÁöÑÂ≠óËäÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">SIZE_T</span> <span class="n">bytesUsed</span> <span class="o">=</span> <span class="n">MyArray</span><span class="p">.</span><span class="n">NumBytes</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//NumBytesÁöÑËÆ°ÁÆóËøáÁ®ã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">bytesUsed</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SIZE_T</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span> <span class="c1">// ÂÅáËÆæ sizeof(int) == 4
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">bytesUsed</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">bytesUsed</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span> <span class="c1">// ÂΩìÂâç‰ΩøÁî®ÁöÑÂ≠óËäÇÊï∞ÊòØ 12 Â≠óËäÇ
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="getallocatedsize">GetAllocatedSize
</h3><p>ËøîÂõûÂÆπÂô®ÂàÜÈÖçÁöÑÂ§ßÂ∞è.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">SIZE_T</span> <span class="nf">GetAllocatedSize</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">AllocatorInstance</span><span class="p">.</span><span class="n">GetAllocatedSize</span><span class="p">(</span><span class="n">ArrayMax</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ElementType</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">SIZE_T</span> <span class="nf">GetAllocatedSize</span><span class="p">(</span><span class="n">SizeType</span> <span class="n">CurrentMax</span><span class="p">,</span> <span class="n">SIZE_T</span> <span class="n">NumBytesPerElement</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">CurrentMax</span> <span class="o">*</span> <span class="n">NumBytesPerElement</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>SIZE_T</code>ÔºåËøôÊòØ‰∏Ä‰∏™Êó†Á¨¶Âè∑Êï¥Êï∞Á±ªÂûãÔºåÈÄöÂ∏∏Áî®‰∫éË°®Á§∫ÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇ</p>
<h3 id="ÈáçËΩΩ">ÈáçËΩΩ[]
</h3><p>ËÆøÈóÆÊï∞ÁªÑ‰∏≠ÊåáÂÆöÁ¥¢ÂºïÂ§ÑÁöÑÂÖÉÁ¥†„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Array bracket operator. Returns reference to element at given index.
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @returns Reference to indexed element.
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="n">ElementType</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span><span class="n">SizeType</span> <span class="n">Index</span><span class="p">)</span> <span class="n">UE_LIFETIMEBOUND</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">RangeCheck</span><span class="p">(</span><span class="n">Index</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nf">GetData</span><span class="p">()[</span><span class="n">Index</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">FORCEINLINE</span> <span class="kt">void</span> <span class="nf">RangeCheck</span><span class="p">(</span><span class="n">SizeType</span> <span class="n">Index</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">CheckInvariants</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Template property, branch will be optimized out
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="k">constexpr</span> <span class="p">(</span><span class="n">AllocatorType</span><span class="o">::</span><span class="n">RequireRangeCheck</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">checkf</span><span class="p">((</span><span class="n">Index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">Index</span> <span class="o">&lt;</span> <span class="n">ArrayNum</span><span class="p">),</span><span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;Array index out of bounds: %lld into an array of size %lld&#34;</span><span class="p">),(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">Index</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">ArrayNum</span><span class="p">);</span> <span class="c1">// &amp; for one branch
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="getdata-1"><strong>GetData</strong>
</h4><p>ËøîÂõûÊåáÂêëÊï∞ÁªÑÊï∞ÊçÆÁöÑÊåáÈíàÔºåÂç≥ÂÆûÈôÖÂ≠òÂÇ®Êï∞ÁªÑÂÖÉÁ¥†ÁöÑÂÜÖÂ≠òÂùóÁöÑÈ¶ñÂú∞ÂùÄ„ÄÇ</p>
<p>ÈÄöËøá GetData()[Index] ËÆøÈóÆÊåáÂÆöÁ¥¢ÂºïÂ§ÑÁöÑÂÖÉÁ¥†„ÄÇ</p>
<h4 id="ue_lifetimebound-ÂÆè"><strong>UE_LIFETIMEBOUND ÂÆè</strong>
</h4><p>Áî®‰∫é <strong>ÈùôÊÄÅ‰ª£Á†ÅÂàÜÊûê</strong> ÁöÑÊ≥®Ëß£ÂÆèÔºåÂÖ∂Ê†∏ÂøÉ‰ΩúÁî®ÊòØÊ†áËÆ∞ÂáΩÊï∞ËøîÂõûÁöÑÊåáÈíàÊàñÂºïÁî® <strong>‰æùËµñ‰∫éÊüê‰∏™ÂØπË±°ÁöÑÁîüÂëΩÂë®Êúü</strong>ÔºåÂ∏ÆÂä©ÂºÄÂèëËÄÖÈÅøÂÖçÊÇ¨ÂûÇÊåáÈíàÔºàDangling PointerÔºâÈîôËØØ„ÄÇ</p>
<ul>
<li><strong>ÁºñËØëË≠¶Âëä/ÈîôËØØ</strong>Ôºö
Ëã•ËøîÂõûÁöÑÊåáÈíà/ÂºïÁî®ÁöÑÁîüÂëΩÂë®ÊúüË∂ÖÂá∫ÂÖ∂‰æùËµñÂØπË±°ÔºåÈùôÊÄÅÂàÜÊûêÂ∑•ÂÖ∑ÔºàÂ¶Ç UE ÁöÑÈùôÊÄÅÂàÜÊûêÂô®Êàñ Clang/GCC ÁöÑË≠¶ÂëäÔºâ‰ºöÂèëÂá∫Ë≠¶Âëä„ÄÇ</li>
<li><strong>ÊñáÊ°£ÊèêÁ§∫</strong>Ôºö
‰ª£Á†ÅÈòÖËØªËÄÖÂèØ‰ª•Áõ¥ËßÇÁúãÂá∫ËøîÂõûÂÄºÈúÄË¶ÅË∞®ÊÖéÂ§ÑÁêÜÁîüÂëΩÂë®Êúü„ÄÇ</li>
<li>ËØ•Â±ûÊÄß‰∏ªË¶ÅÁî®‰∫éÂ∏ÆÂä©ÈùôÊÄÅÂàÜÊûêÂ∑•ÂÖ∑Ê£ÄÊµãÊΩúÂú®ÁöÑÁîüÂëΩÂë®ÊúüÈóÆÈ¢ò„ÄÇËôΩÁÑ∂ÂÆÉ‰∏ç‰ºöÁõ¥Êé•ÂΩ±ÂìçÁºñËØëË°å‰∏∫Ôºå‰ΩÜÂèØ‰ª•Â∏ÆÂä©ÂºÄÂèëËÄÖÂèëÁé∞ÊΩúÂú®ÁöÑÈîôËØØ„ÄÇ</li>
<li>ÁÑ∂ËÄåÔºåËøáÂ∫¶‰ΩøÁî®ÂèØËÉΩ‰ºö‰Ωø‰ª£Á†ÅÂèòÂæóÂÜóÈïøÔºåÂõ†Ê≠§ÈúÄË¶ÅÂêàÁêÜ‰ΩøÁî®„ÄÇ</li>
</ul>
<p>ÂÆèÂÆö‰πâÂú®:</p>
<p><a class="link" href="https://github.com/EpicGames/UnrealEngine/blob/0c544b150542b59fc87bdcf64caae09f4e3bc11c/Engine/Source/Runtime/Core/Public/MSVC/MSVCPlatform.h#L31"  target="_blank" rel="noopener"
    >Engine/Source/Runtime/Core/Public/MSVC/MSVCPlatform.h</a></p>
<p><a class="link" href="https://github.com/EpicGames/UnrealEngine/blob/0c544b150542b59fc87bdcf64caae09f4e3bc11c/Engine/Source/Runtime/Core/Public/Clang/ClangPlatform.h#L28"  target="_blank" rel="noopener"
    >Engine/Source/Runtime/Core/Public/Clang/ClangPlatform.h</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#ifdef __has_cpp_attribute
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#if __has_cpp_attribute(msvc::lifetimebound)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>		<span class="cp">#define UE_LIFETIMEBOUND [[msvc::lifetimebound]]
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>	<span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//---------------//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define UE_LIFETIMEBOUND [[clang::lifetimebound]]
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">FContainer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">int32</span><span class="o">*</span> <span class="n">GetData</span><span class="p">()</span> <span class="n">UE_LIFETIMEBOUND</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Data</span><span class="p">;</span> <span class="c1">// ËøîÂõûÊåáÈíàÔºåÁîüÂëΩÂë®Êúü‰æùËµñ FContainer ÂÆû‰æã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">int32</span><span class="o">*</span> <span class="n">Data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">Test</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">int32</span><span class="o">*</span> <span class="n">Ptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">FContainer</span> <span class="n">Container</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Ptr</span> <span class="o">=</span> <span class="n">Container</span><span class="p">.</span><span class="n">GetData</span><span class="p">();</span> <span class="c1">// Ë≠¶ÂëäÔºöPtr ÁöÑÁîüÂëΩÂë®ÊúüË∂ÖÂá∫ Container
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="n">Ptr</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span> <span class="c1">// Âç±Èô©ÔºÅÊÇ¨ÂûÇÊåáÈíà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™ÂºïÁî®Á±ªÂûãÁöÑÂèÇÊï∞ÔºåÂπ∂Â∏åÊúõÁ°Æ‰øùËØ•ÂºïÁî®Âú®ÂÖ∂Êï¥‰∏™ÁîüÂëΩÂë®ÊúüÂÜÖÈÉΩÊòØÊúâÊïàÁöÑ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">ProcessObject</span><span class="p">(</span><span class="na">[[msvc::lifetimebound]]</span> <span class="k">const</span> <span class="n">MyClass</span><span class="o">&amp;</span> <span class="n">obj</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Â§ÑÁêÜÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>[[msvc::lifetimebound]]</code> Ê†áËÆ∞‰∫Ü <code>obj</code> ÂèÇÊï∞ÔºåË°®Á§∫ËØ•ÂºïÁî®Âú®ÂÖ∂ÁîüÂëΩÂë®ÊúüÂÜÖÂ∫î‰øùÊåÅÊúâÊïà„ÄÇ</p>
<p>Â¶ÇÊûúÁºñËØëÂô®ÊàñÈùôÊÄÅÂàÜÊûêÂ∑•ÂÖ∑Ê£ÄÊµãÂà∞ <code>obj</code> ÁöÑÁîüÂëΩÂë®ÊúüÂèØËÉΩË∂ÖÂá∫ÂÖ∂ÊúâÊïàËåÉÂõ¥Ôºå‰ºöÂèëÂá∫Áõ∏Â∫îÁöÑË≠¶ÂëäÊàñÈîôËØØ„ÄÇ</p>
<p>ÂØπ‰∫éËøîÂõûÂÄº‰πüÂèØ‰ª•‰ΩøÁî® <code>[[msvc::lifetimebound]]</code> Êù•Ê†áËÆ∞ÁîüÂëΩÂë®ÊúüËæπÁïå</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="na">[[msvc::lifetimebound]]</span> <span class="n">MyClass</span><span class="o">&amp;</span> <span class="n">GetObject</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="n">MyClass</span> <span class="n">instance</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">instance</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>GetObject</code> ËøîÂõû‰∏Ä‰∏™ÈùôÊÄÅÂØπË±°ÁöÑÂºïÁî®ÔºåÂπ∂‰∏î‰ΩøÁî® <code>[[msvc::lifetimebound]]</code> Ê†áËÆ∞ËøîÂõûÂÄºÔºåÁ°Æ‰øùËøîÂõûÁöÑÂºïÁî®Âú®ÂÖ∂Êï¥‰∏™ÁîüÂëΩÂë®ÊúüÂÜÖÈÉΩÊòØÊúâÊïàÁöÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyClass</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyClass</span><span class="p">(</span><span class="kt">int</span> <span class="n">v</span><span class="p">)</span> <span class="o">:</span> <span class="n">value</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">PrintValue</span><span class="p">()</span> <span class="k">const</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Value: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ‰ΩøÁî® [[msvc::lifetimebound]] Ê†áËÆ∞ÂáΩÊï∞ÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">ProcessObject</span><span class="p">(</span><span class="na">[[msvc::lifetimebound]]</span> <span class="k">const</span> <span class="n">MyClass</span><span class="o">&amp;</span> <span class="n">obj</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="p">.</span><span class="n">PrintValue</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyClass</span> <span class="n">obj</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">ProcessObject</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span> <span class="c1">// Ê≠£Á°Æ‰ΩøÁî®Ôºåobj Âú® ProcessObject Ë∞ÉÁî®ÊúüÈó¥ÊúâÊïà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰∏ãÈù¢ÁöÑ‰ª£Á†Å‰ºöÂØºËá¥ÊÇ¨Á©∫ÂºïÁî®ÔºåÈùôÊÄÅÂàÜÊûêÂ∑•ÂÖ∑ÂèØËÉΩ‰ºöÂèëÂá∫Ë≠¶Âëä
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// MyClass* ptr = new MyClass(100);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ProcessObject(*ptr);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// delete ptr; // obj Â∑≤ÁªèË¢´Âà†Èô§ÔºåProcessObject ‰∏≠ÁöÑÂºïÁî®Êó†Êïà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            ÂõΩÁ™ñ1573 - 
        
        2025 AKaKLya
    </section>
    
    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.0f4e44504cf40ab34cf124bb8fa71a5615b897b6d3841a1d2857b604319620c7.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
